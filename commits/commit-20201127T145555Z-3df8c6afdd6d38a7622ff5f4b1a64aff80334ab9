{
  "sha": "3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6M2RmOGM2YWZkZDZkMzhhNzYyMmZmNWY0YjFhNjRhZmY4MDMzNGFiOQ==",
  "commit": {
    "author": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2020-11-27T10:46:07Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2020-11-27T14:55:55Z"
    },
    "message": "gdb: fix potentially uninitialised variable\n\nIn commit:\n\n  commit 037d7135de575c9e0c20e9158c105979bfee339c\n  Date:   Mon Nov 16 11:36:56 2020 +0000\n\n      gdb: improve command completion for 'print', 'x', and 'display'\n\nA potential use of an uninitialised variable was introduced.  This is\nfixed in this commit.\n\nPreviously when analysing /FMT strings for tab completion we\nconsidered two possibilities, either the user has typed '/', or the\nuser has typed '/' followed by an alpha-numeric character, as these\nare the only valid FMT string characters.\n\nThis meant that if the user type, for example '/@' and then tried to\ntab complete gdb would use an uninitialised variable.\n\nCurrently only the first character after the '/' is checked to see if\nit is alpha-numeric, so if a user typed '/x@@' then gdb would be happy\nto treat this as a FMT string.\n\nGiven the goal of this change was primarily to allow tab completion of\nsymbols later in the command when a /FMT was used then I decided to\njust make the /FMT skipping less smart.  Now any characters after the\n'/' up to the first white space, will be treated as a FMT string.\n\ngdb/ChangeLog:\n\n\t* printcmd.c (skip_over_slash_fmt): Reorder code to ensure in_fmt\n\tis always initialized.",
    "tree": {
      "sha": "9403b027352d60730723ddbd205b017c78aa382b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9403b027352d60730723ddbd205b017c78aa382b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9/comments",
  "author": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b1eea24024e2db6ba46c1a2838e69593e9314d0d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b1eea24024e2db6ba46c1a2838e69593e9314d0d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b1eea24024e2db6ba46c1a2838e69593e9314d0d"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 23,
    "deletions": 7
  },
  "files": [
    {
      "sha": "e9beaaba6325e9f2938df34d18467e110bbbdc66",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
      "patch": "@@ -1,3 +1,8 @@\n+2020-11-27  Andrew Burgess  <andrew.burgess@embecosm.com>\n+\n+\t* printcmd.c (skip_over_slash_fmt): Reorder code to ensure in_fmt\n+\tis always initialized.\n+\n 2020-11-26  Przemyslaw Wirkus  <przemyslaw.wirkus@arm.com>\n \n \t* features/aarch64-fpu.c (create_feature_aarch64_fpu): Regenerate."
    },
    {
      "sha": "e95b88029501c4da655a8d051d07346560126b1c",
      "filename": "gdb/printcmd.c",
      "status": "modified",
      "additions": 18,
      "deletions": 7,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9/gdb/printcmd.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9/gdb/printcmd.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/printcmd.c?ref=3df8c6afdd6d38a7622ff5f4b1a64aff80334ab9",
      "patch": "@@ -1258,27 +1258,38 @@ skip_over_slash_fmt (completion_tracker &tracker, const char **args)\n       bool in_fmt;\n       tracker.set_use_custom_word_point (true);\n \n-      if (ISALNUM (text[1]) || ISSPACE (text[1]))\n+      if (text[1] == '\\0')\n \t{\n-\t  /* Skip over the actual format specification.  */\n+\t  /* The user tried to complete after typing just the '/' character\n+\t     of the /FMT string.  Step the completer past the '/', but we\n+\t     don't offer any completions.  */\n+\t  in_fmt = true;\n+\t  ++text;\n+\t}\n+      else\n+\t{\n+\t  /* The user has typed some characters after the '/', we assume\n+\t     this is a complete /FMT string, first skip over it.  */\n \t  text = skip_to_space (text);\n \n \t  if (*text == '\\0')\n \t    {\n+\t      /* We're at the end of the input string.  The user has typed\n+\t\t '/FMT' and asked for a completion.  Push an empty\n+\t\t completion string, this will cause readline to insert a\n+\t\t space so the user now has '/FMT '.  */\n \t      in_fmt = true;\n \t      tracker.add_completion (make_unique_xstrdup (text));\n \t    }\n \t  else\n \t    {\n+\t      /* The user has already typed things after the /FMT, skip the\n+\t\t whitespace and return false.  Whoever called this function\n+\t\t should then try to complete what comes next.  */\n \t      in_fmt = false;\n \t      text = skip_spaces (text);\n \t    }\n \t}\n-      else if (text[1] == '\\0')\n-\t{\n-\t  in_fmt = true;\n-\t  ++text;\n-\t}\n \n       tracker.advance_custom_word_point_by (text - *args);\n       *args = text;"
    }
  ]
}