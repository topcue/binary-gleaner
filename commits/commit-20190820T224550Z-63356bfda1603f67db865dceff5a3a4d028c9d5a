{
  "sha": "63356bfda1603f67db865dceff5a3a4d028c9d5a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjMzNTZiZmRhMTYwM2Y2N2RiODY1ZGNlZmY1YTNhNGQwMjhjOWQ1YQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-13T22:15:30Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-20T22:45:50Z"
    },
    "message": "Change tui_check_register_values to be a method\n\nThis changes tui_check_register_values to be a method on\ntui_data_window.  An additional check in tui_register_changed is\nneeded, because TUI_DATA_WIN could be NULL at this point.\n\n2019-08-20  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-regs.h (struct tui_data_window) <check_register_values>:\n\tDeclare.\n\t(tui_check_register_values): Don't declare.\n\t* tui/tui-regs.c (tui_data_window::check_register_values): Rename\n\tfrom tui_check_register_values.\n\t* tui/tui-hooks.c (tui_register_changed): Update.",
    "tree": {
      "sha": "39a4788928f543c183f41e3ab5226db42ef7694a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/39a4788928f543c183f41e3ab5226db42ef7694a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/63356bfda1603f67db865dceff5a3a4d028c9d5a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/63356bfda1603f67db865dceff5a3a4d028c9d5a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/63356bfda1603f67db865dceff5a3a4d028c9d5a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/63356bfda1603f67db865dceff5a3a4d028c9d5a/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "42cc14a753e6edbcd43cdaa2dc2ee614a27aeeb2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/42cc14a753e6edbcd43cdaa2dc2ee614a27aeeb2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/42cc14a753e6edbcd43cdaa2dc2ee614a27aeeb2"
    }
  ],
  "stats": {
    "total": 48,
    "additions": 28,
    "deletions": 20
  },
  "files": [
    {
      "sha": "1e93dd0868a36cd57a52ca643998573981743d05",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=63356bfda1603f67db865dceff5a3a4d028c9d5a",
      "patch": "@@ -1,3 +1,12 @@\n+2019-08-20  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-regs.h (struct tui_data_window) <check_register_values>:\n+\tDeclare.\n+\t(tui_check_register_values): Don't declare.\n+\t* tui/tui-regs.c (tui_data_window::check_register_values): Rename\n+\tfrom tui_check_register_values.\n+\t* tui/tui-hooks.c (tui_register_changed): Update.\n+\n 2019-08-20  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-regs.c (tui_reg_layout): Move later."
    },
    {
      "sha": "2555da7f1ae2916070cb0edeede6142c2414dd23",
      "filename": "gdb/tui/tui-hooks.c",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-hooks.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-hooks.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-hooks.c?ref=63356bfda1603f67db865dceff5a3a4d028c9d5a",
      "patch": "@@ -71,6 +71,9 @@ tui_register_changed (struct frame_info *frame, int regno)\n {\n   struct frame_info *fi;\n \n+  if (!tui_is_window_visible (DATA_WIN))\n+    return;\n+\n   /* The frame of the register that was changed may differ from the selected\n      frame, but we only want to show the register values of the selected frame.\n      And even if the frames differ a register change made in one can still show\n@@ -80,7 +83,7 @@ tui_register_changed (struct frame_info *frame, int regno)\n   if (tui_refreshing_registers == 0)\n     {\n       tui_refreshing_registers = 1;\n-      tui_check_register_values (fi);\n+      TUI_DATA_WIN->check_register_values (fi);\n       tui_refreshing_registers = 0;\n     }\n }\n@@ -152,7 +155,7 @@ tui_refresh_frame_and_register_information (int registers_too_p)\n       && (frame_info_changed_p || registers_too_p))\n     {\n       tui_refreshing_registers = 1;\n-      tui_check_register_values (fi);\n+      TUI_DATA_WIN->check_register_values (fi);\n       tui_refreshing_registers = 0;\n     }\n }"
    },
    {
      "sha": "cd343edc314e93ce2234bc86bb1bd9080565a6b4",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 12,
      "deletions": 17,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=63356bfda1603f67db865dceff5a3a4d028c9d5a",
      "patch": "@@ -555,29 +555,24 @@ tui_data_window::refresh_window ()\n    given a particular frame.  If the values have changed, they are\n    updated with the new value and highlighted.  */\n void\n-tui_check_register_values (struct frame_info *frame)\n+tui_data_window::check_register_values (struct frame_info *frame)\n {\n-  if (TUI_DATA_WIN != NULL\n-      && TUI_DATA_WIN->is_visible ())\n+  if (regs_content.empty () && display_regs)\n+    tui_show_registers (current_group);\n+  else\n     {\n-      if (TUI_DATA_WIN->regs_content.empty ()\n-\t  && TUI_DATA_WIN->display_regs)\n-\ttui_show_registers (TUI_DATA_WIN->current_group);\n-      else\n+      for (auto &&data_item_win_ptr : regs_content)\n \t{\n-\t  for (auto &&data_item_win_ptr : TUI_DATA_WIN->regs_content)\n-\t    {\n-\t      int was_hilighted;\n+\t  int was_hilighted;\n \n-\t      was_hilighted = data_item_win_ptr->highlight;\n+\t  was_hilighted = data_item_win_ptr->highlight;\n \n-              tui_get_register (frame, data_item_win_ptr.get (),\n-                                data_item_win_ptr->item_no,\n-\t\t\t\t&data_item_win_ptr->highlight);\n+\t  tui_get_register (frame, data_item_win_ptr.get (),\n+\t\t\t    data_item_win_ptr->item_no,\n+\t\t\t    &data_item_win_ptr->highlight);\n \n-\t      if (data_item_win_ptr->highlight || was_hilighted)\n-\t\ttui_display_register (data_item_win_ptr.get ());\n-\t    }\n+\t  if (data_item_win_ptr->highlight || was_hilighted)\n+\t    tui_display_register (data_item_win_ptr.get ());\n \t}\n     }\n }"
    },
    {
      "sha": "01c2ea6dad403df46a389171d45854d6c4a6ddb3",
      "filename": "gdb/tui/tui-regs.h",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-regs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/63356bfda1603f67db865dceff5a3a4d028c9d5a/gdb/tui/tui-regs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.h?ref=63356bfda1603f67db865dceff5a3a4d028c9d5a",
      "patch": "@@ -100,6 +100,8 @@ struct tui_data_window : public tui_win_info\n      started from.  If nothing is displayed (-1) is returned.  */\n   int display_registers_from_line (int line_no);\n \n+  void check_register_values (struct frame_info *frame);\n+\n protected:\n \n   void do_scroll_vertical (int num_to_scroll) override;\n@@ -120,7 +122,6 @@ struct tui_data_window : public tui_win_info\n   void rerender () override;\n };\n \n-extern void tui_check_register_values (struct frame_info *);\n extern void tui_show_registers (struct reggroup *group);\n \n #endif /* TUI_TUI_REGS_H */"
    }
  ]
}