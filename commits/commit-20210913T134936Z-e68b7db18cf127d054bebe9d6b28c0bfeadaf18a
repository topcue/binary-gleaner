{
  "sha": "e68b7db18cf127d054bebe9d6b28c0bfeadaf18a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTY4YjdkYjE4Y2YxMjdkMDU0YmViZTlkNmIyOGMwYmZlYWRhZjE4YQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-09-13T13:49:36Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-09-13T13:49:36Z"
    },
    "message": "Fix no-Python build\n\nA build without Python will currently fail, because\nselftests::test_python uses gdb_python_initialized, which is only\nconditionally defined.\n\nThis patch fixes the build by making test_python also be conditionally\ndefined.  I chose this approach because the selftest will fail if\nPython is not enabled, so it didn't seem useful to leave it defined.",
    "tree": {
      "sha": "21465e4fb1f96303374a68c9be2a939130ec1ebe",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/21465e4fb1f96303374a68c9be2a939130ec1ebe"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "18287cf8b19533429a4b7f17726c93d1f292e1df",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/18287cf8b19533429a4b7f17726c93d1f292e1df",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/18287cf8b19533429a4b7f17726c93d1f292e1df"
    }
  ],
  "stats": {
    "total": 6,
    "additions": 4,
    "deletions": 2
  },
  "files": [
    {
      "sha": "37eacefd8fcf8afc6cdb4a0c9e86a6bb852951bc",
      "filename": "gdb/python/python.c",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a/gdb/python/python.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e68b7db18cf127d054bebe9d6b28c0bfeadaf18a/gdb/python/python.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/python/python.c?ref=e68b7db18cf127d054bebe9d6b28c0bfeadaf18a",
      "patch": "@@ -1878,8 +1878,6 @@ do_start_initialization ()\n   return true;\n }\n \n-#endif /* HAVE_PYTHON */\n-\n #if GDB_SELF_TEST\n namespace selftests {\n \n@@ -1921,6 +1919,8 @@ test_python ()\n } // namespace selftests\n #endif /* GDB_SELF_TEST */\n \n+#endif /* HAVE_PYTHON */\n+\n /* See python.h.  */\n cmd_list_element *python_cmd_element = nullptr;\n \n@@ -2020,9 +2020,11 @@ python executable.\"),\n \t\t\t\t&user_set_python_list,\n \t\t\t\t&user_show_python_list);\n \n+#ifdef HAVE_PYTHON\n #if GDB_SELF_TEST\n   selftests::register_test (\"python\", selftests::test_python);\n #endif /* GDB_SELF_TEST */\n+#endif /* HAVE_PYTHON */\n }\n \n #ifdef HAVE_PYTHON"
    }
  ]
}