{
  "sha": "225f1684514d875f46291ecc595c479b4934a3d6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjI1ZjE2ODQ1MTRkODc1ZjQ2MjkxZWNjNTk1YzQ3OWI0OTM0YTNkNg==",
  "commit": {
    "author": {
      "name": "Joe Ramsay",
      "email": "joe.ramsay@.arm.com",
      "date": "2020-08-12T15:44:54Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-08-12T15:44:54Z"
    },
    "message": "[PATCH] gas: arm: Fix IT-predicated MVE vcvt\n\n\t* config/tc-arm.c (do_neon_cvt_1): Parse vcvtne as vcvt-ne for\n\tNS_FD shape when MVE is present\n\t* testsuite/gas/arm/mve-vcvtne-it-bad.d: New test.\n\t* testsuite/gas/arm/mve-vcvtne-it-bad.l: New test.\n\t* testsuite/gas/arm/mve-vcvtne-it-bad.s: New test.\n\t* testsuite/gas/arm/mve-vcvtne-it.d: New test.\n\t* testsuite/gas/arm/mve-vcvtne-it.s: New test.",
    "tree": {
      "sha": "c7c0f16cfb876d9e9881538176882f4c041d922e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c7c0f16cfb876d9e9881538176882f4c041d922e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/225f1684514d875f46291ecc595c479b4934a3d6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/225f1684514d875f46291ecc595c479b4934a3d6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/225f1684514d875f46291ecc595c479b4934a3d6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/225f1684514d875f46291ecc595c479b4934a3d6/comments",
  "author": null,
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2fef937354881d1de567b2c0df28718acd8198df",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2fef937354881d1de567b2c0df28718acd8198df",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2fef937354881d1de567b2c0df28718acd8198df"
    }
  ],
  "stats": {
    "total": 51,
    "additions": 43,
    "deletions": 8
  },
  "files": [
    {
      "sha": "baa788f4fed06339923ed0b8b9dab6e9efef9b79",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -1,3 +1,13 @@\n+2020-08-12  Joe Ramsay  <joe.ramsay@.arm.com>\n+\n+\t* config/tc-arm.c (do_neon_cvt_1): Parse vcvtne as vcvt-ne for\n+\tNS_FD shape when MVE is present\n+\t* testsuite/gas/arm/mve-vcvtne-it-bad.d: New test.\n+\t* testsuite/gas/arm/mve-vcvtne-it-bad.l: New test.\n+\t* testsuite/gas/arm/mve-vcvtne-it-bad.s: New test.\n+\t* testsuite/gas/arm/mve-vcvtne-it.d: New test.\n+\t* testsuite/gas/arm/mve-vcvtne-it.s: New test.\n+\n 2020-08-12  Alex Coplan  <alex.coplan@arm.com>\n \n \t* testsuite/gas/aarch64/mpam-bad.d: New test."
    },
    {
      "sha": "25559216fc34a68d946f315f2f0092dce3058726",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 10,
      "deletions": 8,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -19087,6 +19087,16 @@ do_neon_cvt_1 (enum neon_cvt_mode mode)\n       return;\n     }\n \n+  if ((rs == NS_FD || rs == NS_QQI) && mode == neon_cvt_mode_n\n+      && ARM_CPU_HAS_FEATURE (cpu_variant, mve_ext))\n+    {\n+      /* We are dealing with vcvt with the 'ne' condition.  */\n+      inst.cond = 0x1;\n+      inst.instruction = N_MNEM_vcvt;\n+      do_neon_cvt_1 (neon_cvt_mode_z);\n+      return;\n+    }\n+\n   /* VFP rather than Neon conversions.  */\n   if (flavour >= neon_cvt_flavour_first_fp)\n     {\n@@ -19115,14 +19125,6 @@ do_neon_cvt_1 (enum neon_cvt_mode mode)\n \t\t\t\t\t     NEON_CHECK_CC | NEON_CHECK_ARCH))\n \t    return;\n \t}\n-      else if (mode == neon_cvt_mode_n)\n-\t{\n-\t  /* We are dealing with vcvt with the 'ne' condition.  */\n-\t  inst.cond = 0x1;\n-\t  inst.instruction = N_MNEM_vcvt;\n-\t  do_neon_cvt_1 (neon_cvt_mode_z);\n-\t  return;\n-\t}\n       /* fall through.  */\n     case NS_DDI:\n       {"
    },
    {
      "sha": "110f45f28a6bc4f29f9ebdc6cb60114084c851c4",
      "filename": "gas/testsuite/gas/arm/mve-vcvtne-it-bad.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vcvtne-it-bad.d?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -0,0 +1,5 @@\n+# name: MVE vcvtne instruction outside of IT block\n+# as: -march=armv8.1-m.main+mve.fp+fp.dp\n+# error_output: mve-vcvtne-it-bad.l\n+\n+.*: +file format .*arm.*"
    },
    {
      "sha": "8765ae0d6912e322ecabfb215f5401327fa97cbe",
      "filename": "gas/testsuite/gas/arm/mve-vcvtne-it-bad.l",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vcvtne-it-bad.l?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -0,0 +1,2 @@\n+[^:]*: Assembler messages:\n+[^:]*:3: Error: thumb conditional instruction should be in IT block -- `vcvtne.s32.f64 s13,d8'"
    },
    {
      "sha": "e4c1b99906536c3c6cc8334e98d84cd170c19d76",
      "filename": "gas/testsuite/gas/arm/mve-vcvtne-it-bad.s",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it-bad.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vcvtne-it-bad.s?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -0,0 +1,3 @@\n+.syntax unified\n+.text\n+vcvtne.s32.f64\ts13, d8"
    },
    {
      "sha": "b376a9815c1b24fe5f9f98eea265febc26aef838",
      "filename": "gas/testsuite/gas/arm/mve-vcvtne-it.d",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vcvtne-it.d?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -0,0 +1,9 @@\n+# name: Armv8.1-M Mainline vcvt instruction in it block (with MVE)\n+# as: -march=armv8.1-m.main+mve.fp+fp.dp\n+# objdump: -dr --prefix-addresses --show-raw-insn -marmv8.1-m.main\n+\n+.*: +file format .*arm.*\n+\n+Disassembly of section .text:\n+^[^>]*> bf18[ \t]+it[ \t]+ne\n+^[^>]*> eefd 6bc8[ \t]+vcvtne.s32.f64[ \t]+s13, d8\n\\ No newline at end of file"
    },
    {
      "sha": "a9f260681283c3c68bace0abaa6754a4cab9c62f",
      "filename": "gas/testsuite/gas/arm/mve-vcvtne-it.s",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/225f1684514d875f46291ecc595c479b4934a3d6/gas/testsuite/gas/arm/mve-vcvtne-it.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vcvtne-it.s?ref=225f1684514d875f46291ecc595c479b4934a3d6",
      "patch": "@@ -0,0 +1,4 @@\n+.syntax unified\n+.text\n+it ne\n+vcvtne.s32.f64\ts13, d8"
    }
  ]
}