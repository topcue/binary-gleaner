{
  "sha": "b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
  "node_id": "C_kwDOANOeidoAKGIzYTlmZTZmNTFmZDM5MjJjZTc5NzhiNmJhNWNlMGNiZGYzMzg4NWU",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-10-23T14:37:33Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-10-25T17:38:04Z"
    },
    "message": "x86: Also handle stores for -muse-unaligned-vector-move\n\n\t* config/tc-i386.c (encode_with_unaligned_vector_move): Also\n\thandle stores.\n\t* testsuite/gas/i386/unaligned-vector-move.s: Add stores.\n\t* testsuite/gas/i386/unaligned-vector-move.d: Updated.\n\t* testsuite/gas/i386/x86-64-unaligned-vector-move.d: Likewise.",
    "tree": {
      "sha": "c54c0934db19b16741de0580e2bfb1d6bdc793d2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c54c0934db19b16741de0580e2bfb1d6bdc793d2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9de46719da07a439af59088d69cb4dd70c030612",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9de46719da07a439af59088d69cb4dd70c030612",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9de46719da07a439af59088d69cb4dd70c030612"
    }
  ],
  "stats": {
    "total": 89,
    "additions": 74,
    "deletions": 15
  },
  "files": [
    {
      "sha": "320ea7e5185dbe8bcac25e0091a753e5ff1524da",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
      "patch": "@@ -4083,13 +4083,15 @@ encode_with_unaligned_vector_move (void)\n {\n   switch (i.tm.base_opcode)\n     {\n-    case 0x28:\n+    case 0x28:\t/* Load instructions.  */\n+    case 0x29:\t/* Store instructions.  */\n       /* movaps/movapd/vmovaps/vmovapd.  */\n       if (i.tm.opcode_modifier.opcodespace == SPACE_0F\n \t  && i.tm.opcode_modifier.opcodeprefix <= PREFIX_0X66)\n-\ti.tm.base_opcode = 0x10;\n+\ti.tm.base_opcode = 0x10 | (i.tm.base_opcode & 1);\n       break;\n-    case 0x6f:\n+    case 0x6f:\t/* Load instructions.  */\n+    case 0x7f:\t/* Store instructions.  */\n       /* movdqa/vmovdqa/vmovdqa64/vmovdqa32. */\n       if (i.tm.opcode_modifier.opcodespace == SPACE_0F\n \t  && i.tm.opcode_modifier.opcodeprefix == PREFIX_0X66)"
    },
    {
      "sha": "9840ee8bec76111d76c623b74cd3199a88b27662",
      "filename": "gas/testsuite/gas/i386/unaligned-vector-move.d",
      "status": "modified",
      "additions": 23,
      "deletions": 4,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/unaligned-vector-move.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/unaligned-vector-move.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/unaligned-vector-move.d?ref=b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
      "patch": "@@ -9,14 +9,33 @@ Disassembly of section .text:\n \n 0+ <_start>:\n  +[a-f0-9]+:\t0f 10 d1             \tmovups %xmm1,%xmm2\n+ +[a-f0-9]+:\t0f 10 10             \tmovups \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t0f 11 08             \tmovups %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\t66 0f 10 d1          \tmovupd %xmm1,%xmm2\n+ +[a-f0-9]+:\t66 0f 10 10          \tmovupd \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t66 0f 11 08          \tmovupd %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tf3 0f 6f d1          \tmovdqu %xmm1,%xmm2\n+ +[a-f0-9]+:\tf3 0f 6f 10          \tmovdqu \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\tf3 0f 7f 08          \tmovdqu %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 f8 10 d1          \tvmovups %xmm1,%xmm2\n+ +[a-f0-9]+:\tc5 f8 10 10          \tvmovups \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\tc5 f8 11 08          \tvmovups %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 f9 10 d1          \tvmovupd %xmm1,%xmm2\n+ +[a-f0-9]+:\tc5 f9 10 10          \tvmovupd \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\tc5 f9 11 08          \tvmovupd %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 fa 6f d1          \tvmovdqu %xmm1,%xmm2\n- +[a-f0-9]+:\tc5 f8 10 d1          \tvmovups %xmm1,%xmm2\n- +[a-f0-9]+:\t62 f1 fd 09 10 d1    \tvmovupd %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\tc5 fa 6f 10          \tvmovdqu \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\tc5 fa 7f 08          \tvmovdqu %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\t62 f1 7c 09 10 d1    \tvmovups %xmm1,%xmm2\\{%k1\\}\n- +[a-f0-9]+:\t62 f1 7e 09 6f d1    \tvmovdqu32 %xmm1,%xmm2\\{%k1\\}\n- +[a-f0-9]+:\t62 f1 fe 09 6f d1    \tvmovdqu64 %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 7c 09 10 10    \tvmovups \\(%eax\\),%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 7c 09 11 08    \tvmovups %xmm1,\\(%eax\\)\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 fd 09 10 d1    \tvmovupd %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 fd 09 10 10    \tvmovupd \\(%eax\\),%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 fd 09 11 08    \tvmovupd %xmm1,\\(%eax\\)\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 7e 08 6f d1    \tvmovdqu32 %xmm1,%xmm2\n+ +[a-f0-9]+:\t62 f1 7e 08 6f 10    \tvmovdqu32 \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t62 f1 7e 08 7f 08    \tvmovdqu32 %xmm1,\\(%eax\\)\n+ +[a-f0-9]+:\t62 f1 fe 08 6f d1    \tvmovdqu64 %xmm1,%xmm2\n+ +[a-f0-9]+:\t62 f1 fe 08 6f 10    \tvmovdqu64 \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t62 f1 fe 08 7f 08    \tvmovdqu64 %xmm1,\\(%eax\\)\n #pass"
    },
    {
      "sha": "6966e5d4d506db1dd87f9be233ae538e988b1e6b",
      "filename": "gas/testsuite/gas/i386/unaligned-vector-move.s",
      "status": "modified",
      "additions": 23,
      "deletions": 4,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/unaligned-vector-move.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/unaligned-vector-move.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/unaligned-vector-move.s?ref=b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
      "patch": "@@ -3,13 +3,32 @@\n \t.text\n _start:\n \tmovaps %xmm1, %xmm2\n+\tmovaps (%eax), %xmm2\n+\tmovaps %xmm1, (%eax)\n \tmovapd %xmm1, %xmm2\n+\tmovapd (%eax), %xmm2\n+\tmovapd %xmm1, (%eax)\n \tmovdqa %xmm1, %xmm2\n+\tmovdqa (%eax), %xmm2\n+\tmovdqa %xmm1, (%eax)\n \tvmovaps %xmm1, %xmm2\n+\tvmovaps (%eax), %xmm2\n+\tvmovaps %xmm1, (%eax)\n \tvmovapd %xmm1, %xmm2\n+\tvmovapd (%eax), %xmm2\n+\tvmovapd %xmm1, (%eax)\n \tvmovdqa %xmm1, %xmm2\n-\tvmovaps %xmm1, %xmm2\n-\tvmovapd %xmm1, %xmm2{%k1}\n+\tvmovdqa (%eax), %xmm2\n+\tvmovdqa %xmm1, (%eax)\n \tvmovaps %xmm1, %xmm2{%k1}\n-\tvmovdqa32 %xmm1, %xmm2{%k1}\n-\tvmovdqa64 %xmm1, %xmm2{%k1}\n+\tvmovaps (%eax), %xmm2{%k1}\n+\tvmovaps %xmm1, (%eax){%k1}\n+\tvmovapd %xmm1, %xmm2{%k1}\n+\tvmovapd (%eax), %xmm2{%k1}\n+\tvmovapd %xmm1, (%eax){%k1}\n+\tvmovdqa32 %xmm1, %xmm2\n+\tvmovdqa32 (%eax), %xmm2\n+\tvmovdqa32 %xmm1, (%eax)\n+\tvmovdqa64 %xmm1, %xmm2\n+\tvmovdqa64 (%eax), %xmm2\n+\tvmovdqa64 %xmm1, (%eax)"
    },
    {
      "sha": "32a6f85f67159cc41d281f1593decd707d764d3f",
      "filename": "gas/testsuite/gas/i386/x86-64-unaligned-vector-move.d",
      "status": "modified",
      "additions": 23,
      "deletions": 4,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/x86-64-unaligned-vector-move.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e/gas/testsuite/gas/i386/x86-64-unaligned-vector-move.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-unaligned-vector-move.d?ref=b3a9fe6f51fd3922ce7978b6ba5ce0cbdf33885e",
      "patch": "@@ -10,14 +10,33 @@ Disassembly of section .text:\n \n 0+ <_start>:\n  +[a-f0-9]+:\t0f 10 d1             \tmovups %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 0f 10 10          \tmovups \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 0f 11 08          \tmovups %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\t66 0f 10 d1          \tmovupd %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 66 0f 10 10       \tmovupd \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 66 0f 11 08       \tmovupd %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tf3 0f 6f d1          \tmovdqu %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 f3 0f 6f 10       \tmovdqu \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 f3 0f 7f 08       \tmovdqu %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 f8 10 d1          \tvmovups %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 c5 f8 10 10       \tvmovups \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 c5 f8 11 08       \tvmovups %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 f9 10 d1          \tvmovupd %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 c5 f9 10 10       \tvmovupd \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 c5 f9 11 08       \tvmovupd %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\tc5 fa 6f d1          \tvmovdqu %xmm1,%xmm2\n- +[a-f0-9]+:\tc5 f8 10 d1          \tvmovups %xmm1,%xmm2\n- +[a-f0-9]+:\t62 f1 fd 09 10 d1    \tvmovupd %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t67 c5 fa 6f 10       \tvmovdqu \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 c5 fa 7f 08       \tvmovdqu %xmm1,\\(%eax\\)\n  +[a-f0-9]+:\t62 f1 7c 09 10 d1    \tvmovups %xmm1,%xmm2\\{%k1\\}\n- +[a-f0-9]+:\t62 f1 7e 09 6f d1    \tvmovdqu32 %xmm1,%xmm2\\{%k1\\}\n- +[a-f0-9]+:\t62 f1 fe 09 6f d1    \tvmovdqu64 %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t67 62 f1 7c 09 10 10 \tvmovups \\(%eax\\),%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t67 62 f1 7c 09 11 08 \tvmovups %xmm1,\\(%eax\\)\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 fd 09 10 d1    \tvmovupd %xmm1,%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t67 62 f1 fd 09 10 10 \tvmovupd \\(%eax\\),%xmm2\\{%k1\\}\n+ +[a-f0-9]+:\t67 62 f1 fd 09 11 08 \tvmovupd %xmm1,\\(%eax\\)\\{%k1\\}\n+ +[a-f0-9]+:\t62 f1 7e 08 6f d1    \tvmovdqu32 %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 62 f1 7e 08 6f 10 \tvmovdqu32 \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 62 f1 7e 08 7f 08 \tvmovdqu32 %xmm1,\\(%eax\\)\n+ +[a-f0-9]+:\t62 f1 fe 08 6f d1    \tvmovdqu64 %xmm1,%xmm2\n+ +[a-f0-9]+:\t67 62 f1 fe 08 6f 10 \tvmovdqu64 \\(%eax\\),%xmm2\n+ +[a-f0-9]+:\t67 62 f1 fe 08 7f 08 \tvmovdqu64 %xmm1,\\(%eax\\)\n #pass"
    }
  ]
}