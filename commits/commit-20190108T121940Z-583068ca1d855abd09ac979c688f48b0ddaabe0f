{
  "sha": "583068ca1d855abd09ac979c688f48b0ddaabe0f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTgzMDY4Y2ExZDg1NWFiZDA5YWM5NzljNjg4ZjQ4YjBkZGFhYmUwZg==",
  "commit": {
    "author": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-01-07T09:16:16Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-01-08T12:19:40Z"
    },
    "message": "gdb: Move declarations from symtab.h to source.h\n\nDeclarations for functions in source.c are split between source.h and\nsymtab.h.  This commit moves the small number that are in symtab.h\ninto source.h.  There's just one file that needs to add an include of\nsource.h in order to build.\n\nI've moved the function header comments from source.c to source.h\ninline with the recommended GDB style.\n\ngdb/ChangeLog:\n\n\t* source.c (select_source_symtab): Move header comment to\n\tdeclaration in source.h.\n\t(forget_cached_source_info_for_objfile): Likewise.\n\t(forget_cached_source_info): Likewise.\n\t(identify_source_line): Likewise.\n\t* source.h (identify_source_line): Move declaration from symtab.h\n\tand add comment from source.c\n\t(print_source_lines): Likewise.\n\t(forget_cached_source_info_for_objfile): Likewise.\n\t(forget_cached_source_info): Likewise.\n\t(select_source_symtab): Likewise.\n\t(enum print_source_lines_flag): Move definition from symtab.h.\n\t* symtab.h (identify_source_line): Move declaration to source.h.\n\t(print_source_lines): Likewise.\n\t(forget_cached_source_info_for_objfile): Likewise.\n\t(forget_cached_source_info): Likewise.\n\t(select_source_symtab): Likewise.\n\t(enum print_source_lines_flag): Move definition to source.h.\n\t* tui/tui-hooks.c: Add 'source.h' include.",
    "tree": {
      "sha": "28b2215fa6d4c9b14f0ff9d299a4abfbe4efbc12",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/28b2215fa6d4c9b14f0ff9d299a4abfbe4efbc12"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/583068ca1d855abd09ac979c688f48b0ddaabe0f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/583068ca1d855abd09ac979c688f48b0ddaabe0f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/583068ca1d855abd09ac979c688f48b0ddaabe0f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/583068ca1d855abd09ac979c688f48b0ddaabe0f/comments",
  "author": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ec98a4ad5bfcba33deb5cb786c023082adbbfb46",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ec98a4ad5bfcba33deb5cb786c023082adbbfb46",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ec98a4ad5bfcba33deb5cb786c023082adbbfb46"
    }
  ],
  "stats": {
    "total": 125,
    "additions": 77,
    "deletions": 48
  },
  "files": [
    {
      "sha": "71345ac869531893c05381e7b1e9cff7e6378a79",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=583068ca1d855abd09ac979c688f48b0ddaabe0f",
      "patch": "@@ -1,3 +1,25 @@\n+2019-01-08  Andrew Burgess  <andrew.burgess@embecosm.com>\n+\n+\t* source.c (select_source_symtab): Move header comment to\n+\tdeclaration in source.h.\n+\t(forget_cached_source_info_for_objfile): Likewise.\n+\t(forget_cached_source_info): Likewise.\n+\t(identify_source_line): Likewise.\n+\t* source.h (identify_source_line): Move declaration from symtab.h\n+\tand add comment from source.c\n+\t(print_source_lines): Likewise.\n+\t(forget_cached_source_info_for_objfile): Likewise.\n+\t(forget_cached_source_info): Likewise.\n+\t(select_source_symtab): Likewise.\n+\t(enum print_source_lines_flag): Move definition from symtab.h.\n+\t* symtab.h (identify_source_line): Move declaration to source.h.\n+\t(print_source_lines): Likewise.\n+\t(forget_cached_source_info_for_objfile): Likewise.\n+\t(forget_cached_source_info): Likewise.\n+\t(select_source_symtab): Likewise.\n+\t(enum print_source_lines_flag): Move definition to source.h.\n+\t* tui/tui-hooks.c: Add 'source.h' include.\n+\n 2019-01-08  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* source.c (print_source_lines_base): Handle requests to print"
    },
    {
      "sha": "f865c8a9508d8a79a40290ae9cef5fc2f1e6bf1e",
      "filename": "gdb/source.c",
      "status": "modified",
      "additions": 6,
      "deletions": 24,
      "changes": 30,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/source.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/source.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/source.c?ref=583068ca1d855abd09ac979c688f48b0ddaabe0f",
      "patch": "@@ -233,13 +233,7 @@ clear_current_source_symtab_and_line (void)\n   current_source_line = 0;\n }\n \n-/* Set the source file default for the \"list\" command to be S.\n-\n-   If S is NULL, and we don't have a default, find one.  This\n-   should only be called when the user actually tries to use the\n-   default, since we produce an error if we can't find a reasonable\n-   default.  Also, since this can cause symbols to be read, doing it\n-   before we need to would make things slower than necessary.  */\n+/* See source.h.  */\n \n void\n select_source_symtab (struct symtab *s)\n@@ -351,8 +345,7 @@ show_directories_command (struct ui_file *file, int from_tty,\n   show_directories_1 (NULL, from_tty);\n }\n \n-/* Forget line positions and file names for the symtabs in a\n-   particular objfile.  */\n+/* See source.h.  */\n \n void\n forget_cached_source_info_for_objfile (struct objfile *objfile)\n@@ -378,9 +371,7 @@ forget_cached_source_info_for_objfile (struct objfile *objfile)\n     objfile->sf->qf->forget_cached_source_info (objfile);\n }\n \n-/* Forget what we learned about line positions in source files, and\n-   which directories contain them; must check again now since files\n-   may be found in a different directory now.  */\n+/* See source.h.  */\n \n void\n forget_cached_source_info (void)\n@@ -1226,14 +1217,7 @@ get_filename_and_charpos (struct symtab *s, char **fullname)\n     find_source_lines (s, desc.get ());\n }\n \n-/* Print text describing the full name of the source file S\n-   and the line number LINE and its corresponding character position.\n-   The text starts with two Ctrl-z so that the Emacs-GDB interface\n-   can easily find it.\n-\n-   MID_STATEMENT is nonzero if the PC is not at the beginning of that line.\n-\n-   Return 1 if successful, 0 if could not find the file.  */\n+/* See source.h.  */\n \n int\n identify_source_line (struct symtab *s, int line, int mid_statement,\n@@ -1406,10 +1390,8 @@ print_source_lines_base (struct symtab *s, int line, int stopline,\n     uiout->text (\"\\n\");\n }\n \f\n-/* Show source lines from the file of symtab S, starting with line\n-   number LINE and stopping before line number STOPLINE.  If this is\n-   not the command line version, then the source is shown in the source\n-   window otherwise it is simply printed.  */\n+\n+/* See source.h.  */\n \n void\n print_source_lines (struct symtab *s, int line, int stopline,"
    },
    {
      "sha": "fcd83daafcdffe0782acd1c0e63c7d1ca6a19d8a",
      "filename": "gdb/source.h",
      "status": "modified",
      "additions": 48,
      "deletions": 0,
      "changes": 48,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/source.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/source.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/source.h?ref=583068ca1d855abd09ac979c688f48b0ddaabe0f",
      "patch": "@@ -127,4 +127,52 @@ extern void clear_current_source_symtab_and_line (void);\n \n /* Add a source path substitution rule.  */\n extern void add_substitute_path_rule (char *, char *);\n+\n+/* Print text describing the full name of the source file S\n+   and the line number LINE and its corresponding character position.\n+   The text starts with two Ctrl-z so that the Emacs-GDB interface\n+   can easily find it.\n+\n+   MID_STATEMENT is nonzero if the PC is not at the beginning of that line.\n+\n+   Return 1 if successful, 0 if could not find the file.  */\n+extern int identify_source_line (struct symtab *s, int line,\n+\t\t\t\t int mid_statement, CORE_ADDR pc);\n+\n+/* Flags passed as 4th argument to print_source_lines.  */\n+enum print_source_lines_flag\n+  {\n+    /* Do not print an error message.  */\n+    PRINT_SOURCE_LINES_NOERROR = (1 << 0),\n+\n+    /* Print the filename in front of the source lines.  */\n+    PRINT_SOURCE_LINES_FILENAME = (1 << 1)\n+  };\n+DEF_ENUM_FLAGS_TYPE (enum print_source_lines_flag, print_source_lines_flags);\n+\n+/* Show source lines from the file of symtab S, starting with line\n+   number LINE and stopping before line number STOPLINE.  If this is\n+   not the command line version, then the source is shown in the source\n+   window otherwise it is simply printed.  */\n+extern void print_source_lines (struct symtab *s, int line, int stopline,\n+\t\t\t\tprint_source_lines_flags flags);\n+\n+/* Forget line positions and file names for the symtabs in a\n+   particular objfile.  */\n+extern void forget_cached_source_info_for_objfile (struct objfile *);\n+\n+/* Forget what we learned about line positions in source files, and\n+   which directories contain them; must check again now since files\n+   may be found in a different directory now.  */\n+extern void forget_cached_source_info (void);\n+\n+/* Set the source file default for the \"list\" command to be S.\n+\n+   If S is NULL, and we don't have a default, find one.  This\n+   should only be called when the user actually tries to use the\n+   default, since we produce an error if we can't find a reasonable\n+   default.  Also, since this can cause symbols to be read, doing it\n+   before we need to would make things slower than necessary.  */\n+extern void select_source_symtab (struct symtab *s);\n+\n #endif"
    },
    {
      "sha": "c2d8a69cf9f692273aeca0bf506d75b9b7b3d798",
      "filename": "gdb/symtab.h",
      "status": "modified",
      "additions": 0,
      "deletions": 24,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/symtab.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/symtab.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symtab.h?ref=583068ca1d855abd09ac979c688f48b0ddaabe0f",
      "patch": "@@ -1882,30 +1882,6 @@ extern void resolve_sal_pc (struct symtab_and_line *);\n \n extern void clear_solib (void);\n \n-/* source.c */\n-\n-extern int identify_source_line (struct symtab *, int, int, CORE_ADDR);\n-\n-/* Flags passed as 4th argument to print_source_lines.  */\n-\n-enum print_source_lines_flag\n-  {\n-    /* Do not print an error message.  */\n-    PRINT_SOURCE_LINES_NOERROR = (1 << 0),\n-\n-    /* Print the filename in front of the source lines.  */\n-    PRINT_SOURCE_LINES_FILENAME = (1 << 1)\n-  };\n-DEF_ENUM_FLAGS_TYPE (enum print_source_lines_flag, print_source_lines_flags);\n-\n-extern void print_source_lines (struct symtab *, int, int,\n-\t\t\t\tprint_source_lines_flags);\n-\n-extern void forget_cached_source_info_for_objfile (struct objfile *);\n-extern void forget_cached_source_info (void);\n-\n-extern void select_source_symtab (struct symtab *);\n-\n /* The reason we're calling into a completion match list collector\n    function.  */\n enum class complete_symbol_mode"
    },
    {
      "sha": "98c6fd651fa48c58a8870eb16bccc54d98fec4f4",
      "filename": "gdb/tui/tui-hooks.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/tui/tui-hooks.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/583068ca1d855abd09ac979c688f48b0ddaabe0f/gdb/tui/tui-hooks.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-hooks.c?ref=583068ca1d855abd09ac979c688f48b0ddaabe0f",
      "patch": "@@ -33,6 +33,7 @@\n #include \"ui-out.h\"\n #include \"top.h\"\n #include \"observable.h\"\n+#include \"source.h\"\n #include <unistd.h>\n #include <fcntl.h>\n "
    }
  ]
}