{
  "sha": "f2173852cff1459b04db4d84debbbf8961d6e23e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjIxNzM4NTJjZmYxNDU5YjA0ZGI0ZDg0ZGViYmJmODk2MWQ2ZTIzZQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-08-31T00:20:49Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-08-31T10:58:09Z"
    },
    "message": "PR26445 UBSAN: elf32-csky.c:4115 left shift of negative value\n\n\tPR 26445\n\t* elf32-csky.c (csky_relocate_contents): Make relocation a bfd_vma,\n\tand similarly for variables dealing with overflow.",
    "tree": {
      "sha": "5d58da9a3ee578fd79f9a17757ba9d5dcfe6b66a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5d58da9a3ee578fd79f9a17757ba9d5dcfe6b66a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f2173852cff1459b04db4d84debbbf8961d6e23e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2173852cff1459b04db4d84debbbf8961d6e23e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f2173852cff1459b04db4d84debbbf8961d6e23e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2173852cff1459b04db4d84debbbf8961d6e23e/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "880fc278cadb4c057bc85ef27b199cac12f8c095",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/880fc278cadb4c057bc85ef27b199cac12f8c095",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/880fc278cadb4c057bc85ef27b199cac12f8c095"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 18,
    "deletions": 12
  },
  "files": [
    {
      "sha": "04f6f4c77ea8e867c04fc1e75c762cc7602bb05c",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2173852cff1459b04db4d84debbbf8961d6e23e/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2173852cff1459b04db4d84debbbf8961d6e23e/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=f2173852cff1459b04db4d84debbbf8961d6e23e",
      "patch": "@@ -1,3 +1,9 @@\n+2020-08-31  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 26445\n+\t* elf32-csky.c (csky_relocate_contents): Make relocation a bfd_vma,\n+\tand similarly for variables dealing with overflow.\n+\n 2020-08-31  Alan Modra  <amodra@gmail.com>\n \n \tPR 26442"
    },
    {
      "sha": "395e6ff67f9b9e3ebcf93ceba09543380cff7e44",
      "filename": "bfd/elf32-csky.c",
      "status": "modified",
      "additions": 12,
      "deletions": 12,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2173852cff1459b04db4d84debbbf8961d6e23e/bfd/elf32-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2173852cff1459b04db4d84debbbf8961d6e23e/bfd/elf32-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-csky.c?ref=f2173852cff1459b04db4d84debbbf8961d6e23e",
      "patch": "@@ -3918,7 +3918,7 @@ elf32_csky_setup_section_lists (bfd *output_bfd,\n static bfd_reloc_status_type\n csky_relocate_contents (reloc_howto_type *howto,\n \t\t\tbfd *input_bfd,\n-\t\t\tlong relocation,\n+\t\t\tbfd_vma relocation,\n \t\t\tbfd_byte *location)\n {\n   int size;\n@@ -3961,7 +3961,7 @@ csky_relocate_contents (reloc_howto_type *howto,\n \n \t  if (R_CKCORE_DOFFSET_LO16 == howto->type)\n \t    {\n-\t      if ((signed) relocation < 0)\n+\t      if ((bfd_signed_vma) relocation < 0)\n \t\t{\n \t\t  x |= CSKY_INSN_ADDI_TO_SUBI;\n \t\t  relocation = -relocation;\n@@ -3972,7 +3972,7 @@ csky_relocate_contents (reloc_howto_type *howto,\n \t    }\n \t  else if (R_CKCORE_TOFFSET_LO16 == howto->type)\n \t    {\n-\t      if ((signed) relocation < 0)\n+\t      if ((bfd_signed_vma) relocation < 0)\n \t\t{\n \t\t  x |= CSKY_INSN_ADDI_TO_SUBI;\n \t\t  relocation = -relocation;\n@@ -3993,13 +3993,13 @@ csky_relocate_contents (reloc_howto_type *howto,\n   flag = bfd_reloc_ok;\n   if (howto->complain_on_overflow != complain_overflow_dont)\n     {\n-      int addrmask;\n-      int fieldmask;\n-      int signmask;\n-      int ss;\n-      int a;\n-      int b;\n-      int sum;\n+      bfd_vma addrmask;\n+      bfd_vma fieldmask;\n+      bfd_vma signmask;\n+      bfd_vma ss;\n+      bfd_vma a;\n+      bfd_vma b;\n+      bfd_vma sum;\n       /* Get the values to be added together.  For signed and unsigned\n \t relocations, we assume that all values should be truncated to\n \t the size of an address.  For bitfields, all the bits matter.\n@@ -4085,7 +4085,7 @@ csky_relocate_contents (reloc_howto_type *howto,\n \n     }\n   /* Put RELOCATION in the right bits.  */\n-  relocation >>= (bfd_vma) rightshift;\n+  relocation >>= rightshift;\n \n   if ((howto->type == R_CKCORE_DOFFSET_LO16\n        || howto->type == R_CKCORE_TOFFSET_LO16)\n@@ -4112,7 +4112,7 @@ csky_relocate_contents (reloc_howto_type *howto,\n \t  csky_put_insn_32 (input_bfd, CSKY_INSN_JSR_R26, location + 4);\n \t}\n \n-      relocation <<= (bfd_vma) bitpos;\n+      relocation <<= bitpos;\n       /* Add RELOCATION to the right bits of X.  */\n       x = ((x & ~howto->dst_mask)\n \t   | (((x & howto->src_mask) + relocation) & howto->dst_mask));"
    }
  ]
}