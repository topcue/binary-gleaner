{
  "sha": "bb2a1453479dfa2589f3b62853d4e1cf60825e98",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmIyYTE0NTM0NzlkZmEyNTg5ZjNiNjI4NTNkNGUxY2Y2MDgyNWU5OA==",
  "commit": {
    "author": {
      "name": "Andreas Schwab",
      "email": "schwab@linux-m68k.org",
      "date": "2020-04-18T12:32:39Z"
    },
    "committer": {
      "name": "Andreas Schwab",
      "email": "schwab@linux-m68k.org",
      "date": "2020-04-21T14:53:36Z"
    },
    "message": "Disallow PC relative for CMPI on MC68000/10\n\nThe MC68000/10 decodes the second operand of CMPI strictly as destination\noperand, which disallows PC relative addressing, even though the insn\ndoesn't write to the operand.  This restriction has only been lifted for\nthe MC68020+ and CPU32.\n\nopcodes:\n\tPR 25848\n\t* m68k-opc.c (m68k_opcodes): Allow pc-rel for second operand of\n\tcmpi only on m68020up and cpu32.\n\ngas:\n\tPR 25848\n\t* testsuite/gas/m68k/operands.s: Add tests for cmpi.\n\t* testsuite/gas/m68k/operands.d: Update.\n\t* testsuite/gas/m68k/op68000.d: Update for new error messages.",
    "tree": {
      "sha": "059cbf2028ab35d527c7f415f6e0bb55cacde748",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/059cbf2028ab35d527c7f415f6e0bb55cacde748"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/bb2a1453479dfa2589f3b62853d4e1cf60825e98",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bb2a1453479dfa2589f3b62853d4e1cf60825e98",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/bb2a1453479dfa2589f3b62853d4e1cf60825e98",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bb2a1453479dfa2589f3b62853d4e1cf60825e98/comments",
  "author": {
    "login": "andreas-schwab",
    "id": 2175493,
    "node_id": "MDQ6VXNlcjIxNzU0OTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andreas-schwab",
    "html_url": "https://github.com/andreas-schwab",
    "followers_url": "https://api.github.com/users/andreas-schwab/followers",
    "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}",
    "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions",
    "organizations_url": "https://api.github.com/users/andreas-schwab/orgs",
    "repos_url": "https://api.github.com/users/andreas-schwab/repos",
    "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andreas-schwab/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "andreas-schwab",
    "id": 2175493,
    "node_id": "MDQ6VXNlcjIxNzU0OTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2175493?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andreas-schwab",
    "html_url": "https://github.com/andreas-schwab",
    "followers_url": "https://api.github.com/users/andreas-schwab/followers",
    "following_url": "https://api.github.com/users/andreas-schwab/following{/other_user}",
    "gists_url": "https://api.github.com/users/andreas-schwab/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andreas-schwab/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andreas-schwab/subscriptions",
    "organizations_url": "https://api.github.com/users/andreas-schwab/orgs",
    "repos_url": "https://api.github.com/users/andreas-schwab/repos",
    "events_url": "https://api.github.com/users/andreas-schwab/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andreas-schwab/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c36876fe5b5bac1c404ab2ca82bfbfb2ed9a2717",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c36876fe5b5bac1c404ab2ca82bfbfb2ed9a2717",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c36876fe5b5bac1c404ab2ca82bfbfb2ed9a2717"
    }
  ],
  "stats": {
    "total": 64,
    "additions": 58,
    "deletions": 6
  },
  "files": [
    {
      "sha": "cccb6bc4c23377a0ff33e90691123e0c549d5143",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -1,3 +1,10 @@\n+2020-04-21  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\tPR 25848\n+\t* testsuite/gas/m68k/operands.s: Add tests for cmpi.\n+\t* testsuite/gas/m68k/operands.d: Update.\n+\t* testsuite/gas/m68k/op68000.d: Update for new error messages.\n+\n 2020-04-21  Tamar Christina  <tamar.christina@arm.com>\n \n \tPR binutils/24753"
    },
    {
      "sha": "b5d1d7b93fc37674f6afbf972a7c579ab426c77b",
      "filename": "gas/testsuite/gas/m68k/op68000.d",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/op68000.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/op68000.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/m68k/op68000.d?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -193,3 +193,9 @@\n .*statement `pea \\(\\[%zpc,%a0\\],2000\\)' ignored\n .*statement `pea \\(\\[%zpc,%d0:w:2\\]\\)' ignored\n .*statement `pea \\(\\[%d0,%zpc\\]\\)' ignored\n+.*statement `cmpib &1,0\\(%pc\\)' ignored\n+.*statement `cmpiw &1,0\\(%pc\\)' ignored\n+.*statement `cmpil &1,0\\(%pc\\)' ignored\n+.*statement `cmpb &1,0\\(%pc\\)' ignored\n+.*statement `cmpw &1,0\\(%pc\\)' ignored\n+.*statement `cmpl &1,0\\(%pc\\)' ignored"
    },
    {
      "sha": "465ae88dac3c5e1c467c553e13f0ea9aebcdefd5",
      "filename": "gas/testsuite/gas/m68k/operands.d",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/operands.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/operands.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/m68k/operands.d?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -240,3 +240,15 @@ Disassembly of section .text:\n 0+508 <foo\\+(0x|)508> addiw #1,%d0\n 0+50c <foo\\+(0x|)50c> addil #1,%d0\n 0+512 <foo\\+(0x|)512> addqb #1,%d0\n+0+514 <foo\\+(0x|)514> cmpib #1,%d0\n+0+518 <foo\\+(0x|)518> cmpib #1,%pc@\\(0+51c <foo\\+(0x|)51c>\\)\n+0+51e <foo\\+(0x|)51e> cmpiw #1,%d0\n+0+522 <foo\\+(0x|)522> cmpiw #1,%pc@\\(0+526 <foo\\+(0x|)526>\\)\n+0+528 <foo\\+(0x|)528> cmpil #1,%d0\n+0+52e <foo\\+(0x|)52e> cmpil #1,%pc@\\(0+534 <foo\\+(0x|)534>\\)\n+0+536 <foo\\+(0x|)536> cmpib #1,%d0\n+0+53a <foo\\+(0x|)53a> cmpib #1,%pc@\\(0+53e <foo\\+(0x|)53e>\\)\n+0+540 <foo\\+(0x|)540> cmpiw #1,%d0\n+0+544 <foo\\+(0x|)544> cmpiw #1,%pc@\\(0+548 <foo\\+(0x|)548>\\)\n+0+54a <foo\\+(0x|)54a> cmpil #1,%d0\n+0+550 <foo\\+(0x|)550> cmpil #1,%pc@\\(0+556 <foo\\+(0x|)556>\\)"
    },
    {
      "sha": "382d95d3e853bf827dace7b9af0984240a7439a6",
      "filename": "gas/testsuite/gas/m68k/operands.s",
      "status": "modified",
      "additions": 15,
      "deletions": 0,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/operands.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/gas/testsuite/gas/m68k/operands.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/m68k/operands.s?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -270,3 +270,18 @@ foo:\n \taddiw\t&1,%d0\n \taddil\t&1,%d0\n \taddqb\t&1,%d0\n+\n+\t| cmpi\n+\tcmpib\t&1,%d0\n+\tcmpib\t&1,0(%pc)\n+\tcmpiw\t&1,%d0\n+\tcmpiw\t&1,0(%pc)\n+\tcmpil\t&1,%d0\n+\tcmpil\t&1,0(%pc)\n+\tcmpb\t&1,%d0\n+\tcmpb\t&1,0(%pc)\n+\tcmpw\t&1,%d0\n+\tcmpw\t&1,0(%pc)\n+\tcmpl\t&1,%d0\n+\tcmpl\t&1,0(%pc)\n+"
    },
    {
      "sha": "e2cbe60cde1cc777a8142a73a5b0fa20c8548974",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -1,3 +1,9 @@\n+2020-04-21  Andreas Schwab  <schwab@linux-m68k.org>\n+\n+\tPR 25848\n+\t* m68k-opc.c (m68k_opcodes): Allow pc-rel for second operand of\n+\tcmpi only on m68020up and cpu32.\n+\n 2020-04-20  Sudakshina Das  <sudi.das@arm.com>\n \n \t* aarch64-asm.c (aarch64_ins_none): New."
    },
    {
      "sha": "db198941f07beb0abed120e6ec47e59d43806f19",
      "filename": "opcodes/m68k-opc.c",
      "status": "modified",
      "additions": 12,
      "deletions": 6,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb2a1453479dfa2589f3b62853d4e1cf60825e98/opcodes/m68k-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb2a1453479dfa2589f3b62853d4e1cf60825e98/opcodes/m68k-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/m68k-opc.c?ref=bb2a1453479dfa2589f3b62853d4e1cf60825e98",
      "patch": "@@ -265,30 +265,36 @@ const struct m68k_opcode m68k_opcodes[] =\n {\"cmpaw\", 2,\tone(0130300),\tone(0170700), \"*wAd\", m68000up },\n {\"cmpal\", 2,\tone(0130700),\tone(0170700), \"*lAd\", m68000up | mcfisa_a },\n \n-{\"cmpib\", 4,\tone(0006000),\tone(0177700), \"#b@s\", m68000up },\n+{\"cmpib\", 4,\tone(0006000),\tone(0177700), \"#b$s\", m68000 | m68010 },\n+{\"cmpib\", 4,\tone(0006000),\tone(0177700), \"#b@s\", m68020up | cpu32 | fido_a },\n {\"cmpib\", 4,\tone(0006000),\tone(0177700), \"#bDs\", mcfisa_b | mcfisa_c },\n-{\"cmpiw\", 4,\tone(0006100),\tone(0177700), \"#w@s\", m68000up },\n+{\"cmpiw\", 4,\tone(0006100),\tone(0177700), \"#w$s\", m68000 | m68010 },\n+{\"cmpiw\", 4,\tone(0006100),\tone(0177700), \"#w@s\", m68020up | cpu32 | fido_a },\n {\"cmpiw\", 4,\tone(0006100),\tone(0177700), \"#wDs\", mcfisa_b | mcfisa_c },\n-{\"cmpil\", 6,\tone(0006200),\tone(0177700), \"#l@s\", m68000up },\n+{\"cmpil\", 6,\tone(0006200),\tone(0177700), \"#l$s\", m68000 | m68010 },\n+{\"cmpil\", 6,\tone(0006200),\tone(0177700), \"#l@s\", m68020up | cpu32 | fido_a },\n {\"cmpil\", 6,\tone(0006200),\tone(0177700), \"#lDs\", mcfisa_a },\n \n {\"cmpmb\", 2,\tone(0130410),\tone(0170770), \"+s+d\", m68000up },\n {\"cmpmw\", 2,\tone(0130510),\tone(0170770), \"+s+d\", m68000up },\n {\"cmpml\", 2,\tone(0130610),\tone(0170770), \"+s+d\", m68000up },\n \n /* The cmp opcode can generate the cmpa, cmpm, and cmpi instructions.  */\n-{\"cmpb\", 4,\tone(0006000),\tone(0177700), \"#b@s\", m68000up },\n+{\"cmpb\", 4,\tone(0006000),\tone(0177700), \"#b$s\", m68000 | m68010 },\n+{\"cmpb\", 4,\tone(0006000),\tone(0177700), \"#b@s\", m68020up | cpu32 | fido_a },\n {\"cmpb\", 4,\tone(0006000),\tone(0177700), \"#bDs\", mcfisa_b | mcfisa_c },\n {\"cmpb\", 2,\tone(0130410),\tone(0170770), \"+s+d\", m68000up },\n {\"cmpb\", 2,\tone(0130000),\tone(0170700), \";bDd\", m68000up },\n {\"cmpb\", 2,\tone(0130000),\tone(0170700), \"*bDd\", mcfisa_b | mcfisa_c },\n {\"cmpw\", 2,\tone(0130300),\tone(0170700), \"*wAd\", m68000up },\n-{\"cmpw\", 4,\tone(0006100),\tone(0177700), \"#w@s\", m68000up },\n+{\"cmpw\", 4,\tone(0006100),\tone(0177700), \"#w$s\", m68000 | m68010 },\n+{\"cmpw\", 4,\tone(0006100),\tone(0177700), \"#w@s\", m68020up | cpu32 | fido_a },\n {\"cmpw\", 4,\tone(0006100),\tone(0177700), \"#wDs\", mcfisa_b | mcfisa_c },\n {\"cmpw\", 2,\tone(0130510),\tone(0170770), \"+s+d\", m68000up },\n {\"cmpw\", 2,\tone(0130100),\tone(0170700), \"*wDd\", m68000up | mcfisa_b | mcfisa_c },\n {\"cmpl\", 2,\tone(0130700),\tone(0170700), \"*lAd\", m68000up | mcfisa_a },\n-{\"cmpl\", 6,\tone(0006200),\tone(0177700), \"#l@s\", m68000up },\n+{\"cmpl\", 6,\tone(0006200),\tone(0177700), \"#l$s\", m68000 | m68010 },\n+{\"cmpl\", 6,\tone(0006200),\tone(0177700), \"#l@s\", m68020up | cpu32 | fido_a },\n {\"cmpl\", 6,\tone(0006200),\tone(0177700), \"#lDs\", mcfisa_a },\n {\"cmpl\", 2,\tone(0130610),\tone(0170770), \"+s+d\", m68000up },\n {\"cmpl\", 2,\tone(0130200),\tone(0170700), \"*lDd\", m68000up | mcfisa_a },"
    }
  ]
}