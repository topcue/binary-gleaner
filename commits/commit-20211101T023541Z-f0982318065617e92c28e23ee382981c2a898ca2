{
  "sha": "f0982318065617e92c28e23ee382981c2a898ca2",
  "node_id": "C_kwDOANOeidoAKGYwOTgyMzE4MDY1NjE3ZTkyYzI4ZTIzZWUzODI5ODFjMmE4OThjYTI",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-01T02:35:41Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-01T02:35:41Z"
    },
    "message": "sim: ppc: handle \\r in igen inputs [PR sim/28476]\n\nMake sure we consume & ignore \\r bytes in inputs in case the file\nencodings are from a non-LF systems (e.g. Windows).",
    "tree": {
      "sha": "881d3c412ba2b7a6d4eab15cd000042c1d58cd86",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/881d3c412ba2b7a6d4eab15cd000042c1d58cd86"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f0982318065617e92c28e23ee382981c2a898ca2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0982318065617e92c28e23ee382981c2a898ca2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f0982318065617e92c28e23ee382981c2a898ca2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0982318065617e92c28e23ee382981c2a898ca2/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "fc3579da2ea6b2db27ac3003f818abd7786b9b30",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fc3579da2ea6b2db27ac3003f818abd7786b9b30",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/fc3579da2ea6b2db27ac3003f818abd7786b9b30"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 16,
    "deletions": 8
  },
  "files": [
    {
      "sha": "6399bdaddcb1c54ca0af0c28754911250e3873ac",
      "filename": "sim/ppc/table.c",
      "status": "modified",
      "additions": 16,
      "deletions": 8,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f0982318065617e92c28e23ee382981c2a898ca2/sim/ppc/table.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f0982318065617e92c28e23ee382981c2a898ca2/sim/ppc/table.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/table.c?ref=f0982318065617e92c28e23ee382981c2a898ca2",
      "patch": "@@ -208,7 +208,7 @@ table_entry_read(table *root)\n   /* break the line into its colon delimitered fields */\n   for (field = 0; field < file->nr_fields-1; field++) {\n     entry->fields[field] = file->pos;\n-    while(*file->pos && *file->pos != ':' && *file->pos != '\\n')\n+    while(*file->pos && *file->pos != ':' && *file->pos != '\\n' && *file->pos != '\\r')\n       file->pos++;\n     if (*file->pos == ':') {\n       *file->pos = '\\0';\n@@ -219,7 +219,11 @@ table_entry_read(table *root)\n   /* any trailing stuff not the last field */\n   ASSERT(field == file->nr_fields-1);\n   entry->fields[field] = file->pos;\n-  while (*file->pos && *file->pos != '\\n') {\n+  while (*file->pos && *file->pos != '\\n' && *file->pos != '\\r') {\n+    file->pos++;\n+  }\n+  if (*file->pos == '\\r') {\n+    *file->pos = '\\0';\n     file->pos++;\n   }\n   if (*file->pos == '\\n') {\n@@ -243,7 +247,7 @@ table_entry_read(table *root)\n     file->pos++;\n     for (field = 0; field < file->nr_model_fields-1; field++) {\n       model->fields[field] = file->pos;\n-      while(*file->pos && *file->pos != ':' && *file->pos != '\\n')\n+      while(*file->pos && *file->pos != ':' && *file->pos != '\\n' && *file->pos != '\\r')\n \tfile->pos++;\n       if (*file->pos == ':') {\n \t*file->pos = '\\0';\n@@ -254,7 +258,11 @@ table_entry_read(table *root)\n     /* any trailing stuff not the last field */\n     ASSERT(field == file->nr_model_fields-1);\n     model->fields[field] = file->pos;\n-    while (*file->pos && *file->pos != '\\n') {\n+    while (*file->pos && *file->pos != '\\n' && *file->pos != '\\r') {\n+      file->pos++;\n+    }\n+    if (*file->pos == '\\r') {\n+      *file->pos = '\\0';\n       file->pos++;\n     }\n     if (*file->pos == '\\n') {\n@@ -274,13 +282,13 @@ table_entry_read(table *root)\n     do {\n       do {\n \tfile->pos++;\n-      } while (*file->pos != '\\0' && *file->pos != '\\n');\n-      if (*file->pos == '\\n') {\n+      } while (*file->pos != '\\0' && *file->pos != '\\n' && *file->pos != '\\r');\n+      if (*file->pos == '\\n' || *file->pos == '\\r') {\n \tchar *save_pos = ++file->pos;\n \tint extra_lines = 0;\n \tfile->line_nr++;\n \t/* Allow tab indented to have blank lines */\n-\twhile (*save_pos == '\\n') {\n+\twhile (*save_pos == '\\n' || *save_pos == '\\r') {\n \t  save_pos++;\n \t  extra_lines++;\n \t}\n@@ -290,7 +298,7 @@ table_entry_read(table *root)\n \t}\n       }\n     } while (*file->pos != '\\0' && *file->pos == '\\t');\n-    if (file->pos[-1] == '\\n')\n+    if (file->pos[-1] == '\\n' || file->pos[-1] == '\\r')\n       file->pos[-1] = '\\0';\n   }\n   else"
    }
  ]
}