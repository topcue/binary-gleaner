{
  "sha": "9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWQzYWI5MTViZTQ1NDhjNmZlZTgwYzBiMmY3OWE1MDlmZDQxNTBiOA==",
  "commit": {
    "author": {
      "name": "Keith Seitz",
      "email": "keiths@redhat.com",
      "date": "2020-11-13T17:28:50Z"
    },
    "committer": {
      "name": "Keith Seitz",
      "email": "keiths@redhat.com",
      "date": "2020-11-13T17:28:50Z"
    },
    "message": "Add file name to \"Loadable section ... outside of ELF segments\" warning\n\nAs requested in gdb/23034, I would like to extend the warning message\nGDB displays when it detects a loadable section that is outside any\nELF segment.\n\nBefore:\n\n$ gdb -q --ex \"b systemctl_main\" -ex \"r\" -batch --args systemctl kexec\nBreakpoint 1 at 0xc24d: file ../src/systemctl/systemctl.c, line 8752.\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n[snip]\n\nBreakpoint 1, systemctl_main (argv=0x7fffffffd348, argc=2) at ../src/systemctl/systemctl.c:8752\n8752                    r = systemctl_main(argc, argv);\n\nAfter:\n\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libcap.so.2\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libacl.so.1\n[snip]\n\nI think this is eminently more useful output.\n\ngdb/ChangeLog\n2020-11-13  Keith Seitz  <keiths@redhat.com>\n\n\tPR gdb/23034\n\t* elfread.c (elf_symfile_segments): Output a BFD file name\n\tfor the \"Loadable section ... outside of ELF segments\" warning.",
    "tree": {
      "sha": "e360d1a36a6bc5f644d9a4fcf069fa44628abcdf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e360d1a36a6bc5f644d9a4fcf069fa44628abcdf"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9d3ab915be4548c6fee80c0b2f79a509fd4150b8/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "9ecab40c77fd414fe408967d0f92f00494aa11b9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9ecab40c77fd414fe408967d0f92f00494aa11b9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9ecab40c77fd414fe408967d0f92f00494aa11b9"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 8,
    "deletions": 2
  },
  "files": [
    {
      "sha": "f8f6993a45c64e8cdd6ea9990f995a8b7833ba78",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d3ab915be4548c6fee80c0b2f79a509fd4150b8/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d3ab915be4548c6fee80c0b2f79a509fd4150b8/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
      "patch": "@@ -1,3 +1,9 @@\n+2020-11-13  Keith Seitz  <keiths@redhat.com>\n+\n+\tPR gdb/23034\n+\t* elfread.c (elf_symfile_segments): Output a BFD file name\n+\tfor the \"Loadable section ... outside of ELF segments\" warning.\n+\n 2020-11-13  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \tPR gdb/26835"
    },
    {
      "sha": "7915dcdcce9bd97d17320c7357cc4360eb4c1053",
      "filename": "gdb/elfread.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d3ab915be4548c6fee80c0b2f79a509fd4150b8/gdb/elfread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d3ab915be4548c6fee80c0b2f79a509fd4150b8/gdb/elfread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/elfread.c?ref=9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
      "patch": "@@ -149,8 +149,8 @@ elf_symfile_segments (bfd *abfd)\n \t binaries are not relocatable.  */\n       if (bfd_section_size (sect) > 0 && j == num_segments\n \t  && (bfd_section_flags (sect) & SEC_LOAD) != 0)\n-\twarning (_(\"Loadable section \\\"%s\\\" outside of ELF segments\"),\n-\t\t bfd_section_name (sect));\n+\twarning (_(\"Loadable section \\\"%s\\\" outside of ELF segments\\n  in %s\"),\n+\t\t bfd_section_name (sect), bfd_get_filename (abfd));\n     }\n \n   return data;"
    }
  ]
}