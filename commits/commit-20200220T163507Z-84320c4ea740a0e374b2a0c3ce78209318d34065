{
  "sha": "84320c4ea740a0e374b2a0c3ce78209318d34065",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODQzMjBjNGVhNzQwYTBlMzc0YjJhMGMzY2U3ODIwOTMxOGQzNDA2NQ==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:55Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:07Z"
    },
    "message": "gdbserver: turn target op '{supports_}stopped_by_sw_breakpoint' into a method\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's {supports_}stopped_by_sw_breakpoint\n\tops into methods of process_target.\n\n\t* target.h (struct process_stratum_target): Remove the target ops.\n\t(class process_target): Add the target ops.\n\t(target_stopped_by_sw_breakpoint): Update the macro.\n\t(target_supports_stopped_by_sw_breakpoint): Update the macro.\n\t* target.cc (process_target::stopped_by_sw_breakpoint): Define.\n\t(process_target::supports_stopped_by_sw_breakpoint): Define.\n\n\tUpdate the derived classes and callers below.\n\n\t* linux-low.cc (linux_target_ops): Update.\n\t(linux_stopped_by_sw_breakpoint): Turn into ...\n\t(linux_process_target::stopped_by_sw_breakpoint): ... this.\n\t(linux_supports_stopped_by_sw_breakpoint): Turn into ...\n\t(linux_process_target::supports_stopped_by_sw_breakpoint): ... this.\n\t* linux-low.h (class linux_process_target): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t* win32-low.cc (win32_target_ops): Update.",
    "tree": {
      "sha": "429b009a345c62eaa7c9bdac531094532aaf62d7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/429b009a345c62eaa7c9bdac531094532aaf62d7"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/84320c4ea740a0e374b2a0c3ce78209318d34065",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/84320c4ea740a0e374b2a0c3ce78209318d34065",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/84320c4ea740a0e374b2a0c3ce78209318d34065",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/84320c4ea740a0e374b2a0c3ce78209318d34065/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7e0bde70ca4ea73461365e95d2fcaae8fb925ab4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7e0bde70ca4ea73461365e95d2fcaae8fb925ab4",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7e0bde70ca4ea73461365e95d2fcaae8fb925ab4"
    }
  ],
  "stats": {
    "total": 82,
    "additions": 56,
    "deletions": 26
  },
  "files": [
    {
      "sha": "55063df6a878470224ac7f04b2c9b98193043d7d",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -1,3 +1,27 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's {supports_}stopped_by_sw_breakpoint\n+\tops into methods of process_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target ops.\n+\t(class process_target): Add the target ops.\n+\t(target_stopped_by_sw_breakpoint): Update the macro.\n+\t(target_supports_stopped_by_sw_breakpoint): Update the macro.\n+\t* target.cc (process_target::stopped_by_sw_breakpoint): Define.\n+\t(process_target::supports_stopped_by_sw_breakpoint): Define.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* linux-low.cc (linux_target_ops): Update.\n+\t(linux_stopped_by_sw_breakpoint): Turn into ...\n+\t(linux_process_target::stopped_by_sw_breakpoint): ... this.\n+\t(linux_supports_stopped_by_sw_breakpoint): Turn into ...\n+\t(linux_process_target::supports_stopped_by_sw_breakpoint): ... this.\n+\t* linux-low.h (class linux_process_target): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's insert_point and remove_point ops"
    },
    {
      "sha": "b1cba91344d23cfae1fa8b74ef34e23d246a7f19",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 6,
      "deletions": 8,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -5990,22 +5990,22 @@ linux_process_target::remove_point (enum raw_bkpt_type type, CORE_ADDR addr,\n     return 1;\n }\n \n-/* Implement the to_stopped_by_sw_breakpoint target_ops\n+/* Implement the stopped_by_sw_breakpoint target_ops\n    method.  */\n \n-static int\n-linux_stopped_by_sw_breakpoint (void)\n+bool\n+linux_process_target::stopped_by_sw_breakpoint ()\n {\n   struct lwp_info *lwp = get_thread_lwp (current_thread);\n \n   return (lwp->stop_reason == TARGET_STOPPED_BY_SW_BREAKPOINT);\n }\n \n-/* Implement the to_supports_stopped_by_sw_breakpoint target_ops\n+/* Implement the supports_stopped_by_sw_breakpoint target_ops\n    method.  */\n \n-static int\n-linux_supports_stopped_by_sw_breakpoint (void)\n+bool\n+linux_process_target::supports_stopped_by_sw_breakpoint ()\n {\n   return USE_SIGTRAP_SIGINFO;\n }\n@@ -7376,8 +7376,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-  linux_stopped_by_sw_breakpoint,\n-  linux_supports_stopped_by_sw_breakpoint,\n   linux_stopped_by_hw_breakpoint,\n   linux_supports_stopped_by_hw_breakpoint,\n   linux_supports_hardware_single_step,"
    },
    {
      "sha": "bb9c4b011cf01ba9fad03028109197d2cab91fae",
      "filename": "gdbserver/linux-low.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/linux-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/linux-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.h?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -322,6 +322,10 @@ class linux_process_target : public process_target\n \n   int remove_point (enum raw_bkpt_type type, CORE_ADDR addr,\n \t\t    int size, raw_breakpoint *bp) override;\n+\n+  bool stopped_by_sw_breakpoint () override;\n+\n+  bool supports_stopped_by_sw_breakpoint () override;\n };\n \n #define get_thread_lwp(thr) ((struct lwp_info *) (thread_target_data (thr)))"
    },
    {
      "sha": "0bb7e001aeddf0e72b93da547cf4216866e968b4",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -729,8 +729,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  NULL,  /* stopped_by_sw_breakpoint */\n-  NULL,  /* supports_stopped_by_sw_breakpoint */\n   NULL,  /* stopped_by_hw_breakpoint */\n   NULL,  /* supports_stopped_by_hw_breakpoint */\n   target_can_do_hardware_single_step,"
    },
    {
      "sha": "5912ee9295e4753ef87d491bc578f6c6c4bc5862",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -950,8 +950,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  NULL, /* stopped_by_sw_breakpoint */\n-  NULL, /* supports_stopped_by_sw_breakpoint */\n   NULL, /* stopped_by_hw_breakpoint */\n   NULL, /* supports_stopped_by_hw_breakpoint */\n   target_can_do_hardware_single_step,"
    },
    {
      "sha": "70630db6d84dbbfe819eaa72d4fdbfae33cbf67c",
      "filename": "gdbserver/target.cc",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/target.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/target.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.cc?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -447,3 +447,15 @@ process_target::remove_point (enum raw_bkpt_type type, CORE_ADDR addr,\n {\n   return 1;\n }\n+\n+bool\n+process_target::stopped_by_sw_breakpoint ()\n+{\n+  return false;\n+}\n+\n+bool\n+process_target::supports_stopped_by_sw_breakpoint ()\n+{\n+  return false;\n+}"
    },
    {
      "sha": "563884f3535cc940ebb82737ae88031b200b2504",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 10,
      "deletions": 12,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -70,14 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* Returns 1 if the target stopped because it executed a software\n-     breakpoint instruction, 0 otherwise.  */\n-  int (*stopped_by_sw_breakpoint) (void);\n-\n-  /* Returns true if the target knows whether a trap was caused by a\n-     SW breakpoint triggering.  */\n-  int (*supports_stopped_by_sw_breakpoint) (void);\n-\n   /* Returns 1 if the target stopped for a hardware breakpoint.  */\n   int (*stopped_by_hw_breakpoint) (void);\n \n@@ -476,6 +468,14 @@ class process_target\n \n   virtual int remove_point (enum raw_bkpt_type type, CORE_ADDR addr,\n \t\t\t    int size, raw_breakpoint *bp);\n+\n+  /* Returns true if the target stopped because it executed a software\n+     breakpoint instruction, false otherwise.  */\n+  virtual bool stopped_by_sw_breakpoint ();\n+\n+  /* Returns true if the target knows whether a trap was caused by a\n+     SW breakpoint triggering.  */\n+  virtual bool supports_stopped_by_sw_breakpoint ();\n };\n \n extern process_stratum_target *the_target;\n@@ -659,12 +659,10 @@ target_read_btrace_conf (struct btrace_target_info *tinfo,\n    (*the_target->supports_range_stepping) () : 0)\n \n #define target_supports_stopped_by_sw_breakpoint() \\\n-  (the_target->supports_stopped_by_sw_breakpoint ? \\\n-   (*the_target->supports_stopped_by_sw_breakpoint) () : 0)\n+  the_target->pt->supports_stopped_by_sw_breakpoint ()\n \n #define target_stopped_by_sw_breakpoint() \\\n-  (the_target->stopped_by_sw_breakpoint ? \\\n-   (*the_target->stopped_by_sw_breakpoint) () : 0)\n+  the_target->pt->stopped_by_sw_breakpoint ()\n \n #define target_supports_stopped_by_hw_breakpoint() \\\n   (the_target->supports_stopped_by_hw_breakpoint ? \\"
    },
    {
      "sha": "6f8b51f3e445c06e9d3db8670996e287fbb880d4",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/84320c4ea740a0e374b2a0c3ce78209318d34065/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=84320c4ea740a0e374b2a0c3ce78209318d34065",
      "patch": "@@ -1838,8 +1838,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-  NULL, /* stopped_by_sw_breakpoint */\n-  NULL, /* supports_stopped_by_sw_breakpoint */\n   NULL, /* stopped_by_hw_breakpoint */\n   NULL, /* supports_stopped_by_hw_breakpoint */\n   target_can_do_hardware_single_step,"
    }
  ]
}