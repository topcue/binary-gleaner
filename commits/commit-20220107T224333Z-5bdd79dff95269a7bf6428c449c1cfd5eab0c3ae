{
  "sha": "5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae",
  "node_id": "C_kwDOANOeidoAKDViZGQ3OWRmZjk1MjY5YTdiZjY0MjhjNDQ5YzFjZmQ1ZWFiMGMzYWU",
  "commit": {
    "author": {
      "name": "Lancelot SIX",
      "email": "lsix@lancelotsix.com",
      "date": "2021-11-21T01:33:13Z"
    },
    "committer": {
      "name": "Lancelot SIX",
      "email": "lsix@lancelotsix.com",
      "date": "2022-01-07T22:43:33Z"
    },
    "message": "gdb/testsuite: Remove duplicates from gdb.base/shlib-call.exp\n\nWhen I run the testsuite, I have:\n\n    Running .../gdb/testsuite/gdb.base/shlib-call.exp ...\n    DUPLICATE: gdb.base/shlib-call.exp: print g\n    DUPLICATE: gdb.base/shlib-call.exp: set print sevenbit-strings\n    DUPLICATE: gdb.base/shlib-call.exp: set print address off\n    DUPLICATE: gdb.base/shlib-call.exp: set width 0\n    DUPLICATE: gdb.base/shlib-call.exp: continue until exit\n\nFix by adjusting the test names when required, and by removing\nun-necessary commands.\n\nWhile at it, do some cleanup:\n- Replace an explicit GDB restart sequence with a call to clean_restart.\n- Remove trailing whitespaces.\n- Use $gdb_test_name in gdb_test_multiple.\n\nTested on x86_64-linux.",
    "tree": {
      "sha": "05734a2bfc18abd851472e5441cdc68eec8771ca",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/05734a2bfc18abd851472e5441cdc68eec8771ca"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae/comments",
  "author": {
    "login": "lsix",
    "id": 724339,
    "node_id": "MDQ6VXNlcjcyNDMzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/724339?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lsix",
    "html_url": "https://github.com/lsix",
    "followers_url": "https://api.github.com/users/lsix/followers",
    "following_url": "https://api.github.com/users/lsix/following{/other_user}",
    "gists_url": "https://api.github.com/users/lsix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lsix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lsix/subscriptions",
    "organizations_url": "https://api.github.com/users/lsix/orgs",
    "repos_url": "https://api.github.com/users/lsix/repos",
    "events_url": "https://api.github.com/users/lsix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lsix/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "lsix",
    "id": 724339,
    "node_id": "MDQ6VXNlcjcyNDMzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/724339?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lsix",
    "html_url": "https://github.com/lsix",
    "followers_url": "https://api.github.com/users/lsix/followers",
    "following_url": "https://api.github.com/users/lsix/following{/other_user}",
    "gists_url": "https://api.github.com/users/lsix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lsix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lsix/subscriptions",
    "organizations_url": "https://api.github.com/users/lsix/orgs",
    "repos_url": "https://api.github.com/users/lsix/repos",
    "events_url": "https://api.github.com/users/lsix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lsix/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d95edb60be9f66cb4797130c8902bf5814b19448",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d95edb60be9f66cb4797130c8902bf5814b19448",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d95edb60be9f66cb4797130c8902bf5814b19448"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 7,
    "deletions": 18
  },
  "files": [
    {
      "sha": "6c766e148def5d2370a84bace9cd3c493a22ef12",
      "filename": "gdb/testsuite/gdb.base/shlib-call.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 18,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae/gdb/testsuite/gdb.base/shlib-call.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae/gdb/testsuite/gdb.base/shlib-call.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/shlib-call.exp?ref=5bdd79dff95269a7bf6428c449c1cfd5eab0c3ae",
      "patch": "@@ -60,10 +60,6 @@ clean_restart ${binfile}\n gdb_load_shlib $lib1\n gdb_load_shlib $lib2\n \n-gdb_test_no_output \"set print sevenbit-strings\"\n-gdb_test_no_output \"set print address off\"\n-gdb_test_no_output \"set width 0\"\n-\n \n if ![runto_main] then {\n         perror \"C function calling tests suppressed\"\n@@ -90,7 +86,7 @@ if ![gdb_skip_stdio_test \"next over shr1\"] {\n \n \n #print g\n-gdb_test \"print g\" \"\\[0-9\\]* = 2\"\n+gdb_test \"print g\" \"\\[0-9\\]* = 2\" \"print g two\"\n \n #print shr1(1)\n if ![gdb_skip_stdio_test \"print shr1(1)\"] {\n@@ -137,7 +133,7 @@ gdb_test \"print mainshr1(1)\" \"\\[0-9\\]* = 2\" \\\n # behavior will differ depending upon upon whether or not\n # the compiler emits line number information for the epilogue.\n gdb_test_multiple \"step\" \"step out of shr2 to main\" {\n-    -re \"main \\\\(\\\\) at.*g = mainshr1\\\\(g\\\\);.*$gdb_prompt $\" { \n+    -re \"main \\\\(\\\\) at.*g = mainshr1\\\\(g\\\\);.*$gdb_prompt $\" {\n \tpass \"step out of shr2 to main\"\n     }\n     -re \".*\\\\\\}.*$gdb_prompt $\" {\n@@ -152,7 +148,7 @@ gdb_test_multiple \"step\" \"step out of shr2 to main\" {\n \t}\n     }\n }\n-    \n+\n #print mainshr1(1)\n gdb_test \"print mainshr1(1)\" \"\\[0-9\\]* = 2\"\n \n@@ -162,14 +158,7 @@ gdb_test \"step\" \"mainshr1 \\\\(g=4\\\\) at.*return 2.g;\" \\\n \n # Start with a fresh gdb.\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-gdb_load ${binfile}\n-gdb_test_no_output \"set print sevenbit-strings\"\n-gdb_test_no_output \"set print address off\"\n-gdb_test_no_output \"set width 0\"\n-\n+clean_restart $binfile\n \n # PR's 16495, 18213\n # test that we can re-set breakpoints in shared libraries\n@@ -179,7 +168,7 @@ set test \"run to bp in shared library\"\n gdb_run_cmd\n gdb_test_multiple \"\" $test {\n     -re \"Breakpoint .,.*${gdb_prompt} \" {\n-\tpass $test\n+\tpass $gdb_test_name\n     }\n }\n \n@@ -189,8 +178,8 @@ set test \"re-run to bp in shared library (PR's 16495, 18213)\"\n gdb_run_cmd\n gdb_test_multiple \"\" $test {\n     -re \"Breakpoint .,.*${gdb_prompt} \" {\n-\tpass $test\n+\tpass $gdb_test_name\n     }\n }\n \n-gdb_continue_to_end \"\" continue 1\n+gdb_continue_to_end \"after re-run\" continue 1"
    }
  ]
}