{
  "sha": "fe83066292c6aaa8227b2d38c343379a209cb4ba",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmU4MzA2NjI5MmM2YWFhODIyN2IyZDM4YzM0MzM3OWEyMDljYjRiYQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-09-16T15:49:36Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-09-16T19:32:38Z"
    },
    "message": "Match demangled name in \"skip\"\n\nPR gdb/26598 notes that, before commit bcfe6157ca28 (\"Use the linkage\nname if it exists\"), the \"skip\" command would match the demangled name\nof a symbol, but now only matches the linkage name.\n\nThis patch fixes this regression.  I looked at all calls to\nfunction_name_is_marked_for_skip, and only one used the linkage name.\n\n2020-09-16  Tom Tromey  <tromey@adacore.com>\n\n\tPR gdb/26598:\n\t* infrun.c (fill_in_stop_func): Use find_pc_partial_function_sym.\n\ngdb/testsuite/ChangeLog\n2020-09-16  Tom Tromey  <tromey@adacore.com>\n\n\tPR gdb/26598:\n\t* gdb.base/skipcxx.exp: New file.\n\t* gdb.base/skipcxx.cc: New file.",
    "tree": {
      "sha": "071b6b70a270f85afc58a8a93dc10fd4ba71da7c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/071b6b70a270f85afc58a8a93dc10fd4ba71da7c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fe83066292c6aaa8227b2d38c343379a209cb4ba",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fe83066292c6aaa8227b2d38c343379a209cb4ba",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fe83066292c6aaa8227b2d38c343379a209cb4ba",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fe83066292c6aaa8227b2d38c343379a209cb4ba/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "fe5ddfc3ee21789ec2bdffbe48f6b7cfe730dca7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fe5ddfc3ee21789ec2bdffbe48f6b7cfe730dca7",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/fe5ddfc3ee21789ec2bdffbe48f6b7cfe730dca7"
    }
  ],
  "stats": {
    "total": 84,
    "additions": 79,
    "deletions": 5
  },
  "files": [
    {
      "sha": "a56fc5b05fa39263d166261c1160260e008bf41c",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=fe83066292c6aaa8227b2d38c343379a209cb4ba",
      "patch": "@@ -1,3 +1,8 @@\n+2020-09-16  Tom Tromey  <tromey@adacore.com>\n+\n+\tPR gdb/26598:\n+\t* infrun.c (fill_in_stop_func): Use find_pc_partial_function_sym.\n+\n 2020-09-16  John Baldwin  <jhb@FreeBSD.org>\n \n \t* fbsd-nat.c (fbsd_nat_target::wait): Always check for"
    },
    {
      "sha": "780d5bc791e368ad1a5c925ed51e7c2b3f1f6377",
      "filename": "gdb/infrun.c",
      "status": "modified",
      "additions": 7,
      "deletions": 5,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/infrun.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/infrun.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/infrun.c?ref=fe83066292c6aaa8227b2d38c343379a209cb4ba",
      "patch": "@@ -4358,14 +4358,16 @@ fill_in_stop_func (struct gdbarch *gdbarch,\n   if (!ecs->stop_func_filled_in)\n     {\n       const block *block;\n+      const general_symbol_info *gsi;\n \n       /* Don't care about return value; stop_func_start and stop_func_name\n \t will both be 0 if it doesn't work.  */\n-      find_pc_partial_function (ecs->event_thread->suspend.stop_pc,\n-\t\t\t\t&ecs->stop_func_name,\n-\t\t\t\t&ecs->stop_func_start,\n-\t\t\t\t&ecs->stop_func_end,\n-\t\t\t\t&block);\n+      find_pc_partial_function_sym (ecs->event_thread->suspend.stop_pc,\n+\t\t\t\t    &gsi,\n+\t\t\t\t    &ecs->stop_func_start,\n+\t\t\t\t    &ecs->stop_func_end,\n+\t\t\t\t    &block);\n+      ecs->stop_func_name = gsi == nullptr ? nullptr : gsi->print_name ();\n \n       /* The call to find_pc_partial_function, above, will set\n \t stop_func_start and stop_func_end to the start and end"
    },
    {
      "sha": "a0211e61c5a49949916bf4e2e143f6b0fb9fc7aa",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=fe83066292c6aaa8227b2d38c343379a209cb4ba",
      "patch": "@@ -1,3 +1,9 @@\n+2020-09-16  Tom Tromey  <tromey@adacore.com>\n+\n+\tPR gdb/26598:\n+\t* gdb.base/skipcxx.exp: New file.\n+\t* gdb.base/skipcxx.cc: New file.\n+\n 2020-09-16  Tom de Vries  <tdevries@suse.de>\n \n \tPR testsuite/26617"
    },
    {
      "sha": "5f653455c36bbc1c0c1bb7017f5d294845151b22",
      "filename": "gdb/testsuite/gdb.base/skipcxx.cc",
      "status": "added",
      "additions": 32,
      "deletions": 0,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/gdb.base/skipcxx.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/gdb.base/skipcxx.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/skipcxx.cc?ref=fe83066292c6aaa8227b2d38c343379a209cb4ba",
      "patch": "@@ -0,0 +1,32 @@\n+/* This testcase is part of GDB, the GNU debugger.\n+\n+   Copyright 2020 Free Software Foundation, Inc.\n+\n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3 of the License, or\n+   (at your option) any later version.\n+\n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n+\n+namespace somename\n+{\n+int func()\n+{\n+  return 23;\n+}\n+}\n+\n+int\n+main ()\n+{\n+  int x = somename::func ();\n+\n+  return 0;\n+}"
    },
    {
      "sha": "19144519eeeb9ede15b6d0c4a0fb295def9f2e5a",
      "filename": "gdb/testsuite/gdb.base/skipcxx.exp",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/gdb.base/skipcxx.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe83066292c6aaa8227b2d38c343379a209cb4ba/gdb/testsuite/gdb.base/skipcxx.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/skipcxx.exp?ref=fe83066292c6aaa8227b2d38c343379a209cb4ba",
      "patch": "@@ -0,0 +1,29 @@\n+#   Copyright 2020 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+standard_testfile .cc\n+\n+if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile debug]} {\n+    return -1\n+}\n+\n+if ![runto_main] {\n+    fail \"can't run to main\"\n+    return\n+}\n+\n+gdb_test \"skip -rfu ^somename::\" \\\n+    [string_to_regexp \"Function(s) ^somename:: will be skipped when stepping.\"]\n+gdb_test \"step\" \".* return 0;\""
    }
  ]
}