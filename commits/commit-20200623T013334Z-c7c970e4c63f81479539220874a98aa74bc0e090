{
  "sha": "c7c970e4c63f81479539220874a98aa74bc0e090",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzdjOTcwZTRjNjNmODE0Nzk1MzkyMjA4NzRhOThhYTc0YmMwZTA5MA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-06-22T02:20:46Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-06-23T01:33:34Z"
    },
    "message": "Correct bfin XPASSes\n\nbfin-elf and bfin-linux differ.  This patch fixes these:\nbfin-linux-uclibc  -XPASS: PR ld/14170\nbfin-linux-uclibc  -XPASS: pr17068 link --as-needed lib in group\nbfin-linux-uclibc  -XPASS: -Bsymbolic-functions\nbfin-linux-uclibc  -XPASS: pr22374 function pointer initialization\n\n\t* testsuite/ld-elf/shared.exp (pr14170): Clear xfail for\n\tbfin-*-linux*.\n\t(pr17068, symbolic-func.so, pr22374): Likewise.",
    "tree": {
      "sha": "c83b25d3ed47fc14c4697df8f26f559f618eb470",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c83b25d3ed47fc14c4697df8f26f559f618eb470"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c7c970e4c63f81479539220874a98aa74bc0e090",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c7c970e4c63f81479539220874a98aa74bc0e090",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c7c970e4c63f81479539220874a98aa74bc0e090",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c7c970e4c63f81479539220874a98aa74bc0e090/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d081ffffa0be1baadc802ff303361d1d9e984e1c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d081ffffa0be1baadc802ff303361d1d9e984e1c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d081ffffa0be1baadc802ff303361d1d9e984e1c"
    }
  ],
  "stats": {
    "total": 38,
    "additions": 21,
    "deletions": 17
  },
  "files": [
    {
      "sha": "d59b00b75dae4122658602e13f5ac119be39d059",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c7c970e4c63f81479539220874a98aa74bc0e090/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c7c970e4c63f81479539220874a98aa74bc0e090/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=c7c970e4c63f81479539220874a98aa74bc0e090",
      "patch": "@@ -1,3 +1,9 @@\n+2020-06-23  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/ld-elf/shared.exp (pr14170): Clear xfail for\n+\tbfin-*-linux*.\n+\t(pr17068, symbolic-func.so, pr22374): Likewise.\n+\n 2020-06-22  Nelson Chu  <nelson.chu@sifive.com>\n \n \t* testsuite/ld-riscv-elf/attr-merge-priv-spec-failed-01.d: Updated."
    },
    {
      "sha": "e9e9012058645e8ed0f7f120a02ef2eac1a89a32",
      "filename": "ld/testsuite/ld-elf/shared.exp",
      "status": "modified",
      "additions": 15,
      "deletions": 17,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c7c970e4c63f81479539220874a98aa74bc0e090/ld/testsuite/ld-elf/shared.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c7c970e4c63f81479539220874a98aa74bc0e090/ld/testsuite/ld-elf/shared.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/shared.exp?ref=c7c970e4c63f81479539220874a98aa74bc0e090",
      "patch": "@@ -379,12 +379,14 @@ run_ld_link_tests [list \\\n ]\n \n # bfin does not currently support copy relocs.\n+setup_xfail bfin-*-*\n+clear_xfail bfin-*-linux*\n run_ld_link_tests [list \\\n     [list \"PR ld/14170\" \\\n \t\"$LFLAGS --no-dynamic-linker tmpdir/pr14170a.o tmpdir/pr14170.so\" \"\" \\\n \t$hpux \\\n \t {pr14170c.s} { } \"pr14170\" ] \\\n-] \"bfin-*-*\"\n+]\n \n # Targets that use _bfd_generic_link_add_symbols won't pass pr21703 tests\n # Nor will hppa64 with dot-symbols.\n@@ -431,22 +433,26 @@ run_ld_link_tests [list \\\n ]\n \n # bfin does not currently support copy relocs.\n+setup_xfail bfin-*-*\n+clear_xfail bfin-*-linux*\n run_ld_link_tests {\n     {\"pr17068 link --as-needed lib in group\"\n \t\"$LFLAGS --as-needed --no-dynamic-linker\"\n \t\"--start-group tmpdir/pr17068a.a tmpdir/pr17068.so tmpdir/pr17068b.a\\\n \t --end-group\" \"\"\n \t{start.s pr17068.s} {} \"pr17068\"}\n-} \"bfin-*-*\"\n+}\n \n # Fails on MIPS because ABI trickery means that a NULL reloc is emitted.\n # Fails on bfin because relocations are not created.\n+setup_xfail mips*-*-* bfin-*-*\n+clear_xfail bfin-*-linux*\n run_ld_link_tests [list \\\n     [list \"-Bsymbolic-functions\" \\\n \t\"-shared -Bsymbolic-functions\" \"\" \"$AFLAGS_PIC\" \\\n \t{symbolic-func.s} {{readelf {-r --wide} symbolic-func.r}} \\\n \t\"symbolic-func.so\"] \\\n-] \"mips*-*-*\" \"bfin-*-*\"\n+]\n \n run_ld_link_tests [list \\\n     [list \"Build pr20995.so\" \\\n@@ -485,20 +491,12 @@ run_ld_link_tests [list \\\n     [list \"Build pr22374 shared library\" \\\n \t\"-shared\" \"\" \"$AFLAGS_PIC\" \"pr22374b.s\" {} \"pr22374.so\" ] \\\n ]\n-if { ![istarget \"alpha-*-*\"]\n-     && ![istarget \"csky-*-*\"]\n-     && ![istarget \"frv-*-*\"]\n-     && ![istarget \"hppa*-*-*\"]\n-     && ![istarget \"i?86-*-*\"]\n-     && ![istarget \"ia64-*-*\"]\n-     && ![istarget \"microblaze-*-*\"]\n-     && ![istarget \"powerpc*-*-*\"]\n-     && ![istarget \"x86_64-*-*\"]\n-     && ![istarget \"xtensa-*-*\"] } {\n-    # The next test checks that copy relocs are not used unnecessarily,\n-    # but that is just an optimization so don't complain loudly.\n-    setup_xfail \"*-*-*\"\n-}\n+\n+# The next test checks that copy relocs are not used unnecessarily,\n+# but that is just an optimization so don't complain loudly.\n+setup_xfail *-*-*\n+clear_xfail alpha-*-* bfin-*-linux* csky-*-* frv-*-* hppa*-*-* i?86-*-*\n+clear_xfail ia64-*-* microblaze-*-* powerpc*-*-* x86_64-*-* xtensa-*-*\n run_ld_link_tests {\n     {\"pr22374 function pointer initialization\"\n \t\"\" \"tmpdir/pr22374.so\" \"\" \"pr22374a.s\""
    }
  ]
}