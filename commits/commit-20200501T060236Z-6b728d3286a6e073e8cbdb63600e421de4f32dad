{
  "sha": "6b728d3286a6e073e8cbdb63600e421de4f32dad",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NmI3MjhkMzI4NmE2ZTA3M2U4Y2JkYjYzNjAwZTQyMWRlNGYzMmRhZA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-05-01T05:50:14Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-05-01T06:02:36Z"
    },
    "message": "FIXME for merging of e_flags and .gnu.attributes\n\nCode in the linker, present before the addition of .gnu.attributes\nsupport, results in shared libraries not being considered by BFD when\nmerging e_flags and .gnu.attributes from input files to the output.\nThat doesn't seem correct to me, but I don't know enough about all the\nvarious ABIs to change the behaviour with any confidence.  So this\npatch merely punts on dynamic objects in merge_private_bfd_data target\nfunctions, with a FIXME for maintainer attention.\n\nI haven't excluded shared libraries from being considered where the\ntarget merge_private_bfd_data (a) already has code dealing with shared\nlibraries, or (b) where that function just sets the output to the most\nconstraining arch/mach combination and other fairly trivial merges, or\n(c) when the target has no shared library linker support.\n\nIn (a) are: arc, arm, aarch64, riscv, sparc.\nIn (b) are: bpf, cris, csky, m32r, m68k, mn10300, nios2, tilegx,\n\t    tilepro, vax, visium, xtensa.\nIn (c) are: bpf, cr16, h8300, iq2000, m32c, m68hc11, m68hc12, mcore,\n\t    mep, msp430, mt, rl78, rx, v850.\n\n\tPR 25882\n\t* elf32-bfin.c (elf32_bfin_merge_private_bfd_data): Add FIXME.\n\t* elf32-frv.c (frv_elf_merge_private_bfd_data): Likewise.\n\t* elfxx-mips.c (_bfd_mips_elf_merge_private_bfd_data): Likewise.\n\t* elf32-nds32.c (nds32_elf_merge_private_bfd_data): Likewise.\n\t* elf32-score.c (s3_elf32_score_merge_private_bfd_data): Likewise.\n\t* elf32-score7.c (s7_elf32_score_merge_private_bfd_data): Likewise.\n\t* elf32-sh.c (sh_elf_merge_private_data): Likewise.\n\t* elf32-tic6x.c (elf32_tic6x_merge_attributes): Likewise.\n\t* elf64-ia64-vms.c (elf64_ia64_merge_private_bfd_data): Likewise.\n\t* elfnn-ia64.c (elfNN_ia64_merge_private_bfd_data): Likewise.",
    "tree": {
      "sha": "552cb2248023ea55a56b5ce85a609930f8290020",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/552cb2248023ea55a56b5ce85a609930f8290020"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6b728d3286a6e073e8cbdb63600e421de4f32dad",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6b728d3286a6e073e8cbdb63600e421de4f32dad",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6b728d3286a6e073e8cbdb63600e421de4f32dad",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6b728d3286a6e073e8cbdb63600e421de4f32dad/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "91ed9b71fa737ff4a4519f84c5e0ae0d544514f1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/91ed9b71fa737ff4a4519f84c5e0ae0d544514f1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/91ed9b71fa737ff4a4519f84c5e0ae0d544514f1"
    }
  ],
  "stats": {
    "total": 51,
    "additions": 51,
    "deletions": 0
  },
  "files": [
    {
      "sha": "fc1aca2a3913d27c20f1727998d29fb95a4a0896",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -1,3 +1,17 @@\n+2020-05-01  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 25882\n+\t* elf32-bfin.c (elf32_bfin_merge_private_bfd_data): Add FIXME.\n+\t* elf32-frv.c (frv_elf_merge_private_bfd_data): Likewise.\n+\t* elfxx-mips.c (_bfd_mips_elf_merge_private_bfd_data): Likewise.\n+\t* elf32-nds32.c (nds32_elf_merge_private_bfd_data): Likewise.\n+\t* elf32-score.c (s3_elf32_score_merge_private_bfd_data): Likewise.\n+\t* elf32-score7.c (s7_elf32_score_merge_private_bfd_data): Likewise.\n+\t* elf32-sh.c (sh_elf_merge_private_data): Likewise.\n+\t* elf32-tic6x.c (elf32_tic6x_merge_attributes): Likewise.\n+\t* elf64-ia64-vms.c (elf64_ia64_merge_private_bfd_data): Likewise.\n+\t* elfnn-ia64.c (elfNN_ia64_merge_private_bfd_data): Likewise.\n+\n 2020-05-01  Alan Modra  <amodra@gmail.com>\n \n \tPR 25882"
    },
    {
      "sha": "e6383a782ff6c7a0c5bb525a9b0c119e5fbc4682",
      "filename": "bfd/elf32-bfin.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-bfin.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-bfin.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-bfin.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -4755,6 +4755,10 @@ elf32_bfin_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword old_flags, new_flags;\n   bfd_boolean error = FALSE;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   new_flags = elf_elfheader (ibfd)->e_flags;\n   old_flags = elf_elfheader (obfd)->e_flags;\n "
    },
    {
      "sha": "d2a18fd564a92766e8179c8bdc5467a47d3264a3",
      "filename": "bfd/elf32-frv.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-frv.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-frv.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-frv.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -6344,6 +6344,10 @@ frv_elf_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   char new_opt[80];\n   char old_opt[80];\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   new_opt[0] = old_opt[0] = '\\0';\n   new_flags = elf_elfheader (ibfd)->e_flags;\n   old_flags = elf_elfheader (obfd)->e_flags;"
    },
    {
      "sha": "6b0b813af0bf3521e1c6bfdba61e4af7dc3c630a",
      "filename": "bfd/elf32-nds32.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-nds32.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-nds32.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-nds32.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -6817,6 +6817,10 @@ nds32_elf_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword out_fpu_config;\n   flagword in_fpu_config;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   /* TODO: Revise to use object-attributes instead.  */\n   if (!nds32_check_vec_size (ibfd))\n     return FALSE;"
    },
    {
      "sha": "d1a910f2795e9701fd96b291183bf9411164948f",
      "filename": "bfd/elf32-score.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-score.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-score.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-score.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -4021,6 +4021,10 @@ s3_elf32_score_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   if (!_bfd_generic_verify_endian_match (ibfd, info))\n     return FALSE;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   in_flags  = elf_elfheader (ibfd)->e_flags;\n   out_flags = elf_elfheader (obfd)->e_flags;\n "
    },
    {
      "sha": "ab5e32a29a4cc2d923ce13bbee5c4e95770796cc",
      "filename": "bfd/elf32-score7.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-score7.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-score7.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-score7.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -3826,6 +3826,10 @@ s7_elf32_score_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   if (!_bfd_generic_verify_endian_match (ibfd, info))\n     return FALSE;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   in_flags  = elf_elfheader (ibfd)->e_flags;\n   out_flags = elf_elfheader (obfd)->e_flags;\n "
    },
    {
      "sha": "24203e0d5553b56efc0f380d2c4c58517c15082f",
      "filename": "bfd/elf32-sh.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-sh.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-sh.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-sh.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -6028,6 +6028,10 @@ sh_elf_merge_private_data (bfd *ibfd, struct bfd_link_info *info)\n {\n   bfd *obfd = info->output_bfd;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   if (! is_sh_elf (ibfd) || ! is_sh_elf (obfd))\n     return TRUE;\n "
    },
    {
      "sha": "d07902fe8a76e9e6c800fc7c372efa77961d1ba9",
      "filename": "bfd/elf32-tic6x.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-tic6x.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf32-tic6x.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-tic6x.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -3724,6 +3724,10 @@ elf32_tic6x_merge_attributes (bfd *ibfd, struct bfd_link_info *info)\n   int i;\n   int array_align_in, array_align_out, array_expect_in, array_expect_out;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   if (!elf_known_obj_attributes_proc (obfd)[0].i)\n     {\n       /* This is the first object.  Copy the attributes.  */"
    },
    {
      "sha": "159698fa07fe3e46ccb693bdfa48afa63d250a26",
      "filename": "bfd/elf64-ia64-vms.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf64-ia64-vms.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elf64-ia64-vms.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf64-ia64-vms.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -4233,6 +4233,10 @@ elf64_ia64_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword in_flags;\n   bfd_boolean ok = TRUE;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   /* Don't even pretend to support mixed-format linking.  */\n   if (bfd_get_flavour (ibfd) != bfd_target_elf_flavour\n       || bfd_get_flavour (obfd) != bfd_target_elf_flavour)"
    },
    {
      "sha": "0cdd6b58c9dc4e7141ceaa6c1da929c766e61f76",
      "filename": "bfd/elfnn-ia64.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elfnn-ia64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elfnn-ia64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfnn-ia64.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -4744,6 +4744,10 @@ elfNN_ia64_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword in_flags;\n   bfd_boolean ok = TRUE;\n \n+  /* FIXME: What should be checked when linking shared libraries?  */\n+  if ((ibfd->flags & DYNAMIC) != 0)\n+    return TRUE;\n+\n   if (!is_ia64_elf (ibfd) || !is_ia64_elf (obfd))\n     return TRUE;\n "
    },
    {
      "sha": "9ce205e9cf66c2f81f9601479c29f33f8b441857",
      "filename": "bfd/elfxx-mips.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elfxx-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6b728d3286a6e073e8cbdb63600e421de4f32dad/bfd/elfxx-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfxx-mips.c?ref=6b728d3286a6e073e8cbdb63600e421de4f32dad",
      "patch": "@@ -15767,6 +15767,7 @@ _bfd_mips_elf_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   /* Check to see if the input BFD actually contains any sections.  If not,\n      then it has no attributes, and its flags may not have been initialized\n      either, but it cannot actually cause any incompatibility.  */\n+  /* FIXME: This excludes any input shared library from consideration.  */\n   for (sec = ibfd->sections; sec != NULL; sec = sec->next)\n     {\n       /* Ignore synthetic sections and empty .text, .data and .bss sections"
    }
  ]
}