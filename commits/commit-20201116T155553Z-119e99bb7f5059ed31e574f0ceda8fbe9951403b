{
  "sha": "119e99bb7f5059ed31e574f0ceda8fbe9951403b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTE5ZTk5YmI3ZjUwNTllZDMxZTU3NGYwY2VkYThmYmU5OTUxNDAzYg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-11-16T15:55:53Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-11-16T15:55:53Z"
    },
    "message": "Update gdb.dwarf2/data-loc.exp\n\nTom de Vries pointed out that the series to handle\n-fgnat-encodings=minimal regressed data-loc.exp:\n\nhttps://sourceware.org/pipermail/gdb-patches/2020-November/173035.html\n\nThis was my oversight.  Looking at the test, it mimics what GNAT\nemits.  The patch series in question changed the approach that gdb\ntakes to such arrays -- now they are transformed back into \"old\" style\nstructures.  (This is perhaps a step backward in a semantics sense,\nbut on the other hand it more accurately reflects the underlying\nreality, and lets gdb continue to create objects of this type.)\n\nThis patch updates the test case, by adjusting the expected output.\nIt also removes the tests done in the C language, because they are now\nincorrect, and because (IMO) they don't add much value.\n\ngdb/testsuite/ChangeLog\n2020-11-16  Tom Tromey  <tromey@adacore.com>\n\n\t* gdb.dwarf2/data-loc.exp: Update expected output.  Remove C\n\ttests.",
    "tree": {
      "sha": "f7f659751b7efc87996f2d31f411ae0354acfb44",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f7f659751b7efc87996f2d31f411ae0354acfb44"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/119e99bb7f5059ed31e574f0ceda8fbe9951403b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/119e99bb7f5059ed31e574f0ceda8fbe9951403b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/119e99bb7f5059ed31e574f0ceda8fbe9951403b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/119e99bb7f5059ed31e574f0ceda8fbe9951403b/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2b3cb4006a2e80743eb78f263bd4d6c4f67833f9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2b3cb4006a2e80743eb78f263bd4d6c4f67833f9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2b3cb4006a2e80743eb78f263bd4d6c4f67833f9"
    }
  ],
  "stats": {
    "total": 54,
    "additions": 11,
    "deletions": 43
  },
  "files": [
    {
      "sha": "487d25b26afbe95bbc1fb26d0f2a4b02977a98e8",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/119e99bb7f5059ed31e574f0ceda8fbe9951403b/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/119e99bb7f5059ed31e574f0ceda8fbe9951403b/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=119e99bb7f5059ed31e574f0ceda8fbe9951403b",
      "patch": "@@ -1,3 +1,8 @@\n+2020-11-16  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gdb.dwarf2/data-loc.exp: Update expected output.  Remove C\n+\ttests.\n+\n 2020-11-15  Joel Brobecker  <brobecker@adacore.com>\n \n \t* gdb.ada/fixed_cmp.exp: Add -fgnat-encodings=minimal testing."
    },
    {
      "sha": "832814def4a659bf3b4cdcc29a6a5a3428ddc6f4",
      "filename": "gdb/testsuite/gdb.dwarf2/data-loc.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 43,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/119e99bb7f5059ed31e574f0ceda8fbe9951403b/gdb/testsuite/gdb.dwarf2/data-loc.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/119e99bb7f5059ed31e574f0ceda8fbe9951403b/gdb/testsuite/gdb.dwarf2/data-loc.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/data-loc.exp?ref=119e99bb7f5059ed31e574f0ceda8fbe9951403b",
      "patch": "@@ -138,7 +138,7 @@ gdb_test \"print foo.three\" \\\n          \" = \\\\(1, 2, 3\\\\)\"\n \n gdb_test \"ptype foo.three\" \\\n-         \"type = array \\\\(1 .. 3\\\\) of integer\"\n+         \"type = array \\\\(<>\\\\) of integer\"\n \n gdb_test \"print foo.three(1)\" \\\n          \" = 1\"\n@@ -160,11 +160,11 @@ gdb_test \"print foo.three'length\" \\\n \n # foo.three_tdef\n \n-gdb_test \"print foo.three_tdef\" \\\n+gdb_test \"print foo.three_tdef.all\" \\\n          \" = \\\\(1, 2, 3\\\\)\"\n \n gdb_test \"ptype foo.three_tdef\" \\\n-         \"type = array \\\\(1 .. 3\\\\) of integer\"\n+         \"type = access array \\\\(<>\\\\) of integer\"\n \n gdb_test \"print foo.three_tdef(1)\" \\\n          \" = 1\"\n@@ -188,7 +188,7 @@ gdb_test \"print foo.five\" \\\n          \" = \\\\(2 => 5, 8, 13, 21, 34\\\\)\"\n \n gdb_test \"ptype foo.five\" \\\n-         \"type = array \\\\(2 .. 6\\\\) of integer\"\n+         \"type = array \\\\(<>\\\\) of integer\"\n \n gdb_test \"ptype foo.array_type\" \\\n          \"type = array \\\\(<>\\\\) of integer\"\n@@ -221,11 +221,11 @@ gdb_test \"print foo.five'length\" \\\n \n # foo.five_tdef\n \n-gdb_test \"print foo.five_tdef\" \\\n+gdb_test \"print foo.five_tdef.all\" \\\n          \" = \\\\(2 => 5, 8, 13, 21, 34\\\\)\"\n \n gdb_test \"ptype foo.five_tdef\" \\\n-         \"type = array \\\\(2 .. 6\\\\) of integer\"\n+         \"type = access array \\\\(<>\\\\) of integer\"\n \n gdb_test \"print foo.five_tdef(2)\" \\\n          \" = 5\"\n@@ -250,40 +250,3 @@ gdb_test \"print foo.five_tdef'last\" \\\n \n gdb_test \"print foo.five_tdef'length\" \\\n          \" = 5\"\n-\n-gdb_test_no_output \"set lang c\"\n-\n-# foo__three\n-\n-gdb_test \"print foo__three\" \\\n-         \" = \\\\{1, 2, 3\\\\}\"\n-\n-gdb_test \"ptype foo__three\" \\\n-         \"type = integer \\\\\\[3\\\\\\]\"\n-\n-# foo__three_tdef\n-\n-gdb_test \"print foo__three_tdef\" \\\n-         \" = \\\\{1, 2, 3\\\\}\"\n-\n-gdb_test \"ptype foo__three_tdef\" \\\n-         \"type = integer \\\\\\[3\\\\\\]\"\n-\n-# foo__five\n-\n-gdb_test \"print foo__five\" \\\n-         \" = \\\\{5, 8, 13, 21, 34\\\\}\"\n-\n-gdb_test \"ptype foo__five\" \\\n-         \"type = integer \\\\\\[5\\\\\\]\"\n-\n-# foo__five_tdef\n-\n-gdb_test \"print foo__five_tdef\" \\\n-         \" = \\\\{5, 8, 13, 21, 34\\\\}\"\n-\n-gdb_test \"ptype foo__five_tdef\" \\\n-         \"type = integer \\\\\\[5\\\\\\]\"\n-\n-gdb_test \"ptype foo__array_type\" \\\n-         \"type = integer \\\\\\[variable length\\\\\\]\""
    }
  ]
}