{
  "sha": "d4340f89eccb0b0a0811e142ce365efc48beb064",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDQzNDBmODllY2NiMGIwYTA4MTFlMTQyY2UzNjVlZmM0OGJlYjA2NA==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-12-05T07:43:03Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-12-05T07:43:03Z"
    },
    "message": "Arm64: correct \"sha3\" arch-extension directive handling\n\nSHA2 is a prereq to SHA3, not part of it aiui. Hence disabling the\nlatter should not also disable the former.\n\nIn the course of adding respective tests also do away with the\nduplication of crypto.d's contents in crypto-directive.d.",
    "tree": {
      "sha": "2e3ac1e1b452d904a065a48cf2ceb15e3d041f8d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2e3ac1e1b452d904a065a48cf2ceb15e3d041f8d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d4340f89eccb0b0a0811e142ce365efc48beb064",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d4340f89eccb0b0a0811e142ce365efc48beb064",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d4340f89eccb0b0a0811e142ce365efc48beb064",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d4340f89eccb0b0a0811e142ce365efc48beb064/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6e9ed99753f0730e85bd45eabb63f499e4d0eca3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6e9ed99753f0730e85bd45eabb63f499e4d0eca3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6e9ed99753f0730e85bd45eabb63f499e4d0eca3"
    }
  ],
  "stats": {
    "total": 94,
    "additions": 49,
    "deletions": 45
  },
  "files": [
    {
      "sha": "fb8efb2b3e1544597499f5defb61c5e6c609c0fb",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -1,3 +1,15 @@\n+2019-12-05  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* config/tc-aarch64.c (aarch64_features): Make SHA2 a prereq of\n+\tSHA3.\n+\t* testsuite/gas/aarch64/crypto.s\n+\t* testsuite/gas/aarch64/crypto-directive.d: Refer to crypto.d\n+\tfor actual output.\n+\t* testsuite/gas/aarch64/illegal-crypto-nofp.l: Relax\n+\texpectations.\n+\t* testsuite/gas/aarch64/crypto-directive2.d,\n+\ttestsuite/gas/aarch64/crypto-directive3.d: New.\n+\n 2019-12-04  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386-intel.c (i386_intel_operand): Handle LFS et al"
    },
    {
      "sha": "5ac219c4b97da005f684354b5261698a449efd98",
      "filename": "gas/config/tc-aarch64.c",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/config/tc-aarch64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/config/tc-aarch64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-aarch64.c?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -9038,9 +9038,8 @@ static const struct aarch64_option_cpu_value_table aarch64_features[] = {\n \t\t\tAARCH64_ARCH_NONE},\n   {\"sm4\",\t\tAARCH64_FEATURE (AARCH64_FEATURE_SM4, 0),\n \t\t\tAARCH64_ARCH_NONE},\n-  {\"sha3\",\t\tAARCH64_FEATURE (AARCH64_FEATURE_SHA2\n-\t\t\t\t\t | AARCH64_FEATURE_SHA3, 0),\n-\t\t\tAARCH64_ARCH_NONE},\n+  {\"sha3\",\t\tAARCH64_FEATURE (AARCH64_FEATURE_SHA3, 0),\n+\t\t\tAARCH64_FEATURE (AARCH64_FEATURE_SHA2, 0)},\n   {\"rng\",\t\tAARCH64_FEATURE (AARCH64_FEATURE_RNG, 0),\n \t\t\tAARCH64_ARCH_NONE},\n   {\"ssbs\",\t\tAARCH64_FEATURE (AARCH64_FEATURE_SSBS, 0),"
    },
    {
      "sha": "6d4bcde7d09d314f5b1de5d62a57dcb73f3a4f5b",
      "filename": "gas/testsuite/gas/aarch64/crypto-directive.d",
      "status": "modified",
      "additions": 1,
      "deletions": 24,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/crypto-directive.d?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -1,27 +1,4 @@\n #objdump: -dr\n #as: --defsym DIRECTIVE=1\n #source: crypto.s\n-\n-.*:     file format .*\n-\n-Disassembly of section \\.text:\n-\n-0+ <.*>:\n-   0:\t4e284be7 \taese\tv7.16b, v31.16b\n-   4:\t4e285be7 \taesd\tv7.16b, v31.16b\n-   8:\t4e286be7 \taesmc\tv7.16b, v31.16b\n-   c:\t4e287be7 \taesimc\tv7.16b, v31.16b\n-  10:\t5e280be7 \tsha1h\ts7, s31\n-  14:\t5e281be7 \tsha1su1\tv7.4s, v31.4s\n-  18:\t5e282be7 \tsha256su0\tv7.4s, v31.4s\n-  1c:\t5e1f01e7 \tsha1c\tq7, s15, v31.4s\n-  20:\t5e1f11e7 \tsha1p\tq7, s15, v31.4s\n-  24:\t5e1f21e7 \tsha1m\tq7, s15, v31.4s\n-  28:\t5e1f31e7 \tsha1su0\tv7.4s, v15.4s, v31.4s\n-  2c:\t5e1f41e7 \tsha256h\tq7, q15, v31.4s\n-  30:\t5e1f51e7 \tsha256h2\tq7, q15, v31.4s\n-  34:\t5e1f61e7 \tsha256su1\tv7.4s, v15.4s, v31.4s\n-  38:\t0e3fe1e7 \tpmull\tv7.8h, v15.8b, v31.8b\n-  3c:\t0effe1e7 \tpmull\tv7.1q, v15.1d, v31.1d\n-  40:\t4e3fe1e7 \tpmull2\tv7.8h, v15.16b, v31.16b\n-  44:\t4effe1e7 \tpmull2\tv7.1q, v15.2d, v31.2d\n+#dump: crypto.d"
    },
    {
      "sha": "f93fdb1832b3e064c3230b79784c280fc7f01c83",
      "filename": "gas/testsuite/gas/aarch64/crypto-directive2.d",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive2.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive2.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/crypto-directive2.d?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -0,0 +1,4 @@\n+#objdump: -dr\n+#as: --defsym DIRECTIVE=2\n+#source: crypto.s\n+#dump: crypto.d"
    },
    {
      "sha": "d58714e8c107546756e65d0fc497486398e28eec",
      "filename": "gas/testsuite/gas/aarch64/crypto-directive3.d",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive3.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto-directive3.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/crypto-directive3.d?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -0,0 +1,4 @@\n+#objdump: -dr\n+#as: --defsym DIRECTIVE=3\n+#source: crypto.s\n+#dump: crypto.d"
    },
    {
      "sha": "59eea74466afc38634647371e7b227f8ca51aa96",
      "filename": "gas/testsuite/gas/aarch64/crypto.s",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/crypto.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/crypto.s?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -21,8 +21,16 @@\n \n \t.text\n \t.ifdef DIRECTIVE\n+\t.if DIRECTIVE > 1\n+\t.arch_extension aes\n+\t.arch_extension sha2\n+\t.else\n \t.arch_extension crypto\n \t.endif\n+\t.if DIRECTIVE == 3\n+\t.arch_extension nosha3\n+\t.endif\n+\t.endif\n \n \taese\tv7.16b, v31.16b\n \taesd\tv7.16b, v31.16b"
    },
    {
      "sha": "63ca09baaeec344507d638c77b86254bebfca3a9",
      "filename": "gas/testsuite/gas/aarch64/illegal-crypto-nofp.l",
      "status": "modified",
      "additions": 18,
      "deletions": 18,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/illegal-crypto-nofp.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4340f89eccb0b0a0811e142ce365efc48beb064/gas/testsuite/gas/aarch64/illegal-crypto-nofp.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/illegal-crypto-nofp.l?ref=d4340f89eccb0b0a0811e142ce365efc48beb064",
      "patch": "@@ -1,19 +1,19 @@\n [^:]*: Assembler messages:\n-[^:]+:27: Error: selected processor does not support `aese v7\\.16b,v31\\.16b'\n-[^:]+:28: Error: selected processor does not support `aesd v7\\.16b,v31\\.16b'\n-[^:]+:29: Error: selected processor does not support `aesmc v7\\.16b,v31\\.16b'\n-[^:]+:30: Error: selected processor does not support `aesimc v7\\.16b,v31\\.16b'\n-[^:]+:32: Error: selected processor does not support `sha1h s7,s31'\n-[^:]+:33: Error: selected processor does not support `sha1su1 v7\\.4s,v31\\.4s'\n-[^:]+:34: Error: selected processor does not support `sha256su0 v7\\.4s,v31\\.4s'\n-[^:]+:36: Error: selected processor does not support `sha1c q7,s15,v31\\.4s'\n-[^:]+:37: Error: selected processor does not support `sha1p q7,s15,v31\\.4s'\n-[^:]+:38: Error: selected processor does not support `sha1m q7,s15,v31\\.4s'\n-[^:]+:40: Error: selected processor does not support `sha1su0 v7\\.4s,v15\\.4s,v31\\.4s'\n-[^:]+:41: Error: selected processor does not support `sha256h q7,q15,v31\\.4s'\n-[^:]+:42: Error: selected processor does not support `sha256h2 q7,q15,v31\\.4s'\n-[^:]+:43: Error: selected processor does not support `sha256su1 v7\\.4s,v15\\.4s,v31\\.4s'\n-[^:]+:45: Error: selected processor does not support `pmull v7\\.8h,v15\\.8b,v31\\.8b'\n-[^:]+:46: Error: selected processor does not support `pmull v7\\.1q,v15\\.1d,v31\\.1d'\n-[^:]+:47: Error: selected processor does not support `pmull2 v7\\.8h,v15\\.16b,v31\\.16b'\n-[^:]+:48: Error: selected processor does not support `pmull2 v7\\.1q,v15\\.2d,v31\\.2d'\n+[^:]+:[0-9]+: Error: selected processor does not support `aese v7\\.16b,v31\\.16b'\n+[^:]+:[0-9]+: Error: selected processor does not support `aesd v7\\.16b,v31\\.16b'\n+[^:]+:[0-9]+: Error: selected processor does not support `aesmc v7\\.16b,v31\\.16b'\n+[^:]+:[0-9]+: Error: selected processor does not support `aesimc v7\\.16b,v31\\.16b'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1h s7,s31'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1su1 v7\\.4s,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha256su0 v7\\.4s,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1c q7,s15,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1p q7,s15,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1m q7,s15,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha1su0 v7\\.4s,v15\\.4s,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha256h q7,q15,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha256h2 q7,q15,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `sha256su1 v7\\.4s,v15\\.4s,v31\\.4s'\n+[^:]+:[0-9]+: Error: selected processor does not support `pmull v7\\.8h,v15\\.8b,v31\\.8b'\n+[^:]+:[0-9]+: Error: selected processor does not support `pmull v7\\.1q,v15\\.1d,v31\\.1d'\n+[^:]+:[0-9]+: Error: selected processor does not support `pmull2 v7\\.8h,v15\\.16b,v31\\.16b'\n+[^:]+:[0-9]+: Error: selected processor does not support `pmull2 v7\\.1q,v15\\.2d,v31\\.2d'"
    }
  ]
}