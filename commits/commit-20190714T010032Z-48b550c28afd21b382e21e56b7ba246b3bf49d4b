{
  "sha": "48b550c28afd21b382e21e56b7ba246b3bf49d4b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDhiNTUwYzI4YWZkMjFiMzgyZTIxZTU2YjdiYTI0NmIzYmY0OWQ0Yg==",
  "commit": {
    "author": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2019-07-14T01:00:32Z"
    },
    "committer": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2019-07-14T01:00:32Z"
    },
    "message": "adjust src-release following the renaming of gdb/common/ to gdb/gdbsupport/\n\nA recent change renamed the common/ directory into gdbsupport/ in gdb.\nThis causes problems in the getver function in the src-release script\nwhich doesn't find the create-version.sh script anymore. As a result,\nit falls back on using the version.in file verbatim, meaning that\nthe \"DATE\" placeholder doesn't get replaced with the snapshot date,\nand the \"-git\" suffix doesn't get stripped. More precisely, we get\nsnapshots called \"gdb-8.3.50-DATE-git.tar\" instead of (e.g.)\n\"gdb-8.3-20190712.tar\".\n\nThis commit fixes the issue by adding support for this situation.\nI left the support for $tool/common/create-version.sh, because\nthe sim still uses that directory structure.\n\nChangeLog:\n\n        * src-release (getver): If $tool/gdbsupport/create-version.sh\n        exists, use that to determine the version number.",
    "tree": {
      "sha": "6919a5ba66ca569a816dc5c006158522c0534919",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6919a5ba66ca569a816dc5c006158522c0534919"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/48b550c28afd21b382e21e56b7ba246b3bf49d4b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/48b550c28afd21b382e21e56b7ba246b3bf49d4b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/48b550c28afd21b382e21e56b7ba246b3bf49d4b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/48b550c28afd21b382e21e56b7ba246b3bf49d4b/comments",
  "author": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a48654b6d4ed558d632dca3d895e8ad2f0dd57a6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a48654b6d4ed558d632dca3d895e8ad2f0dd57a6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a48654b6d4ed558d632dca3d895e8ad2f0dd57a6"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 9,
    "deletions": 0
  },
  "files": [
    {
      "sha": "52d97d5fb8b550128558fa041c9b5f708190d87a",
      "filename": "ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/48b550c28afd21b382e21e56b7ba246b3bf49d4b/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/48b550c28afd21b382e21e56b7ba246b3bf49d4b/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ChangeLog?ref=48b550c28afd21b382e21e56b7ba246b3bf49d4b",
      "patch": "@@ -1,3 +1,8 @@\n+2019-07-13  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* src-release (getver): If $tool/gdbsupport/create-version.sh\n+\texists, use that to determine the version number.\n+\n 2019-06-21  Andreas Schwab  <schwab@linux-m68k.org>\n \n \t* src-release.sh (GDB_SUPPORT_DIRS): Add gnulib."
    },
    {
      "sha": "90d556896c9795ff714d2f059edf1ea9d4c554e7",
      "filename": "src-release.sh",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/48b550c28afd21b382e21e56b7ba246b3bf49d4b/src-release.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/48b550c28afd21b382e21e56b7ba246b3bf49d4b/src-release.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/src-release.sh?ref=48b550c28afd21b382e21e56b7ba246b3bf49d4b",
      "patch": "@@ -61,6 +61,10 @@ getver()\n \t$tool/common/create-version.sh $tool 'dummy-host' 'dummy-target' VER.tmp\n \tcat VER.tmp | grep 'version\\[\\]' | sed 's/.*\"\\([^\"]*\\)\".*/\\1/' | sed 's/-git$//'\n         rm -f VER.tmp\n+    elif test -f $tool/gdbsupport/create-version.sh; then\n+\t$tool/gdbsupport/create-version.sh $tool 'dummy-host' 'dummy-target' VER.tmp\n+\tcat VER.tmp | grep 'version\\[\\]' | sed 's/.*\"\\([^\"]*\\)\".*/\\1/' | sed 's/-git$//'\n+        rm -f VER.tmp\n     elif test -f $tool/version.in; then\n \thead -1 $tool/version.in\n     else"
    }
  ]
}