{
  "sha": "65962b20b6df7e8961ec4002179dbd51a33a627f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjU5NjJiMjBiNmRmN2U4OTYxZWM0MDAyMTc5ZGJkNTFhMzNhNjI3Zg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-06T14:21:38Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-15T18:29:28Z"
    },
    "message": "Simplify TUI boxing\n\nIn the TUI, whether or not a window can be boxed is a property of the\nwindow's type.  This adds a can_box method to the window classes, and\nchanges tui_make_window to defer to this, removing the \"box_it\"\nparamter.  This also lets us remove \"enum tui_box\", as it is no longer\nused.\n\ngdb/ChangeLog\n2019-08-15  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-wingeneral.h (tui_make_window): Update.\n\t* tui/tui-wingeneral.c (tui_make_window): Remove \"box_it\"\n\tparameter.\n\t(tui_gen_win_info::make_visible): Update.\n\t* tui/tui-regs.c (tui_data_window::display_registers_from):\n\tUpdate.\n\t* tui/tui-layout.c (show_source_disasm_command)\n\t(show_source_or_disasm_and_command): Update.\n\t* tui/tui-data.h (struct tui_gen_win_info) <can_box>: New method.\n\t(enum tui_box): Remove.\n\t(struct tui_win_info) <can_box>: New method.\n\t* tui/tui-command.h (struct tui_cmd_window) <can_box>: New\n\tmethod.",
    "tree": {
      "sha": "fe58f823af4202c3533085c1619c5a3267c82d89",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fe58f823af4202c3533085c1619c5a3267c82d89"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/65962b20b6df7e8961ec4002179dbd51a33a627f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/65962b20b6df7e8961ec4002179dbd51a33a627f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/65962b20b6df7e8961ec4002179dbd51a33a627f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/65962b20b6df7e8961ec4002179dbd51a33a627f/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "22a2ab04f58dc7c3f5fb0e6d8f0fa96ee4aa3951",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/22a2ab04f58dc7c3f5fb0e6d8f0fa96ee4aa3951",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/22a2ab04f58dc7c3f5fb0e6d8f0fa96ee4aa3951"
    }
  ],
  "stats": {
    "total": 54,
    "additions": 39,
    "deletions": 15
  },
  "files": [
    {
      "sha": "77f4ca07638952b19e3214595c7fd1a4cf604f63",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -1,3 +1,19 @@\n+2019-08-15  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-wingeneral.h (tui_make_window): Update.\n+\t* tui/tui-wingeneral.c (tui_make_window): Remove \"box_it\"\n+\tparameter.\n+\t(tui_gen_win_info::make_visible): Update.\n+\t* tui/tui-regs.c (tui_data_window::display_registers_from):\n+\tUpdate.\n+\t* tui/tui-layout.c (show_source_disasm_command)\n+\t(show_source_or_disasm_and_command): Update.\n+\t* tui/tui-data.h (struct tui_gen_win_info) <can_box>: New method.\n+\t(enum tui_box): Remove.\n+\t(struct tui_win_info) <can_box>: New method.\n+\t* tui/tui-command.h (struct tui_cmd_window) <can_box>: New\n+\tmethod.\n+\n 2019-08-15  Tom de Vries  <tdevries@suse.de>\n \n \t* linux-nat-trad.c: Include gdbarch.h."
    },
    {
      "sha": "14d775008823db22c9a6d195e721000919b1c29c",
      "filename": "gdb/tui/tui-command.h",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-command.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-command.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-command.h?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -55,6 +55,11 @@ struct tui_cmd_window : public tui_win_info\n     return false;\n   }\n \n+  bool can_box () const override\n+  {\n+    return false;\n+  }\n+\n   int start_line = 0;\n \n protected:"
    },
    {
      "sha": "017e7a40f52bce80892bda24889e54c2d6f81018",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 11,
      "deletions": 7,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -67,6 +67,12 @@ struct tui_gen_win_info\n   virtual void reset (int height, int width,\n \t\t      int origin_x, int origin_y);\n \n+  /* Return true if this can be boxed.  */\n+  virtual bool can_box () const\n+  {\n+    return false;\n+  }\n+\n   /* Window handle.  */\n   WINDOW *handle = nullptr;\n   /* Type of window.  */\n@@ -85,13 +91,6 @@ struct tui_gen_win_info\n   char *title = nullptr;\n };\n \n-/* Whether or not a window should be drawn with a box.  */\n-enum tui_box\n-{\n-  DONT_BOX_WINDOW = 0,\n-  BOX_WINDOW\n-};\n-\n /* Constant definitions.  */\n #define DEFAULT_TAB_LEN         8\n #define NO_SRC_STRING           \"[ No Source Available ]\"\n@@ -248,6 +247,11 @@ struct tui_win_info : public tui_gen_win_info\n     return true;\n   }\n \n+  bool can_box () const override\n+  {\n+    return true;\n+  }\n+\n   void check_and_display_highlight_if_needed ();\n \n   /* Can this window ever be highlighted?  */"
    },
    {
      "sha": "69b929d37b28000c0cf1ec73dce6911735e4ad3d",
      "filename": "gdb/tui/tui-layout.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-layout.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-layout.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-layout.c?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -546,7 +546,7 @@ show_source_disasm_command (void)\n \t\t      tui_term_height () - cmd_height);\n   /* FIXME tui_cmd_window won't recreate the handle on\n      make_visible, so we need this instead.  */\n-  tui_make_window (TUI_CMD_WIN, DONT_BOX_WINDOW);\n+  tui_make_window (TUI_CMD_WIN);\n   current_layout = SRC_DISASSEM_COMMAND;\n }\n \n@@ -674,6 +674,6 @@ show_source_or_disasm_and_command (enum tui_layout_type layout_type)\n \t\t      src_height);\n   /* FIXME tui_cmd_window won't recreate the handle on\n      make_visible, so we need this instead.  */\n-  tui_make_window (TUI_CMD_WIN, DONT_BOX_WINDOW);\n+  tui_make_window (TUI_CMD_WIN);\n   current_layout = layout_type;\n }"
    },
    {
      "sha": "bb8d545c47b579e94a5ead35a6f6238d9fcb50bf",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -320,7 +320,7 @@ tui_data_window::display_registers_from (int start_element_no)\n \t\t  data_item_win->width = item_win_width;\n \t\t  data_item_win->origin.x = (item_win_width * j) + 1;\n \t\t  data_item_win->origin.y = cur_y;\n-\t\t  tui_make_window (data_item_win, DONT_BOX_WINDOW);\n+\t\t  tui_make_window (data_item_win);\n                   scrollok (data_item_win->handle, FALSE);\n \t\t}\n               touchwin (data_item_win->handle);"
    },
    {
      "sha": "e2d06bcebad77962bf93799efb20035e00360413",
      "filename": "gdb/tui/tui-wingeneral.c",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-wingeneral.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-wingeneral.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-wingeneral.c?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -125,7 +125,7 @@ tui_win_info::check_and_display_highlight_if_needed ()\n \n \n void\n-tui_make_window (struct tui_gen_win_info *win_info, enum tui_box box_it)\n+tui_make_window (struct tui_gen_win_info *win_info)\n {\n   WINDOW *handle;\n \n@@ -136,7 +136,7 @@ tui_make_window (struct tui_gen_win_info *win_info, enum tui_box box_it)\n   win_info->handle = handle;\n   if (handle != NULL)\n     {\n-      if (box_it == BOX_WINDOW)\n+      if (win_info->can_box ())\n \tbox_win (win_info, NO_HILITE);\n       win_info->is_visible = true;\n       scrollok (handle, TRUE);\n@@ -155,8 +155,7 @@ tui_gen_win_info::make_visible (bool visible)\n   is_visible = visible;\n \n   if (visible)\n-    tui_make_window (this, (tui_win_is_auxiliary (type)\n-\t\t\t    ? DONT_BOX_WINDOW : BOX_WINDOW));\n+    tui_make_window (this);\n   else\n     {\n       tui_delete_win (handle);"
    },
    {
      "sha": "6a9de4c9b1c86acbdc0028d4cc90b3d22da7bdee",
      "filename": "gdb/tui/tui-wingeneral.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-wingeneral.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/65962b20b6df7e8961ec4002179dbd51a33a627f/gdb/tui/tui-wingeneral.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-wingeneral.h?ref=65962b20b6df7e8961ec4002179dbd51a33a627f",
      "patch": "@@ -31,7 +31,7 @@ struct tui_gen_win_info;\n extern void tui_make_all_invisible (void);\n \n extern void tui_unhighlight_win (struct tui_win_info *);\n-extern void tui_make_window (struct tui_gen_win_info *, enum tui_box);\n+extern void tui_make_window (struct tui_gen_win_info *);\n extern void tui_highlight_win (struct tui_win_info *);\n extern void tui_refresh_all ();\n extern void tui_delete_win (WINDOW *window);"
    }
  ]
}