{
  "sha": "a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTBmZjY1MmY0Y2FjYzM1NTc3OTUyMDRhZTVlNzNmYTlmNWQyZWEzMA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-10-25T02:59:04Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-10-25T13:06:09Z"
    },
    "message": "gdb: add inferior parameter to inferior_created observable\n\nI think it would make sense for the inferior_created observable to say\nwhich inferior is being dealt with, rather than relying on it being the\ncurrent inferior.\n\nThis patch adds an inferior parameter to inferior_created, but does not\nchange the callbacks to use it.\n\ngdb/ChangeLog:\n\n\t* aix-thread.c (aix_thread_inferior_created): Add inferior\n\tparameter.\n\t* bsd-uthread.c (bsd_uthread_inferior_created): Likewise.\n\t* dummy-frame.c (cleanup_dummy_frames): Likewise.\n\t* jit.c (jit_inferior_created): Likewise.\n\t* linux-thread-db.c (thread_db_inferior_created): Likewise.\n\t* m68k-linux-tdep.c (m68k_linux_inferior_created): Likewise.\n\t* observable.h (inferior_created): Likewise.\n\t* ravenscar-thread.c (ravenscar_inferior_created): Likewise.\n\t* symfile-mem.c (add_vsyscall_page): Likewise.\n\t* infcmd.c (post_create_inferior): Pass inferior argument.\n\nChange-Id: I2543d19ff055a9df6b269929faea10b27d2adc5e",
    "tree": {
      "sha": "bb8b15f2d5b725126975e410e8e785a36aeed376",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bb8b15f2d5b725126975e410e8e785a36aeed376"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0c70050a4bb65c6159dc7d65c1fba253c97837c8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c70050a4bb65c6159dc7d65c1fba253c97837c8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0c70050a4bb65c6159dc7d65c1fba253c97837c8"
    }
  ],
  "stats": {
    "total": 34,
    "additions": 24,
    "deletions": 10
  },
  "files": [
    {
      "sha": "0f2a87bf7d7a511b212beccbb22ccaae07add23e",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -1,3 +1,17 @@\n+2020-10-24  Simon Marchi  <simon.marchi@efficios.com>\n+\n+\t* aix-thread.c (aix_thread_inferior_created): Add inferior\n+\tparameter.\n+\t* bsd-uthread.c (bsd_uthread_inferior_created): Likewise.\n+\t* dummy-frame.c (cleanup_dummy_frames): Likewise.\n+\t* jit.c (jit_inferior_created): Likewise.\n+\t* linux-thread-db.c (thread_db_inferior_created): Likewise.\n+\t* m68k-linux-tdep.c (m68k_linux_inferior_created): Likewise.\n+\t* observable.h (inferior_created): Likewise.\n+\t* ravenscar-thread.c (ravenscar_inferior_created): Likewise.\n+\t* symfile-mem.c (add_vsyscall_page): Likewise.\n+\t* infcmd.c (post_create_inferior): Pass inferior argument.\n+\n 2020-10-24  Joel Brobecker  <brobecker@adacore.com>\n \n \tGDB 10.1 released."
    },
    {
      "sha": "bedd97d439a74cffba95896b15f978df1a02c69d",
      "filename": "gdb/aix-thread.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/aix-thread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/aix-thread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/aix-thread.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -1015,7 +1015,7 @@ new_objfile (struct objfile *objfile)\n /* Attach to process specified by ARGS.  */\n \n static void\n-aix_thread_inferior_created ()\n+aix_thread_inferior_created (inferior *inf)\n {\n   pd_enable ();\n }"
    },
    {
      "sha": "ffbee4a15f92b92c0a53628caafc0b1f6bfb6f71",
      "filename": "gdb/bsd-uthread.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/bsd-uthread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/bsd-uthread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/bsd-uthread.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -263,7 +263,7 @@ bsd_uthread_deactivate (void)\n }\n \n static void\n-bsd_uthread_inferior_created ()\n+bsd_uthread_inferior_created (inferior *inf)\n {\n   bsd_uthread_activate (NULL);\n }"
    },
    {
      "sha": "0b99e5c1c6a7cc1eb54b8b74749d1269d7c1ba83",
      "filename": "gdb/dummy-frame.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/dummy-frame.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/dummy-frame.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dummy-frame.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -273,7 +273,7 @@ find_dummy_frame_dtor (dummy_frame_dtor_ftype *dtor, void *dtor_data)\n    them up at least once whenever we start a new inferior.  */\n \n static void\n-cleanup_dummy_frames ()\n+cleanup_dummy_frames (inferior *inf)\n {\n   while (dummy_frame_stack != NULL)\n     remove_dummy_frame (&dummy_frame_stack);"
    },
    {
      "sha": "068de96941a6af776b76095ed02da9b6cf5e1bc5",
      "filename": "gdb/infcmd.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/infcmd.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/infcmd.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/infcmd.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -347,7 +347,7 @@ post_create_inferior (int from_tty)\n      if the now pushed target supports hardware watchpoints.  */\n   breakpoint_re_set ();\n \n-  gdb::observers::inferior_created.notify ();\n+  gdb::observers::inferior_created.notify (current_inferior ());\n }\n \n /* Kill the inferior if already running.  This function is designed"
    },
    {
      "sha": "6f1f7e69d5e5c1eae52f17e0b156d5f0fca951ce",
      "filename": "gdb/jit.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/jit.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/jit.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/jit.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -1232,7 +1232,7 @@ jit_inferior_init (struct gdbarch *gdbarch)\n /* inferior_created observer.  */\n \n static void\n-jit_inferior_created ()\n+jit_inferior_created (inferior *inf)\n {\n   jit_inferior_created_hook ();\n }"
    },
    {
      "sha": "e759ecc951352129d33d710ba8c68b1c1cf46f8b",
      "filename": "gdb/linux-thread-db.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/linux-thread-db.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/linux-thread-db.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/linux-thread-db.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -1310,7 +1310,7 @@ check_pid_namespace_match (void)\n    This handles the case of debugging statically linked executables.  */\n \n static void\n-thread_db_inferior_created ()\n+thread_db_inferior_created (inferior *inf)\n {\n   check_pid_namespace_match ();\n   check_for_thread_db ();"
    },
    {
      "sha": "752260e8616412379b281d8b17c8fee67568fd4c",
      "filename": "gdb/m68k-linux-tdep.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/m68k-linux-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/m68k-linux-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/m68k-linux-tdep.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -211,7 +211,7 @@ struct m68k_linux_sigtramp_info\n static int target_is_uclinux;\n \n static void\n-m68k_linux_inferior_created ()\n+m68k_linux_inferior_created (inferior *inf)\n {\n   /* Record that we will need to re-evaluate whether we are running on a\n      uClinux or normal GNU/Linux target (see m68k_linux_get_sigtramp_info).  */"
    },
    {
      "sha": "9114b28d04f054665430ea312af05342486ba3d7",
      "filename": "gdb/observable.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/observable.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/observable.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/observable.h?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -87,7 +87,7 @@ extern observable<> executable_changed;\n    instruction.  For 'attach' and 'core', gdb calls this observer\n    immediately after connecting to the inferior, and before any\n    information on the inferior has been printed.  */\n-extern observable<> inferior_created;\n+extern observable<inferior */* inferior */> inferior_created;\n \n /* The status of process record for inferior inferior in gdb has\n    changed.  The process record is started if STARTED is true, and"
    },
    {
      "sha": "29f8ae1ae5f71f6162d0f6fadf273b6fc9c62cee",
      "filename": "gdb/ravenscar-thread.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/ravenscar-thread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/ravenscar-thread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ravenscar-thread.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -657,7 +657,7 @@ ravenscar_thread_target::xfer_partial (enum target_object object,\n /* Observer on inferior_created: push ravenscar thread stratum if needed.  */\n \n static void\n-ravenscar_inferior_created ()\n+ravenscar_inferior_created (inferior *inf)\n {\n   const char *err_msg;\n "
    },
    {
      "sha": "18ab9357dbb010b340d84ef6bcf0800c152aa351",
      "filename": "gdb/symfile-mem.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/symfile-mem.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a0ff652f4cacc3557795204ae5e73fa9f5d2ea30/gdb/symfile-mem.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symfile-mem.c?ref=a0ff652f4cacc3557795204ae5e73fa9f5d2ea30",
      "patch": "@@ -157,7 +157,7 @@ add_symbol_file_from_memory_command (const char *args, int from_tty)\n    This function is called via the inferior_created observer.  */\n \n static void\n-add_vsyscall_page ()\n+add_vsyscall_page (inferior *inf)\n {\n   struct mem_range vsyscall_range;\n "
    }
  ]
}