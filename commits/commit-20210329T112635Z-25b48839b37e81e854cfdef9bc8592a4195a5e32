{
  "sha": "25b48839b37e81e854cfdef9bc8592a4195a5e32",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjViNDg4MzliMzdlODFlODU0Y2ZkZWY5YmM4NTkyYTQxOTVhNWUzMg==",
  "commit": {
    "author": {
      "name": "Rainer Orth",
      "email": "ro@CeBiTec.Uni-Bielefeld.DE",
      "date": "2021-03-29T11:26:35Z"
    },
    "committer": {
      "name": "Rainer Orth",
      "email": "ro@CeBiTec.Uni-Bielefeld.DE",
      "date": "2021-03-29T11:26:35Z"
    },
    "message": "Restore procfs.c compilation\n\nSince c8fbd44a018a9923f906bfd2be5489caa87b602a (gdb: remove\ntarget_is_pushed free function), procfs.c compilation is broken, which\nwent unnoticed for lack of functioning buildbots:\n\n/vol/src/gnu/gdb/hg/master/dist/gdb/procfs.c: In member function 'virtual void procfs_target::attach(const char*, int)':\n/vol/src/gnu/gdb/hg/master/dist/gdb/procfs.c:1772:8: error: 'inf' was not declared in this scope; did you mean 'info'?\n 1772 |   if (!inf->target_is_pushed (this))\n      |        ^~~\n      |        info\n/vol/src/gnu/gdb/hg/master/dist/gdb/procfs.c: In member function 'virtual void procfs_target::create_inferior(const char*, const string&, char**, int)':\n/vol/src/gnu/gdb/hg/master/dist/gdb/procfs.c:2865:8: error: 'inf' was not declared in this scope; did you mean 'info'?\n 2865 |   if (!inf->target_is_pushed (this))\n      |        ^~~\n      |        info\n\nFixed by defining inf.  Tested on amd64-pc-solaris2.11 and\nsparcv9-sun-solaris2.11.\n\n2021-03-29  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n\n\tgdb:\n\t* procfs.c (procfs_target::attach): Define inf.\n\tUse it.\n\t(procfs_target::create_inferior): Likewise.",
    "tree": {
      "sha": "c95dccc053aa94b509a7021f4f0cf61b4b6697c5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c95dccc053aa94b509a7021f4f0cf61b4b6697c5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/25b48839b37e81e854cfdef9bc8592a4195a5e32",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25b48839b37e81e854cfdef9bc8592a4195a5e32",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/25b48839b37e81e854cfdef9bc8592a4195a5e32",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25b48839b37e81e854cfdef9bc8592a4195a5e32/comments",
  "author": {
    "login": "rorth",
    "id": 3930951,
    "node_id": "MDQ6VXNlcjM5MzA5NTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rorth",
    "html_url": "https://github.com/rorth",
    "followers_url": "https://api.github.com/users/rorth/followers",
    "following_url": "https://api.github.com/users/rorth/following{/other_user}",
    "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rorth/subscriptions",
    "organizations_url": "https://api.github.com/users/rorth/orgs",
    "repos_url": "https://api.github.com/users/rorth/repos",
    "events_url": "https://api.github.com/users/rorth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rorth/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "rorth",
    "id": 3930951,
    "node_id": "MDQ6VXNlcjM5MzA5NTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rorth",
    "html_url": "https://github.com/rorth",
    "followers_url": "https://api.github.com/users/rorth/followers",
    "following_url": "https://api.github.com/users/rorth/following{/other_user}",
    "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rorth/subscriptions",
    "organizations_url": "https://api.github.com/users/rorth/orgs",
    "repos_url": "https://api.github.com/users/rorth/repos",
    "events_url": "https://api.github.com/users/rorth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rorth/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bbe1eca622b28a28a2ea486d77914e6c25d63ed8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bbe1eca622b28a28a2ea486d77914e6c25d63ed8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bbe1eca622b28a28a2ea486d77914e6c25d63ed8"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 11,
    "deletions": 2
  },
  "files": [
    {
      "sha": "3e353b399a29f8441ce5f1c4b564cf9777776860",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25b48839b37e81e854cfdef9bc8592a4195a5e32/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25b48839b37e81e854cfdef9bc8592a4195a5e32/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=25b48839b37e81e854cfdef9bc8592a4195a5e32",
      "patch": "@@ -1,3 +1,10 @@\n+2021-03-29  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tgdb:\n+\t* procfs.c (procfs_target::attach): Define inf.\n+\tUse it.\n+\t(procfs_target::create_inferior): Likewise.\n+\n 2021-03-28  Tom Tromey  <tom@tromey.com>\n \n \t* elfread.c (can_lazily_read_symbols): Move to dwarf2/read.c."
    },
    {
      "sha": "23c0aa22a7a60727cfb3973b064cb76b11c565c8",
      "filename": "gdb/procfs.c",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25b48839b37e81e854cfdef9bc8592a4195a5e32/gdb/procfs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25b48839b37e81e854cfdef9bc8592a4195a5e32/gdb/procfs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/procfs.c?ref=25b48839b37e81e854cfdef9bc8592a4195a5e32",
      "patch": "@@ -1768,10 +1768,11 @@ procfs_target::attach (const char *args, int from_tty)\n     error (_(\"Attaching GDB to itself is not a good idea...\"));\n \n   /* Push the target if needed, ensure it gets un-pushed it if attach fails.  */\n+  inferior *inf = current_inferior ();\n   target_unpush_up unpusher;\n   if (!inf->target_is_pushed (this))\n     {\n-      current_inferior ()->push_target (this);\n+      inf->push_target (this);\n       unpusher.reset (this);\n     }\n \n@@ -2862,8 +2863,9 @@ procfs_target::create_inferior (const char *exec_file,\n       shell_file = tryname;\n     }\n \n+  inferior *inf = current_inferior ();\n   if (!inf->target_is_pushed (this))\n-    current_inferior ()->push_target (this);\n+    inf->push_target (this);\n \n   pid = fork_inferior (exec_file, allargs, env, procfs_set_exec_trap,\n \t\t       NULL, procfs_pre_trace, shell_file, NULL);"
    }
  ]
}