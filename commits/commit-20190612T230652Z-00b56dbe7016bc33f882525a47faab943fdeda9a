{
  "sha": "00b56dbe7016bc33f882525a47faab943fdeda9a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDBiNTZkYmU3MDE2YmMzM2Y4ODI1MjVhNDdmYWFiOTQzZmRlZGE5YQ==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:06:52Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:06:52Z"
    },
    "message": "Fix latent bug in custom word point completion handling\n\nWithout this fix, if we switch the \"print\" completer to custom word\npoint handling, we regress gdb.base/completion.exp like this:\n\n (gdb) p \"break1.c FAIL: gdb.base/completion.exp: complete 'p \"break1' (timeout)\n\nThe problem is that completing an expression that starts with double\nquotes, and resolves to a filename, like this:\n\n (gdb) p \"break1[TAB]\n\nwould change from this, with current master:\n\n (gdb) p \"break1.c\"|\n         ^^^^^^^^^^|\n                   \\- cursor here\n\nto this:\n\n (gdb) p \"break1.c |\n         ^^^^^^^^^^|\n                   \\- quote replaced by space\n\nThe issue is that completer.c:advance_to_completion_word misses\ntelling the completion tracker to emulate readline's handling of\ncompleting a string when rl_find_completion_word returns a delimiter.\n\nThis commit fixes the latent bug.\n\ngdb/ChangeLog:\n2019-06-13  Pedro Alves  <palves@redhat.com>\n\n\t* completer.c (advance_to_completion_word): Handle delimiters.",
    "tree": {
      "sha": "ddf551efcbf295a750aaa6880eee2704b579b37e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ddf551efcbf295a750aaa6880eee2704b579b37e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/00b56dbe7016bc33f882525a47faab943fdeda9a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/00b56dbe7016bc33f882525a47faab943fdeda9a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/00b56dbe7016bc33f882525a47faab943fdeda9a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/00b56dbe7016bc33f882525a47faab943fdeda9a/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e4c4ac46e8e7ef92311181f85b193af369897151",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e4c4ac46e8e7ef92311181f85b193af369897151",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e4c4ac46e8e7ef92311181f85b193af369897151"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 12,
    "deletions": 1
  },
  "files": [
    {
      "sha": "19b2a7dc76c89d20bea5ec79a619b1530b51aba6",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/00b56dbe7016bc33f882525a47faab943fdeda9a/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/00b56dbe7016bc33f882525a47faab943fdeda9a/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=00b56dbe7016bc33f882525a47faab943fdeda9a",
      "patch": "@@ -1,3 +1,7 @@\n+2019-06-13  Pedro Alves  <palves@redhat.com>\n+\n+\t* completer.c (advance_to_completion_word): Handle delimiters.\n+\n 2019-06-11  Bernhard Heckel  <bernhard.heckel@intel.com>\n \n \t* dwarf2read.c (add_partial_symbol): Skip nameless modules."
    },
    {
      "sha": "03d0d0e5dbd39d6ec340402e46800a906fd2f9f4",
      "filename": "gdb/completer.c",
      "status": "modified",
      "additions": 8,
      "deletions": 1,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/00b56dbe7016bc33f882525a47faab943fdeda9a/gdb/completer.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/00b56dbe7016bc33f882525a47faab943fdeda9a/gdb/completer.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/completer.c?ref=00b56dbe7016bc33f882525a47faab943fdeda9a",
      "patch": "@@ -365,11 +365,18 @@ advance_to_expression_complete_word_point (completion_tracker &tracker,\n   info.quote_characters = gdb_completer_quote_characters;\n   info.basic_quote_characters = rl_basic_quote_characters;\n \n+  int delimiter;\n   const char *start\n-    = gdb_rl_find_completion_word (&info, NULL, NULL, text);\n+    = gdb_rl_find_completion_word (&info, NULL, &delimiter, text);\n \n   tracker.advance_custom_word_point_by (start - text);\n \n+  if (delimiter)\n+    {\n+      tracker.set_quote_char (delimiter);\n+      tracker.set_suppress_append_ws (true);\n+    }\n+\n   return start;\n }\n "
    }
  ]
}