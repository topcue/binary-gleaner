{
  "sha": "1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTA4MTA2NWM1MTlkMWJmYzM4NDdiZjRiMGEwY2U0YmMzMjI0YmNkMw==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-03-24T22:37:14Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-03-24T22:37:26Z"
    },
    "message": "bfd: Add a bfd_boolean argument to bfd_get_symbol_version_string\n\nWe can't call _bfd_elf_get_symbol_version_name from nm.c since it isn't\navailable for all target configurations.  This patch add a bfd_boolean\nargument to bfd_get_symbol_version_string instead.\n\nbfd/\n\n\tPR binutils/25708\n\t* elf-bfd.h (_bfd_elf_get_symbol_version_name): Renamed to ...\n\t(_bfd_elf_get_symbol_version_string): This.\n\t* elf.c (_bfd_elf_get_symbol_version_name): Renamed to ...\n\t(_bfd_elf_get_symbol_version_string): This.\n\t(bfd_elf_print_symbol): Pass TRUE to\n\t_bfd_elf_get_symbol_version_string.\n\t* libbfd-in.h (_bfd_nosymbols_get_symbol_version_string): Add a\n\tbfd_boolean argument.\n\t* syms.c (_bfd_nosymbols_get_symbol_version_string): Likewise.\n\t* targets.c  (_bfd_get_symbol_version_string): Likewise.\n\t(bfd_get_symbol_version_string): Likewise.\n\t* bfd-in2.h: Regenerated.\n\nbinutils/\n\n\tPR binutils/25708\n\t* nm.c (print_symname): Replace _bfd_elf_get_symbol_version_name\n\twith bfd_get_symbol_version_string.\n\t(print_symbo): Pass TRUE to bfd_get_symbol_version_string.\n\t* objdump.c (objdump_print_symname): Likewise.",
    "tree": {
      "sha": "39fb17a236b3ab231474f156b8dd30d37740bc57",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/39fb17a236b3ab231474f156b8dd30d37740bc57"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a18cd0cab43f45b05e9f8bcbf8fed1d67834442d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a18cd0cab43f45b05e9f8bcbf8fed1d67834442d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a18cd0cab43f45b05e9f8bcbf8fed1d67834442d"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 43,
    "deletions": 25
  },
  "files": [
    {
      "sha": "f273ea54e9b25d06965e34f9ed3d2bb22c1cd0ca",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -1,3 +1,19 @@\n+2020-03-24  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR binutils/25708\n+\t* elf-bfd.h (_bfd_elf_get_symbol_version_name): Renamed to ...\n+\t(_bfd_elf_get_symbol_version_string): This.\n+\t* elf.c (_bfd_elf_get_symbol_version_name): Renamed to ...\n+\t(_bfd_elf_get_symbol_version_string): This.\n+\t(bfd_elf_print_symbol): Pass TRUE to\n+\t_bfd_elf_get_symbol_version_string.\n+\t* libbfd-in.h (_bfd_nosymbols_get_symbol_version_string): Add a\n+\tbfd_boolean argument.\n+\t* syms.c (_bfd_nosymbols_get_symbol_version_string): Likewise.\n+\t* targets.c  (_bfd_get_symbol_version_string): Likewise.\n+\t(bfd_get_symbol_version_string): Likewise.\n+\t* bfd-in2.h: Regenerated.\n+\n 2020-03-24  Nick Clifton  <nickc@redhat.com>\n \t    Jaydeep Chauhan  <jaydeepchauhan1494@gmail.com>\n "
    },
    {
      "sha": "a5f0609fbb9351b902df9fd5a20c028d8db462fe",
      "filename": "bfd/bfd-in2.h",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/bfd-in2.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/bfd-in2.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/bfd-in2.h?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -7514,9 +7514,10 @@ typedef struct bfd_target\n #define bfd_get_symbol_info(b,p,e) \\\n        BFD_SEND (b, _bfd_get_symbol_info, (b,p,e))\n   const char *(*_bfd_get_symbol_version_string) (bfd *, struct bfd_symbol *,\n+                                                 bfd_boolean,\n                                                  bfd_boolean *);\n-#define bfd_get_symbol_version_string(b,s,h) \\\n-       BFD_SEND (b, _bfd_get_symbol_version_string, (b,s,h))\n+#define bfd_get_symbol_version_string(b,s,p,h) \\\n+       BFD_SEND (b, _bfd_get_symbol_version_string, (b,s,p,h))\n   bfd_boolean (*_bfd_is_local_label_name) (bfd *, const char *);\n   bfd_boolean (*_bfd_is_target_special_symbol) (bfd *, asymbol *);\n   alent *     (*_get_lineno) (bfd *, struct bfd_symbol *);"
    },
    {
      "sha": "03e2b6fe85a96baf7783a0d34ede7552a5d5e513",
      "filename": "bfd/elf-bfd.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/elf-bfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/elf-bfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf-bfd.h?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -2077,8 +2077,6 @@ extern bfd_boolean _bfd_elf_copy_private_bfd_data\n extern bfd_boolean _bfd_elf_print_private_bfd_data\n   (bfd *, void *);\n const char * _bfd_elf_get_symbol_version_string\n-  (bfd *, asymbol *, bfd_boolean *);\n-const char * _bfd_elf_get_symbol_version_name\n   (bfd *, asymbol *, bfd_boolean, bfd_boolean *);\n extern void bfd_elf_print_symbol\n   (bfd *, void *, asymbol *, bfd_print_symbol_type);"
    },
    {
      "sha": "2512b6543b1b19d3e141da8de041dc7d104babce",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 4,
      "deletions": 12,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -1887,9 +1887,9 @@ _bfd_elf_print_private_bfd_data (bfd *abfd, void *farg)\n    and return symbol version for symbol version itself.   */\n \n const char *\n-_bfd_elf_get_symbol_version_name (bfd *abfd, asymbol *symbol,\n-\t\t\t\t  bfd_boolean base_p,\n-\t\t\t\t  bfd_boolean *hidden)\n+_bfd_elf_get_symbol_version_string (bfd *abfd, asymbol *symbol,\n+\t\t\t\t    bfd_boolean base_p,\n+\t\t\t\t    bfd_boolean *hidden)\n {\n   const char *version_string = NULL;\n   if (elf_dynversym (abfd) != 0\n@@ -1939,15 +1939,6 @@ _bfd_elf_get_symbol_version_name (bfd *abfd, asymbol *symbol,\n   return version_string;\n }\n \n-/* Get version string.  */\n-\n-const char *\n-_bfd_elf_get_symbol_version_string (bfd *abfd, asymbol *symbol,\n-\t\t\t\t    bfd_boolean *hidden)\n-{\n-  return _bfd_elf_get_symbol_version_name (abfd, symbol, TRUE, hidden);\n-}\n-\n /* Display ELF-specific fields of a symbol.  */\n \n void\n@@ -2003,6 +1994,7 @@ bfd_elf_print_symbol (bfd *abfd,\n \t/* If we have version information, print it.  */\n \tversion_string = _bfd_elf_get_symbol_version_string (abfd,\n \t\t\t\t\t\t\t     symbol,\n+\t\t\t\t\t\t\t     TRUE,\n \t\t\t\t\t\t\t     &hidden);\n \tif (version_string)\n \t  {"
    },
    {
      "sha": "5d24efbeb269ddb91f425dc14d0db20e0397d509",
      "filename": "bfd/libbfd-in.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/libbfd-in.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/libbfd-in.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd-in.h?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -447,7 +447,7 @@ extern void _bfd_nosymbols_print_symbol\n extern void _bfd_nosymbols_get_symbol_info\n   (bfd *, asymbol *, symbol_info *) ATTRIBUTE_HIDDEN;\n extern const char * _bfd_nosymbols_get_symbol_version_string\n-  (bfd *, asymbol *, bfd_boolean *) ATTRIBUTE_HIDDEN;\n+  (bfd *, asymbol *, bfd_boolean, bfd_boolean *) ATTRIBUTE_HIDDEN;\n extern bfd_boolean _bfd_nosymbols_bfd_is_local_label_name\n   (bfd *, const char *) ATTRIBUTE_HIDDEN;\n #define _bfd_nosymbols_bfd_is_target_special_symbol _bfd_bool_bfd_asymbol_false"
    },
    {
      "sha": "348ccfd4b5758cf361424032664375105b720564",
      "filename": "bfd/libbfd.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/libbfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/libbfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd.h?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -452,7 +452,7 @@ extern void _bfd_nosymbols_print_symbol\n extern void _bfd_nosymbols_get_symbol_info\n   (bfd *, asymbol *, symbol_info *) ATTRIBUTE_HIDDEN;\n extern const char * _bfd_nosymbols_get_symbol_version_string\n-  (bfd *, asymbol *, bfd_boolean *) ATTRIBUTE_HIDDEN;\n+  (bfd *, asymbol *, bfd_boolean, bfd_boolean *) ATTRIBUTE_HIDDEN;\n extern bfd_boolean _bfd_nosymbols_bfd_is_local_label_name\n   (bfd *, const char *) ATTRIBUTE_HIDDEN;\n #define _bfd_nosymbols_bfd_is_target_special_symbol _bfd_bool_bfd_asymbol_false"
    },
    {
      "sha": "76c212344eb8631cdec209cc1223863ee84a6daa",
      "filename": "bfd/syms.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/syms.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/syms.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/syms.c?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -1468,6 +1468,7 @@ _bfd_nosymbols_get_symbol_info (bfd *abfd ATTRIBUTE_UNUSED,\n const char *\n _bfd_nosymbols_get_symbol_version_string (bfd *abfd,\n \t\t\t\t\t  asymbol *symbol ATTRIBUTE_UNUSED,\n+\t\t\t\t\t  bfd_boolean base_p ATTRIBUTE_UNUSED,\n \t\t\t\t\t  bfd_boolean *hidden ATTRIBUTE_UNUSED)\n {\n   return (const char *) _bfd_ptr_bfd_null_error (abfd);"
    },
    {
      "sha": "d05b9158536fc3239898474ac8d4e0ddca664b2e",
      "filename": "bfd/targets.c",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/targets.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/bfd/targets.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/targets.c?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -392,9 +392,10 @@ BFD_JUMP_TABLE macros.\n .#define bfd_get_symbol_info(b,p,e) \\\n .\tBFD_SEND (b, _bfd_get_symbol_info, (b,p,e))\n .  const char *(*_bfd_get_symbol_version_string) (bfd *, struct bfd_symbol *,\n+.\t\t\t\t\t\t  bfd_boolean,\n .\t\t\t\t\t\t  bfd_boolean *);\n-.#define bfd_get_symbol_version_string(b,s,h) \\\n-.\tBFD_SEND (b, _bfd_get_symbol_version_string, (b,s,h))\n+.#define bfd_get_symbol_version_string(b,s,p,h) \\\n+.\tBFD_SEND (b, _bfd_get_symbol_version_string, (b,s,p,h))\n .  bfd_boolean (*_bfd_is_local_label_name) (bfd *, const char *);\n .  bfd_boolean (*_bfd_is_target_special_symbol) (bfd *, asymbol *);\n .  alent *     (*_get_lineno) (bfd *, struct bfd_symbol *);"
    },
    {
      "sha": "accd265007efba09daec05da7cdc9fa90e5cd07a",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -1,3 +1,11 @@\n+2020-03-24  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR binutils/25708\n+\t* nm.c (print_symname): Replace _bfd_elf_get_symbol_version_name\n+\twith bfd_get_symbol_version_string.\n+\t(print_symbo): Pass TRUE to bfd_get_symbol_version_string.\n+\t* objdump.c (objdump_print_symname): Likewise.\n+\n 2020-03-24  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR binutils/25708"
    },
    {
      "sha": "1b5122d56ab5c00fc710a775053eb2ee300b0665",
      "filename": "binutils/nm.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/nm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/nm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/nm.c?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -417,9 +417,8 @@ print_symname (const char *form, struct extended_symbol_info *info,\n       bfd_boolean hidden;\n \n       version_string\n-\t= _bfd_elf_get_symbol_version_name (abfd,\n-\t\t\t\t\t    &info->elfinfo->symbol,\n-\t\t\t\t\t    FALSE, &hidden);\n+\t= bfd_get_symbol_version_string (abfd, &info->elfinfo->symbol,\n+\t\t\t\t\t FALSE, &hidden);\n       if (version_string && version_string[0])\n \tprintf (\"%s%s\", hidden ? \"@\" : \"@@\", version_string);\n     }\n@@ -908,7 +907,8 @@ print_symbol (bfd *        abfd,\n       bfd_boolean   hidden = FALSE;\n \n       if ((sym->flags & (BSF_SECTION_SYM | BSF_SYNTHETIC)) == 0)\n-\tversion_string = bfd_get_symbol_version_string (abfd, sym, &hidden);\n+\tversion_string = bfd_get_symbol_version_string (abfd, sym,\n+\t\t\t\t\t\t\tTRUE, &hidden);\n \n       if (bfd_is_und_section (bfd_asymbol_section (sym)))\n \thidden = TRUE;"
    },
    {
      "sha": "81c0b4f3d065fe939a7aee8a66235bc30341c466",
      "filename": "binutils/objdump.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/objdump.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3/binutils/objdump.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/objdump.c?ref=1081065c519d1bfc3847bf4b0a0ce4bc3224bcd3",
      "patch": "@@ -1031,7 +1031,8 @@ objdump_print_symname (bfd *abfd, struct disassemble_info *inf,\n     }\n \n   if ((sym->flags & (BSF_SECTION_SYM | BSF_SYNTHETIC)) == 0)\n-    version_string = bfd_get_symbol_version_string (abfd, sym, &hidden);\n+    version_string = bfd_get_symbol_version_string (abfd, sym, TRUE,\n+\t\t\t\t\t\t    &hidden);\n \n   if (bfd_is_und_section (bfd_asymbol_section (sym)))\n     hidden = TRUE;"
    }
  ]
}