{
  "sha": "6c57b87fc41c368cfa339ad8a879899ba3058e44",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NmM1N2I4N2ZjNDFjMzY4Y2ZhMzM5YWQ4YTg3OTg5OWJhMzA1OGU0NA==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-17T16:13:37Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-03-07T20:54:53Z"
    },
    "message": "sim: testsuite: merge into toplevel automake\n\nThis allows us to delete most of our custom test logic,\nand avoids a recursive make for minor speed up.",
    "tree": {
      "sha": "720afd8c120b1fec39c0b6b9a54f614d381ec22b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/720afd8c120b1fec39c0b6b9a54f614d381ec22b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6c57b87fc41c368cfa339ad8a879899ba3058e44",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6c57b87fc41c368cfa339ad8a879899ba3058e44",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6c57b87fc41c368cfa339ad8a879899ba3058e44",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6c57b87fc41c368cfa339ad8a879899ba3058e44/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6bddc3e8b480773f84a6694605a00ad0b2cee0c1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6bddc3e8b480773f84a6694605a00ad0b2cee0c1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6bddc3e8b480773f84a6694605a00ad0b2cee0c1"
    }
  ],
  "stats": {
    "total": 343,
    "additions": 142,
    "deletions": 201
  },
  "files": [
    {
      "sha": "6b27cb46a8f751759d74a66cf609bdfef22a1058",
      "filename": "sim/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ChangeLog?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -1,3 +1,10 @@\n+2021-03-07  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* configure.ac (AC_CONFIG_FILES): Delete testsuite/Makefile.\n+\t* Makefile.am: Include testsuite/local.mk.\n+\t(AUTOMAKE_OPTIONS): Add dejagnu.\n+\t* configure, Makefile.in: Regenerated.\n+\n 2021-03-07  Mike Frysinger  <vapier@gentoo.org>\n \n \t* Makefile.am: New file."
    },
    {
      "sha": "c6e2d04f33ae549af5806e8cdeb1de7411226b7b",
      "filename": "sim/Makefile.am",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/Makefile.am?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -15,7 +15,7 @@\n # You should have received a copy of the GNU General Public License\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n-AUTOMAKE_OPTIONS = foreign no-dist subdir-objects\n+AUTOMAKE_OPTIONS = dejagnu foreign no-dist subdir-objects\n ACLOCAL_AMFLAGS = -I.. -I../config\n \n srcroot = $(srcdir)/..\n@@ -34,3 +34,5 @@ MOSTLYCLEANFILES = core\n nltvals:\n \t$(abs_srcdir)/common/gennltvals.py --cpp \"$(CPP)\" --output nltvals.def --srcroot $(srcroot)\n \t$(SHELL) $(srcroot)/move-if-change nltvals.def $(abs_srcdir)/common/nltvals.def\n+\n+include testsuite/local.mk"
    },
    {
      "sha": "390a8575a7591d347379ef33bd3fd4cbbcb775e7",
      "filename": "sim/Makefile.in",
      "status": "modified",
      "additions": 85,
      "deletions": 17,
      "changes": 102,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/Makefile.in?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -29,6 +29,22 @@\n #\n # You should have received a copy of the GNU General Public License\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+#\n+# Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n VPATH = @srcdir@\n am__is_gnu_make = { \\\n   if test -z '$(MAKELEVEL)'; then \\\n@@ -116,7 +132,7 @@ DIST_COMMON = $(srcdir)/Makefile.am $(top_srcdir)/configure \\\n am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \\\n  configure.lineno config.status.lineno\n mkinstalldirs = $(SHELL) $(top_srcdir)/../mkinstalldirs\n-CONFIG_CLEAN_FILES = testsuite/Makefile\n+CONFIG_CLEAN_FILES =\n CONFIG_CLEAN_VPATH_FILES =\n AM_V_P = $(am__v_P_@AM_V@)\n am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)\n@@ -172,6 +188,10 @@ am__define_uniq_tagged_files = \\\n ETAGS = etags\n CTAGS = ctags\n CSCOPE = cscope\n+DEJATOOL = $(PACKAGE)\n+RUNTESTDEFAULTFLAGS = --tool $$tool --srcdir $$srcdir\n+EXPECT = expect\n+RUNTEST = runtest\n DIST_SUBDIRS = $(SUBDIRS)\n ACLOCAL = @ACLOCAL@\n AMTAR = @AMTAR@\n@@ -275,17 +295,20 @@ target_vendor = @target_vendor@\n top_build_prefix = @top_build_prefix@\n top_builddir = @top_builddir@\n top_srcdir = @top_srcdir@\n-AUTOMAKE_OPTIONS = foreign no-dist subdir-objects\n+AUTOMAKE_OPTIONS = dejagnu foreign no-dist subdir-objects\n ACLOCAL_AMFLAGS = -I.. -I../config\n srcroot = $(srcdir)/..\n SUBDIRS = @subdirs@\n-MOSTLYCLEANFILES = core\n+MOSTLYCLEANFILES = core site-srcdir.exp testrun.log testrun.sum\n+\n+# Tweak the site.exp so it works with plain `runtest` from user.\n+EXTRA_DEJAGNU_SITE_CONFIG = site-srcdir.exp\n all: all-recursive\n \n .SUFFIXES:\n am--refresh: Makefile\n \t@:\n-$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)\n+$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am $(srcdir)/testsuite/local.mk $(am__configure_deps)\n \t@for dep in $?; do \\\n \t  case '$(am__configure_deps)' in \\\n \t    *$$dep*) \\\n@@ -307,6 +330,7 @@ Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status\n \t    echo ' cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe)'; \\\n \t    cd $(top_builddir) && $(SHELL) ./config.status $@ $(am__depfiles_maybe);; \\\n \tesac;\n+$(srcdir)/testsuite/local.mk $(am__empty):\n \n $(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n \t$(SHELL) ./config.status --recheck\n@@ -316,8 +340,6 @@ $(top_srcdir)/configure:  $(am__configure_deps)\n $(ACLOCAL_M4):  $(am__aclocal_m4_deps)\n \t$(am__cd) $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)\n $(am__aclocal_m4_deps):\n-testsuite/Makefile: $(top_builddir)/config.status $(top_srcdir)/testsuite/Makefile.in\n-\tcd $(top_builddir) && $(SHELL) ./config.status $@\n \n # This directory's subdirectories are mostly independent; you can cd\n # into them and run 'make' without going through this Makefile.\n@@ -424,7 +446,40 @@ cscopelist-am: $(am__tagged_files)\n distclean-tags:\n \t-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags\n \t-rm -f cscope.out cscope.in.out cscope.po.out cscope.files\n+site.exp: Makefile $(EXTRA_DEJAGNU_SITE_CONFIG)\n+\t@echo 'Making a new site.exp file ...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir \"$(srcdir)\"' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@list='$(EXTRA_DEJAGNU_SITE_CONFIG)'; for f in $$list; do \\\n+\t  echo \"## Begin content included from file $$f.  Do not modify. ##\" \\\n+\t   && cat `test -f \"$$f\" || echo '$(srcdir)/'`$$f \\\n+\t   && echo \"## End content included from file $$f. ##\" \\\n+\t   || exit 1; \\\n+\t done >> site.tmp\n+\t@echo \"## End of auto-generated content; you can edit from here. ##\" >> site.tmp\n+\t@if test -f site.exp; then \\\n+\t   sed -e '1,/^## End of auto-generated content.*##/d' site.exp >> site.tmp; \\\n+\t fi\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n+distclean-DEJAGNU:\n+\t-rm -f site.exp site.bak\n+\t-l='$(DEJATOOL)'; for tool in $$l; do \\\n+\t  rm -f $$tool.sum $$tool.log; \\\n+\tdone\n check-am: all-am\n+\t$(MAKE) $(AM_MAKEFLAGS) check-DEJAGNU\n check: check-recursive\n all-am: Makefile\n installdirs: installdirs-recursive\n@@ -467,7 +522,8 @@ clean-am: clean-generic mostlyclean-am\n distclean: distclean-recursive\n \t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n \t-rm -f Makefile\n-distclean-am: clean-am distclean-generic distclean-tags\n+distclean-am: clean-am distclean-DEJAGNU distclean-generic \\\n+\tdistclean-tags\n \n dvi: dvi-recursive\n \n@@ -529,18 +585,18 @@ ps-am:\n \n uninstall-am:\n \n-.MAKE: $(am__recursive_targets) install-am install-strip\n+.MAKE: $(am__recursive_targets) check-am install-am install-strip\n \n .PHONY: $(am__recursive_targets) CTAGS GTAGS TAGS all all-am \\\n-\tam--refresh check check-am clean clean-cscope clean-generic \\\n-\tcscope cscopelist-am ctags ctags-am distclean \\\n-\tdistclean-generic distclean-tags dvi dvi-am html html-am info \\\n-\tinfo-am install install-am install-data install-data-am \\\n-\tinstall-dvi install-dvi-am install-exec install-exec-am \\\n-\tinstall-html install-html-am install-info install-info-am \\\n-\tinstall-man install-pdf install-pdf-am install-ps \\\n-\tinstall-ps-am install-strip installcheck installcheck-am \\\n-\tinstalldirs installdirs-am maintainer-clean \\\n+\tam--refresh check check-DEJAGNU check-am clean clean-cscope \\\n+\tclean-generic cscope cscopelist-am ctags ctags-am distclean \\\n+\tdistclean-DEJAGNU distclean-generic distclean-tags dvi dvi-am \\\n+\thtml html-am info info-am install install-am install-data \\\n+\tinstall-data-am install-dvi install-dvi-am install-exec \\\n+\tinstall-exec-am install-html install-html-am install-info \\\n+\tinstall-info-am install-man install-pdf install-pdf-am \\\n+\tinstall-ps install-ps-am install-strip installcheck \\\n+\tinstallcheck-am installdirs installdirs-am maintainer-clean \\\n \tmaintainer-clean-generic mostlyclean mostlyclean-generic pdf \\\n \tpdf-am ps ps-am tags tags-am uninstall uninstall-am\n \n@@ -558,6 +614,18 @@ nltvals:\n \t$(abs_srcdir)/common/gennltvals.py --cpp \"$(CPP)\" --output nltvals.def --srcroot $(srcroot)\n \t$(SHELL) $(srcroot)/move-if-change nltvals.def $(abs_srcdir)/common/nltvals.def\n \n+site-srcdir.exp: Makefile\n+\techo \"set srcdir \\\"$(srcdir)/testsuite\\\"\" > $@\n+\n+check-DEJAGNU: site.exp\n+\tLC_ALL=C; export LC_ALL; \\\n+\tEXPECT=${EXPECT} ; export EXPECT ; \\\n+\truntest=$(RUNTEST); \\\n+\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n+\t  $$runtest $(RUNTESTFLAGS); \\\n+\telse echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n+\tfi\n+\n # Tell versions [3.59,3.63) of GNU make to not export all variables.\n # Otherwise a system limit (for SysV at least) may be exceeded.\n .NOEXPORT:"
    },
    {
      "sha": "6b6df9282b05a851a8f8873f39fbca49781818a9",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -1,3 +1,7 @@\n+2021-03-07  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* Make-common.in (check): Delete body.\n+\n 2021-02-28  Mike Frysinger  <vapier@gentoo.org>\n \n \t* Make-common.in (SIM_EXTRA_LIBDEPS): Delete."
    },
    {
      "sha": "cf92e94993c5a5e1110a9226718e75c5a205b286",
      "filename": "sim/common/Make-common.in",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/common/Make-common.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/common/Make-common.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/Make-common.in?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -471,7 +471,6 @@ installdirs:\n \t$(SHELL) $(srcdir)/../../mkinstalldirs $(DESTDIR)$(libdir)\n \n check:\n-\tcd ../testsuite && $(MAKE) check RUNTESTFLAGS=\"$(RUNTESTFLAGS)\"\n \n info:\n clean-info:"
    },
    {
      "sha": "54a52541ea3ca1c97c64de2882462544f9b848be",
      "filename": "sim/configure",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/configure?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -4953,7 +4953,7 @@ subdirs=\"$subdirs aarch64\"\n   fi\n fi\n \n-ac_config_files=\"$ac_config_files Makefile testsuite/Makefile\"\n+ac_config_files=\"$ac_config_files Makefile\"\n \n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure\n@@ -5703,7 +5703,6 @@ do\n   case $ac_config_target in\n     \"depfiles\") CONFIG_COMMANDS=\"$CONFIG_COMMANDS depfiles\" ;;\n     \"Makefile\") CONFIG_FILES=\"$CONFIG_FILES Makefile\" ;;\n-    \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n \n   *) as_fn_error $? \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;\n   esac"
    },
    {
      "sha": "23478521e94c0e3b057efe9fd933f84d1a251fde",
      "filename": "sim/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/configure.ac?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -152,5 +152,5 @@ if test \"${enable_sim}\" != no; then\n   fi\n fi\n \n-AC_CONFIG_FILES([Makefile testsuite/Makefile])\n+AC_CONFIG_FILES([Makefile])\n AC_OUTPUT"
    },
    {
      "sha": "a88c99508436546c52c1f5b36a80a68a7892a524",
      "filename": "sim/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/ChangeLog?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -1,3 +1,9 @@\n+2021-03-07  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* Makefile.in: Removed.\n+\t* lib/sim-defs.exp (sim): Update default path.\n+\t* local.mk: New file based on Makefile.in.\n+\n 2021-02-13  Mike Frysinger  <vapier@gentoo.org>\n \n \t* Makefile.in (arch): Delete."
    },
    {
      "sha": "8db77d2d46f29e540f5c4a76499a7ea4b5b9e96d",
      "filename": "sim/testsuite/Makefile.in",
      "status": "removed",
      "additions": 0,
      "deletions": 178,
      "changes": 178,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bddc3e8b480773f84a6694605a00ad0b2cee0c1/sim/testsuite/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bddc3e8b480773f84a6694605a00ad0b2cee0c1/sim/testsuite/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/Makefile.in?ref=6bddc3e8b480773f84a6694605a00ad0b2cee0c1",
      "patch": "@@ -1,178 +0,0 @@\n-# Makefile for regression testing the GNU debugger.\n-# Copyright (C) 1997-2021 Free Software Foundation, Inc.\n-\n-# This file is part of GDB.\n-\n-# This program is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 3 of the License, or\n-# (at your option) any later version.\n-#\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n-#\n-# You should have received a copy of the GNU General Public License\n-# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-\n-VPATH = @srcdir@\n-srcdir = @srcdir@\n-prefix = @prefix@\n-exec_prefix = @exec_prefix@\n-\n-build_canonical = @build@\n-build_alias = @build_alias@\n-host_canonical = @host@\n-host_alias = @host_alias@\n-target_canonical = @target@\n-target_alias = @target_alias@\n-program_transform_name = @program_transform_name@\n-\n-SHELL = /bin/sh\n-SUBDIRS = @subdirs@\n-RPATH_ENVVAR = @RPATH_ENVVAR@\n-\n-EXPECT = `if [ -f $${rootme}/../../expect/expect ] ; then \\\n-          echo $${rootme}/../../expect/expect ; \\\n-          else echo expect ; fi`\n-\n-RUNTEST = `if [ -f $${srcdir}/../../dejagnu/runtest ] ; then \\\n-\t\techo $${srcdir}/../../dejagnu/runtest ; else echo runtest; \\\n-\t   fi`\n-\n-RUNTESTFLAGS =\n-\n-#### host, target, and site specific Makefile frags come in here.\n-\n-# The use of $$(x_FOR_TARGET) reduces the command line length by not\n-# duplicating the lengthy definition.\n-\n-TARGET_FLAGS_TO_PASS = \\\n-        \"prefix=$(prefix)\" \\\n-        \"exec_prefix=$(exec_prefix)\" \\\n-        \"against=$(against)\" \\\n-        'CC=$$(CC_FOR_TARGET)' \\\n-        \"CC_FOR_TARGET=$(CC_FOR_TARGET)\" \\\n-        \"CFLAGS=$(TESTSUITE_CFLAGS)\" \\\n-        \"CHILLFLAGS=$(CHILLFLAGS)\" \\\n-        'CHILL=$$(CHILL_FOR_TARGET)' \\\n-        \"CHILL_FOR_TARGET=$(CHILL_FOR_TARGET)\" \\\n-        \"CHILL_LIB=$(CHILL_LIB)\" \\\n-        'CXX=$$(CXX_FOR_TARGET)' \\\n-        \"CXX_FOR_TARGET=$(CXX_FOR_TARGET)\" \\\n-        \"CXXFLAGS=$(CXXFLAGS)\" \\\n-        \"MAKEINFO=$(MAKEINFO)\" \\\n-        \"INSTALL=$(INSTALL)\" \\\n-        \"INSTALL_PROGRAM=$(INSTALL_PROGRAM)\" \\\n-        \"INSTALL_DATA=$(INSTALL_DATA)\" \\\n-        \"RUNTESTFLAGS=$(RUNTESTFLAGS)\"\n-\n-#        \"RUNTEST=$(RUNTEST)\" \\\n-\n-all:\n-\t@echo \"Nothing to be done for all...\"\n-\n-.NOEXPORT:\n-info:\n-install-info:\n-dvi:\n-\n-install:\n-install-strip:\n-\n-uninstall: force\n-\n-installcheck:\n-\n-check:  check-DEJAGNU check-recursive\n-\n-#test1:\n-check-recursive: \n-\t@for i in . ${SUBDIRS}; do \\\n-\t\tif [ $$i = . ] ; then continue ; fi ; \\\n-\t\tif [ -d ./$$i ] ; then \\\n-\t\t\tif (rootme=`pwd`/ ; export rootme ; \\\n-\t\t\t    rootsrc=`cd $(srcdir); pwd`/ ; export rootsrc ; \\\n-                                echo \"check recursively into $$i directory...\"; \\\n-\t\t\t\tcd ./$$i; \\\n-\t\t\t\t$(MAKE) $(TARGET_FLAGS_TO_PASS) check) ; then true ; \\\n-\t\t\telse exit 1 ; fi ; \\\n-\t\telse true ; fi ; \\\n-\tdone\n-\n-#test2:\t\n-check-DEJAGNU: site.exp\n-\techo \"Dejagnu-checking in `pwd` directory ...\"\n-\trootme=`pwd`; export rootme; echo rootme = $$rootme; \\\n-\tsrcdir=`cd ${srcdir}; pwd`; export srcdir ; echo srcdir = $$srcdir; \\\n-\tEXPECT=${EXPECT} ; export EXPECT ; echo EXPECT = $$EXPECT; \\\n-\tif [ -f $$rootme/../../expect/expect ]; then \\\n-\t  TCL_LIBRARY=`cd $$srcdir/../../tcl/library && pwd`; \\\n-\t  export TCL_LIBRARY; \\\n-\tfi; \\\n-        echo TCL_LIBRARY = $$TCL_LIBRARY; \\\n-\truntest=$(RUNTEST); echo runtest = $$runtest; \\\n-\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n-\t  $$runtest $(RUNTESTFLAGS); \\\n-\telse echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n-\tfi\n-\n-\n-site.exp: Makefile\n-\t@echo 'Making a new site.exp file...'\n-\t-@rm -f site.bak\n-\t@echo '## these variables are automatically generated by make ##' > $@-t\n-\t@echo '# Do not edit here.  If you wish to override these values' >> $@-t\n-\t@echo '# edit the last section' >> $@-t\n-\t@echo 'set srcdir $(srcdir)' >> $@-t\n-\t@echo 'set objdir' `pwd` >> $@-t\n-\t@echo 'set build_alias $(build_alias)' >> $@-t\n-\t@echo 'set build_triplet $(build_canonical)' >> $@-t\n-\t@echo 'set host_alias $(host_alias)' >> $@-t\n-\t@echo 'set host_triplet $(host_canonical)' >> $@-t\n-\t@echo 'set target_alias $(target_alias)' >> $@-t\n-\t@echo 'set target_triplet $(target_canonical)' >> $@-t\n-\t@echo '## All variables above are generated by configure. Do Not Edit ##' >> $@-t\n-\t-@sed '1,/^## All variables above are.*##/ d' site.exp >> $@-t\n-\t-@mv site.exp site.bak\n-\t@mv $@-t site.exp\n-\n-force:;\n-\n-clean mostlyclean:\n-\t-rm -f *~ core *.o a.out xgdb *.x *.grt\n-\t-rm -f *.rum *.c *.dif *.*out\n-\tif [ x\"${SUBDIRS}\" != x ] ; then \\\n-\t    for dir in ${SUBDIRS}; \\\n-\t    do \\\n-\t\t    echo \"$$dir:\"; \\\n-\t\t    if [ -d $$dir ]; then \\\n-\t\t\t    (cd $$dir; $(MAKE) clean); \\\n-\t\t    fi; \\\n-\t    done ; \\\n-\telse true; fi\n-\n-distclean maintainer-clean realclean: clean\n-\t-rm -f *~ core\n-\t-rm -f Makefile config.status *-init.exp\n-\t-rm -fr *.log summary detail *.plog *.sum *.psum site.*\n-\tif [ x\"${SUBDIRS}\" != x ] ; then \\\n-\t    for dir in ${SUBDIRS}; \\\n-\t    do \\\n-\t\t    echo \"$$dir:\"; \\\n-\t\t    if [ -d $$dir ]; then \\\n-\t\t\t    (cd $$dir; $(MAKE) distclean); \\\n-\t\t    fi; \\\n-\t    done ; \\\n-\telse true; fi\n-\n-Makefile : Makefile.in ../config.status\n-\t$(SHELL) ../config.status\n-\n-config.status: $(srcdir)/../configure\n-\t$(SHELL) ../config.status --recheck\n-# FIXME: Requires --enable-maintainer-mode, which one could add, but\n-# it's provided by automake.  Maybe switch to automake someday.\n-#$(srcdir)/configure: @MAINT@ $(srcdir)/configure.in\n-#\tcd $(srcdir) && autoconf"
    },
    {
      "sha": "0157f9bb2834576b0866a5601261bbea653d2b7d",
      "filename": "sim/testsuite/lib/sim-defs.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/lib/sim-defs.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/lib/sim-defs.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/lib/sim-defs.exp?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -106,7 +106,7 @@ proc sim_run { prog sim_opts prog_opts redir options } {\n \t# These global variables come from generated site.exp.\n \tglobal objdir\n \tglobal arch\n-\tset sim \"$objdir/../$arch/run\"\n+\tset sim \"$objdir/$arch/run\"\n     }\n \n     if [is_remote host] {"
    },
    {
      "sha": "bd8a206964340a7536506eaf8fb282c65e37f94c",
      "filename": "sim/testsuite/local.mk",
      "status": "added",
      "additions": 34,
      "deletions": 0,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/local.mk",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c57b87fc41c368cfa339ad8a879899ba3058e44/sim/testsuite/local.mk",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/local.mk?ref=6c57b87fc41c368cfa339ad8a879899ba3058e44",
      "patch": "@@ -0,0 +1,34 @@\n+## See sim/Makefile.am.\n+#\n+# Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+# Tweak the site.exp so it works with plain `runtest` from user.\n+EXTRA_DEJAGNU_SITE_CONFIG = site-srcdir.exp\n+\n+site-srcdir.exp: Makefile\n+\techo \"set srcdir \\\"$(srcdir)/testsuite\\\"\" > $@\n+\n+check-DEJAGNU: site.exp\n+\tLC_ALL=C; export LC_ALL; \\\n+\tEXPECT=${EXPECT} ; export EXPECT ; \\\n+\truntest=$(RUNTEST); \\\n+\tif $(SHELL) -c \"$$runtest --version\" > /dev/null 2>&1; then \\\n+\t  $$runtest $(RUNTESTFLAGS); \\\n+\telse echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n+\tfi\n+\n+MOSTLYCLEANFILES += \\\n+\tsite-srcdir.exp testrun.log testrun.sum"
    }
  ]
}