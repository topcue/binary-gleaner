{
  "sha": "19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTliMWMzODU2MmY0OWVkNzllNTczODVlOGEyY2I3YWI3MmI2MGEyZQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-03T07:52:11Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-04T22:41:23Z"
    },
    "message": "sim: common: add a version output helper w/copyright+license info\n\nThis mirrors the existing sim_print_help function, and the behavior\nof all other GNU tools with their --version.",
    "tree": {
      "sha": "0e857449c158c880d8d251aa440c42d70ff03dca",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0e857449c158c880d8d251aa440c42d70ff03dca"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "dbed468bcb8dc3c85fcf30ebae7ba67cbe7dc19c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dbed468bcb8dc3c85fcf30ebae7ba67cbe7dc19c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/dbed468bcb8dc3c85fcf30ebae7ba67cbe7dc19c"
    }
  ],
  "stats": {
    "total": 32,
    "additions": 31,
    "deletions": 1
  },
  "files": [
    {
      "sha": "0b1c666c53986d4fedcb3d2024ff7d2e9a1a5e90",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
      "patch": "@@ -1,3 +1,9 @@\n+2021-01-04  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* sim-options.c (standard_option_handler): Call sim_print_version.\n+\t(sim_print_version): New function.\n+\t* sim-options.h (sim_print_version): New prototype.\n+\n 2021-01-04  Mike Frysinger  <vapier@gentoo.org>\n \n \t* sim-config.c (print_sim_config): Rename to ..."
    },
    {
      "sha": "1d8abdaa05bf6d77274b9f39dc9a52da7854565c",
      "filename": "sim/common/sim-options.c",
      "status": "modified",
      "additions": 21,
      "deletions": 1,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/sim-options.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/sim-options.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-options.c?ref=19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
      "patch": "@@ -388,7 +388,7 @@ standard_option_handler (SIM_DESC sd, sim_cpu *cpu, int opt,\n       break;\n \n     case OPTION_VERSION:\n-      sim_io_printf (sd, \"GNU simulator %s%s\\n\", PKGVERSION, version);\n+      sim_print_version (sd, is_command);\n       if (STATE_OPEN_KIND (sd) == SIM_OPEN_STANDALONE)\n \texit (0);\n       break;\n@@ -817,6 +817,26 @@ sim_print_help (SIM_DESC sd, int is_command)\n     }\n }\n \n+/* Print version information.  */\n+\n+void\n+sim_print_version (SIM_DESC sd, int is_command)\n+{\n+  sim_io_printf (sd, \"GNU simulator %s%s\\n\", PKGVERSION, version);\n+\n+  sim_io_printf (sd, \"Copyright (C) 2021 Free Software Foundation, Inc.\\n\");\n+\n+  /* Following the copyright is a brief statement that the program is\n+     free software, that users are free to copy and change it on\n+     certain conditions, that it is covered by the GNU GPL, and that\n+     there is no warranty.  */\n+\n+  sim_io_printf (sd, \"\\\n+License GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>\\\n+\\nThis is free software: you are free to change and redistribute it.\\n\\\n+There is NO WARRANTY, to the extent permitted by law.\\n\");\n+}\n+\n /* Utility of sim_args_command to find the closest match for a command.\n    Commands that have \"-\" in them can be specified as separate words.\n    e.g. sim memory-region 0x800000,0x4000"
    },
    {
      "sha": "84eb3d8336cf8ac8934e6cf0f37a002819e34485",
      "filename": "sim/common/sim-options.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/sim-options.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/19b1c38562f49ed79e57385e8a2cb7ab72b60a2e/sim/common/sim-options.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-options.h?ref=19b1c38562f49ed79e57385e8a2cb7ab72b60a2e",
      "patch": "@@ -141,6 +141,10 @@ SIM_RC sim_parse_args (SIM_DESC sd, char * const *argv);\n    this function is called from the command line interpreter. */\n void sim_print_help (SIM_DESC sd, int is_command);\n \n+/* Print version information for the program.  IS_COMMAND is non-zero when\n+   this function is called from the command line interpreter. */\n+void sim_print_version (SIM_DESC sd, int is_command);\n+\n /* Try to parse the command as if it is an option, Only fail when\n    totally unsuccessful */\n SIM_RC sim_args_command (SIM_DESC sd, const char *cmd);"
    }
  ]
}