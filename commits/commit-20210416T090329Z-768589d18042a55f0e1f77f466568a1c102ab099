{
  "sha": "768589d18042a55f0e1f77f466568a1c102ab099",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzY4NTg5ZDE4MDQyYTU1ZjBlMWY3N2Y0NjY1NjhhMWMxMDJhYjA5OQ==",
  "commit": {
    "author": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-04-16T06:50:32Z"
    },
    "committer": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-04-16T09:03:29Z"
    },
    "message": "RISC-V: PR27436, make operand C> work the same as >.\n\ngas/\n    PR 27436\n    * config/tc-riscv.c (riscv_ip): make operand C> work the same as >.\n    * testsuite/gas/riscv/shamt-32.d: New testcase.\n    * testsuite/gas/riscv/shamt-32.l: Likewise.\n    * testsuite/gas/riscv/shamt-32.s: Likewise.\n    * testsuite/gas/riscv/shamt-64.d: Likewise.\n    * testsuite/gas/riscv/shamt-64.l: Likewise.\n    * testsuite/gas/riscv/shamt-64.s: Likewise.",
    "tree": {
      "sha": "3dafb73e357fc2697e42b3d17d59dbb0a2308c19",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3dafb73e357fc2697e42b3d17d59dbb0a2308c19"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/768589d18042a55f0e1f77f466568a1c102ab099",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/768589d18042a55f0e1f77f466568a1c102ab099",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/768589d18042a55f0e1f77f466568a1c102ab099",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/768589d18042a55f0e1f77f466568a1c102ab099/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "a21b96dd6661d30b6322a934bacc9c4faa248f29",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a21b96dd6661d30b6322a934bacc9c4faa248f29",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a21b96dd6661d30b6322a934bacc9c4faa248f29"
    }
  ],
  "stats": {
    "total": 119,
    "additions": 116,
    "deletions": 3
  },
  "files": [
    {
      "sha": "8df122554a535c7916c27c44dbb2d7778b3e1804",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -1,3 +1,14 @@\n+2021-04-16  Nelson Chu  <nelson.chu@sifive.com>\n+\n+\tPR 27436\n+\t* config/tc-riscv.c (riscv_ip): make operand C> work the same as >.\n+\t* testsuite/gas/riscv/shamt-32.d: New testcase.\n+\t* testsuite/gas/riscv/shamt-32.l: Likewise.\n+\t* testsuite/gas/riscv/shamt-32.s: Likewise.\n+\t* testsuite/gas/riscv/shamt-64.d: Likewise.\n+\t* testsuite/gas/riscv/shamt-64.l: Likewise.\n+\t* testsuite/gas/riscv/shamt-64.s: Likewise.\n+\n 2021-04-16  Lifang Xia <lifang_xia@c-sky.com>\n \n \t* testsuite/gas/riscv/c-zero-imm.d: Compress addi a4,a4,0 to"
    },
    {
      "sha": "3fff33e9a11cefc88cde74cd37212ae22c0bfd77",
      "filename": "gas/config/tc-riscv.c",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/config/tc-riscv.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/config/tc-riscv.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-riscv.c?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -2088,11 +2088,10 @@ riscv_ip (char *str, struct riscv_cl_insn *ip, expressionS *imm_expr,\n \t\t      || regno != 0)\n \t\t    break;\n \t\t  continue;\n-\t\tcase '>':\n+\t\tcase '>': /* Shift amount, 0 - (XLEN-1).  */\n \t\t  if (my_getSmallExpression (imm_expr, imm_reloc, s, p)\n \t\t      || imm_expr->X_op != O_constant\n-\t\t      || imm_expr->X_add_number <= 0\n-\t\t      || imm_expr->X_add_number >= 64)\n+\t\t      || (unsigned long) imm_expr->X_add_number >= xlen)\n \t\t    break;\n \t\t  ip->insn_opcode |= ENCODE_CITYPE_IMM (imm_expr->X_add_number);\n \t\trvc_imm_done:"
    },
    {
      "sha": "b756109c8192791b136f866cac917af34c5f2685",
      "filename": "gas/testsuite/gas/riscv/shamt-32.d",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-32.d?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,3 @@\n+#as: -march=rv32i\n+#objdump: -dr\n+#error_output: shamt-32.l"
    },
    {
      "sha": "71feee3ed0eacde981ffe410baeb87a6b7369d9b",
      "filename": "gas/testsuite/gas/riscv/shamt-32.l",
      "status": "added",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-32.l?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,13 @@\n+.*Assembler messages:\n+.*:4: Error: improper shift amount \\(32\\)\n+.*:5: Error: improper shift amount \\(63\\)\n+.*:9: Error: improper shift amount \\(32\\)\n+.*:10: Error: improper shift amount \\(63\\)\n+.*:14: Error: improper shift amount \\(32\\)\n+.*:15: Error: improper shift amount \\(63\\)\n+.*:20: Error: improper shift amount \\(32\\)\n+.*:21: Error: improper shift amount \\(63\\)\n+.*:25: Error: improper shift amount \\(32\\)\n+.*:26: Error: improper shift amount \\(63\\)\n+.*:30: Error: improper shift amount \\(32\\)\n+.*:31: Error: improper shift amount \\(63\\)"
    },
    {
      "sha": "6f1a5ba4d821a9daa95765e11af71674d5c9cd88",
      "filename": "gas/testsuite/gas/riscv/shamt-32.s",
      "status": "added",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-32.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-32.s?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,31 @@\n+\t.option norvc\n+\tslli\ta0, a0, 0\n+\tslli\ta0, a0, 31\n+\tslli\ta0, a0, 32\n+\tslli\ta0, a0, 63\n+\n+\tsrli\ta0, a0, 0\n+\tsrli\ta0, a0, 31\n+\tsrli\ta0, a0, 32\n+\tsrli\ta0, a0, 63\n+\n+\tsrai\ta0, a0, 0\n+\tsrai\ta0, a0, 31\n+\tsrai\ta0, a0, 32\n+\tsrai\ta0, a0, 63\n+\n+\t.option rvc\n+\tslli\ta0, a0, 0\n+\tslli\ta0, a0, 31\n+\tslli\ta0, a0, 32\n+\tslli\ta0, a0, 63\n+\n+\tsrli\ta0, a0, 0\n+\tsrli\ta0, a0, 31\n+\tsrli\ta0, a0, 32\n+\tsrli\ta0, a0, 63\n+\n+\tsrai\ta0, a0, 0\n+\tsrai\ta0, a0, 31\n+\tsrai\ta0, a0, 32\n+\tsrai\ta0, a0, 63"
    },
    {
      "sha": "563c7e6a1ab0e4bd3119b7d177977a65a35205ca",
      "filename": "gas/testsuite/gas/riscv/shamt-64.d",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-64.d?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,3 @@\n+#as: -march=rv64i\n+#objdump: -dr\n+#error_output: shamt-64.l"
    },
    {
      "sha": "ded1777e8d22031736aac60d6f05cce51e90c594",
      "filename": "gas/testsuite/gas/riscv/shamt-64.l",
      "status": "added",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-64.l?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,7 @@\n+.*Assembler messages:\n+.*:19: Error: improper shift amount \\(32\\)\n+.*:20: Error: improper shift amount \\(63\\)\n+.*:24: Error: improper shift amount \\(32\\)\n+.*:25: Error: improper shift amount \\(63\\)\n+.*:29: Error: improper shift amount \\(32\\)\n+.*:30: Error: improper shift amount \\(63\\)"
    },
    {
      "sha": "703dfb211bdad765c787f1f20c0520ed860696a3",
      "filename": "gas/testsuite/gas/riscv/shamt-64.s",
      "status": "added",
      "additions": 46,
      "deletions": 0,
      "changes": 46,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/768589d18042a55f0e1f77f466568a1c102ab099/gas/testsuite/gas/riscv/shamt-64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/shamt-64.s?ref=768589d18042a55f0e1f77f466568a1c102ab099",
      "patch": "@@ -0,0 +1,46 @@\n+\t.option norvc\n+\tslli\ta0, a0, 0\n+\tslli\ta0, a0, 31\n+\tslli\ta0, a0, 32\n+\tslli\ta0, a0, 63\n+\n+\tsrli\ta0, a0, 0\n+\tsrli\ta0, a0, 31\n+\tsrli\ta0, a0, 32\n+\tsrli\ta0, a0, 63\n+\n+\tsrai\ta0, a0, 0\n+\tsrai\ta0, a0, 31\n+\tsrai\ta0, a0, 32\n+\tsrai\ta0, a0, 63\n+\n+\tslliw\ta0, a0, 0\n+\tslliw\ta0, a0, 31\n+\tslliw\ta0, a0, 32\n+\tslliw\ta0, a0, 63\n+\n+\tsrliw\ta0, a0, 0\n+\tsrliw\ta0, a0, 31\n+\tsrliw\ta0, a0, 32\n+\tsrliw\ta0, a0, 63\n+\n+\tsraiw\ta0, a0, 0\n+\tsraiw\ta0, a0, 31\n+\tsraiw\ta0, a0, 32\n+\tsraiw\ta0, a0, 63\n+\n+\t.option rvc\n+\tslli\ta0, a0, 0\n+\tslli\ta0, a0, 31\n+\tslli\ta0, a0, 32\n+\tslli\ta0, a0, 63\n+\n+\tsrli\ta0, a0, 0\n+\tsrli\ta0, a0, 31\n+\tsrli\ta0, a0, 32\n+\tsrli\ta0, a0, 63\n+\n+\tsrai\ta0, a0, 0\n+\tsrai\ta0, a0, 31\n+\tsrai\ta0, a0, 32\n+\tsrai\ta0, a0, 63"
    }
  ]
}