{
  "sha": "479604f44fc1eaa02a97ebcc1b60f55a606c4046",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDc5NjA0ZjQ0ZmMxZWFhMDJhOTdlYmNjMWI2MGY1NWE2MDZjNDA0Ng==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-04-23T21:05:52Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-05-28T16:07:24Z"
    },
    "message": "libctf: error handling\n\nCTF functions return zero on success or an extended errno value which\ncan be translated into a string via the functions in this commit.\n\nThe errno numbers start at -CTF_BASE.\n\nlibctf/\n\t* ctf-error.c: New file.\n\ninclude/\n\t* ctf-api.h (ctf_errno): New declaration.\n\t(ctf_errmsg): Likewise.",
    "tree": {
      "sha": "57b7d78a75be9c8e243dc3a0d957c7c48c8235f1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/57b7d78a75be9c8e243dc3a0d957c7c48c8235f1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/479604f44fc1eaa02a97ebcc1b60f55a606c4046",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/479604f44fc1eaa02a97ebcc1b60f55a606c4046",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/479604f44fc1eaa02a97ebcc1b60f55a606c4046",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/479604f44fc1eaa02a97ebcc1b60f55a606c4046/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "94585e7f93c9477bcf2835d8245e967053ce2b41",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/94585e7f93c9477bcf2835d8245e967053ce2b41",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/94585e7f93c9477bcf2835d8245e967053ce2b41"
    }
  ],
  "stats": {
    "total": 104,
    "additions": 104,
    "deletions": 0
  },
  "files": [
    {
      "sha": "75e71ddd63508a9c4d6d6bc539b96578ec2b370f",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/479604f44fc1eaa02a97ebcc1b60f55a606c4046/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/479604f44fc1eaa02a97ebcc1b60f55a606c4046/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=479604f44fc1eaa02a97ebcc1b60f55a606c4046",
      "patch": "@@ -1,3 +1,8 @@\n+2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* ctf-api.h (ctf_errno): New declaration.\n+\t(ctf_errmsg): Likewise.\n+\n 2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-api.h (ctf_setdebug): New."
    },
    {
      "sha": "cfe4d56f5952ca1e2ad5e4ab11d0ec014937a8da",
      "filename": "include/ctf-api.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/479604f44fc1eaa02a97ebcc1b60f55a606c4046/include/ctf-api.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/479604f44fc1eaa02a97ebcc1b60f55a606c4046/include/ctf-api.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ctf-api.h?ref=479604f44fc1eaa02a97ebcc1b60f55a606c4046",
      "patch": "@@ -122,6 +122,8 @@ enum\n #define\tCTF_ADD_NONROOT\t0\t/* Type only visible in nested scope.  */\n #define\tCTF_ADD_ROOT\t1\t/* Type visible at top-level scope.  */\n \n+extern int ctf_errno (ctf_file_t *);\n+extern const char *ctf_errmsg (int);\n \n extern void ctf_setdebug (int debug);\n extern int ctf_getdebug (void);"
    },
    {
      "sha": "33841a4d6992ade822d35b87fad92eb291652fb8",
      "filename": "libctf/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/479604f44fc1eaa02a97ebcc1b60f55a606c4046/libctf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/479604f44fc1eaa02a97ebcc1b60f55a606c4046/libctf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ChangeLog?ref=479604f44fc1eaa02a97ebcc1b60f55a606c4046",
      "patch": "@@ -1,3 +1,7 @@\n+2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* ctf-error.c: New file.\n+\n 2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-util.c: New file."
    },
    {
      "sha": "af3a6c7fd2835fef3aa44d292e484e88e1525a3d",
      "filename": "libctf/ctf-error.c",
      "status": "added",
      "additions": 93,
      "deletions": 0,
      "changes": 93,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/479604f44fc1eaa02a97ebcc1b60f55a606c4046/libctf/ctf-error.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/479604f44fc1eaa02a97ebcc1b60f55a606c4046/libctf/ctf-error.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-error.c?ref=479604f44fc1eaa02a97ebcc1b60f55a606c4046",
      "patch": "@@ -0,0 +1,93 @@\n+/* Error table.\n+   Copyright (C) 2019 Free Software Foundation, Inc.\n+\n+   This file is part of libctf.\n+\n+   libctf is free software; you can redistribute it and/or modify it under\n+   the terms of the GNU General Public License as published by the Free\n+   Software Foundation; either version 3, or (at your option) any later\n+   version.\n+\n+   This program is distributed in the hope that it will be useful, but\n+   WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n+   See the GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with this program; see the file COPYING.  If not see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#include <ctf-impl.h>\n+\n+static const char *const _ctf_errlist[] = {\n+  \"File is not in CTF or ELF format\",\t\t     /* ECTF_FMT */\n+  \"BFD error\",\t\t\t\t\t     /* ECTF_BFDERR */\n+  \"File uses more recent CTF version than libctf\",   /* ECTF_CTFVERS */\n+  \"Ambiguous BFD target\",\t\t\t     /* ECTF_BFD_AMBIGUOUS */\n+  \"Symbol table uses invalid entry size\",\t     /* ECTF_SYMTAB */\n+  \"Symbol table data buffer is not valid\",\t     /* ECTF_SYMBAD */\n+  \"String table data buffer is not valid\",\t     /* ECTF_STRBAD */\n+  \"File data structure corruption detected\",\t     /* ECTF_CORRUPT */\n+  \"File does not contain CTF data\",\t\t     /* ECTF_NOCTFDATA */\n+  \"Buffer does not contain CTF data\",\t\t     /* ECTF_NOCTFBUF */\n+  \"Symbol table information is not available\",\t     /* ECTF_NOSYMTAB */\n+  \"Type information is in parent and unavailable\",   /* ECTF_NOPARENT */\n+  \"Cannot import types with different data model\",   /* ECTF_DMODEL */\n+  \"Unused error\",\t\t\t\t     /* ECTF_UNUSED */\n+  \"Failed to allocate (de)compression buffer\",\t     /* ECTF_ZALLOC */\n+  \"Failed to decompress CTF data\",\t\t     /* ECTF_DECOMPRESS */\n+  \"External string table is not available\",\t     /* ECTF_STRTAB */\n+  \"String name offset is corrupt\",\t\t     /* ECTF_BADNAME */\n+  \"Invalid type identifier\",\t\t\t     /* ECTF_BADID */\n+  \"Type is not a struct or union\",\t\t     /* ECTF_NOTSOU */\n+  \"Type is not an enum\",\t\t\t     /* ECTF_NOTENUM */\n+  \"Type is not a struct, union, or enum\",\t     /* ECTF_NOTSUE */\n+  \"Type is not an integer, float, or enum\",\t     /* ECTF_NOTINTFP */\n+  \"Type is not an array\",\t\t\t     /* ECTF_NOTARRAY */\n+  \"Type does not reference another type\",\t     /* ECTF_NOTREF */\n+  \"Input buffer is too small for type name\",\t     /* ECTF_NAMELEN */\n+  \"No type information available for that name\",     /* ECTF_NOTYPE */\n+  \"Syntax error in type name\",\t\t\t     /* ECTF_SYNTAX */\n+  \"Symbol table entry is not a function\",\t     /* ECTF_NOTFUNC */\n+  \"No function information available for symbol\",    /* ECTF_NOFUNCDAT */\n+  \"Symbol table entry is not a data object\",\t     /* ECTF_NOTDATA */\n+  \"No type information available for symbol\",\t     /* ECTF_NOTYPEDAT */\n+  \"No label information available for that name\",    /* ECTF_NOLABEL */\n+  \"File does not contain any labels\",\t\t     /* ECTF_NOLABELDATA */\n+  \"Feature not supported\",\t\t\t     /* ECTF_NOTSUP */\n+  \"Invalid enum element name\",\t\t\t     /* ECTF_NOENUMNAM */\n+  \"Invalid member name\",\t\t\t     /* ECTF_NOMEMBNAM */\n+  \"CTF container is read-only\",\t\t\t     /* ECTF_RDONLY */\n+  \"Limit on number of dynamic type members reached\", /* ECTF_DTFULL */\n+  \"Limit on number of dynamic types reached\",\t     /* ECTF_FULL */\n+  \"Duplicate member or variable name\",\t\t     /* ECTF_DUPLICATE */\n+  \"Conflicting type is already defined\",\t     /* ECTF_CONFLICT */\n+  \"Attempt to roll back past a ctf_update\",\t     /* ECTF_OVERROLLBACK */\n+  \"Failed to compress CTF data\",\t\t     /* ECTF_COMPRESS */\n+  \"Failed to create CTF archive\",\t\t     /* ECTF_ARCREATE */\n+  \"Name not found in CTF archive\",\t\t     /* ECTF_ARNNAME */\n+  \"Overflow of type bitness or offset in slice\",     /* ECTF_SLICEOVERFLOW */\n+  \"Unknown section number in dump\",\t\t     /* ECTF_DUMPSECTUNKNOWN */\n+  \"Section changed in middle of dump\"\t\t     /* ECTF_DUMPSECTCHANGED */\n+};\n+\n+static const int _ctf_nerr = sizeof (_ctf_errlist) / sizeof (_ctf_errlist[0]);\n+\n+const char *\n+ctf_errmsg (int error)\n+{\n+  const char *str;\n+\n+  if (error >= ECTF_BASE && (error - ECTF_BASE) < _ctf_nerr)\n+    str = _ctf_errlist[error - ECTF_BASE];\n+  else\n+    str = ctf_strerror (error);\n+\n+  return (str ? str : \"Unknown error\");\n+}\n+\n+int\n+ctf_errno (ctf_file_t * fp)\n+{\n+  return fp->ctf_errno;\n+}"
    }
  ]
}