{
  "sha": "189b8c2e104017600104457b97315da74a22f549",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTg5YjhjMmUxMDQwMTc2MDAxMDQ0NTdiOTczMTVkYTc0YTIyZjU0OQ==",
  "commit": {
    "author": {
      "name": "Sergei Trofimovich",
      "email": "siarheit@google.com",
      "date": "2019-03-17T22:48:02Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-04-19T20:05:47Z"
    },
    "message": "gdb/configure.ac: add --enable-source-highlight\n\nAllow disabling source-highlight dependency autodetection even\nit exists in the system. More details on problem of automatic\ndependencies:\nhttps://wiki.gentoo.org/wiki/Project:Quality_Assurance/Automagic_dependencies\n\nNoticed by Jeroen Roovers in https://bugs.gentoo.org/680238\n\n\t* configure.ac: add --enable-source-highlight switch.\n\t* configure: Regenerate.\n\t* top.c (print_gdb_version): plumb --enable-source-highlight\n\tstatus to \"show configuration\".\n\ngdb/ChangeLog\n2019-04-19  Sergei Trofimovich <siarheit@google.com>\n\n\t* configure.ac: add --enable-source-highlight switch.\n\t* configure: Regenerate.\n\t* top.c (print_gdb_version): plumb --enable-source-highlight\n\tstatus to \"show configuration\".",
    "tree": {
      "sha": "49d678df172cb291de0261e10a8c389a63ebd001",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/49d678df172cb291de0261e10a8c389a63ebd001"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/189b8c2e104017600104457b97315da74a22f549",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/189b8c2e104017600104457b97315da74a22f549",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/189b8c2e104017600104457b97315da74a22f549",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/189b8c2e104017600104457b97315da74a22f549/comments",
  "author": {
    "login": "trofi",
    "id": 226650,
    "node_id": "MDQ6VXNlcjIyNjY1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/226650?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/trofi",
    "html_url": "https://github.com/trofi",
    "followers_url": "https://api.github.com/users/trofi/followers",
    "following_url": "https://api.github.com/users/trofi/following{/other_user}",
    "gists_url": "https://api.github.com/users/trofi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/trofi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trofi/subscriptions",
    "organizations_url": "https://api.github.com/users/trofi/orgs",
    "repos_url": "https://api.github.com/users/trofi/repos",
    "events_url": "https://api.github.com/users/trofi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/trofi/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8ecb59f8567956c1520b491ea31396363efcb1ef",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8ecb59f8567956c1520b491ea31396363efcb1ef",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8ecb59f8567956c1520b491ea31396363efcb1ef"
    }
  ],
  "stats": {
    "total": 87,
    "additions": 73,
    "deletions": 14
  },
  "files": [
    {
      "sha": "88ae5ddd6d735b479f5fb61cbbd0701f6bbe579f",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/189b8c2e104017600104457b97315da74a22f549/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/189b8c2e104017600104457b97315da74a22f549/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=189b8c2e104017600104457b97315da74a22f549",
      "patch": "@@ -1,3 +1,10 @@\n+2019-04-19  Sergei Trofimovich <siarheit@google.com>\n+\n+\t* configure.ac: add --enable-source-highlight switch.\n+\t* configure: Regenerate.\n+\t* top.c (print_gdb_version): plumb --enable-source-highlight\n+\tstatus to \"show configuration\".\n+\n 2019-04-19  Tom Tromey  <tromey@adacore.com>\n \n \t* ada-lang.c (ada_is_variant_part, ada_to_fixed_type_1):"
    },
    {
      "sha": "15a96afcca8a5cc34957896eca572d63ecaadee9",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 31,
      "deletions": 7,
      "changes": 38,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/189b8c2e104017600104457b97315da74a22f549/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/189b8c2e104017600104457b97315da74a22f549/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=189b8c2e104017600104457b97315da74a22f549",
      "patch": "@@ -879,6 +879,7 @@ with_mpfr\n with_libmpfr_prefix\n with_python\n with_guile\n+enable_source_highlight\n enable_libmcheck\n with_intel_pt\n with_libipt_prefix\n@@ -1554,6 +1555,8 @@ Optional Features:\n   --enable-profiling      enable profiling of GDB\n   --enable-codesign=CERT  sign gdb with 'codesign -s CERT'\n   --disable-rpath         do not hardcode runtime library paths\n+  --enable-source-highlight\n+                          enable source-highlight for source listings\n   --enable-libmcheck      Try linking with -lmcheck if available\n   --enable-werror         treat compile warnings as errors\n   --enable-build-warnings enable build-time compiler warnings if gcc is used\n@@ -11393,24 +11396,45 @@ fi\n \n SRCHIGH_LIBS=\n SRCHIGH_CFLAGS=\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for the source-highlight library\" >&5\n+\n+# Check whether --enable-source-highlight was given.\n+if test \"${enable_source_highlight+set}\" = set; then :\n+  enableval=$enable_source_highlight; case \"${enableval}\" in\n+  yes)  enable_source_highlight=yes ;;\n+  no)   enable_source_highlight=no  ;;\n+  *)    as_fn_error $? \"bad value ${enableval} for source-highlight option\" \"$LINENO\" 5 ;;\n+esac\n+else\n+  enable_source_highlight=auto\n+fi\n+\n+\n+if test \"${enable_source_highlight}\" != \"no\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for the source-highlight library\" >&5\n $as_echo_n \"checking for the source-highlight library... \" >&6; }\n-if test \"${pkg_config_prog_path}\" = \"missing\"; then\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no - pkg-config not found\" >&5\n+  if test \"${pkg_config_prog_path}\" = \"missing\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no - pkg-config not found\" >&5\n $as_echo \"no - pkg-config not found\" >&6; }\n-else\n-   if ${pkg_config_prog_path} --exists source-highlight; then\n+    if test \"${enable_source_highlight}\" = \"yes\"; then\n+      as_fn_error $? \"pkg-config was not found in your system\" \"$LINENO\" 5\n+    fi\n+  else\n+    if ${pkg_config_prog_path} --exists source-highlight; then\n       SRCHIGH_CFLAGS=`${pkg_config_prog_path} --cflags source-highlight`\n       SRCHIGH_LIBS=`${pkg_config_prog_path} --libs source-highlight`\n \n $as_echo \"#define HAVE_SOURCE_HIGHLIGHT 1\" >>confdefs.h\n \n       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n $as_echo \"yes\" >&6; }\n-   else\n+    else\n       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n $as_echo \"no\" >&6; }\n-   fi\n+      if test \"${enable_source_highlight}\" = \"yes\"; then\n+        as_fn_error $? \"source-highlight was not found in your system\" \"$LINENO\" 5\n+      fi\n+    fi\n+  fi\n fi\n \n "
    },
    {
      "sha": "1318c8d008734ba1c566339080649533c74dbd6c",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 26,
      "deletions": 7,
      "changes": 33,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/189b8c2e104017600104457b97315da74a22f549/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/189b8c2e104017600104457b97315da74a22f549/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=189b8c2e104017600104457b97315da74a22f549",
      "patch": "@@ -1220,19 +1220,38 @@ AM_CONDITIONAL(HAVE_GUILE, test \"${have_libguile}\" != no)\n \n SRCHIGH_LIBS=\n SRCHIGH_CFLAGS=\n-AC_MSG_CHECKING([for the source-highlight library])\n-if test \"${pkg_config_prog_path}\" = \"missing\"; then\n-   AC_MSG_RESULT([no - pkg-config not found])\n-else\n-   if ${pkg_config_prog_path} --exists source-highlight; then\n+\n+AC_ARG_ENABLE(source-highlight,\n+  AS_HELP_STRING([--enable-source-highlight],\n+    [enable source-highlight for source listings]),\n+  [case \"${enableval}\" in\n+  yes)  enable_source_highlight=yes ;;\n+  no)   enable_source_highlight=no  ;;\n+  *)    AC_MSG_ERROR(bad value ${enableval} for source-highlight option) ;;\n+esac],\n+[enable_source_highlight=auto])\n+\n+if test \"${enable_source_highlight}\" != \"no\"; then\n+  AC_MSG_CHECKING([for the source-highlight library])\n+  if test \"${pkg_config_prog_path}\" = \"missing\"; then\n+    AC_MSG_RESULT([no - pkg-config not found])\n+    if test \"${enable_source_highlight}\" = \"yes\"; then\n+      AC_MSG_ERROR([pkg-config was not found in your system])\n+    fi\n+  else\n+    if ${pkg_config_prog_path} --exists source-highlight; then\n       SRCHIGH_CFLAGS=`${pkg_config_prog_path} --cflags source-highlight`\n       SRCHIGH_LIBS=`${pkg_config_prog_path} --libs source-highlight`\n       AC_DEFINE([HAVE_SOURCE_HIGHLIGHT], 1,\n                 [Define to 1 if the source-highlight library is available])\n       AC_MSG_RESULT([yes])\n-   else\n+    else\n       AC_MSG_RESULT([no])\n-   fi\n+      if test \"${enable_source_highlight}\" = \"yes\"; then\n+        AC_MSG_ERROR([source-highlight was not found in your system])\n+      fi\n+    fi\n+  fi\n fi\n AC_SUBST(SRCHIGH_LIBS)\n AC_SUBST(SRCHIGH_CFLAGS)"
    },
    {
      "sha": "9a1c258d3f7456be6d915defad85523853bb7008",
      "filename": "gdb/top.c",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/189b8c2e104017600104457b97315da74a22f549/gdb/top.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/189b8c2e104017600104457b97315da74a22f549/gdb/top.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/top.c?ref=189b8c2e104017600104457b97315da74a22f549",
      "patch": "@@ -1450,6 +1450,15 @@ This GDB was configured as follows:\\n\\\n              --without-guile\\n\\\n \"));\n #endif\n+#if HAVE_SOURCE_HIGHLIGHT\n+  fprintf_filtered (stream, _(\"\\\n+             --enable-source-highlight\\n\\\n+\"));\n+#else\n+  fprintf_filtered (stream, _(\"\\\n+             --disable-source-highlight\\n\\\n+\"));\n+#endif\n #ifdef RELOC_SRCDIR\n   fprintf_filtered (stream, _(\"\\\n              --with-relocated-sources=%s\\n\\"
    }
  ]
}