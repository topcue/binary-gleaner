{
  "sha": "ef6379e16dd164487e10a06e19bcb006d5c3788b",
  "node_id": "C_kwDOANOeidoAKGVmNjM3OWUxNmRkMTY0NDg3ZTEwYTA2ZTE5YmNiMDA2ZDVjMzc4OGI",
  "commit": {
    "author": {
      "name": "Jeremy Drake",
      "email": "cygwin@jdrake.com",
      "date": "2021-11-17T16:24:53Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-11-17T16:24:53Z"
    },
    "message": "Set the default DLL chracteristics to 0 for Cygwin based targets.\n\n\t* emultempl/pep.em (DEFAULT_DLL_CHARACTERISTICS): Set to 0 for\n\tCygwin targets.\n\t* emultempl/pep.em (DEFAULT_DLL_CHARACTERISTICS): Likewise.",
    "tree": {
      "sha": "b8795556248186da00e759ce1872d8e678317cf9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b8795556248186da00e759ce1872d8e678317cf9"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ef6379e16dd164487e10a06e19bcb006d5c3788b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef6379e16dd164487e10a06e19bcb006d5c3788b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ef6379e16dd164487e10a06e19bcb006d5c3788b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef6379e16dd164487e10a06e19bcb006d5c3788b/comments",
  "author": null,
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ee9e412f14908c1055cb00fab9307d1723981639",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ee9e412f14908c1055cb00fab9307d1723981639",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ee9e412f14908c1055cb00fab9307d1723981639"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 23,
    "deletions": 3
  },
  "files": [
    {
      "sha": "cd732301887d7c986e708440d63641ac715b8b04",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=ef6379e16dd164487e10a06e19bcb006d5c3788b",
      "patch": "@@ -1,3 +1,9 @@\n+2021-11-17  Jeremy Drake  <cygwin@jdrake.com>\n+\n+\t* emultempl/pep.em (DEFAULT_DLL_CHARACTERISTICS): Set to 0 for\n+\tCygwin targets.\n+\t* emultempl/pep.em (DEFAULT_DLL_CHARACTERISTICS): Likewise.\n+\n 2021-11-17  Nick Clifton  <nickc@redhat.com>\n \n \tPR 28452"
    },
    {
      "sha": "728ad046917c4d225c0b0fec43f991233d6577ff",
      "filename": "ld/emultempl/pe.em",
      "status": "modified",
      "additions": 12,
      "deletions": 1,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/emultempl/pe.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/emultempl/pe.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/pe.em?ref=ef6379e16dd164487e10a06e19bcb006d5c3788b",
      "patch": "@@ -5,6 +5,16 @@ if [ -z \"$MACHINE\" ]; then\n else\n   OUTPUT_ARCH=${ARCH}:${MACHINE}\n fi\n+\n+case ${target} in\n+  *-*-cygwin*)\n+    cygwin_behavior=1\n+    ;;\n+  *)\n+    cygwin_behavior=0;\n+    ;;\n+esac\n+\n rm -f e${EMULATION_NAME}.c\n (echo;echo;echo;echo;echo)>e${EMULATION_NAME}.c # there, now line numbers match ;-)\n fragment <<EOF\n@@ -104,7 +114,8 @@ fragment <<EOF\n #define DEFAULT_PSEUDO_RELOC_VERSION 1\n #endif\n \n-#define DEFAULT_DLL_CHARACTERISTICS\t(IMAGE_DLL_CHARACTERISTICS_DYNAMIC_BASE \\\n+#define DEFAULT_DLL_CHARACTERISTICS\t(${cygwin_behavior} ? 0 : \\\n+\t\t\t\t\t   IMAGE_DLL_CHARACTERISTICS_DYNAMIC_BASE \\\n \t\t\t\t\t | IMAGE_DLL_CHARACTERISTICS_NX_COMPAT)\n \n #if defined(TARGET_IS_i386pe) || ! defined(DLL_SUPPORT)"
    },
    {
      "sha": "430351b648153ac4f63e4c7de3eadfe59a7bfca0",
      "filename": "ld/emultempl/pep.em",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/emultempl/pep.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef6379e16dd164487e10a06e19bcb006d5c3788b/ld/emultempl/pep.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/pep.em?ref=ef6379e16dd164487e10a06e19bcb006d5c3788b",
      "patch": "@@ -9,9 +9,11 @@ fi\n case ${target} in\n   *-*-cygwin*)\n     move_default_addr_high=1\n+    cygwin_behavior=1\n     ;;\n   *)\n     move_default_addr_high=0;\n+    cygwin_behavior=0;\n     ;;\n esac\n \n@@ -99,9 +101,10 @@ fragment <<EOF\n #define DLL_SUPPORT\n #endif\n \n-#define DEFAULT_DLL_CHARACTERISTICS\t(IMAGE_DLL_CHARACTERISTICS_DYNAMIC_BASE \\\n+#define DEFAULT_DLL_CHARACTERISTICS\t(${cygwin_behavior} ? 0 : \\\n+\t\t\t\t\t   IMAGE_DLL_CHARACTERISTICS_DYNAMIC_BASE \\\n \t\t\t\t\t | IMAGE_DLL_CHARACTERISTICS_HIGH_ENTROPY_VA \\\n-\t\t\t\t\t | IMAGE_DLL_CHARACTERISTICS_NX_COMPAT)\n+  \t\t\t\t\t | IMAGE_DLL_CHARACTERISTICS_NX_COMPAT)\n \n #if defined(TARGET_IS_i386pep) || ! defined(DLL_SUPPORT)\n #define\tPE_DEF_SUBSYSTEM\t\t3"
    }
  ]
}