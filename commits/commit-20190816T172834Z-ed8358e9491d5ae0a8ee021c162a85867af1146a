{
  "sha": "ed8358e9491d5ae0a8ee021c162a85867af1146a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWQ4MzU4ZTk0OTFkNWFlMGE4ZWUwMjFjMTYyYTg1ODY3YWYxMTQ2YQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-12T00:22:06Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-16T17:28:34Z"
    },
    "message": "Change tui_update_source_window_as_is to be a method\n\nThis changes tui_update_source_window_as_is to be a method on\ntui_source_window_base.\n\ngdb/ChangeLog\n2019-08-16  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-winsource.h (struct tui_source_window_base)\n\t<update_source_window_as_is>: Declare.\n\t(tui_update_source_window_as_is): Don't declare.\n\t* tui/tui-winsource.c (tui_update_source_window): Update\n\t(tui_source_window_base::update_source_window_as_is): Rename from\n\ttui_update_source_window_as_is.\n\t(tui_source_window_base::refill): Update.\n\t* tui/tui-source.c (tui_show_symtab_source): Update.\n\t* tui/tui-disasm.c (tui_disasm_window::do_scroll_vertical):\n\tUpdate.",
    "tree": {
      "sha": "6c8b0d5076797f1ff705f6547d34b937b8b0b06a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6c8b0d5076797f1ff705f6547d34b937b8b0b06a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ed8358e9491d5ae0a8ee021c162a85867af1146a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ed8358e9491d5ae0a8ee021c162a85867af1146a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ed8358e9491d5ae0a8ee021c162a85867af1146a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ed8358e9491d5ae0a8ee021c162a85867af1146a/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "20149b6b207ac8c2bcde6f272607109f566168a9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/20149b6b207ac8c2bcde6f272607109f566168a9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/20149b6b207ac8c2bcde6f272607109f566168a9"
    }
  ],
  "stats": {
    "total": 59,
    "additions": 35,
    "deletions": 24
  },
  "files": [
    {
      "sha": "95340704e9c6b2392d173f4d1a4e3b92894b24f5",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=ed8358e9491d5ae0a8ee021c162a85867af1146a",
      "patch": "@@ -1,3 +1,16 @@\n+2019-08-16  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-winsource.h (struct tui_source_window_base)\n+\t<update_source_window_as_is>: Declare.\n+\t(tui_update_source_window_as_is): Don't declare.\n+\t* tui/tui-winsource.c (tui_update_source_window): Update\n+\t(tui_source_window_base::update_source_window_as_is): Rename from\n+\ttui_update_source_window_as_is.\n+\t(tui_source_window_base::refill): Update.\n+\t* tui/tui-source.c (tui_show_symtab_source): Update.\n+\t* tui/tui-disasm.c (tui_disasm_window::do_scroll_vertical):\n+\tUpdate.\n+\n 2019-08-16  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-winsource.h (tui_update_source_window)"
    },
    {
      "sha": "d47639c4c7781f8fd85b5c187c70dbb884835ec0",
      "filename": "gdb/tui/tui-disasm.c",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-disasm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-disasm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-disasm.c?ref=ed8358e9491d5ae0a8ee021c162a85867af1146a",
      "patch": "@@ -367,8 +367,7 @@ tui_disasm_window::do_scroll_vertical (int num_to_scroll)\n \n       val.loa = LOA_ADDRESS;\n       val.u.addr = tui_find_disassembly_address (gdbarch, pc, num_to_scroll);\n-      tui_update_source_window_as_is (this, gdbarch,\n-\t\t\t\t      NULL, val);\n+      update_source_window_as_is (gdbarch, NULL, val);\n     }\n }\n "
    },
    {
      "sha": "e62d999fe3e836b2e4ff6672c0440af2df6d8fc5",
      "filename": "gdb/tui/tui-source.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-source.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-source.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-source.c?ref=ed8358e9491d5ae0a8ee021c162a85867af1146a",
      "patch": "@@ -205,7 +205,7 @@ tui_show_symtab_source (tui_source_window_base *win_info,\n \t\t\tstruct tui_line_or_address line)\n {\n   win_info->horizontal_offset = 0;\n-  tui_update_source_window_as_is (win_info, gdbarch, s, line);\n+  win_info->update_source_window_as_is (gdbarch, s, line);\n }\n \n "
    },
    {
      "sha": "2c747eb42a953a59d27e226374021c056ab387d0",
      "filename": "gdb/tui/tui-winsource.c",
      "status": "modified",
      "additions": 16,
      "deletions": 18,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-winsource.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-winsource.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-winsource.c?ref=ed8358e9491d5ae0a8ee021c162a85867af1146a",
      "patch": "@@ -76,46 +76,45 @@ tui_update_source_window (struct tui_source_window_base *win_info,\n \t\t\t  struct tui_line_or_address line_or_addr)\n {\n   win_info->horizontal_offset = 0;\n-  tui_update_source_window_as_is (win_info, gdbarch, s, line_or_addr);\n+  win_info->update_source_window_as_is (gdbarch, s, line_or_addr);\n }\n \n \n /* Function to display source in the source/asm window.  This function\n    shows the source as specified by the horizontal offset.  */\n void\n-tui_update_source_window_as_is (struct tui_source_window_base *win_info, \n-\t\t\t\tstruct gdbarch *gdbarch,\n-\t\t\t\tstruct symtab *s,\n-\t\t\t\tstruct tui_line_or_address line_or_addr)\n+tui_source_window_base::update_source_window_as_is\n+  (struct gdbarch *gdbarch,\n+   struct symtab *s,\n+   struct tui_line_or_address line_or_addr)\n {\n   enum tui_status ret;\n \n-  if (win_info->type == SRC_WIN)\n-    ret = tui_set_source_content (win_info, s, line_or_addr.u.line_no);\n+  if (type == SRC_WIN)\n+    ret = tui_set_source_content (this, s, line_or_addr.u.line_no);\n   else\n-    ret = tui_set_disassem_content (win_info, gdbarch, line_or_addr.u.addr);\n+    ret = tui_set_disassem_content (this, gdbarch, line_or_addr.u.addr);\n \n   if (ret == TUI_FAILURE)\n-    win_info->erase_source_content ();\n+    erase_source_content ();\n   else\n     {\n-      tui_update_breakpoint_info (win_info, nullptr, false);\n-      win_info->show_source_content ();\n-      win_info->update_exec_info ();\n-      if (win_info->type == SRC_WIN)\n+      tui_update_breakpoint_info (this, nullptr, false);\n+      show_source_content ();\n+      update_exec_info ();\n+      if (type == SRC_WIN)\n \t{\n \t  symtab_and_line sal;\n \n-\t  sal.line = line_or_addr.u.line_no +\n-\t    (win_info->content.size () - 2);\n+\t  sal.line = line_or_addr.u.line_no + (content.size () - 2);\n \t  sal.symtab = s;\n \t  sal.pspace = SYMTAB_PSPACE (s);\n \t  set_current_source_symtab_and_line (sal);\n \t  /* If the focus was in the asm win, put it in the src win if\n \t     we don't have a split layout.  */\n \t  if (tui_win_with_focus () == TUI_DISASM_WIN\n \t      && tui_current_layout () != SRC_DISASSEM_COMMAND)\n-\t    tui_set_win_focus_to (win_info);\n+\t    tui_set_win_focus_to (this);\n \t}\n     }\n }\n@@ -387,8 +386,7 @@ tui_source_window_base::refill ()\n \t   : cursal.symtab);\n     }\n \n-  tui_update_source_window_as_is (this, gdbarch, s,\n-\t\t\t\t  content[0].line_or_addr);\n+  update_source_window_as_is (gdbarch, s, content[0].line_or_addr);\n }\n \n /* Scroll the source forward or backward horizontally.  */"
    },
    {
      "sha": "ebc50e71e036480a0ff0f9618557424b375d5117",
      "filename": "gdb/tui/tui-winsource.h",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-winsource.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ed8358e9491d5ae0a8ee021c162a85867af1146a/gdb/tui/tui-winsource.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-winsource.h?ref=ed8358e9491d5ae0a8ee021c162a85867af1146a",
      "patch": "@@ -135,6 +135,10 @@ struct tui_source_window_base : public tui_win_info\n   virtual void maybe_update (struct frame_info *fi, symtab_and_line sal,\n \t\t\t     int line_no, CORE_ADDR addr) = 0;\n \n+  void update_source_window_as_is  (struct gdbarch *gdbarch,\n+\t\t\t\t    struct symtab *s,\n+\t\t\t\t    struct tui_line_or_address line_or_addr);\n+\n   /* Erase the source content.  */\n   virtual void erase_source_content () = 0;\n \n@@ -246,9 +250,6 @@ extern void tui_display_main (void);\n extern void tui_update_source_window (struct tui_source_window_base *, \n \t\t\t\t      struct gdbarch *, struct symtab *,\n \t\t\t\t      struct tui_line_or_address);\n-extern void tui_update_source_window_as_is (struct tui_source_window_base *,\n-\t\t\t\t\t    struct gdbarch *, struct symtab *,\n-\t\t\t\t\t    struct tui_line_or_address);\n extern void tui_update_source_windows_with_addr (struct gdbarch *, CORE_ADDR);\n extern void tui_update_source_windows_with_line (struct symtab *, \n \t\t\t\t\t\t int);"
    }
  ]
}