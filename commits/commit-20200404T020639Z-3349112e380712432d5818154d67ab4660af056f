{
  "sha": "3349112e380712432d5818154d67ab4660af056f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzM0OTExMmUzODA3MTI0MzJkNTgxODE1NGQ2N2FiNDY2MGFmMDU2Zg==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-04-04T02:06:29Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-04-04T02:06:39Z"
    },
    "message": "elf: Remove zero-sized relocation section from section group\n\nRemove zero-sized relocation section from a section group since it has\nbeen removed from the output.\n\n\tPR ld/25767\n\t* elf.c (_bfd_elf_fixup_group_sections): Remove zero-sized\n\trelocation section from section group.",
    "tree": {
      "sha": "04ce7cebccd34983b3ae6545ffd161eba5e26c33",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/04ce7cebccd34983b3ae6545ffd161eba5e26c33"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3349112e380712432d5818154d67ab4660af056f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3349112e380712432d5818154d67ab4660af056f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3349112e380712432d5818154d67ab4660af056f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3349112e380712432d5818154d67ab4660af056f/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2612e26d4de95531627016c596fbc90d4517906c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2612e26d4de95531627016c596fbc90d4517906c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2612e26d4de95531627016c596fbc90d4517906c"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 32,
    "deletions": 11
  },
  "files": [
    {
      "sha": "57cf0f139c9fce70cbca7adb02aed037284b60da",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3349112e380712432d5818154d67ab4660af056f/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3349112e380712432d5818154d67ab4660af056f/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=3349112e380712432d5818154d67ab4660af056f",
      "patch": "@@ -1,3 +1,9 @@\n+2020-04-03  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/25767\n+\t* elf.c (_bfd_elf_fixup_group_sections): Remove zero-sized\n+\trelocation section from section group.\n+\n 2020-04-02  Jan W. Jagersma  <jwjagersma@gmail.com>\n \n \t* bfdio.c (bfd_bread, bfd_tell, bfd_seek, bfd_mmap): Always add"
    },
    {
      "sha": "1780074f5ab89139b2f1b833c0862e0bb1d0af18",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 26,
      "deletions": 11,
      "changes": 37,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3349112e380712432d5818154d67ab4660af056f/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3349112e380712432d5818154d67ab4660af056f/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=3349112e380712432d5818154d67ab4660af056f",
      "patch": "@@ -7929,19 +7929,34 @@ _bfd_elf_fixup_group_sections (bfd *ibfd, asection *discarded)\n \t\telf_section_flags (s->output_section) &= ~SHF_GROUP;\n \t\telf_group_name (s->output_section) = NULL;\n \t      }\n-\t    /* Conversely, if the member section is not being output\n-\t       but the SHT_GROUP section is, then adjust its size.  */\n-\t    else if (s->output_section == discarded\n-\t\t     && isec->output_section != discarded)\n+\t    else\n \t      {\n \t\tstruct bfd_elf_section_data *elf_sec = elf_section_data (s);\n-\t\tremoved += 4;\n-\t\tif (elf_sec->rel.hdr != NULL\n-\t\t    && (elf_sec->rel.hdr->sh_flags & SHF_GROUP) != 0)\n-\t\t  removed += 4;\n-\t\tif (elf_sec->rela.hdr != NULL\n-\t\t    && (elf_sec->rela.hdr->sh_flags & SHF_GROUP) != 0)\n-\t\t  removed += 4;\n+\t\tif (s->output_section == discarded\n+\t\t    && isec->output_section != discarded)\n+\t\t  {\n+\t\t    /* Conversely, if the member section is not being\n+\t\t       output but the SHT_GROUP section is, then adjust\n+\t\t       its size.  */\n+\t\t    removed += 4;\n+\t\t    if (elf_sec->rel.hdr != NULL\n+\t\t\t&& (elf_sec->rel.hdr->sh_flags & SHF_GROUP) != 0)\n+\t\t      removed += 4;\n+\t\t    if (elf_sec->rela.hdr != NULL\n+\t\t\t&& (elf_sec->rela.hdr->sh_flags & SHF_GROUP) != 0)\n+\t\t      removed += 4;\n+\t\t  }\n+\t\telse\n+\t\t  {\n+\t\t    /* Also adjust for zero-sized relocation member\n+\t\t       section.  */\n+\t\t    if (elf_sec->rel.hdr != NULL\n+\t\t\t&& elf_sec->rel.hdr->sh_size == 0)\n+\t\t      removed += 4;\n+\t\t    if (elf_sec->rela.hdr != NULL\n+\t\t\t&& elf_sec->rela.hdr->sh_size == 0)\n+\t\t      removed += 4;\n+\t\t  }\n \t      }\n \t    s = elf_next_in_group (s);\n \t    if (s == first)"
    }
  ]
}