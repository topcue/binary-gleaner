{
  "sha": "8cd6d968de17f5dac1601d7cbdda838c9d82c822",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OGNkNmQ5NjhkZTE3ZjVkYWMxNjAxZDdjYmRkYTgzOGM5ZDgyYzgyMg==",
  "commit": {
    "author": {
      "name": "Mark Wielaard",
      "email": "mark@klomp.org",
      "date": "2020-12-14T19:00:50Z"
    },
    "committer": {
      "name": "Mark Wielaard",
      "email": "mark@klomp.org",
      "date": "2020-12-14T21:06:30Z"
    },
    "message": "Add form used for SPECIAL_expr as comment in testsuite Dwarf Assembler\n\nReplace the \"SPECIAL_expr\" comment with either \"DW_FORM_block\" or\n\"DW_FORM_exprloc\" in the abbrev.\n\ngdb/testsuite/ChangeLog:\n\n\t* lib/dwarf.exp (Dwarf::_handle_attribute): Handle SPECIAL_expr\n\tspecially, set attr_form_comment to the actual FORM string used.",
    "tree": {
      "sha": "bd39ce171f28c4a179d98b1b7c8c42f7f02daf22",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bd39ce171f28c4a179d98b1b7c8c42f7f02daf22"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8cd6d968de17f5dac1601d7cbdda838c9d82c822",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8cd6d968de17f5dac1601d7cbdda838c9d82c822",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8cd6d968de17f5dac1601d7cbdda838c9d82c822",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8cd6d968de17f5dac1601d7cbdda838c9d82c822/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "eab9267c330046846aa15217da7dcb77f4588220",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eab9267c330046846aa15217da7dcb77f4588220",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/eab9267c330046846aa15217da7dcb77f4588220"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 16,
    "deletions": 1
  },
  "files": [
    {
      "sha": "8206b3e35cc6a08547342e5f5b451cb559a7a7b9",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8cd6d968de17f5dac1601d7cbdda838c9d82c822/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8cd6d968de17f5dac1601d7cbdda838c9d82c822/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=8cd6d968de17f5dac1601d7cbdda838c9d82c822",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-14  Mark Wielaard  <mark@klomp.org>\n+\n+\t* lib/dwarf.exp (Dwarf::_handle_attribute): Handle SPECIAL_expr\n+\tspecially, set attr_form_comment to the actual FORM string used.\n+\n 2020-12-14  Mark Wielaard  <mark@klomp.org>\n \n \t* lib/dwarf.exp (Dwarf::_read_constants): Don't set"
    },
    {
      "sha": "5afb3e3e736a2217191ba399f551ff202718c8e3",
      "filename": "gdb/testsuite/lib/dwarf.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 1,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8cd6d968de17f5dac1601d7cbdda838c9d82c822/gdb/testsuite/lib/dwarf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8cd6d968de17f5dac1601d7cbdda838c9d82c822/gdb/testsuite/lib/dwarf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/dwarf.exp?ref=8cd6d968de17f5dac1601d7cbdda838c9d82c822",
      "patch": "@@ -622,12 +622,22 @@ namespace eval Dwarf {\n     proc _handle_attribute { attr_name attr_value attr_form } {\n \tvariable _abbrev_section\n \tvariable _constants\n+\tvariable _cu_version\n \n \t_handle_DW_FORM $attr_form $attr_value\n \n \t_defer_output $_abbrev_section {\n+\t    if { $attr_form eq \"SPECIAL_expr\" } {\n+\t\tif { $_cu_version < 4 } {\n+\t\t    set attr_form_comment \"DW_FORM_block\"\n+\t\t} else {\n+\t\t    set attr_form_comment \"DW_FORM_exprloc\"\n+\t\t}\n+\t    } else {\n+\t\tset attr_form_comment $attr_form\n+\t    }\n \t    _op .uleb128 $_constants($attr_name) $attr_name\n-\t    _op .uleb128 $_constants($attr_form) $attr_form\n+\t    _op .uleb128 $_constants($attr_form) $attr_form_comment\n \t}\n     }\n "
    }
  ]
}