{
  "sha": "54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTRlNjZkMTZlODgwZjg0YTU2Y2FmMWZkNGFjOWE1ZmZjMzU2OGJjMw==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-28T03:19:06Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-29T06:00:29Z"
    },
    "message": "sim: callback: drop unused printf helpers\n\nThese cover functions aren't used anywhere, so drop them.  There was\none caller, but it's old DOS code that most likely hasn't been tested\nin years, so just delete that too.",
    "tree": {
      "sha": "7ab4c200051387b8cb3d23e9f8e58ae7130e3e50",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7ab4c200051387b8cb3d23e9f8e58ae7130e3e50"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1fb164a112015fc79ee6aa71102e8409c8172f77",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1fb164a112015fc79ee6aa71102e8409c8172f77",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1fb164a112015fc79ee6aa71102e8409c8172f77"
    }
  ],
  "stats": {
    "total": 74,
    "additions": 8,
    "deletions": 66
  },
  "files": [
    {
      "sha": "594994ab27129901c74494183a87726bc171006b",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
      "patch": "@@ -1,3 +1,9 @@\n+2021-06-29  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* callback.c (sim_cb_printf, sim_cb_eprintf): Delete.\n+\t(os_poll_quit): Delete __GO32__ support.\n+\t* sim-utils.h (sim_cb_printf, sim_cb_eprintf): Delete.\n+\n 2021-06-29  Mike Frysinger  <vapier@gentoo.org>\n \n \t* cgen-types.h (HAVE_LONGLONG): Delete define."
    },
    {
      "sha": "f773de1c19f0dbfa6ec17f782611a237d1ea844e",
      "filename": "sim/common/callback.c",
      "status": "modified",
      "additions": 2,
      "deletions": 59,
      "changes": 61,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/callback.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/callback.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/callback.c?ref=54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
      "patch": "@@ -49,12 +49,6 @@\n #define PIPE_BUF 512\n #endif\n \n-/* ??? sim_cb_printf should be cb_printf, but until the callback support is\n-   broken out of the simulator directory, these are here to not require\n-   sim-utils.h.  */\n-void sim_cb_printf (host_callback *, const char *, ...);\n-void sim_cb_eprintf (host_callback *, const char *, ...);\n-\n extern CB_TARGET_DEFS_MAP cb_init_syscall_map[];\n extern CB_TARGET_DEFS_MAP cb_init_errno_map[];\n extern CB_TARGET_DEFS_MAP cb_init_signal_map[];\n@@ -148,43 +142,21 @@ os_close (host_callback *p, int fd)\n /* taken from gdb/util.c:notice_quit() - should be in a library */\n \n \n-#if defined(__GO32__) || defined (_MSC_VER)\n+#if defined(_MSC_VER)\n static int\n os_poll_quit (host_callback *p)\n {\n-#if defined(__GO32__)\n-  int kbhit ();\n-  int getkey ();\n-  if (kbhit ())\n-    {\n-      int k = getkey ();\n-      if (k == 1)\n-\t{\n-\t  return 1;\n-\t}\n-      else if (k == 2)\n-\t{\n-\t  return 1;\n-\t}\n-      else\n-\t{\n-\t  sim_cb_eprintf (p, \"CTRL-A to quit, CTRL-B to quit harder\\n\");\n-\t}\n-    }\n-#endif\n-#if defined (_MSC_VER)\n   /* NB - this will not compile! */\n   int k = win32pollquit ();\n   if (k == 1)\n     return 1;\n   else if (k == 2)\n     return 1;\n-#endif\n   return 0;\n }\n #else\n #define os_poll_quit 0\n-#endif /* defined(__GO32__) || defined(_MSC_VER) */\n+#endif /* defined(_MSC_VER) */\n \n static int\n os_get_errno (host_callback *p)\n@@ -1078,35 +1050,6 @@ cb_host_to_target_stat (host_callback *cb, const struct stat *hs, void *ts)\n   return p - (char *) ts;\n }\n \f\n-/* Cover functions to the vfprintf callbacks.\n-\n-   ??? If one thinks of the callbacks as a subsystem onto itself [or part of\n-   a larger \"remote target subsystem\"] with a well defined interface, then\n-   one would think that the subsystem would provide these.  However, until\n-   one is allowed to create such a subsystem (with its own source tree\n-   independent of any particular user), such a critter can't exist.  Thus\n-   these functions are here for the time being.  */\n-\n-void\n-sim_cb_printf (host_callback *p, const char *fmt, ...)\n-{\n-  va_list ap;\n-\n-  va_start (ap, fmt);\n-  p->vprintf_filtered (p, fmt, ap);\n-  va_end (ap);\n-}\n-\n-void\n-sim_cb_eprintf (host_callback *p, const char *fmt, ...)\n-{\n-  va_list ap;\n-\n-  va_start (ap, fmt);\n-  p->evprintf_filtered (p, fmt, ap);\n-  va_end (ap);\n-}\n-\n int\n cb_is_stdin (host_callback *cb, int fd)\n {"
    },
    {
      "sha": "1af4ea206b82f5f5106f50c87aaf5488f38c9801",
      "filename": "sim/common/sim-utils.h",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/sim-utils.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3/sim/common/sim-utils.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-utils.h?ref=54e66d16e880f84a56caf1fd4ac9a5ffc3568bc3",
      "patch": "@@ -73,13 +73,6 @@ void sim_do_commandf (SIM_DESC sd, const char *fmt, ...)\n     ATTRIBUTE_PRINTF (2, 3);\n \n \n-/* These are defined in callback.c as cover functions to the vprintf\n-   callbacks.  */\n-\n-void sim_cb_printf (host_callback *, const char *, ...);\n-void sim_cb_eprintf (host_callback *, const char *, ...);\n-\n-\n /* sim-basics.h defines a number of enumerations, convert each of them\n    to a string representation */\n const char *map_to_str (unsigned map);"
    }
  ]
}