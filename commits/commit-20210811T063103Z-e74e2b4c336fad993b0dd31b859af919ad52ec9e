{
  "sha": "e74e2b4c336fad993b0dd31b859af919ad52ec9e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTc0ZTJiNGMzMzZmYWQ5OTNiMGRkMzFiODU5YWY5MTlhZDUyZWM5ZQ==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-08-11T06:31:03Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-08-11T06:31:03Z"
    },
    "message": "x86/ELF: fix .ds.x output\n\nThe ELF psABI-s are quite clear here: On 32-bit the underlying data type\nis 12 bytes long (with 2 bytes of trailing padding), while on 64-bit it\nis 16 bytes long (with 6 bytes of padding). Make s_space() capable of\nhandling 'x' (and 'p') type floating point being other than 12 bytes\nwide (also adjusting documentation). This requires duplicating the\ndefinition of X_PRECISION in the target speciifc header; the compiler\nwould complain if this was out of sync with config/atof-ieee.c.\n\nNote that for now padding space doesn't get separated from actual\nstorage, which means that things will work correctly only for little-\nendian cases, and which also means that by specifying large enough\nnumbers padding space can be set to non-zero. Since the logic is needed\nfor a single little-endian architecture only for now, I'm hoping that\nthis might be acceptable for the time being; otherwise the change will\nbecome more intrusive.\n\nNote also that this brings the emitted data size of .ds.x vs .tfloat in\nline for non-ELF targets as well; the issue will be even more obvious\nwhen further taking into account a subsequent patch fixing .dc.x/.dcb.x\n(where output sizes currently differ depending on input format).\n\nExtend existing x86 testcases.",
    "tree": {
      "sha": "d2da95940234a9ed70a44738a018f4ee2919bd53",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d2da95940234a9ed70a44738a018f4ee2919bd53"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e74e2b4c336fad993b0dd31b859af919ad52ec9e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e74e2b4c336fad993b0dd31b859af919ad52ec9e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e74e2b4c336fad993b0dd31b859af919ad52ec9e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e74e2b4c336fad993b0dd31b859af919ad52ec9e/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e2295dade838ad296e1e1cd1096177058139b6b3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e2295dade838ad296e1e1cd1096177058139b6b3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e2295dade838ad296e1e1cd1096177058139b6b3"
    }
  ],
  "stats": {
    "total": 45,
    "additions": 38,
    "deletions": 7
  },
  "files": [
    {
      "sha": "2dc6312f28eb86ca6ef5d25e03a701184a1da22c",
      "filename": "gas/config/tc-i386.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/config/tc-i386.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/config/tc-i386.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.h?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -134,6 +134,7 @@ extern bfd_reloc_code_real_type x86_cons (expressionS *, int);\n extern void x86_cons_fix_new\n (fragS *, unsigned int, unsigned int, expressionS *, bfd_reloc_code_real_type);\n \n+#define X_PRECISION     5\n #define X_PRECISION_PAD x86_tfloat_pad ()\n extern int x86_tfloat_pad (void);\n "
    },
    {
      "sha": "b8d5b9be15e8a23ff1d2020121d242e5e2a069aa",
      "filename": "gas/doc/as.texi",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/doc/as.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/doc/as.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/as.texi?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -5125,13 +5125,13 @@ Emits 8-byte values.\n @item @samp{.l}\n Emits 4-byte values.\n @item @samp{.p}\n-Emits 12-byte values.\n+Emits values with size matching packed-decimal floating-point ones.\n @item @samp{.s}\n Emits 4-byte values.\n @item @samp{.w}\n Emits 2-byte values.\n @item @samp{.x}\n-Emits 12-byte values.\n+Emits values with size matching long double precision floating-point ones.\n @end table\n \n Note - unlike the @code{.dcb} directive the @samp{.d}, @samp{.s} and @samp{.x}"
    },
    {
      "sha": "6bba696cebca1ba38f61ae627e7bd5d76034f585",
      "filename": "gas/read.c",
      "status": "modified",
      "additions": 25,
      "deletions": 2,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/read.c?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -382,10 +382,10 @@ static const pseudo_typeS potable[] = {\n   {\"ds.b\", s_space, 1},\n   {\"ds.d\", s_space, 8},\n   {\"ds.l\", s_space, 4},\n-  {\"ds.p\", s_space, 12},\n+  {\"ds.p\", s_space, 'p'},\n   {\"ds.s\", s_space, 4},\n   {\"ds.w\", s_space, 2},\n-  {\"ds.x\", s_space, 12},\n+  {\"ds.x\", s_space, 'x'},\n   {\"debug\", s_ignore, 0},\n #ifdef S_SET_DESC\n   {\"desc\", s_desc, 0},\n@@ -3327,6 +3327,29 @@ s_space (int mult)\n   md_flush_pending_output ();\n #endif\n \n+  switch (mult)\n+    {\n+    case 'x':\n+#ifdef X_PRECISION\n+# ifndef P_PRECISION\n+#  define P_PRECISION     X_PRECISION\n+#  define P_PRECISION_PAD X_PRECISION_PAD\n+# endif\n+      mult = (X_PRECISION + X_PRECISION_PAD) * sizeof (LITTLENUM_TYPE);\n+      if (!mult)\n+#endif\n+\tmult = 12;\n+      break;\n+\n+    case 'p':\n+#ifdef P_PRECISION\n+      mult = (P_PRECISION + P_PRECISION_PAD) * sizeof (LITTLENUM_TYPE);\n+      if (!mult)\n+#endif\n+\tmult = 12;\n+      break;\n+    }\n+\n #ifdef md_cons_align\n   md_cons_align (1);\n #endif"
    },
    {
      "sha": "9e1254615ecab975a01c2d830ea663c24418e971",
      "filename": "gas/testsuite/gas/i386/fp-elf32.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp-elf32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp-elf32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp-elf32.d?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -9,4 +9,5 @@ Contents of section .data:\n  0010 4f930a40 789a5440 789a5440 00000000  .*\n  0020 e65e1710 20395e3b e65e1710 20395e3b  .*\n  0030 00000000 0000a044 01000000 0000a044  .*\n- 0040 00000000 0000f03f .*\n+ 0040 00000000 0000f03f 00000000 00000000  .*\n+ 0050 ffffffff ffffffff ffffffff cccccccc  .*"
    },
    {
      "sha": "0314929cf9c72aae7b32af5e18686c7b98f6a9a5",
      "filename": "gas/testsuite/gas/i386/fp-elf64.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp-elf64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp-elf64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp-elf64.d?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -9,4 +9,5 @@ Contents of section .data:\n  0010 71a37909 4f930a40 789a5440 789a5440  .*\n  0020 e65e1710 20395e3b e65e1710 20395e3b  .*\n  0030 00000000 0000a044 01000000 0000a044  .*\n- 0040 00000000 0000f03f .*\n+ 0040 00000000 0000f03f 00000000 00000000  .*\n+ 0050 ffffffff ffffffff ffffffff ffffffff  .*"
    },
    {
      "sha": "dd7e028b44bc35481078d4798aa6426fc862642d",
      "filename": "gas/testsuite/gas/i386/fp.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.d?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -8,4 +8,5 @@ Contents of section .data:\n  0010 0a40789a 5440789a 54400000 00000000  .*\n  0020 e65e1710 20395e3b e65e1710 20395e3b  .*\n  0030 00000000 0000a044 01000000 0000a044  .*\n- 0040 00000000 0000f03f .*\n+ 0040 00000000 0000f03f 00000000 00000000  .*\n+ 0050 ffffffff ffffffff ffffcccc cccccccc  .*"
    },
    {
      "sha": "601709c219695d733cbecd2c2346fc3c71279820",
      "filename": "gas/testsuite/gas/i386/fp.s",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e74e2b4c336fad993b0dd31b859af919ad52ec9e/gas/testsuite/gas/i386/fp.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.s?ref=e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "patch": "@@ -20,3 +20,7 @@\n \t.double 37778931862957165903873.0\n # Ensure we handle a crazy number of digits\n \t.double 1.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001\n+\t.p2align 4,0\n+\n+\t.ds.x 1, -1\n+\t.p2align 4,0xcc"
    }
  ]
}