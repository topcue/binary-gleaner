{
  "sha": "f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
  "node_id": "C_kwDOANOeidoAKGY2YjNhZDU0NDA2MzMxNGExZTdmY2FhNzAzYjVlMjlmNWZmMTA3ODA",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2022-02-15T16:04:01Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2022-02-18T19:58:35Z"
    },
    "message": "Add constructor to bound_minimal_symbol\n\nThis adds a constructor to bound_minimal_symbol, to avoid a build\nfailure with clang that Simon pointed out.\n\nI also took the opportunity to remove some redundant initializations,\nand to change one use of push_back to emplace_back, as suggested by\nSimon.",
    "tree": {
      "sha": "b0cf39c005a3e84857d0356a09770b370de86e9e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b0cf39c005a3e84857d0356a09770b370de86e9e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5c14cc552d3b5c0dddb17c2f81ca8af137b0b254",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5c14cc552d3b5c0dddb17c2f81ca8af137b0b254",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5c14cc552d3b5c0dddb17c2f81ca8af137b0b254"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 20,
    "deletions": 13
  },
  "files": [
    {
      "sha": "a3cfeea6989aa0c1ae6fb50ace7e21d384bac2de",
      "filename": "gdb/breakpoint.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/breakpoint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/breakpoint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/breakpoint.c?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -3171,10 +3171,10 @@ static const char *const longjmp_names[] =\n struct breakpoint_objfile_data\n {\n   /* Minimal symbol for \"_ovly_debug_event\" (if any).  */\n-  struct bound_minimal_symbol overlay_msym {};\n+  struct bound_minimal_symbol overlay_msym;\n \n   /* Minimal symbol(s) for \"longjmp\", \"siglongjmp\", etc. (if any).  */\n-  struct bound_minimal_symbol longjmp_msym[NUM_LONGJMP_NAMES] {};\n+  struct bound_minimal_symbol longjmp_msym[NUM_LONGJMP_NAMES];\n \n   /* True if we have looked for longjmp probes.  */\n   int longjmp_searched = 0;\n@@ -3184,10 +3184,10 @@ struct breakpoint_objfile_data\n   std::vector<probe *> longjmp_probes;\n \n   /* Minimal symbol for \"std::terminate()\" (if any).  */\n-  struct bound_minimal_symbol terminate_msym {};\n+  struct bound_minimal_symbol terminate_msym;\n \n   /* Minimal symbol for \"_Unwind_DebugHook\" (if any).  */\n-  struct bound_minimal_symbol exception_msym {};\n+  struct bound_minimal_symbol exception_msym;\n \n   /* True if we have looked for exception probes.  */\n   int exception_searched = 0;"
    },
    {
      "sha": "760cb1bea13f23e0b619b2dc3629abd7ab82bd40",
      "filename": "gdb/hppa-tdep.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/hppa-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/hppa-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/hppa-tdep.c?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -2531,7 +2531,7 @@ struct bound_minimal_symbol\n hppa_lookup_stub_minimal_symbol (const char *name,\n \t\t\t\t enum unwind_stub_types stub_type)\n {\n-  struct bound_minimal_symbol result = { NULL, NULL };\n+  struct bound_minimal_symbol result;\n \n   for (objfile *objfile : current_program_space->objfiles ())\n     {"
    },
    {
      "sha": "707a3a2586a2ce6d80e5d2f607119befacb78acd",
      "filename": "gdb/linespec.c",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/linespec.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/linespec.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/linespec.c?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -4273,8 +4273,7 @@ add_minsym (struct minimal_symbol *minsym, struct objfile *objfile,\n   if (!list_mode && !msymbol_is_function (objfile, minsym))\n     return;\n \n-  struct bound_minimal_symbol mo = {minsym, objfile};\n-  msyms->push_back (mo);\n+  msyms->emplace_back (minsym, objfile);\n   return;\n }\n "
    },
    {
      "sha": "4eab8daabeccc05fdafdabf2223912bc784b3a2a",
      "filename": "gdb/minsyms.c",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/minsyms.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/minsyms.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/minsyms.c?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -230,13 +230,13 @@ add_minsym_to_demangled_hash_table (struct minimal_symbol *sym,\n struct found_minimal_symbols\n {\n   /* External symbols are best.  */\n-  bound_minimal_symbol external_symbol {};\n+  bound_minimal_symbol external_symbol;\n \n   /* File-local symbols are next best.  */\n-  bound_minimal_symbol file_symbol {};\n+  bound_minimal_symbol file_symbol;\n \n   /* Symbols for shared library trampolines are next best.  */\n-  bound_minimal_symbol trampoline_symbol {};\n+  bound_minimal_symbol trampoline_symbol;\n \n   /* Called when a symbol name matches.  Check if the minsym is a\n      better type than what we had already found, and record it in one\n@@ -601,8 +601,8 @@ struct bound_minimal_symbol\n lookup_minimal_symbol_text (const char *name, struct objfile *objf)\n {\n   struct minimal_symbol *msymbol;\n-  struct bound_minimal_symbol found_symbol = { NULL, NULL };\n-  struct bound_minimal_symbol found_file_symbol = { NULL, NULL };\n+  struct bound_minimal_symbol found_symbol;\n+  struct bound_minimal_symbol found_file_symbol;\n \n   unsigned int hash = msymbol_hash (name) % MINIMAL_SYMBOL_HASH_SIZE;\n "
    },
    {
      "sha": "519702494ed57f11d6b07e7646743fdf91ed9a60",
      "filename": "gdb/minsyms.h",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/minsyms.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/minsyms.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/minsyms.h?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -28,6 +28,14 @@ struct type;\n \n struct bound_minimal_symbol\n {\n+  bound_minimal_symbol (struct minimal_symbol *msym, struct objfile *objf)\n+    : minsym (msym),\n+      objfile (objf)\n+  {\n+  }\n+\n+  bound_minimal_symbol () = default;\n+\n   /* The minimal symbol that was found, or NULL if no minimal symbol\n      was found.  */\n "
    },
    {
      "sha": "2aa1d18fed30a63e088d06526c714b1ef2489e54",
      "filename": "gdb/psymtab.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/psymtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b3ad544063314a1e7fcaa703b5e29f5ff10780/gdb/psymtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/psymtab.c?ref=f6b3ad544063314a1e7fcaa703b5e29f5ff10780",
      "patch": "@@ -1577,7 +1577,7 @@ maintenance_print_psymbols (const char *args, int from_tty)\n \n \t  if (address_arg != NULL)\n \t    {\n-\t      struct bound_minimal_symbol msymbol = { NULL, NULL };\n+\t      struct bound_minimal_symbol msymbol;\n \n \t      /* We don't assume each pc has a unique objfile (this is for\n \t\t debugging).  */"
    }
  ]
}