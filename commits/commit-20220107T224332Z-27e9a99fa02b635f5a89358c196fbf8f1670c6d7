{
  "sha": "27e9a99fa02b635f5a89358c196fbf8f1670c6d7",
  "node_id": "C_kwDOANOeidoAKDI3ZTlhOTlmYTAyYjYzNWY1YTg5MzU4YzE5NmZiZjhmMTY3MGM2ZDc",
  "commit": {
    "author": {
      "name": "Lancelot SIX",
      "email": "lsix@lancelotsix.com",
      "date": "2021-11-19T19:55:05Z"
    },
    "committer": {
      "name": "Lancelot SIX",
      "email": "lsix@lancelotsix.com",
      "date": "2022-01-07T22:43:32Z"
    },
    "message": "gdb/testsuite: Remove duplicates from gdb.base/interp.exp\n\nWhen running the testsuite I have:\n\n    Running .../gdb/testsuite/gdb.base/interp.exp ...\n    DUPLICATE: gdb.base/interp.exp: interpreter-exec mi \"-var-update *\"\n\nThis is due to the fact that multiple successive instances of\ngdb_test_multiple use 'pass $cmd', but one of them forgets to reset $cmd\nto a new test name.\n\nFix by using 'pass $gdb_test_name', given that the gdb_test_name is set\nby gdb_test_multiple.\n\nWhile fixing this, this patch refactors all occurrences of the following\npattern:\n\n    set cmd foo\n    gdb_test_multiple $cmd $cmd {\n        -re ... {\n            pass $cmd\n        }\n    }\n\ninto\n\n    gdb_test_multiple foo \"\" {\n        -re ... {\n            pass $gdb_test_name\n         }\n    }\n\nThis makes this test file coherent in its use of $gdb_test_name.\n\nTested on x86_64-linux.",
    "tree": {
      "sha": "914fc931e3a94cb47c5015608fad8441885089e1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/914fc931e3a94cb47c5015608fad8441885089e1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/27e9a99fa02b635f5a89358c196fbf8f1670c6d7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/27e9a99fa02b635f5a89358c196fbf8f1670c6d7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/27e9a99fa02b635f5a89358c196fbf8f1670c6d7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/27e9a99fa02b635f5a89358c196fbf8f1670c6d7/comments",
  "author": {
    "login": "lsix",
    "id": 724339,
    "node_id": "MDQ6VXNlcjcyNDMzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/724339?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lsix",
    "html_url": "https://github.com/lsix",
    "followers_url": "https://api.github.com/users/lsix/followers",
    "following_url": "https://api.github.com/users/lsix/following{/other_user}",
    "gists_url": "https://api.github.com/users/lsix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lsix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lsix/subscriptions",
    "organizations_url": "https://api.github.com/users/lsix/orgs",
    "repos_url": "https://api.github.com/users/lsix/repos",
    "events_url": "https://api.github.com/users/lsix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lsix/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "lsix",
    "id": 724339,
    "node_id": "MDQ6VXNlcjcyNDMzOQ==",
    "avatar_url": "https://avatars.githubusercontent.com/u/724339?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lsix",
    "html_url": "https://github.com/lsix",
    "followers_url": "https://api.github.com/users/lsix/followers",
    "following_url": "https://api.github.com/users/lsix/following{/other_user}",
    "gists_url": "https://api.github.com/users/lsix/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lsix/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lsix/subscriptions",
    "organizations_url": "https://api.github.com/users/lsix/orgs",
    "repos_url": "https://api.github.com/users/lsix/repos",
    "events_url": "https://api.github.com/users/lsix/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lsix/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "aaff91fdf209a03c91a59681ca187c92d94826b8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aaff91fdf209a03c91a59681ca187c92d94826b8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/aaff91fdf209a03c91a59681ca187c92d94826b8"
    }
  ],
  "stats": {
    "total": 27,
    "additions": 11,
    "deletions": 16
  },
  "files": [
    {
      "sha": "f748ffd805075294e68ec6e0dad77e227ceb41d2",
      "filename": "gdb/testsuite/gdb.base/interp.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 16,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/27e9a99fa02b635f5a89358c196fbf8f1670c6d7/gdb/testsuite/gdb.base/interp.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/27e9a99fa02b635f5a89358c196fbf8f1670c6d7/gdb/testsuite/gdb.base/interp.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/interp.exp?ref=27e9a99fa02b635f5a89358c196fbf8f1670c6d7",
      "patch": "@@ -22,10 +22,9 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} $srcfile {debug}] } {\n }\n \n # Do not use gdb_test for this test, since it has two prompts.\n-set cmd \"interpreter-exec mi \\\"-var-update *\\\"\"\n-gdb_test_multiple $cmd $cmd {\n+gdb_test_multiple \"interpreter-exec mi \\\"-var-update *\\\"\" \"\" {\n     -re \"\\\\^done,changelist=\\\\\\[\\\\\\]\\r\\n$gdb_prompt \" {\n-\tpass \"$cmd\"\n+\tpass $gdb_test_name\n \tgdb_expect 1 {\n \t    -re \"\\r\\n$gdb_prompt $\" { }\n \t}\n@@ -37,47 +36,43 @@ gdb_test \"interpreter-exec console \\\"show version\\\"\" \"GNU gdb .*\"\n gdb_test_multiple \"interpreter-exec mi \\\"-break-insert --thread a\\\"\" \\\n     \"regression test for mi_parse crash\" {\n \t-re \".error,msg=.Invalid value for the '--thread' option.\\r\\n$gdb_prompt \" {\n-\t    pass \"$cmd\"\n+\t    pass $gdb_test_name\n \t    gdb_expect 1 {\n \t\t-re \"\\r\\n$gdb_prompt $\" { }\n \t    }\n \t}\n     }\n \n-set cmd \"interpreter-exec mi \\\"-stack-info-frame\\\"\"\n-gdb_test_multiple $cmd $cmd {\n+gdb_test_multiple \"interpreter-exec mi \\\"-stack-info-frame\\\"\" \"\" {\n     -re \".error,msg=.No registers\\..\\r\\n$gdb_prompt \" {\n-\tpass \"$cmd\"\n+\tpass $gdb_test_name\n \tgdb_expect 1 {\n \t    -re \"\\r\\n$gdb_prompt $\" { }\n \t}\n     }\n }\n \n-set cmd \"interpreter-exec mi1 \\\"-break-insert main\\\"\"\n-gdb_test_multiple $cmd $cmd {\n+gdb_test_multiple \"interpreter-exec mi1 \\\"-break-insert main\\\"\" \"\" {\n     -re \".done.bkpt=.number=.\\[0-9\\]\\[^\\n\\]+\\r\\n$gdb_prompt \" {\n-\tpass \"$cmd\"\n+\tpass $gdb_test_name\n \tgdb_expect 1 {\n \t    -re \"\\r\\n$gdb_prompt $\" { }\n \t}\n     }\n }\n \n-set cmd \"interpreter-exec mi2 \\\"-break-insert main\\\"\"\n-gdb_test_multiple $cmd $cmd {\n+gdb_test_multiple \"interpreter-exec mi2 \\\"-break-insert main\\\"\" \"\" {\n     -re \".done.bkpt=.number=.\\[0-9\\]\\[^\\n\\]+\\r\\n$gdb_prompt \" {\n-\tpass \"$cmd\"\n+\tpass $gdb_test_name\n \tgdb_expect 1 {\n \t    -re \"\\r\\n$gdb_prompt $\" { }\n \t}\n     }\n }\n \n-set cmd \"interpreter-exec mi3 \\\"-break-insert main\\\"\"\n-gdb_test_multiple $cmd $cmd {\n+gdb_test_multiple \"interpreter-exec mi3 \\\"-break-insert main\\\"\" \"\" {\n     -re \".done.bkpt=.number=.\\[0-9\\]\\[^\\n\\]+\\r\\n$gdb_prompt \" {\n-\tpass \"$cmd\"\n+\tpass $gdb_test_name\n \tgdb_expect 1 {\n \t    -re \"\\r\\n$gdb_prompt $\" { }\n \t}"
    }
  ]
}