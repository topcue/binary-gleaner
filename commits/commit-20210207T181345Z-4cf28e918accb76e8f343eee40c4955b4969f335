{
  "sha": "4cf28e918accb76e8f343eee40c4955b4969f335",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NGNmMjhlOTE4YWNjYjc2ZThmMzQzZWVlNDBjNDk1NWI0OTY5ZjMzNQ==",
  "commit": {
    "author": {
      "name": "Hannes Domani",
      "email": "ssbssa@yahoo.de",
      "date": "2021-01-05T16:29:02Z"
    },
    "committer": {
      "name": "Hannes Domani",
      "email": "ssbssa@yahoo.de",
      "date": "2021-02-07T18:13:45Z"
    },
    "message": "Don't draw register sub windows outside the visible area\n\nIf the regs window is not big enough to show all registers, the\nregisters whose values changed are always drawn, even if they are not\nin the currently visible area.\n\nSo this marks the invisible register sub windows with y=0, and skips\ntheir rerender call in check_register_values.\n\ngdb/ChangeLog:\n\n2021-02-07  Hannes Domani  <ssbssa@yahoo.de>\n\n\t* tui/tui-regs.c (tui_data_window::display_registers_from):\n\tMark invisible register sub windows.\n\t(tui_data_window::check_register_values): Ignore invisible\n\tregister sub windows.",
    "tree": {
      "sha": "54f64416934b44a48470c9d39047658bbaee5b22",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/54f64416934b44a48470c9d39047658bbaee5b22"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/4cf28e918accb76e8f343eee40c4955b4969f335",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4cf28e918accb76e8f343eee40c4955b4969f335",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/4cf28e918accb76e8f343eee40c4955b4969f335",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4cf28e918accb76e8f343eee40c4955b4969f335/comments",
  "author": {
    "login": "ssbssa",
    "id": 40947,
    "node_id": "MDQ6VXNlcjQwOTQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/40947?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ssbssa",
    "html_url": "https://github.com/ssbssa",
    "followers_url": "https://api.github.com/users/ssbssa/followers",
    "following_url": "https://api.github.com/users/ssbssa/following{/other_user}",
    "gists_url": "https://api.github.com/users/ssbssa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ssbssa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ssbssa/subscriptions",
    "organizations_url": "https://api.github.com/users/ssbssa/orgs",
    "repos_url": "https://api.github.com/users/ssbssa/repos",
    "events_url": "https://api.github.com/users/ssbssa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ssbssa/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "ssbssa",
    "id": 40947,
    "node_id": "MDQ6VXNlcjQwOTQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/40947?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ssbssa",
    "html_url": "https://github.com/ssbssa",
    "followers_url": "https://api.github.com/users/ssbssa/followers",
    "following_url": "https://api.github.com/users/ssbssa/following{/other_user}",
    "gists_url": "https://api.github.com/users/ssbssa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ssbssa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ssbssa/subscriptions",
    "organizations_url": "https://api.github.com/users/ssbssa/orgs",
    "repos_url": "https://api.github.com/users/ssbssa/repos",
    "events_url": "https://api.github.com/users/ssbssa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ssbssa/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3537bc23d960f961d66d36919049c0cc095c8a9c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3537bc23d960f961d66d36919049c0cc095c8a9c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3537bc23d960f961d66d36919049c0cc095c8a9c"
    }
  ],
  "stats": {
    "total": 21,
    "additions": 19,
    "deletions": 2
  },
  "files": [
    {
      "sha": "669aa2d08fc750b0364f958e27573954f147cbe8",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4cf28e918accb76e8f343eee40c4955b4969f335/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4cf28e918accb76e8f343eee40c4955b4969f335/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=4cf28e918accb76e8f343eee40c4955b4969f335",
      "patch": "@@ -1,3 +1,10 @@\n+2021-02-07  Hannes Domani  <ssbssa@yahoo.de>\n+\n+\t* tui/tui-regs.c (tui_data_window::display_registers_from):\n+\tMark invisible register sub windows.\n+\t(tui_data_window::check_register_values): Ignore invisible\n+\tregister sub windows.\n+\n 2021-02-07  Hannes Domani  <ssbssa@yahoo.de>\n \n \t* tui/tui-regs.c (tui_data_item_window::rerender): Don't call"
    },
    {
      "sha": "a9387368bbedf7776273aabeb106764358e0b947",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 12,
      "deletions": 2,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4cf28e918accb76e8f343eee40c4955b4969f335/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4cf28e918accb76e8f343eee40c4955b4969f335/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=4cf28e918accb76e8f343eee40c4955b4969f335",
      "patch": "@@ -281,7 +281,11 @@ tui_data_window::display_registers_from (int start_element_no)\n \tmax_len = len;\n     }\n   m_item_width = max_len + 1;\n-  int i = start_element_no;\n+\n+  int i;\n+  /* Mark register windows above the visible area.  */\n+  for (i = 0; i < start_element_no; i++)\n+    m_regs_content[i].y = 0;\n \n   m_regs_column_count = (width - 2) / m_item_width;\n   if (m_regs_column_count == 0)\n@@ -307,6 +311,10 @@ tui_data_window::display_registers_from (int start_element_no)\n       cur_y++;\t\t/* Next row.  */\n     }\n \n+  /* Mark register windows below the visible area.  */\n+  for (; i < m_regs_content.size (); i++)\n+    m_regs_content[i].y = 0;\n+\n   refresh_window ();\n }\n \n@@ -470,7 +478,9 @@ tui_data_window::check_register_values (struct frame_info *frame)\n \t\t\t    data_item_win.regno,\n \t\t\t    &data_item_win.highlight);\n \n-\t  if (data_item_win.highlight || was_hilighted)\n+\t  /* Register windows whose y == 0 are outside the visible area.  */\n+\t  if ((data_item_win.highlight || was_hilighted)\n+\t      && data_item_win.y > 0)\n \t    data_item_win.rerender (handle.get (), m_item_width);\n \t}\n     }"
    }
  ]
}