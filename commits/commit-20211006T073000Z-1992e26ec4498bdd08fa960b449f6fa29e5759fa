{
  "sha": "1992e26ec4498bdd08fa960b449f6fa29e5759fa",
  "node_id": "C_kwDOANOeidoAKDE5OTJlMjZlYzQ0OThiZGQwOGZhOTYwYjQ0OWY2ZmEyOWU1NzU5ZmE",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-10-06T07:01:31Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-10-06T07:30:00Z"
    },
    "message": "PR28420, ecoff fuzzing failures\n\n\tPR 28420\n\t* coff-mips.c (mips_adjust_reloc_in): Replace abort with error\n\tmessage and return.\n\t* ecoff.c (ecoff_slurp_reloc_table): Remove assertion and aborts,\n\tinstead handle errors gracefully.",
    "tree": {
      "sha": "49440bc552d0caffcc651333ac4a555157d1cc36",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/49440bc552d0caffcc651333ac4a555157d1cc36"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1992e26ec4498bdd08fa960b449f6fa29e5759fa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1992e26ec4498bdd08fa960b449f6fa29e5759fa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1992e26ec4498bdd08fa960b449f6fa29e5759fa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1992e26ec4498bdd08fa960b449f6fa29e5759fa/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1808483c2f3f323d8e0398282251a85cd956321b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1808483c2f3f323d8e0398282251a85cd956321b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1808483c2f3f323d8e0398282251a85cd956321b"
    }
  ],
  "stats": {
    "total": 45,
    "additions": 27,
    "deletions": 18
  },
  "files": [
    {
      "sha": "075dd0bdbae30f12224b993e6ad5b8df0000aaf6",
      "filename": "bfd/coff-mips.c",
      "status": "modified",
      "additions": 8,
      "deletions": 1,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1992e26ec4498bdd08fa960b449f6fa29e5759fa/bfd/coff-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1992e26ec4498bdd08fa960b449f6fa29e5759fa/bfd/coff-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/coff-mips.c?ref=1992e26ec4498bdd08fa960b449f6fa29e5759fa",
      "patch": "@@ -351,7 +351,14 @@ mips_adjust_reloc_in (bfd *abfd,\n \t\t      arelent *rptr)\n {\n   if (intern->r_type > MIPS_R_PCREL16)\n-    abort ();\n+    {\n+      /* xgettext:c-format */\n+      _bfd_error_handler (_(\"%pB: unsupported relocation type %#x\"),\n+\t\t\t  abfd, intern->r_type);\n+      bfd_set_error (bfd_error_bad_value);\n+      rptr->howto  = NULL;\n+      return;\n+    }\n \n   if (! intern->r_extern\n       && (intern->r_type == MIPS_R_GPREL"
    },
    {
      "sha": "7539fadbeca62fab598d532232b4cfb9f89d45c4",
      "filename": "bfd/ecoff.c",
      "status": "modified",
      "additions": 19,
      "deletions": 17,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1992e26ec4498bdd08fa960b449f6fa29e5759fa/bfd/ecoff.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1992e26ec4498bdd08fa960b449f6fa29e5759fa/bfd/ecoff.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ecoff.c?ref=1992e26ec4498bdd08fa960b449f6fa29e5759fa",
      "patch": "@@ -1606,23 +1606,20 @@ ecoff_slurp_reloc_table (bfd *abfd,\n       (*backend->swap_reloc_in) (abfd,\n \t\t\t\t external_relocs + i * external_reloc_size,\n \t\t\t\t &intern);\n+      rptr->sym_ptr_ptr = NULL;\n+      rptr->addend = 0;\n \n       if (intern.r_extern)\n \t{\n \t  /* r_symndx is an index into the external symbols.  */\n-\t  BFD_ASSERT (intern.r_symndx >= 0\n-\t\t      && (intern.r_symndx\n-\t\t\t  < (ecoff_data (abfd)\n-\t\t\t     ->debug_info.symbolic_header.iextMax)));\n-\t  rptr->sym_ptr_ptr = symbols + intern.r_symndx;\n-\t  rptr->addend = 0;\n+\t  if (intern.r_symndx >= 0\n+\t      && (intern.r_symndx\n+\t\t  < (ecoff_data (abfd)->debug_info.symbolic_header.iextMax)))\n+\t    rptr->sym_ptr_ptr = symbols + intern.r_symndx;\n \t}\n       else if (intern.r_symndx == RELOC_SECTION_NONE\n \t       || intern.r_symndx == RELOC_SECTION_ABS)\n-\t{\n-\t  rptr->sym_ptr_ptr = bfd_abs_section_ptr->symbol_ptr_ptr;\n-\t  rptr->addend = 0;\n-\t}\n+\trptr->sym_ptr_ptr = bfd_abs_section_ptr->symbol_ptr_ptr;\n       else\n \t{\n \t  const char *sec_name;\n@@ -1645,15 +1642,20 @@ ecoff_slurp_reloc_table (bfd *abfd,\n \t    case RELOC_SECTION_FINI:  sec_name = _FINI;  break;\n \t    case RELOC_SECTION_LITA:  sec_name = _LITA;  break;\n \t    case RELOC_SECTION_RCONST: sec_name = _RCONST; break;\n-\t    default: abort ();\n+\t    default:\n+\t      sec_name = NULL;\n+\t      break;\n \t    }\n \n-\t  sec = bfd_get_section_by_name (abfd, sec_name);\n-\t  if (sec == NULL)\n-\t    abort ();\n-\t  rptr->sym_ptr_ptr = sec->symbol_ptr_ptr;\n-\n-\t  rptr->addend = - bfd_section_vma (sec);\n+\t  if (sec_name != NULL)\n+\t    {\n+\t      sec = bfd_get_section_by_name (abfd, sec_name);\n+\t      if (sec != NULL)\n+\t\t{\n+\t\t  rptr->sym_ptr_ptr = sec->symbol_ptr_ptr;\n+\t\t  rptr->addend = - bfd_section_vma (sec);\n+\t\t}\n+\t    }\n \t}\n \n       rptr->address = intern.r_vaddr - bfd_section_vma (section);"
    }
  ]
}