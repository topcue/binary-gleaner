{
  "sha": "5593a99a95f8f86240c6d8583a52a3956c691dba",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTU5M2E5OWE5NWY4Zjg2MjQwYzZkODU4M2E1MmEzOTU2YzY5MWRiYQ==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-10-31T12:30:58Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-10-31T12:30:58Z"
    },
    "message": "gdb: modernize configure.ac\n\nRun autoupdate on configure.ac and adjust the indentation of the result\nfor better readability.  This removes a bunch of warnings when running\n`autoreconf -vf -Wall`.  The changes are:\n\n    * Replace AC_INIT with AC_INIT and no arguments plus\n      AC_CONFIG_SRCDIR.\n    * Replace AC_ERROR with AC_MSG_ERROR.\n    * Replace AC_TRY_LINK with AC_LINK_IFELSE.\n    * Replace AC_TRY_COMPILE with AC_COMPILE_IFELSE.\n    * Replace AC_HELP_STRING with AS_HELP_STRING.\n\nautoupdate erroneously tries to replace AC_C_LONG_DOUBLE in a comment,\nwhich I reverted manually.\n\nAll the changes in the generated configure file are insignificant\nwhitespaces changes.\n\ngdb/ChangeLog:\n\n\t* configure.ac: Modernize.\n\t* configure: Re-generate.\n\nChange-Id: Ie3a1409c8032a36a6383da964286a46ece9b546e",
    "tree": {
      "sha": "6fe77da7911d01fc03409a5830fb72751a1f1403",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6fe77da7911d01fc03409a5830fb72751a1f1403"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5593a99a95f8f86240c6d8583a52a3956c691dba",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5593a99a95f8f86240c6d8583a52a3956c691dba",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5593a99a95f8f86240c6d8583a52a3956c691dba",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5593a99a95f8f86240c6d8583a52a3956c691dba/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7e8c7130fe59473bcda83fca345907be7c43936b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7e8c7130fe59473bcda83fca345907be7c43936b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7e8c7130fe59473bcda83fca345907be7c43936b"
    }
  ],
  "stats": {
    "total": 489,
    "additions": 316,
    "deletions": 173
  },
  "files": [
    {
      "sha": "ba47a12ddfcab7b4949ce5cf160ce8badbcf3952",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=5593a99a95f8f86240c6d8583a52a3956c691dba",
      "patch": "@@ -1,3 +1,8 @@\n+2020-10-31  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* configure.ac: Modernize.\n+\t* configure: Re-generate.\n+\n 2020-10-31  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* acinclude.m4 (AM_PROG_CC_STDC): Remove."
    },
    {
      "sha": "5678deac68cc7e1cecaa1cd0fb984668fca3fdd8",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 77,
      "deletions": 41,
      "changes": 118,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=5593a99a95f8f86240c6d8583a52a3956c691dba",
      "patch": "@@ -2986,6 +2986,7 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+\n ac_config_headers=\"$ac_config_headers config.h:config.in\"\n \n \n@@ -7190,12 +7191,12 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdlib.h>\n-extern char _etext;\n-\n+\t extern char _etext;\n int\n main ()\n {\n free (&_etext);\n+\n   ;\n   return 0;\n }\n@@ -7204,9 +7205,11 @@ if ac_fn_c_try_link \"$LINENO\"; then :\n   ac_cv_var__etext=yes\n else\n   ac_cv_var__etext=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_var__etext\" >&5\n $as_echo \"$ac_cv_var__etext\" >&6; }\n@@ -7223,12 +7226,12 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdlib.h>\n-extern char etext;\n-\n+\t extern char etext;\n int\n main ()\n {\n free (&etext);\n+\n   ;\n   return 0;\n }\n@@ -7237,9 +7240,11 @@ if ac_fn_c_try_link \"$LINENO\"; then :\n   ac_cv_var_etext=yes\n else\n   ac_cv_var_etext=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_var_etext\" >&5\n $as_echo \"$ac_cv_var_etext\" >&6; }\n@@ -7276,8 +7281,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   ac_cv_cc_supports_pg=yes\n else\n   ac_cv_cc_supports_pg=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_cc_supports_pg\" >&5\n $as_echo \"$ac_cv_cc_supports_pg\" >&6; }\n@@ -9182,21 +9189,22 @@ fi\n \n \n if test \"$with_system_readline\" = yes; then\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether system readline is new enough\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether system readline is new enough\" >&5\n $as_echo_n \"checking whether system readline is new enough... \" >&6; }\n if ${gdb_cv_readline_ok+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <stdio.h>\n-#include <readline/readline.h>\n+\t   #include <readline/readline.h>\n int\n main ()\n {\n #if RL_VERSION_MAJOR < 7\n-# error \"readline version 7 required\"\n-#endif\n+\t   # error \"readline version 7 required\"\n+\t   #endif\n+\n   ;\n   return 0;\n }\n@@ -9205,8 +9213,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_readline_ok=yes\n else\n   gdb_cv_readline_ok=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_readline_ok\" >&5\n $as_echo \"$gdb_cv_readline_ok\" >&6; }\n@@ -10642,7 +10652,7 @@ fi\n \n \n       if test \"${python_prog_path}\" = missing; then\n-        as_fn_error $? \"unable to find python program ${python_prog}\" \"$LINENO\" 5\n+\tas_fn_error $? \"unable to find python program ${python_prog}\" \"$LINENO\" 5\n       fi\n       ;;\n     esac\n@@ -10656,21 +10666,21 @@ fi\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        as_fn_error $? \"failure running python-config --includes\" \"$LINENO\" 5\n+\tas_fn_error $? \"failure running python-config --includes\" \"$LINENO\" 5\n       fi\n     fi\n     python_libs=`${python_prog} ${srcdir}/python/python-config.py --ldflags`\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        as_fn_error $? \"failure running python-config --ldflags\" \"$LINENO\" 5\n+\tas_fn_error $? \"failure running python-config --ldflags\" \"$LINENO\" 5\n       fi\n     fi\n     python_prefix=`${python_prog} ${srcdir}/python/python-config.py --exec-prefix`\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        as_fn_error $? \"failure running python-config --exec-prefix\" \"$LINENO\" 5\n+\tas_fn_error $? \"failure running python-config --exec-prefix\" \"$LINENO\" 5\n       fi\n     fi\n   else\n@@ -15351,17 +15361,14 @@ if ${ac_cv_func_setpgrp_void+:} false; then :\n else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n-\n #include <unistd.h>\n-\n int\n main ()\n {\n-\n-  if (setpgrp(1,1) == -1)\n-    exit (0);\n-  else\n-    exit (1);\n+if (setpgrp(1,1) == -1)\n+\t     exit (0);\n+\t   else\n+\t     exit (1);\n \n   ;\n   return 0;\n@@ -15371,8 +15378,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   ac_cv_func_setpgrp_void=no\n else\n   ac_cv_func_setpgrp_void=yes\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_setpgrp_void\" >&5\n $as_echo \"$ac_cv_func_setpgrp_void\" >&6; }\n@@ -15399,9 +15408,10 @@ int\n main ()\n {\n #define REGEX_INTERFACE_VERSION 1\n-#if _GNU_REGEX_INTERFACE_VERSION != REGEX_INTERFACE_VERSION\n-# error \"Version mismatch\"\n-#endif\n+\t #if _GNU_REGEX_INTERFACE_VERSION != REGEX_INTERFACE_VERSION\n+\t # error \"Version mismatch\"\n+\t #endif\n+\n   ;\n   return 0;\n }\n@@ -15410,8 +15420,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_gnu_regex=yes\n else\n   gdb_cv_have_gnu_regex=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_gnu_regex\" >&5\n $as_echo \"$gdb_cv_have_gnu_regex\" >&6; }\n@@ -15457,12 +15469,13 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/param.h>\n-#define _KMEMUSER\n-#include <sys/lwp.h>\n+\t #define _KMEMUSER\n+\t #include <sys/lwp.h>\n int\n main ()\n {\n struct lwp l;\n+\n   ;\n   return 0;\n }\n@@ -15471,8 +15484,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_struct_lwp=yes\n else\n   gdb_cv_struct_lwp=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_struct_lwp\" >&5\n $as_echo \"$gdb_cv_struct_lwp\" >&6; }\n@@ -15491,11 +15506,12 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/types.h>\n-#include <machine/reg.h>\n+\t #include <machine/reg.h>\n int\n main ()\n {\n struct reg r;\n+\n   ;\n   return 0;\n }\n@@ -15504,8 +15520,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_struct_reg=yes\n else\n   gdb_cv_struct_reg=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_struct_reg\" >&5\n $as_echo \"$gdb_cv_struct_reg\" >&6; }\n@@ -15562,8 +15580,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_ptrace_getregs=yes\n else\n   gdb_cv_have_ptrace_getregs=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_ptrace_getregs\" >&5\n@@ -15595,8 +15615,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_ptrace_getfpxregs=yes\n else\n   gdb_cv_have_ptrace_getfpxregs=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_ptrace_getfpxregs\" >&5\n@@ -15616,11 +15638,12 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/types.h>\n-#include <sys/ptrace.h>\n+\t #include <sys/ptrace.h>\n int\n main ()\n {\n PT_GETDBREGS;\n+\n   ;\n   return 0;\n }\n@@ -15629,8 +15652,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_pt_getdbregs=yes\n else\n   gdb_cv_have_pt_getdbregs=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_pt_getdbregs\" >&5\n@@ -15650,11 +15675,12 @@ else\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/types.h>\n-#include <sys/ptrace.h>\n+\t #include <sys/ptrace.h>\n int\n main ()\n {\n PT_GETXMMREGS;\n+\n   ;\n   return 0;\n }\n@@ -15663,8 +15689,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_pt_getxmmregs=yes\n else\n   gdb_cv_have_pt_getxmmregs=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n \n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_pt_getxmmregs\" >&5\n@@ -15947,16 +15975,15 @@ $as_echo_n \"checking for -bbigtoc option... \" >&6; }\n if ${gdb_cv_bigtoc+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n+  SAVE_LDFLAGS=$LDFLAGS\n \n-    SAVE_LDFLAGS=$LDFLAGS\n-\n-    case $GCC in\n-    yes) gdb_cv_bigtoc=-Wl,-bbigtoc ;;\n-    *) gdb_cv_bigtoc=-bbigtoc ;;\n-    esac\n+     case $GCC in\n+       yes) gdb_cv_bigtoc=-Wl,-bbigtoc ;;\n+       *) gdb_cv_bigtoc=-bbigtoc ;;\n+     esac\n \n-    LDFLAGS=$LDFLAGS\\ $gdb_cv_bigtoc\n-    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+     LDFLAGS=$LDFLAGS\\ $gdb_cv_bigtoc\n+     cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n int\n@@ -15971,10 +15998,11 @@ if ac_fn_c_try_link \"$LINENO\"; then :\n \n else\n   gdb_cv_bigtoc=\n+\n fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n-    LDFLAGS=\"${SAVE_LDFLAGS}\"\n+     LDFLAGS=\"${SAVE_LDFLAGS}\"\n \n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_bigtoc\" >&5\n@@ -16086,8 +16114,9 @@ int\n main ()\n {\n #ifndef PTHDB_VERSION_3\n-                                    #error\n-                                    #endif\n+\t       #error\n+\t       #endif\n+\n   ;\n   return 0;\n }\n@@ -16096,8 +16125,10 @@ if ac_fn_c_try_compile \"$LINENO\"; then :\n   gdb_cv_have_aix_thread_debug=yes\n else\n   gdb_cv_have_aix_thread_debug=no\n+\n fi\n rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n fi\n \n       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_have_aix_thread_debug\" >&5\n@@ -16129,7 +16160,7 @@ _ACEOF\n fi\n \n if test \"x$ac_cv_header_thread_db_h\" = \"xyes\"; then\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_NOTALLOC\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_NOTALLOC\" >&5\n $as_echo_n \"checking whether <thread_db.h> has TD_NOTALLOC... \" >&6; }\n if ${gdb_cv_thread_db_h_has_td_notalloc+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -16141,6 +16172,7 @@ int\n main ()\n {\n int i = TD_NOTALLOC;\n+\n   ;\n   return 0;\n }\n@@ -16156,7 +16188,8 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_thread_db_h_has_td_notalloc\" >&5\n $as_echo \"$gdb_cv_thread_db_h_has_td_notalloc\" >&6; }\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_VERSION\" >&5\n+\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_VERSION\" >&5\n $as_echo_n \"checking whether <thread_db.h> has TD_VERSION... \" >&6; }\n if ${gdb_cv_thread_db_h_has_td_version+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -16168,6 +16201,7 @@ int\n main ()\n {\n int i = TD_VERSION;\n+\n   ;\n   return 0;\n }\n@@ -16183,7 +16217,8 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n fi\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_thread_db_h_has_td_version\" >&5\n $as_echo \"$gdb_cv_thread_db_h_has_td_version\" >&6; }\n-   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_NOTLS\" >&5\n+\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether <thread_db.h> has TD_NOTLS\" >&5\n $as_echo_n \"checking whether <thread_db.h> has TD_NOTLS... \" >&6; }\n if ${gdb_cv_thread_db_h_has_td_notls+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -16195,6 +16230,7 @@ int\n main ()\n {\n int i = TD_NOTLS;\n+\n   ;\n   return 0;\n }"
    },
    {
      "sha": "bfc053ed096942678028065079d93c8d7dd691b9",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 234,
      "deletions": 132,
      "changes": 366,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5593a99a95f8f86240c6d8583a52a3956c691dba/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=5593a99a95f8f86240c6d8583a52a3956c691dba",
      "patch": "@@ -20,7 +20,8 @@ dnl Process this file with autoconf to produce a configure script.\n \n m4_include(../config/debuginfod.m4)\n \n-AC_INIT(main.c)\n+AC_INIT\n+AC_CONFIG_SRCDIR([main.c])\n AC_CONFIG_HEADERS(config.h:config.in, [echo > stamp-h])\n AM_MAINTAINER_MODE\n \n@@ -157,7 +158,7 @@ AC_CONFIG_SUBDIRS(testsuite)\n AC_ARG_ENABLE(targets,\n AS_HELP_STRING([--enable-targets=TARGETS], [alternative target configurations]),\n [case \"${enableval}\" in\n-  yes | \"\") AC_ERROR(enable-targets option must specify target names or 'all')\n+  yes | \"\") AC_MSG_ERROR(enable-targets option must specify target names or 'all')\n             ;;\n   no)       enable_targets= ;;\n   *)        enable_targets=$enableval ;;\n@@ -391,22 +392,36 @@ AS_HELP_STRING([--enable-profiling], [enable profiling of GDB]),\n  [enable_profiling=no])\n \n AC_CHECK_FUNCS(monstartup _mcleanup)\n-AC_CACHE_CHECK([for _etext], ac_cv_var__etext,\n-[AC_TRY_LINK(\n-[#include <stdlib.h>\n-extern char _etext;\n-],\n-[free (&_etext);], ac_cv_var__etext=yes, ac_cv_var__etext=no)])\n+AC_CACHE_CHECK(\n+  [for _etext],\n+  [ac_cv_var__etext],\n+  [AC_LINK_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <stdlib.h>\n+\t extern char _etext;],\n+\t[free (&_etext);]\n+      )],\n+     [ac_cv_var__etext=yes],\n+     [ac_cv_var__etext=no]\n+   )]\n+)\n if test \"$ac_cv_var__etext\" = yes; then\n   AC_DEFINE(HAVE__ETEXT, 1,\n             [Define to 1 if your system has the _etext variable. ])\n fi\n-AC_CACHE_CHECK([for etext], ac_cv_var_etext,\n-[AC_TRY_LINK(\n-[#include <stdlib.h>\n-extern char etext;\n-],\n-[free (&etext);], ac_cv_var_etext=yes, ac_cv_var_etext=no)])\n+AC_CACHE_CHECK(\n+  [for etext],\n+  [ac_cv_var_etext],\n+  [AC_LINK_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <stdlib.h>\n+\t extern char etext;],\n+\t[free (&etext);]\n+      )],\n+     [ac_cv_var_etext=yes],\n+     [ac_cv_var_etext=no]\n+   )]\n+)\n if test \"$ac_cv_var_etext\" = yes; then\n   AC_DEFINE(HAVE_ETEXT, 1,\n             [Define to 1 if your system has the etext variable. ])\n@@ -419,9 +434,15 @@ if test \"$enable_profiling\" = yes ; then\n   OLD_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\"$CFLAGS $PROFILE_CFLAGS\"\n \n-  AC_CACHE_CHECK([whether $CC supports -pg], ac_cv_cc_supports_pg,\n-    [AC_TRY_COMPILE([], [int x;], ac_cv_cc_supports_pg=yes,\n-     ac_cv_cc_supports_pg=no)])\n+  AC_CACHE_CHECK(\n+    [whether $CC supports -pg],\n+    [ac_cv_cc_supports_pg],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM([], [int x;])],\n+       [ac_cv_cc_supports_pg=yes],\n+       [ac_cv_cc_supports_pg=no]\n+     )]\n+  )\n \n   if test \"$ac_cv_cc_supports_pg\" = no; then\n     AC_MSG_ERROR(--enable-profiling requires a compiler which supports -pg)\n@@ -574,16 +595,21 @@ AC_ARG_WITH([system-readline],\n                   [use installed readline library])])\n \n if test \"$with_system_readline\" = yes; then\n-   AC_CACHE_CHECK([whether system readline is new enough],\n-     [gdb_cv_readline_ok],\n-     [AC_TRY_COMPILE(\n-       [#include <stdio.h>\n-#include <readline/readline.h>],\n-       [#if RL_VERSION_MAJOR < 7\n-# error \"readline version 7 required\"\n-#endif],\n-    gdb_cv_readline_ok=yes,\n-    gdb_cv_readline_ok=no)])\n+  AC_CACHE_CHECK(\n+    [whether system readline is new enough],\n+    [gdb_cv_readline_ok],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM(\n+\t  [#include <stdio.h>\n+\t   #include <readline/readline.h>],\n+\t  [#if RL_VERSION_MAJOR < 7\n+\t   # error \"readline version 7 required\"\n+\t   #endif]\n+\t)],\n+       [gdb_cv_readline_ok=yes],\n+       [gdb_cv_readline_ok=no]\n+     )]\n+  )\n   if test \"$gdb_cv_readline_ok\" != yes; then\n     AC_MSG_ERROR([system readline is not new enough])\n   fi\n@@ -778,12 +804,12 @@ else\n       python_prog=${with_python}\n       python_prefix=\n     else\n-      AC_ERROR(invalid value for --with-python)\n+      AC_MSG_ERROR(invalid value for --with-python)\n     fi\n     ;;\n   */*)\n     # Disallow --with-python=foo/bar.\n-    AC_ERROR(invalid value for --with-python)\n+    AC_MSG_ERROR(invalid value for --with-python)\n     ;;\n   *)\n     # The user has either specified auto, yes, or the name of the python\n@@ -811,7 +837,7 @@ else\n       python_prog=\"${with_python}\"\n       AC_PATH_PROG(python_prog_path, ${python_prog}, missing)\n       if test \"${python_prog_path}\" = missing; then\n-        AC_ERROR(unable to find python program ${python_prog})\n+\tAC_MSG_ERROR(unable to find python program ${python_prog})\n       fi\n       ;;\n     esac\n@@ -825,21 +851,21 @@ else\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        AC_ERROR(failure running python-config --includes)\n+\tAC_MSG_ERROR(failure running python-config --includes)\n       fi\n     fi\n     python_libs=`${python_prog} ${srcdir}/python/python-config.py --ldflags`\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        AC_ERROR(failure running python-config --ldflags)\n+\tAC_MSG_ERROR(failure running python-config --ldflags)\n       fi\n     fi\n     python_prefix=`${python_prog} ${srcdir}/python/python-config.py --exec-prefix`\n     if test $? != 0; then\n       have_python_config=failed\n       if test \"${with_python}\" != auto; then\n-        AC_ERROR(failure running python-config --exec-prefix)\n+\tAC_MSG_ERROR(failure running python-config --exec-prefix)\n       fi\n     fi\n   else\n@@ -944,7 +970,11 @@ if test \"${have_libpython}\" != no; then\n       # Check that the compiler accepts it\n       saved_CFLAGS=\"$CFLAGS\"\n       CFLAGS=\"$CFLAGS $flag\"\n-      AC_TRY_COMPILE([],[],PYTHON_CFLAGS=\"${PYTHON_CFLAGS} $flag\",)\n+      AC_COMPILE_IFELSE(\n+\t[AC_LANG_PROGRAM([], [])],\n+\t[PYTHON_CFLAGS=\"${PYTHON_CFLAGS} $flag\"],\n+\t[]\n+      )\n       CFLAGS=\"$saved_CFLAGS\"\n     done\n     AC_MSG_RESULT(${PYTHON_CFLAGS})\n@@ -1305,15 +1335,21 @@ dnl Instead, assume we will have a prototype for setpgrp if cross compiling.\n if test \"$cross_compiling\" = no; then\n   AC_FUNC_SETPGRP\n else\n-  AC_CACHE_CHECK([whether setpgrp takes no argument], ac_cv_func_setpgrp_void,\n-    [AC_TRY_COMPILE([\n-#include <unistd.h>\n-], [\n-  if (setpgrp(1,1) == -1)\n-    exit (0);\n-  else\n-    exit (1);\n-], ac_cv_func_setpgrp_void=no, ac_cv_func_setpgrp_void=yes)])\n+  AC_CACHE_CHECK(\n+    [whether setpgrp takes no argument],\n+    [ac_cv_func_setpgrp_void],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM(\n+\t  [#include <unistd.h>],\n+\t  [if (setpgrp(1,1) == -1)\n+\t     exit (0);\n+\t   else\n+\t     exit (1);]\n+\t)],\n+       [ac_cv_func_setpgrp_void=no],\n+       [ac_cv_func_setpgrp_void=yes]\n+     )]\n+  )\n if test \"$ac_cv_func_setpgrp_void\" = yes; then\n   AC_DEFINE(SETPGRP_VOID, 1)\n fi\n@@ -1327,14 +1363,18 @@ gdb_use_included_regex=yes\n AC_CACHE_CHECK(\n   [for GNU regex],\n   [gdb_cv_have_gnu_regex],\n-  [AC_TRY_COMPILE(\n-    [#include <gnu-versions.h>],\n-    [#define REGEX_INTERFACE_VERSION 1\n-#if _GNU_REGEX_INTERFACE_VERSION != REGEX_INTERFACE_VERSION\n-# error \"Version mismatch\"\n-#endif],\n-    gdb_cv_have_gnu_regex=yes,\n-    gdb_cv_have_gnu_regex=no)])\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <gnu-versions.h>],\n+\t[#define REGEX_INTERFACE_VERSION 1\n+\t #if _GNU_REGEX_INTERFACE_VERSION != REGEX_INTERFACE_VERSION\n+\t # error \"Version mismatch\"\n+\t #endif]\n+      )],\n+     [gdb_cv_have_gnu_regex=yes],\n+     [gdb_cv_have_gnu_regex=no]\n+   )]\n+)\n if test \"$gdb_cv_have_gnu_regex\" = yes; then\n   gdb_use_included_regex=no\n fi\n@@ -1355,21 +1395,39 @@ AC_CHECK_MEMBERS([struct thread.td_pcb], [], [],\n ])\n \n # See if <sys/lwp.h> defines `struct lwp`.\n-AC_CACHE_CHECK([for struct lwp], gdb_cv_struct_lwp,\n-[AC_TRY_COMPILE([#include <sys/param.h>\n-#define _KMEMUSER\n-#include <sys/lwp.h>], [struct lwp l;],\n-gdb_cv_struct_lwp=yes, gdb_cv_struct_lwp=no)])\n+AC_CACHE_CHECK(\n+  [for struct lwp],\n+  [gdb_cv_struct_lwp],\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <sys/param.h>\n+\t #define _KMEMUSER\n+\t #include <sys/lwp.h>],\n+\t[struct lwp l;]\n+      )],\n+     [gdb_cv_struct_lwp=yes],\n+     [gdb_cv_struct_lwp=no]\n+   )]\n+)\n if test \"$gdb_cv_struct_lwp\" = yes; then\n   AC_DEFINE(HAVE_STRUCT_LWP, 1,\n             [Define to 1 if your system has struct lwp.])\n fi\n \n # See if <machine/reg.h> degines `struct reg'.\n-AC_CACHE_CHECK([for struct reg in machine/reg.h], gdb_cv_struct_reg,\n-[AC_TRY_COMPILE([#include <sys/types.h>\n-#include <machine/reg.h>], [struct reg r;],\n-gdb_cv_struct_reg=yes, gdb_cv_struct_reg=no)])\n+AC_CACHE_CHECK(\n+  [for struct reg in machine/reg.h],\n+  [gdb_cv_struct_reg],\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <sys/types.h>\n+\t #include <machine/reg.h>],\n+\t[struct reg r;]\n+      )],\n+     [gdb_cv_struct_reg=yes],\n+     [gdb_cv_struct_reg=no]\n+   )]\n+)\n if test \"$gdb_cv_struct_reg\" = yes; then\n   AC_DEFINE(HAVE_STRUCT_REG, 1,\n             [Define to 1 if your system has struct reg in <machine/reg.h>.])\n@@ -1383,11 +1441,14 @@ AC_CHECK_MEMBERS([struct reg.r_fs, struct reg.r_gs], [], [],\n \n # See if <sys/ptrace.h> provides the PTRACE_GETREGS request.\n AC_MSG_CHECKING(for PTRACE_GETREGS)\n-AC_CACHE_VAL(gdb_cv_have_ptrace_getregs,\n-[AC_TRY_COMPILE([#include <sys/ptrace.h>],\n-\t\t[PTRACE_GETREGS;],\n-\t\t[gdb_cv_have_ptrace_getregs=yes],\n-\t\t[gdb_cv_have_ptrace_getregs=no])])\n+AC_CACHE_VAL(\n+  [gdb_cv_have_ptrace_getregs],\n+  [AC_COMPILE_IFELSE(\n+    [AC_LANG_PROGRAM([#include <sys/ptrace.h>], [PTRACE_GETREGS;])],\n+    [gdb_cv_have_ptrace_getregs=yes],\n+    [gdb_cv_have_ptrace_getregs=no]\n+   )]\n+)\n AC_MSG_RESULT($gdb_cv_have_ptrace_getregs)\n if test \"$gdb_cv_have_ptrace_getregs\" = yes; then\n   AC_DEFINE(HAVE_PTRACE_GETREGS, 1,\n@@ -1396,11 +1457,14 @@ fi\n \n # See if <sys/ptrace.h> provides the PTRACE_GETFPXREGS request.\n AC_MSG_CHECKING(for PTRACE_GETFPXREGS)\n-AC_CACHE_VAL(gdb_cv_have_ptrace_getfpxregs,\n-[AC_TRY_COMPILE([#include <sys/ptrace.h>],\n-\t\t[PTRACE_GETFPXREGS;],\n-\t\t[gdb_cv_have_ptrace_getfpxregs=yes],\n-\t\t[gdb_cv_have_ptrace_getfpxregs=no])])\n+AC_CACHE_VAL(\n+  [gdb_cv_have_ptrace_getfpxregs],\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM([#include <sys/ptrace.h>], [PTRACE_GETFPXREGS;])],\n+     [gdb_cv_have_ptrace_getfpxregs=yes],\n+     [gdb_cv_have_ptrace_getfpxregs=no]\n+   )]\n+)\n AC_MSG_RESULT($gdb_cv_have_ptrace_getfpxregs)\n if test \"$gdb_cv_have_ptrace_getfpxregs\" = yes; then\n   AC_DEFINE(HAVE_PTRACE_GETFPXREGS, 1,\n@@ -1409,12 +1473,18 @@ fi\n \n # See if <sys/ptrace.h> provides the PT_GETDBREGS request.\n AC_MSG_CHECKING(for PT_GETDBREGS)\n-AC_CACHE_VAL(gdb_cv_have_pt_getdbregs,\n-[AC_TRY_COMPILE([#include <sys/types.h>\n-#include <sys/ptrace.h>],\n-\t\t[PT_GETDBREGS;],\n-\t\t[gdb_cv_have_pt_getdbregs=yes],\n-\t\t[gdb_cv_have_pt_getdbregs=no])])\n+AC_CACHE_VAL(\n+  [gdb_cv_have_pt_getdbregs],\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <sys/types.h>\n+\t #include <sys/ptrace.h>],\n+\t[PT_GETDBREGS;]\n+      )],\n+     [gdb_cv_have_pt_getdbregs=yes],\n+     [gdb_cv_have_pt_getdbregs=no]\n+   )]\n+)\n AC_MSG_RESULT($gdb_cv_have_pt_getdbregs)\n if test \"$gdb_cv_have_pt_getdbregs\" = yes; then\n   AC_DEFINE(HAVE_PT_GETDBREGS, 1,\n@@ -1423,12 +1493,18 @@ fi\n \n # See if <sys/ptrace.h> provides the PT_GETXMMREGS request.\n AC_MSG_CHECKING(for PT_GETXMMREGS)\n-AC_CACHE_VAL(gdb_cv_have_pt_getxmmregs,\n-[AC_TRY_COMPILE([#include <sys/types.h>\n-#include <sys/ptrace.h>],\n-\t\t[PT_GETXMMREGS;],\n-\t\t[gdb_cv_have_pt_getxmmregs=yes],\n-\t\t[gdb_cv_have_pt_getxmmregs=no])])\n+AC_CACHE_VAL(\n+  [gdb_cv_have_pt_getxmmregs],\n+  [AC_COMPILE_IFELSE(\n+     [AC_LANG_PROGRAM(\n+\t[#include <sys/types.h>\n+\t #include <sys/ptrace.h>],\n+\t[PT_GETXMMREGS;]\n+      )],\n+     [gdb_cv_have_pt_getxmmregs=yes],\n+     [gdb_cv_have_pt_getxmmregs=no]\n+   )]\n+)\n AC_MSG_RESULT($gdb_cv_have_pt_getxmmregs)\n if test \"$gdb_cv_have_pt_getxmmregs\" = yes; then\n   AC_DEFINE(HAVE_PT_GETXMMREGS, 1,\n@@ -1551,18 +1627,23 @@ fi\n \n case ${host_os} in\n aix*)\n-  AC_CACHE_CHECK([for -bbigtoc option], [gdb_cv_bigtoc], [\n-    SAVE_LDFLAGS=$LDFLAGS\n-\n-    case $GCC in\n-    yes) gdb_cv_bigtoc=-Wl,-bbigtoc ;;\n-    *) gdb_cv_bigtoc=-bbigtoc ;;\n-    esac\n-\n-    LDFLAGS=$LDFLAGS\\ $gdb_cv_bigtoc\n-    AC_TRY_LINK([], [int i;], [], [gdb_cv_bigtoc=])\n-    LDFLAGS=\"${SAVE_LDFLAGS}\"\n-  ])\n+  AC_CACHE_CHECK(\n+    [for -bbigtoc option], [gdb_cv_bigtoc],\n+    [SAVE_LDFLAGS=$LDFLAGS\n+\n+     case $GCC in\n+       yes) gdb_cv_bigtoc=-Wl,-bbigtoc ;;\n+       *) gdb_cv_bigtoc=-bbigtoc ;;\n+     esac\n+\n+     LDFLAGS=$LDFLAGS\\ $gdb_cv_bigtoc\n+     AC_LINK_IFELSE(\n+       [AC_LANG_PROGRAM([], [int i;])],\n+       [],\n+       [gdb_cv_bigtoc=]\n+     )\n+     LDFLAGS=\"${SAVE_LDFLAGS}\"]\n+  )\n   CONFIG_LDFLAGS=\"${CONFIG_LDFLAGS} ${gdb_cv_bigtoc}\"\n   ;;\n esac\n@@ -1578,7 +1659,11 @@ if test \"${gdb_native}\" = yes; then\n    RDYNAMIC=\"-Wl,--dynamic-list=${srcdir}/proc-service.list\"\n    LDFLAGS=\"$LDFLAGS $RDYNAMIC\"\n    if test \"${have_libpython}\" = no; then\n-     AC_TRY_LINK([], [], [dynamic_list=true])\n+     AC_LINK_IFELSE(\n+       [AC_LANG_PROGRAM([], [])],\n+       [dynamic_list=true],\n+       []\n+     )\n    else\n      # Workaround http://bugs.python.org/issue4434 where static\n      # libpythonX.Y.a would get its symbols required for\n@@ -1631,13 +1716,19 @@ if test \"${build}\" = \"${host}\" -a \"${host}\" = \"${target}\" ; then\n    case ${host_os} in\n    aix*)\n       AC_MSG_CHECKING(for AiX thread debugging library)\n-      AC_CACHE_VAL(gdb_cv_have_aix_thread_debug,\n-                   [AC_TRY_COMPILE([#include <sys/pthdebug.h>],\n-                                   [#ifndef PTHDB_VERSION_3\n-                                    #error\n-                                    #endif],\n-                                   gdb_cv_have_aix_thread_debug=yes,\n-                                   gdb_cv_have_aix_thread_debug=no)])\n+      AC_CACHE_VAL(\n+\t[gdb_cv_have_aix_thread_debug],\n+\t[AC_COMPILE_IFELSE(\n+\t   [AC_LANG_PROGRAM(\n+\t      [#include <sys/pthdebug.h>],\n+\t      [#ifndef PTHDB_VERSION_3\n+\t       #error\n+\t       #endif]\n+\t    )],\n+\t   [gdb_cv_have_aix_thread_debug=yes],\n+\t   [gdb_cv_have_aix_thread_debug=no]\n+\t )]\n+      )\n       AC_MSG_RESULT($gdb_cv_have_aix_thread_debug)\n       if test \"$gdb_cv_have_aix_thread_debug\" = yes; then\n          CONFIG_SRCS=\"${CONFIG_SRCS} aix-thread.c\"\n@@ -1657,33 +1748,44 @@ fi\n dnl See if we have a thread_db header file that has TD_NOTALLOC and\n dnl other error codes.\n if test \"x$ac_cv_header_thread_db_h\" = \"xyes\"; then\n-   AC_CACHE_CHECK([whether <thread_db.h> has TD_NOTALLOC],\n-                  gdb_cv_thread_db_h_has_td_notalloc,\n-     AC_TRY_COMPILE(\n-       [#include <thread_db.h>],\n-       [int i = TD_NOTALLOC;],\n-       gdb_cv_thread_db_h_has_td_notalloc=yes,\n-       gdb_cv_thread_db_h_has_td_notalloc=no\n-     )\n-   )\n-   AC_CACHE_CHECK([whether <thread_db.h> has TD_VERSION],\n-                  gdb_cv_thread_db_h_has_td_version,\n-     AC_TRY_COMPILE(\n-       [#include <thread_db.h>],\n-       [int i = TD_VERSION;],\n-       gdb_cv_thread_db_h_has_td_version=yes,\n-       gdb_cv_thread_db_h_has_td_version=no\n-     )\n-   )\n-   AC_CACHE_CHECK([whether <thread_db.h> has TD_NOTLS],\n-                  gdb_cv_thread_db_h_has_td_notls,\n-     AC_TRY_COMPILE(\n-       [#include <thread_db.h>],\n-       [int i = TD_NOTLS;],\n-       gdb_cv_thread_db_h_has_td_notls=yes,\n-       gdb_cv_thread_db_h_has_td_notls=no\n-     )\n-   )\n+  AC_CACHE_CHECK(\n+    [whether <thread_db.h> has TD_NOTALLOC],\n+    [gdb_cv_thread_db_h_has_td_notalloc],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM(\n+\t  [#include <thread_db.h>],\n+\t  [int i = TD_NOTALLOC;]\n+\t)],\n+       [gdb_cv_thread_db_h_has_td_notalloc=yes],\n+       [gdb_cv_thread_db_h_has_td_notalloc=no]\n+     )]\n+  )\n+\n+  AC_CACHE_CHECK(\n+    [whether <thread_db.h> has TD_VERSION],\n+    [gdb_cv_thread_db_h_has_td_version],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM(\n+\t  [#include <thread_db.h>],\n+\t  [int i = TD_VERSION;]\n+\t)],\n+       [gdb_cv_thread_db_h_has_td_version=yes],\n+       [gdb_cv_thread_db_h_has_td_version=no]\n+     )]\n+  )\n+\n+  AC_CACHE_CHECK(\n+    [whether <thread_db.h> has TD_NOTLS],\n+    [gdb_cv_thread_db_h_has_td_notls],\n+    [AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM(\n+\t  [#include <thread_db.h>],\n+\t  [int i = TD_NOTLS;]\n+\t)],\n+       [gdb_cv_thread_db_h_has_td_notls=yes],\n+       [gdb_cv_thread_db_h_has_td_notls=no]\n+     )]\n+  )\n fi\n if test \"x$gdb_cv_thread_db_h_has_td_notalloc\" = \"xyes\"; then\n   AC_DEFINE(THREAD_DB_HAS_TD_NOTALLOC, 1,\n@@ -2029,7 +2131,7 @@ fi\n \n # Check for babeltrace and babeltrace-ctf\n AC_ARG_WITH(babeltrace,\n-  AC_HELP_STRING([--with-babeltrace], [include babeltrace support (auto/yes/no)]),\n+  AS_HELP_STRING([--with-babeltrace], [include babeltrace support (auto/yes/no)]),\n   [], [with_babeltrace=auto])\n AC_MSG_CHECKING([whether to use babeltrace])\n AC_MSG_RESULT([$with_babeltrace])\n@@ -2072,7 +2174,7 @@ fi\n \n # Check for xxhash\n AC_ARG_WITH(xxhash,\n-  AC_HELP_STRING([--with-xxhash], [use libxxhash for hashing (faster) (auto/yes/no)]),\n+  AS_HELP_STRING([--with-xxhash], [use libxxhash for hashing (faster) (auto/yes/no)]),\n   [], [with_xxhash=auto])\n \n GCC_ENABLE([libctf], [yes], [], [Handle .ctf type-info sections])\n@@ -2133,7 +2235,7 @@ dnl Add dependency for xsltproc if building with maintainer-mode enabled.\n AC_PATH_PROGS(XSLTPROC, xsltproc, missing)\n if test \"x$USE_MAINTAINER_MODE\" = xyes; then\n   if test \"${XSLTPROC}\" = missing; then\n-    AC_ERROR(unable to find xsltproc.  maintainer-mode requires xsltproc.)\n+    AC_MSG_ERROR(unable to find xsltproc.  maintainer-mode requires xsltproc.)\n   fi\n fi\n AC_SUBST(XSLTPROC)"
    }
  ]
}