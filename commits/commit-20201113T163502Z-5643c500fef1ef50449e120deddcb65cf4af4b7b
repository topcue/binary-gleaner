{
  "sha": "5643c500fef1ef50449e120deddcb65cf4af4b7b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTY0M2M1MDBmZWYxZWY1MDQ0OWUxMjBkZWRkY2I2NWNmNGFmNGI3Yg==",
  "commit": {
    "author": {
      "name": "Joseph Myers",
      "email": "joseph@codesourcery.com",
      "date": "2020-11-13T16:35:02Z"
    },
    "committer": {
      "name": "Joseph Myers",
      "email": "joseph@codesourcery.com",
      "date": "2020-11-13T16:35:02Z"
    },
    "message": "Fix Windows-target testing in gdb_file_cmd\n\nGCC for Windows target produces executables called foo.exe when given\n\"-o foo\".  (More specifically, it's done that for native compilers for\na long time, and for cross compilers to Windows target since GCC\ncommit 5bc86b599054f494ec0a45e49b82749320eaa9c4, in GCC 8 and later.)\nThis causes problems for many GDB tests expecting a program to have\nthe exact file name passed to -o.\n\nFix this by checking for the case where only the .exe exists in\ngdb_file_cmd and adjusting the name passed to the file command\naccordingly.  There may well be other places with this issue in the\nGDB testsuite, but this fix allows many tests to succeed that\npreviously fell over.\n\n2020-11-12  Joseph Myers  <joseph@codesourcery.com>\n\n\t* lib/gdb.exp (gdb_file_cmd): Check for case where $arg.exe exists\n\tbut $arg does not.",
    "tree": {
      "sha": "b81df85e96d94e10ae559b4c77690dbe7f2f32bb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b81df85e96d94e10ae559b4c77690dbe7f2f32bb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5643c500fef1ef50449e120deddcb65cf4af4b7b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5643c500fef1ef50449e120deddcb65cf4af4b7b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5643c500fef1ef50449e120deddcb65cf4af4b7b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5643c500fef1ef50449e120deddcb65cf4af4b7b/comments",
  "author": {
    "login": "jsm28",
    "id": 10537793,
    "node_id": "MDQ6VXNlcjEwNTM3Nzkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jsm28",
    "html_url": "https://github.com/jsm28",
    "followers_url": "https://api.github.com/users/jsm28/followers",
    "following_url": "https://api.github.com/users/jsm28/following{/other_user}",
    "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions",
    "organizations_url": "https://api.github.com/users/jsm28/orgs",
    "repos_url": "https://api.github.com/users/jsm28/repos",
    "events_url": "https://api.github.com/users/jsm28/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jsm28/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jsm28",
    "id": 10537793,
    "node_id": "MDQ6VXNlcjEwNTM3Nzkz",
    "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jsm28",
    "html_url": "https://github.com/jsm28",
    "followers_url": "https://api.github.com/users/jsm28/followers",
    "following_url": "https://api.github.com/users/jsm28/following{/other_user}",
    "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions",
    "organizations_url": "https://api.github.com/users/jsm28/orgs",
    "repos_url": "https://api.github.com/users/jsm28/repos",
    "events_url": "https://api.github.com/users/jsm28/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jsm28/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "50ea0877550b5fc2c31a44576cdba1b51897eb2c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/50ea0877550b5fc2c31a44576cdba1b51897eb2c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/50ea0877550b5fc2c31a44576cdba1b51897eb2c"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 10,
    "deletions": 0
  },
  "files": [
    {
      "sha": "b1ca924c2f0d132b9b0743818ff7899f5eb0ce02",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5643c500fef1ef50449e120deddcb65cf4af4b7b/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5643c500fef1ef50449e120deddcb65cf4af4b7b/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=5643c500fef1ef50449e120deddcb65cf4af4b7b",
      "patch": "@@ -1,3 +1,8 @@\n+2020-11-12  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* lib/gdb.exp (gdb_file_cmd): Check for case where $arg.exe exists\n+\tbut $arg does not.\n+\n 2020-11-12  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* gdb.fortran/types.exp: Add more tests."
    },
    {
      "sha": "c42933b3f41ec540762393bfb0d30c5c4d160366",
      "filename": "gdb/testsuite/lib/gdb.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5643c500fef1ef50449e120deddcb65cf4af4b7b/gdb/testsuite/lib/gdb.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5643c500fef1ef50449e120deddcb65cf4af4b7b/gdb/testsuite/lib/gdb.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/gdb.exp?ref=5643c500fef1ef50449e120deddcb65cf4af4b7b",
      "patch": "@@ -1846,6 +1846,11 @@ proc gdb_file_cmd { arg } {\n     global GDB\n     global last_loaded_file\n \n+    # GCC for Windows target may create foo.exe given \"-o foo\".\n+    if { ![file exists $arg] && [file exists \"$arg.exe\"] } {\n+\tset arg \"$arg.exe\"\n+    }\n+\n     # Save this for the benefit of gdbserver-support.exp.\n     set last_loaded_file $arg\n "
    }
  ]
}