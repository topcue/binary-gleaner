{
  "sha": "f64e2f4045485f99b4ce6649fdab874dacccd5a6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjY0ZTJmNDA0NTQ4NWY5OWI0Y2U2NjQ5ZmRhYjg3NGRhY2NjZDVhNg==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-09-19T17:49:39Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-09-19T17:49:39Z"
    },
    "message": "[gdb] Catch exception when constructing the highlighter\n\nCurrently in source_cache::ensure we catch the exception that triggers when\nhighlighter->highlight is called:\n...\n         try\n           {\n             std::istringstream input (contents);\n             std::ostringstream output;\n             highlighter->highlight (input, output, lang_name, fullname);\n...\nand the file used earlier in the construction of the highlighter:\n...\n             highlighter = new srchilite::SourceHighlight (\"esc.outlang\");\n...\nis missing.\n\nThe fact that this exception triggers when highlighter->highlight is called is\nan implementation artefact of libsource-highlight.so though, and this could be\ndifferent for older or newer versions.\n\nMake things more robust by also catching exceptions thrown during construction\nof the highlighter.  This makes the handling on master equivalent with what\nhas been committed for 8.3.1.\n\nTested on x86_64-linux.\n\ngdb/ChangeLog:\n\n2019-09-19  Tom de Vries  <tdevries@suse.de>\n\n\tPR gdb/25009\n\t* source-cache.c (source_cache::ensure): Catch exception thrown during\n\tconstruction of the highlighter.",
    "tree": {
      "sha": "6edab5538be762703abb3066a850c109d2b970c5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6edab5538be762703abb3066a850c109d2b970c5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f64e2f4045485f99b4ce6649fdab874dacccd5a6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f64e2f4045485f99b4ce6649fdab874dacccd5a6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f64e2f4045485f99b4ce6649fdab874dacccd5a6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f64e2f4045485f99b4ce6649fdab874dacccd5a6/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7738ddb418335e6a9dbf00e79fb1369bd762ecd1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7738ddb418335e6a9dbf00e79fb1369bd762ecd1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7738ddb418335e6a9dbf00e79fb1369bd762ecd1"
    }
  ],
  "stats": {
    "total": 18,
    "additions": 12,
    "deletions": 6
  },
  "files": [
    {
      "sha": "39f917b1867ce73e443e3c0c11d806907e2a8fc8",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f64e2f4045485f99b4ce6649fdab874dacccd5a6/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f64e2f4045485f99b4ce6649fdab874dacccd5a6/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f64e2f4045485f99b4ce6649fdab874dacccd5a6",
      "patch": "@@ -1,3 +1,9 @@\n+2019-09-19  Tom de Vries  <tdevries@suse.de>\n+\n+\tPR gdb/25009\n+\t* source-cache.c (source_cache::ensure): Catch exception thrown during\n+\tconstruction of the highlighter.\n+\n 2019-09-18  Alan Modra  <amodra@gmail.com>\n \n \t* aarch64-linux-tdep.c, * arm-tdep.c, * auto-load.c,"
    },
    {
      "sha": "1fe6da81326a5773642acaba2ef250d6f4c0fc2d",
      "filename": "gdb/source-cache.c",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f64e2f4045485f99b4ce6649fdab874dacccd5a6/gdb/source-cache.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f64e2f4045485f99b4ce6649fdab874dacccd5a6/gdb/source-cache.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/source-cache.c?ref=f64e2f4045485f99b4ce6649fdab874dacccd5a6",
      "patch": "@@ -190,14 +190,14 @@ source_cache::ensure (struct symtab *s)\n \t     conditional compilation in source-cache.h.  */\n \t  static srchilite::SourceHighlight *highlighter;\n \n-\t  if (highlighter == nullptr)\n-\t    {\n-\t      highlighter = new srchilite::SourceHighlight (\"esc.outlang\");\n-\t      highlighter->setStyleFile (\"esc.style\");\n-\t    }\n-\n \t  try\n \t    {\n+\t      if (highlighter == nullptr)\n+\t\t{\n+\t\t  highlighter = new srchilite::SourceHighlight (\"esc.outlang\");\n+\t\t  highlighter->setStyleFile (\"esc.style\");\n+\t\t}\n+\n \t      std::istringstream input (contents);\n \t      std::ostringstream output;\n \t      highlighter->highlight (input, output, lang_name, fullname);"
    }
  ]
}