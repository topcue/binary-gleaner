{
  "sha": "c704d6e7ee44736aabec017f6ea1790fac668407",
  "node_id": "C_kwDOANOeidoAKGM3MDRkNmU3ZWU0NDczNmFhYmVjMDE3ZjZlYTE3OTBmYWM2Njg0MDc",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-01T02:57:42Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-01T03:05:45Z"
    },
    "message": "sim: events: clean up trace casts\n\nDon't blindly cast every possible type to (long).  Change to the right\nprintf format specifier whether it be a 64-bit type or a pointer.",
    "tree": {
      "sha": "685c9480e54121422070bbe29324670cbad8544a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/685c9480e54121422070bbe29324670cbad8544a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c704d6e7ee44736aabec017f6ea1790fac668407",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c704d6e7ee44736aabec017f6ea1790fac668407",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c704d6e7ee44736aabec017f6ea1790fac668407",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c704d6e7ee44736aabec017f6ea1790fac668407/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f0982318065617e92c28e23ee382981c2a898ca2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0982318065617e92c28e23ee382981c2a898ca2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f0982318065617e92c28e23ee382981c2a898ca2"
    }
  ],
  "stats": {
    "total": 155,
    "additions": 83,
    "deletions": 72
  },
  "files": [
    {
      "sha": "ee031c9376b240605857956ed13c8a0ddf8071e6",
      "filename": "sim/common/sim-events.c",
      "status": "modified",
      "additions": 83,
      "deletions": 72,
      "changes": 155,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c704d6e7ee44736aabec017f6ea1790fac668407/sim/common/sim-events.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c704d6e7ee44736aabec017f6ea1790fac668407/sim/common/sim-events.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-events.c?ref=c704d6e7ee44736aabec017f6ea1790fac668407",
      "patch": "@@ -409,14 +409,17 @@ update_time_from_event (SIM_DESC sd)\n \t   event = event->next, i++)\n \t{\n \t  ETRACE ((_ETRACE,\n-\t\t   \"event time-from-event - time %ld, delta %ld - event %d, tag 0x%lx, time %ld, handler 0x%lx, data 0x%lx%s%s\\n\",\n-\t\t   (long)current_time,\n-\t\t   (long)events->time_from_event,\n+\t\t   \"event time-from-event - \"\n+\t\t   \"time %\" PRIi64 \", delta %\" PRIi64 \" - \"\n+\t\t   \"event %i, tag %p, time %\" PRIi64 \", handler %p, data \"\n+\t\t   \"%p%s%s\\n\",\n+\t\t   current_time,\n+\t\t   events->time_from_event,\n \t\t   i,\n-\t\t   (long)event,\n-\t\t   (long)event->time_of_event,\n-\t\t   (long)event->handler,\n-\t\t   (long)event->data,\n+\t\t   event,\n+\t\t   event->time_of_event,\n+\t\t   event->handler,\n+\t\t   event->data,\n \t\t   (event->trace != NULL) ? \", \" : \"\",\n \t\t   (event->trace != NULL) ? event->trace : \"\"));\n \t}\n@@ -513,12 +516,13 @@ sim_events_schedule_vtracef (SIM_DESC sd,\n     new_event->trace = NULL;\n   insert_sim_event (sd, new_event, delta_time);\n   ETRACE ((_ETRACE,\n-\t   \"event scheduled at %ld - tag 0x%lx - time %ld, handler 0x%lx, data 0x%lx%s%s\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->time_of_event,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data,\n+\t   \"event scheduled at %\" PRIi64 \" - \"\n+\t   \"tag %p - time %\" PRIi64 \", handler %p, data %p%s%s\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->time_of_event,\n+\t   new_event->handler,\n+\t   new_event->data,\n \t   (new_event->trace != NULL) ? \", \" : \"\",\n \t   (new_event->trace != NULL) ? new_event->trace : \"\"));\n   return new_event;\n@@ -565,12 +569,13 @@ sim_events_schedule_after_signal (SIM_DESC sd,\n #endif\n \n   ETRACE ((_ETRACE,\n-\t   \"signal scheduled at %ld - tag 0x%lx - time %ld, handler 0x%lx, data 0x%lx\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->time_of_event,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data));\n+\t   \"signal scheduled at %\" PRIi64 \" - \"\n+\t   \"tag %p - time %\" PRIi64 \", handler %p, data %p\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->time_of_event,\n+\t   new_event->handler,\n+\t   new_event->data));\n }\n #endif\n \n@@ -601,12 +606,13 @@ sim_events_watch_clock (SIM_DESC sd,\n   events->watchpoints = new_event;\n   events->work_pending = 1;\n   ETRACE ((_ETRACE,\n-\t  \"event watching clock at %ld - tag 0x%lx - wallclock %ld, handler 0x%lx, data 0x%lx\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->wallclock,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data));\n+\t   \"event watching clock at %\" PRIi64 \" - \"\n+\t   \"tag %p - wallclock %u, handler %p, data %p\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->wallclock,\n+\t   new_event->handler,\n+\t   new_event->data));\n   return new_event;\n }\n #endif\n@@ -615,11 +621,11 @@ sim_events_watch_clock (SIM_DESC sd,\n #if EXTERN_SIM_EVENTS_P\n sim_event *\n sim_events_watch_pc (SIM_DESC sd,\n-                      int is_within,\n-                      unsigned64 lb,\n-                      unsigned64 ub,\n-                      sim_event_handler *handler,\n-                      void *data)\n+\t\t     int is_within,\n+\t\t     unsigned64 lb,\n+\t\t     unsigned64 ub,\n+\t\t     sim_event_handler *handler,\n+\t\t     void *data)\n {\n   sim_events *events = STATE_EVENTS (sd);\n   sim_event *new_event = sim_events_zalloc (sd);\n@@ -639,13 +645,14 @@ sim_events_watch_pc (SIM_DESC sd,\n   events->watchpoints = new_event;\n   events->work_pending = 1;\n   ETRACE ((_ETRACE,\n-\t   \"event watching pc at %ld - tag 0x%lx - pc 0x%lx..0x%lx, handler 0x%lx, data 0x%lx\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->lb,\n-\t   (long)new_event->ub,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data));\n+\t   \"event watching pc at %\" PRIi64 \" - \"\n+\t   \"tag %p - pc 0x%x..0x%x, handler %p, data %p\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->lb,\n+\t   new_event->ub,\n+\t   new_event->handler,\n+\t   new_event->data));\n   return new_event;\n }\n #endif\n@@ -716,14 +723,15 @@ sim_events_watch_sim (SIM_DESC sd,\n   events->watchpoints = new_event;\n   events->work_pending = 1;\n   ETRACE ((_ETRACE,\n-\t   \"event watching host at %ld - tag 0x%lx - host-addr 0x%lx, 0x%lx..0x%lx, handler 0x%lx, data 0x%lx\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->host_addr,\n-\t   (long)new_event->lb,\n-\t   (long)new_event->ub,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data));\n+\t   \"event watching host at %\" PRIi64 \" - \"\n+\t   \"tag %p - host-addr %p, 0x%x..0x%x, handler %p, data %p\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->host_addr,\n+\t   new_event->lb,\n+\t   new_event->ub,\n+\t   new_event->handler,\n+\t   new_event->data));\n   return new_event;\n }\n #endif\n@@ -796,14 +804,15 @@ sim_events_watch_core (SIM_DESC sd,\n   events->watchpoints = new_event;\n   events->work_pending = 1;\n   ETRACE ((_ETRACE,\n-\t   \"event watching host at %ld - tag 0x%lx - host-addr 0x%lx, 0x%lx..0x%lx, handler 0x%lx, data 0x%lx\\n\",\n-\t   (long)sim_events_time (sd),\n-\t   (long)new_event,\n-\t   (long)new_event->host_addr,\n-\t   (long)new_event->lb,\n-\t   (long)new_event->ub,\n-\t   (long)new_event->handler,\n-\t   (long)new_event->data));\n+\t   \"event watching host at %\" PRIi64 \" - \"\n+\t   \"tag %p - host-addr %p, 0x%x..0x%x, handler %p, data %p\\n\",\n+\t   sim_events_time (sd),\n+\t   new_event,\n+\t   new_event->host_addr,\n+\t   new_event->lb,\n+\t   new_event->ub,\n+\t   new_event->handler,\n+\t   new_event->data));\n   return new_event;\n }\n #endif\n@@ -830,12 +839,13 @@ sim_events_deschedule (SIM_DESC sd,\n \t      sim_event *dead = *ptr_to_current;\n \t      *ptr_to_current = dead->next;\n \t      ETRACE ((_ETRACE,\n-\t\t       \"event/watch descheduled at %ld - tag 0x%lx - time %ld, handler 0x%lx, data 0x%lx%s%s\\n\",\n-\t\t       (long) sim_events_time (sd),\n-\t\t       (long) event_to_remove,\n-\t\t       (long) dead->time_of_event,\n-\t\t       (long) dead->handler,\n-\t\t       (long) dead->data,\n+\t\t       \"event/watch descheduled at %\" PRIi64 \" - \"\n+\t\t       \"tag %p - time %\" PRIi64 \", handler %p, data %p%s%s\\n\",\n+\t\t       sim_events_time (sd),\n+\t\t       event_to_remove,\n+\t\t       dead->time_of_event,\n+\t\t       dead->handler,\n+\t\t       dead->data,\n \t\t       (dead->trace != NULL) ? \", \" : \"\",\n \t\t       (dead->trace != NULL) ? dead->trace : \"\"));\n \t      sim_events_free (sd, dead);\n@@ -846,9 +856,9 @@ sim_events_deschedule (SIM_DESC sd,\n \t}\n     }\n   ETRACE ((_ETRACE,\n-\t   \"event/watch descheduled at %ld - tag 0x%lx - not found\\n\",\n-\t   (long) sim_events_time (sd),\n-\t   (long) event_to_remove));\n+\t   \"event/watch descheduled at %\" PRIi64 \" - tag %p - not found\\n\",\n+\t   sim_events_time (sd),\n+\t   event_to_remove));\n }\n #endif\n \n@@ -1188,11 +1198,12 @@ sim_events_process (SIM_DESC sd)\n \t  sim_event_handler *handler = to_do->handler;\n \t  void *data = to_do->data;\n \t  ETRACE ((_ETRACE,\n-\t\t   \"event issued at %ld - tag 0x%lx - handler 0x%lx, data 0x%lx%s%s\\n\",\n-\t\t   (long) event_time,\n-\t\t   (long) to_do,\n-\t\t   (long) handler,\n-\t\t   (long) data,\n+\t\t   \"event issued at %\" PRIi64 \" - \"\n+\t\t   \"tag %p - handler %p, data %p%s%s\\n\",\n+\t\t   event_time,\n+\t\t   to_do,\n+\t\t   handler,\n+\t\t   data,\n \t\t   (to_do->trace != NULL) ? \", \" : \"\",\n \t\t   (to_do->trace != NULL) ? to_do->trace : \"\"));\n \t  sim_events_free (sd, to_do);\n@@ -1216,11 +1227,11 @@ sim_events_process (SIM_DESC sd)\n       events->queue = to_do->next;\n       update_time_from_event (sd);\n       ETRACE ((_ETRACE,\n-\t       \"event issued at %ld - tag 0x%lx - handler 0x%lx, data 0x%lx%s%s\\n\",\n-\t       (long) event_time,\n-\t       (long) to_do,\n-\t       (long) handler,\n-\t       (long) data,\n+\t       \"event issued at %\" PRIi64 \" - tag %p - handler %p, data %p%s%s\\n\",\n+\t       event_time,\n+\t       to_do,\n+\t       handler,\n+\t       data,\n \t       (to_do->trace != NULL) ? \", \" : \"\",\n \t       (to_do->trace != NULL) ? to_do->trace : \"\"));\n       sim_events_free (sd, to_do);"
    }
  ]
}