{
  "sha": "4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NGM1MWRhY2FjZjhhOTcxOTRhMTI0MWFkNWUxY2JmN2JlMDBhNTlhMw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-09-20T05:22:54Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-09-20T06:07:11Z"
    },
    "message": "[GOLD] Fix spurious \"plugin needed to handle lto object\" warnings\n\nlto_slim_object_ was unitialized.  I also thought it worth adding\na sanity check on the .gnu.lto_.lto.* section size, and made some\nother tidies.\n\n\tPR 24768\n\t* layout.cc (Layout::Layout): Init lto_slim_object_.\n\t* object.cc (Sized_relobj_file::do_layout): Wrap overlong line.\n\tDon't use C cast.  Validate section size.  Don't copy contents.",
    "tree": {
      "sha": "6f089a1e722057350343f53e8d96468ff3ca8b95",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6f089a1e722057350343f53e8d96468ff3ca8b95"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e59a1001222d853f0517c7e974bb51589ba86710",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e59a1001222d853f0517c7e974bb51589ba86710",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e59a1001222d853f0517c7e974bb51589ba86710"
    }
  ],
  "stats": {
    "total": 21,
    "additions": 17,
    "deletions": 4
  },
  "files": [
    {
      "sha": "37643cca01b1c3c16fe8e51e35d8cc1c2487a565",
      "filename": "gold/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gold/ChangeLog?ref=4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
      "patch": "@@ -1,3 +1,10 @@\n+2019-09-20  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 24768\n+\t* layout.cc (Layout::Layout): Init lto_slim_object_.\n+\t* object.cc (Sized_relobj_file::do_layout): Wrap overlong line.\n+\tDon't use C cast.  Validate section size.  Don't copy contents.\n+\n 2019-09-20  Alan Modra  <amodra@gmail.com>\n \n \t* powerpc.cc (Target_powerpc::Scan::check_non_pic): Move REL24"
    },
    {
      "sha": "194d088c2a19a4cce1f22ce53f87db77e983ca99",
      "filename": "gold/layout.cc",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/layout.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/layout.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gold/layout.cc?ref=4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
      "patch": "@@ -466,6 +466,7 @@ Layout::Layout(int number_of_input_files, Script_options* script_options)\n     unique_segment_for_sections_specified_(false),\n     incremental_inputs_(NULL),\n     record_output_section_data_from_script_(false),\n+    lto_slim_object_(false),\n     script_output_section_data_list_(),\n     segment_states_(NULL),\n     relaxation_debug_check_(NULL),"
    },
    {
      "sha": "2fca7eb22788257b19de00ddfa5f357957475cfb",
      "filename": "gold/object.cc",
      "status": "modified",
      "additions": 9,
      "deletions": 4,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/object.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4c51dacacf8a97194a1241ad5e1cbf7be00a59a3/gold/object.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gold/object.cc?ref=4c51dacacf8a97194a1241ad5e1cbf7be00a59a3",
      "patch": "@@ -1884,10 +1884,15 @@ Sized_relobj_file<size, big_endian>::do_layout(Symbol_table* symtab,\n       if (strncmp (name, lto_section_name, strlen (lto_section_name)) == 0)\n \t{\n \t  section_size_type contents_len;\n-\t  const unsigned char* pcontents = this->section_contents(i, &contents_len, false);\n-\t  struct lto_section lsection = *(const lto_section*)pcontents;\n-\t  if (lsection.slim_object)\n-\t    layout->set_lto_slim_object ();\n+\t  const unsigned char* pcontents\n+\t    = this->section_contents(i, &contents_len, false);\n+\t  if (contents_len >= sizeof(lto_section))\n+\t    {\n+\t      const lto_section* lsection\n+\t\t= reinterpret_cast<const lto_section*>(pcontents);\n+\t      if (lsection->slim_object)\n+\t\tlayout->set_lto_slim_object();\n+\t    }\n \t}\n     }\n "
    }
  ]
}