{
  "sha": "3046d67a0e29686ec18abd719660969c97973063",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzA0NmQ2N2EwZTI5Njg2ZWMxOGFiZDcxOTY2MDk2OWM5Nzk3MzA2Mw==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-01-24T18:01:49Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-01-24T18:01:49Z"
    },
    "message": "Fix clang/libc++ build\n\nThis fixes the following build error with clang/libc++, reported at\n<https://sourceware.org/ml/gdb-patches/2019-01/msg00537.html>:\n\n  (...)\n  In file included from breakpoint.c:34:\n  In file included from ./inferior.h:54:\n  ./common/forward-scope-exit.h:98:7: error: no matching constructor for\n  initialization of 'decltype(std::bind(&delete_longjmp_breakpoint,\n  std::declval<int>()))' (aka '__bind<void (*)(int), int>')\n      : m_bind_function (std::bind (function, args...))\n\t^                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  ./common/gdb_optional.h:155:19: note: in instantiation of member\n  function 'detail::forward_scope_exit<void (int),\n  &delete_longjmp_breakpoint, void (int)>::forward_scope_exit' requested\n  here\n      new (&m_item) T (std::forward<Args>(args)...);\n\t\t    ^\n  breakpoint.c:11127:18: note: in instantiation of function template\n  specialization 'gdb::optional<detail::forward_scope_exit<void (int),\n  &delete_longjmp_breakpoint, void (int)> >::emplace<int &>' requested\n  here\n\tlj_deleter.emplace (thread);\n\t\t   ^\n  /Applications/Xcode-10.1.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/functional:2220:7:\n  note: candidate constructor (the implicit copy constructor) not\n  viable: no known conversion from '__bind<[...], int &>' to 'const\n  __bind<[...], int>' for 1st argument\n  class __bind\n\t^\n  (...)\n\nI don't really know why I ended up with a copy here.  We can just pass\nthe arguments directly to the being-constructed bind.\n\ngdb/ChangeLog:\n2019-01-24  Pedro Alves  <palves@redhat.com>\n\n\t* common/forward-scope-exit.h\n\t(forward_scope_exit::forward_scope_exit): Pass arguments to\n\tm_bind_function directly, instead of creating a std::bind and\n\tcopying that.",
    "tree": {
      "sha": "0f380fe4adf9476800cf70cd572b1a4bf5b5ff13",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0f380fe4adf9476800cf70cd572b1a4bf5b5ff13"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3046d67a0e29686ec18abd719660969c97973063",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3046d67a0e29686ec18abd719660969c97973063",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3046d67a0e29686ec18abd719660969c97973063",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3046d67a0e29686ec18abd719660969c97973063/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "353229bf405113e6ba2fe21f2a691bc63aa94bd8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/353229bf405113e6ba2fe21f2a691bc63aa94bd8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/353229bf405113e6ba2fe21f2a691bc63aa94bd8"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 8,
    "deletions": 1
  },
  "files": [
    {
      "sha": "e8e01288d96d65dd5dd5b9ad3dd43ddf43d1fdba",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3046d67a0e29686ec18abd719660969c97973063/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3046d67a0e29686ec18abd719660969c97973063/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=3046d67a0e29686ec18abd719660969c97973063",
      "patch": "@@ -1,3 +1,10 @@\n+2019-01-24  Pedro Alves  <palves@redhat.com>\n+\n+\t* common/forward-scope-exit.h\n+\t(forward_scope_exit::forward_scope_exit): Pass arguments to\n+\tm_bind_function directly, instead of creating a std::bind and\n+\tcopying that.\n+\n 2019-01-24  Alan Hayward  <alan.hayward@arm.com>\n \n \t* aarch64-tdep.c (aapcs_is_vfp_call_or_return_candidate_1): Check"
    },
    {
      "sha": "bffc6e683ba0d50d306fbddaea5eeece8d0fc9ec",
      "filename": "gdb/common/forward-scope-exit.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3046d67a0e29686ec18abd719660969c97973063/gdb/common/forward-scope-exit.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3046d67a0e29686ec18abd719660969c97973063/gdb/common/forward-scope-exit.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/common/forward-scope-exit.h?ref=3046d67a0e29686ec18abd719660969c97973063",
      "patch": "@@ -95,7 +95,7 @@ class forward_scope_exit<Function, function, Res (Args...)>\n \n public:\n   explicit forward_scope_exit (Args ...args)\n-    : m_bind_function (std::bind (function, args...))\n+    : m_bind_function (function, args...)\n   {\n     /* Nothing.  */\n   }"
    }
  ]
}