{
  "sha": "17ebe2080050d8855070d05bba1a580e54251d0d",
  "node_id": "C_kwDOANOeidoAKDE3ZWJlMjA4MDA1MGQ4ODU1MDcwZDA1YmJhMWE1ODBlNTQyNTFkMGQ",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-12-03T05:31:02Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-12-04T01:06:58Z"
    },
    "message": "bfd: unify header generation rules\n\nThe logic between these rules are extremely similar, so unify them\ninto a single variable.",
    "tree": {
      "sha": "49e11fc2b4486bb5508bc4403575b2e9ca7cebd1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/49e11fc2b4486bb5508bc4403575b2e9ca7cebd1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/17ebe2080050d8855070d05bba1a580e54251d0d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/17ebe2080050d8855070d05bba1a580e54251d0d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/17ebe2080050d8855070d05bba1a580e54251d0d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/17ebe2080050d8855070d05bba1a580e54251d0d/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0f34c35dd9ff4921cae1a9cbef1cf956a1a56e22",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0f34c35dd9ff4921cae1a9cbef1cf956a1a56e22",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0f34c35dd9ff4921cae1a9cbef1cf956a1a56e22"
    }
  ],
  "stats": {
    "total": 138,
    "additions": 40,
    "deletions": 98
  },
  "files": [
    {
      "sha": "4960cb500b1859a63b117a7792bf2b16ff95a58f",
      "filename": "bfd/Makefile.am",
      "status": "modified",
      "additions": 15,
      "deletions": 44,
      "changes": 59,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/17ebe2080050d8855070d05bba1a580e54251d0d/bfd/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/17ebe2080050d8855070d05bba1a580e54251d0d/bfd/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/Makefile.am?ref=17ebe2080050d8855070d05bba1a580e54251d0d",
      "patch": "@@ -930,69 +930,40 @@ headers: stmp-bin2-h stmp-lbfd-h stmp-lcoff-h\n # We only rebuild the header files automatically if we have been\n # configured with --enable-maintainer-mode.\n \n-$(srcdir)/bfd-in2.h: @MAINT@ stmp-bin2-h ; @true\n-stmp-bin2-h: $(BFD_H_FILES) $(BFD64_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n+REGEN_HEADER = \\\n+\t( \\\n \tset -e; \\\n-\techo \"$(BFD_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(BFD_H_FILES); do \\\n+\techo \"$$H_FILES\" | sed -f $(srcdir)/doc/header.sed; \\\n+\tfor file in $$H_FILES; do \\\n \t  file=\"$(srcdir)/$$file\"; \\\n \t  case $$file in \\\n \t    *-in.h) cat $$file;; \\\n \t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n \t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -f $(srcdir)/doc/proto.str < $$file;; \\\n+\t\t$(MKDOC) $$CHEW_FLAGS -f $(srcdir)/doc/proto.str < $$file;; \\\n \t  esac; \\\n \tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n+\techo \"\\#ifdef __cplusplus\"; \\\n \techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > bfd-in2.h-new\n+\techo \"\\#endif\"; \\\n+\techo \"\\#endif\"; \\\n+\t)\n+\n+$(srcdir)/bfd-in2.h: @MAINT@ stmp-bin2-h ; @true\n+stmp-bin2-h: $(BFD_H_FILES) $(BFD64_H_FILES) $(MKDOC)\n+\t$(AM_V_GEN)H_FILES=\"$(BFD_H_FILES)\" CHEW_FLAGS= ; $(REGEN_HEADER) > bfd-in2.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change bfd-in2.h-new $(srcdir)/bfd-in2.h\n \t$(AM_V_at)touch stmp-bin2-h\n \n $(srcdir)/libbfd.h: @MAINT@ stmp-lbfd-h ; @true\n stmp-lbfd-h: $(LIBBFD_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n-\tset -e; \\\n-\techo \"$(LIBBFD_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(LIBBFD_H_FILES); do \\\n-\t  file=\"$(srcdir)/$$file\"; \\\n-\t  case $$file in \\\n-\t    *-in.h) cat $$file;; \\\n-\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n-\t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -i -f $(srcdir)/doc/proto.str < $$file;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n-\techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > libbfd.h-new\n+\t$(AM_V_GEN)H_FILES=\"$(LIBBFD_H_FILES)\" CHEW_FLAGS=-i ; $(REGEN_HEADER) > libbfd.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change libbfd.h-new $(srcdir)/libbfd.h\n \t$(AM_V_at)touch stmp-lbfd-h\n \n $(srcdir)/libcoff.h: @MAINT@ stmp-lcoff-h ; @true\n stmp-lcoff-h: $(LIBCOFF_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n-\tset -e; \\\n-\techo \"$(LIBCOFF_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(LIBCOFF_H_FILES); do \\\n-\t  file=\"$(srcdir)/$$file\"; \\\n-\t  case $$file in \\\n-\t    *-in.h) cat $$file;; \\\n-\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n-\t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -i -f $(srcdir)/doc/proto.str < $$file;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n-\techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > libcoff.h-new\n+\t$(AM_V_GEN)H_FILES=\"$(LIBCOFF_H_FILES)\" CHEW_FLAGS=-i ; $(REGEN_HEADER) > libcoff.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change libcoff.h-new $(srcdir)/libcoff.h\n \t$(AM_V_at)touch stmp-lcoff-h\n "
    },
    {
      "sha": "a838262bc78eab58388a35e0c7035f73ce7d0817",
      "filename": "bfd/Makefile.in",
      "status": "modified",
      "additions": 25,
      "deletions": 54,
      "changes": 79,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/17ebe2080050d8855070d05bba1a580e54251d0d/bfd/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/17ebe2080050d8855070d05bba1a580e54251d0d/bfd/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/Makefile.in?ref=17ebe2080050d8855070d05bba1a580e54251d0d",
      "patch": "@@ -1176,6 +1176,28 @@ LIBBFD_H_FILES = libbfd-in.h libbfd.c bfdio.c bfdwin.c \\\n \n LIBCOFF_H_FILES = libcoff-in.h coffcode.h\n MKDOC = doc/chew$(EXEEXT_FOR_BUILD)\n+\n+# We only rebuild the header files automatically if we have been\n+# configured with --enable-maintainer-mode.\n+REGEN_HEADER = \\\n+\t( \\\n+\tset -e; \\\n+\techo \"$$H_FILES\" | sed -f $(srcdir)/doc/header.sed; \\\n+\tfor file in $$H_FILES; do \\\n+\t  file=\"$(srcdir)/$$file\"; \\\n+\t  case $$file in \\\n+\t    *-in.h) cat $$file;; \\\n+\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n+\t\t\t\t-e 's,$$,.  */,'; \\\n+\t\t$(MKDOC) $$CHEW_FLAGS -f $(srcdir)/doc/proto.str < $$file;; \\\n+\t  esac; \\\n+\tdone; \\\n+\techo \"\\#ifdef __cplusplus\"; \\\n+\techo \"}\"; \\\n+\techo \"\\#endif\"; \\\n+\techo \"\\#endif\"; \\\n+\t)\n+\n MOSTLYCLEANFILES = ofiles stamp-ofiles\n CLEANFILES = bfd.h dep.sed stmp-bfd-h DEP DEPA DEP1 DEP2 libbfd.a stamp-lib \\\n \tstmp-bin2-h stmp-lbfd-h stmp-lcoff-h\n@@ -2050,72 +2072,21 @@ $(MKDOC):\n \n headers: stmp-bin2-h stmp-lbfd-h stmp-lcoff-h\n \n-# We only rebuild the header files automatically if we have been\n-# configured with --enable-maintainer-mode.\n-\n $(srcdir)/bfd-in2.h: @MAINT@ stmp-bin2-h ; @true\n stmp-bin2-h: $(BFD_H_FILES) $(BFD64_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n-\tset -e; \\\n-\techo \"$(BFD_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(BFD_H_FILES); do \\\n-\t  file=\"$(srcdir)/$$file\"; \\\n-\t  case $$file in \\\n-\t    *-in.h) cat $$file;; \\\n-\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n-\t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -f $(srcdir)/doc/proto.str < $$file;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n-\techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > bfd-in2.h-new\n+\t$(AM_V_GEN)H_FILES=\"$(BFD_H_FILES)\" CHEW_FLAGS= ; $(REGEN_HEADER) > bfd-in2.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change bfd-in2.h-new $(srcdir)/bfd-in2.h\n \t$(AM_V_at)touch stmp-bin2-h\n \n $(srcdir)/libbfd.h: @MAINT@ stmp-lbfd-h ; @true\n stmp-lbfd-h: $(LIBBFD_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n-\tset -e; \\\n-\techo \"$(LIBBFD_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(LIBBFD_H_FILES); do \\\n-\t  file=\"$(srcdir)/$$file\"; \\\n-\t  case $$file in \\\n-\t    *-in.h) cat $$file;; \\\n-\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n-\t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -i -f $(srcdir)/doc/proto.str < $$file;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n-\techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > libbfd.h-new\n+\t$(AM_V_GEN)H_FILES=\"$(LIBBFD_H_FILES)\" CHEW_FLAGS=-i ; $(REGEN_HEADER) > libbfd.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change libbfd.h-new $(srcdir)/libbfd.h\n \t$(AM_V_at)touch stmp-lbfd-h\n \n $(srcdir)/libcoff.h: @MAINT@ stmp-lcoff-h ; @true\n stmp-lcoff-h: $(LIBCOFF_H_FILES) $(MKDOC)\n-\t$(AM_V_GEN)( \\\n-\tset -e; \\\n-\techo \"$(LIBCOFF_H_FILES)\" | sed -f $(srcdir)/doc/header.sed; \\\n-\tfor file in $(LIBCOFF_H_FILES); do \\\n-\t  file=\"$(srcdir)/$$file\"; \\\n-\t  case $$file in \\\n-\t    *-in.h) cat $$file;; \\\n-\t    *)\techo $$file | sed -e 's,.*/,,' -e 's,^,/* Extracted from ,' \\\n-\t\t\t\t-e 's,$$,.  */,'; \\\n-\t\t$(MKDOC) -i -f $(srcdir)/doc/proto.str < $$file;; \\\n-\t  esac; \\\n-\tdone; \\\n-\techo \"#ifdef __cplusplus\"; \\\n-\techo \"}\"; \\\n-\techo \"#endif\"; \\\n-\techo \"#endif\"; \\\n-\t) > libcoff.h-new\n+\t$(AM_V_GEN)H_FILES=\"$(LIBCOFF_H_FILES)\" CHEW_FLAGS=-i ; $(REGEN_HEADER) > libcoff.h-new\n \t$(AM_V_at)$(SHELL) $(srcdir)/../move-if-change libcoff.h-new $(srcdir)/libcoff.h\n \t$(AM_V_at)touch stmp-lcoff-h\n "
    }
  ]
}