{
  "sha": "a39d29cda15d4f303c989eb0ac644a3144827881",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTM5ZDI5Y2RhMTVkNGYzMDNjOTg5ZWIwYWM2NDRhMzE0NDgyNzg4MQ==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-25T11:50:56Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-25T11:51:17Z"
    },
    "message": "gas: Update fr_literal access in frag for GCC 10\n\nWhen access fr_literal in\n\nstruct frag {\n  ...\n  /* Data begins here.  */\n  char fr_literal[1];\n};\n\nwith\n\nchar *buf = fragp->fr_fix + fragp->fr_literal;\n\nGCC 10 gave\n\ngas/config/tc-csky.c: In function \u2018md_convert_frag\u2019:\ngas/config/tc-csky.c:4507:9: error: writing 1 byte into a region of size 0 [-Werror=stringop-overflow=]\n 4507 |  buf[1] = BYTE_1 (CSKYV1_INST_SUBI | (7 << 4));\n      |         ^\n\nChange\n\n  char *buf = fragp->fr_fix + fragp->fr_literal;\n\nto\n\n  char *buf = fragp->fr_fix + &fragp->fr_literal[0];\n\nto silence GCC 10 warning.\n\n\t* config/tc-csky.c (md_convert_frag): Replace fragp->fr_literal\n\twith &fragp->fr_literal[0].\n\t* config/tc-microblaze.c (md_apply_fix): Likewise.\n\t* config/tc-sh.c (md_convert_frag): Likewise.",
    "tree": {
      "sha": "c69bea759e1899279bcde7de86df7bec2f07d95c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c69bea759e1899279bcde7de86df7bec2f07d95c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a39d29cda15d4f303c989eb0ac644a3144827881",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a39d29cda15d4f303c989eb0ac644a3144827881",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a39d29cda15d4f303c989eb0ac644a3144827881",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a39d29cda15d4f303c989eb0ac644a3144827881/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8f7d38efadee2a4f75fb2085e02dab658aa37f38",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f7d38efadee2a4f75fb2085e02dab658aa37f38",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8f7d38efadee2a4f75fb2085e02dab658aa37f38"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 10,
    "deletions": 3
  },
  "files": [
    {
      "sha": "1b0ec36dec2117fb3d187aef2593ee44ecd1845b",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a39d29cda15d4f303c989eb0ac644a3144827881/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a39d29cda15d4f303c989eb0ac644a3144827881/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a39d29cda15d4f303c989eb0ac644a3144827881",
      "patch": "@@ -1,3 +1,10 @@\n+2020-05-25  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/tc-csky.c (md_convert_frag): Replace fragp->fr_literal\n+\twith &fragp->fr_literal[0].\n+\t* config/tc-microblaze.c (md_apply_fix): Likewise.\n+\t* config/tc-sh.c (md_convert_frag): Likewise.\n+\n 2020-05-24  Jim Wilson  <jimw@sifive.com>\n \n \tPR 26025"
    },
    {
      "sha": "be54afbd679cc7e8ab207de47268faf14f3f3ed5",
      "filename": "gas/config/tc-csky.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-csky.c?ref=a39d29cda15d4f303c989eb0ac644a3144827881",
      "patch": "@@ -4196,7 +4196,7 @@ void\n md_convert_frag (bfd *abfd ATTRIBUTE_UNUSED, segT asec,  fragS *fragp)\n {\n   offsetT disp;\n-  char *buf = fragp->fr_fix + fragp->fr_literal;\n+  char *buf = fragp->fr_fix + &fragp->fr_literal[0];\n \n   gas_assert (fragp->fr_symbol);\n   if (IS_EXTERNAL_SYM (fragp->fr_symbol, asec))"
    },
    {
      "sha": "ae5d36dc9c3585a95195a8cdfbd5aa354100d87f",
      "filename": "gas/config/tc-microblaze.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-microblaze.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-microblaze.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-microblaze.c?ref=a39d29cda15d4f303c989eb0ac644a3144827881",
      "patch": "@@ -1983,7 +1983,7 @@ md_apply_fix (fixS *   fixP,\n \t      valueT * valp,\n \t      segT     segment)\n {\n-  char *       buf  = fixP->fx_where + fixP->fx_frag->fr_literal;\n+  char *       buf  = fixP->fx_where + &fixP->fx_frag->fr_literal[0];\n   const char *       file = fixP->fx_file ? fixP->fx_file : _(\"unknown\");\n   const char * symname;\n   /* Note: use offsetT because it is signed, valueT is unsigned.  */"
    },
    {
      "sha": "42f7417c6e3795aaa5a885999cb75e50a161f0d3",
      "filename": "gas/config/tc-sh.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-sh.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a39d29cda15d4f303c989eb0ac644a3144827881/gas/config/tc-sh.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-sh.c?ref=a39d29cda15d4f303c989eb0ac644a3144827881",
      "patch": "@@ -3081,7 +3081,7 @@ md_convert_frag (bfd *headers ATTRIBUTE_UNUSED, segT seg, fragS *fragP)\n \t differently from ones without delay slots.  */\n       {\n \tunsigned char *buffer =\n-\t  (unsigned char *) (fragP->fr_fix + fragP->fr_literal);\n+\t  (unsigned char *) (fragP->fr_fix + &fragP->fr_literal[0]);\n \tint highbyte = target_big_endian ? 0 : 1;\n \tint lowbyte = target_big_endian ? 1 : 0;\n \tint delay = fragP->fr_subtype == C (COND_JUMP_DELAY, COND12);"
    }
  ]
}