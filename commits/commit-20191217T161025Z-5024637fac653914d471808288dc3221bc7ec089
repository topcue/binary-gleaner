{
  "sha": "5024637fac653914d471808288dc3221bc7ec089",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTAyNDYzN2ZhYzY1MzkxNGQ0NzE4MDgyODhkYzMyMjFiYzdlYzA4OQ==",
  "commit": {
    "author": {
      "name": "Bernd Edlinger",
      "email": "bernd.edlinger@hotmail.de",
      "date": "2019-12-15T10:05:47Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2019-12-17T16:10:25Z"
    },
    "message": "Fix skip.exp test failure observed with gcc-9.2.0\n\nWe need to step a second time with this gcc version.\nThe first step jumps back to main before entering foo.\nPreviously the control flow was from bar directly to foo.\n\nFurther ananlysis suggests, that this change in behavior started\nwith gcc-8.1.0 when -gcolumn-info was enabled by default.\nThe option -gcolumn-info was first implemented in gcc-7.1.0 but\ndefault-disabled, so you can get the altered behavior already with\ngcc-7 if you manually enable -gcolumn-info.\n\nPreviously there was just one point where line 30 (of skip.c) started:\n\n  [0x00000032]  Advance Line by 27 to 28\n  [0x00000034]  Copy\n  [0x00000035]  Special opcode 63: advance Address by 4 to 0x4004cb and Line by 2 to 30\n  [0x00000036]  Advance PC by constant 17 to 0x4004dc\n  [0x00000037]  Special opcode 7: advance Address by 0 to 0x4004dc and Line by 2 to 32\n\nBut with -gcolumn-info enabled, we have line 30 three times with different column:\n\n  [0x00000034]  Advance Line by 27 to 28\n  [0x00000036]  Copy\n  [0x00000037]  Set column to 9\n  [0x00000039]  Special opcode 63: advance Address by 4 to 0x4004c6 and Line by 2 to 30\n  [0x0000003a]  Set column to 17\n  [0x0000003c]  Special opcode 75: advance Address by 5 to 0x4004cb and Line by 0 to 30\n  [0x0000003d]  Set column to 3\n  [0x0000003f]  Special opcode 75: advance Address by 5 to 0x4004d0 and Line by 0 to 30\n  [0x00000040]  Special opcode 105: advance Address by 7 to 0x4004d7 and Line by 2 to 32\n\nThat could probably be filtered in dwarf2read.c to keep the old behavior, but\nthe new behavior makes still sense, even if we cannot really make use of the\ncolumn in the line number info for now.",
    "tree": {
      "sha": "7489cea0c61c4f02ee8218f432288cc00551ad97",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7489cea0c61c4f02ee8218f432288cc00551ad97"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5024637fac653914d471808288dc3221bc7ec089",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5024637fac653914d471808288dc3221bc7ec089",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5024637fac653914d471808288dc3221bc7ec089",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5024637fac653914d471808288dc3221bc7ec089/comments",
  "author": {
    "login": "bernd-edlinger",
    "id": 17638929,
    "node_id": "MDQ6VXNlcjE3NjM4OTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernd-edlinger",
    "html_url": "https://github.com/bernd-edlinger",
    "followers_url": "https://api.github.com/users/bernd-edlinger/followers",
    "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions",
    "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs",
    "repos_url": "https://api.github.com/users/bernd-edlinger/repos",
    "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b63634be6407273c2d014753fb0c0ca79ea5ab31",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b63634be6407273c2d014753fb0c0ca79ea5ab31",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b63634be6407273c2d014753fb0c0ca79ea5ab31"
    }
  ],
  "stats": {
    "total": 20,
    "additions": 15,
    "deletions": 5
  },
  "files": [
    {
      "sha": "01f6fdf37b2e992eb919478352deb62cf6c85fb8",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5024637fac653914d471808288dc3221bc7ec089/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5024637fac653914d471808288dc3221bc7ec089/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=5024637fac653914d471808288dc3221bc7ec089",
      "patch": "@@ -1,3 +1,7 @@\n+2019-12-17  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* gdb.base/skip.exp: Fix test failure observed with gcc-9.2.0.\n+\n 2019-12-17  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* gdb.base/skip.exp: Whitespace fix."
    },
    {
      "sha": "d6994d5fdc80f339c95ef4bcd3107c630ed2c1b8",
      "filename": "gdb/testsuite/gdb.base/skip.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 5,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5024637fac653914d471808288dc3221bc7ec089/gdb/testsuite/gdb.base/skip.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5024637fac653914d471808288dc3221bc7ec089/gdb/testsuite/gdb.base/skip.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/skip.exp?ref=5024637fac653914d471808288dc3221bc7ec089",
      "patch": "@@ -141,9 +141,11 @@ with_test_prefix \"step after disabling 3\" {\n     }\n \n     gdb_test \"step\" \"bar \\\\(\\\\) at.*\" \"step 1\"\n-    gdb_test \"step\" \".*\" \"step 2\"; # Return from foo()\n-    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\"\n-    gdb_test \"step\" \".*\" \"step 4\"; # Return from bar()\n+    gdb_test \"step\" \".*\" \"step 2\"; # Return from bar()\n+    # With gcc 9.2.0 we jump once back to main before entering foo here.\n+    # If that happens try to step a second time.\n+    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\" \"main \\\\(\\\\) at .*\" \"step\"\n+    gdb_test \"step\" \".*\" \"step 4\"; # Return from foo()\n     gdb_test \"step\" \"main \\\\(\\\\) at.*\" \"step 5\"\n }\n \n@@ -261,7 +263,9 @@ with_test_prefix \"step using -fu for baz\" {\n     gdb_test_no_output \"skip enable 7\"\n     gdb_test \"step\" \"bar \\\\(\\\\) at.*\" \"step 1\"\n     gdb_test \"step\" \".*\" \"step 2\"; # Return from bar()\n-    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\"\n+    # With gcc 9.2.0 we jump once back to main before entering foo here.\n+    # If that happens try to step a second time.\n+    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\" \"main \\\\(\\\\) at.*\" \"step\"\n     gdb_test \"step\" \".*\" \"step 4\"; # Return from foo()\n     gdb_test \"step\" \"main \\\\(\\\\) at.*\" \"step 5\"\n }\n@@ -276,7 +280,9 @@ with_test_prefix \"step using -rfu for baz\" {\n     gdb_test_no_output \"skip enable 8\"\n     gdb_test \"step\" \"bar \\\\(\\\\) at.*\" \"step 1\"\n     gdb_test \"step\" \".*\" \"step 2\"; # Return from bar()\n-    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\"\n+    # With gcc 9.2.0 we jump once back to main before entering foo here.\n+    # If that happens try to step a second time.\n+    gdb_test \"step\" \"foo \\\\(\\\\) at.*\" \"step 3\" \"main \\\\(\\\\) at.*\" \"step\"\n     gdb_test \"step\" \".*\" \"step 4\"; # Return from foo()\n     gdb_test \"step\" \"main \\\\(\\\\) at.*\" \"step 5\"\n }"
    }
  ]
}