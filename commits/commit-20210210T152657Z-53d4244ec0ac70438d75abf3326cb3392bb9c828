{
  "sha": "53d4244ec0ac70438d75abf3326cb3392bb9c828",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTNkNDI0NGVjMGFjNzA0MzhkNzVhYmYzMzI2Y2IzMzkyYmI5YzgyOA==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-02-02T15:39:26Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-02-10T15:26:57Z"
    },
    "message": "intl: always picify\n\nlibintl is included in several shared libraries (at least\nlibinproctrace.so and libctf.so): unconditionally picify with code\nborrowed from libiberty configure.  (It's not performance-critical, so\ndon't bother making separate PIC and non-PIC libraries like libiberty\ndoes.)\n\nintl/ChangeLog\n2021-02-02  Nick Alcock  <nick.alcock@oracle.com>\n\n\t* aclocal.m4: include picflag.m4.\n\t* configure.ac (PICFLAG): Add and substitute.\n\t* Makefile.in (PICFLAG): New.\n\t(COMPILE): Use it.\n\t* configure: Regenerate.",
    "tree": {
      "sha": "4d9cbb3622894ee2f0419c74af424f0131363122",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4d9cbb3622894ee2f0419c74af424f0131363122"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/53d4244ec0ac70438d75abf3326cb3392bb9c828",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/53d4244ec0ac70438d75abf3326cb3392bb9c828",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/53d4244ec0ac70438d75abf3326cb3392bb9c828",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/53d4244ec0ac70438d75abf3326cb3392bb9c828/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "adda0248ed0f7a2245f53a79ef6dbc2093a1be22",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/adda0248ed0f7a2245f53a79ef6dbc2093a1be22",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/adda0248ed0f7a2245f53a79ef6dbc2093a1be22"
    }
  ],
  "stats": {
    "total": 103,
    "additions": 102,
    "deletions": 1
  },
  "files": [
    {
      "sha": "8da6ef7be9f3edc427fe238523dd4ca0851f475a",
      "filename": "intl/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/intl/ChangeLog?ref=53d4244ec0ac70438d75abf3326cb3392bb9c828",
      "patch": "@@ -1,3 +1,11 @@\n+2021-02-02  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* aclocal.m4: include picflag.m4.\n+\t* configure.ac (PICFLAG): Add and substitute.\n+\t* Makefile.in (PICFLAG): New.\n+\t(COMPILE): Use it.\n+\t* configure: Regenerate.\n+\n 2020-04-16  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/92008"
    },
    {
      "sha": "96df727baeadb71c0f900c8c0233b841671e3081",
      "filename": "intl/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/intl/Makefile.in?ref=53d4244ec0ac70438d75abf3326cb3392bb9c828",
      "patch": "@@ -49,8 +49,9 @@ CFLAGS = @CFLAGS@\n LDFLAGS = @LDFLAGS@\n LIBS = @LIBS@\n DEFS = -DHAVE_CONFIG_H\n+PICFLAG = @PICFLAG@\n \n-COMPILE = $(CC) -c $(CPPFLAGS) $(CFLAGS) $(DEFS) $(DEFS-$@) $(INCLUDES)\n+COMPILE = $(CC) -c $(CPPFLAGS) $(CFLAGS) $(PICFLAG) $(DEFS) $(DEFS-$@) $(INCLUDES)\n \n HEADERS = \\\n   gmo.h \\"
    },
    {
      "sha": "0a42b42ea8c169aa233ac5d21137341ba0dbb61f",
      "filename": "intl/aclocal.m4",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/intl/aclocal.m4?ref=53d4244ec0ac70438d75abf3326cb3392bb9c828",
      "patch": "@@ -26,6 +26,7 @@ m4_include([../config/lib-link.m4])\n m4_include([../config/lib-prefix.m4])\n m4_include([../config/nls.m4])\n m4_include([../config/override.m4])\n+m4_include([../config/picflag.m4])\n m4_include([../config/po.m4])\n m4_include([../config/progtest.m4])\n m4_include([../config/stdint_h.m4])"
    },
    {
      "sha": "6498a3925709c446f39d06cf84c4241a61d40b05",
      "filename": "intl/configure",
      "status": "modified",
      "additions": 86,
      "deletions": 0,
      "changes": 86,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/intl/configure?ref=53d4244ec0ac70438d75abf3326cb3392bb9c828",
      "patch": "@@ -624,6 +624,7 @@ ac_subst_vars='LTLIBOBJS\n LIBOBJS\n BISON3_NO\n BISON3_YES\n+PICFLAG\n INCINTL\n LIBINTL_DEP\n MAINT\n@@ -6793,6 +6794,91 @@ case $USE_INCLUDED_LIBINTL in\n     ;;\n esac\n \n+# intl is sometimes linked into shared libraries even without --enable-shared\n+# (e.g. gdbsupport's inprocess agent): so always PICify, just in case.\n+\n+\n+\n+\n+case \"${host}\" in\n+    # PIC is the default on some targets or must not be used.\n+    *-*-darwin*)\n+\t# For darwin, common symbols are not allowed in MH_DYLIB files\n+\tcase \"${CFLAGS}\" in\n+\t  # If we are using a compiler supporting mdynamic-no-pic\n+\t  # and the option has been tested as safe to add, then cancel\n+\t  # it here, since the code generated is incompatible with shared\n+\t  # libs.\n+\t  *-mdynamic-no-pic*) PICFLAG='-fno-common -mno-dynamic-no-pic' ;;\n+\t  *) PICFLAG=-fno-common ;;\n+\tesac\n+\t;;\n+    alpha*-dec-osf5*)\n+\t# PIC is the default.\n+\t;;\n+    hppa*64*-*-hpux*)\n+\t# PIC is the default for 64-bit PA HP-UX.\n+\t;;\n+    i[34567]86-*-cygwin* | x86_64-*-cygwin*)\n+\t;;\n+    i[34567]86-*-mingw* | x86_64-*-mingw*)\n+\t;;\n+    i[34567]86-*-interix[3-9]*)\n+\t# Interix 3.x gcc -fpic/-fPIC options generate broken code.\n+\t# Instead, we relocate shared libraries at runtime.\n+\t;;\n+    i[34567]86-*-nto-qnx*)\n+\t# QNX uses GNU C++, but need to define -shared option too, otherwise\n+\t# it will coredump.\n+\tPICFLAG='-fPIC -shared'\n+\t;;\n+    i[34567]86-pc-msdosdjgpp*)\n+\t# DJGPP does not support shared libraries at all.\n+\t;;\n+    ia64*-*-hpux*)\n+\t# On IA64 HP-UX, PIC is the default but the pic flag\n+\t# sets the default TLS model and affects inlining.\n+\tPICFLAG=-fPIC\n+\t;;\n+    mips-sgi-irix6*)\n+\t# PIC is the default.\n+\t;;\n+    rs6000-ibm-aix* | powerpc-ibm-aix*)\n+\t# All AIX code is PIC.\n+\t;;\n+\n+    # Some targets support both -fPIC and -fpic, but prefer the latter.\n+    # FIXME: Why?\n+    i[34567]86-*-* | x86_64-*-*)\n+\tPICFLAG=-fpic\n+\t;;\n+    # FIXME: Override -fPIC default in libgcc only?\n+    sh-*-linux* | sh[2346lbe]*-*-linux*)\n+\tPICFLAG=-fpic\n+\t;;\n+    # FIXME: Simplify to sh*-*-netbsd*?\n+    sh-*-netbsdelf* | shl*-*-netbsdelf* | sh5-*-netbsd* | sh5l*-*-netbsd* | \\\n+      sh64-*-netbsd* | sh64l*-*-netbsd*)\n+\tPICFLAG=-fpic\n+\t;;\n+    # Default to -fPIC unless specified otherwise.\n+    *)\n+\tPICFLAG=-fPIC\n+\t;;\n+esac\n+\n+# If the user explicitly uses -fpic/-fPIC, keep that.\n+case \"${CFLAGS}\" in\n+    *-fpic*)\n+\tPICFLAG=-fpic\n+\t;;\n+    *-fPIC*)\n+\tPICFLAG=-fPIC\n+\t;;\n+esac\n+\n+\n+\n BISON3_YES='#'\n BISON3_NO=\n if test \"$INTLBISON\" != :; then"
    },
    {
      "sha": "5ec7b0944e2f0c4e2b463f411626b92ac2fcac8c",
      "filename": "intl/configure.ac",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d4244ec0ac70438d75abf3326cb3392bb9c828/intl/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/intl/configure.ac?ref=53d4244ec0ac70438d75abf3326cb3392bb9c828",
      "patch": "@@ -47,6 +47,11 @@ case $USE_INCLUDED_LIBINTL in\n     ;;\n esac\n \n+# intl is sometimes linked into shared libraries even without --enable-shared\n+# (e.g. gdbsupport's inprocess agent): so always PICify, just in case.\n+GCC_PICFLAG\n+AC_SUBST(PICFLAG)\n+\n BISON3_YES='#'\n BISON3_NO=\n if test \"$INTLBISON\" != :; then"
    }
  ]
}