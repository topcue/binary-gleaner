{
  "sha": "204f543cae7a5dc908264b49d558191d0ceb989c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjA0ZjU0M2NhZTdhNWRjOTA4MjY0YjQ5ZDU1ODE5MWQwY2ViOTg5Yw==",
  "commit": {
    "author": {
      "name": "Christian Eggers",
      "email": "ceggers@gmx.de",
      "date": "2019-03-10T18:21:58Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-03-13T02:59:35Z"
    },
    "message": "dwarf2: Align relocation within .debug_line section\n\nAll relocations specify a byte address.  As dwarf debug information is\norganized in octets, some relocations may not be aligned.  While it\nmight be possible to define special relocations that operate at an\noctet offset from their address, it's easier to ensure the relocations\nare aligned by padding with \"nop\" statements.\n\nIn most dwarf sections this requirement is already fulfilled, only\nrelocations for symbol address within the .debug_line section can be\nmisaligned.\n\n\t* dwarf2dbg.c (out_set_addr): Align relocation within .debug_line.",
    "tree": {
      "sha": "88f49eb9f269fcf54d13f1a9bd7281003d87bb08",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/88f49eb9f269fcf54d13f1a9bd7281003d87bb08"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/204f543cae7a5dc908264b49d558191d0ceb989c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/204f543cae7a5dc908264b49d558191d0ceb989c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/204f543cae7a5dc908264b49d558191d0ceb989c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/204f543cae7a5dc908264b49d558191d0ceb989c/comments",
  "author": null,
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "145c4477d239fef4e31a457ff8a1ba7153e9a448",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/145c4477d239fef4e31a457ff8a1ba7153e9a448",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/145c4477d239fef4e31a457ff8a1ba7153e9a448"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 19,
    "deletions": 3
  },
  "files": [
    {
      "sha": "d08c09647c626b702e49c41d11c8c5593c763882",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/204f543cae7a5dc908264b49d558191d0ceb989c/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/204f543cae7a5dc908264b49d558191d0ceb989c/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=204f543cae7a5dc908264b49d558191d0ceb989c",
      "patch": "@@ -1,3 +1,7 @@\n+2019-03-13  Christian Eggers  <ceggers@gmx.de>\n+\n+\t* dwarf2dbg.c (out_set_addr): Align relocation within .debug_line.\n+\n 2019-03-13  Christian Eggers  <ceggers@gmx.de>\n \n \t* dwarf2dbg.c (out_debug_line): Pad size of .debug_line section."
    },
    {
      "sha": "2d316ddcb9ca18da799302d28ca2c42f36dce80d",
      "filename": "gas/dwarf2dbg.c",
      "status": "modified",
      "additions": 15,
      "deletions": 3,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/204f543cae7a5dc908264b49d558191d0ceb989c/gas/dwarf2dbg.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/204f543cae7a5dc908264b49d558191d0ceb989c/gas/dwarf2dbg.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/dwarf2dbg.c?ref=204f543cae7a5dc908264b49d558191d0ceb989c",
      "patch": "@@ -1108,16 +1108,28 @@ get_frag_fix (fragS *frag, segT seg)\n \n /* Set an absolute address (may result in a relocation entry).  */\n \n+static void\n+out_inc_line_addr (int line_delta, addressT addr_delta);\n+\n static void\n out_set_addr (symbolS *sym)\n {\n   expressionS exp;\n+  addressT expr_addr, expr_addr_aligned;\n \n   memset (&exp, 0, sizeof exp);\n-  out_opcode (DW_LNS_extended_op);\n-  out_uleb128 (sizeof_address + 1);\n \n-  out_opcode (DW_LNE_set_address);\n+  /* The expression at the bottom must be aligned to OCTETS_PER_BYTE.  The\n+     statements after the for loop will contribute 3 more octets.  */\n+  expr_addr = frag_now_fix_octets () + 3;\n+  expr_addr_aligned = (expr_addr + OCTETS_PER_BYTE - 1) & -OCTETS_PER_BYTE;\n+  for ( ; expr_addr != expr_addr_aligned; expr_addr++)\n+    out_inc_line_addr (0, 0);  /* NOP */\n+\n+  out_opcode (DW_LNS_extended_op);   /* 1 octet */\n+  out_uleb128 (sizeof_address + 1);  /* 1 octet */\n+\n+  out_opcode (DW_LNE_set_address);   /* 1 octet */\n   exp.X_op = O_symbol;\n   exp.X_add_symbol = sym;\n   exp.X_add_number = 0;"
    }
  ]
}