{
  "sha": "60a7223fdd196d540f87504833166f558c95c035",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjBhNzIyM2ZkZDE5NmQ1NDBmODc1MDQ4MzMxNjZmNTU4Yzk1YzAzNQ==",
  "commit": {
    "author": {
      "name": "Alexander Fedotov",
      "email": "alfedotov@gmail.com",
      "date": "2020-12-08T10:07:23Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-12-08T14:50:12Z"
    },
    "message": "gdbsupport: Use LOCALAPPDATA to determine cache dir\n\nUse the LOCALAPPDATA environment variable to determine the cache dir\nwhen running on Windows with native command line, otherwise nasty\nwarning \"Couldn't determine a path for index cached directory\" appears.\n\nChange-Id: I77903f9f0cb4743555866b8aea892cef55132589",
    "tree": {
      "sha": "7effd01923f0d141b2a9db352c03577e4eba1580",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7effd01923f0d141b2a9db352c03577e4eba1580"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/60a7223fdd196d540f87504833166f558c95c035",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/60a7223fdd196d540f87504833166f558c95c035",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/60a7223fdd196d540f87504833166f558c95c035",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/60a7223fdd196d540f87504833166f558c95c035/comments",
  "author": {
    "login": "alfedotov",
    "id": 11288772,
    "node_id": "MDQ6VXNlcjExMjg4Nzcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/11288772?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alfedotov",
    "html_url": "https://github.com/alfedotov",
    "followers_url": "https://api.github.com/users/alfedotov/followers",
    "following_url": "https://api.github.com/users/alfedotov/following{/other_user}",
    "gists_url": "https://api.github.com/users/alfedotov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alfedotov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alfedotov/subscriptions",
    "organizations_url": "https://api.github.com/users/alfedotov/orgs",
    "repos_url": "https://api.github.com/users/alfedotov/repos",
    "events_url": "https://api.github.com/users/alfedotov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alfedotov/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b46551b20c9617e0cf2fda9a32b2132f3a7fd35c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b46551b20c9617e0cf2fda9a32b2132f3a7fd35c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b46551b20c9617e0cf2fda9a32b2132f3a7fd35c"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 15,
    "deletions": 0
  },
  "files": [
    {
      "sha": "417e44aff31dc5ccdad140dbad85991d6dd46834",
      "filename": "gdbsupport/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/60a7223fdd196d540f87504833166f558c95c035/gdbsupport/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/60a7223fdd196d540f87504833166f558c95c035/gdbsupport/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/ChangeLog?ref=60a7223fdd196d540f87504833166f558c95c035",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-08  Alexander Fedotov  <alfedotov@gmail.com>\n+\n+\t* pathstuff.cc (get_standard_cache_dir): Use LOCALAPPDATA environment\n+\tvariable when running on Windows.\n+\n 2020-12-01  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* tdesc.cc (print_xml_feature::visit): Print enum fields using"
    },
    {
      "sha": "b23e6ed064cfbbb2d2eac930eb910c61de23597f",
      "filename": "gdbsupport/pathstuff.cc",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/60a7223fdd196d540f87504833166f558c95c035/gdbsupport/pathstuff.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/60a7223fdd196d540f87504833166f558c95c035/gdbsupport/pathstuff.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/pathstuff.cc?ref=60a7223fdd196d540f87504833166f558c95c035",
      "patch": "@@ -238,6 +238,16 @@ get_standard_cache_dir ()\n       return string_printf (\"%s/\" HOME_CACHE_DIR \"/gdb\", abs.get ());\n     }\n \n+#ifdef WIN32\n+  const char *win_home = getenv (\"LOCALAPPDATA\");\n+  if (win_home != NULL)\n+    {\n+      /* Make sure the path is absolute and tilde-expanded.  */\n+      gdb::unique_xmalloc_ptr<char> abs (gdb_abspath (win_home));\n+      return string_printf (\"%s/gdb\", abs.get ());\n+    }\n+#endif\n+    \n   return {};\n }\n "
    }
  ]
}