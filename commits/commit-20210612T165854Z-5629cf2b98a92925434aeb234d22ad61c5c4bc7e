{
  "sha": "5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTYyOWNmMmI5OGE5MjkyNTQzNGFlYjIzNGQyMmFkNjFjNWM0YmM3ZQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-12T16:57:02Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-12T16:58:54Z"
    },
    "message": "sim: ppc: unify env settings too\n\nThe ppc port doesn't share a lot of the common logic, but there are\na few bits that bleed across.  Have it use the common configure for\nenvironment settings too to avoid duplicate define errors after the\nrecent unification with the other ports.",
    "tree": {
      "sha": "2cb6446b3292c51c59c1ec4472e89697a1e6c185",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2cb6446b3292c51c59c1ec4472e89697a1e6c185"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5ea45474021e98cbb325534b328e391593119cb0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5ea45474021e98cbb325534b328e391593119cb0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5ea45474021e98cbb325534b328e391593119cb0"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 23,
    "deletions": 45
  },
  "files": [
    {
      "sha": "fe7e7777d5bc3c6328e0b7386c3c47f507508666",
      "filename": "sim/ppc/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/ChangeLog?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -1,3 +1,10 @@\n+2021-06-12  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* configure.ac: Delete sim-env configure option.\n+\t* defs.h: Include ../config.h.  Undefine PACKAGE* defines.\n+\t* std-config.h (ALL_ENVIRONMENT): Define.\n+\t* config.in, configure: Regenerate.\n+\n 2021-06-09  Mike Frysinger  <vapier@gentoo.org>\n \n \t* basics.h (NULL): Delete."
    },
    {
      "sha": "b7530f0081a8918c6b9b16e9724a5a173008fe05",
      "filename": "sim/ppc/config.in",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/config.in?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -325,9 +325,6 @@\n /* Sim assert settings */\n #undef WITH_ASSERT\n \n-/* Sim default environment */\n-#undef WITH_ENVIRONMENT\n-\n /* How to route I/O */\n #undef WITH_STDIO\n "
    },
    {
      "sha": "4781393e69e12e5a4bc58ae212a567a356c4ae67",
      "filename": "sim/ppc/configure",
      "status": "modified",
      "additions": 1,
      "deletions": 25,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/configure?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -753,7 +753,6 @@ enable_sim_decode_mechanism\n enable_sim_default_model\n enable_sim_duplicate\n enable_sim_endian\n-enable_sim_env\n enable_sim_filter\n enable_sim_float\n enable_sim_hardware\n@@ -1416,7 +1415,6 @@ Optional Features:\n   --enable-sim-default-model=which\tSpecify default PowerPC to model.\n   --enable-sim-duplicate\t\tExpand (duplicate) semantic functions.\n   --enable-sim-endian=endian\t\tSpecify target byte endian orientation.\n-  --enable-sim-env=env\t\t\tSpecify target environment (operating, virtual, user).\n   --enable-sim-filter=rule\t\tSpecify filter rules.\n   --enable-sim-float\t\t\tSpecify whether the target has hard, soft, altivec or e500 floating point.\n   --enable-sim-hardware=list\t\tSpecify the hardware to be included in the build.\n@@ -3536,28 +3534,6 @@ else\n fi\n \n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking default sim environment setting\" >&5\n-$as_echo_n \"checking default sim environment setting... \" >&6; }\n-sim_env=\"0\"\n-# Check whether --enable-sim-env was given.\n-if test \"${enable_sim_env+set}\" = set; then :\n-  enableval=$enable_sim_env; case \"${enableval}\" in\n-  operating | os | oea)\tsim_env=\"OPERATING_ENVIRONMENT\";;\n-  virtual | vea)\tsim_env=\"VIRTUAL_ENVIRONMENT\";;\n-  user | uea)\t\tsim_env=\"USER_ENVIRONMENT\";;\n-  no)\t\t\tsim_env=\"0\";;\n-  *)\t\t\tas_fn_error $? \"Unknown value $enableval passed to --enable-sim-env\" \"$LINENO\" 5;;\n-esac\n-fi\n-\n-cat >>confdefs.h <<_ACEOF\n-#define WITH_ENVIRONMENT $sim_env\n-_ACEOF\n-\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $sim_env\" >&5\n-$as_echo \"$sim_env\" >&6; }\n-\n-\n # Check whether --enable-sim-filter was given.\n if test \"${enable_sim_filter+set}\" = set; then :\n   enableval=$enable_sim_filter; case \"${enableval}\" in\n@@ -4596,7 +4572,7 @@ if test \"${enable_sim_monitor+set}\" = set; then :\n   no)\t\tsim_monitor=\"-DWITH_MON=0\";;\n   instruction)\tsim_monitor=\"-DWITH_MON=MONITOR_INSTRUCTION_ISSUE\";;\n   memory)\tsim_monitor=\"-DWITH_MON=MONITOR_LOAD_STORE_UNIT\";;\n-  *)\t\tas_fn_error $? \"\\\"Unknown value $enableval passed to --enable-sim-mon\\\"\" \"$LINENO\" 5; sim_env=\"\";;\n+  *)\t\tas_fn_error $? \"\\\"Unknown value $enableval passed to --enable-sim-mon\\\"\" \"$LINENO\" 5;;\n esac\n if test x\"$silent\" != x\"yes\" && test x\"$sim_monitor\" != x\"\"; then\n   echo \"Setting monitor flags = $sim_monitor\" 6>&1"
    },
    {
      "sha": "8ff54d90658b262ab0bd3a76e382aacc39d0c76a",
      "filename": "sim/ppc/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 16,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/configure.ac?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -137,21 +137,6 @@ if test x\"$silent\" != x\"yes\" && test x\"$sim_endian\" != x\"\"; then\n fi],[sim_endian=\"\"])dnl\n \n \n-AC_MSG_CHECKING([default sim environment setting])\n-sim_env=\"0\"\n-AC_ARG_ENABLE(sim-env,\n-[  --enable-sim-env=env\t\t\tSpecify target environment (operating, virtual, user).],\n-[case \"${enableval}\" in\n-  operating | os | oea)\tsim_env=\"OPERATING_ENVIRONMENT\";;\n-  virtual | vea)\tsim_env=\"VIRTUAL_ENVIRONMENT\";;\n-  user | uea)\t\tsim_env=\"USER_ENVIRONMENT\";;\n-  no)\t\t\tsim_env=\"0\";;\n-  *)\t\t\tAC_MSG_ERROR([Unknown value $enableval passed to --enable-sim-env]);;\n-esac])dnl\n-AC_DEFINE_UNQUOTED([WITH_ENVIRONMENT], [$sim_env], [Sim default environment])\n-AC_MSG_RESULT($sim_env)\n-\n-\n AC_ARG_ENABLE(sim-filter,\n [  --enable-sim-filter=rule\t\tSpecify filter rules.],\n [case \"${enableval}\" in\n@@ -457,7 +442,7 @@ AC_ARG_ENABLE(sim-monitor,\n   no)\t\tsim_monitor=\"-DWITH_MON=0\";;\n   instruction)\tsim_monitor=\"-DWITH_MON=MONITOR_INSTRUCTION_ISSUE\";;\n   memory)\tsim_monitor=\"-DWITH_MON=MONITOR_LOAD_STORE_UNIT\";;\n-  *)\t\tAC_MSG_ERROR(\"Unknown value $enableval passed to --enable-sim-mon\"); sim_env=\"\";;\n+  *)\t\tAC_MSG_ERROR(\"Unknown value $enableval passed to --enable-sim-mon\");;\n esac\n if test x\"$silent\" != x\"yes\" && test x\"$sim_monitor\" != x\"\"; then\n   echo \"Setting monitor flags = $sim_monitor\" 6>&1"
    },
    {
      "sha": "9a89844adb701bfba1a5e34d3b999f660b070747",
      "filename": "sim/ppc/defs.h",
      "status": "modified",
      "additions": 13,
      "deletions": 1,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/defs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/defs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/defs.h?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -20,7 +20,19 @@\n #ifndef DEFS_H\n #define DEFS_H\n \n-/* Include sim's various configure tests.  */\n+/* Include arch-specific sim's various configure tests.  */\n #include \"config.h\"\n \n+/* Reset macros that our config.h will provide.  */\n+#undef PACKAGE\n+#undef PACKAGE_BUGREPORT\n+#undef PACKAGE_NAME\n+#undef PACKAGE_STRING\n+#undef PACKAGE_TARNAME\n+#undef PACKAGE_URL\n+#undef PACKAGE_VERSION\n+\n+/* Include common sim's various configure tests.  */\n+#include \"../config.h\"\n+\n #endif"
    },
    {
      "sha": "6cf7f27fe5585ede5f38eb9ff8286cbda41da930",
      "filename": "sim/ppc/std-config.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/std-config.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5629cf2b98a92925434aeb234d22ad61c5c4bc7e/sim/ppc/std-config.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/std-config.h?ref=5629cf2b98a92925434aeb234d22ad61c5c4bc7e",
      "patch": "@@ -107,6 +107,7 @@ extern int current_target_byte_order;\n    CURRENT_ENVIRONMENT specifies which of vea or oea is required for\n    the current runtime. */\n \n+#define ALL_ENVIRONMENT\t\t\t0\n #define USER_ENVIRONMENT\t\t1\n #define VIRTUAL_ENVIRONMENT\t\t2\n #define OPERATING_ENVIRONMENT\t\t3"
    }
  ]
}