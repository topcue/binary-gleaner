{
  "sha": "cc6fd584ed920b14d57703bb62c9ed773cea3732",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2M2ZmQ1ODRlZDkyMGIxNGQ1NzcwM2JiNjJjOWVkNzczY2VhMzczMg==",
  "commit": {
    "author": {
      "name": "Jozef Lawrynowicz",
      "email": "jozef.l@mittosystems.com",
      "date": "2020-11-20T10:31:07Z"
    },
    "committer": {
      "name": "Jozef Lawrynowicz",
      "email": "jozef.l@mittosystems.com",
      "date": "2020-11-20T10:33:28Z"
    },
    "message": "Fix SHF_GNU_RETAIN testsuite fallout\n\nbinutils/ChangeLog:\n\n\t* testsuite/binutils-all/readelf-maskos-1a.d: Fix test for unrecognized\n\tbit set in SHF_MASKOS range.\n\t* testsuite/binutils-all/readelf-maskos-1b.d: Likewise.\n\t* testsuite/binutils-all/readelf-maskos-unknown.s: New test.\n\nld/ChangeLog:\n\n\t* testsuite/ld-elf/retain3.s: Move symbolic reference into writeable\n\t.data section from read-only .text section.\n\t* testsuite/ld-elf/retain5.d: Don't pass --print-gc-sections for test\n\tthat doesn't require it.\n\t* testsuite/ld-elf/retain6a.d: Adjust test.\n\t* testsuite/ld-elf/retain6main.s: Move symbolic reference into writeable\n\t.data section from read-only .text section.",
    "tree": {
      "sha": "4b8865c327f3662bfc86a6fca66c1b5c0b009020",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4b8865c327f3662bfc86a6fca66c1b5c0b009020"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cc6fd584ed920b14d57703bb62c9ed773cea3732",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc6fd584ed920b14d57703bb62c9ed773cea3732",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cc6fd584ed920b14d57703bb62c9ed773cea3732",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc6fd584ed920b14d57703bb62c9ed773cea3732/comments",
  "author": {
    "login": "jozefl-mitto",
    "id": 36524004,
    "node_id": "MDQ6VXNlcjM2NTI0MDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jozefl-mitto",
    "html_url": "https://github.com/jozefl-mitto",
    "followers_url": "https://api.github.com/users/jozefl-mitto/followers",
    "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}",
    "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions",
    "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs",
    "repos_url": "https://api.github.com/users/jozefl-mitto/repos",
    "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jozefl-mitto",
    "id": 36524004,
    "node_id": "MDQ6VXNlcjM2NTI0MDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jozefl-mitto",
    "html_url": "https://github.com/jozefl-mitto",
    "followers_url": "https://api.github.com/users/jozefl-mitto/followers",
    "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}",
    "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions",
    "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs",
    "repos_url": "https://api.github.com/users/jozefl-mitto/repos",
    "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f58a189583b907340fa878d2961adec8548bb808",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f58a189583b907340fa878d2961adec8548bb808",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f58a189583b907340fa878d2961adec8548bb808"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 48,
    "deletions": 20
  },
  "files": [
    {
      "sha": "4acc0d479a12827fa74877a6e69a20d45d3ca7a2",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,3 +1,10 @@\n+2020-11-20  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* testsuite/binutils-all/readelf-maskos-1a.d: Fix test for unrecognized\n+\tbit set in SHF_MASKOS range.\n+\t* testsuite/binutils-all/readelf-maskos-1b.d: Likewise.\n+\t* testsuite/binutils-all/readelf-maskos-unknown.s: New test.\n+\n 2020-11-18  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n \n \t* NEWS: Announce SHF_GNU_RETAIN support."
    },
    {
      "sha": "cb18b3b08bd3cfcd08335dc0b64c4a2278b5821f",
      "filename": "binutils/testsuite/binutils-all/readelf-maskos-1a.d",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-1a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-1a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf-maskos-1a.d?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,10 +1,10 @@\n #name: Unknown SHF_MASKOS value in section\n-#source: readelf-maskos.s\n-#notarget: [supports_gnu_osabi] msp430-*-elf visium-*-elf\n-#xfail: arm-*-elf\n+#source: readelf-maskos-unknown.s\n+#notarget: mips-*-* hppa-*-* score-*-* msp430-*-elf visium-*-elf\n #readelf: -S --wide\n-# PR26722 for the arm-*-elf XFAIL\n+# Only run this test for targets that are not ELFOSABI_STANDALONE, and do not\n+# set SHF_MASKOS bit 0x8000000.\n \n #...\n-  \\[[ 0-9]+\\] .data.retain_var.*WAo.*\n+  \\[[ 0-9]+\\] .data.var.*WAo.*\n #pass"
    },
    {
      "sha": "5c363f698f933a478fabfb55a778d9cdcccd6450",
      "filename": "binutils/testsuite/binutils-all/readelf-maskos-1b.d",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-1b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-1b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf-maskos-1b.d?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,12 +1,12 @@\n #name: -t (section details) for unknown SHF_MASKOS value in section\n-#source: readelf-maskos.s\n-#notarget: [supports_gnu_osabi] msp430-*-elf visium-*-elf\n-#xfail: arm-*-elf\n+#source: readelf-maskos-unknown.s\n+#notarget: mips-*-* hppa-*-* score-*-* msp430-*-elf visium-*-elf\n #readelf: -S -t --wide\n-# PR26722 for the arm-*-elf XFAIL\n+# Only run this test for targets that are not ELFOSABI_STANDALONE, and do not\n+# set SHF_MASKOS bit 0x8000000.\n \n #...\n-  \\[[ 0-9]+\\] .data.retain_var\n+  \\[[ 0-9]+\\] .data.var\n        PROGBITS +0+ +[0-9a-f]+ +[0-9a-f]+ +[0-9a-f]+ +0 +0 +(1|2|4|8)\n-       \\[00200003\\]: WRITE, ALLOC, OS \\(00200000\\)\n+       \\[0+0800003\\]: WRITE, ALLOC, OS \\(0+0800000\\)\n #pass"
    },
    {
      "sha": "b36066b538ad7d67d6499f1e51d5614d79e6b45f",
      "filename": "binutils/testsuite/binutils-all/readelf-maskos-unknown.s",
      "status": "added",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-unknown.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/binutils/testsuite/binutils-all/readelf-maskos-unknown.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf-maskos-unknown.s?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -0,0 +1,11 @@\n+  .section\t.data.var,\"0x800003\"\n+\t.global\tvar\n+\t.type\tvar, %object\n+var:\n+\t.long\t2\n+\n+\t.section\t.text._start,\"ax\"\n+\t.global\t_start\n+\t.type\t_start, %function\n+_start:\n+\t.word 0"
    },
    {
      "sha": "c0b47f480b36ec490561b757e236013114a2a1b8",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,3 +1,13 @@\n+2020-11-20  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* testsuite/ld-elf/retain3.s: Move symbolic reference into writeable\n+\t.data section from read-only .text section.\n+\t* testsuite/ld-elf/retain5.d: Don't pass --print-gc-sections for test\n+\tthat doesn't require it.\n+\t* testsuite/ld-elf/retain6a.d: Adjust test.\n+\t* testsuite/ld-elf/retain6main.s: Move symbolic reference into writeable\n+\t.data section from read-only .text section.\n+\n 2020-11-18  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/ld-powerpc/group1.d,"
    },
    {
      "sha": "9e388330ab071e45b26d4f6d0cf2178367508922",
      "filename": "ld/testsuite/ld-elf/retain3.s",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain3.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain3.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/retain3.s?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -6,9 +6,9 @@\n foo:\n \t.word 0\n \n-\t.section\t.text.bar,\"axR\"\n+\t.section\t.data.bar,\"awR\"\n \t.global\tbar\n-\t.type\tbar, %function\n+\t.type\tbar, %object\n bar:\n \t.long foo\n "
    },
    {
      "sha": "9759531d6577429f40d5812ccc258543fa1c6f68",
      "filename": "ld/testsuite/ld-elf/retain5.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain5.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain5.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/retain5.d?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,6 +1,6 @@\n #name: SHF_GNU_RETAIN 5 (don't pull SHF_GNU_RETAIN section out of lib)\n #source: retain5main.s\n-#ld: --gc-sections -e _start --print-gc-sections -Ltmpdir -lretain5 -Map=retain5.map\n+#ld: --gc-sections -e _start -Ltmpdir -lretain5 -Map=retain5.map\n #notarget: ![supports_gnu_osabi] ![check_gc_sections_available]\n #map: retain5.map\n #DUMPPROG: nm"
    },
    {
      "sha": "c8a47d58c0aa7da9a373b00d1e4c22aceec662de",
      "filename": "ld/testsuite/ld-elf/retain6a.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain6a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain6a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/retain6a.d?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -9,5 +9,5 @@\n #...\n [0-9a-f]+ . retain_from_lib\n #...\n-[0-9a-f]+ . retained_fn\n+[0-9a-f]+ . retained_var\n #pass"
    },
    {
      "sha": "a1916dea85691beac7c2b9db018c87d65697d596",
      "filename": "ld/testsuite/ld-elf/retain6main.s",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain6main.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc6fd584ed920b14d57703bb62c9ed773cea3732/ld/testsuite/ld-elf/retain6main.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/retain6main.s?ref=cc6fd584ed920b14d57703bb62c9ed773cea3732",
      "patch": "@@ -1,9 +1,9 @@\n-/* Undefined symbol reference in retained section .text.retained_fn requires\n+/* Undefined symbol reference in retained section .data.retained_var requires\n    symbol definition to be pulled out of library.  */\n-\t.section\t.text.retained_fn,\"axR\"\n-\t.global\tretained_fn\n-\t.type\tretained_fn, %function\n-retained_fn:\n+\t.section\t.data.retained_var,\"awR\"\n+\t.global\tretained_var\n+\t.type\tretained_var, %object\n+retained_var:\n \t.long bar\n \n \t.section\t.text._start,\"ax\""
    }
  ]
}