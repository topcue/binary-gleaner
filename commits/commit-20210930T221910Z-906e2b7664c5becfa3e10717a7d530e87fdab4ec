{
  "sha": "906e2b7664c5becfa3e10717a7d530e87fdab4ec",
  "node_id": "C_kwDOANOeidoAKDkwNmUyYjc2NjRjNWJlY2ZhM2UxMDcxN2E3ZDUzMGU4N2ZkYWI0ZWM",
  "commit": {
    "author": {
      "name": "Sergio Durigan Junior",
      "email": "sergiodj@sergiodj.net",
      "date": "2021-09-25T21:27:23Z"
    },
    "committer": {
      "name": "Sergio Durigan Junior",
      "email": "sergiodj@sergiodj.net",
      "date": "2021-09-30T22:19:10Z"
    },
    "message": "[PR gdb/28369] Use get_shell on gdb/ser-pipe.c\n\nPR gdb/28369 reports that gdb/ser-pipe.c has an 'execl' function call\nwith a hard-coded \"/bin/sh\" as its argument.  We've had 'get_shell'\nfor a while now, which is conscious about the SHELL environment and a\nbetter alternative to always calling \"/bin/sh\".\n\nBug: https://sourceware.org/bugzilla/show_bug.cgi?id=28369",
    "tree": {
      "sha": "24d35fbeb7356183990284daa497056ffcd0b144",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/24d35fbeb7356183990284daa497056ffcd0b144"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/906e2b7664c5becfa3e10717a7d530e87fdab4ec",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/906e2b7664c5becfa3e10717a7d530e87fdab4ec",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/906e2b7664c5becfa3e10717a7d530e87fdab4ec",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/906e2b7664c5becfa3e10717a7d530e87fdab4ec/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "e4860c08f990675c9b3535ab18cc7ff21e2a5639",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e4860c08f990675c9b3535ab18cc7ff21e2a5639",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e4860c08f990675c9b3535ab18cc7ff21e2a5639"
    }
  ],
  "stats": {
    "total": 5,
    "additions": 4,
    "deletions": 1
  },
  "files": [
    {
      "sha": "257e0d4a10705cec04933dfb9b93bf9bc012189e",
      "filename": "gdb/ser-pipe.c",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/906e2b7664c5becfa3e10717a7d530e87fdab4ec/gdb/ser-pipe.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/906e2b7664c5becfa3e10717a7d530e87fdab4ec/gdb/ser-pipe.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ser-pipe.c?ref=906e2b7664c5becfa3e10717a7d530e87fdab4ec",
      "patch": "@@ -30,6 +30,7 @@\n #include \"gdbsupport/gdb_sys_time.h\"\n #include <fcntl.h>\n #include \"gdbsupport/filestuff.h\"\n+#include \"gdbsupport/pathstuff.h\"\n \n #include <signal.h>\n \n@@ -122,7 +123,9 @@ pipe_open (struct serial *scb, const char *name)\n \t}\n \n       close_most_fds ();\n-      execl (\"/bin/sh\", \"sh\", \"-c\", name, (char *) 0);\n+\n+      const char *shellfile = get_shell ();\n+      execl (shellfile, shellfile, \"-c\", name, (char *) 0);\n       _exit (127);\n     }\n "
    }
  ]
}