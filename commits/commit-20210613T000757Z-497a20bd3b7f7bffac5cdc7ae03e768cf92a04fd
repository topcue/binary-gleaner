{
  "sha": "497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDk3YTIwYmQzYjdmN2JmZmFjNWNkYzdhZTAzZTc2OGNmOTJhMDRmZA==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-07T00:16:48Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-13T00:07:57Z"
    },
    "message": "sim: split debug/stdio/trace/profile options into dedicated m4 files\n\nThis follows existing organizational structure with one configure option\nper m4 file, and will make it easier to move to the common configure dir.",
    "tree": {
      "sha": "2cbb25fb1d009872a7c767d12ba43d73ae8eaa6a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2cbb25fb1d009872a7c767d12ba43d73ae8eaa6a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4b530cfa37a27624afc183350470ae261698b7f7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4b530cfa37a27624afc183350470ae261698b7f7",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4b530cfa37a27624afc183350470ae261698b7f7"
    }
  ],
  "stats": {
    "total": 273,
    "additions": 178,
    "deletions": 95
  },
  "files": [
    {
      "sha": "07a974ff5fce0e08442542923f2871c09c744d72",
      "filename": "sim/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ChangeLog?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -1,3 +1,14 @@\n+2021-06-12  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* m4/sim_ac_common.m4: Replace --enable-sim-debug, --enable-sim-stdio,\n+\t--enable-sim-trace, and --enable-sim-profile with calls to\n+\tSIM_AC_OPTION_DEBUG, SIM_AC_OPTION_STDIO, SIM_AC_OPTION_TRACE, and\n+\tSIM_AC_OPTION_PROFILE.\n+\t* m4/sim_ac_option_debug.m4: New file.\n+\t* m4/sim_ac_option_profile.m4: New file.\n+\t* m4/sim_ac_option_stdio.m4: New file.\n+\t* m4/sim_ac_option_trace.m4: New file.\n+\n 2021-06-12  Mike Frysinger  <vapier@gentoo.org>\n \n \t* m4/sim_ac_platform.m4: Check more headers, funcs, structs, and"
    },
    {
      "sha": "353855707ad7936b995aa79510bb9cbec1a7bdc6",
      "filename": "sim/m4/sim_ac_common.m4",
      "status": "modified",
      "additions": 6,
      "deletions": 95,
      "changes": 101,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_common.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_common.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m4/sim_ac_common.m4?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -66,102 +66,13 @@ dnl --enable-maintainer-mode.\n AM_MAINTAINER_MODE\n \n \n-dnl --enable-sim-debug is for developers of the simulator\n-dnl the allowable values are work-in-progress\n-AC_MSG_CHECKING([for sim debug setting])\n-sim_debug=\"0\"\n-AC_ARG_ENABLE(sim-debug,\n-[AS_HELP_STRING([--enable-sim-debug=opts],\n-\t\t[Enable debugging flags (for developers of the sim itself)])],\n-[case \"${enableval}\" in\n-  yes) sim_debug=\"7\";;\n-  no)  sim_debug=\"0\";;\n-  *)   sim_debug=\"($enableval)\";;\n-esac])dnl\n-if test \"$sim_debug\" != \"0\"; then\n-  AC_DEFINE_UNQUOTED([DEBUG], [$sim_debug], [Sim debug setting])\n-fi\n-AC_DEFINE_UNQUOTED([WITH_DEBUG], [$sim_debug], [Sim debug setting])\n-AC_MSG_RESULT($sim_debug)\n-\n-\n-dnl --enable-sim-stdio is for users of the simulator\n-dnl It determines if IO from the program is routed through STDIO (buffered)\n-AC_MSG_CHECKING([for sim stdio debug behavior])\n-sim_stdio=\"0\"\n-AC_ARG_ENABLE(sim-stdio,\n-[AS_HELP_STRING([--enable-sim-stdio],\n-\t\t[Specify whether to use stdio for console input/output])],\n-[case \"${enableval}\" in\n-  yes)\tsim_stdio=\"DO_USE_STDIO\";;\n-  no)\tsim_stdio=\"DONT_USE_STDIO\";;\n-  *)\tAC_MSG_ERROR([Unknown value $enableval passed to --enable-sim-stdio]);;\n-esac])dnl\n-AC_DEFINE_UNQUOTED([WITH_STDIO], [$sim_stdio], [How to route I/O])\n-AC_MSG_RESULT($sim_stdio)\n-\n-\n-dnl --enable-sim-trace is for users of the simulator\n-dnl The argument is either a bitmask of things to enable [exactly what is\n-dnl up to the simulator], or is a comma separated list of names of tracing\n-dnl elements to enable.  The latter is only supported on simulators that\n-dnl use WITH_TRACE.  Default to all tracing but internal debug.\n-AC_MSG_CHECKING([for sim trace settings])\n-sim_trace=\"~TRACE_debug\"\n-AC_ARG_ENABLE(sim-trace,\n-[AS_HELP_STRING([--enable-sim-trace=opts],\n-\t\t[Enable tracing of simulated programs])],\n-[case \"${enableval}\" in\n-  yes)\tsim_trace=\"-1\";;\n-  no)\tsim_trace=\"0\";;\n-  [[-0-9]]*)\n-\tsim_trace=\"'(${enableval})'\";;\n-  [[[:lower:]]]*)\n-\tsim_trace=\"\"\n-\tfor x in `echo \"$enableval\" | sed -e \"s/,/ /g\"`; do\n-\t  if test x\"$sim_trace\" = x; then\n-\t    sim_trace=\"(TRACE_$x\"\n-\t  else\n-\t    sim_trace=\"${sim_trace}|TRACE_$x\"\n-\t  fi\n-\tdone\n-\tsim_trace=\"$sim_trace)\" ;;\n-esac])dnl\n-AC_DEFINE_UNQUOTED([WITH_TRACE], [$sim_trace], [Sim trace settings])\n-AC_MSG_RESULT($sim_trace)\n-\n-\n-dnl --enable-sim-profile\n-dnl The argument is either a bitmask of things to enable [exactly what is\n-dnl up to the simulator], or is a comma separated list of names of profiling\n-dnl elements to enable.  The latter is only supported on simulators that\n-dnl use WITH_PROFILE.\n-AC_MSG_CHECKING([for sim profile settings])\n-profile=\"1\"\n-sim_profile=\"-1\"\n-AC_ARG_ENABLE(sim-profile,\n-[AS_HELP_STRING([--enable-sim-profile=opts], [Enable profiling flags])],\n-[case \"${enableval}\" in\n-  yes)\tprofile=\"1\" sim_profile=\"-1\";;\n-  no)\tprofile=\"0\" sim_profile=\"0\";;\n-  [[-0-9]]*)\n-\tprofile=\"(${enableval})\" sim_profile=\"(${enableval})\";;\n-  [[a-z]]*)\n-    profile=\"1\"\n-\tsim_profile=\"\"\n-\tfor x in `echo \"$enableval\" | sed -e \"s/,/ /g\"`; do\n-\t  if test x\"$sim_profile\" = x; then\n-\t    sim_profile=\"(PROFILE_$x\"\n-\t  else\n-\t    sim_profile=\"${sim_profile}|PROFILE_$x\"\n-\t  fi\n-\tdone\n-\tsim_profile=\"$sim_profile)\" ;;\n-esac])dnl\n-AC_DEFINE_UNQUOTED([PROFILE], [$profile], [Sim profile settings])\n-AC_DEFINE_UNQUOTED([WITH_PROFILE], [$sim_profile], [Sim profile settings])\n-AC_MSG_RESULT($sim_profile)\n+SIM_AC_OPTION_DEBUG\n \n+SIM_AC_OPTION_STDIO\n+\n+SIM_AC_OPTION_TRACE\n+\n+SIM_AC_OPTION_PROFILE\n \n SIM_AC_OPTION_INLINE\n "
    },
    {
      "sha": "41faef927fce32adb2c1bc5699aa18014104c25a",
      "filename": "sim/m4/sim_ac_option_debug.m4",
      "status": "added",
      "additions": 35,
      "deletions": 0,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_debug.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_debug.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m4/sim_ac_option_debug.m4?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -0,0 +1,35 @@\n+dnl   Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+dnl\n+dnl This program is free software; you can redistribute it and/or modify\n+dnl it under the terms of the GNU General Public License as published by\n+dnl the Free Software Foundation; either version 3 of the License, or\n+dnl (at your option) any later version.\n+dnl\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY; without even the implied warranty of\n+dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+dnl GNU General Public License for more details.\n+dnl\n+dnl You should have received a copy of the GNU General Public License\n+dnl along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+dnl\n+dnl --enable-sim-debug is for developers of the simulator\n+dnl the allowable values are work-in-progress\n+AC_DEFUN([SIM_AC_OPTION_DEBUG],\n+[dnl\n+AC_MSG_CHECKING([for sim debug setting])\n+sim_debug=\"0\"\n+AC_ARG_ENABLE(sim-debug,\n+[AS_HELP_STRING([--enable-sim-debug=opts],\n+\t\t[Enable debugging flags (for developers of the sim itself)])],\n+[case \"${enableval}\" in\n+  yes) sim_debug=\"7\";;\n+  no)  sim_debug=\"0\";;\n+  *)   sim_debug=\"($enableval)\";;\n+esac])dnl\n+if test \"$sim_debug\" != \"0\"; then\n+  AC_DEFINE_UNQUOTED([DEBUG], [$sim_debug], [Sim debug setting])\n+fi\n+AC_DEFINE_UNQUOTED([WITH_DEBUG], [$sim_debug], [Sim debug setting])\n+AC_MSG_RESULT($sim_debug)\n+])"
    },
    {
      "sha": "07f8d958eefc1220d28bbcb6fc1a0dbac8906daa",
      "filename": "sim/m4/sim_ac_option_profile.m4",
      "status": "added",
      "additions": 48,
      "deletions": 0,
      "changes": 48,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_profile.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_profile.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m4/sim_ac_option_profile.m4?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -0,0 +1,48 @@\n+dnl   Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+dnl\n+dnl This program is free software; you can redistribute it and/or modify\n+dnl it under the terms of the GNU General Public License as published by\n+dnl the Free Software Foundation; either version 3 of the License, or\n+dnl (at your option) any later version.\n+dnl\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY; without even the implied warranty of\n+dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+dnl GNU General Public License for more details.\n+dnl\n+dnl You should have received a copy of the GNU General Public License\n+dnl along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+dnl\n+dnl --enable-sim-profile\n+dnl The argument is either a bitmask of things to enable [exactly what is\n+dnl up to the simulator], or is a comma separated list of names of profiling\n+dnl elements to enable.  The latter is only supported on simulators that\n+dnl use WITH_PROFILE.\n+AC_DEFUN([SIM_AC_OPTION_PROFILE],\n+[dnl\n+AC_MSG_CHECKING([for sim profile settings])\n+profile=\"1\"\n+sim_profile=\"-1\"\n+AC_ARG_ENABLE(sim-profile,\n+[AS_HELP_STRING([--enable-sim-profile=opts], [Enable profiling flags])],\n+[case \"${enableval}\" in\n+  yes)\tprofile=\"1\" sim_profile=\"-1\";;\n+  no)\tprofile=\"0\" sim_profile=\"0\";;\n+  [[-0-9]]*)\n+\tprofile=\"(${enableval})\" sim_profile=\"(${enableval})\";;\n+  [[a-z]]*)\n+    profile=\"1\"\n+\tsim_profile=\"\"\n+\tfor x in `echo \"$enableval\" | sed -e \"s/,/ /g\"`; do\n+\t  if test x\"$sim_profile\" = x; then\n+\t    sim_profile=\"(PROFILE_$x\"\n+\t  else\n+\t    sim_profile=\"${sim_profile}|PROFILE_$x\"\n+\t  fi\n+\tdone\n+\tsim_profile=\"$sim_profile)\" ;;\n+esac])dnl\n+AC_DEFINE_UNQUOTED([PROFILE], [$profile], [Sim profile settings])\n+AC_DEFINE_UNQUOTED([WITH_PROFILE], [$sim_profile], [Sim profile settings])\n+AC_MSG_RESULT($sim_profile)\n+])"
    },
    {
      "sha": "f4ae3081ee7bc4ce7a186f4a83eaa4ebcc969a8c",
      "filename": "sim/m4/sim_ac_option_stdio.m4",
      "status": "added",
      "additions": 32,
      "deletions": 0,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_stdio.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_stdio.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m4/sim_ac_option_stdio.m4?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -0,0 +1,32 @@\n+dnl   Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+dnl\n+dnl This program is free software; you can redistribute it and/or modify\n+dnl it under the terms of the GNU General Public License as published by\n+dnl the Free Software Foundation; either version 3 of the License, or\n+dnl (at your option) any later version.\n+dnl\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY; without even the implied warranty of\n+dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+dnl GNU General Public License for more details.\n+dnl\n+dnl You should have received a copy of the GNU General Public License\n+dnl along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+dnl\n+dnl --enable-sim-stdio is for users of the simulator\n+dnl It determines if IO from the program is routed through STDIO (buffered)\n+AC_DEFUN([SIM_AC_OPTION_STDIO],\n+[dnl\n+AC_MSG_CHECKING([for sim stdio debug behavior])\n+sim_stdio=\"0\"\n+AC_ARG_ENABLE(sim-stdio,\n+[AS_HELP_STRING([--enable-sim-stdio],\n+\t\t[Specify whether to use stdio for console input/output])],\n+[case \"${enableval}\" in\n+  yes)\tsim_stdio=\"DO_USE_STDIO\";;\n+  no)\tsim_stdio=\"DONT_USE_STDIO\";;\n+  *)\tAC_MSG_ERROR([Unknown value $enableval passed to --enable-sim-stdio]);;\n+esac])dnl\n+AC_DEFINE_UNQUOTED([WITH_STDIO], [$sim_stdio], [How to route I/O])\n+AC_MSG_RESULT($sim_stdio)\n+])"
    },
    {
      "sha": "d7dfead45a81901cb6d7fe3cc3851572e3277e2c",
      "filename": "sim/m4/sim_ac_option_trace.m4",
      "status": "added",
      "additions": 46,
      "deletions": 0,
      "changes": 46,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_trace.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd/sim/m4/sim_ac_option_trace.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m4/sim_ac_option_trace.m4?ref=497a20bd3b7f7bffac5cdc7ae03e768cf92a04fd",
      "patch": "@@ -0,0 +1,46 @@\n+dnl   Copyright (C) 1997-2021 Free Software Foundation, Inc.\n+dnl\n+dnl This program is free software; you can redistribute it and/or modify\n+dnl it under the terms of the GNU General Public License as published by\n+dnl the Free Software Foundation; either version 3 of the License, or\n+dnl (at your option) any later version.\n+dnl\n+dnl This program is distributed in the hope that it will be useful,\n+dnl but WITHOUT ANY WARRANTY; without even the implied warranty of\n+dnl MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+dnl GNU General Public License for more details.\n+dnl\n+dnl You should have received a copy of the GNU General Public License\n+dnl along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+dnl\n+dnl --enable-sim-trace is for users of the simulator\n+dnl The argument is either a bitmask of things to enable [exactly what is\n+dnl up to the simulator], or is a comma separated list of names of tracing\n+dnl elements to enable.  The latter is only supported on simulators that\n+dnl use WITH_TRACE.  Default to all tracing but internal debug.\n+AC_DEFUN([SIM_AC_OPTION_TRACE],\n+[dnl\n+AC_MSG_CHECKING([for sim trace settings])\n+sim_trace=\"~TRACE_debug\"\n+AC_ARG_ENABLE(sim-trace,\n+[AS_HELP_STRING([--enable-sim-trace=opts],\n+\t\t[Enable tracing of simulated programs])],\n+[case \"${enableval}\" in\n+  yes)\tsim_trace=\"-1\";;\n+  no)\tsim_trace=\"0\";;\n+  [[-0-9]]*)\n+\tsim_trace=\"'(${enableval})'\";;\n+  [[[:lower:]]]*)\n+\tsim_trace=\"\"\n+\tfor x in `echo \"$enableval\" | sed -e \"s/,/ /g\"`; do\n+\t  if test x\"$sim_trace\" = x; then\n+\t    sim_trace=\"(TRACE_$x\"\n+\t  else\n+\t    sim_trace=\"${sim_trace}|TRACE_$x\"\n+\t  fi\n+\tdone\n+\tsim_trace=\"$sim_trace)\" ;;\n+esac])dnl\n+AC_DEFINE_UNQUOTED([WITH_TRACE], [$sim_trace], [Sim trace settings])\n+AC_MSG_RESULT($sim_trace)\n+])"
    }
  ]
}