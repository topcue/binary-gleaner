{
  "sha": "c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzkyZGYxNDljMjk1MThmNmUxZDRhMzE3NGIzZTI5MTYyZmNkM2FkNg==",
  "commit": {
    "author": {
      "name": "Alan Hayward",
      "email": "alan.hayward@arm.com",
      "date": "2019-03-28T12:33:29Z"
    },
    "committer": {
      "name": "Alan Hayward",
      "email": "alan.hayward@arm.com",
      "date": "2019-03-28T15:00:30Z"
    },
    "message": "Testsuite: set sysroot when using gdbserver\n\nWhen testing using native-gdbserver and native-extended-gdbserver, the sysroot\nis not set.  This results in a warning from GDB and files are sent via the\nremote protocol, which can be slow.\n\nOn Ubuntu 18.04 (unlike most distros) the debug versions of the standard\nlibraries are included by default in /usr/lib/debug/.\n\nThese file reads are causing a complete native-gdbserver run on the AArch64\nbuildbot slave to timeout after 2.5 hours.  This is also causing the builds\nto back up on the slave.\n\nThe solution is to ensure the sysroot is set to / for all local boards.\n\nThis drastically reduces the time of a test. For example, gdb.base/sigall.exp\ndrops from 23 seconds to 4 seconds.\nA full native-gdbserver run on the AArch64 slave now takes 8 minutes.\n\ngdb/testsuite/ChangeLog:\n\n\t* boards/local-board.exp: set sysroot to /.",
    "tree": {
      "sha": "c9ba3b09d5c4822626c6fefdd017055c318485b1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c9ba3b09d5c4822626c6fefdd017055c318485b1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c92df149c29518f6e1d4a3174b3e29162fcd3ad6/comments",
  "author": {
    "login": "a74nh",
    "id": 4146708,
    "node_id": "MDQ6VXNlcjQxNDY3MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4146708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/a74nh",
    "html_url": "https://github.com/a74nh",
    "followers_url": "https://api.github.com/users/a74nh/followers",
    "following_url": "https://api.github.com/users/a74nh/following{/other_user}",
    "gists_url": "https://api.github.com/users/a74nh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/a74nh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/a74nh/subscriptions",
    "organizations_url": "https://api.github.com/users/a74nh/orgs",
    "repos_url": "https://api.github.com/users/a74nh/repos",
    "events_url": "https://api.github.com/users/a74nh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/a74nh/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "a74nh",
    "id": 4146708,
    "node_id": "MDQ6VXNlcjQxNDY3MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4146708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/a74nh",
    "html_url": "https://github.com/a74nh",
    "followers_url": "https://api.github.com/users/a74nh/followers",
    "following_url": "https://api.github.com/users/a74nh/following{/other_user}",
    "gists_url": "https://api.github.com/users/a74nh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/a74nh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/a74nh/subscriptions",
    "organizations_url": "https://api.github.com/users/a74nh/orgs",
    "repos_url": "https://api.github.com/users/a74nh/repos",
    "events_url": "https://api.github.com/users/a74nh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/a74nh/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cd5b60741993f9e075d3f2492e2251da5bdf260f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cd5b60741993f9e075d3f2492e2251da5bdf260f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cd5b60741993f9e075d3f2492e2251da5bdf260f"
    }
  ],
  "stats": {
    "total": 8,
    "additions": 8,
    "deletions": 0
  },
  "files": [
    {
      "sha": "ba97fc392570e4889bb2f2ec93680b8ee3d510f9",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c92df149c29518f6e1d4a3174b3e29162fcd3ad6/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c92df149c29518f6e1d4a3174b3e29162fcd3ad6/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
      "patch": "@@ -1,3 +1,8 @@\n+2019-03-28  Alan Hayward  <alan.hayward@arm.com>\n+\t    Pedro Alves  <palves@redhat.com>\n+\n+\t* boards/local-board.exp: set sysroot to /.\n+\n 2019-03-27  Alan Hayward  <alan.hayward@arm.com>\n \n \t* gdb.base/interrupt-daemon-attach.c (main): Add alarm and sleep"
    },
    {
      "sha": "bf710f463286c8f11946d1206fa1d54d40af4c52",
      "filename": "gdb/testsuite/boards/local-board.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c92df149c29518f6e1d4a3174b3e29162fcd3ad6/gdb/testsuite/boards/local-board.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c92df149c29518f6e1d4a3174b3e29162fcd3ad6/gdb/testsuite/boards/local-board.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/boards/local-board.exp?ref=c92df149c29518f6e1d4a3174b3e29162fcd3ad6",
      "patch": "@@ -22,3 +22,6 @@ global board_info\n # Remove any target variant specifications from the name.\n set baseboard [lindex [split $board \"/\"] 0]\n set board_info($baseboard,isremote) 0\n+\n+# Set sysroot to avoid sending files via the remote protocol.\n+set GDBFLAGS \"${GDBFLAGS} -ex \\\"set sysroot /\\\"\""
    }
  ]
}