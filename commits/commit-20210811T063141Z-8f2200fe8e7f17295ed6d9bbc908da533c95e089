{
  "sha": "8f2200fe8e7f17295ed6d9bbc908da533c95e089",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OGYyMjAwZmU4ZTdmMTcyOTVlZDZkOWJiYzkwOGRhNTMzYzk1ZTA4OQ==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-08-11T06:31:41Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-08-11T06:31:41Z"
    },
    "message": "x86/ELF: fix .tfloat output with hex input\n\nThe ELF psABI-s are quite clear here: On 32-bit the data type is 12\nbytes long (with 2 bytes of trailing padding), while on 64-bit it is 16\nbytes long (with 6 bytes of padding). Make hex_float() capable of\nhandling such padding.\n\nNote that this brings the emitted data size of .dc.x / .dcb.x in line\nalso for non-ELF targets; so far they were different depending on input\nformat (dec vs hex).\n\nExtend the existing x86 testcases.",
    "tree": {
      "sha": "fc606ca2fff1395fc1965304f92a2440d21e986d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fc606ca2fff1395fc1965304f92a2440d21e986d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8f2200fe8e7f17295ed6d9bbc908da533c95e089",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f2200fe8e7f17295ed6d9bbc908da533c95e089",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8f2200fe8e7f17295ed6d9bbc908da533c95e089",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f2200fe8e7f17295ed6d9bbc908da533c95e089/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e74e2b4c336fad993b0dd31b859af919ad52ec9e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e74e2b4c336fad993b0dd31b859af919ad52ec9e"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 29,
    "deletions": 4
  },
  "files": [
    {
      "sha": "b8e845dd569f64edc906419c5fc5c2f08a80ad85",
      "filename": "gas/read.c",
      "status": "modified",
      "additions": 16,
      "deletions": 4,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/read.c?ref=8f2200fe8e7f17295ed6d9bbc908da533c95e089",
      "patch": "@@ -4847,7 +4847,7 @@ parse_repeat_cons (expressionS *exp, unsigned int nbytes)\n static int\n hex_float (int float_type, char *bytes)\n {\n-  int length;\n+  int length, pad = 0;\n   int i;\n \n   switch (float_type)\n@@ -4868,12 +4868,22 @@ hex_float (int float_type, char *bytes)\n \n     case 'x':\n     case 'X':\n-      length = 12;\n+#ifdef X_PRECISION\n+      length = X_PRECISION * sizeof (LITTLENUM_TYPE);\n+      pad = X_PRECISION_PAD * sizeof (LITTLENUM_TYPE);\n+      if (!length)\n+#endif\n+\tlength = 12;\n       break;\n \n     case 'p':\n     case 'P':\n-      length = 12;\n+#ifdef P_PRECISION\n+      length = P_PRECISION * sizeof (LITTLENUM_TYPE);\n+      pad = P_PRECISION_PAD * sizeof (LITTLENUM_TYPE);\n+      if (!length)\n+#endif\n+\tlength = 12;\n       break;\n \n     default:\n@@ -4926,7 +4936,9 @@ hex_float (int float_type, char *bytes)\n \tmemset (bytes, 0, length - i);\n     }\n \n-  return length;\n+  memset (bytes + length, 0, pad);\n+\n+  return length + pad;\n }\n \n /*\t\t\tfloat_cons()"
    },
    {
      "sha": "eefe84db310de6bb793236509aa31545500a916c",
      "filename": "gas/testsuite/gas/i386/fp-elf32.d",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp-elf32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp-elf32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp-elf32.d?ref=8f2200fe8e7f17295ed6d9bbc908da533c95e089",
      "patch": "@@ -11,3 +11,6 @@ Contents of section .data:\n  0030 00000000 0000a044 01000000 0000a044  .*\n  0040 00000000 0000f03f 00000000 00000000  .*\n  0050 ffffffff ffffffff ffffffff cccccccc  .*\n+ 0060 00000000 00000080 fe3f0000 00000000  .*\n+ 0070 00000080 fdbf0000 00000000 00000080  .*\n+ 0080 ff030000 aaaaaaaa aaaaaaaa aaaaaaaa  .*"
    },
    {
      "sha": "0756aa1e36a32811c191a4661a6b9e0a325ab1b0",
      "filename": "gas/testsuite/gas/i386/fp-elf64.d",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp-elf64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp-elf64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp-elf64.d?ref=8f2200fe8e7f17295ed6d9bbc908da533c95e089",
      "patch": "@@ -11,3 +11,6 @@ Contents of section .data:\n  0030 00000000 0000a044 01000000 0000a044  .*\n  0040 00000000 0000f03f 00000000 00000000  .*\n  0050 ffffffff ffffffff ffffffff ffffffff  .*\n+ 0060 00000000 00000080 fe3f0000 00000000  .*\n+ 0070 00000000 00000080 fdbf0000 00000000  .*\n+ 0080 00000000 00000080 ff030000 00000000  .*"
    },
    {
      "sha": "b93595ac8c3e8b971a7e0a7a636e5601c5057783",
      "filename": "gas/testsuite/gas/i386/fp.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.d?ref=8f2200fe8e7f17295ed6d9bbc908da533c95e089",
      "patch": "@@ -10,3 +10,5 @@ Contents of section .data:\n  0030 00000000 0000a044 01000000 0000a044  .*\n  0040 00000000 0000f03f 00000000 00000000  .*\n  0050 ffffffff ffffffff ffffcccc cccccccc  .*\n+ 0060 00000000 00000080 fe3f0000 00000000  .*\n+ 0070 0080fdbf 00000000 00000080 ff03aaaa  .*"
    },
    {
      "sha": "7fe642e5180ddd8333487b0e2789e3ee8df29291",
      "filename": "gas/testsuite/gas/i386/fp.s",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f2200fe8e7f17295ed6d9bbc908da533c95e089/gas/testsuite/gas/i386/fp.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.s?ref=8f2200fe8e7f17295ed6d9bbc908da533c95e089",
      "patch": "@@ -24,3 +24,8 @@\n \n \t.ds.x 1, -1\n \t.p2align 4,0xcc\n+\n+\t.tfloat 0x:3ffe80\n+\t.dc.x 0x:bffd80\n+\t.dcb.x 1, 0x:03ff80\n+\t.p2align 4,0xaa"
    }
  ]
}