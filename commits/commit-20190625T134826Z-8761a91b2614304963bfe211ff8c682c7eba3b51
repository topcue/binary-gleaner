{
  "sha": "8761a91b2614304963bfe211ff8c682c7eba3b51",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODc2MWE5MWIyNjE0MzA0OTYzYmZlMjExZmY4YzY4MmM3ZWJhM2I1MQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-16T16:42:09Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-25T13:48:26Z"
    },
    "message": "Introduce tui_win_info::clear_detail method\n\nThis introduces the clear_detail method and updates the various\nsubclasses of tui_win_info to implement it.  A subsequent patch will\nremove tui_clear_win_detail, but that isn't done for now because at\nthis point it isn't readily obvious that the NULL check is not needed.\n\ngdb/ChangeLog\n2019-06-25  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-data.h (struct tui_win_info, struct tui_source_window)\n\t(struct tui_data_window, struct tui_cmd_window): Declare\n\tclear_detail method.\n\t* tui/tui-data.c (tui_source_window::clear_detail)\n\t(tui_cmd_window::clear_detail, tui_data_window::clear_detail): New\n\tmethods.\n\t(tui_clear_win_detail): Simplify.",
    "tree": {
      "sha": "5407f564c3d3788c0f9e491cbdc2e5b4f0a0da2e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5407f564c3d3788c0f9e491cbdc2e5b4f0a0da2e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8761a91b2614304963bfe211ff8c682c7eba3b51",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8761a91b2614304963bfe211ff8c682c7eba3b51",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8761a91b2614304963bfe211ff8c682c7eba3b51",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8761a91b2614304963bfe211ff8c682c7eba3b51/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0ed69edaab683b9290a05962faa50d970facfa84",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0ed69edaab683b9290a05962faa50d970facfa84",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0ed69edaab683b9290a05962faa50d970facfa84"
    }
  ],
  "stats": {
    "total": 76,
    "additions": 51,
    "deletions": 25
  },
  "files": [
    {
      "sha": "cf6dff89d81c15e32458cd6eda7e364e80521098",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=8761a91b2614304963bfe211ff8c682c7eba3b51",
      "patch": "@@ -1,3 +1,13 @@\n+2019-06-25  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-data.h (struct tui_win_info, struct tui_source_window)\n+\t(struct tui_data_window, struct tui_cmd_window): Declare\n+\tclear_detail method.\n+\t* tui/tui-data.c (tui_source_window::clear_detail)\n+\t(tui_cmd_window::clear_detail, tui_data_window::clear_detail): New\n+\tmethods.\n+\t(tui_clear_win_detail): Simplify.\n+\n 2019-06-25  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-layout.c (make_source_window, make_disasm_window)"
    },
    {
      "sha": "9923a2fb0529d36b091c566dd60546f582294f96",
      "filename": "gdb/tui/tui-data.c",
      "status": "modified",
      "additions": 32,
      "deletions": 25,
      "changes": 57,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/tui/tui-data.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/tui/tui-data.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.c?ref=8761a91b2614304963bfe211ff8c682c7eba3b51",
      "patch": "@@ -178,37 +178,44 @@ tui_add_to_source_windows (struct tui_win_info *win_info)\n     source_windows.list[source_windows.count++] = win_info;\n }\n \n+/* See tui-data.h.  */\n+\n+void\n+tui_source_window::clear_detail ()\n+{\n+  detail.source_info.gdbarch = NULL;\n+  detail.source_info.start_line_or_addr.loa = LOA_ADDRESS;\n+  detail.source_info.start_line_or_addr.u.addr = 0;\n+  detail.source_info.horizontal_offset = 0;\n+}\n+\n+/* See tui-data.h.  */\n+\n+void\n+tui_cmd_window::clear_detail ()\n+{\n+  wmove (generic.handle, 0, 0);\n+}\n+\n+/* See tui-data.h.  */\n+\n+void\n+tui_data_window::clear_detail ()\n+{\n+  detail.data_display_info.data_content = NULL;\n+  detail.data_display_info.data_content_count = 0;\n+  detail.data_display_info.regs_content = NULL;\n+  detail.data_display_info.regs_content_count = 0;\n+  detail.data_display_info.regs_column_count = 1;\n+  detail.data_display_info.display_regs = FALSE;\n+}\n \n /* Clear the pertinant detail in the windows.  */\n void\n tui_clear_win_detail (struct tui_win_info *win_info)\n {\n   if (win_info != NULL)\n-    {\n-      switch (win_info->generic.type)\n-\t{\n-\tcase SRC_WIN:\n-\tcase DISASSEM_WIN:\n-\t  win_info->detail.source_info.gdbarch = NULL;\n-\t  win_info->detail.source_info.start_line_or_addr.loa = LOA_ADDRESS;\n-\t  win_info->detail.source_info.start_line_or_addr.u.addr = 0;\n-\t  win_info->detail.source_info.horizontal_offset = 0;\n-\t  break;\n-\tcase CMD_WIN:\n-\t  wmove (win_info->generic.handle, 0, 0);\n-\t  break;\n-\tcase DATA_WIN:\n-\t  win_info->detail.data_display_info.data_content = NULL;\n-\t  win_info->detail.data_display_info.data_content_count = 0;\n-\t  win_info->detail.data_display_info.regs_content = NULL;\n-\t  win_info->detail.data_display_info.regs_content_count = 0;\n-\t  win_info->detail.data_display_info.regs_column_count = 1;\n-\t  win_info->detail.data_display_info.display_regs = FALSE;\n-\t  break;\n-\tdefault:\n-\t  break;\n-\t}\n-    }\n+    win_info->clear_detail ();\n }\n \n "
    },
    {
      "sha": "5006604b820a1b1dbe808c05c64a924e9e13b2a0",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8761a91b2614304963bfe211ff8c682c7eba3b51/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=8761a91b2614304963bfe211ff8c682c7eba3b51",
      "patch": "@@ -280,6 +280,9 @@ struct tui_win_info\n \n   virtual ~tui_win_info ();\n \n+  /* Clear the pertinent detail in the window.  */\n+  virtual void clear_detail () = 0;\n+\n   struct tui_gen_win_info generic;\t/* General window information.  */\n   union\n   {\n@@ -300,18 +303,24 @@ struct tui_source_window : public tui_win_info\n {\n   explicit tui_source_window (enum tui_win_type type);\n   DISABLE_COPY_AND_ASSIGN (tui_source_window);\n+\n+  void clear_detail () override;\n };\n \n struct tui_data_window : public tui_win_info\n {\n   tui_data_window ();\n   DISABLE_COPY_AND_ASSIGN (tui_data_window);\n+\n+  void clear_detail () override;\n };\n \n struct tui_cmd_window : public tui_win_info\n {\n   tui_cmd_window ();\n   DISABLE_COPY_AND_ASSIGN (tui_cmd_window);\n+\n+  void clear_detail () override;\n };\n \n extern int tui_win_is_source_type (enum tui_win_type win_type);"
    }
  ]
}