{
  "sha": "56770bdab2585be4d3171b3512d2167106dca53e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTY3NzBiZGFiMjU4NWJlNGQzMTcxYjM1MTJkMjE2NzEwNmRjYTUzZQ==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-16T13:07:12Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-16T13:07:12Z"
    },
    "message": "Sync config with GCC\n\n\tSync with GCC\n\t2020-05-15  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR bootstrap/95147\n\t* cet.m4 (GCC_CET_FLAGS): Also check if -fcf-protection works\n\twhen defaulting to auto.\n\n\t2020-05-14  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* cet.m4 (GCC_CET_FLAGS): Change default to auto.",
    "tree": {
      "sha": "5f65216007622ed9dcfef23220d941d7cd4171a2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5f65216007622ed9dcfef23220d941d7cd4171a2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/56770bdab2585be4d3171b3512d2167106dca53e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/56770bdab2585be4d3171b3512d2167106dca53e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/56770bdab2585be4d3171b3512d2167106dca53e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/56770bdab2585be4d3171b3512d2167106dca53e/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9bf058f09457de5efd094b87081b7d031ce96cbc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9bf058f09457de5efd094b87081b7d031ce96cbc",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9bf058f09457de5efd094b87081b7d031ce96cbc"
    }
  ],
  "stats": {
    "total": 18,
    "additions": 17,
    "deletions": 1
  },
  "files": [
    {
      "sha": "0e988b19c9822eee01c42d6593ec36060b890eb1",
      "filename": "config/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/56770bdab2585be4d3171b3512d2167106dca53e/config/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/56770bdab2585be4d3171b3512d2167106dca53e/config/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/config/ChangeLog?ref=56770bdab2585be4d3171b3512d2167106dca53e",
      "patch": "@@ -1,3 +1,16 @@\n+2020-05-16  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tSync with GCC\n+\t2020-05-15  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR bootstrap/95147\n+\t* cet.m4 (GCC_CET_FLAGS): Also check if -fcf-protection works\n+\twhen defaulting to auto.\n+\n+\t2020-05-14  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* cet.m4 (GCC_CET_FLAGS): Change default to auto.\n+\n 2020-05-12  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tSync with GCC"
    },
    {
      "sha": "2bb2c8a95ac1b59f83ef6376f7de7b90b077e342",
      "filename": "config/cet.m4",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/56770bdab2585be4d3171b3512d2167106dca53e/config/cet.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/56770bdab2585be4d3171b3512d2167106dca53e/config/cet.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/config/cet.m4?ref=56770bdab2585be4d3171b3512d2167106dca53e",
      "patch": "@@ -3,7 +3,7 @@ dnl GCC_CET_FLAGS\n dnl    (SHELL-CODE_HANDLER)\n dnl\n AC_DEFUN([GCC_CET_FLAGS],[dnl\n-GCC_ENABLE(cet, no, ,[enable Intel CET in target libraries],\n+GCC_ENABLE(cet, auto, ,[enable Intel CET in target libraries],\n \t   permit yes|no|auto)\n AC_MSG_CHECKING([for CET support])\n \n@@ -13,6 +13,8 @@ case \"$host\" in\n       auto)\n \t# Check if target supports multi-byte NOPs\n \t# and if assembler supports CET insn.\n+\tsave_CFLAGS=\"$CFLAGS\"\n+\tCFLAGS=\"$CFLAGS -fcf-protection\"\n \tAC_COMPILE_IFELSE(\n \t [AC_LANG_PROGRAM(\n \t  [],\n@@ -25,6 +27,7 @@ asm (\"setssbsy\");\n \t  ])],\n \t [enable_cet=yes],\n \t [enable_cet=no])\n+\tCFLAGS=\"$save_CFLAGS\"\n \t;;\n       yes)\n \t# Check if assembler supports CET."
    }
  ]
}