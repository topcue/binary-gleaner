{
  "sha": "353ea2d106a51cfd1680f7d351f35eb8f69c9248",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzUzZWEyZDEwNmE1MWNmZDE2ODBmN2QzNTFmMzVlYjhmNjljOTI0OA==",
  "commit": {
    "author": {
      "name": "Eli Zaretskii",
      "email": "eliz@gnu.org",
      "date": "2019-05-03T07:55:33Z"
    },
    "committer": {
      "name": "Eli Zaretskii",
      "email": "eliz@gnu.org",
      "date": "2019-05-03T07:55:33Z"
    },
    "message": "On MS-Windows, define _WIN32_WINNT in a single common place.\n\nThis changeset defines _WIN32_WINNT to at least 0x0501, the level\nof Windows XP, unless defined to a higher level, in a single\nplace.  It then removes all the overrides of _WIN32_WINNT in\nindividual files as no longer needed.  Doing this also solves\ncompilation of windows-nat.c with mingw.org's MinGW, as that\nfile uses CONSOLE_FONT_INFO which needs the XP level to become\nexposed in the Windows headers, while mingw.org defaults to\nWindows 9X.\n\ngdb/ChangeLog:\n2019-05-03  Eli Zaretskii  <eliz@gnu.org>\n\n\t* common/common-defs.h [__MINGW32__ || __CYGWIN__]: Define\n\t_WIN32_WINNT to the XP level, unless already defined to a higher\n\tlevel.\n\n\t* unittests/parse-connection-spec-selftests.c:\n\t* ser-tcp.c:\n\t* common/netstuff.c [USE_WIN32API]:  Remove the _WIN32_WINNT\n\toverride.\n\ngdb/gdbserver/ChangeLog:\n2019-05-03  Eli Zaretskii  <eliz@gnu.org>\n\n\t* remote-utils.c:\n\t* gdbreplay.c [USE_WIN32API]: Remove the _WIN32_WINNT override.",
    "tree": {
      "sha": "6b19d34d8d6f08ce90ed53a913e04a1859a06022",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6b19d34d8d6f08ce90ed53a913e04a1859a06022"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/353ea2d106a51cfd1680f7d351f35eb8f69c9248",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/353ea2d106a51cfd1680f7d351f35eb8f69c9248",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/353ea2d106a51cfd1680f7d351f35eb8f69c9248",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/353ea2d106a51cfd1680f7d351f35eb8f69c9248/comments",
  "author": {
    "login": "Eli-Zaretskii",
    "id": 20908835,
    "node_id": "MDQ6VXNlcjIwOTA4ODM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/20908835?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Eli-Zaretskii",
    "html_url": "https://github.com/Eli-Zaretskii",
    "followers_url": "https://api.github.com/users/Eli-Zaretskii/followers",
    "following_url": "https://api.github.com/users/Eli-Zaretskii/following{/other_user}",
    "gists_url": "https://api.github.com/users/Eli-Zaretskii/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Eli-Zaretskii/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Eli-Zaretskii/subscriptions",
    "organizations_url": "https://api.github.com/users/Eli-Zaretskii/orgs",
    "repos_url": "https://api.github.com/users/Eli-Zaretskii/repos",
    "events_url": "https://api.github.com/users/Eli-Zaretskii/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Eli-Zaretskii/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "Eli-Zaretskii",
    "id": 20908835,
    "node_id": "MDQ6VXNlcjIwOTA4ODM1",
    "avatar_url": "https://avatars.githubusercontent.com/u/20908835?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Eli-Zaretskii",
    "html_url": "https://github.com/Eli-Zaretskii",
    "followers_url": "https://api.github.com/users/Eli-Zaretskii/followers",
    "following_url": "https://api.github.com/users/Eli-Zaretskii/following{/other_user}",
    "gists_url": "https://api.github.com/users/Eli-Zaretskii/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Eli-Zaretskii/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Eli-Zaretskii/subscriptions",
    "organizations_url": "https://api.github.com/users/Eli-Zaretskii/orgs",
    "repos_url": "https://api.github.com/users/Eli-Zaretskii/repos",
    "events_url": "https://api.github.com/users/Eli-Zaretskii/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Eli-Zaretskii/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5f2459c233faebe8f882e556b2f4a86594a51292",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5f2459c233faebe8f882e556b2f4a86594a51292",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5f2459c233faebe8f882e556b2f4a86594a51292"
    }
  ],
  "stats": {
    "total": 48,
    "additions": 28,
    "deletions": 20
  },
  "files": [
    {
      "sha": "4820ebfbf479cf9c049d5565ef6cdc640962525f",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -1,5 +1,14 @@\n 2019-05-03  Eli Zaretskii  <eliz@gnu.org>\n \n+\t* common/common-defs.h [__MINGW32__ || __CYGWIN__]: Define\n+\t_WIN32_WINNT to the XP level, unless already defined to a higher\n+\tlevel.\n+\n+\t* unittests/parse-connection-spec-selftests.c:\n+\t* ser-tcp.c:\n+\t* common/netstuff.c [USE_WIN32API]:  Remove the _WIN32_WINNT\n+\toverride.\n+\n \t* symfile.c (find_separate_debug_file): Remove colon from the\n \tdrive spec of DOS/Windows file names of the target, so that the\n \tfile name produced from DEBUGDIR and the target's directory will"
    },
    {
      "sha": "8c164926db0fc21ff8f8add08bab1644e2898077",
      "filename": "gdb/common/common-defs.h",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/common/common-defs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/common/common-defs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/common/common-defs.h?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -72,6 +72,20 @@\n #define _FORTIFY_SOURCE 2\n #endif\n \n+/* We don't support Windows versions before XP, so we define\n+   _WIN32_WINNT correspondingly to ensure the Windows API headers\n+   expose the required symbols.  */\n+#if defined (__MINGW32__) || defined (__CYGWIN__)\n+# ifdef _WIN32_WINNT\n+#  if _WIN32_WINNT < 0x0501\n+#   undef _WIN32_WINNT\n+#   define _WIN32_WINNT 0x0501\n+#  endif\n+# else\n+#  define _WIN32_WINNT 0x0501\n+# endif\n+#endif\t/* __MINGW32__ || __CYGWIN__ */\n+\n #include <stdarg.h>\n #include <stdio.h>\n #include <stdlib.h>"
    },
    {
      "sha": "b192de7060f5bcd02ee36ef1f6fc89b416e4fcfa",
      "filename": "gdb/common/netstuff.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/common/netstuff.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/common/netstuff.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/common/netstuff.c?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -21,10 +21,6 @@\n #include <algorithm>\n \n #ifdef USE_WIN32API\n-#if _WIN32_WINNT < 0x0501\n-# undef _WIN32_WINNT\n-# define _WIN32_WINNT 0x0501\n-#endif\n #include <ws2tcpip.h>\n #else\n #include <netinet/in.h>"
    },
    {
      "sha": "82278e7bb20e19b81b5f6c44ff90bb3740211616",
      "filename": "gdb/gdbserver/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/ChangeLog?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -1,3 +1,8 @@\n+2019-05-03  Eli Zaretskii  <eliz@gnu.org>\n+\n+\t* remote-utils.c:\n+\t* gdbreplay.c [USE_WIN32API]: Remove the _WIN32_WINNT override.\n+\n 2019-04-19  Tom Tromey  <tom@tromey.com>\n \n \t* server.c (struct vstop_notif): Derive from notif_event."
    },
    {
      "sha": "2800e7834dfe50aa043a22809f055569afab1838",
      "filename": "gdb/gdbserver/gdbreplay.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/gdbreplay.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/gdbreplay.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/gdbreplay.c?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -45,10 +45,6 @@\n #endif\n \n #if USE_WIN32API\n-#if _WIN32_WINNT < 0x0501\n-# undef _WIN32_WINNT\n-# define _WIN32_WINNT 0x0501\n-#endif\n #include <ws2tcpip.h>\n #endif\n "
    },
    {
      "sha": "1d27ea31e2cfebf3eaf4932403a6f0f92845d9fd",
      "filename": "gdb/gdbserver/remote-utils.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/remote-utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/gdbserver/remote-utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/remote-utils.c?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -63,10 +63,6 @@\n #include <sys/stat.h>\n \n #if USE_WIN32API\n-#if _WIN32_WINNT < 0x0501\n-# undef _WIN32_WINNT\n-# define _WIN32_WINNT 0x0501\n-#endif\n #include <ws2tcpip.h>\n #endif\n "
    },
    {
      "sha": "927a28545700ce646d5a79453ebeb97088be69a6",
      "filename": "gdb/ser-tcp.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/ser-tcp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/ser-tcp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ser-tcp.c?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -39,10 +39,6 @@\n #include \"common/gdb_sys_time.h\"\n \n #ifdef USE_WIN32API\n-#if _WIN32_WINNT < 0x0501\n-# undef _WIN32_WINNT\n-# define _WIN32_WINNT 0x0501\n-#endif\n #include <ws2tcpip.h>\n #ifndef ETIMEDOUT\n #define ETIMEDOUT WSAETIMEDOUT"
    },
    {
      "sha": "915aa669f428600c9ce4eb5204a1670ad0619e90",
      "filename": "gdb/unittests/parse-connection-spec-selftests.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/unittests/parse-connection-spec-selftests.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/353ea2d106a51cfd1680f7d351f35eb8f69c9248/gdb/unittests/parse-connection-spec-selftests.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/unittests/parse-connection-spec-selftests.c?ref=353ea2d106a51cfd1680f7d351f35eb8f69c9248",
      "patch": "@@ -22,10 +22,6 @@\n #include \"common/netstuff.h\"\n #include \"diagnostics.h\"\n #ifdef USE_WIN32API\n-#if _WIN32_WINNT < 0x0501\n-# undef _WIN32_WINNT\n-# define _WIN32_WINNT 0x0501\n-#endif\n #include <ws2tcpip.h>\n #else\n #include <netinet/in.h>"
    }
  ]
}