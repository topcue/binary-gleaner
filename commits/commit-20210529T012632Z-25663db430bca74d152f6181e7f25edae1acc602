{
  "sha": "25663db430bca74d152f6181e7f25edae1acc602",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjU2NjNkYjQzMGJjYTc0ZDE1MmY2MTgxZTdmMjVlZGFlMWFjYzYwMg==",
  "commit": {
    "author": {
      "name": "Maciej W. Rozycki",
      "email": "macro@orcam.me.uk",
      "date": "2021-05-29T01:26:32Z"
    },
    "committer": {
      "name": "Maciej W. Rozycki",
      "email": "macro@orcam.me.uk",
      "date": "2021-05-29T01:26:32Z"
    },
    "message": "MIPS/GAS: Use FCSR rather than RA with CFC1/CTC1\n\nFix an issue caused by commit f9419b056fe2 (\"MIPS gas: code cleanup\"),\n<https://sourceware.org/ml/binutils/2002-05/msg00192.html>, and replace\nthe incorrect use of RA with the CFC1 and CTC1 instructions with FCSR.\nWhile the register referred by its number is $31 in both cases, these\ninstructions operate on the floating-point control register file rather\nthan general-purpose registers.\n\n\tgas/\n\t* config/tc-mips.c (FCSR): New macro.\n\t(macro) <M_TRUNCWS, M_TRUNCWD>: Use it in place of RA.",
    "tree": {
      "sha": "25190eae7f7b786e8e7ebbbf833b2050f4da17fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/25190eae7f7b786e8e7ebbbf833b2050f4da17fb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/25663db430bca74d152f6181e7f25edae1acc602",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25663db430bca74d152f6181e7f25edae1acc602",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/25663db430bca74d152f6181e7f25edae1acc602",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25663db430bca74d152f6181e7f25edae1acc602/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "c445a939101ce78dfd62fdbd97906768aca2ed4d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c445a939101ce78dfd62fdbd97906768aca2ed4d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c445a939101ce78dfd62fdbd97906768aca2ed4d"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 11,
    "deletions": 4
  },
  "files": [
    {
      "sha": "1eb7b39890b57eb1f20680e8d8b0eac2d0ca3418",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25663db430bca74d152f6181e7f25edae1acc602/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25663db430bca74d152f6181e7f25edae1acc602/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=25663db430bca74d152f6181e7f25edae1acc602",
      "patch": "@@ -1,3 +1,8 @@\n+2021-05-29  Maciej W. Rozycki  <macro@orcam.me.uk>\n+\n+\t* config/tc-mips.c (FCSR): New macro.\n+\t(macro) <M_TRUNCWS, M_TRUNCWD>: Use it in place of RA.\n+\n 2021-05-28  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR ld/27905"
    },
    {
      "sha": "a83a55075ad656f2068bed090eb0c38a54f22cbe",
      "filename": "gas/config/tc-mips.c",
      "status": "modified",
      "additions": 6,
      "deletions": 4,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25663db430bca74d152f6181e7f25edae1acc602/gas/config/tc-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25663db430bca74d152f6181e7f25edae1acc602/gas/config/tc-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-mips.c?ref=25663db430bca74d152f6181e7f25edae1acc602",
      "patch": "@@ -104,6 +104,8 @@ static char *mips_flags_frag;\n #define FP  30\n #define RA  31\n \n+#define FCSR 31\n+\n #define ILLEGAL_REG (32)\n \n #define AT  mips_opts.at\n@@ -13835,18 +13837,18 @@ macro (struct mips_cl_insn *ip, char *str)\n        * or is there a reason for it?\n        */\n       start_noreorder ();\n-      macro_build (NULL, \"cfc1\", \"t,G\", op[2], RA);\n-      macro_build (NULL, \"cfc1\", \"t,G\", op[2], RA);\n+      macro_build (NULL, \"cfc1\", \"t,G\", op[2], FCSR);\n+      macro_build (NULL, \"cfc1\", \"t,G\", op[2], FCSR);\n       macro_build (NULL, \"nop\", \"\");\n       expr1.X_add_number = 3;\n       macro_build (&expr1, \"ori\", \"t,r,i\", AT, op[2], BFD_RELOC_LO16);\n       expr1.X_add_number = 2;\n       macro_build (&expr1, \"xori\", \"t,r,i\", AT, AT, BFD_RELOC_LO16);\n-      macro_build (NULL, \"ctc1\", \"t,G\", AT, RA);\n+      macro_build (NULL, \"ctc1\", \"t,G\", AT, FCSR);\n       macro_build (NULL, \"nop\", \"\");\n       macro_build (NULL, mask == M_TRUNCWD ? \"cvt.w.d\" : \"cvt.w.s\", \"D,S\",\n \t\t   op[0], op[1]);\n-      macro_build (NULL, \"ctc1\", \"t,G\", op[2], RA);\n+      macro_build (NULL, \"ctc1\", \"t,G\", op[2], FCSR);\n       macro_build (NULL, \"nop\", \"\");\n       end_noreorder ();\n       break;"
    }
  ]
}