{
  "sha": "e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
  "node_id": "C_kwDOANOeidoAKGU1YzllNTNjOWI4ZDVjODUxOWIyNTFmOTFkZTdiYzQ1M2QxMDg2YmU",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-04T03:44:19Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-04T03:53:10Z"
    },
    "message": "sim: mips: fix missing prototype in multi-run generation\n\nThe multi-run logic for mips involves a bit of codegen and rewriting\nof files to include per-architecture prefixes.  That can result in\nfiles with missing prototypes which cause compiler errors.  In the\ncase of mips-sde-elf targets, we have:\n$srcdir/m16run.c -> $builddir/m16mips64r2_run.c\n  sim_engine_run -> m16mips64r2_engine_run\n$srcdir/micromipsrun.c -> micromipsmicromips_run.c\n  sim_engine_run -> micromips64micromips_engine_run\n\nmicromipsmicromips_run.c:80:1: error: no previous prototype for 'micromips64micromips_engine_run' [-Werror=missing-prototypes]\n   80 | micromips64micromips_engine_run (SIM_DESC sd, int next_cpu_nr, int nr_cpus,\n\nWe generate headers for those prototypes in the configure script,\nbut only include them in the generated multi-run.c file.  Update the\nrewrite logic to turn the sim-engine.h include into the relevant\ngenerated engine include so these files also have their prototypes.\n$srcdir/m16run.c -> $builddir/m16mips64r2_run.c\n  sim-engine.h -> m16mips64r2_engine.h\n$srcdir/micromipsrun.c -> micromipsmicromips_run.c\n  sim-engine.h -> micromips64micromips_engine.h",
    "tree": {
      "sha": "9d065cc2fadfc2b1d7f9e1fca1f6a6870cd4c1aa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9d065cc2fadfc2b1d7f9e1fca1f6a6870cd4c1aa"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e5c9e53c9b8d5c8519b251f91de7bc453d1086be/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f2f105f518413ea3e4c212f89585f9a8a5dddcdd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2f105f518413ea3e4c212f89585f9a8a5dddcdd",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f2f105f518413ea3e4c212f89585f9a8a5dddcdd"
    }
  ],
  "stats": {
    "total": 4,
    "additions": 4,
    "deletions": 0
  },
  "files": [
    {
      "sha": "589c392edb5338082e82e7464d56d61ef3adfeee",
      "filename": "sim/mips/Makefile.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e5c9e53c9b8d5c8519b251f91de7bc453d1086be/sim/mips/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e5c9e53c9b8d5c8519b251f91de7bc453d1086be/sim/mips/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/mips/Makefile.in?ref=e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
      "patch": "@@ -553,6 +553,7 @@ tmp-run-multi: $(srcdir)/m16run.c $(srcdir)/micromipsrun.c\n \t      m=`echo $${t} | sed -e 's/^m16//' -e 's/:.*//'`; \\\n \t      sed <  $(srcdir)/m16run.c > tmp-run \\\n \t\t    -e \"s/^sim_/m16$${m}_/\" \\\n+\t\t    -e \"/include/s/sim-engine/m16$${m}_engine/\" \\\n \t\t    -e \"s/m16_/m16$${m}_/\" \\\n \t\t    -e \"s/m32_/m32$${m}_/\" ; \\\n \t      $(SHELL) $(srcdir)/../../move-if-change tmp-run \\\n@@ -562,6 +563,7 @@ tmp-run-multi: $(srcdir)/m16run.c $(srcdir)/micromipsrun.c\n \t      m=`echo $${t} | sed -e 's/^micromips32//' -e 's/:.*//'`; \\\n \t      sed <  $(srcdir)/micromipsrun.c > tmp-run \\\n \t\t    -e \"s/^sim_/micromips32$${m}_/\" \\\n+\t\t    -e \"/include/s/sim-engine/micromips32$${m}_engine/\" \\\n \t\t    -e \"s/micromips16_/micromips16$${m}_/\" \\\n \t\t    -e \"s/micromips32_/micromips32$${m}_/\" \\\n \t\t    -e \"s/m32_/m32$${m}_/\" ; \\\n@@ -572,6 +574,7 @@ tmp-run-multi: $(srcdir)/m16run.c $(srcdir)/micromipsrun.c\n \t      m=`echo $${t} | sed -e 's/^micromips64//' -e 's/:.*//'`; \\\n \t      sed <  $(srcdir)/micromipsrun.c > tmp-run \\\n \t\t    -e \"s/^sim_/micromips64$${m}_/\" \\\n+\t\t    -e \"/include/s/sim-engine/micromips64$${m}_engine/\" \\\n \t\t    -e \"s/micromips16_/micromips16$${m}_/\" \\\n \t\t    -e \"s/micromips32_/micromips64$${m}_/\" \\\n \t\t    -e \"s/m32_/m64$${m}_/\" ; \\"
    },
    {
      "sha": "bbe487e4e513f0cd0b841dc72e899d8a5513c0d2",
      "filename": "sim/mips/m16run.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e5c9e53c9b8d5c8519b251f91de7bc453d1086be/sim/mips/m16run.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e5c9e53c9b8d5c8519b251f91de7bc453d1086be/sim/mips/m16run.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/mips/m16run.c?ref=e5c9e53c9b8d5c8519b251f91de7bc453d1086be",
      "patch": "@@ -24,6 +24,7 @@\n #include \"m16_idecode.h\"\n #include \"m32_idecode.h\"\n #include \"bfd.h\"\n+#include \"sim-engine.h\"\n \n \n #define SD sd"
    }
  ]
}