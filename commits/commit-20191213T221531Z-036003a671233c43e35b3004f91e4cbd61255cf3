{
  "sha": "036003a671233c43e35b3004f91e4cbd61255cf3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDM2MDAzYTY3MTIzM2M0M2UzNWIzMDA0ZjkxZTRjYmQ2MTI1NWNmMw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-12-05T15:08:39Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-12-13T22:15:31Z"
    },
    "message": "Silence ARI for valid calls to abort\n\nThere are a handful of spots in gdb that validly call abort.  This\npatch adds the appropriate ARI marker to these lines, to silence the\nARI report.  This also removes the \"fix\" call for \"abort\" from\ngdb_ari.sh; it was incorrect and now is not needed.\n\ngdb/ChangeLog\n2019-12-13  Tom Tromey  <tromey@adacore.com>\n\n\t* contrib/ari/gdb_ari.sh: Remove \"fix\" call for abort.\n\t* utils.c (abort_with_message, dump_core, internal_vproblem): Add\n\tARI marker to abort.\n\t* event-top.c (handle_sigsegv): Add ARI marker to abort.\n\nChange-Id: I09ce6aa5010bbe4e5bb73ffdb727481be39d34d6",
    "tree": {
      "sha": "9968bec13a80f0cae8076e95460e05c5519bf120",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9968bec13a80f0cae8076e95460e05c5519bf120"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/036003a671233c43e35b3004f91e4cbd61255cf3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/036003a671233c43e35b3004f91e4cbd61255cf3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/036003a671233c43e35b3004f91e4cbd61255cf3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/036003a671233c43e35b3004f91e4cbd61255cf3/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8aaaf7577f070c91086533d959ac36a15d1d604f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8aaaf7577f070c91086533d959ac36a15d1d604f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8aaaf7577f070c91086533d959ac36a15d1d604f"
    }
  ],
  "stats": {
    "total": 16,
    "additions": 11,
    "deletions": 5
  },
  "files": [
    {
      "sha": "44bb65ffccc3eb7f24c05bb6ee8986eb82d92e33",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=036003a671233c43e35b3004f91e4cbd61255cf3",
      "patch": "@@ -1,3 +1,10 @@\n+2019-12-13  Tom Tromey  <tromey@adacore.com>\n+\n+\t* contrib/ari/gdb_ari.sh: Remove \"fix\" call for abort.\n+\t* utils.c (abort_with_message, dump_core, internal_vproblem): Add\n+\tARI marker to abort.\n+\t* event-top.c (handle_sigsegv): Add ARI marker to abort.\n+\n 2019-12-13  Tom Tromey  <tromey@adacore.com>\n \n \t* contrib/ari/gdb_ari.sh: Fix floatformat_from_double text."
    },
    {
      "sha": "300ed761f13f43bc0e05e776ec1a0da38d106cb8",
      "filename": "gdb/contrib/ari/gdb_ari.sh",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/contrib/ari/gdb_ari.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/contrib/ari/gdb_ari.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/contrib/ari/gdb_ari.sh?ref=036003a671233c43e35b3004f91e4cbd61255cf3",
      "patch": "@@ -647,7 +647,6 @@ FNR == 1 {\n BEGIN { doc[\"abort\"] = \"\\\n Do not use abort, instead use internal_error; GDB should never abort\"\n     category[\"abort\"] = ari_regression\n-    fix(\"abort\", \"gdb/utils.c\", 3)\n }\n /(^|[^_[:alnum:]])abort[[:space:]]*\\(/ {\n     fail(\"abort\")"
    },
    {
      "sha": "5feb2928e22eb3e72bb8248a5abae337a28c48b0",
      "filename": "gdb/event-top.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/event-top.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/event-top.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/event-top.c?ref=036003a671233c43e35b3004f91e4cbd61255cf3",
      "patch": "@@ -881,7 +881,7 @@ handle_sigsegv (int sig)\n   install_handle_sigsegv ();\n \n   if (thread_local_segv_handler == nullptr)\n-    abort ();\n+    abort ();\t\t\t/* ARI: abort */\n   thread_local_segv_handler (sig);\n }\n "
    },
    {
      "sha": "41241afcd450188bde1bae815f6f533b9c9f62e1",
      "filename": "gdb/utils.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/036003a671233c43e35b3004f91e4cbd61255cf3/gdb/utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.c?ref=036003a671233c43e35b3004f91e4cbd61255cf3",
      "patch": "@@ -186,7 +186,7 @@ abort_with_message (const char *msg)\n   else\n     fputs_unfiltered (msg, gdb_stderr);\n \n-  abort ();\t\t/* NOTE: GDB has only three calls to abort().  */\n+  abort ();\t\t/* ARI: abort */\n }\n \n /* Dump core trying to increase the core soft limit to hard limit first.  */\n@@ -200,7 +200,7 @@ dump_core (void)\n   setrlimit (RLIMIT_CORE, &rlim);\n #endif /* HAVE_SETRLIMIT */\n \n-  abort ();\t\t/* NOTE: GDB has only three calls to abort().  */\n+  abort ();\t\t/* ARI: abort */\n }\n \n /* Check whether GDB will be able to dump core using the dump_core\n@@ -320,7 +320,7 @@ internal_vproblem (struct internal_problem *problem,\n            does not fix this problem.  This is the solution suggested\n            at http://gcc.gnu.org/bugzilla/show_bug.cgi?id=25509.  */\n \tif (write (STDERR_FILENO, msg, sizeof (msg)) != sizeof (msg))\n-          abort (); /* NOTE: GDB has only three calls to abort().  */\n+          abort (); /* ARI: abort */\n \texit (1);\n       }\n   }"
    }
  ]
}