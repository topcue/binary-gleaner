{
  "sha": "0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDU5MmU4MGJjZjFiYmFiMmZiYmIxMTBlYTM5NWY5NjA4ZTRmNTk0Yw==",
  "commit": {
    "author": {
      "name": "Jim Wilson",
      "email": "jimw@sifive.com",
      "date": "2021-04-08T01:51:52Z"
    },
    "committer": {
      "name": "Jim Wilson",
      "email": "jimw@sifive.com",
      "date": "2021-04-08T01:51:52Z"
    },
    "message": "Aarch64 sim fix for gcc-10 miscompilation.\n\nThis fixes a problem that occurs when compiled by gcc-10, as the code\nis relying on undefined overflow behavior.  This is fixed by replacing\ncompares between 32-bit and 64-bit results with compares that just use\nthe 64-bit results with a cast.\n\n\tPR sim/27483\n\t* simulator.c (set_flags_for_add32): Compare uresult against\n\titself.  Compare sresult against itself.",
    "tree": {
      "sha": "b175364127540032ba3a64ca889ab5d67efa82ea",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b175364127540032ba3a64ca889ab5d67efa82ea"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0592e80bcf1bbab2fbbb110ea395f9608e4f594c/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "bf5271659d0d78174041aa0e198406c9ecacc7a4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bf5271659d0d78174041aa0e198406c9ecacc7a4",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bf5271659d0d78174041aa0e198406c9ecacc7a4"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 8,
    "deletions": 2
  },
  "files": [
    {
      "sha": "d328fcddf6e4856132767990d8787da03d5a95c3",
      "filename": "sim/aarch64/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0592e80bcf1bbab2fbbb110ea395f9608e4f594c/sim/aarch64/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0592e80bcf1bbab2fbbb110ea395f9608e4f594c/sim/aarch64/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/aarch64/ChangeLog?ref=0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
      "patch": "@@ -1,3 +1,9 @@\n+2021-04-07  Jim Wilson  <jimw@sifive.com>\n+\n+\tPR sim/27483\n+\t* simulator.c (set_flags_for_add32): Compare uresult against\n+\titself.  Compare sresult against itself.\n+\n 2021-04-02  Mike Frysinger  <vapier@gentoo.org>\n \n \t* aclocal.m4, configure: Regenerate."
    },
    {
      "sha": "e0b428d26d9e474f87cb54dd9bb408f0cb8a59bd",
      "filename": "sim/aarch64/simulator.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0592e80bcf1bbab2fbbb110ea395f9608e4f594c/sim/aarch64/simulator.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0592e80bcf1bbab2fbbb110ea395f9608e4f594c/sim/aarch64/simulator.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/aarch64/simulator.c?ref=0592e80bcf1bbab2fbbb110ea395f9608e4f594c",
      "patch": "@@ -1650,10 +1650,10 @@ set_flags_for_add32 (sim_cpu *cpu, int32_t value1, int32_t value2)\n   if (result & (1 << 31))\n     flags |= N;\n \n-  if (uresult != (uint32_t)result)\n+  if (uresult != (uint32_t)uresult)\n     flags |= C;\n \n-  if (sresult != result)\n+  if (sresult != (int32_t)sresult)\n     flags |= V;\n \n   aarch64_set_CPSR (cpu, flags);"
    }
  ]
}