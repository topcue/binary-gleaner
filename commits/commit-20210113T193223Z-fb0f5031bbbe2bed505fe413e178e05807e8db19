{
  "sha": "fb0f5031bbbe2bed505fe413e178e05807e8db19",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmIwZjUwMzFiYmJlMmJlZDUwNWZlNDEzZTE3OGUwNTgwN2U4ZGIxOQ==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-01-13T19:32:23Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-01-13T19:32:23Z"
    },
    "message": "gdb: turn arc_debug into a bool\n\nShahab suggested we get rid of the verbosity level for the ARC debug\nlogging [1].  This patch does that, before doing any other change.\n\ngdb/ChangeLog:\n\n\t* arc-tdep.h (arc_debug): Change type to bool.\n\t* arc-tdep.c (arc_debug): Change type to bool.\n\t(arc_analyze_prologue): Adjust.\n\t(_initialize_arc_tdep): Use add_setshow_boolean_cmd.\n\t* arc-linux-nat.c (ps_get_thread_area): Adjust.\n\n[1] https://sourceware.org/pipermail/gdb-patches/2021-January/175075.html\n\nChange-Id: I16688bd42ed8978ae1acf57012c8d41a943044a5",
    "tree": {
      "sha": "b6b80d3d9ea2fbd85ea6084722615b57015fa2d8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b6b80d3d9ea2fbd85ea6084722615b57015fa2d8"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fb0f5031bbbe2bed505fe413e178e05807e8db19",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fb0f5031bbbe2bed505fe413e178e05807e8db19",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fb0f5031bbbe2bed505fe413e178e05807e8db19",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fb0f5031bbbe2bed505fe413e178e05807e8db19/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "506195754c948948a4940928969ffb07584ae845",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/506195754c948948a4940928969ffb07584ae845",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/506195754c948948a4940928969ffb07584ae845"
    }
  ],
  "stats": {
    "total": 28,
    "additions": 18,
    "deletions": 10
  },
  "files": [
    {
      "sha": "8b40c5a232c77bafdf22a8bb758315fac6b8da18",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=fb0f5031bbbe2bed505fe413e178e05807e8db19",
      "patch": "@@ -1,3 +1,11 @@\n+2021-01-13  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* arc-tdep.h (arc_debug): Change type to bool.\n+\t* arc-tdep.c (arc_debug): Change type to bool.\n+\t(arc_analyze_prologue): Adjust.\n+\t(_initialize_arc_tdep): Use add_setshow_boolean_cmd.\n+\t* arc-linux-nat.c (ps_get_thread_area): Adjust.\n+\n 2021-01-13  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* auto-load.c (auto_load_objfile_script_1): Use bool."
    },
    {
      "sha": "b03363a4865443e876fe602fc472869a7272de51",
      "filename": "gdb/arc-linux-nat.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-linux-nat.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-linux-nat.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arc-linux-nat.c?ref=fb0f5031bbbe2bed505fe413e178e05807e8db19",
      "patch": "@@ -295,7 +295,7 @@ ps_err_e\n ps_get_thread_area (struct ps_prochandle *ph, lwpid_t lwpid, int idx,\n \t\t    void **base)\n {\n-  if (arc_debug >= 2)\n+  if (arc_debug)\n     debug_printf (\"arc-linux-nat: ps_get_thread_area called\");\n \n   if (ptrace (PTRACE_GET_THREAD_AREA, lwpid, NULL, base) != 0)"
    },
    {
      "sha": "e2f855142e1304fa4b179016edd9e53d5d601c83",
      "filename": "gdb/arc-tdep.c",
      "status": "modified",
      "additions": 8,
      "deletions": 8,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arc-tdep.c?ref=fb0f5031bbbe2bed505fe413e178e05807e8db19",
      "patch": "@@ -87,7 +87,7 @@ struct arc_frame_cache\n \n /* Global debug flag.  */\n \n-int arc_debug;\n+bool arc_debug;\n \n /* List of \"maintenance print arc\" commands.  */\n \n@@ -1421,7 +1421,7 @@ arc_analyze_prologue (struct gdbarch *gdbarch, const CORE_ADDR entrypoint,\n       arc_insn_decode (current_prologue_end, &di, arc_delayed_print_insn,\n \t\t       &insn);\n \n-      if (arc_debug >= 2)\n+      if (arc_debug)\n \tarc_insn_dump (insn);\n \n       /* If this instruction is in the prologue, fields in the cache will be\n@@ -2517,10 +2517,10 @@ _initialize_arc_tdep ()\n \t   &maintenance_print_arc_list);\n \n   /* Debug internals for ARC GDB.  */\n-  add_setshow_zinteger_cmd (\"arc\", class_maintenance,\n-\t\t\t    &arc_debug,\n-\t\t\t    _(\"Set ARC specific debugging.\"),\n-\t\t\t    _(\"Show ARC specific debugging.\"),\n-\t\t\t    _(\"Non-zero enables ARC specific debugging.\"),\n-\t\t\t    NULL, NULL, &setdebuglist, &showdebuglist);\n+  add_setshow_boolean_cmd (\"arc\", class_maintenance,\n+\t\t\t   &arc_debug,\n+\t\t\t   _(\"Set ARC specific debugging.\"),\n+\t\t\t   _(\"Show ARC specific debugging.\"),\n+\t\t\t   _(\"When set, ARC specific debugging is enabled.\"),\n+\t\t\t   NULL, NULL, &setdebuglist, &showdebuglist);\n }"
    },
    {
      "sha": "575cd28cacdbf20e8f412dcfc733587ec59b0d40",
      "filename": "gdb/arc-tdep.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-tdep.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fb0f5031bbbe2bed505fe413e178e05807e8db19/gdb/arc-tdep.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arc-tdep.h?ref=fb0f5031bbbe2bed505fe413e178e05807e8db19",
      "patch": "@@ -112,7 +112,7 @@ enum arc_regnum\n \n #define arc_print(fmt, args...) fprintf_unfiltered (gdb_stdlog, fmt, ##args)\n \n-extern int arc_debug;\n+extern bool arc_debug;\n \n /* Target-dependent information.  */\n "
    }
  ]
}