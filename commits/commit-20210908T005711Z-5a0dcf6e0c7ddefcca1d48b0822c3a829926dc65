{
  "sha": "5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NWEwZGNmNmUwYzdkZGVmY2NhMWQ0OGIwODIyYzNhODI5OTI2ZGM2NQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-08-19T20:21:23Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-09-08T00:57:11Z"
    },
    "message": "gdb: sim: consolidate configure settings\n\nMoving all the sim settings to one section makes it easier to track,\nand makes it easier to keep it aligned with the sim target tests.\nThe gdb logic was duplicating this when handling different OS targets\ninstead of having a single cpu check.  Now it's more obvious that the\nsim is tied to a cpu and not related to the OS.",
    "tree": {
      "sha": "729e3d7221237efca0eaf2e04b90686dd3aba116",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/729e3d7221237efca0eaf2e04b90686dd3aba116"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "116282d9d148d2ee050c29ef0da3b82a420496d6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/116282d9d148d2ee050c29ef0da3b82a420496d6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/116282d9d148d2ee050c29ef0da3b82a420496d6"
    }
  ],
  "stats": {
    "total": 75,
    "additions": 35,
    "deletions": 40
  },
  "files": [
    {
      "sha": "b5259dfbc7625e6bfe88de0694418c2005d6c38a",
      "filename": "gdb/configure.tgt",
      "status": "modified",
      "additions": 35,
      "deletions": 40,
      "changes": 75,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65/gdb/configure.tgt",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65/gdb/configure.tgt",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.tgt?ref=5a0dcf6e0c7ddefcca1d48b0822c3a829926dc65",
      "patch": "@@ -190,30 +190,25 @@ arm*-*-openbsd*)\n arm*-*-*)\n \t# Target: ARM embedded system\n \tgdb_target_obs=\"arm-pikeos-tdep.o\"\n-\tgdb_sim=../sim/arm/libsim.a\n \t;;\n \n avr-*-*)\n \t# Target: AVR\n \tgdb_target_obs=\"avr-tdep.o\"\n-\tgdb_sim=../sim/avr/libsim.a\n \t;;\n \n bfin-*-*linux*)\n \t# Target: Blackfin Linux\n \tgdb_target_obs=\"bfin-tdep.o bfin-linux-tdep.o linux-tdep.o\"\n-\tgdb_sim=../sim/bfin/libsim.a\n \t;;\n bfin-*-*)\n \t# Target: Blackfin processor\n \tgdb_target_obs=\"bfin-tdep.o\"\n-\tgdb_sim=../sim/bfin/libsim.a\n \t;;\n \n bpf-*-*)\n \t# Target: eBPF\n \tgdb_target_obs=\"bpf-tdep.o\"\n-\tgdb_sim=../sim/bpf/libsim.a\n \t;;\n \n cris*)\n@@ -235,18 +230,15 @@ csky*-*-*)\n frv-*-*)\n \t# Target: Fujitsu FRV processor\n \tgdb_target_obs=\"frv-tdep.o frv-linux-tdep.o linux-tdep.o solib-frv.o\"\n-\tgdb_sim=../sim/frv/libsim.a\n \t;;\n \n moxie-*-elf | moxie-*-moxiebox | moxie-*-rtems*)\n \tgdb_target_obs=\"moxie-tdep.o\"\n-\tgdb_sim=../sim/moxie/libsim.a\n \t;;\n \n h8300-*-*)\n \t# Target: H8300 processor\n \tgdb_target_obs=\"h8300-tdep.o\"\n-\tgdb_sim=../sim/h8300/libsim.a\n \t;;\n \n hppa*-*-linux*)\n@@ -338,39 +330,31 @@ ia64-*-*vms*)\n \n iq2000-*-*)\n \tgdb_target_obs=\"iq2000-tdep.o\"\n-\tgdb_sim=../sim/iq2000/libsim.a\n \t;;\n \n lm32-*-*)\t\t\n \tgdb_target_obs=\"lm32-tdep.o\" \n-\tgdb_sim=../sim/lm32/libsim.a\n \t;;\n \n m32c-*-*)\n \t# Target: Renesas M32C family\n \tgdb_target_obs=\"m32c-tdep.o\"\n-\t# There may also be a SID / CGEN simulator for this,\n-\t# but we do have DJ Delorie's mini-sim.\n-\tgdb_sim=../sim/m32c/libsim.a\n \t;;\n \n m32r*-*-linux*)\n \t# Target: Renesas M32R running GNU/Linux\n \tgdb_target_obs=\"m32r-tdep.o m32r-linux-tdep.o \\\n \t\t\tglibc-tdep.o solib-svr4.o symfile-mem.o \\\n \t\t\tlinux-tdep.o\"\n-\tgdb_sim=../sim/m32r/libsim.a\n \t;;\n m32r*-*-*)\n \t# Target: Renesas m32r processor\n \tgdb_target_obs=\"m32r-tdep.o\"\n-\tgdb_sim=../sim/m32r/libsim.a\n \t;;\n \n m68hc11*-*-*|m6811*-*-*)\n \t# Target: Motorola 68HC11 processor\n \tgdb_target_obs=\"m68hc11-tdep.o\"\n-\tgdb_sim=../sim/m68hc11/libsim.a\n \t;;\n \n m68*-*-aout* | m68*-*-coff* | m68*-*-elf* | m68*-*-rtems* | m68*-*-uclinux* | \\\n@@ -402,29 +386,24 @@ microblaze*-linux-*|microblaze*-*-linux*)\n \t# Target: Xilinx MicroBlaze running Linux\n \tgdb_target_obs=\"microblaze-tdep.o microblaze-linux-tdep.o solib-svr4.o \\\n \t\t\tsymfile-mem.o linux-tdep.o\"\n-\tgdb_sim=../sim/microblaze/libsim.a\n \t;;\n microblaze*-*-*)\n \t# Target: Xilinx MicroBlaze running standalone\n \tgdb_target_obs=\"microblaze-tdep.o\"\n-\tgdb_sim=../sim/microblaze/libsim.a\n \t;;\n \n mips*-*-linux*)\n \t# Target: Linux/MIPS\n \tgdb_target_obs=\"mips-tdep.o mips-linux-tdep.o glibc-tdep.o \\\n \t\t\tsolib-svr4.o symfile-mem.o linux-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n mips*-*-netbsd* | mips*-*-knetbsd*-gnu)\n \t# Target: MIPS running NetBSD\n \tgdb_target_obs=\"mips-tdep.o mips-netbsd-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n mips*-*-freebsd*)\n \t# Target: MIPS running FreeBSD\n \tgdb_target_obs=\"mips-tdep.o mips-fbsd-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n mips64*-*-openbsd*)\n \t# Target: OpenBSD/mips64\n@@ -433,28 +412,23 @@ mips64*-*-openbsd*)\n mips*-sde*-elf*)\n \t# Target: MIPS SDE\n \tgdb_target_obs=\"mips-tdep.o mips-sde-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n mips*-*-elf)\n \t# Target: MIPS ELF\n \tgdb_target_obs=\"mips-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n mips*-*-*)\n \t# Target: MIPS\n \tgdb_target_obs=\"mips-tdep.o\"\n-\tgdb_sim=../sim/mips/libsim.a\n \t;;\n \n mn10300-*-*)\n \t# Target: Matsushita mn10300\n \tgdb_target_obs=\"mn10300-tdep.o\"\n-\tgdb_sim=../sim/mn10300/libsim.a\n \t;;\n \n msp430-*-elf*)\n \tgdb_target_obs=\"msp430-tdep.o\"\n-\tgdb_sim=../sim/msp430/libsim.a\n \t;;\n \n nds32*-*-elf)\n@@ -477,13 +451,11 @@ or1k*-*-linux*)\n \t# Target: OpenCores OpenRISC 1000 32-bit running Linux\n \tgdb_target_obs=\"or1k-tdep.o or1k-linux-tdep.o solib-svr4.o \\\n \t\t\tsymfile-mem.o glibc-tdep.o linux-tdep.o\"\n-\tgdb_sim=../sim/or1k/libsim.a\n \t;;\n \n or1k-*-* | or1knd-*-*)\n \t# Target: OpenCores OpenRISC 1000 32-bit implementation bare metal\n \tgdb_target_obs=\"or1k-tdep.o\"\n-\tgdb_sim=../sim/or1k/libsim.a\n \t;;\n \n powerpc*-*-freebsd*)\n@@ -497,7 +469,6 @@ powerpc-*-netbsd* | powerpc-*-knetbsd*-gnu)\n \t# Target: NetBSD/powerpc\n \tgdb_target_obs=\"rs6000-tdep.o ppc-sysv-tdep.o ppc-netbsd-tdep.o \\\n \t\t\travenscar-thread.o ppc-ravenscar-thread.o\"\n-\tgdb_sim=../sim/ppc/libsim.a\n \t;;\n powerpc-*-openbsd*)\n \t# Target: OpenBSD/powerpc\n@@ -518,7 +489,6 @@ powerpc*-*-linux*)\n \t\t\travenscar-thread.o ppc-ravenscar-thread.o \\\n \t\t\tlinux-record.o \\\n \t\t\tarch/ppc-linux-common.o\"\n-\tgdb_sim=../sim/ppc/libsim.a\n \t;;\n powerpc-*-lynx*178)\n \t# Target: PowerPC running Lynx178.\n@@ -530,7 +500,6 @@ powerpc*-*-*)\n \t# Target: PowerPC running eabi\n \tgdb_target_obs=\"rs6000-tdep.o ppc-sysv-tdep.o solib-svr4.o \\\n \t\t\travenscar-thread.o ppc-ravenscar-thread.o\"\n-\tgdb_sim=../sim/ppc/libsim.a\n \t;;\n \n s390*-*-linux*)\n@@ -553,19 +522,16 @@ riscv*-*-linux*)\n riscv*-*-*)\n \t# Target: RISC-V architecture\n \tgdb_target_obs=\"\"\n-\tgdb_sim=../sim/riscv/libsim.a\n \t;;\n \n rl78-*-elf)\n \t# Target: Renesas rl78\n \tgdb_target_obs=\"rl78-tdep.o\"\n-\tgdb_sim=../sim/rl78/libsim.a\n \t;;\n \n rx-*-elf)\n \t# Target: Renesas RX\n \tgdb_target_obs=\"rx-tdep.o\"\n-\tgdb_sim=../sim/rx/libsim.a\n \t;;\n \n score-*-*)\n@@ -578,12 +544,10 @@ sh*-*-linux*)\n \tgdb_target_obs=\"sh-tdep.o sh-linux-tdep.o \\\n \t\t\tsolib-svr4.o symfile-mem.o \\\n \t\t\tglibc-tdep.o linux-tdep.o\"\n-\tgdb_sim=../sim/sh/libsim.a\n \t;;\n sh*-*-netbsd* | sh*-*-knetbsd*-gnu)\n \t# Target: NetBSD/sh\n \tgdb_target_obs=\"sh-tdep.o sh-netbsd-tdep.o\"\n-\tgdb_sim=../sim/sh/libsim.a\n \t;;\n sh*-*-openbsd*)\n \t# Target: OpenBSD/sh\n@@ -592,7 +556,6 @@ sh*-*-openbsd*)\n sh*)\n \t# Target: Embedded Renesas Super-H processor\n \tgdb_target_obs=\"sh-tdep.o\"\n-\tgdb_sim=../sim/sh/libsim.a\n \t;;\n \n sparc-*-linux*)\n@@ -653,7 +616,6 @@ sparc-*-*)\n \t# Target: SPARC\n \tgdb_target_obs=\"sparc-tdep.o \\\n \t\t\travenscar-thread.o sparc-ravenscar-thread.o\"\n-\tgdb_sim=../sim/erc32/libsim.a\n \t;;\n sparc64-*-*)\n \t# Target: UltraSPARC\n@@ -691,13 +653,11 @@ xstormy16-*-*)\n \n ft32-*-elf)\n \tgdb_target_obs=\"ft32-tdep.o\"\n-\tgdb_sim=../sim/ft32/libsim.a\n \t;;\n \n v850*-*-elf | v850*-*-rtems*)\n \t# Target: NEC V850 processor\n \tgdb_target_obs=\"v850-tdep.o\"\n-\tgdb_sim=../sim/v850/libsim.a\n \t;;\n \n vax-*-netbsd* | vax-*-knetbsd*-gnu)\n@@ -773,6 +733,41 @@ esac\n \n gdb_target_obs=\"${cpu_obs} ${os_obs} ${gdb_target_obs}\"\n \n+# Get the sim settings.\n+# NB: Target matching is aligned with sim/configure.ac.  Changes must be kept\n+# in sync with that file.\n+\n+case \"${targ}\" in\n+arm*-*-*)\t\tgdb_sim=arm ;;\n+avr*-*-*)\t\tgdb_sim=avr ;;\n+bfin-*-*)\t\tgdb_sim=bfin ;;\n+bpf-*-*)\t\tgdb_sim=bpf ;;\n+frv-*-*)\t\tgdb_sim=frv ;;\n+ft32-*-*)\t\tgdb_sim=ft32 ;;\n+h8300*-*-*)\t\tgdb_sim=h8300 ;;\n+iq2000-*-*)\t\tgdb_sim=iq2000 ;;\n+lm32-*-*)\t\tgdb_sim=lm32 ;;\n+m32c-*-*)\t\tgdb_sim=m32c ;;\n+m32r-*-*)\t\tgdb_sim=m32r ;;\n+m68hc11-*-*|m6811-*-*)\tgdb_sim=m68hc11 ;;\n+microblaze*-*-*)\tgdb_sim=microblaze ;;\n+mips*-*-*)\t\tgdb_sim=mips ;;\n+mn10300*-*-*)\t\tgdb_sim=mn10300 ;;\n+moxie-*-*)\t\tgdb_sim=moxie ;;\n+msp430*-*-*)\t\tgdb_sim=msp430 ;;\n+or1k*-*-*)\t\tgdb_sim=or1k ;;\n+powerpc*-*-*)\t\tgdb_sim=ppc ;;\n+riscv*-*-*)\t\tgdb_sim=riscv ;;\n+rl78-*-*)\t\tgdb_sim=rl78 ;;\n+rx-*-*)\t\t\tgdb_sim=rx ;;\n+sh*-*-*)\t\tgdb_sim=sh ;;\n+sparc-*-*)\t\tgdb_sim=erc32 ;;\n+v850*-*-*)\t\tgdb_sim=v850 ;;\n+esac\n+if test \"x$gdb_sim\" != \"x\"; then\n+  gdb_sim=\"../sim/${gdb_sim}/libsim.a\"\n+fi\n+\n # map target onto default OS ABI\n \n case \"${targ}\" in"
    }
  ]
}