{
  "sha": "3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzA2Mzg4OGVjZmQyNDhlYmI0YTliOWM2MTgxOWM5YjZlYjA3YmVmMg==",
  "commit": {
    "author": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-05-16T10:57:44Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-05-16T15:36:34Z"
    },
    "message": "[PATCH 26/57][Arm][GAS] Add support for MVE instructions: vpnot and vpsel\n\ngas/ChangeLog:\n2019-05-16  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\t* config/tc-arm.c (do_mve_vpsel): New encoding function.\n\t(do_mve_vpnot): Likewise.\n\t(insns): Add entries for MVE mnemonics.\n\t* testsuite/gas/arm/mve-vpnot-bad.d: New test.\n\t* testsuite/gas/arm/mve-vpnot-bad.l: New test.\n\t* testsuite/gas/arm/mve-vpnot-bad.s: New test.\n\t* testsuite/gas/arm/mve-vpsel-bad.d: New test.\n\t* testsuite/gas/arm/mve-vpsel-bad.l: New test.\n\t* testsuite/gas/arm/mve-vpsel-bad.s: New test.",
    "tree": {
      "sha": "34bc07551c9099928a93e2c485ceb4caa6ac4240",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/34bc07551c9099928a93e2c485ceb4caa6ac4240"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1a186d296c88d5341d2939eb0eedf792b053f8a5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1a186d296c88d5341d2939eb0eedf792b053f8a5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1a186d296c88d5341d2939eb0eedf792b053f8a5"
    }
  ],
  "stats": {
    "total": 113,
    "additions": 113,
    "deletions": 0
  },
  "files": [
    {
      "sha": "188ad3b08c3d4086356b2970d9afe562c400ae5b",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -1,3 +1,15 @@\n+2019-05-16  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n+\n+\t* config/tc-arm.c (do_mve_vpsel): New encoding function.\n+\t(do_mve_vpnot): Likewise.\n+\t(insns): Add entries for MVE mnemonics.\n+\t* testsuite/gas/arm/mve-vpnot-bad.d: New test.\n+\t* testsuite/gas/arm/mve-vpnot-bad.l: New test.\n+\t* testsuite/gas/arm/mve-vpnot-bad.s: New test.\n+\t* testsuite/gas/arm/mve-vpsel-bad.d: New test.\n+\t* testsuite/gas/arm/mve-vpsel-bad.l: New test.\n+\t* testsuite/gas/arm/mve-vpsel-bad.s: New test.\n+\n 2019-05-16  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n \n \t* config/tc-arm.c (do_neon_mvn): Change to accept MVE variants."
    },
    {
      "sha": "c2bb52a78626562d862ffc746a155c3014c93028",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -15731,6 +15731,34 @@ do_mve_vmlas (void)\n   inst.is_neon = 1;\n }\n \n+static void\n+do_mve_vpsel (void)\n+{\n+  neon_select_shape (NS_QQQ, NS_NULL);\n+\n+  if (inst.cond > COND_ALWAYS)\n+    inst.pred_insn_type = INSIDE_VPT_INSN;\n+  else\n+    inst.pred_insn_type = MVE_OUTSIDE_PRED_INSN;\n+\n+  inst.instruction |= HI1 (inst.operands[0].reg) << 22;\n+  inst.instruction |= LOW4 (inst.operands[1].reg) << 16;\n+  inst.instruction |= LOW4 (inst.operands[0].reg) << 12;\n+  inst.instruction |= HI1 (inst.operands[1].reg) << 7;\n+  inst.instruction |= HI1 (inst.operands[2].reg) << 5;\n+  inst.instruction |= LOW4 (inst.operands[2].reg);\n+  inst.is_neon = 1;\n+}\n+\n+static void\n+do_mve_vpnot (void)\n+{\n+  if (inst.cond > COND_ALWAYS)\n+    inst.pred_insn_type = INSIDE_VPT_INSN;\n+  else\n+    inst.pred_insn_type = MVE_OUTSIDE_PRED_INSN;\n+}\n+\n static void\n do_mve_vmaxnma_vminnma (void)\n {\n@@ -24712,6 +24740,8 @@ static const struct asm_opcode insns[] =\n  mToC(\"vmlas\",\t  ee011e40,\t3, (RMQ, RMQ, RR),\t\tmve_vmlas),\n  mToC(\"vmulh\",\t  ee010e01,\t3, (RMQ, RMQ, RMQ),\t\tmve_vmulh),\n  mToC(\"vrmulh\",\t  ee011e01,\t3, (RMQ, RMQ, RMQ),\t\tmve_vmulh),\n+ mToC(\"vpnot\",\t  fe310f4d,\t0, (),\t\t\t\tmve_vpnot),\n+ mToC(\"vpsel\",\t  fe310f01,\t3, (RMQ, RMQ, RMQ),\t\tmve_vpsel),\n \n #undef THUMB_VARIANT\n #define THUMB_VARIANT & mve_fp_ext"
    },
    {
      "sha": "6aab2c47c1ddf3102ed172efad8d70c2fe98a4f8",
      "filename": "gas/testsuite/gas/arm/mve-vpnot-bad.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpnot-bad.d?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,5 @@\n+#name: bad MVE VPNOT instructions\n+#as: -march=armv8.1-m.main+mve.fp\n+#error_output: mve-vpnot-bad.l\n+\n+.*: +file format .*arm.*"
    },
    {
      "sha": "2ba96c6ddda767f039586f6117243dce78fc2bad",
      "filename": "gas/testsuite/gas/arm/mve-vpnot-bad.l",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpnot-bad.l?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,12 @@\n+[^:]*: Assembler messages:\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:12: Error: syntax error -- `vpnoteq'\n+[^:]*:13: Error: syntax error -- `vpnoteq'\n+[^:]*:15: Error: syntax error -- `vpnoteq'\n+[^:]*:16: Error: vector predicated instruction should be in VPT/VPST block -- `vpnott'\n+[^:]*:18: Error: instruction missing MVE vector predication code -- `vpnot'"
    },
    {
      "sha": "3588f60bda8db2327ce55220072cd8a6836423bd",
      "filename": "gas/testsuite/gas/arm/mve-vpnot-bad.s",
      "status": "added",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpnot-bad.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpnot-bad.s?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,18 @@\n+.macro cond\n+.irp cond, eq, ne, gt, ge, lt, le\n+it \\cond\n+vpnot\n+.endr\n+.endm\n+\n+.syntax unified\n+.thumb\n+cond\n+it eq\n+vpnoteq\n+vpnoteq\n+vpst\n+vpnoteq\n+vpnott\n+vpst\n+vpnot"
    },
    {
      "sha": "b8a602a6b1d03bf87765d09d382ccc20288d7c84",
      "filename": "gas/testsuite/gas/arm/mve-vpsel-bad.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpsel-bad.d?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,5 @@\n+#name: bad MVE VPSEL instructions\n+#as: -march=armv8.1-m.main+mve.fp\n+#error_output: mve-vpsel-bad.l\n+\n+.*: +file format .*arm.*"
    },
    {
      "sha": "d2b2890d287669ace51675d20797f27cf7708eac",
      "filename": "gas/testsuite/gas/arm/mve-vpsel-bad.l",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpsel-bad.l?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,12 @@\n+[^:]*: Assembler messages:\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:10: Warning: instruction is UNPREDICTABLE in an IT block\n+[^:]*:12: Error: syntax error -- `vpseleq.i16 q0,q1,q2'\n+[^:]*:13: Error: syntax error -- `vpseleq.i16 q0,q1,q2'\n+[^:]*:15: Error: syntax error -- `vpseleq.i16 q0,q1,q2'\n+[^:]*:16: Error: vector predicated instruction should be in VPT/VPST block -- `vpselt.i16 q0,q1,q2'\n+[^:]*:18: Error: instruction missing MVE vector predication code -- `vpsel.i16 q0,q1,q2'"
    },
    {
      "sha": "fc14fdc3d316c2869c3fe8b0295a05dbbc22f664",
      "filename": "gas/testsuite/gas/arm/mve-vpsel-bad.s",
      "status": "added",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3063888ecfd248ebb4a9b9c61819c9b6eb07bef2/gas/testsuite/gas/arm/mve-vpsel-bad.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-vpsel-bad.s?ref=3063888ecfd248ebb4a9b9c61819c9b6eb07bef2",
      "patch": "@@ -0,0 +1,19 @@\n+.macro cond\n+.irp cond, eq, ne, gt, ge, lt, le\n+it \\cond\n+vpsel.i16 q0, q1, q2\n+.endr\n+.endm\n+\n+.syntax unified\n+.thumb\n+cond\n+it eq\n+vpseleq.i16 q0, q1, q2\n+vpseleq.i16 q0, q1, q2\n+vpst\n+vpseleq.i16 q0, q1, q2\n+vpselt.i16 q0, q1, q2\n+vpst\n+vpsel.i16 q0, q1, q2\n+"
    }
  ]
}