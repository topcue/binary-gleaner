{
  "sha": "41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDFiYmJiODljNGQzMWExNWVmMzE3ZGQ3ZGU4YWY3NDlkMmEzNWU1Zg==",
  "commit": {
    "author": {
      "name": "Felix Willgerodt",
      "email": "felix.willgerodt@intel.com",
      "date": "2021-07-21T12:38:04Z"
    },
    "committer": {
      "name": "Felix Willgerodt",
      "email": "felix.willgerodt@intel.com",
      "date": "2021-09-03T12:50:16Z"
    },
    "message": "gdb, i386: Enable AVX512-bfloat16 for i386 targets.\n\nValues of type bfloat16 can also be used on 32-bit targets, which was missed\nin the original enablement.  This also adjusts the testcase to pass with\n\"unix/-m32\", where only the lower 8 AVX registers are available.\n\ngdb/ChangeLog:\n2021-07-21  Felix Willgerodt  <Felix.Willgerodt@intel.com>\n\n\t* features/i386/32bit-sse.xml: Add bfloat16 type.\n\t* features/i386/32bit-sse.c: Regenerated.\n\ngdb/testsuite/ChangeLog:\n2021-07-21  Felix Willgerodt  <Felix.Willgerodt@intel.com>\n\n\t* gdb.arch/x86-avx512bf16.exp: Only use x/z/ymm 0-7.",
    "tree": {
      "sha": "b503ba2a952da0940f8b87c2533e5f6d97226665",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b503ba2a952da0940f8b87c2533e5f6d97226665"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/comments",
  "author": {
    "login": "felix-willgerodt",
    "id": 68062808,
    "node_id": "MDQ6VXNlcjY4MDYyODA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/68062808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/felix-willgerodt",
    "html_url": "https://github.com/felix-willgerodt",
    "followers_url": "https://api.github.com/users/felix-willgerodt/followers",
    "following_url": "https://api.github.com/users/felix-willgerodt/following{/other_user}",
    "gists_url": "https://api.github.com/users/felix-willgerodt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/felix-willgerodt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/felix-willgerodt/subscriptions",
    "organizations_url": "https://api.github.com/users/felix-willgerodt/orgs",
    "repos_url": "https://api.github.com/users/felix-willgerodt/repos",
    "events_url": "https://api.github.com/users/felix-willgerodt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/felix-willgerodt/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "felix-willgerodt",
    "id": 68062808,
    "node_id": "MDQ6VXNlcjY4MDYyODA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/68062808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/felix-willgerodt",
    "html_url": "https://github.com/felix-willgerodt",
    "followers_url": "https://api.github.com/users/felix-willgerodt/followers",
    "following_url": "https://api.github.com/users/felix-willgerodt/following{/other_user}",
    "gists_url": "https://api.github.com/users/felix-willgerodt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/felix-willgerodt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/felix-willgerodt/subscriptions",
    "organizations_url": "https://api.github.com/users/felix-willgerodt/orgs",
    "repos_url": "https://api.github.com/users/felix-willgerodt/repos",
    "events_url": "https://api.github.com/users/felix-willgerodt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/felix-willgerodt/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "41e37c9d0ac9dfbdaf725112d510cb10e5854f3d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/41e37c9d0ac9dfbdaf725112d510cb10e5854f3d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/41e37c9d0ac9dfbdaf725112d510cb10e5854f3d"
    }
  ],
  "stats": {
    "total": 19,
    "additions": 13,
    "deletions": 6
  },
  "files": [
    {
      "sha": "b6d5fbaf0fcaa9d6ea5722c1bd704bdd8d804082",
      "filename": "gdb/features/i386/32bit-sse.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/features/i386/32bit-sse.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/features/i386/32bit-sse.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/i386/32bit-sse.c?ref=41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
      "patch": "@@ -10,6 +10,9 @@ create_feature_i386_32bit_sse (struct target_desc *result, long regnum)\n \n   feature = tdesc_create_feature (result, \"org.gnu.gdb.i386.sse\");\n   tdesc_type *element_type;\n+  element_type = tdesc_named_type (feature, \"bfloat16\");\n+  tdesc_create_vector (feature, \"v8bf16\", element_type, 8);\n+\n   element_type = tdesc_named_type (feature, \"ieee_single\");\n   tdesc_create_vector (feature, \"v4f\", element_type, 4);\n \n@@ -31,6 +34,8 @@ create_feature_i386_32bit_sse (struct target_desc *result, long regnum)\n   tdesc_type_with_fields *type_with_fields;\n   type_with_fields = tdesc_create_union (feature, \"vec128\");\n   tdesc_type *field_type;\n+  field_type = tdesc_named_type (feature, \"v8bf16\");\n+  tdesc_add_field (type_with_fields, \"v8_bfloat16\", field_type);\n   field_type = tdesc_named_type (feature, \"v4f\");\n   tdesc_add_field (type_with_fields, \"v4_float\", field_type);\n   field_type = tdesc_named_type (feature, \"v2d\");"
    },
    {
      "sha": "8710622e9446e8220d652b19f947ae8794dd1d14",
      "filename": "gdb/features/i386/32bit-sse.xml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/features/i386/32bit-sse.xml",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/features/i386/32bit-sse.xml",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/i386/32bit-sse.xml?ref=41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
      "patch": "@@ -7,13 +7,15 @@\n \n <!DOCTYPE feature SYSTEM \"gdb-target.dtd\">\n <feature name=\"org.gnu.gdb.i386.sse\">\n+  <vector id=\"v8bf16\" type=\"bfloat16\" count=\"8\"/>\n   <vector id=\"v4f\" type=\"ieee_single\" count=\"4\"/>\n   <vector id=\"v2d\" type=\"ieee_double\" count=\"2\"/>\n   <vector id=\"v16i8\" type=\"int8\" count=\"16\"/>\n   <vector id=\"v8i16\" type=\"int16\" count=\"8\"/>\n   <vector id=\"v4i32\" type=\"int32\" count=\"4\"/>\n   <vector id=\"v2i64\" type=\"int64\" count=\"2\"/>\n   <union id=\"vec128\">\n+    <field name=\"v8_bfloat16\" type=\"v8bf16\"/>\n     <field name=\"v4_float\" type=\"v4f\"/>\n     <field name=\"v2_double\" type=\"v2d\"/>\n     <field name=\"v16_int8\" type=\"v16i8\"/>"
    },
    {
      "sha": "528e79f02dfdbb4808920c97c5fdb7bde4a20a4b",
      "filename": "gdb/testsuite/gdb.arch/x86-avx512bf16.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/testsuite/gdb.arch/x86-avx512bf16.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/41bbbb89c4d31a15ef317dd7de8af749d2a35e5f/gdb/testsuite/gdb.arch/x86-avx512bf16.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.arch/x86-avx512bf16.exp?ref=41bbbb89c4d31a15ef317dd7de8af749d2a35e5f",
      "patch": "@@ -64,11 +64,11 @@ gdb_test \"print \\$zmm6.v32_bfloat16\\[1\\]\" \"= 68.5\"\n # Test setting of bfloat values\n gdb_test_no_output \"set var \\$xmm0.v8_bfloat16\\[0\\] = 32.25\" \\\n     \"set %xmm0.v8_bfloat16\\[0\\]\"\n-gdb_test_no_output \"set var \\$ymm8.v16_bfloat16\\[1\\] = 33.5\" \\\n-    \"set %ymm8.v16_bfloat16\\[1\\]\"\n-gdb_test_no_output \"set var \\$zmm16.v32_bfloat16\\[2\\] = 22.75\" \\\n-    \"set %zmm16.v32_bfloat16\\[2\\]\"\n+gdb_test_no_output \"set var \\$ymm4.v16_bfloat16\\[1\\] = 33.5\" \\\n+    \"set %ymm4.v16_bfloat16\\[1\\]\"\n+gdb_test_no_output \"set var \\$zmm7.v32_bfloat16\\[2\\] = 22.75\" \\\n+    \"set %zmm7.v32_bfloat16\\[2\\]\"\n \n gdb_test \"p \\$xmm0.v8_bfloat16\\[0\\]\" \"= 32.25\"\n-gdb_test \"p \\$ymm8.v16_bfloat16\\[1\\]\" \"= 33.5\"\n-gdb_test \"p \\$zmm16.v32_bfloat16\\[2\\]\" \"= 22.75\"\n+gdb_test \"p \\$ymm4.v16_bfloat16\\[1\\]\" \"= 33.5\"\n+gdb_test \"p \\$zmm7.v32_bfloat16\\[2\\]\" \"= 22.75\""
    }
  ]
}