{
  "sha": "e4b1ab2062e1d8458167534881248d5555bd82fa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTRiMWFiMjA2MmUxZDg0NTgxNjc1MzQ4ODEyNDhkNTU1NWJkODJmYQ==",
  "commit": {
    "author": {
      "name": "Sergey Belyashov",
      "email": "sergey.belyashov@gmail.com",
      "date": "2021-05-10T12:36:08Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-05-10T12:36:08Z"
    },
    "message": "Add support for 8-bit and 24-bit shifts in the z80 assembler.\n\n\tPR 27415\n\t* config/tc-z80.c (emit_data_val): Add support for 8-bit and\n\t24-bit shifts.\n\t* testsuite/gas/z80/z80_reloc.a: Update tests.\n\t* testsuite/gas/z80/z80_reloc.d: Update expected disassembly.",
    "tree": {
      "sha": "3e32531db72d589a06a13dd618518ad345f28e33",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3e32531db72d589a06a13dd618518ad345f28e33"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e4b1ab2062e1d8458167534881248d5555bd82fa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e4b1ab2062e1d8458167534881248d5555bd82fa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e4b1ab2062e1d8458167534881248d5555bd82fa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e4b1ab2062e1d8458167534881248d5555bd82fa/comments",
  "author": {
    "login": "b-s-a",
    "id": 2833802,
    "node_id": "MDQ6VXNlcjI4MzM4MDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2833802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/b-s-a",
    "html_url": "https://github.com/b-s-a",
    "followers_url": "https://api.github.com/users/b-s-a/followers",
    "following_url": "https://api.github.com/users/b-s-a/following{/other_user}",
    "gists_url": "https://api.github.com/users/b-s-a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/b-s-a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/b-s-a/subscriptions",
    "organizations_url": "https://api.github.com/users/b-s-a/orgs",
    "repos_url": "https://api.github.com/users/b-s-a/repos",
    "events_url": "https://api.github.com/users/b-s-a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/b-s-a/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "749c700282097cf679ff019a9674d7c762f48619",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/749c700282097cf679ff019a9674d7c762f48619",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/749c700282097cf679ff019a9674d7c762f48619"
    }
  ],
  "stats": {
    "total": 37,
    "additions": 35,
    "deletions": 2
  },
  "files": [
    {
      "sha": "4b89aae25cc314062d13dadc45fff7866e2cbfac",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=e4b1ab2062e1d8458167534881248d5555bd82fa",
      "patch": "@@ -1,3 +1,11 @@\n+2021-05-10  Sergey Belyashov  <sergey.belyashov@gmail.com>\n+\n+\tPR 27415\n+\t* config/tc-z80.c (emit_data_val): Add support for 8-bit and\n+\t24-bit shifts.\n+\t* testsuite/gas/z80/z80_reloc.a: Update tests.\n+\t* testsuite/gas/z80/z80_reloc.d: Update expected disassembly.\n+\n 2021-05-08  Mike Frysinger  <vapier@gentoo.org>\n \n \t* doc/Makefile.am (html-local, as/index.html): New targets."
    },
    {
      "sha": "b43a34f3dfb0d772dcd7a978c3101280500aea08",
      "filename": "gas/config/tc-z80.c",
      "status": "modified",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/config/tc-z80.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/config/tc-z80.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-z80.c?ref=e4b1ab2062e1d8458167534881248d5555bd82fa",
      "patch": "@@ -1177,6 +1177,23 @@ emit_data_val (expressionS * val, int size)\n \t    {\n \t    case 0: r_type = BFD_RELOC_Z80_WORD0; break;\n \t    case 16: r_type = BFD_RELOC_Z80_WORD1; break;\n+\t    case 8:\n+\t    case 24: /* add two byte fixups */\n+\t      val->X_op = O_symbol;\n+\t      val->X_op_symbol = NULL;\n+\t      val->X_add_number = 0;\n+\t      if (shift == 8)\n+\t\t{\n+\t\t  fix_new_exp (frag_now, p++ - frag_now->fr_literal, 1, val, false,\n+\t\t\t       BFD_RELOC_Z80_BYTE1);\n+\t\t  /* prepare to next byte */\n+\t\t  r_type = BFD_RELOC_Z80_BYTE2;\n+\t\t}\n+\t      else\n+\t\tr_type = BFD_RELOC_Z80_BYTE3; /* high byte will be 0 */\n+\t      size = 1;\n+\t      simplify = false;\n+\t      break;\n \t    default: simplify = false;\n \t    }\n \t}"
    },
    {
      "sha": "8ca3b52deddc4ffa15a93ff0b45100cff05e0acd",
      "filename": "gas/testsuite/gas/z80/z80_reloc.d",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/testsuite/gas/z80/z80_reloc.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/testsuite/gas/z80/z80_reloc.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/z80/z80_reloc.d?ref=e4b1ab2062e1d8458167534881248d5555bd82fa",
      "patch": "@@ -24,4 +24,9 @@ OFFSET[   ]+TYPE[              ]+VALUE\\s*\n 0000002a[ ]+r_byte1[           ]+data16\n 0000002b[ ]+r_word0[           ]+data32\n 0000002d[ ]+r_word1[           ]+data32\n+0000002f[ ]+r_byte3[           ]+data32\n+00000031[ ]+r_byte1[           ]+data24\n+00000032[ ]+r_byte2[           ]+data24\n+00000033[ ]+r_byte1[           ]+data32\n+00000034[ ]+r_byte2[           ]+data32\n #pass"
    },
    {
      "sha": "0b75c55bb186f973d4b22879202eebec3b91ecb0",
      "filename": "gas/testsuite/gas/z80/z80_reloc.s",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/testsuite/gas/z80/z80_reloc.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e4b1ab2062e1d8458167534881248d5555bd82fa/gas/testsuite/gas/z80/z80_reloc.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/z80/z80_reloc.s?ref=e4b1ab2062e1d8458167534881248d5555bd82fa",
      "patch": "@@ -25,10 +25,13 @@\n .L_label:\n \t.db\tdata8\n \t.dw\tdata16\n-\t.d24 data24\n-\t.d32 data32\n+\t.d24\tdata24\n+\t.d32\tdata32\n \t.db\tdata16 & 0xff\n \t.db\tdata16 >> 8\n \t.dw\tdata32 & 0xffff\n \t.dw\tdata32 >> 16\n+\t.dw\tdata32 >> 24\n+\t.dw\tdata24 >> 8\n+\t.dw\tdata32 >> 8\n \t.end"
    }
  ]
}