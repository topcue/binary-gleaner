{
  "sha": "cc9519e7d6251b84dd95c55b562a15b25d703bc0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2M5NTE5ZTdkNjI1MWI4NGRkOTVjNTViNTYyYTE1YjI1ZDcwM2JjMA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-23T07:12:27Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-23T07:32:44Z"
    },
    "message": "Fix automatic makefile dependencies for generated ld/e*.c\n\nCommit c40e31a121 broke --enable-dependency-tracking=no.\n\n\t* Makefile.am (GENDEPDIR): New var, used..\n\t(GENSCRIPTS): ..here.\n\t* Makefile.in: Regenerate.\n\t* genscripts.sh: Test for $DEPDIR set before every use.",
    "tree": {
      "sha": "72696813973af6dd02511a3a8c32e51c0445c6af",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/72696813973af6dd02511a3a8c32e51c0445c6af"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cc9519e7d6251b84dd95c55b562a15b25d703bc0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc9519e7d6251b84dd95c55b562a15b25d703bc0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cc9519e7d6251b84dd95c55b562a15b25d703bc0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc9519e7d6251b84dd95c55b562a15b25d703bc0/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6f38008bb423d71e6984c8ce49b4fc83d2cdaf0d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6f38008bb423d71e6984c8ce49b4fc83d2cdaf0d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6f38008bb423d71e6984c8ce49b4fc83d2cdaf0d"
    }
  ],
  "stats": {
    "total": 53,
    "additions": 36,
    "deletions": 17
  },
  "files": [
    {
      "sha": "4b4956e9ccc99c5a1fe33bca5d0bba63b382d902",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=cc9519e7d6251b84dd95c55b562a15b25d703bc0",
      "patch": "@@ -1,3 +1,10 @@\n+2019-04-23  Alan Modra  <amodra@gmail.com>\n+\n+\t* Makefile.am (GENDEPDIR): New var, used..\n+\t(GENSCRIPTS): ..here.\n+\t* Makefile.in: Regenerate.\n+\t* genscripts.sh: Test for $DEPDIR set before every use.\n+\n 2019-04-22  Matthew Fortune  <matthew.fortune@mips.com>\n \n \t* testsuite/ld-mips-elf/mips-elf-flags.exp: Fix expected ASEs"
    },
    {
      "sha": "4a0bb152271cfdda3bef453c3353d958b9def93d",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 7,
      "deletions": 3,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=cc9519e7d6251b84dd95c55b562a15b25d703bc0",
      "patch": "@@ -152,6 +152,7 @@ AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \\\n BFDLIB = ../bfd/libbfd.la\n LIBIBERTY = ../libiberty/libiberty.a\n \n+# These all start with e so 'make clean' can find them.\n ALL_EMULATION_SOURCES = \\\n \teaix5ppc.c \\\n \teaix5rs6.c \\\n@@ -611,9 +612,12 @@ ldemul-list.h: Makefile\n stringify.sed: ${srcdir}/emultempl/$(STRINGIFY)\n \t  cp ${srcdir}/emultempl/$(STRINGIFY) stringify.sed\n \n-# These all start with e so 'make clean' can find them.\n-\n-GENSCRIPTS = $(SHELL) $(srcdir)/genscripts.sh \"${srcdir}\" \"${libdir}\" \"${prefix}\" \"${exec_prefix}\" @host@ @target@ @target_alias@ \"${DEPDIR}\" \"${LIB_PATH}\" \"@EMULATION_LIBPATH@\" \"@NATIVE_LIB_DIRS@\" @use_sysroot@ @enable_initfini_array@\n+if AMDEP\n+  GENDEPDIR=$(DEPDIR)\n+else\n+  GENDEPDIR=\n+endif\n+GENSCRIPTS = $(SHELL) $(srcdir)/genscripts.sh \"${srcdir}\" \"${libdir}\" \"${prefix}\" \"${exec_prefix}\" @host@ @target@ @target_alias@ \"$(GENDEPDIR)\" \"${LIB_PATH}\" \"@EMULATION_LIBPATH@\" \"@NATIVE_LIB_DIRS@\" @use_sysroot@ @enable_initfini_array@\n GEN_DEPENDS = $(srcdir)/genscripts.sh stringify.sed\n \n @TDIRS@"
    },
    {
      "sha": "fbccfbc9d7ca8223af3088bc29ee49d19f612c11",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=cc9519e7d6251b84dd95c55b562a15b25d703bc0",
      "patch": "@@ -638,6 +638,8 @@ AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \\\n \n BFDLIB = ../bfd/libbfd.la\n LIBIBERTY = ../libiberty/libiberty.a\n+\n+# These all start with e so 'make clean' can find them.\n ALL_EMULATION_SOURCES = \\\n \teaix5ppc.c \\\n \teaix5rs6.c \\\n@@ -979,9 +981,9 @@ OFILES = ldgram.@OBJEXT@ ldlex-wrapper.@OBJEXT@ lexsup.@OBJEXT@ ldlang.@OBJEXT@\n STAGESTUFF = *.@OBJEXT@ ldscripts/* e*.c\n SRC_POTFILES = $(CFILES) $(HFILES)\n BLD_POTFILES = $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES)\n-\n-# These all start with e so 'make clean' can find them.\n-GENSCRIPTS = $(SHELL) $(srcdir)/genscripts.sh \"${srcdir}\" \"${libdir}\" \"${prefix}\" \"${exec_prefix}\" @host@ @target@ @target_alias@ \"${DEPDIR}\" \"${LIB_PATH}\" \"@EMULATION_LIBPATH@\" \"@NATIVE_LIB_DIRS@\" @use_sysroot@ @enable_initfini_array@\n+@AMDEP_FALSE@GENDEPDIR = \n+@AMDEP_TRUE@GENDEPDIR = $(DEPDIR)\n+GENSCRIPTS = $(SHELL) $(srcdir)/genscripts.sh \"${srcdir}\" \"${libdir}\" \"${prefix}\" \"${exec_prefix}\" @host@ @target@ @target_alias@ \"$(GENDEPDIR)\" \"${LIB_PATH}\" \"@EMULATION_LIBPATH@\" \"@NATIVE_LIB_DIRS@\" @use_sysroot@ @enable_initfini_array@\n GEN_DEPENDS = $(srcdir)/genscripts.sh stringify.sed\n \n # We need this for automake to use YLWRAP."
    },
    {
      "sha": "cb2b081e9e975fb5e797f822958c8940760d8b6e",
      "filename": "ld/genscripts.sh",
      "status": "modified",
      "additions": 17,
      "deletions": 11,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/genscripts.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9519e7d6251b84dd95c55b562a15b25d703bc0/ld/genscripts.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/genscripts.sh?ref=cc9519e7d6251b84dd95c55b562a15b25d703bc0",
      "patch": "@@ -129,11 +129,15 @@ TOOL_LIB=$2\n \n source_sh()\n {\n-  echo $1 >> ${DEPDIR}/e${EMULATION_NAME}.Tc\n+  if test -n \"${DEPDIR}\"; then\n+    echo $1 >> ${DEPDIR}/e${EMULATION_NAME}.Tc\n+  fi\n   . $1\n }\n \n-rm -f ${DEPDIR}/e${EMULATION_NAME}.Tc\n+if test -n \"${DEPDIR}\"; then\n+  rm -f ${DEPDIR}/e${EMULATION_NAME}.Tc\n+fi\n \n # Include the emulation-specific parameters:\n CUSTOMIZER_SCRIPT=\"${srcdir}/emulparams/${EMULATION_NAME}.sh\"\n@@ -639,12 +643,14 @@ fi\n > e${EMULATION_NAME}.c\n source_em ${srcdir}/emultempl/${TEMPLATE_NAME-generic}.em\n \n-ecdeps=\n-for dep in `cat ${DEPDIR}/e${EMULATION_NAME}.Tc`; do\n-  case \" $ecdeps \" in\n-    *\" $dep \"*): ;;\n-    *) ecdeps=\"$ecdeps $dep\" ;;\n-  esac\n-done\n-rm -f ${DEPDIR}/e${EMULATION_NAME}.Tc\n-echo \"e${EMULATION_NAME}.c:${ecdeps}\" > ${DEPDIR}/e${EMULATION_NAME}.Pc\n+if test -n \"${DEPDIR}\"; then\n+  ecdeps=\n+  for dep in `cat ${DEPDIR}/e${EMULATION_NAME}.Tc`; do\n+    case \" $ecdeps \" in\n+      *\" $dep \"*): ;;\n+      *) ecdeps=\"$ecdeps $dep\" ;;\n+    esac\n+  done\n+  rm -f ${DEPDIR}/e${EMULATION_NAME}.Tc\n+  echo \"e${EMULATION_NAME}.c:${ecdeps}\" > ${DEPDIR}/e${EMULATION_NAME}.Pc\n+fi"
    }
  ]
}