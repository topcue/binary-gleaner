{
  "sha": "f2dda4778417e2d58a5b0416ff9598f68470cbfa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjJkZGE0Nzc4NDE3ZTJkNThhNWIwNDE2ZmY5NTk4ZjY4NDcwY2JmYQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-06T17:32:06Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-15T18:29:28Z"
    },
    "message": "Move locator code to tui-stack.c\n\nThe locator is mostly implemented in tui-stack.c.  This moves the\nremaining bits to tui-stack.c and tui-stack.h, as appropriate.\n\ngdb/ChangeLog\n2019-08-15  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-wingeneral.c: Include tui-stack.h.\n\t* tui/tui-stack.h (MAX_LOCATOR_ELEMENT_LEN)\n\t(struct tui_locator_window): Move from tui-data.h.\n\t* tui/tui-stack.c (_locator, tui_locator_win_info_ptr)\n\t(tui_initialize_static_data): Move from tui-data.c.\n\t* tui/tui-data.h (MAX_LOCATOR_ELEMENT_LEN)\n\t(struct tui_locator_window): Move to tui-stack.c.\n\t* tui/tui-data.c (_locator, tui_locator_win_info_ptr)\n\t(tui_initialize_static_data): Move to tui-stack.c.",
    "tree": {
      "sha": "dc9dbad1c7e2b148683885251447af0d6285c645",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/dc9dbad1c7e2b148683885251447af0d6285c645"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f2dda4778417e2d58a5b0416ff9598f68470cbfa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2dda4778417e2d58a5b0416ff9598f68470cbfa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f2dda4778417e2d58a5b0416ff9598f68470cbfa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2dda4778417e2d58a5b0416ff9598f68470cbfa/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ed4a1084d725a5d1aecefc6a430d3059a77c102d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ed4a1084d725a5d1aecefc6a430d3059a77c102d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ed4a1084d725a5d1aecefc6a430d3059a77c102d"
    }
  ],
  "stats": {
    "total": 115,
    "additions": 65,
    "deletions": 50
  },
  "files": [
    {
      "sha": "129d85d9030713972ca2db4ffb9a4218f6639e77",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -1,3 +1,15 @@\n+2019-08-15  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-wingeneral.c: Include tui-stack.h.\n+\t* tui/tui-stack.h (MAX_LOCATOR_ELEMENT_LEN)\n+\t(struct tui_locator_window): Move from tui-data.h.\n+\t* tui/tui-stack.c (_locator, tui_locator_win_info_ptr)\n+\t(tui_initialize_static_data): Move from tui-data.c.\n+\t* tui/tui-data.h (MAX_LOCATOR_ELEMENT_LEN)\n+\t(struct tui_locator_window): Move to tui-stack.c.\n+\t* tui/tui-data.c (_locator, tui_locator_win_info_ptr)\n+\t(tui_initialize_static_data): Move to tui-stack.c.\n+\n 2019-08-15  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-layout.c (show_source_disasm_command)"
    },
    {
      "sha": "c308237d187b9c98bdef0d943148f2b556a7503c",
      "filename": "gdb/tui/tui-data.c",
      "status": "modified",
      "additions": 0,
      "deletions": 25,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-data.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-data.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.c?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -36,7 +36,6 @@ struct tui_win_info *tui_win_list[MAX_MAJOR_WINDOWS];\n ** Private data\n ****************************/\n static int term_height, term_width;\n-static struct tui_locator_window _locator;\n static std::vector<tui_source_window_base *> source_windows;\n static struct tui_win_info *win_with_focus = NULL;\n \n@@ -128,15 +127,6 @@ tui_add_to_source_windows (struct tui_source_window_base *win_info)\n     source_windows.push_back (win_info);\n }\n \n-/* Accessor for the locator win info.  Answers a pointer to the static\n-   locator win info struct.  */\n-struct tui_locator_window *\n-tui_locator_win_info_ptr (void)\n-{\n-  return &_locator;\n-}\n-\n-\n /* Accessor for the term_height.  */\n int\n tui_term_height (void)\n@@ -253,21 +243,6 @@ tui_partial_win_by_name (const char *name)\n   return NULL;\n }\n \n-\n-void\n-tui_initialize_static_data ()\n-{\n-  tui_gen_win_info *win = tui_locator_win_info_ptr ();\n-  win->width =\n-    win->height =\n-    win->origin.x =\n-    win->origin.y =\n-    win->viewport_height = 0;\n-  win->handle = NULL;\n-  win->is_visible = false;\n-  win->title = 0;\n-}\n-\n /* See tui-data.h.  */\n \n void"
    },
    {
      "sha": "b5eeecdee9737a248bbb787a95c3efcbe3ef1e9a",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 0,
      "deletions": 25,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -148,31 +148,6 @@ struct tui_line_or_address\n     } u;\n };\n \n-#ifdef PATH_MAX\n-# define MAX_LOCATOR_ELEMENT_LEN        PATH_MAX\n-#else\n-# define MAX_LOCATOR_ELEMENT_LEN        1024\n-#endif\n-\n-/* Locator window class.  */\n-\n-struct tui_locator_window : public tui_gen_win_info\n-{\n-  tui_locator_window ()\n-    : tui_gen_win_info (LOCATOR_WIN)\n-  {\n-    full_name[0] = 0;\n-    proc_name[0] = 0;\n-  }\n-\n-  char full_name[MAX_LOCATOR_ELEMENT_LEN];\n-  char proc_name[MAX_LOCATOR_ELEMENT_LEN];\n-  int line_no = 0;\n-  CORE_ADDR addr = 0;\n-  /* Architecture associated with code at this location.  */\n-  struct gdbarch *gdbarch = nullptr;\n-};\n-\n /* This defines information about each logical window.  */\n struct tui_win_info : public tui_gen_win_info\n {"
    },
    {
      "sha": "c67ac1ba549f9ed5b4eea5ef65deae38eba661e3",
      "filename": "gdb/tui/tui-stack.c",
      "status": "modified",
      "additions": 25,
      "deletions": 0,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-stack.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-stack.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-stack.c?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -39,6 +39,8 @@\n \n #include \"gdb_curses.h\"\n \n+static struct tui_locator_window _locator;\n+\n /* Get a printable name for the function at the address.\n    The symbol name is demangled if demangling is turned on.\n    Returns a pointer to a static area holding the result.  */\n@@ -56,6 +58,29 @@ static int tui_set_locator_info (struct gdbarch *gdbarch,\n static void tui_update_command (const char *, int);\n \f\n \n+/* Accessor for the locator win info.  Answers a pointer to the static\n+   locator win info struct.  */\n+struct tui_locator_window *\n+tui_locator_win_info_ptr (void)\n+{\n+  return &_locator;\n+}\n+\n+void\n+tui_initialize_static_data ()\n+{\n+  tui_gen_win_info *win = tui_locator_win_info_ptr ();\n+  win->width =\n+    win->height =\n+    win->origin.x =\n+    win->origin.y =\n+    win->viewport_height = 0;\n+  win->handle = NULL;\n+  win->is_visible = false;\n+  win->title = 0;\n+}\n+\n+\n /* Create the status line to display as much information as we can on\n    this single line: target name, process number, current function,\n    current line, current PC, SingleKey mode.  */"
    },
    {
      "sha": "51c976b2f56329ebc624d7d7721404adb3589b1e",
      "filename": "gdb/tui/tui-stack.h",
      "status": "modified",
      "additions": 27,
      "deletions": 0,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-stack.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-stack.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-stack.h?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -22,8 +22,35 @@\n #ifndef TUI_TUI_STACK_H\n #define TUI_TUI_STACK_H\n \n+#include \"tui/tui-data.h\"\n+\n struct frame_info;\n \n+#ifdef PATH_MAX\n+# define MAX_LOCATOR_ELEMENT_LEN        PATH_MAX\n+#else\n+# define MAX_LOCATOR_ELEMENT_LEN        1024\n+#endif\n+\n+/* Locator window class.  */\n+\n+struct tui_locator_window : public tui_gen_win_info\n+{\n+  tui_locator_window ()\n+    : tui_gen_win_info (LOCATOR_WIN)\n+  {\n+    full_name[0] = 0;\n+    proc_name[0] = 0;\n+  }\n+\n+  char full_name[MAX_LOCATOR_ELEMENT_LEN];\n+  char proc_name[MAX_LOCATOR_ELEMENT_LEN];\n+  int line_no = 0;\n+  CORE_ADDR addr = 0;\n+  /* Architecture associated with code at this location.  */\n+  struct gdbarch *gdbarch = nullptr;\n+};\n+\n extern void tui_update_locator_fullname (const char *);\n extern void tui_show_locator_content (void);\n extern int tui_show_frame_info (struct frame_info *);"
    },
    {
      "sha": "52583cfb8ac3b0d382d7e07d80be05ea012b1060",
      "filename": "gdb/tui/tui-wingeneral.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-wingeneral.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2dda4778417e2d58a5b0416ff9598f68470cbfa/gdb/tui/tui-wingeneral.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-wingeneral.c?ref=f2dda4778417e2d58a5b0416ff9598f68470cbfa",
      "patch": "@@ -24,6 +24,7 @@\n #include \"tui/tui-data.h\"\n #include \"tui/tui-wingeneral.h\"\n #include \"tui/tui-win.h\"\n+#include \"tui/tui-stack.h\"\n \n #include \"gdb_curses.h\"\n "
    }
  ]
}