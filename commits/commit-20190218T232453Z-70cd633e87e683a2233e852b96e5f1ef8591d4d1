{
  "sha": "70cd633e87e683a2233e852b96e5f1ef8591d4d1",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzBjZDYzM2U4N2U2ODNhMjIzM2U4NTJiOTZlNWYxZWY4NTkxZDRkMQ==",
  "commit": {
    "author": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-02-18T18:10:09Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-02-18T23:24:53Z"
    },
    "message": "gdb: Allow gdbarch to override alignment for method and member pointers\n\nThe code in type_align (gdbtypes.c) currently hard-codes the rules for\naligning method and member pointers.  It would seem better to forward\nthese types through the gdbarch hook, so that an architecture could\noverride the alignment of these types if needed.\n\nOnly 3 architectures currently override the gdbarch alignment hook,\nthese are arc, i386, and nio2.\n\nFor arc and nios the alignment rules are that alignment is the minimum\nof 4-bytes and the type length.  As pointers are 4-bytes on these\ntargets, then (assuming method and members pointers are also 4-bytes)\nthere should be no change to the alignment after this patch.\n\nFor i386 the gdbarch alignment hook overrides for some INT and FLOAT\ntypes only.  For method and member pointers we align on the type size\nstill, so there should be no change to the alignment after this patch.\n\nI tested this on x86-64 GNU Linux with no regressions.\n\ngdb/ChangeLog:\n\n\t* gdbtypes.c (type_align): Allow alignment of TYPE_CODE_METHODPTR\n\tand TYPE_CODE_MEMBERPTR to be overridden by the gdbarch.",
    "tree": {
      "sha": "f7700b8e7b85a18af17663fc8a6c40a8046fde79",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f7700b8e7b85a18af17663fc8a6c40a8046fde79"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/70cd633e87e683a2233e852b96e5f1ef8591d4d1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/70cd633e87e683a2233e852b96e5f1ef8591d4d1",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/70cd633e87e683a2233e852b96e5f1ef8591d4d1",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/70cd633e87e683a2233e852b96e5f1ef8591d4d1/comments",
  "author": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "040b3e95e41f7af82e95c781aadc56a16019fd68",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/040b3e95e41f7af82e95c781aadc56a16019fd68",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/040b3e95e41f7af82e95c781aadc56a16019fd68"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 7,
    "deletions": 5
  },
  "files": [
    {
      "sha": "1cf2f072789bcc4dbbdae617759fe5f23c3e412b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/70cd633e87e683a2233e852b96e5f1ef8591d4d1/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/70cd633e87e683a2233e852b96e5f1ef8591d4d1/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=70cd633e87e683a2233e852b96e5f1ef8591d4d1",
      "patch": "@@ -1,3 +1,8 @@\n+2019-02-18  Andrew Burgess  <andrew.burgess@embecosm.com>\n+\n+\t* gdbtypes.c (type_align): Allow alignment of TYPE_CODE_METHODPTR\n+\tand TYPE_CODE_MEMBERPTR to be overridden by the gdbarch.\n+\n 2019-02-18  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n \n \t* ada-task.c (_initialize_tasks): Use 'with_cleanup' register"
    },
    {
      "sha": "0d293393daede5825eb9991643c5edcb71b03577",
      "filename": "gdb/gdbtypes.c",
      "status": "modified",
      "additions": 2,
      "deletions": 5,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/70cd633e87e683a2233e852b96e5f1ef8591d4d1/gdb/gdbtypes.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/70cd633e87e683a2233e852b96e5f1ef8591d4d1/gdb/gdbtypes.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbtypes.c?ref=70cd633e87e683a2233e852b96e5f1ef8591d4d1",
      "patch": "@@ -3011,6 +3011,8 @@ type_align (struct type *type)\n     case TYPE_CODE_CHAR:\n     case TYPE_CODE_BOOL:\n     case TYPE_CODE_DECFLOAT:\n+    case TYPE_CODE_METHODPTR:\n+    case TYPE_CODE_MEMBERPTR:\n       {\n \tstruct gdbarch *arch = get_type_arch (type);\n \talign = gdbarch_type_align (arch, type);\n@@ -3053,11 +3055,6 @@ type_align (struct type *type)\n \t anyway.  */\n       break;\n \n-    case TYPE_CODE_METHODPTR:\n-    case TYPE_CODE_MEMBERPTR:\n-      align = type_length_units (type);\n-      break;\n-\n     case TYPE_CODE_VOID:\n       align = 1;\n       break;"
    }
  ]
}