{
  "sha": "6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NmEwYTBkZDBjYzQzNzY1ZDhlNWUyNzdhZWFhZjE2OWE4NjNmMjMxNQ==",
  "commit": {
    "author": {
      "name": "Vivek Das Mohapatra",
      "email": "vivek@collabora.com",
      "date": "2020-12-14T17:25:51Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-12-15T08:14:56Z"
    },
    "message": "Handle -z unique/-z nounique in ld\n\nAdd (or suppress) a DT_GNU_FLAGS_1 dynamic section\nwith a bit flag value of DF_GNU_1_UNIQUE.\n\nbfd/\n\t* elflink.c (bfd_elf_size_dynamic_sections): Call\n\t_bfd_elf_add_dynamic_entry to add a DT_GNU_FLAGS_1 section.\ninclude/\n\t* bfdlink.h (struct bfd_link_info): New field gnu_flags_1.\nld/\n\t* emultempl/elf.em (gld${EMULATION_NAME}_handle_option):\n\tParse -z unique / -z nounique options.",
    "tree": {
      "sha": "776cc1a93737ca13d34c6f6c0c906134c7ddd46f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/776cc1a93737ca13d34c6f6c0c906134c7ddd46f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/comments",
  "author": null,
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ee0688c2339deba4bca7d57a96001183aa06a765",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ee0688c2339deba4bca7d57a96001183aa06a765",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ee0688c2339deba4bca7d57a96001183aa06a765"
    }
  ],
  "stats": {
    "total": 23,
    "additions": 22,
    "deletions": 1
  },
  "files": [
    {
      "sha": "11b901a22042497976704be8fb5823c1209d5da8",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-15  Vivek Das Mohapatra  <vivek@collabora.com>\n+\n+\t* elflink.c (bfd_elf_size_dynamic_sections): Call\n+\t_bfd_elf_add_dynamic_entry to add a DT_GNU_FLAGS_1 section.\n+\n 2020-12-14  Alan Modra  <amodra@gmail.com>\n \n \t* elf-bfd.h (struct elf_obj_tdata): Add being_created."
    },
    {
      "sha": "37af3efcb068380558887230fda284c2ee0b9bd1",
      "filename": "bfd/elflink.c",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/bfd/elflink.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/bfd/elflink.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elflink.c?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -7178,7 +7178,10 @@ bfd_elf_size_dynamic_sections (bfd *output_bfd,\n \t      || !_bfd_elf_add_dynamic_entry (info, DT_SYMTAB, 0)\n \t      || !_bfd_elf_add_dynamic_entry (info, DT_STRSZ, strsize)\n \t      || !_bfd_elf_add_dynamic_entry (info, DT_SYMENT,\n-\t\t\t\t\t      bed->s->sizeof_sym))\n+\t\t\t\t\t      bed->s->sizeof_sym)\n+\t      || (info->gnu_flags_1\n+\t\t  && !_bfd_elf_add_dynamic_entry (info, DT_GNU_FLAGS_1,\n+\t\t\t\t\t\t  info->gnu_flags_1)))\n \t    return FALSE;\n \t}\n     }"
    },
    {
      "sha": "a8316ee1342aa8c8ea10d862c7238afa16c750ac",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -1,6 +1,7 @@\n 2020-12-15  Vivek Das Mohapatra  <vivek@collabora.com>\n \n \t* elf/common.h (DT_GNU_FLAGS_1, DF_GNU_1_UNIQUE): Define.\n+\t* bfdlink.h (struct bfd_link_info): New field gnu_flags_1.\n \n 2020-12-11  Cary Coutant  <ccoutant@gmail.com>\n "
    },
    {
      "sha": "3019033ea22935f82f482bc77c07bcc70d37daff",
      "filename": "include/bfdlink.h",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/include/bfdlink.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/include/bfdlink.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/bfdlink.h?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -655,6 +655,9 @@ struct bfd_link_info\n   /* May be used to set DT_FLAGS_1 for ELF. */\n   bfd_vma flags_1;\n \n+  /* May be used to set DT_GNU_FLAGS_1 for ELF. */\n+  bfd_vma gnu_flags_1;\n+\n   /* May be used to set ELF visibility for __start_* / __stop_.  */\n   unsigned int start_stop_visibility;\n "
    },
    {
      "sha": "3db7fc6a864cce5b291703227fd937322c64a76b",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-15  Vivek Das Mohapatra  <vivek@collabora.com>\n+\n+\t* emultempl/elf.em (gld${EMULATION_NAME}_handle_option):\n+\tParse -z unique / -z nounique options.\n+\n 2020-12-14  Howard Chu  <hyc@symas.com>\n \n \t* libdep_plugin.c: New file: Processes archives that contain a"
    },
    {
      "sha": "aa40c7829e529a19ce7411ed0263ebf2fce45aa6",
      "filename": "ld/emultempl/elf.em",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/ld/emultempl/elf.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a0a0dd0cc43765d8e5e277aeaaf169a863f2315/ld/emultempl/elf.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/elf.em?ref=6a0a0dd0cc43765d8e5e277aeaaf169a863f2315",
      "patch": "@@ -809,6 +809,10 @@ fragment <<EOF\n \t  link_info.flags |= (bfd_vma) DF_ORIGIN;\n \t  link_info.flags_1 |= (bfd_vma) DF_1_ORIGIN;\n \t}\n+      else if (strcmp (optarg, \"unique\") == 0)\n+\tlink_info.gnu_flags_1 |= (bfd_vma) DF_GNU_1_UNIQUE;\n+      else if (strcmp (optarg, \"nounique\") == 0)\n+\tlink_info.gnu_flags_1 &= ~(bfd_vma) DF_GNU_1_UNIQUE;\n       else if (strcmp (optarg, \"combreloc\") == 0)\n \tlink_info.combreloc = TRUE;\n       else if (strcmp (optarg, \"nocombreloc\") == 0)"
    }
  ]
}