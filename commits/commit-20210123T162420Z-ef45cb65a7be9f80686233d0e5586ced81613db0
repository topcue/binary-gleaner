{
  "sha": "ef45cb65a7be9f80686233d0e5586ced81613db0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWY0NWNiNjVhN2JlOWY4MDY4NjIzM2QwZTU1ODZjZWQ4MTYxM2RiMA==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-01-23T16:04:43Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-01-23T16:24:20Z"
    },
    "message": "Use readline's variant of Windows patch\n\nA while back, Eli sent a patch to readline that was incorporated by\nupstream readline in a slightly different form.  To cut down on\ndivergences between GDB and upstream readline, I am checking in this\npatch to use the readline code.\n\nreadline/readline/ChangeLog.gdb\n2021-01-23  Tom Tromey  <tom@tromey.com>\n\n\t* input.c [_WIN32]: Use code from upstream readline.",
    "tree": {
      "sha": "0da043d282d2c2a517ec1823b0fd81534175ca32",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0da043d282d2c2a517ec1823b0fd81534175ca32"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ef45cb65a7be9f80686233d0e5586ced81613db0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef45cb65a7be9f80686233d0e5586ced81613db0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ef45cb65a7be9f80686233d0e5586ced81613db0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef45cb65a7be9f80686233d0e5586ced81613db0/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1af4c9c4209c3478224f18dfb79dc09567b96705",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1af4c9c4209c3478224f18dfb79dc09567b96705",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1af4c9c4209c3478224f18dfb79dc09567b96705"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 9,
    "deletions": 5
  },
  "files": [
    {
      "sha": "71161cbe0278f215bbe0d0bac768a3fa34d78639",
      "filename": "readline/readline/ChangeLog.gdb",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef45cb65a7be9f80686233d0e5586ced81613db0/readline/readline/ChangeLog.gdb",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef45cb65a7be9f80686233d0e5586ced81613db0/readline/readline/ChangeLog.gdb",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/readline/readline/ChangeLog.gdb?ref=ef45cb65a7be9f80686233d0e5586ced81613db0",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-23  Tom Tromey  <tom@tromey.com>\n+\n+\t* input.c [_WIN32]: Use code from upstream readline.\n+\n 2019-10-23  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \tPR cli/24980"
    },
    {
      "sha": "d4d57a810a40b33e16bf42aa8e6953f64ccfd325",
      "filename": "readline/readline/input.c",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef45cb65a7be9f80686233d0e5586ced81613db0/readline/readline/input.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef45cb65a7be9f80686233d0e5586ced81613db0/readline/readline/input.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/readline/readline/input.c?ref=ef45cb65a7be9f80686233d0e5586ced81613db0",
      "patch": "@@ -99,16 +99,16 @@ static int ibuffer_space PARAMS((void));\n static int rl_get_char PARAMS((int *));\n static int rl_gather_tyi PARAMS((void));\n \n+/* Windows isatty returns true for every character device, including the null\n+   device, so we need to perform additional checks. */\n #if defined (_WIN32) && !defined (__CYGWIN__)\n-\n-/* 'isatty' in the Windows runtime returns non-zero for every\n-   character device, including the null device.  Repair that.  */\n #include <io.h>\n #include <conio.h>\n #define WIN32_LEAN_AND_MEAN 1\n #include <windows.h>\n \n-int w32_isatty (int fd)\n+int\n+win32_isatty (int fd)\n {\n   if (_isatty(fd))\n     {\n@@ -127,7 +127,7 @@ int w32_isatty (int fd)\n   return 0;\n }\n \n-#define isatty(x)  w32_isatty(x)\n+#define isatty(x)\twin32_isatty(x)\n #endif\n \n /* **************************************************************** */"
    }
  ]
}