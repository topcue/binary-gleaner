{
  "sha": "5b860c93e3c659625d92a2d2247712a84eac1041",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NWI4NjBjOTNlM2M2NTk2MjVkOTJhMmQyMjQ3NzEyYTg0ZWFjMTA0MQ==",
  "commit": {
    "author": {
      "name": "Philippe Waroquiers",
      "email": "philippe.waroquiers@skynet.be",
      "date": "2019-06-24T22:50:29Z"
    },
    "committer": {
      "name": "Philippe Waroquiers",
      "email": "philippe.waroquiers@skynet.be",
      "date": "2020-06-22T19:16:25Z"
    },
    "message": "NEWS and documentation for alias default-args related concept and commands.\n\ngdb/ChangeLog\n2020-06-22  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n\n\t* NEWS: Mention change to the alias command.\n\ngdb/doc/ChangeLog\n2020-06-22  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n\n\t* gdb.texinfo (Command aliases default args): New node documenting\n\thow to use default args for a command using aliases.\n\t(Aliases): Document the new 'DEFAULT-ARGS...' option.\n\t(Help): Update help aliases text and describe when full alias\n\tdefinition is provided.",
    "tree": {
      "sha": "47c7f36f35cf6b6ddbade564876f4aeb0b9b3b89",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/47c7f36f35cf6b6ddbade564876f4aeb0b9b3b89"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5b860c93e3c659625d92a2d2247712a84eac1041",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5b860c93e3c659625d92a2d2247712a84eac1041",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5b860c93e3c659625d92a2d2247712a84eac1041",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5b860c93e3c659625d92a2d2247712a84eac1041/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "746ebfe8dd7aa7d9ec8e9651871f6e11fbf14537",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/746ebfe8dd7aa7d9ec8e9651871f6e11fbf14537",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/746ebfe8dd7aa7d9ec8e9651871f6e11fbf14537"
    }
  ],
  "stats": {
    "total": 145,
    "additions": 139,
    "deletions": 6
  },
  "files": [
    {
      "sha": "a83f5afdcd9cddc6aa1470ba6e2634461d7e4b93",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=5b860c93e3c659625d92a2d2247712a84eac1041",
      "patch": "@@ -1,3 +1,7 @@\n+2020-06-22  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n+\n+\t* NEWS: Mention change to the alias command.\n+\n 2020-06-22  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n \n \t* cli/cli-cmds.c (lookup_cmd_for_default_args)"
    },
    {
      "sha": "f7585133c51444715ad0ab53f25a31ea552dca85",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 15,
      "deletions": 0,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=5b860c93e3c659625d92a2d2247712a84eac1041",
      "patch": "@@ -79,6 +79,21 @@ tui new-layout NAME WINDOW WEIGHT [WINDOW WEIGHT]...\n   Define a new TUI layout, specifying its name and the windows that\n   will be displayed.\n \n+* Changed commands\n+\n+alias [-a] [--] ALIAS = COMMAND [DEFAULT-ARGS...]\n+  The alias command can now specify default args for an alias.\n+  GDB automatically prepends the alias default args to the argument list\n+  provided explicitly by the user.\n+  For example, to have a backtrace with full details, you can define\n+  an alias 'bt_ALL' as\n+  'alias bt_ALL = backtrace -entry-values both -frame-arg all\n+     -past-main -past-entry -full'.\n+  Alias default arguments can also use a set of nested 'with' commands,\n+  e.g. 'alias pp10 = with print pretty -- with print elem 10 -- print'\n+  defines the alias pp10 that will pretty print a maximum of 10 elements\n+  of the given expression (if the expression is an array).\n+\n * New targets\n \n GNU/Linux/RISC-V (gdbserver)\triscv*-*-linux*"
    },
    {
      "sha": "fe6bfe7452378eaf50f5e49d9332a4512cf8ec20",
      "filename": "gdb/doc/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/doc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/doc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/ChangeLog?ref=5b860c93e3c659625d92a2d2247712a84eac1041",
      "patch": "@@ -1,3 +1,11 @@\n+2020-06-22  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n+\n+\t* gdb.texinfo (Command aliases default args): New node documenting\n+\thow to use default args for a command using aliases.\n+\t(Aliases): Document the new 'DEFAULT-ARGS...' option.\n+\t(Help): Update help aliases text and describe when full alias\n+\tdefinition is provided.\n+\n 2020-06-11  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.texinfo (Index Files): Reword.  Remove Ada limitation."
    },
    {
      "sha": "7f572c37c5c845a19407e377a950331b802c6466",
      "filename": "gdb/doc/gdb.texinfo",
      "status": "modified",
      "additions": 112,
      "deletions": 6,
      "changes": 118,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/doc/gdb.texinfo",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5b860c93e3c659625d92a2d2247712a84eac1041/gdb/doc/gdb.texinfo",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/gdb.texinfo?ref=5b860c93e3c659625d92a2d2247712a84eac1041",
      "patch": "@@ -1577,6 +1577,7 @@ show you the alternatives available, if there is more than one possibility).\n * Command Settings::            How to change default behavior of commands\n * Completion::                  Command completion\n * Command Options::             Command options\n+* Command aliases default args::        Automatically prepend default arguments to user-defined aliases\n * Help::                        How to ask @value{GDBN} for help\n @end menu\n \n@@ -1997,6 +1998,89 @@ uppercase.\n (For more on using the @code{print} command, see @ref{Data, ,Examining\n Data}.)\n \n+@node Command aliases default args\n+@section Automatically prepend default arguments to user-defined aliases\n+\n+You can tell @value{GDBN} to always prepend some default arguments to\n+the list of arguments provided explicitly by the user when using a\n+user-defined alias.\n+\n+If you repeatedly use the same arguments or options for a command, you\n+can define an alias for this command and tell @value{GDBN} to\n+automatically prepend these arguments or options to the list of\n+arguments you type explicitly when using the alias@footnote{@value{GDBN}\n+could easily accept default arguments for pre-defined commands and aliases,\n+but it was deemed this would be confusing, and so is not allowed.}.\n+\n+For example, if you often use the command @code{thread apply all}\n+specifying to work on the threads in ascending order and to continue in case it\n+encounters an error, you can tell @value{GDBN} to automatically preprend\n+the @code{-ascending} and @code{-c} options by using:\n+\n+@smallexample\n+(@value{GDBP}) alias thread apply asc-all = thread apply all -ascending -c\n+@end smallexample\n+\n+Once you have defined this alias with its default args, any time you type\n+the @code{thread apply asc-all} followed by @code{some arguments},\n+@value{GDBN} will execute  @code{thread apply all -ascending -c some arguments}.\n+\n+To have even less to type, you can also define a one word alias:\n+@smallexample\n+(@value{GDBP}) alias t_a_c = thread apply all -ascending -c\n+@end smallexample\n+\n+As usual, unambiguous abbreviations can be used for @var{alias}\n+and @var{default-args}.\n+\n+The different aliases of a command do not share their default args.\n+For example, you define a new alias @code{bt_ALL} showing all possible\n+information and another alias @code{bt_SMALL} showing very limited information\n+using:\n+@smallexample\n+(@value{GDBP}) alias bt_ALL = backtrace -entry-values both -frame-arg all \\\n+   -past-main -past-entry -full\n+(@value{GDBP}) alias bt_SMALL = backtrace -entry-values no -frame-arg none \\\n+   -past-main off -past-entry off\n+@end smallexample\n+\n+(For more on using the @code{alias} command, see @ref{Aliases}.)\n+\n+Default args are not limited to the arguments and options of @var{command},\n+but can specify nested commands if @var{command} accepts such a nested command\n+as argument.\n+For example, the below defines @code{faalocalsoftype} that lists the\n+frames having locals of a certain type, together with the matching\n+local vars:\n+@smallexample\n+(@value{GDBP}) alias faalocalsoftype = frame apply all info locals -q -t\n+(@value{GDBP}) faalocalsoftype int\n+#1  0x55554f5e in sleeper_or_burner (v=0xdf50) at sleepers.c:86\n+i = 0\n+ret = 21845\n+@end smallexample\n+\n+This is also very useful to define an alias for a set of nested @code{with}\n+commands to have a particular combination of temporary settings.  For example,\n+the below defines the alias @code{pp10} that pretty prints an expression\n+argument, with a maximum of 10 elements if the expression is a string or\n+an array:\n+@smallexample\n+(@value{GDBP}) alias pp10 = with print pretty -- with print elements 10 -- print\n+@end smallexample\n+This defines the alias  @code{pp10} as being a sequence of 3 commands.\n+The first part @code{with print pretty --} temporarily activates the setting\n+@code{set print pretty}, then launches the command that follows the separator\n+@code{--}.\n+The command following the first part is also a @code{with} command that\n+temporarily changes the setting @code{set print elements} to 10, then\n+launches the command that follows the second separator @code{--}.\n+The third part @code{print} is the command the @code{pp10} alias will launch,\n+using the temporary values of the settings and the arguments explicitly given\n+by the user.\n+For more information about the @code{with} command usage,\n+see @ref{Command Settings}.\n+\n @node Help\n @section Getting Help\n @cindex online documentation\n@@ -2016,7 +2100,7 @@ display a short list of named classes of commands:\n (@value{GDBP}) help\n List of classes of commands:\n \n-aliases -- Aliases of other commands\n+aliases -- User-defined aliases of other commands\n breakpoints -- Making program stop at certain points\n data -- Examining data\n files -- Specifying and examining files\n@@ -2043,8 +2127,9 @@ Command name abbreviations are allowed if unambiguous.\n Using one of the general help classes as an argument, you can get a\n list of the individual commands in that class.  If a command has\n aliases, the aliases are given after the command name, separated by\n-commas.  For example, here is the help display for the class\n-@code{status}:\n+commas.  If an alias has default arguments, the full definition of\n+the alias is given after the first line.\n+For example, here is the help display for the class @code{status}:\n \n @smallexample\n (@value{GDBP}) help status\n@@ -2056,7 +2141,10 @@ List of commands:\n @c to fit in smallbook page size.\n info, inf, i -- Generic command for showing things\n         about the program being debugged\n-info address -- Describe where symbol SYM is stored.\n+info address, iamain  -- Describe where symbol SYM is stored.\n+  alias iamain = info address main\n+info all-registers -- List of all registers and their contents,\n+        for selected stack frame.\n ...\n show, info set -- Generic command for showing things\n         about the debugger\n@@ -2072,6 +2160,8 @@ With a command name as @code{help} argument, @value{GDBN} displays a\n short paragraph on how to use that command.  If that command has\n one or more aliases, @value{GDBN} will display a first line with\n the command name and all its aliases separated by commas.\n+This first line will be followed by the full definition of all aliases\n+having default arguments.\n \n @kindex apropos\n @item apropos [-v] @var{regexp}\n@@ -2092,7 +2182,7 @@ results in:\n @smallexample\n @group\n alias -- Define a new command that is an alias of an existing command\n-aliases -- Aliases of other commands\n+aliases -- User-defined aliases of other commands\n @end group\n @end smallexample\n \n@@ -27502,7 +27592,7 @@ You can define a new alias with the @samp{alias} command.\n @table @code\n \n @kindex alias\n-@item alias [-a] [--] @var{ALIAS} = @var{COMMAND}\n+@item alias [-a] [--] @var{ALIAS} = @var{COMMAND} [DEFAULT-ARGS...]\n \n @end table\n \n@@ -27513,12 +27603,28 @@ underscores.\n @var{COMMAND} specifies the name of an existing command\n that is being aliased.\n \n+@var{COMMAND} can also be the name of an existing alias.  In this case,\n+@var{COMMAND} cannot be an alias that has default arguments.\n+\n The @samp{-a} option specifies that the new alias is an abbreviation\n of the command.  Abbreviations are not used in command completion.\n \n The @samp{--} option specifies the end of options,\n and is useful when @var{ALIAS} begins with a dash.\n \n+You can specify @var{default-args} for your alias.\n+These @var{default-args} will be automatically added before the alias\n+arguments typed explicitly on the command line.\n+\n+For example, the below defines an alias @code{btfullall} that shows all local\n+variables and all frame arguments:\n+@smallexample\n+(@value{GDBP}) alias btfullall = backtrace -full -frame-arguments all\n+@end smallexample\n+\n+For more information about @var{default-args}, see @ref{Command aliases default args,\n+,Automatically prepend default arguments to user-defined aliases}.\n+\n Here is a simple example showing how to make an abbreviation\n of a command so that there is less to type.\n Suppose you were tired of typing @samp{disas}, the current"
    }
  ]
}