{
  "sha": "ae5369e773c341ab55a130fffb4678bb3595d692",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWU1MzY5ZTc3M2MzNDFhYjU1YTEzMGZmZmI0Njc4YmIzNTk1ZDY5Mg==",
  "commit": {
    "author": {
      "name": "Ludovic Court\u00e8s",
      "email": "ludo@gnu.org",
      "date": "2020-06-28T14:25:40Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-07-20T15:00:55Z"
    },
    "message": "guile: Add support for Guile 3.0.\n\ngdb/ChangeLog\n2020-06-28  Ludovic Court\u00c3\u00a8s  <ludo@gnu.org>\n\n\t* guile/scm-math.c (vlscm_integer_fits_p): Use 'uintmax_t'\n\tand 'intmax_t' instead of 'scm_t_uintmax' and 'scm_t_intmax',\n\twhich are deprecated in Guile 3.0.\n\t* configure.ac (try_guile_versions): Add \"guile-3.0\".\n\t* configure (try_guile_versions): Regenerate.\n\t* NEWS: Update entry.\n\ngdb/testsuite/ChangeLog\n2020-06-28  Ludovic Court\u00c3\u00a8s  <ludo@gnu.org>\n\n\t* gdb.guile/source2.scm: Add #f first argument to 'format'.\n\t* gdb.guile/types-module.exp: Remove \"ERROR:\" from\n\tregexps since Guile 3.0 no longer prints that.\n\ngdb/doc/ChangeLog\n2020-06-28  Ludovic Court\u00c3\u00a8s  <ludo@gnu.org>\n\n\t* doc/guile.texi (Guile Introduction): Mention Guile 3.0.\n\nChange-Id: Iff116c2e40f334e4e0ca4e759a097bfd23634679",
    "tree": {
      "sha": "209745e75f62eba0a5b42868a1f51ed42a14acd2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/209745e75f62eba0a5b42868a1f51ed42a14acd2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ae5369e773c341ab55a130fffb4678bb3595d692",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ae5369e773c341ab55a130fffb4678bb3595d692",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ae5369e773c341ab55a130fffb4678bb3595d692",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ae5369e773c341ab55a130fffb4678bb3595d692/comments",
  "author": {
    "login": "civodul",
    "id": 1168435,
    "node_id": "MDQ6VXNlcjExNjg0MzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1168435?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/civodul",
    "html_url": "https://github.com/civodul",
    "followers_url": "https://api.github.com/users/civodul/followers",
    "following_url": "https://api.github.com/users/civodul/following{/other_user}",
    "gists_url": "https://api.github.com/users/civodul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/civodul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/civodul/subscriptions",
    "organizations_url": "https://api.github.com/users/civodul/orgs",
    "repos_url": "https://api.github.com/users/civodul/repos",
    "events_url": "https://api.github.com/users/civodul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/civodul/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "68cf161c24b096608bf4a1b97b489cc7277bffc0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/68cf161c24b096608bf4a1b97b489cc7277bffc0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/68cf161c24b096608bf4a1b97b489cc7277bffc0"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 29,
    "deletions": 10
  },
  "files": [
    {
      "sha": "30ef2c8e35a5befed62bc6b9b9926bfe189618bb",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -1,3 +1,12 @@\n+2020-07-20 Ludovic Court\u00e8s  <ludo@gnu.org>\n+\n+\t* guile/scm-math.c (vlscm_integer_fits_p): Use 'uintmax_t'\n+\tand 'intmax_t' instead of 'scm_t_uintmax' and 'scm_t_intmax',\n+\twhich are deprecated in Guile 3.0.\n+\t* configure.ac (try_guile_versions): Add \"guile-3.0\".\n+\t* configure (try_guile_versions): Regenerate.\n+\t* NEWS: Update entry.\n+\n 2020-07-20  Ludovic Court\u00e8s  <ludo@gnu.org>\n \t    Doug Evans  <dje@google.com>\n "
    },
    {
      "sha": "001dc5e46831acd1e8fe94333a4c902b09f7b8e7",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -132,7 +132,7 @@ GNU/Linux/RISC-V (gdbserver)\triscv*-*-linux*\n \n * Guile API\n \n-  ** GDB can now be built with GNU Guile 2.2 in addition to 2.0.\n+  ** GDB can now be built with GNU Guile 3.0 and 2.2 in addition to 2.0.\n \n   ** Procedures 'memory-port-read-buffer-size',\n      'set-memory-port-read-buffer-size!', 'memory-port-write-buffer-size',"
    },
    {
      "sha": "b259db585d17e08b70612df85b4df118d74b8187",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -10959,7 +10959,7 @@ fi\n \n \n \n-try_guile_versions=\"guile-2.2 guile-2.0\"\n+try_guile_versions=\"guile-3.0 guile-2.2 guile-2.0\"\n have_libguile=no\n case \"${with_guile}\" in\n no)"
    },
    {
      "sha": "f9461b21507fe9fde4774f98eba3352bcf44fd3f",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -1088,7 +1088,7 @@ AC_MSG_RESULT([$with_guile])\n dnl We check guile with pkg-config.\n AC_PATH_PROG(pkg_config_prog_path, pkg-config, missing)\n \n-try_guile_versions=\"guile-2.2 guile-2.0\"\n+try_guile_versions=\"guile-3.0 guile-2.2 guile-2.0\"\n have_libguile=no\n case \"${with_guile}\" in\n no)"
    },
    {
      "sha": "031e0efd9371f10cf39fd96b3536aa4a42c2f0de",
      "filename": "gdb/doc/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/doc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/doc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/ChangeLog?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -1,3 +1,7 @@\n+2020-07-20  Ludovic Court\u00e8s  <ludo@gnu.org>\n+\n+\t* doc/guile.texi (Guile Introduction): Mention Guile 3.0.\n+\n 2020-07-20  Ludovic Court\u00e8s  <ludo@gnu.org>\n \n \t* guile.texi (Memory Ports in Guile): Mark"
    },
    {
      "sha": "9d1f55a8396e5808d75142356b0c64fe383e7fb8",
      "filename": "gdb/doc/guile.texi",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/doc/guile.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/doc/guile.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/guile.texi?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -38,7 +38,7 @@ Guile support in @value{GDBN} follows the Python support in @value{GDBN}\n reasonably closely, so concepts there should carry over.\n However, some things are done differently where it makes sense.\n \n-@value{GDBN} requires Guile version 2.2 or 2.0.\n+@value{GDBN} requires Guile version 3.0, 2.2, or 2.0.\n \n @cindex guile scripts directory\n Guile scripts used by @value{GDBN} should be installed in"
    },
    {
      "sha": "419f5099bf4300b01d62aeecbecde8f3a965382f",
      "filename": "gdb/guile/scm-math.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/guile/scm-math.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/guile/scm-math.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/guile/scm-math.c?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -578,7 +578,7 @@ vlscm_integer_fits_p (SCM obj, struct type *type)\n       ULONGEST max;\n \n       /* If scm_is_unsigned_integer can't work with this type, just punt.  */\n-      if (TYPE_LENGTH (type) > sizeof (scm_t_uintmax))\n+      if (TYPE_LENGTH (type) > sizeof (uintmax_t))\n \treturn 0;\n       get_unsigned_type_max (type, &max);\n       return scm_is_unsigned_integer (obj, 0, max);\n@@ -588,7 +588,7 @@ vlscm_integer_fits_p (SCM obj, struct type *type)\n       LONGEST min, max;\n \n       /* If scm_is_signed_integer can't work with this type, just punt.  */\n-      if (TYPE_LENGTH (type) > sizeof (scm_t_intmax))\n+      if (TYPE_LENGTH (type) > sizeof (intmax_t))\n \treturn 0;\n       get_signed_type_minmax (type, &min, &max);\n       return scm_is_signed_integer (obj, min, max);"
    },
    {
      "sha": "7dca586dd472568f7803113960a6a8f3e2d8b16c",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-20  Ludovic Court\u00e8s  <ludo@gnu.org>\n+\n+\t* gdb.guile/source2.scm: Add #f first argument to 'format'.\n+\t* gdb.guile/types-module.exp: Remove \"ERROR:\" from\n+\tregexps since Guile 3.0 no longer prints that.\n+\n 2020-07-20  Ludovic Court\u00e8s  <ludo@gnu.org>\n \n \t* gdb.guile/scm-error.exp (\"source $remote_guile_file_1\"): Relax"
    },
    {
      "sha": "c39f03801a6cdeb33f6f5919367e8bff6954ecd4",
      "filename": "gdb/testsuite/gdb.guile/source2.scm",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/gdb.guile/source2.scm",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/gdb.guile/source2.scm",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.guile/source2.scm?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -15,5 +15,5 @@\n ;; You should have received a copy of the GNU General Public License\n ;; along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n-(display (format \"y~As\" \"e\"))\n+(display (format #f \"y~As\" \"e\"))\n (newline)"
    },
    {
      "sha": "8ced6fbffb47bd82a3a143f8f8e9f02554be35d4",
      "filename": "gdb/testsuite/gdb.guile/types-module.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/gdb.guile/types-module.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ae5369e773c341ab55a130fffb4678bb3595d692/gdb/testsuite/gdb.guile/types-module.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.guile/types-module.exp?ref=ae5369e773c341ab55a130fffb4678bb3595d692",
      "patch": "@@ -44,7 +44,7 @@ gdb_test \"guile (print (type-has-field-deep? d \\\"base_member\\\"))\" \\\n     \"= #t\" \"type-has-field-deep? member in baseclass\"\n \n gdb_test \"guile (print (type-has-field-deep? (lookup-type \\\"int\\\") \\\"base_member\\\"))\" \\\n-    \"ERROR: .*Wrong type argument in position 1 \\\\(expecting struct or union\\\\): #<gdb:type int>.*\" \\\n+    \"Wrong type argument in position 1 \\\\(expecting struct or union\\\\): #<gdb:type int>.*\" \\\n     \"type-has-field-deep? from int\"\n \n gdb_scm_test_silent_cmd \"guile (define enum-htab (make-enum-hashtable (lookup-type \\\"enum_type\\\")))\" \\\n@@ -54,9 +54,9 @@ gdb_test \"guile (print (hash-ref enum-htab \\\"B\\\"))\" \\\n     \"= 1\" \"verify make-enum-hashtable\"\n \n gdb_test \"guile (define bad-enum-htab (make-enum-hashtable #f))\" \\\n-    \"ERROR: .*Wrong type argument in position 1 \\\\(expecting gdb:type\\\\): #f.*\" \\\n+    \"Wrong type argument in position 1 \\\\(expecting gdb:type\\\\): #f.*\" \\\n     \"make-enum-hashtable from #f\"\n \n gdb_test \"guile (define bad-enum-htab (make-enum-hashtable (lookup-type \\\"int\\\")))\" \\\n-    \"ERROR: .*Wrong type argument in position 1 \\\\(expecting enum\\\\): #<gdb:type int>.*\" \\\n+    \"Wrong type argument in position 1 \\\\(expecting enum\\\\): #<gdb:type int>.*\" \\\n     \"make-enum-hashtable from int\""
    }
  ]
}