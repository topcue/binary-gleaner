{
  "sha": "e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
  "node_id": "C_kwDOANOeidoAKGU5YTA3MjFmODI3NGRhZWZmYWVkYmMzY2FiYzEyYzUyZDQzYTM4YTc",
  "commit": {
    "author": {
      "name": "liuzhensong",
      "email": "liuzhensong@loongson.cn",
      "date": "2021-10-22T08:42:05Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-10-24T11:06:31Z"
    },
    "message": "LoongArch binutils support\n\n2021-10-22  Chenghua Xu  <xuchenghua@loongson.cn>\n\t    Zhensong Liu  <liuzhensong@loongson.cn>\n\t    Weinan Liu  <liuweinan@loongson.cn>\nbinutils/\n\t* NEWS: Mention LoongArch support.\n\t* readelf.c: Add LoongArch.\n\t* testsuite/binutils-all/objdump.exp: Add LoongArch.",
    "tree": {
      "sha": "6edcb62471f23fdd44e65ca4db3d046ea8abdb86",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6edcb62471f23fdd44e65ca4db3d046ea8abdb86"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/comments",
  "author": null,
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6cc76c40a99bd13d69a311cae5ec891bd1d1dbf2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6cc76c40a99bd13d69a311cae5ec891bd1d1dbf2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6cc76c40a99bd13d69a311cae5ec891bd1d1dbf2"
    }
  ],
  "stats": {
    "total": 27,
    "additions": 27,
    "deletions": 0
  },
  "files": [
    {
      "sha": "e6977b650db6c70cce6efeba43fce7435519099e",
      "filename": "binutils/NEWS",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/NEWS?ref=e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
      "patch": "@@ -1,5 +1,7 @@\n -*- text -*-\n \n+* Add support for the LoongArch instruction set.\n+\n Changes in 2.37:\n \n * The readelf tool has a new command line option which can be used to specify"
    },
    {
      "sha": "fc17c043a9f9647c8fa364a9d51c153c15086d8e",
      "filename": "binutils/readelf.c",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/readelf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/readelf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/readelf.c?ref=e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
      "patch": "@@ -162,6 +162,7 @@\n #include \"elf/xstormy16.h\"\n #include \"elf/xtensa.h\"\n #include \"elf/z80.h\"\n+#include \"elf/loongarch.h\"\n \n #include \"getopt.h\"\n #include \"libiberty.h\"\n@@ -1678,6 +1679,11 @@ dump_relocations (Filedata *          filedata,\n \tcase EM_Z80:\n \t  rtype = elf_z80_reloc_type (type);\n \t  break;\n+\n+\tcase EM_LOONGARCH:\n+\t  rtype = elf_loongarch_reloc_type (type);\n+\t  break;\n+\n \t}\n \n       if (rtype == NULL)\n@@ -3971,6 +3977,20 @@ get_machine_flags (Filedata * filedata, unsigned e_flags, unsigned e_machine)\n \t      strcat (buf, _(\", unknown\")); break;\n \t    }\n \t  break;\n+\tcase EM_LOONGARCH:\n+\t  if (EF_LOONGARCH_IS_LP64 (e_flags))\n+\t    strcat (buf, \", LP64\");\n+\t  else if (EF_LOONGARCH_IS_ILP32 (e_flags))\n+\t    strcat (buf, \", ILP32\");\n+\n+\t  if (EF_LOONGARCH_IS_SOFT_FLOAT (e_flags))\n+\t    strcat (buf, \", SOFT-FLOAT\");\n+\t  else if (EF_LOONGARCH_IS_SINGLE_FLOAT (e_flags))\n+\t    strcat (buf, \", SINGLE-FLOAT\");\n+\t  else if (EF_LOONGARCH_IS_DOUBLE_FLOAT (e_flags))\n+\t    strcat (buf, \", DOUBLE-FLOAT\");\n+\n+\t  break;\n \t}\n     }\n \n@@ -13708,6 +13728,8 @@ is_32bit_abs_reloc (Filedata * filedata, unsigned int reloc_type)\n       return reloc_type == 2; /* R_IQ2000_32.  */\n     case EM_LATTICEMICO32:\n       return reloc_type == 3; /* R_LM32_32.  */\n+    case EM_LOONGARCH:\n+      return reloc_type == 1; /* R_LARCH_32. */\n     case EM_M32C_OLD:\n     case EM_M32C:\n       return reloc_type == 3; /* R_M32C_32.  */\n@@ -13925,6 +13947,8 @@ is_64bit_abs_reloc (Filedata * filedata, unsigned int reloc_type)\n     case EM_IA_64:\n       return (reloc_type == 0x26    /* R_IA64_DIR64MSB.  */\n \t      || reloc_type == 0x27 /* R_IA64_DIR64LSB.  */);\n+    case EM_LOONGARCH:\n+      return reloc_type == 2;      /* R_LARCH_64 */\n     case EM_PARISC:\n       return reloc_type == 80; /* R_PARISC_DIR64.  */\n     case EM_PPC64:"
    },
    {
      "sha": "6e8a114481dc669fbe20124e08e4ddaa635564a6",
      "filename": "binutils/testsuite/binutils-all/objdump.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/testsuite/binutils-all/objdump.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9a0721f8274daeffaedbc3cabc12c52d43a38a7/binutils/testsuite/binutils-all/objdump.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/objdump.exp?ref=e9a0721f8274daeffaedbc3cabc12c52d43a38a7",
      "patch": "@@ -41,6 +41,7 @@ lappend cpus_expected mips mn10200 mn10300 ms1 msp MSP430 nds32 n1h_v3 ns32k\n lappend cpus_expected or1k or1knd pj powerpc pyramid riscv romp rs6000 s390 sh sparc\n lappend cpus_expected tic54x tilegx tms320c30 tms320c4x tms320c54x\n lappend cpus_expected v850 vax x86-64 xscale xtensa z8k z8001 z8002\n+lappend cpus_expected Loongarch64 Loongarch32\n \n # Make sure the target CPU shows up in the list.\n lappend cpus_expected ${target_cpu}"
    }
  ]
}