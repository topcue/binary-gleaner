{
  "sha": "0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MGViYTE2NWE3NGNkYjAzOWE1ZTZlZDg2ZTAzOTZkODBmNjhjYTIyYw==",
  "commit": {
    "author": {
      "name": "Pedro Franco de Carvalho",
      "email": "pedromfc@linux.ibm.com",
      "date": "2019-08-01T19:51:44Z"
    },
    "committer": {
      "name": "Pedro Franco de Carvalho",
      "email": "pedromfc@linux.ibm.com",
      "date": "2019-08-01T19:51:44Z"
    },
    "message": "Remove directory names from gdb.base/batch-exit-status.exp\n\nAdjust gdb.base/batch-exit-status.exp so that test prefixes don't show\ndirectory names for the source scripts passed with -x, to make test\nresults from different build directories comparable.\n\ngdb/testsuite/ChangeLog:\n2019-08-01  Pedro Franco de Carvalho  <pedromfc@linux.ibm.com>\n\n\t* gdb.base/batch-exit-status.exp: Call test_exit_status with\n\tprefix argument.\n\t(test_exit_status): Add prefix argument.",
    "tree": {
      "sha": "1372d34e0642bd50dbad017448118e32c84d8243",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1372d34e0642bd50dbad017448118e32c84d8243"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0eba165a74cdb039a5e6ed86e0396d80f68ca22c/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "e0d0c518daa5e10a417d16ad8158e97016562342",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e0d0c518daa5e10a417d16ad8158e97016562342",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e0d0c518daa5e10a417d16ad8158e97016562342"
    }
  ],
  "stats": {
    "total": 38,
    "additions": 26,
    "deletions": 12
  },
  "files": [
    {
      "sha": "09878b6059db5949ef82ea0921ef1b36a9648c2d",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0eba165a74cdb039a5e6ed86e0396d80f68ca22c/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0eba165a74cdb039a5e6ed86e0396d80f68ca22c/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
      "patch": "@@ -1,3 +1,9 @@\n+2019-08-01  Pedro Franco de Carvalho  <pedromfc@linux.ibm.com>\n+\n+\t* gdb.base/batch-exit-status.exp: Call test_exit_status with\n+\tprefix argument.\n+\t(test_exit_status): Add prefix argument.\n+\n 2019-08-01  Tom de Vries  <tdevries@suse.de>\n \n \tPR testsuite/24863"
    },
    {
      "sha": "0f891155712f040ff14e8f6d1d4bae36cb3c137c",
      "filename": "gdb/testsuite/gdb.base/batch-exit-status.exp",
      "status": "modified",
      "additions": 20,
      "deletions": 12,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0eba165a74cdb039a5e6ed86e0396d80f68ca22c/gdb/testsuite/gdb.base/batch-exit-status.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0eba165a74cdb039a5e6ed86e0396d80f68ca22c/gdb/testsuite/gdb.base/batch-exit-status.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/batch-exit-status.exp?ref=0eba165a74cdb039a5e6ed86e0396d80f68ca22c",
      "patch": "@@ -43,28 +43,36 @@ proc _test_exit_status {expect_status cmdline_opts} {\n     }\n }\n \n-proc test_exit_status {expect_status cmdline_opts} {\n-    with_test_prefix $cmdline_opts {\n+proc test_exit_status {expect_status cmdline_opts prefix} {\n+    if { $prefix == \"\" } {\n+\tset prefix $cmdline_opts\n+    }\n+\n+    with_test_prefix $prefix {\n \t_test_exit_status $expect_status $cmdline_opts\n     }\n }\n \n # gdb -batch with nothing to do should exit 0.\n-test_exit_status 0 \"-batch\"\n+test_exit_status 0 \"-batch\" \"\"\n \n # Bad command-line options should cause exit 1.\n-test_exit_status 1 \"-batch -jslkflsdjlkfjlksdjf\"\n+test_exit_status 1 \"-batch -jslkflsdjlkfjlksdjf\" \"\"\n \n # gdb -batch with good commands should exit 0.\n-test_exit_status 0 \"-batch -ex \\\"info source\\\"\"\n-test_exit_status 0 \"-batch -x $good_commands\"\n+test_exit_status 0 \"-batch -ex \\\"info source\\\"\" \"\"\n+test_exit_status 0 \"-batch -x $good_commands\" \"-batch -x good-commands\"\n \n # gdb -batch with bad commands should exit 1.\n-test_exit_status 1 \"-batch -ex \\\"set not-a-thing 4\\\"\"\n-test_exit_status 1 \"-batch -x $bad_commands\"\n+test_exit_status 1 \"-batch -ex \\\"set not-a-thing 4\\\"\" \"\"\n+test_exit_status 1 \"-batch -x $bad_commands\" \"-batch -x bad-commands\"\n \n # Success or failure of the last thing determines the exit code.\n-test_exit_status 0 \"-batch -ex \\\"set not-a-thing 4\\\" -x $good_commands\"\n-test_exit_status 0 \"-batch -x $bad_commands -ex \\\"info source\\\"\"\n-test_exit_status 1 \"-batch -x $good_commands -x $bad_commands\"\n-test_exit_status 1 \"-batch -x $good_commands -ex \\\"set not-a-thing 4\\\"\"\n+test_exit_status 0 \"-batch -ex \\\"set not-a-thing 4\\\" -x $good_commands\" \\\n+    \"-batch -ex \\\"set not-a-thing 4\\\" -x good-commands\"\n+test_exit_status 0 \"-batch -x $bad_commands -ex \\\"info source\\\"\" \\\n+    \"-batch -x bad-commands -ex \\\"info source\\\"\"\n+test_exit_status 1 \"-batch -x $good_commands -x $bad_commands\" \\\n+    \"-batch -x good-commands -x bad-commands\"\n+test_exit_status 1 \"-batch -x $good_commands -ex \\\"set not-a-thing 4\\\"\" \\\n+    \"-batch -x good-commands -ex \\\"set not-a-thing 4\\\"\""
    }
  ]
}