{
  "sha": "9a665d62266e75f0519f3a663784c458885b5c63",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWE2NjVkNjIyNjZlNzVmMDUxOWYzYTY2Mzc4NGM0NTg4ODViNWM2Mw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-03-12T19:32:15Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-03-12T19:32:15Z"
    },
    "message": "Fix gdbserver build when intl already built\n\ngdbserver uses gdb's alloc.c, and this in turn can include headers\nfrom intl via gdbsupport/gdb_locale.h.  This can cause build failures\nin some situations, for example if you build gdb and gdbserver on\nmingw.\n\nThis patch restores the gdbsupport dependency on intl, and changes\ngdbserver to use ZW_GNU_GETTEXT_SISTER_DIR.  This fixes this build\nproblem.\n\nChangeLog\n2020-03-12  Tom Tromey  <tom@tromey.com>\n\n\t* Makefile.in: Rebuild.\n\t* Makefile.def (gdbsupport): Depend on intl.\n\ngdbserver/ChangeLog\n2020-03-12  Tom Tromey  <tom@tromey.com>\n\n\t* config.in, configure: Rebuild.\n\t* configure.ac: Call ZW_GNU_GETTEXT_SISTER_DIR.\n\t* acinclude.m4: Include gettext-sister.m4.\n\t* Makefile.in (top_builddir, INTL, INTL_DEPS, INTL_CFLAGS): New\n\tvariables.\n\t(INCLUDE_CFLAGS): Add INTL_CFLAGS.\n\t(gdbserver$(EXEEXT), gdbreplay$(EXEEXT)): Use INTL_DEPS, INTL.",
    "tree": {
      "sha": "61b663275210c20686430c53fe7864ce6ceb19aa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/61b663275210c20686430c53fe7864ce6ceb19aa"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9a665d62266e75f0519f3a663784c458885b5c63",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a665d62266e75f0519f3a663784c458885b5c63",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9a665d62266e75f0519f3a663784c458885b5c63",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a665d62266e75f0519f3a663784c458885b5c63/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "227031b2bf03e7735601845d6c420995740c8fca",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/227031b2bf03e7735601845d6c420995740c8fca",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/227031b2bf03e7735601845d6c420995740c8fca"
    }
  ],
  "stats": {
    "total": 132,
    "additions": 127,
    "deletions": 5
  },
  "files": [
    {
      "sha": "f36e28ed7c27d41805494ccdd838f41ac170d550",
      "filename": "ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ChangeLog?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -1,3 +1,8 @@\n+2020-03-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* Makefile.in: Rebuild.\n+\t* Makefile.def (gdbsupport): Depend on intl.\n+\n 2020-02-17  Tom Tromey  <tom@tromey.com>\n \n \t* configure: Rebuild."
    },
    {
      "sha": "7a27220d77a8cd6dd594de4fd957635eacbad91b",
      "filename": "Makefile.def",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/Makefile.def",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/Makefile.def",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/Makefile.def?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -423,8 +423,10 @@ dependencies = { module=all-libgui; on=all-itcl; };\n \n dependencies = { module=configure-gdbsupport; on=configure-bfd; };\n dependencies = { module=configure-gdbsupport; on=configure-gnulib; };\n+dependencies = { module=configure-gdbsupport; on=configure-intl; };\n dependencies = { module=all-gdbsupport; on=all-bfd; };\n dependencies = { module=all-gdbsupport; on=all-gnulib; };\n+dependencies = { module=all-gdbsupport; on=all-intl; };\n \n // Host modules specific to binutils.\n dependencies = { module=configure-bfd; on=configure-libiberty; hard=true; };"
    },
    {
      "sha": "e09bb1d311ffed441bd64fe0309dfed479475c78",
      "filename": "Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/Makefile.in?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -52455,7 +52455,9 @@ all-gdb: maybe-all-libdecnumber\n all-gdb: maybe-all-libctf\n all-gdbserver: maybe-all-libiberty\n configure-gdbsupport: maybe-configure-bfd\n+configure-gdbsupport: maybe-configure-intl\n all-gdbsupport: maybe-all-bfd\n+all-gdbsupport: maybe-all-intl\n configure-gprof: maybe-configure-intl\n all-gprof: maybe-all-libiberty\n all-gprof: maybe-all-bfd"
    },
    {
      "sha": "b516cb73f38650b1794520c608b0ef3b85384d20",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -1,3 +1,13 @@\n+2020-03-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* config.in, configure: Rebuild.\n+\t* configure.ac: Call ZW_GNU_GETTEXT_SISTER_DIR.\n+\t* acinclude.m4: Include gettext-sister.m4.\n+\t* Makefile.in (top_builddir, INTL, INTL_DEPS, INTL_CFLAGS): New\n+\tvariables.\n+\t(INCLUDE_CFLAGS): Add INTL_CFLAGS.\n+\t(gdbserver$(EXEEXT), gdbreplay$(EXEEXT)): Use INTL_DEPS, INTL.\n+\n 2020-03-12  Simon Marchi  <simon.marchi@efficios.com>\n \n \t* acinclude.m4: Update path to selftest.m4."
    },
    {
      "sha": "d6b79385e15732c962e09fdebab28b1e0782961e",
      "filename": "gdbserver/Makefile.in",
      "status": "modified",
      "additions": 15,
      "deletions": 5,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/Makefile.in?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -75,6 +75,8 @@ abs_top_srcdir = @abs_top_srcdir@\n abs_srcdir = @abs_srcdir@\n VPATH = @srcdir@\n \n+top_builddir = .\n+\n include $(srcdir)/../gdb/silent-rules.mk\n \n # Note that these are overridden by GNU make-specific code below if\n@@ -109,6 +111,11 @@ GNULIB_BUILDDIR = ../gnulib\n LIBGNU = $(GNULIB_BUILDDIR)/import/libgnu.a\n INCGNU = -I$(srcdir)/../gnulib/import -I$(GNULIB_BUILDDIR)/import\n \n+# Where is the INTL library?  Typically in ../intl.\n+INTL = @LIBINTL@\n+INTL_DEPS = @LIBINTL_DEP@\n+INTL_CFLAGS = @INCINTL@\n+\n INCSUPPORT = -I$(srcdir)/.. -I..\n \n # All the includes used for CFLAGS and for lint.\n@@ -122,7 +129,8 @@ INCSUPPORT = -I$(srcdir)/.. -I..\n #\n INCLUDE_CFLAGS = -I. -I${srcdir} \\\n \t-I$(srcdir)/../gdb/regformats -I$(srcdir)/.. -I$(INCLUDE_DIR) \\\n-\t-I$(srcdir)/../gdb $(INCGNU) $(INCSUPPORT)\n+\t-I$(srcdir)/../gdb $(INCGNU) $(INCSUPPORT) \\\n+\t$(INTL_CFLAGS)\n \n # M{H,T}_CFLAGS, if defined, has host- and target-dependent CFLAGS\n # from the config/ directory.\n@@ -403,17 +411,19 @@ html:\n install-html:\n clean-info:\n \n-gdbserver$(EXEEXT): $(sort $(OBS)) ${CDEPS} $(LIBGNU) $(LIBIBERTY)\n+gdbserver$(EXEEXT): $(sort $(OBS)) ${CDEPS} $(LIBGNU) $(LIBIBERTY) \\\n+\t\t$(INTL_DEPS)\n \t$(SILENCE) rm -f gdbserver$(EXEEXT)\n \t$(ECHO_CXXLD) $(CC_LD) $(INTERNAL_CFLAGS) $(INTERNAL_LDFLAGS) \\\n \t\t-o gdbserver$(EXEEXT) $(OBS) $(LIBGNU) $(LIBIBERTY) \\\n-\t\t$(GDBSERVER_LIBS) $(XM_CLIBS)\n+\t\t$(INTL) $(GDBSERVER_LIBS) $(XM_CLIBS)\n \n-gdbreplay$(EXEEXT): $(sort $(GDBREPLAY_OBS)) $(LIBGNU) $(LIBIBERTY)\n+gdbreplay$(EXEEXT): $(sort $(GDBREPLAY_OBS)) $(LIBGNU) $(LIBIBERTY) \\\n+\t\t$(INTL_DEPS)\n \t$(SILENCE) rm -f gdbreplay$(EXEEXT)\n \t$(ECHO_CXXLD) $(CC_LD) $(INTERNAL_CFLAGS) $(INTERNAL_LDFLAGS) \\\n \t\t-o gdbreplay$(EXEEXT) $(GDBREPLAY_OBS) $(XM_CLIBS) $(LIBGNU) \\\n-\t\t$(LIBIBERTY)\n+\t\t$(LIBIBERTY) $(INTL)\n \n IPA_OBJS = \\\n \talloc-ipa.o \\"
    },
    {
      "sha": "a49be8dff81e1ffe17f979692d9a6251874586c9",
      "filename": "gdbserver/acinclude.m4",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/acinclude.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/acinclude.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/acinclude.m4?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -36,6 +36,9 @@ m4_include(../gdbsupport/selftest.m4)\n \n m4_include([../config/ax_pthread.m4])\n \n+dnl For ZW_GNU_GETTEXT_SISTER_DIR.\n+m4_include(../config/gettext-sister.m4)\n+\n dnl Check for existence of a type $1 in libthread_db.h\n dnl Based on BFD_HAVE_SYS_PROCFS_TYPE in bfd/bfd.m4.\n "
    },
    {
      "sha": "e62795072f208fecf302f7f96bed977f5d07a1fc",
      "filename": "gdbserver/config.in",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/config.in?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -11,6 +11,10 @@\n /* Define to 1 if using `alloca.c'. */\n #undef C_ALLOCA\n \n+/* Define to 1 if translation of program messages to the user's native\n+   language is requested. */\n+#undef ENABLE_NLS\n+\n /* Define if self-testing features should be enabled */\n #undef GDB_SELF_TEST\n "
    },
    {
      "sha": "3f30a2bc6f1b81e02bca087901f6f7bd3505eff5",
      "filename": "gdbserver/configure",
      "status": "modified",
      "additions": 83,
      "deletions": 0,
      "changes": 83,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/configure?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -639,6 +639,18 @@ ustinc\n ustlibs\n CCDEPMODE\n CONFIG_SRC_SUBDIR\n+CATOBJEXT\n+GENCAT\n+INSTOBJEXT\n+DATADIRNAME\n+CATALOGS\n+POSUB\n+GMSGFMT\n+XGETTEXT\n+INCINTL\n+LIBINTL_DEP\n+LIBINTL\n+USE_NLS\n DEPDIR\n am__leading_dot\n host_noncanonical\n@@ -8960,6 +8972,77 @@ ac_config_commands=\"$ac_config_commands depdir\"\n \n \n \n+# If we haven't got the data from the intl directory,\n+# assume NLS is disabled.\n+USE_NLS=no\n+LIBINTL=\n+LIBINTL_DEP=\n+INCINTL=\n+XGETTEXT=\n+GMSGFMT=\n+POSUB=\n+\n+if test -f  ../intl/config.intl; then\n+  .  ../intl/config.intl\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether NLS is requested\" >&5\n+$as_echo_n \"checking whether NLS is requested... \" >&6; }\n+if test x\"$USE_NLS\" != xyes; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n+$as_echo \"yes\" >&6; }\n+\n+$as_echo \"#define ENABLE_NLS 1\" >>confdefs.h\n+\n+\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for catalogs to be installed\" >&5\n+$as_echo_n \"checking for catalogs to be installed... \" >&6; }\n+  # Look for .po and .gmo files in the source directory.\n+  CATALOGS=\n+  XLINGUAS=\n+  for cat in $srcdir/po/*.gmo $srcdir/po/*.po; do\n+    # If there aren't any .gmo files the shell will give us the\n+    # literal string \"../path/to/srcdir/po/*.gmo\" which has to be\n+    # weeded out.\n+    case \"$cat\" in *\\**)\n+      continue;;\n+    esac\n+    # The quadruple backslash is collapsed to a double backslash\n+    # by the backticks, then collapsed again by the double quotes,\n+    # leaving us with one backslash in the sed expression (right\n+    # before the dot that mustn't act as a wildcard).\n+    cat=`echo $cat | sed -e \"s!$srcdir/po/!!\" -e \"s!\\\\\\\\.po!.gmo!\"`\n+    lang=`echo $cat | sed -e \"s!\\\\\\\\.gmo!!\"`\n+    # The user is allowed to set LINGUAS to a list of languages to\n+    # install catalogs for.  If it's empty that means \"all of them.\"\n+    if test \"x$LINGUAS\" = x; then\n+      CATALOGS=\"$CATALOGS $cat\"\n+      XLINGUAS=\"$XLINGUAS $lang\"\n+    else\n+      case \"$LINGUAS\" in *$lang*)\n+        CATALOGS=\"$CATALOGS $cat\"\n+        XLINGUAS=\"$XLINGUAS $lang\"\n+        ;;\n+      esac\n+    fi\n+  done\n+  LINGUAS=\"$XLINGUAS\"\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $LINGUAS\" >&5\n+$as_echo \"$LINGUAS\" >&6; }\n+\n+\n+    DATADIRNAME=share\n+\n+  INSTOBJEXT=.mo\n+\n+  GENCAT=gencat\n+\n+  CATOBJEXT=.gmo\n+\n+fi\n+\n # Create sub-directories for objects and dependencies.\n CONFIG_SRC_SUBDIR=\"arch gdbsupport nat target\"\n "
    },
    {
      "sha": "d92005cf0fb07f3f6b265b6244c475e0540cd28d",
      "filename": "gdbserver/configure.ac",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a665d62266e75f0519f3a663784c458885b5c63/gdbserver/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/configure.ac?ref=9a665d62266e75f0519f3a663784c458885b5c63",
      "patch": "@@ -55,6 +55,9 @@ ACX_NONCANONICAL_HOST\n # Dependency checking.\n ZW_CREATE_DEPDIR\n \n+dnl Set up for gettext.\n+ZW_GNU_GETTEXT_SISTER_DIR\n+\n # Create sub-directories for objects and dependencies.\n CONFIG_SRC_SUBDIR=\"arch gdbsupport nat target\"\n AC_SUBST(CONFIG_SRC_SUBDIR)"
    }
  ]
}