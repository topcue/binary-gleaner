{
  "sha": "c919d6be44913ed52d91c203e87e529ee17de805",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzkxOWQ2YmU0NDkxM2VkNTJkOTFjMjAzZTg3ZTUyOWVlMTdkZTgwNQ==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-07-05T15:16:38Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-07-05T15:21:42Z"
    },
    "message": "Restore the libiberty component of commit 50ad1254d5030d0804cbf89c758359ae202e8d55.\n\nThis commit has not yet been applied to the master sources in the gcc repository.\nIt was submitted here: https://gcc.gnu.org/pipermail/gcc-patches/2021-July/574405.html\nThe commit allows options to be set for the AR and RANLIB programs used when building libiberty, which in turn allows building with LTO enabled.",
    "tree": {
      "sha": "b49acbce9e226a7b751b93adf9b9519ac9185f06",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b49acbce9e226a7b751b93adf9b9519ac9185f06"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c919d6be44913ed52d91c203e87e529ee17de805",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c919d6be44913ed52d91c203e87e529ee17de805",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c919d6be44913ed52d91c203e87e529ee17de805",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c919d6be44913ed52d91c203e87e529ee17de805/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6e0dfbf420ae6ac321074c0051dcfd6a5a4d0f7c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6e0dfbf420ae6ac321074c0051dcfd6a5a4d0f7c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6e0dfbf420ae6ac321074c0051dcfd6a5a4d0f7c"
    }
  ],
  "stats": {
    "total": 158,
    "additions": 156,
    "deletions": 2
  },
  "files": [
    {
      "sha": "d19e14a2aca5ba76fa99511fb48a811ccf17f2de",
      "filename": "libiberty/Makefile.in",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libiberty/Makefile.in?ref=c919d6be44913ed52d91c203e87e529ee17de805",
      "patch": "@@ -49,13 +49,13 @@ mkinstalldirs = $(SHELL) $(libiberty_topdir)/mkinstalldirs\n # Some compilers can't handle cc -c blah.c -o foo/blah.o.\n OUTPUT_OPTION = @OUTPUT_OPTION@\n \n-AR = @AR@\n+AR = @AR@ @AR_PLUGIN_OPTION@\n AR_FLAGS = rc\n \n CC = @CC@\n CFLAGS = @CFLAGS@\n CPPFLAGS = @CPPFLAGS@\n-RANLIB = @RANLIB@\n+RANLIB = @RANLIB@ @RANLIB_PLUGIN_OPTION@\n MAKEINFO = @MAKEINFO@\n PERL = @PERL@\n \n@@ -487,6 +487,7 @@ aclocal_deps = \\\n \t$(srcdir)/../config/acx.m4 \\\n \t$(srcdir)/../config/cet.m4 \\\n \t$(srcdir)/../config/enable.m4 \\\n+\t$(srcdir)/../config/gcc-plugin.m4 \\\n \t$(srcdir)/../config/no-executables.m4 \\\n \t$(srcdir)/../config/override.m4 \\\n \t$(srcdir)/../config/picflag.m4 \\"
    },
    {
      "sha": "0757688d52a4c8c620f4cd79e45608f61122a01d",
      "filename": "libiberty/aclocal.m4",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libiberty/aclocal.m4?ref=c919d6be44913ed52d91c203e87e529ee17de805",
      "patch": "@@ -15,6 +15,7 @@ m4_ifndef([AC_CONFIG_MACRO_DIRS], [m4_defun([_AM_CONFIG_MACRO_DIRS], [])m4_defun\n m4_include([../config/acx.m4])\n m4_include([../config/cet.m4])\n m4_include([../config/enable.m4])\n+m4_include([../config/gcc-plugin.m4])\n m4_include([../config/no-executables.m4])\n m4_include([../config/picflag.m4])\n m4_include([../config/warnings.m4])"
    },
    {
      "sha": "9fb28924093680ca74eac280d95cf67b36f9f07b",
      "filename": "libiberty/configure",
      "status": "modified",
      "additions": 140,
      "deletions": 0,
      "changes": 140,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libiberty/configure?ref=c919d6be44913ed52d91c203e87e529ee17de805",
      "patch": "@@ -645,6 +645,8 @@ CPPFLAGS\n LDFLAGS\n CFLAGS\n CC\n+RANLIB_PLUGIN_OPTION\n+AR_PLUGIN_OPTION\n RANLIB\n AR\n host_os\n@@ -2929,6 +2931,144 @@ else\n fi\n \n \n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for -plugin option\" >&5\n+$as_echo_n \"checking for -plugin option... \" >&6; }\n+\n+plugin_names=\"liblto_plugin.so liblto_plugin-0.dll cyglto_plugin-0.dll\"\n+plugin_option=\n+for plugin in $plugin_names; do\n+  plugin_so=`${CC} ${CFLAGS} --print-prog-name $plugin`\n+  if test x$plugin_so = x$plugin; then\n+    plugin_so=`${CC} ${CFLAGS} --print-file-name $plugin`\n+  fi\n+  if test x$plugin_so != x$plugin; then\n+    plugin_option=\"--plugin $plugin_so\"\n+    break\n+  fi\n+done\n+if test -n \"$ac_tool_prefix\"; then\n+  # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n+set dummy ${ac_tool_prefix}ar; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_AR+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -n \"$AR\"; then\n+  ac_cv_prog_AR=\"$AR\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_AR=\"${ac_tool_prefix}ar\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+  done\n+IFS=$as_save_IFS\n+\n+fi\n+fi\n+AR=$ac_cv_prog_AR\n+if test -n \"$AR\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $AR\" >&5\n+$as_echo \"$AR\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n+\n+\n+fi\n+if test -z \"$ac_cv_prog_AR\"; then\n+  ac_ct_AR=$AR\n+  # Extract the first word of \"ar\", so it can be a program name with args.\n+set dummy ar; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_ac_ct_AR+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -n \"$ac_ct_AR\"; then\n+  ac_cv_prog_ac_ct_AR=\"$ac_ct_AR\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_AR=\"ar\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+  done\n+IFS=$as_save_IFS\n+\n+fi\n+fi\n+ac_ct_AR=$ac_cv_prog_ac_ct_AR\n+if test -n \"$ac_ct_AR\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR\" >&5\n+$as_echo \"$ac_ct_AR\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n+\n+  if test \"x$ac_ct_AR\" = x; then\n+    AR=\"\"\n+  else\n+    case $cross_compiling:$ac_tool_warned in\n+yes:)\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n+$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n+ac_tool_warned=yes ;;\n+esac\n+    AR=$ac_ct_AR\n+  fi\n+else\n+  AR=\"$ac_cv_prog_AR\"\n+fi\n+\n+if test \"${AR}\" = \"\" ; then\n+  as_fn_error $? \"Required archive tool 'ar' not found on PATH.\" \"$LINENO\" 5\n+fi\n+touch conftest.c\n+${AR} $plugin_option rc conftest.a conftest.c\n+if test \"$?\" != 0; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: Failed: $AR $plugin_option rc\" >&5\n+$as_echo \"$as_me: WARNING: Failed: $AR $plugin_option rc\" >&2;}\n+  plugin_option=\n+fi\n+rm -f conftest.*\n+if test -n \"$plugin_option\"; then\n+  PLUGIN_OPTION=\"$plugin_option\"\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $plugin_option\" >&5\n+$as_echo \"$plugin_option\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n+\n+if test -n \"$PLUGIN_OPTION\"; then\n+  if $AR --help 2>&1 | grep -q \"\\--plugin\"; then\n+    AR_PLUGIN_OPTION=\"$PLUGIN_OPTION\"\n+\n+  fi\n+  if $RANLIB --help 2>&1 | grep -q \"\\--plugin\"; then\n+    RANLIB_PLUGIN_OPTION=\"$PLUGIN_OPTION\"\n+\n+  fi\n+fi\n+\n # Add --enable-multilib to configure.\n # Default to --enable-multilib\n # Check whether --enable-multilib was given."
    },
    {
      "sha": "9b451a4c61a0fc397ebe29a53e386a1cd855ec39",
      "filename": "libiberty/configure.ac",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c919d6be44913ed52d91c203e87e529ee17de805/libiberty/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libiberty/configure.ac?ref=c919d6be44913ed52d91c203e87e529ee17de805",
      "patch": "@@ -108,6 +108,18 @@ dnl to call AC_CHECK_PROG.\n AC_CHECK_TOOL(AR, ar)\n AC_CHECK_TOOL(RANLIB, ranlib, :)\n \n+GCC_PLUGIN_OPTION(PLUGIN_OPTION)\n+if test -n \"$PLUGIN_OPTION\"; then\n+  if $AR --help 2>&1 | grep -q \"\\--plugin\"; then\n+    AR_PLUGIN_OPTION=\"$PLUGIN_OPTION\"\n+    AC_SUBST(AR_PLUGIN_OPTION)\n+  fi\n+  if $RANLIB --help 2>&1 | grep -q \"\\--plugin\"; then\n+    RANLIB_PLUGIN_OPTION=\"$PLUGIN_OPTION\"\n+    AC_SUBST(RANLIB_PLUGIN_OPTION)\n+  fi\n+fi\n+\n dnl When switching to automake, replace the following with AM_ENABLE_MULTILIB.\n # Add --enable-multilib to configure.\n # Default to --enable-multilib"
    }
  ]
}