{
  "sha": "c2ecccb33c307faa21f4d2f47348e7346b032d94",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzJlY2NjYjMzYzMwN2ZhYTIxZjRkMmY0NzM0OGU3MzQ2YjAzMmQ5NA==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-07-02T13:30:00Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-07-02T15:46:48Z"
    },
    "message": "x86: Add SwapSources\n\nWe check register-only source operand to decide if two source operands of\nVEX encoded instructions should be swapped.  But source operands in AMX\ninstructions with two source operands swapped are all register-only\noperand.  Add SwapSources to indicate two source operands should be\nswapped.\n\ngas/\n\n\t* config/tc-i386.c (build_modrm_byte): Check vexswapsources to\n\tswap two source operands.\n\nopcodes/\n\n\t* i386-gen.c (opcode_modifiers): Add VexSwapSources.\n\t* i386-opc.h (VexSwapSources): New.\n\t(i386_opcode_modifier): Add vexswapsources.\n\t* i386-opc.tbl: Add VexSwapSources to BMI2 and BMI instructions\n\twith two source operands swapped.\n\t* i386-tbl.h: Regenerated.",
    "tree": {
      "sha": "bbf59bb652aa85aa0f254538e6054db5117c51d0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bbf59bb652aa85aa0f254538e6054db5117c51d0"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c2ecccb33c307faa21f4d2f47348e7346b032d94",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c2ecccb33c307faa21f4d2f47348e7346b032d94",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c2ecccb33c307faa21f4d2f47348e7346b032d94",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c2ecccb33c307faa21f4d2f47348e7346b032d94/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f436f38e7dff19b0d80bf62a58edd98697242108",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f436f38e7dff19b0d80bf62a58edd98697242108",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f436f38e7dff19b0d80bf62a58edd98697242108"
    }
  ],
  "stats": {
    "total": 7999,
    "additions": 4008,
    "deletions": 3991
  },
  "files": [
    {
      "sha": "c63f5257d149081249ee37cae7b389f34d31fdbe",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -1,3 +1,8 @@\n+2020-07-02  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* config/tc-i386.c (build_modrm_byte): Check vexswapsources to\n+\tswap two source operands.\n+\n 2020-07-02  Nick Clifton  <nickc@redhat.com>\n \n \t* testsuite/gas/all/fill-1.d: Skip for MeP targets."
    },
    {
      "sha": "2e0eb24753595f516e120810fd559af4b3a9f692",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 2,
      "deletions": 4,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -7884,10 +7884,8 @@ build_modrm_byte (void)\n \t      i386_operand_type op;\n \t      unsigned int vvvv;\n \n-\t      /* Check register-only source operand when two source\n-\t\t operands are swapped.  */\n-\t      if (!i.tm.operand_types[source].bitfield.baseindex\n-\t\t  && i.tm.operand_types[dest].bitfield.baseindex)\n+\t      /* Swap two source operands if needed.  */\n+\t      if (i.tm.opcode_modifier.swapsources)\n \t\t{\n \t\t  vvvv = source;\n \t\t  source = dest;"
    },
    {
      "sha": "c0a3db699c7175c45b408fd6d119677f3d20b810",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -1,3 +1,12 @@\n+2020-07-02  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* i386-gen.c (opcode_modifiers): Add VexSwapSources.\n+\t* i386-opc.h (VexSwapSources): New.\n+\t(i386_opcode_modifier): Add vexswapsources.\n+\t* i386-opc.tbl: Add VexSwapSources to BMI2 and BMI instructions\n+\twith two source operands swapped.\n+\t* i386-tbl.h: Regenerated.\n+\n 2020-06-30  Nelson Chu  <nelson.chu@sifive.com>\n \n \t* riscv-dis.c (print_insn_args, case 'E'): Updated.  Let the"
    },
    {
      "sha": "7230f873445a710fe525cf83a94ab70e2c0812a7",
      "filename": "opcodes/i386-gen.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-gen.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-gen.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-gen.c?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -676,6 +676,7 @@ static bitfield opcode_modifiers[] =\n   BITFIELD (Disp8MemShift),\n   BITFIELD (NoDefMask),\n   BITFIELD (ImplicitQuadGroup),\n+  BITFIELD (SwapSources),\n   BITFIELD (Optimize),\n   BITFIELD (ATTMnemonic),\n   BITFIELD (ATTSyntax),"
    },
    {
      "sha": "c65febbe81efe064e9ac1f3f687f6c4903d89e1b",
      "filename": "opcodes/i386-opc.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-opc.h?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -635,6 +635,9 @@ enum\n    */\n   ImplicitQuadGroup,\n \n+  /* Two source operands are swapped.  */\n+  SwapSources,\n+\n   /* Support encoding optimization.  */\n   Optimize,\n \n@@ -710,6 +713,7 @@ typedef struct i386_opcode_modifier\n   unsigned int disp8memshift:3;\n   unsigned int nodefmask:1;\n   unsigned int implicitquadgroup:1;\n+  unsigned int swapsources:1;\n   unsigned int optimize:1;\n   unsigned int attmnemonic:1;\n   unsigned int attsyntax:1;"
    },
    {
      "sha": "cd6833c5ae9a6a509f81f9da95c6cc94f4e3debf",
      "filename": "opcodes/i386-opc.tbl",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-opc.tbl",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-opc.tbl",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-opc.tbl?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94",
      "patch": "@@ -2320,14 +2320,14 @@ xend, 0, 0xf01d5, None, 3, CpuRTM, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_ld\n xtest, 0, 0xf01d6, None, 3, CpuHLE|CpuRTM, No_bSuf|No_wSuf|No_lSuf|No_sSuf|No_qSuf|No_ldSuf, { 0 }\n \n // BMI2 instructions.\n-bzhi, 3, 0xf5, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n+bzhi, 3, 0xf5, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|SwapSources|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n mulx, 3, 0xf2f6, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64, Reg32|Reg64 }\n pdep, 3, 0xf2f5, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64, Reg32|Reg64 }\n pext, 3, 0xf3f5, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64, Reg32|Reg64 }\n rorx, 3, 0xf2f0, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=2|VexVVVV=0|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Imm8, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n-sarx, 3, 0xf3f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n-shlx, 3, 0x66f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n-shrx, 3, 0xf2f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n+sarx, 3, 0xf3f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|SwapSources|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n+shlx, 3, 0x66f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|SwapSources|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n+shrx, 3, 0xf2f7, None, 1, CpuBMI2, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|SwapSources|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n \n // FMA4 instructions\n \n@@ -2437,7 +2437,7 @@ lwpins, 3, 0x12, 0x0, 1, CpuLWP, Modrm|VexOpcode=5|IgnoreSize|No_bSuf|No_wSuf|No\n // BMI instructions\n \n andn, 3, 0xf2, None, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64, Reg32|Reg64 }\n-bextr, 3, 0xf7, None, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n+bextr, 3, 0xf7, None, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=1|SwapSources|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64, Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n blsi, 2, 0xf3, 0x3, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=2|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n blsmsk, 2, 0xf3, 0x2, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=2|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }\n blsr, 2, 0xf3, 0x1, 1, CpuBMI, Modrm|CheckRegSize|Vex128|VexOpcode=1|VexVVVV=2|No_bSuf|No_wSuf|No_sSuf|No_ldSuf, { Reg32|Reg64|Dword|Qword|Unspecified|BaseIndex, Reg32|Reg64 }"
    },
    {
      "sha": "7e77896047dc89d0bbd9b36fe44496df7796aa6b",
      "filename": "opcodes/i386-tbl.h",
      "status": "modified",
      "additions": 3982,
      "deletions": 3982,
      "changes": 7964,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-tbl.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c2ecccb33c307faa21f4d2f47348e7346b032d94/opcodes/i386-tbl.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-tbl.h?ref=c2ecccb33c307faa21f4d2f47348e7346b032d94"
    }
  ]
}