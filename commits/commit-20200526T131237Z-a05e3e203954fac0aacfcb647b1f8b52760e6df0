{
  "sha": "a05e3e203954fac0aacfcb647b1f8b52760e6df0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTA1ZTNlMjAzOTU0ZmFjMGFhY2ZjYjY0N2IxZjhiNTI3NjBlNmRmMA==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-26T13:09:54Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-05-26T13:12:37Z"
    },
    "message": "tc-score.c: Replace overlapping sprintf with memmove\n\nFix GCC 10 warning:\n\ngas/config/tc-score.c:4575:6: error: \u2018sprintf\u2019 argument 3 may overlap destination object \u2018keep_data\u2019 [-Werror=restrict]\n 4575 |      sprintf (append_str, \"bne %s\", keep_data);\n      |      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n\tPR gas/26044\n\t* onfig/tc-score.c (s3_do_macro_bcmp): Replace overlapping\n\tsprintf with memmove.",
    "tree": {
      "sha": "253ae37f43ad7b4b708955e675a7151412d11c2a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/253ae37f43ad7b4b708955e675a7151412d11c2a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a05e3e203954fac0aacfcb647b1f8b52760e6df0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a05e3e203954fac0aacfcb647b1f8b52760e6df0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a05e3e203954fac0aacfcb647b1f8b52760e6df0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a05e3e203954fac0aacfcb647b1f8b52760e6df0/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "40d22035a7fc239ac1e944b75a2e3ee9029d1b76",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/40d22035a7fc239ac1e944b75a2e3ee9029d1b76",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/40d22035a7fc239ac1e944b75a2e3ee9029d1b76"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 18,
    "deletions": 8
  },
  "files": [
    {
      "sha": "291a357b157994ba8f3347b6fff8585b413d0fb4",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05e3e203954fac0aacfcb647b1f8b52760e6df0/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05e3e203954fac0aacfcb647b1f8b52760e6df0/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a05e3e203954fac0aacfcb647b1f8b52760e6df0",
      "patch": "@@ -1,3 +1,9 @@\n+2020-05-26  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR gas/26044\n+\t* onfig/tc-score.c (s3_do_macro_bcmp): Replace overlapping\n+\tsprintf with memmove.\n+\n 2020-05-25  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/tc-mcore.c (md_convert_frag): Replace fragP->fr_literal"
    },
    {
      "sha": "72c5de8926c24d7575214cde76ee86fbeb557c7b",
      "filename": "gas/config/tc-score.c",
      "status": "modified",
      "additions": 12,
      "deletions": 8,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05e3e203954fac0aacfcb647b1f8b52760e6df0/gas/config/tc-score.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05e3e203954fac0aacfcb647b1f8b52760e6df0/gas/config/tc-score.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-score.c?ref=a05e3e203954fac0aacfcb647b1f8b52760e6df0",
      "patch": "@@ -4537,9 +4537,10 @@ s3_do_macro_bcmp (char *str)\n \t      if (s3_append_insn (append_str, TRUE) == (int) s3_FAIL)\n \t\tgoto out;\n \t      if ((inst_main.instruction & 0x3e00007e) == 0x0000004c)\n-\t\tsprintf (append_str, \"beq %s\", keep_data);\n+\t\tmemcpy (append_str, \"beq \", 4);\n \t      else\n-\t\tsprintf (append_str, \"bne %s\", keep_data);\n+\t\tmemcpy (append_str, \"bne \", 4);\n+\t      memmove (append_str + 4, keep_data, strlen (keep_data) + 1);\n \t      if (s3_append_insn (append_str, TRUE) == (int) s3_FAIL)\n \t\tgoto out;\n \t    }\n@@ -4570,9 +4571,10 @@ s3_do_macro_bcmp (char *str)\n \t  memcpy (&inst_expand[0], &s3_inst, sizeof (struct s3_score_it));\n \n \t  if ((inst_main.instruction & 0x3e00007e) == 0x0000004c)\n-\t    sprintf (append_str, \"beq %s\", keep_data);\n+\t    memcpy (append_str, \"beq \", 4);\n \t  else\n-\t    sprintf (append_str, \"bne %s\", keep_data);\n+\t    memcpy (append_str, \"bne \", 4);\n+\t  memmove (append_str + 4, keep_data, strlen (keep_data) + 1);\n \t  if (s3_append_insn (append_str, FALSE) == (int) s3_FAIL)\n \t    goto out;\n \t  memcpy (&inst_expand[1], &s3_inst, sizeof (struct s3_score_it));\n@@ -4685,9 +4687,10 @@ s3_do_macro_bcmpz (char *str)\n \t      if (s3_append_insn (append_str, TRUE) == (int) s3_FAIL)\n \t\tgoto out;\n \t      if ((inst_main.instruction & 0x3e00007e) == 0x0000004c)\n-\t\tsprintf (append_str, \"beq %s\", keep_data);\n+\t\tmemcpy (append_str, \"beq \", 4);\n \t      else\n-\t\tsprintf (append_str, \"bne %s\", keep_data);\n+\t\tmemcpy (append_str, \"bne \", 4);\n+\t      memmove (append_str + 4, keep_data, strlen (keep_data) + 1);\n \t      if (s3_append_insn (append_str, TRUE) == (int) s3_FAIL)\n \t\tgoto out;\n             }\n@@ -4717,9 +4720,10 @@ s3_do_macro_bcmpz (char *str)\n \t    goto out;\n \t  memcpy (&inst_expand[0], &s3_inst, sizeof (struct s3_score_it));\n \t  if ((inst_main.instruction & 0x3e00007e) == 0x0000004c)\n-\t    sprintf (append_str, \"beq %s\", keep_data);\n+\t    memcpy (append_str, \"beq \", 4);\n \t  else\n-\t    sprintf (append_str, \"bne %s\", keep_data);\n+\t    memcpy (append_str, \"bne \", 4);\n+\t  memmove (append_str + 4, keep_data, strlen (keep_data) + 1);\n \t  if (s3_append_insn (append_str, FALSE) == (int) s3_FAIL)\n \t    goto out;\n \t  memcpy (&inst_expand[1], &s3_inst, sizeof (struct s3_score_it));"
    }
  ]
}