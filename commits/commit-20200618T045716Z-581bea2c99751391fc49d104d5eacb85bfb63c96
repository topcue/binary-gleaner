{
  "sha": "581bea2c99751391fc49d104d5eacb85bfb63c96",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTgxYmVhMmM5OTc1MTM5MWZjNDlkMTA0ZDVlYWNiODViZmI2M2M5Ng==",
  "commit": {
    "author": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2020-06-18T04:57:16Z"
    },
    "committer": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2020-06-18T04:57:16Z"
    },
    "message": "Fix TUI support checks in gdb.tui tests.\n\n2020-06-17 Sandra Loosemore <sandra@codesourcery.com>\n\n\tgdb/testsuite/\n\t* gdb.tui/basic.exp: Skip test when TUI is unsupported, don't\n\tjust say UNSUPPORTED.\n\t* gdb.tui/corefile-run.exp: Likewise.\n\t* gdb.tui/empty.exp: Likewise.\n\t* gdb.tui/list-before.exp: Likewise.\n\t* gdb.tui/list.exp: Likewise.\n\t* gdb.tui/main.exp: Likewise.\n\t* gdb.tui/regs.exp: Likewise.\n\t* gdb.tui/resize.exp: Likewise.\n\t* gdb.tui/tui-layout-asm-short-prog.exp: Likewise.\n\t* gdb.tui/tui-layout-asm.exp: Likewise.\n\t* gdb.tui/tui-missing-src.exp: Likewise.\n\t* gdb.tui/winheight.exp: Likewise.\n\t* gdb.tui/new-layout.exp: Likewise.  Also move check earlier.",
    "tree": {
      "sha": "e1861824d9ba30175e8ac71240431ff14775d51a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e1861824d9ba30175e8ac71240431ff14775d51a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/581bea2c99751391fc49d104d5eacb85bfb63c96",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/581bea2c99751391fc49d104d5eacb85bfb63c96",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/581bea2c99751391fc49d104d5eacb85bfb63c96",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/581bea2c99751391fc49d104d5eacb85bfb63c96/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "612f258a491539f36c618030cc558e83e7d58b4e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/612f258a491539f36c618030cc558e83e7d58b4e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/612f258a491539f36c618030cc558e83e7d58b4e"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 39,
    "deletions": 0
  },
  "files": [
    {
      "sha": "0e1dc5aaf186cf9a0ace1630a5a42cb6ccb7f8fc",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -1,3 +1,22 @@\n+2020-06-17 Sandra Loosemore <sandra@codesourcery.com>\n+\n+\tFix TUI support checks in gdb.tui tests.\n+\n+\t* gdb.tui/basic.exp: Skip test when TUI is unsupported, don't\n+\tjust say UNSUPPORTED.\n+\t* gdb.tui/corefile-run.exp: Likewise.\n+\t* gdb.tui/empty.exp: Likewise.\n+\t* gdb.tui/list-before.exp: Likewise.\n+\t* gdb.tui/list.exp: Likewise.\n+\t* gdb.tui/main.exp: Likewise.\n+\t* gdb.tui/regs.exp: Likewise.\n+\t* gdb.tui/resize.exp: Likewise.\n+\t* gdb.tui/tui-layout-asm-short-prog.exp: Likewise.\n+\t* gdb.tui/tui-layout-asm.exp: Likewise.\n+\t* gdb.tui/tui-missing-src.exp: Likewise.\n+\t* gdb.tui/winheight.exp: Likewise.\n+\t* gdb.tui/new-layout.exp: Likewise.  Also move check earlier.\n+\n 2020-06-17 Sandra Loosemore <sandra@codesourcery.com>\n \n \tFix TCL error in gdb.python/py-format-string.exp."
    },
    {
      "sha": "0296e542868d17fbeb858500d5375ccf5a1fd475",
      "filename": "gdb/testsuite/gdb.tui/basic.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/basic.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/basic.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/basic.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -26,6 +26,7 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile}] == -1} {\n Term::clean_restart 24 80 $testfile\n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n set text [Term::get_all_lines]"
    },
    {
      "sha": "94a599e897331cecb969f290c8a850d94b7f9c0c",
      "filename": "gdb/testsuite/gdb.tui/corefile-run.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/corefile-run.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/corefile-run.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/corefile-run.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -47,6 +47,7 @@ if { ![gdb_gcore_cmd \"$core\" \"save a corefile\"] } {\n Term::clean_restart 24 80 $testfile\n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n set text [Term::get_all_lines]"
    },
    {
      "sha": "50c8be42f5bd148056ba5b0d443f0a1f09ecbc41",
      "filename": "gdb/testsuite/gdb.tui/empty.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/empty.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/empty.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/empty.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -23,6 +23,7 @@ Term::clean_restart 24 80\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n # Each entry describes a layout.  It has these items:"
    },
    {
      "sha": "fce745db7e06f05860b3cd63080bf3c80452c04f",
      "filename": "gdb/testsuite/gdb.tui/list-before.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/list-before.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/list-before.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/list-before.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -29,6 +29,7 @@ gdb_test \"list main\"\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::check_contents \"initial source listing\" \"21 *return 0\""
    },
    {
      "sha": "77dbd69efd85850852d22c1196294104eeb4221f",
      "filename": "gdb/testsuite/gdb.tui/list.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/list.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/list.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/list.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -26,6 +26,7 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile}] == -1} {\n Term::clean_restart 24 80 $testfile\n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::check_contents \"initial source listing\" \"21 *return 0\""
    },
    {
      "sha": "38e2e5bc726a387bf3d1bba575d48033d8de936d",
      "filename": "gdb/testsuite/gdb.tui/main.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/main.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/main.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/main.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -31,6 +31,7 @@ gdb_test_no_output \"set interactive-mode off\"\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::command \"file [standard_output_file $testfile]\""
    },
    {
      "sha": "b4fca674e896a9d3710ebe1e6ba9bca645c9fabd",
      "filename": "gdb/testsuite/gdb.tui/new-layout.exp",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/new-layout.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/new-layout.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/new-layout.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -23,6 +23,13 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile}] == -1} {\n     return -1\n }\n \n+# Make sure TUI is supported before continuing.\n+Term::clean_restart 24 80 $testfile\n+if {![Term::enter_tui]} {\n+    unsupported \"TUI not supported\"\n+    return\n+}\n+\n Term::clean_restart 24 80 $testfile\n \n gdb_test \"tui new-layout\" \\\n@@ -59,6 +66,7 @@ gdb_test \"help layout h\" \\\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n set text [Term::get_all_lines]"
    },
    {
      "sha": "3d635236e81348f80e0f0112a7ad603691bc066c",
      "filename": "gdb/testsuite/gdb.tui/regs.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/regs.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/regs.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/regs.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -32,6 +32,7 @@ if {![runto_main]} {\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::check_contents \"source at startup\" \"\\\\|.*21 *return 0\""
    },
    {
      "sha": "bf32251c457251f321472878f4b3bb18b239024f",
      "filename": "gdb/testsuite/gdb.tui/resize.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/resize.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/resize.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/resize.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -32,6 +32,7 @@ if {![runto_main]} {\n \n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::check_contents \"source at startup\" \"\\\\|.*21 *return 0\""
    },
    {
      "sha": "1a7992502ad22791984280c721a0a13ee17d0ff0",
      "filename": "gdb/testsuite/gdb.tui/tui-layout-asm-short-prog.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-layout-asm-short-prog.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-layout-asm-short-prog.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/tui-layout-asm-short-prog.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -29,6 +29,7 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile} \\\n Term::clean_restart 24 80 $testfile\n if {![Term::prepare_for_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n # This puts us into TUI mode, and should display the ASM window."
    },
    {
      "sha": "96fb043321fab004aa97788d42847c81e5984d54",
      "filename": "gdb/testsuite/gdb.tui/tui-layout-asm.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-layout-asm.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-layout-asm.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/tui-layout-asm.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -27,6 +27,7 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile}] == -1} {\n Term::clean_restart 24 80 $testfile\n if {![Term::prepare_for_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n # This puts us into TUI mode, and should display the ASM window."
    },
    {
      "sha": "a8460c6514a2d979e86a3f0d8ac9a317d7514c7f",
      "filename": "gdb/testsuite/gdb.tui/tui-missing-src.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-missing-src.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/tui-missing-src.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/tui-missing-src.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -75,6 +75,7 @@ file delete $mainfile\n Term::clean_restart 24 80 $testfile\n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n # There must exist a source layout with the size 80x15 and\n # there should be nothing in it."
    },
    {
      "sha": "bbfb7de3760f98812716159e84d996b379235bb6",
      "filename": "gdb/testsuite/gdb.tui/winheight.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/winheight.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/581bea2c99751391fc49d104d5eacb85bfb63c96/gdb/testsuite/gdb.tui/winheight.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.tui/winheight.exp?ref=581bea2c99751391fc49d104d5eacb85bfb63c96",
      "patch": "@@ -26,6 +26,7 @@ if {[build_executable \"failed to prepare\" ${testfile} ${srcfile}] == -1} {\n Term::clean_restart 24 80 $testfile\n if {![Term::enter_tui]} {\n     unsupported \"TUI not supported\"\n+    return\n }\n \n Term::check_box \"source box\" 0 0 80 15"
    }
  ]
}