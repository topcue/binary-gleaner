{
  "sha": "c3e96aa78ff5cff513109a545304486176043fd7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzNlOTZhYTc4ZmY1Y2ZmNTEzMTA5YTU0NTMwNDQ4NjE3NjA0M2ZkNw==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-01-20T21:11:06Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-01-20T21:11:15Z"
    },
    "message": "gdb/testsuite: rename _cur_x/_cur_y to _cur_col/_cur_row in lib/tuiterm.exp\n\nI am having trouble remembering which of _cur_x/_cur_y is columns and\nwhich is rows, so renaming them helps.  We already have _rows and _cols\nto represent the terminal size, so I think that makes sense to name the\n\"_cur\" variables accordingly.\n\ngdb/testsuite/ChangeLog:\n\n\t* lib/tuiterm.exp: Rename _cur_x/_cur_y to _cur_col/_cur_row.\n\nChange-Id: I6abd3cdfdb295d8abde12dcd5f0ae09f18f07967",
    "tree": {
      "sha": "fba4a02c2af7eef31b5d0fa693842b43f475bf6f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fba4a02c2af7eef31b5d0fa693842b43f475bf6f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c3e96aa78ff5cff513109a545304486176043fd7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3e96aa78ff5cff513109a545304486176043fd7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c3e96aa78ff5cff513109a545304486176043fd7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3e96aa78ff5cff513109a545304486176043fd7/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6571ffc62014f3661aaafede48c7e5b026f99717",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6571ffc62014f3661aaafede48c7e5b026f99717",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6571ffc62014f3661aaafede48c7e5b026f99717"
    }
  ],
  "stats": {
    "total": 180,
    "additions": 94,
    "deletions": 86
  },
  "files": [
    {
      "sha": "554d9e0823e1915a37e001caebc76cd97b2857b0",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3e96aa78ff5cff513109a545304486176043fd7/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3e96aa78ff5cff513109a545304486176043fd7/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=c3e96aa78ff5cff513109a545304486176043fd7",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-20  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* lib/tuiterm.exp: Rename _cur_x/_cur_y to _cur_col/_cur_row.\n+\n 2021-01-20  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* lib/tuiterm.exp: Add links in comments."
    },
    {
      "sha": "dcc535863ac86ae356a552f2dc1665cb21c9aaba",
      "filename": "gdb/testsuite/lib/tuiterm.exp",
      "status": "modified",
      "additions": 90,
      "deletions": 86,
      "changes": 176,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3e96aa78ff5cff513109a545304486176043fd7/gdb/testsuite/lib/tuiterm.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3e96aa78ff5cff513109a545304486176043fd7/gdb/testsuite/lib/tuiterm.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/tuiterm.exp?ref=c3e96aa78ff5cff513109a545304486176043fd7",
      "patch": "@@ -46,12 +46,16 @@ proc tuiterm_env_finish { } {\n }\n \n namespace eval Term {\n+    # Size of the terminal.\n     variable _rows\n     variable _cols\n+\n+    # Buffer / contents of the terminal.\n     variable _chars\n \n-    variable _cur_x\n-    variable _cur_y\n+    # Position of the cursor.\n+    variable _cur_col\n+    variable _cur_row\n \n     variable _attrs\n \n@@ -94,47 +98,47 @@ namespace eval Term {\n \n     # Backspace.\n     proc _ctl_0x08 {} {\n-\tvariable _cur_x\n-\tincr _cur_x -1\n-\tif {$_cur_x < 0} {\n-\t    variable _cur_y\n+\tvariable _cur_col\n+\tincr _cur_col -1\n+\tif {$_cur_col < 0} {\n+\t    variable _cur_row\n \t    variable _cols\n-\t    set _cur_x [expr {$_cols - 1}]\n-\t    incr _cur_y -1\n-\t    if {$_cur_y < 0} {\n-\t\tset _cur_y 0\n+\t    set _cur_col [expr {$_cols - 1}]\n+\t    incr _cur_row -1\n+\t    if {$_cur_row < 0} {\n+\t\tset _cur_row 0\n \t    }\n \t}\n     }\n \n     # Linefeed.\n     proc _ctl_0x0a {} {\n-\tvariable _cur_y\n+\tvariable _cur_row\n \tvariable _rows\n-\tincr _cur_y 1\n-\tif {$_cur_y >= $_rows} {\n+\tincr _cur_row 1\n+\tif {$_cur_row >= $_rows} {\n \t    error \"FIXME scroll\"\n \t}\n     }\n \n     # Carriage return.\n     proc _ctl_0x0d {} {\n-\tvariable _cur_x\n-\tset _cur_x 0\n+\tvariable _cur_col\n+\tset _cur_col 0\n     }\n \n     # Insert Character.\n     #\n     # https://vt100.net/docs/vt510-rm/ICH.html\n     proc _csi_@ {args} {\n \tset n [_default [lindex $args 0] 1]\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _chars\n-\tset in_x $_cur_x\n-\tset out_x [expr {$_cur_x + $n}]\n+\tset in_x $_cur_col\n+\tset out_x [expr {$_cur_col + $n}]\n \tfor {set i 0} {$i < $n} {incr i} {\n-\t    set _chars($out_x,$_cur_y) $_chars($in_x,$_cur_y)\n+\t    set _chars($out_x,$_cur_row) $_chars($in_x,$_cur_row)\n \t    incr in_x\n \t    incr out_x\n \t}\n@@ -144,112 +148,112 @@ namespace eval Term {\n     #\n     # https://vt100.net/docs/vt510-rm/CUU.html\n     proc _csi_A {args} {\n-\tvariable _cur_y\n+\tvariable _cur_row\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_y [expr {max ($_cur_y - $arg, 0)}]\n+\tset _cur_row [expr {max ($_cur_row - $arg, 0)}]\n     }\n \n     # Cursor Down.\n     #\n     # https://vt100.net/docs/vt510-rm/CUD.html\n     proc _csi_B {args} {\n-\tvariable _cur_y\n+\tvariable _cur_row\n \tvariable _rows\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_y [expr {min ($_cur_y + $arg, $_rows)}]\n+\tset _cur_row [expr {min ($_cur_row + $arg, $_rows)}]\n     }\n \n     # Cursor Forward.\n     #\n     # https://vt100.net/docs/vt510-rm/CUF.html\n     proc _csi_C {args} {\n-\tvariable _cur_x\n+\tvariable _cur_col\n \tvariable _cols\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_x [expr {min ($_cur_x + $arg, $_cols)}]\n+\tset _cur_col [expr {min ($_cur_col + $arg, $_cols)}]\n     }\n \n     # Cursor Backward.\n     #\n     # https://vt100.net/docs/vt510-rm/CUB.html\n     proc _csi_D {args} {\n-\tvariable _cur_x\n+\tvariable _cur_col\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_x [expr {max ($_cur_x - $arg, 0)}]\n+\tset _cur_col [expr {max ($_cur_col - $arg, 0)}]\n     }\n \n     # Cursor Next Line.\n     #\n     # https://vt100.net/docs/vt510-rm/CNL.html\n     proc _csi_E {args} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _rows\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_x 0\n-\tset _cur_y [expr {min ($_cur_y + $arg, $_rows)}]\n+\tset _cur_col 0\n+\tset _cur_row [expr {min ($_cur_row + $arg, $_rows)}]\n     }\n \n     # Cursor Previous Line.\n     #\n     # https://vt100.net/docs/vt510-rm/CPL.html\n     proc _csi_F {args} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _rows\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_x 0\n-\tset _cur_y [expr {max ($_cur_y - $arg, 0)}]\n+\tset _cur_col 0\n+\tset _cur_row [expr {max ($_cur_row - $arg, 0)}]\n     }\n \n     # Cursor Horizontal Absolute.\n     #\n     # https://vt100.net/docs/vt510-rm/CHA.html\n     proc _csi_G {args} {\n-\tvariable _cur_x\n+\tvariable _cur_col\n \tvariable _cols\n \tset arg [_default [lindex $args 0] 1]\n-\tset _cur_x [expr {min ($arg - 1, $_cols)}]\n+\tset _cur_col [expr {min ($arg - 1, $_cols)}]\n     }\n \n     # Cursor Position.\n     #\n     # https://vt100.net/docs/vt510-rm/CUP.html\n     proc _csi_H {args} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n-\tset _cur_y [expr {[_default [lindex $args 0] 1] - 1}]\n-\tset _cur_x [expr {[_default [lindex $args 1] 1] - 1}]\n+\tvariable _cur_col\n+\tvariable _cur_row\n+\tset _cur_row [expr {[_default [lindex $args 0] 1] - 1}]\n+\tset _cur_col [expr {[_default [lindex $args 1] 1] - 1}]\n     }\n \n     # Cursor Horizontal Forward Tabulation.\n     #\n     # https://vt100.net/docs/vt510-rm/CHT.html\n     proc _csi_I {args} {\n \tset n [_default [lindex $args 0] 1]\n-\tvariable _cur_x\n+\tvariable _cur_col\n \tvariable _cols\n-\tincr _cur_x [expr {$n * 8 - $_cur_x % 8}]\n-\tif {$_cur_x >= $_cols} {\n-\t    set _cur_x [expr {$_cols - 1}]\n+\tincr _cur_col [expr {$n * 8 - $_cur_col % 8}]\n+\tif {$_cur_col >= $_cols} {\n+\t    set _cur_col [expr {$_cols - 1}]\n \t}\n     }\n \n     # Erase in Display.\n     #\n     # https://vt100.net/docs/vt510-rm/ED.html\n     proc _csi_J {args} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _rows\n \tvariable _cols\n \tset arg [_default [lindex $args 0] 0]\n \tif {$arg == 0} {\n-\t    _clear_in_line $_cur_x $_cols $_cur_y\n-\t    _clear_lines [expr {$_cur_y + 1}] $_rows\n+\t    _clear_in_line $_cur_col $_cols $_cur_row\n+\t    _clear_lines [expr {$_cur_row + 1}] $_rows\n \t} elseif {$arg == 1} {\n-\t    _clear_lines 0 [expr {$_cur_y - 1}]\n-\t    _clear_in_line 0 $_cur_x $_cur_y\n+\t    _clear_lines 0 [expr {$_cur_row - 1}]\n+\t    _clear_in_line 0 $_cur_col $_cur_row\n \t} elseif {$arg == 2} {\n \t    _clear_lines 0 $_rows\n \t}\n@@ -259,30 +263,30 @@ namespace eval Term {\n     #\n     # https://vt100.net/docs/vt510-rm/EL.html\n     proc _csi_K {args} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _cols\n \tset arg [_default [lindex $args 0] 0]\n \tif {$arg == 0} {\n \t    # From cursor to end.\n-\t    _clear_in_line $_cur_x $_cols $_cur_y\n+\t    _clear_in_line $_cur_col $_cols $_cur_row\n \t} elseif {$arg == 1} {\n-\t    _clear_in_line 0 $_cur_x $_cur_y\n+\t    _clear_in_line 0 $_cur_col $_cur_row\n \t} elseif {$arg == 2} {\n-\t    _clear_in_line 0 $_cols $_cur_y\n+\t    _clear_in_line 0 $_cols $_cur_row\n \t}\n     }\n \n     # Delete line.\n     #\n     # https://vt100.net/docs/vt510-rm/DL.html\n     proc _csi_M {args} {\n-\tvariable _cur_y\n+\tvariable _cur_row\n \tvariable _rows\n \tvariable _cols\n \tvariable _chars\n \tset count [_default [lindex $args 0] 1]\n-\tset y $_cur_y\n+\tset y $_cur_row\n \tset next_y [expr {$y + 1}]\n \twhile {$count > 0 && $next_y < $_rows} {\n \t    for {set x 0} {$x < $_cols} {incr x} {\n@@ -301,14 +305,14 @@ namespace eval Term {\n     proc _csi_X {args} {\n \tset n [_default [lindex $args 0] 1]\n \t# Erase characters but don't move cursor.\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _attrs\n \tvariable _chars\n \tset lattr [array get _attrs]\n-\tset x $_cur_x\n+\tset x $_cur_col\n \tfor {set i 0} {$i < $n} {incr i} {\n-\t    set _chars($x,$_cur_y) [list \" \" $lattr]\n+\t    set _chars($x,$_cur_row) [list \" \" $lattr]\n \t    incr x\n \t}\n     }\n@@ -318,8 +322,8 @@ namespace eval Term {\n     # https://vt100.net/docs/vt510-rm/CBT.html\n     proc _csi_Z {args} {\n \tset n [_default [lindex $args 0] 1]\n-\tvariable _cur_x\n-\tset _cur_x [expr {max (int (($_cur_x - 1) / 8) * 8 - ($n - 1) * 8, 0)}]\n+\tvariable _cur_col\n+\tset _cur_col [expr {max (int (($_cur_col - 1) / 8) * 8 - ($n - 1) * 8, 0)}]\n     }\n \n     # Repeat.\n@@ -335,8 +339,8 @@ namespace eval Term {\n     #\n     # https://vt100.net/docs/vt510-rm/VPA.html\n     proc _csi_d {args} {\n-\tvariable _cur_y\n-\tset _cur_y [expr {[_default [lindex $args 0] 1] - 1}]\n+\tvariable _cur_row\n+\tset _cur_row [expr {[_default [lindex $args 0] 1] - 1}]\n     }\n \n     # Select Graphic Rendition.\n@@ -393,20 +397,20 @@ namespace eval Term {\n     # Insert string at the cursor location.\n     proc _insert {str} {\n \tverbose \"INSERT <<$str>>\"\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _rows\n \tvariable _cols\n \tvariable _attrs\n \tvariable _chars\n \tset lattr [array get _attrs]\n \tforeach char [split $str {}] {\n-\t    set _chars($_cur_x,$_cur_y) [list $char $lattr]\n-\t    incr _cur_x\n-\t    if {$_cur_x >= $_cols} {\n-\t\tset _cur_x 0\n-\t\tincr _cur_y\n-\t\tif {$_cur_y >= $_rows} {\n+\t    set _chars($_cur_col,$_cur_row) [list $char $lattr]\n+\t    incr _cur_col\n+\t    if {$_cur_col >= $_cols} {\n+\t\tset _cur_col 0\n+\t\tincr _cur_row\n+\t\tif {$_cur_row >= $_rows} {\n \t\t    error \"FIXME scroll\"\n \t\t}\n \t    }\n@@ -420,15 +424,15 @@ namespace eval Term {\n \n \tvariable _rows\n \tvariable _cols\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \tvariable _attrs\n \tvariable _resize_count\n \n \tset _rows $rows\n \tset _cols $cols\n-\tset _cur_x 0\n-\tset _cur_y 0\n+\tset _cur_col 0\n+\tset _cur_row 0\n \tset _resize_count 0\n \tarray set _attrs {\n \t    intensity normal\n@@ -447,8 +451,8 @@ namespace eval Term {\n     proc wait_for {wait_for} {\n \tglobal expect_out\n \tglobal gdb_prompt\n-\tvariable _cur_x\n-\tvariable _cur_y\n+\tvariable _cur_col\n+\tvariable _cur_row\n \n \tset prompt_wait_for \"$gdb_prompt \\$\"\n \n@@ -487,9 +491,9 @@ namespace eval Term {\n \t    # isn't reliable to check this only after an insertion,\n \t    # because curses may make \"unusual\" redrawing decisions.\n \t    if {$wait_for == \"$prompt_wait_for\"} {\n-\t\tset prev [get_line $_cur_y $_cur_x]\n+\t\tset prev [get_line $_cur_row $_cur_col]\n \t    } else {\n-\t\tset prev [get_line $_cur_y]\n+\t\tset prev [get_line $_cur_row]\n \t    }\n \t    if {[regexp -- $wait_for $prev]} {\n \t\tif {$wait_for == \"$prompt_wait_for\"} {\n@@ -609,9 +613,9 @@ namespace eval Term {\n \n     # Get the text just before the cursor.\n     proc get_current_line {} {\n-\tvariable _cur_x\n-\tvariable _cur_y\n-\treturn [get_line $_cur_y $_cur_x]\n+\tvariable _cur_col\n+\tvariable _cur_row\n+\treturn [get_line $_cur_row $_cur_col]\n     }\n \n     # Helper function for check_box.  Returns empty string if the box"
    }
  ]
}