{
  "sha": "969f6a63c0ae7779fd5eb10af25fd4ab810feef8",
  "node_id": "C_kwDOANOeidoAKDk2OWY2YTYzYzBhZTc3NzlmZDVlYjEwYWYyNWZkNGFiODEwZmVlZjg",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2022-02-16T00:00:46Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2022-02-16T11:35:24Z"
    },
    "message": "ubsan: s_app_line integer overflow\n\nThere are quite a few ubsan warnings in gas.  This one disappears with\na code tidy.\n\n\t* read.c (s_app_line): Rename 'l' to 'linenum'.  Avoid ubsan\n\twarning.",
    "tree": {
      "sha": "625eb0e11e3609d8e2fc3605ff718811879d266f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/625eb0e11e3609d8e2fc3605ff718811879d266f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/969f6a63c0ae7779fd5eb10af25fd4ab810feef8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/969f6a63c0ae7779fd5eb10af25fd4ab810feef8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/969f6a63c0ae7779fd5eb10af25fd4ab810feef8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/969f6a63c0ae7779fd5eb10af25fd4ab810feef8/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8b14b0cb997af3207865b342137007b406259786",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8b14b0cb997af3207865b342137007b406259786",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8b14b0cb997af3207865b342137007b406259786"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 8,
    "deletions": 9
  },
  "files": [
    {
      "sha": "f3635626649eeee2a208e6bc9588023b2cff4407",
      "filename": "gas/read.c",
      "status": "modified",
      "additions": 8,
      "deletions": 9,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/969f6a63c0ae7779fd5eb10af25fd4ab810feef8/gas/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/969f6a63c0ae7779fd5eb10af25fd4ab810feef8/gas/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/read.c?ref=969f6a63c0ae7779fd5eb10af25fd4ab810feef8",
      "patch": "@@ -2068,20 +2068,18 @@ void\n s_app_line (int appline)\n {\n   char *file = NULL;\n-  int l;\n+  int linenum;\n \n   /* The given number is that of the next line.  */\n   if (appline)\n-    l = get_absolute_expression ();\n-  else if (!get_linefile_number (&l))\n+    linenum = get_absolute_expression ();\n+  else if (!get_linefile_number (&linenum))\n     {\n       ignore_rest_of_line ();\n       return;\n     }\n \n-  l--;\n-\n-  if (l < -1)\n+  if (linenum < 0)\n     /* Some of the back ends can't deal with non-positive line numbers.\n        Besides, it's silly.  GCC however will generate a line number of\n        zero when it is pre-processing builtins for assembler-with-cpp files:\n@@ -2092,7 +2090,7 @@ s_app_line (int appline)\n        in the GCC and GDB testsuites.  So we check for negative line numbers\n        rather than non-positive line numbers.  */\n     as_warn (_(\"line numbers must be positive; line number %d rejected\"),\n-\t     l + 1);\n+\t     linenum);\n   else\n     {\n       int flags = 0;\n@@ -2152,10 +2150,11 @@ s_app_line (int appline)\n \n       if (appline || file)\n \t{\n-\t  new_logical_line_flags (file, l, flags);\n+\t  linenum--;\n+\t  new_logical_line_flags (file, linenum, flags);\n #ifdef LISTING\n \t  if (listing)\n-\t    listing_source_line (l);\n+\t    listing_source_line (linenum);\n #endif\n \t}\n     }"
    }
  ]
}