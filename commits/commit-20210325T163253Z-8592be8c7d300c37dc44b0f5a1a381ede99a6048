{
  "sha": "8592be8c7d300c37dc44b0f5a1a381ede99a6048",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODU5MmJlOGM3ZDMwMGMzN2RjNDRiMGY1YTFhMzgxZWRlOTlhNjA0OA==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-03-25T16:32:46Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-03-25T16:32:53Z"
    },
    "message": "ld: do not rely on the exact size of the CTF symtypetabs in test results\n\nThe data object and function info sections (collectively \"symtypetabs\")\nusually (i.e. if non-indexed) have sizes defined by the size of the ELF\ndynamic symbol table in the object they are linked to.  This means test\nresults should not depend on the exact sizes of these sections, because\nadding entirely irrelevant symbols to the dynsym can cause spurious test\nfailures.  (This also means we should not match the offset of sections\nthat follow them, since those too depend on the exact size of the\nsymtypetab sections.)\n\nSpotted by turning the sanitizer on, which introduced new dynsym entries\nand expanded the symtypetab sizes to match.\n\nld/ChangeLog\n2021-03-25  Nick Alcock  <nick.alcock@oracle.com>\n\n\t* testsuite/ld-ctf/array.d: Only check that the data object\n\tsection is nonempty: do not check its exact size.\n\t* testsuite/ld-ctf/diag-parlabel.d: Likewise.\n\t* testsuite/ld-ctf/slice.d: Likewise.\n\t* testsuite/ld-ctf/data-func-conflicted.d: Likewise, and for the\n\tfunc info section too.\n\t* testsuite/ld-ctf/function.d: Likewise, for the func info section.",
    "tree": {
      "sha": "273883057628f8e54498766b671e406ee6b6fe06",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/273883057628f8e54498766b671e406ee6b6fe06"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8592be8c7d300c37dc44b0f5a1a381ede99a6048",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8592be8c7d300c37dc44b0f5a1a381ede99a6048",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8592be8c7d300c37dc44b0f5a1a381ede99a6048",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8592be8c7d300c37dc44b0f5a1a381ede99a6048/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8f7b22ea2a95ccab6aeaddcdee7472dbdbcfb4d3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f7b22ea2a95ccab6aeaddcdee7472dbdbcfb4d3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8f7b22ea2a95ccab6aeaddcdee7472dbdbcfb4d3"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 18,
    "deletions": 8
  },
  "files": [
    {
      "sha": "c10bc392fd14fb0b90119d9548e98bc69b922760",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -1,3 +1,13 @@\n+2021-03-25  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* testsuite/ld-ctf/array.d: Only check that the data object\n+\tsection is nonempty: do not check its exact size.\n+\t* testsuite/ld-ctf/diag-parlabel.d: Likewise.\n+\t* testsuite/ld-ctf/slice.d: Likewise.\n+\t* testsuite/ld-ctf/data-func-conflicted.d: Likewise, and for the\n+\tfunc info section too.\n+\t* testsuite/ld-ctf/function.d: Likewise, for the func info section.\n+\n 2021-03-22  Martin Liska  <mliska@suse.cz>\n \n \t* emultempl/aix.em: Replace usage of CONST_STRNEQ with startswith."
    },
    {
      "sha": "ab262d915b53f28487e819736bda8f49054e156d",
      "filename": "ld/testsuite/ld-ctf/array.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/array.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/array.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-ctf/array.d?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -13,7 +13,7 @@ Contents of CTF section .ctf:\n     Magic number: 0xdff2\n     Version: 4 \\(CTF_VERSION_3\\)\n #...\n-    Data object section:\t.* \\(0x8 bytes\\)\n+    Data object section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n     Type section:\t.* \\(0x5c bytes\\)\n     String section:\t.*\n "
    },
    {
      "sha": "87dd4b61e3b7d53a4371a2d2c1d0eea8980fa5ca",
      "filename": "ld/testsuite/ld-ctf/data-func-conflicted.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/data-func-conflicted.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/data-func-conflicted.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-ctf/data-func-conflicted.d?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -13,8 +13,8 @@ Contents of CTF section \\.ctf:\n     Magic number: 0xdff2\n     Version: 4 \\(CTF_VERSION_3\\)\n #...\n-    Data object section:\t.* \\(0xc bytes\\)\n-    Function info section:\t.* \\(0x44 bytes\\)\n+    Data object section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n+    Function info section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n     Object index section:\t.* \\(0xc bytes\\)\n     Type section:\t.* \\(0xf4 bytes\\)\n     String section:\t.*\n@@ -39,7 +39,7 @@ CTF archive member: .*/data-func-1\\.c:\n #...\n     Parent name: \\.ctf\n     Compilation unit name: .*/data-func-1\\.c\n-    Data object section:\t.* \\(0xfa4 bytes\\)\n+    Data object section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n     Type section:\t.* \\(0xc bytes\\)\n     String section:\t.*\n "
    },
    {
      "sha": "9d2c0860997e0215774251909a8a7337c38f4257",
      "filename": "ld/testsuite/ld-ctf/diag-parlabel.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/diag-parlabel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/diag-parlabel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-ctf/diag-parlabel.d?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -13,8 +13,8 @@ Contents of CTF section .ctf:\n     Version: 4 \\(CTF_VERSION_3\\)\n #...\n     Compilation unit name: .*A.c\n-    Data object section:\t0x0 -- 0x3 \\(0x4 bytes\\)\n-    Type section:\t0x4 -- 0x33 \\(0x30 bytes\\)\n+    Data object section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n+    Type section:\t.* \\(0x30 bytes\\)\n     String section:\t.*\n \n   Labels:"
    },
    {
      "sha": "e6cb20951f48681bf210e4685337db9da50f07f7",
      "filename": "ld/testsuite/ld-ctf/function.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/function.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/function.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-ctf/function.d?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -13,7 +13,7 @@ Contents of CTF section .ctf:\n     Version: 4 \\(CTF_VERSION_3\\)\n #...\n     Compilation unit name: .*function.c\n-    Function info section:\t.* \\(0x4 bytes\\)\n+    Function info section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n     Type section:\t.* \\(0x90 bytes\\)\n     String section:\t.*\n #..."
    },
    {
      "sha": "efe32a87523f05fcd8c483bbf56d8a9af19473aa",
      "filename": "ld/testsuite/ld-ctf/slice.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/slice.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8592be8c7d300c37dc44b0f5a1a381ede99a6048/ld/testsuite/ld-ctf/slice.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-ctf/slice.d?ref=8592be8c7d300c37dc44b0f5a1a381ede99a6048",
      "patch": "@@ -14,7 +14,7 @@ Contents of CTF section .ctf:\n #...\n     Compilation unit name: .*slice.c\n #...\n-    Data object section:\t.* \\(0x4 bytes\\)\n+    Data object section:\t.* \\(0x[1-9a-f][0-9a-f]* bytes\\)\n     Type section:\t.* \\(0xd0 bytes\\)\n     String section:\t.*\n #..."
    }
  ]
}