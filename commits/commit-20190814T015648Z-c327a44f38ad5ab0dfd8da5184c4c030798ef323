{
  "sha": "c327a44f38ad5ab0dfd8da5184c4c030798ef323",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzMyN2E0NGYzOGFkNWFiMGRmZDhkYTUxODRjNGMwMzA3OThlZjMyMw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-08-14T01:56:48Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-08-14T01:56:48Z"
    },
    "message": "Use comp_unit_maybe_decode_line_info in more places\n\n\t* dwarf2.c (comp_unit_maybe_decode_line_info): Declare.\n\t(comp_unit_find_nearest_line): Use it here..\n\t(_bfd_dwarf2_find_symbol_bias): ..and here.",
    "tree": {
      "sha": "7c33545dc1113a446c83af3a790428b422881b57",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7c33545dc1113a446c83af3a790428b422881b57"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c327a44f38ad5ab0dfd8da5184c4c030798ef323",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c327a44f38ad5ab0dfd8da5184c4c030798ef323",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c327a44f38ad5ab0dfd8da5184c4c030798ef323",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c327a44f38ad5ab0dfd8da5184c4c030798ef323/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9defd221fe3ecffabc90eadd077326b27e898a2b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9defd221fe3ecffabc90eadd077326b27e898a2b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9defd221fe3ecffabc90eadd077326b27e898a2b"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 11,
    "deletions": 32
  },
  "files": [
    {
      "sha": "143350e11d0576bef1fb45eacec71800989ab037",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c327a44f38ad5ab0dfd8da5184c4c030798ef323/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c327a44f38ad5ab0dfd8da5184c4c030798ef323/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=c327a44f38ad5ab0dfd8da5184c4c030798ef323",
      "patch": "@@ -1,3 +1,9 @@\n+2019-08-14  Alan Modra  <amodra@gmail.com>\n+\n+\t* dwarf2.c (comp_unit_maybe_decode_line_info): Declare.\n+\t(comp_unit_find_nearest_line): Use it here..\n+\t(_bfd_dwarf2_find_symbol_bias): ..and here.\n+\n 2019-08-14  Alan Modra  <amodra@gmail.com>\n \n \t* dwarf2.c (_bfd_dwarf2_find_nearest_line): Remove addr_size parameter."
    },
    {
      "sha": "65bb1e4e32d2ae552435d9f9aef49bc8bbce9dd7",
      "filename": "bfd/dwarf2.c",
      "status": "modified",
      "additions": 5,
      "deletions": 32,
      "changes": 37,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c327a44f38ad5ab0dfd8da5184c4c030798ef323/bfd/dwarf2.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c327a44f38ad5ab0dfd8da5184c4c030798ef323/bfd/dwarf2.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/dwarf2.c?ref=c327a44f38ad5ab0dfd8da5184c4c030798ef323",
      "patch": "@@ -2804,6 +2804,9 @@ lookup_symbol_in_variable_table (struct comp_unit *unit,\n   return FALSE;\n }\n \n+static bfd_boolean comp_unit_maybe_decode_line_info (struct comp_unit *,\n+\t\t\t\t\t\t     struct dwarf2_debug *);\n+\n static bfd_boolean\n find_abstract_instance (struct comp_unit *   unit,\n \t\t\tbfd_byte *           orig_info_ptr,\n@@ -3604,33 +3607,9 @@ comp_unit_find_nearest_line (struct comp_unit *unit,\n {\n   bfd_boolean func_p;\n \n-  if (unit->error)\n+  if (!comp_unit_maybe_decode_line_info (unit, stash))\n     return FALSE;\n \n-  if (! unit->line_table)\n-    {\n-      if (! unit->stmtlist)\n-\t{\n-\t  unit->error = 1;\n-\t  return FALSE;\n-\t}\n-\n-      unit->line_table = decode_line_info (unit, stash);\n-\n-      if (! unit->line_table)\n-\t{\n-\t  unit->error = 1;\n-\t  return FALSE;\n-\t}\n-\n-      if (unit->first_child_die_ptr < unit->end_ptr\n-\t  && ! scan_unit_for_symbols (unit))\n-\t{\n-\t  unit->error = 1;\n-\t  return FALSE;\n-\t}\n-    }\n-\n   *function_ptr = NULL;\n   func_p = lookup_address_in_function_table (unit, addr, function_ptr);\n   if (func_p && (*function_ptr)->tag == DW_TAG_inlined_subroutine)\n@@ -4492,13 +4471,7 @@ _bfd_dwarf2_find_symbol_bias (asymbol ** symbols, void ** pinfo)\n     {\n       struct funcinfo * func;\n \n-      if (unit->function_table == NULL)\n-\t{\n-\t  if (unit->line_table == NULL)\n-\t    unit->line_table = decode_line_info (unit, stash);\n-\t  if (unit->line_table != NULL)\n-\t    scan_unit_for_symbols (unit);\n-\t}\n+      comp_unit_maybe_decode_line_info (unit, stash);\n \n       for (func = unit->function_table; func != NULL; func = func->prev_func)\n \tif (func->name && func->arange.low)"
    }
  ]
}