{
  "sha": "965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTY1ZmViZTU5OWFiM2E1ZjlmYTE3YTdhYWVkNGRkNzE0ZjI2NWVjZA==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "pedro@palves.net",
      "date": "2021-06-17T15:16:54Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "pedro@palves.net",
      "date": "2021-06-17T15:22:11Z"
    },
    "message": "Move scoped_ignore_sigttou to gdbsupport/\n\nA following patch will want to use scoped_ignore_sigttou in code\nshared between GDB and GDBserver.  Move it under gdbsupport/.\n\nNote that despite what inflow.h/inflow.c's first line says, inflow.c\nis no longer about ptrace, it is about terminal management.  Some\nother files were unnecessarily including inflow.h, I guess a leftover\nfrom the days when inflow.c really was about ptrace.  Those inclusions\nare simply dropped.\n\ngdb/ChangeLog:\nyyyy-mm-dd  Pedro Alves  <pedro@palves.net>\n\n\t* Makefile.in (HFILES_NO_SRCDIR): Remove inflow.h.\n\t* inf-ptrace.c, inflow.c, procfs.c: Don't include \"inflow.h\".\n\t* inflow.h: Delete, moved to gdbsupport/ under a different name.\n\t* ser-unix.c: Don't include \"inflow.h\".  Include\n\t\"gdbsupport/scoped_ignore_sigttou.h\".\n\ngdbsupport/ChangeLog:\nyyyy-mm-dd  Pedro Alves  <pedro@palves.net>\n\n\t* scoped_ignore_sigttou.h: New file, moved from gdb/ and renamed.\n\nChange-Id: Ie390abf42c3a78bec6d282ad2a63edd3e623559a",
    "tree": {
      "sha": "6070fefce3712338afe42d5a13504b893a64223d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6070fefce3712338afe42d5a13504b893a64223d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "96cbfd9f0488e9536bfc27550ebf90cb1ecac93b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/96cbfd9f0488e9536bfc27550ebf90cb1ecac93b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/96cbfd9f0488e9536bfc27550ebf90cb1ecac93b"
    }
  ],
  "stats": {
    "total": 27,
    "additions": 18,
    "deletions": 9
  },
  "files": [
    {
      "sha": "63d7cf53b1987e9284a333dc98abff92bf0ef0b1",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -1,3 +1,11 @@\n+2021-06-17  Pedro Alves  <pedro@palves.net>\n+\n+\t* Makefile.in (HFILES_NO_SRCDIR): Remove inflow.h.\n+\t* inf-ptrace.c, inflow.c, procfs.c: Don't include \"inflow.h\".\n+\t* inflow.h: Delete, moved to gdbsupport/ under a different name.\n+\t* ser-unix.c: Don't include \"inflow.h\".  Include\n+\t\"gdbsupport/scoped_ignore_sigttou.h\".\n+\n 2021-06-17  Pedro Alves  <pedro@palves.net>\n \n \t* tui/tui-io.c (tui_dispatch_mouse_event): New, factored out from"
    },
    {
      "sha": "881ebde8fb0ac2819d00303c917b13b8ae093130",
      "filename": "gdb/Makefile.in",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/Makefile.in?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -1336,7 +1336,6 @@ HFILES_NO_SRCDIR = \\\n \tinf-ptrace.h \\\n \tinfcall.h \\\n \tinferior.h \\\n-\tinflow.h \\\n \tinline-frame.h \\\n \tinterps.h \\\n \tjit.h \\"
    },
    {
      "sha": "afa38de6ef7ce00ab8f136971ff58ceaabbfa49b",
      "filename": "gdb/inf-ptrace.c",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/inf-ptrace.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/inf-ptrace.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/inf-ptrace.c?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -20,7 +20,6 @@\n #include \"defs.h\"\n #include \"command.h\"\n #include \"inferior.h\"\n-#include \"inflow.h\"\n #include \"terminal.h\"\n #include \"gdbcore.h\"\n #include \"regcache.h\""
    },
    {
      "sha": "f9917d6a81cd6e8ba04f2f9a2bc58edeb2302781",
      "filename": "gdb/inflow.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/inflow.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/inflow.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/inflow.c?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -29,12 +29,12 @@\n #include <fcntl.h>\n #include \"gdbsupport/gdb_select.h\"\n \n-#include \"inflow.h\"\n #include \"gdbcmd.h\"\n #ifdef HAVE_TERMIOS_H\n #include <termios.h>\n #endif\n #include \"gdbsupport/job-control.h\"\n+#include \"gdbsupport/scoped_ignore_sigttou.h\"\n \n #ifdef HAVE_SYS_IOCTL_H\n #include <sys/ioctl.h>"
    },
    {
      "sha": "529ee33df9003d70c04d05fabc4bd106ae36a3df",
      "filename": "gdb/procfs.c",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/procfs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/procfs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/procfs.c?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -40,7 +40,6 @@\n #include <signal.h>\n #include <ctype.h>\n #include \"gdb_bfd.h\"\n-#include \"inflow.h\"\n #include \"auxv.h\"\n #include \"procfs.h\"\n #include \"observable.h\""
    },
    {
      "sha": "96d024eea3d956814f976b4be533c12178a26626",
      "filename": "gdb/ser-unix.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/ser-unix.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdb/ser-unix.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ser-unix.c?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -32,7 +32,7 @@\n #include \"gdbcmd.h\"\n #include \"gdbsupport/filestuff.h\"\n #include <termios.h>\n-#include \"inflow.h\"\n+#include \"gdbsupport/scoped_ignore_sigttou.h\"\n \n struct hardwire_ttystate\n   {"
    },
    {
      "sha": "ac424f3ae7fd4a4f5f827e223f004ada3302a312",
      "filename": "gdbsupport/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdbsupport/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdbsupport/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/ChangeLog?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -1,3 +1,7 @@\n+2021-06-17  Pedro Alves  <pedro@palves.net>\n+\n+\t* scoped_ignore_sigttou.h: New file, moved from gdb/ and renamed.\n+\n 2021-05-17  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* .dir-locals.el: Set sentence-end-double-space for all modes, and"
    },
    {
      "sha": "a31316460b4bf89e7b551fa87ab5afec9c3137e1",
      "filename": "gdbsupport/scoped_ignore_sigttou.h",
      "status": "renamed",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdbsupport/scoped_ignore_sigttou.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/965febe599ab3a5f9fa17a7aaed4dd714f265ecd/gdbsupport/scoped_ignore_sigttou.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/scoped_ignore_sigttou.h?ref=965febe599ab3a5f9fa17a7aaed4dd714f265ecd",
      "patch": "@@ -1,4 +1,4 @@\n-/* Low level interface to ptrace, for GDB when running under Unix.\n+/* Support for signoring SIGTTOU.\n \n    Copyright (C) 2003-2021 Free Software Foundation, Inc.\n \n@@ -17,8 +17,8 @@\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n \n-#ifndef INFLOW_H\n-#define INFLOW_H\n+#ifndef SCOPED_IGNORE_SIGTTOU_H\n+#define SCOPED_IGNORE_SIGTTOU_H\n \n #include <unistd.h>\n #include <signal.h>\n@@ -53,4 +53,4 @@ class scoped_ignore_sigttou\n #endif\n };\n \n-#endif /* inflow.h */\n+#endif /* SCOPED_IGNORE_SIGTTOU_H */",
      "previous_filename": "gdb/inflow.h"
    }
  ]
}