{
  "sha": "ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWY4ZjA4Y2ExM2Y2YzExMWNjNTQ5YTNlMTNiZTVjNWUyZDk1Y2E4Mg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-01-28T23:55:58Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-01-29T00:09:20Z"
    },
    "message": "PR25477, ld 2.34 tries to load ${prefix}/etc/ld.so.conf\n\n\tPR 25477\n\t* ldelf.c (ldelf_check_ld_so_conf): Add prefix parameter and\n\tcorrect concat.\n\t(ldelf_after_open): Add prefix parameter.\n\t* ldelf.h (ldelf_after_open): Update prototype.\n\t* emultempl/elf.em (gld${EMULATION_NAME}_after_open): Pass $prefix\n\tto ldelf_after_open.\n\t* Makefile.am: Correct z80 dependencies.\n\t* Makefile.in: Regenerate.",
    "tree": {
      "sha": "bd5e903baff326193a2e3f173f3a368a3e372bf7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bd5e903baff326193a2e3f173f3a368a3e372bf7"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e667c15c4895d419eb19068090c851110a0aeaaf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e667c15c4895d419eb19068090c851110a0aeaaf",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e667c15c4895d419eb19068090c851110a0aeaaf"
    }
  ],
  "stats": {
    "total": 28,
    "additions": 20,
    "deletions": 8
  },
  "files": [
    {
      "sha": "850f1db8036c808d96db4e866af23b638018f7c0",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -1,3 +1,15 @@\n+2020-01-29  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 25477\n+\t* ldelf.c (ldelf_check_ld_so_conf): Add prefix parameter and\n+\tcorrect concat.\n+\t(ldelf_after_open): Add prefix parameter.\n+\t* ldelf.h (ldelf_after_open): Update prototype.\n+\t* emultempl/elf.em (gld${EMULATION_NAME}_after_open): Pass $prefix\n+\tto ldelf_after_open.\n+\t* Makefile.am: Correct z80 dependencies.\n+\t* Makefile.in: Regenerate.\n+\n 2020-01-28  Alan Modra  <amodra@gmail.com>\n \n \t* ldexp.c (fold_name): Don't print bfd_link_hash_lookup failed"
    },
    {
      "sha": "4a9b8404b7b1c1366fb867669d4900a2a3a7ae4d",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -775,6 +775,7 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xc16xs.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xstormy16.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xtensa.Pc@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32z80.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386_be.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386_fbsd.Pc@am__quote@\n@@ -873,7 +874,6 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez80.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez8001.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez8002.Pc@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez80elf32.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elf.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elf32.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elfb.Pc@am__quote@"
    },
    {
      "sha": "46d9b14077924f4fc8f1f4ff5078479e41bdd670",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -2379,6 +2379,7 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xc16xs.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xstormy16.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32xtensa.Pc@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf32z80.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386_be.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eelf_i386_fbsd.Pc@am__quote@\n@@ -2477,7 +2478,6 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez80.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez8001.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez8002.Pc@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ez80elf32.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elf.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elf32.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/eaarch64elfb.Pc@am__quote@"
    },
    {
      "sha": "42c552b36eda23cde2d6eb16c313ad40f54b7f3a",
      "filename": "ld/emultempl/elf.em",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/emultempl/elf.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/emultempl/elf.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/elf.em?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -125,7 +125,7 @@ static void\n gld${EMULATION_NAME}_after_open (void)\n {\n   ldelf_after_open ($IS_LIBPATH, $IS_NATIVE,\n-\t\t    $IS_LINUX_TARGET, $IS_FREEBSD_TARGET, $ELFSIZE);\n+\t\t    $IS_LINUX_TARGET, $IS_FREEBSD_TARGET, $ELFSIZE, \"$prefix\");\n }\n \n EOF"
    },
    {
      "sha": "2e27cf48a816dc78bd76d2f0185a601d2edfb392",
      "filename": "ld/ldelf.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ldelf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ldelf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldelf.c?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -894,7 +894,7 @@ ldelf_parse_ld_so_conf (struct ldelf_ld_so_conf *info, const char *filename)\n \n static bfd_boolean\n ldelf_check_ld_so_conf (const struct bfd_link_needed_list *l, int force,\n-\t\t\tint elfsize)\n+\t\t\tint elfsize, const char *prefix)\n {\n   static bfd_boolean initialized;\n   static const char *ld_so_conf;\n@@ -907,7 +907,7 @@ ldelf_check_ld_so_conf (const struct bfd_link_needed_list *l, int force,\n \n       info.path = NULL;\n       info.len = info.alloc = 0;\n-      tmppath = concat (ld_sysroot, \"${prefix}/etc/ld.so.conf\",\n+      tmppath = concat (ld_sysroot, prefix, \"/etc/ld.so.conf\",\n \t\t\t(const char *) NULL);\n       if (!ldelf_parse_ld_so_conf (&info, tmppath))\n \t{\n@@ -986,7 +986,7 @@ ldelf_check_needed (lang_input_statement_type *s)\n \n void\n ldelf_after_open (int use_libpath, int native, int is_linux, int is_freebsd,\n-\t\t  int elfsize)\n+\t\t  int elfsize, const char *prefix)\n {\n   struct bfd_link_needed_list *needed, *l;\n   struct elf_link_hash_table *htab;\n@@ -1260,7 +1260,7 @@ ldelf_after_open (int use_libpath, int native, int is_linux, int is_freebsd,\n \t\tbreak;\n \n \t      if (is_linux\n-\t\t  && ldelf_check_ld_so_conf (l, force, elfsize))\n+\t\t  && ldelf_check_ld_so_conf (l, force, elfsize, prefix))\n \t\tbreak;\n \t    }\n "
    },
    {
      "sha": "492649b29349a5b8cb284722b6336c8ec4690930",
      "filename": "ld/ldelf.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ldelf.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82/ld/ldelf.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldelf.h?ref=ef8f08ca13f6c111cc549a3e13be5c5e2d95ca82",
      "patch": "@@ -22,7 +22,7 @@ extern const char *ldelf_emit_note_gnu_build_id;\n \n extern void ldelf_after_parse (void);\n extern bfd_boolean ldelf_load_symbols (lang_input_statement_type *);\n-extern void ldelf_after_open (int, int, int, int, int);\n+extern void ldelf_after_open (int, int, int, int, int, const char *);\n extern bfd_boolean ldelf_setup_build_id (bfd *);\n extern void ldelf_append_to_separated_string (char **, char *);\n extern void ldelf_before_allocation (char *, char *, const char *);"
    }
  ]
}