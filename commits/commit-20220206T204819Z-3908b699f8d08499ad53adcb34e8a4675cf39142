{
  "sha": "3908b699f8d08499ad53adcb34e8a4675cf39142",
  "node_id": "C_kwDOANOeidoAKDM5MDhiNjk5ZjhkMDg0OTlhZDUzYWRjYjM0ZThhNDY3NWNmMzkxNDI",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2021-11-20T03:41:10Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2022-02-06T20:48:19Z"
    },
    "message": "gdb: remove COMPUNIT_EPILOGUE_UNWIND_VALID macro, add getter/setter\n\nAdd a getter and a setter for a compunit_symtab's epilogue unwind valid flag.\nRemove the corresponding macro and adjust all callers.\n\nChange-Id: If3b68629d987767da9be7041a95d96dc34367a9a",
    "tree": {
      "sha": "ee919825e6f4ea29031846b857c903626cec7b24",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ee919825e6f4ea29031846b857c903626cec7b24"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3908b699f8d08499ad53adcb34e8a4675cf39142",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3908b699f8d08499ad53adcb34e8a4675cf39142",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3908b699f8d08499ad53adcb34e8a4675cf39142",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3908b699f8d08499ad53adcb34e8a4675cf39142/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b0fc0e82d5ca4047ab3054a814b68a841e7001ea",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b0fc0e82d5ca4047ab3054a814b68a841e7001ea",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b0fc0e82d5ca4047ab3054a814b68a841e7001ea"
    }
  ],
  "stats": {
    "total": 19,
    "additions": 14,
    "deletions": 5
  },
  "files": [
    {
      "sha": "4444187515fb712257f756a72483824ca171f1af",
      "filename": "gdb/amd64-tdep.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/amd64-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/amd64-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/amd64-tdep.c?ref=3908b699f8d08499ad53adcb34e8a4675cf39142",
      "patch": "@@ -2901,7 +2901,7 @@ amd64_stack_frame_destroyed_p (struct gdbarch *gdbarch, CORE_ADDR pc)\n   struct compunit_symtab *cust;\n \n   cust = find_pc_compunit_symtab (pc);\n-  if (cust != NULL && COMPUNIT_EPILOGUE_UNWIND_VALID (cust))\n+  if (cust != NULL && cust->epilogue_unwind_valid ())\n     return 0;\n \n   if (target_read_memory (pc, &insn, 1))"
    },
    {
      "sha": "fb138de86adcb8e5bcb3aea0405b8d95cbe58761",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=3908b699f8d08499ad53adcb34e8a4675cf39142",
      "patch": "@@ -9496,7 +9496,7 @@ process_full_comp_unit (dwarf2_cu *cu, enum language pretend_language)\n \tcust->set_locations_valid (true);\n \n       if (gcc_4_minor >= 5)\n-\tcust->epilogue_unwind_valid = 1;\n+\tcust->set_epilogue_unwind_valid (true);\n \n       cust->set_call_site_htab (cu->call_site_htab);\n     }"
    },
    {
      "sha": "b98f475749989f149982d200b9f7c35a313c0cfe",
      "filename": "gdb/i386-tdep.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/i386-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/i386-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/i386-tdep.c?ref=3908b699f8d08499ad53adcb34e8a4675cf39142",
      "patch": "@@ -2222,7 +2222,7 @@ i386_stack_frame_destroyed_p (struct gdbarch *gdbarch, CORE_ADDR pc)\n   struct compunit_symtab *cust;\n \n   cust = find_pc_compunit_symtab (pc);\n-  if (cust != NULL && COMPUNIT_EPILOGUE_UNWIND_VALID (cust))\n+  if (cust != NULL && cust->epilogue_unwind_valid ())\n     return 0;\n \n   if (target_read_memory (pc, &insn, 1))"
    },
    {
      "sha": "5419e70ced6a632edf3ca0ab1d4fc15f925c235b",
      "filename": "gdb/symtab.h",
      "status": "modified",
      "additions": 11,
      "deletions": 2,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/symtab.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3908b699f8d08499ad53adcb34e8a4675cf39142/gdb/symtab.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symtab.h?ref=3908b699f8d08499ad53adcb34e8a4675cf39142",
      "patch": "@@ -1541,6 +1541,16 @@ struct compunit_symtab\n     m_locations_valid = locations_valid;\n   }\n \n+  bool epilogue_unwind_valid () const\n+  {\n+    return m_epilogue_unwind_valid;\n+  }\n+\n+  void set_epilogue_unwind_valid (bool epilogue_unwind_valid)\n+  {\n+    m_epilogue_unwind_valid = epilogue_unwind_valid;\n+  }\n+\n   /* Make PRIMARY_FILETAB the primary filetab of this compunit symtab.\n \n      PRIMARY_FILETAB must already be a filetab of this compunit symtab.  */\n@@ -1607,7 +1617,7 @@ struct compunit_symtab\n \n   /* DWARF unwinder for this CU is valid even for epilogues (PC at the return\n      instruction).  This is supported by GCC since 4.5.0.  */\n-  unsigned int epilogue_unwind_valid : 1;\n+  unsigned int m_epilogue_unwind_valid : 1;\n \n   /* struct call_site entries for this compilation unit or NULL.  */\n   htab_t m_call_site_htab;\n@@ -1636,7 +1646,6 @@ struct compunit_symtab\n \n using compunit_symtab_range = next_range<compunit_symtab>;\n \n-#define COMPUNIT_EPILOGUE_UNWIND_VALID(cust) ((cust)->epilogue_unwind_valid)\n #define COMPUNIT_MACRO_TABLE(cust) ((cust)->macro_table)\n \n /* Return the language of CUST.  */"
    }
  ]
}