{
  "sha": "828c2a2580aa0a505e72cb8307905dd03c55d2a1",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODI4YzJhMjU4MGFhMGE1MDVlNzJjYjgzMDc5MDVkZDAzYzU1ZDJhMQ==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2020-06-09T06:47:31Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2020-06-09T06:47:31Z"
    },
    "message": "x86-64: adjust far indirect branch handling\n\nAn unwanted side effect of 5990e377e5a3 (\"x86-64: Intel64 adjustments\nfor insns dealing with far pointers\") was that with -mintel64 LCALL and\nLJMP would now default to 64-bit operand size. Since 64-bit far branches\naren't portable, the default operand size should still be 32-bit.\nHowever, since the 64-bit variant is permitted, an ambiguous operand\nwarning should be issued.\n\nAs to the actual code change, please note that the conditional\nsurrounding the switch() that gets adjusted covers several cases which\nare of no interest to or benign in 64-bit mode, hence the new\nconditional added can be quite a bit less involved.",
    "tree": {
      "sha": "e97ad7044c6f53f92233b1cc0d143c160e1f9650",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e97ad7044c6f53f92233b1cc0d143c160e1f9650"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/828c2a2580aa0a505e72cb8307905dd03c55d2a1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/828c2a2580aa0a505e72cb8307905dd03c55d2a1",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/828c2a2580aa0a505e72cb8307905dd03c55d2a1",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/828c2a2580aa0a505e72cb8307905dd03c55d2a1/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "da4977e00b73835180ccbce8a2046705fd8ade62",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/da4977e00b73835180ccbce8a2046705fd8ade62",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/da4977e00b73835180ccbce8a2046705fd8ade62"
    }
  ],
  "stats": {
    "total": 161,
    "additions": 160,
    "deletions": 1
  },
  "files": [
    {
      "sha": "b4476bf042b53e469f1bbd10e56a60a842af0e24",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -1,3 +1,14 @@\n+2020-06-09  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* config/tc-i386.c (process_suffix): Restrict defaulting to 'q'\n+\tsuffix.\n+\t* testsuite/gas/i386/noreg64.s: Add lcall/ljmp cases.\n+\t* testsuite/gas/i386/noreg64.d: Adjust expectations.\n+\t* testsuite/gas/i386/noreg-intel64.d,\n+\ttestsuite/gas/i386/noreg-intel64.l,\n+\ttestsuite/gas/i386/noreg-intel64.s: New.\n+\t* testsuite/gas/i386/i386.exp: Run new tests.\n+\n 2020-06-09  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (vex_encoding_error): New enumerator."
    },
    {
      "sha": "a5b9061f058e83d17b999eb5bd71671c07eec5f3",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -6836,7 +6836,9 @@ process_suffix (void)\n \tcase CODE_64BIT:\n \t  if (!i.tm.opcode_modifier.no_qsuf)\n \t    {\n-\t      i.suffix = QWORD_MNEM_SUFFIX;\n+\t      if (i.tm.opcode_modifier.jump == JUMP_BYTE\n+\t\t  || i.tm.opcode_modifier.no_lsuf)\n+\t\ti.suffix = QWORD_MNEM_SUFFIX;\n \t      break;\n \t    }\n \t  /* Fall through.  */"
    },
    {
      "sha": "a610a9e96396b6e6e947ef0f04536f5ed6b5b9ba",
      "filename": "gas/testsuite/gas/i386/i386.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/i386.exp?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -759,6 +759,8 @@ if [expr ([istarget \"i*86-*-*\"] || [istarget \"x86_64-*-*\"]) && [gas_64_check]] t\n     run_list_test \"x86-64-sysenter-amd\" \"-mamd64\"\n     run_dump_test \"noreg64\"\n     run_list_test \"noreg64\"\n+    run_dump_test \"noreg-intel64\"\n+    run_list_test \"noreg-intel64\" \"-I${srcdir}/$subdir -mintel64\"\n     run_list_test \"movx64\" \"-al\"\n     run_list_test \"cvtsi2sX\"\n     run_dump_test \"x86-64-sse4_1\""
    },
    {
      "sha": "33d9c5411e321f034fd406a4b687992ee1b825f3",
      "filename": "gas/testsuite/gas/i386/noreg-intel64.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noreg-intel64.d?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -0,0 +1,5 @@\n+#as: -mintel64 -moperand-check=none\n+#objdump: -dw\n+#name: 64-bit insns not sizeable through register operands\n+#source: noreg64.s\n+#dump: noreg64.d"
    },
    {
      "sha": "4bcec14e1a34684c3f0155e8cb8465518690b6f1",
      "filename": "gas/testsuite/gas/i386/noreg-intel64.l",
      "status": "added",
      "additions": 134,
      "deletions": 0,
      "changes": 134,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noreg-intel64.l?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -0,0 +1,134 @@\n+.*: Assembler messages:\n+.*:[1-9][0-9]*: Warning: .* `adc'\n+.*:[1-9][0-9]*: Warning: .* `adc'\n+.*:[1-9][0-9]*: Warning: .* `adc'\n+.*:[1-9][0-9]*: Warning: .* `adc'\n+.*:[1-9][0-9]*: Warning: .* `add'\n+.*:[1-9][0-9]*: Warning: .* `add'\n+.*:[1-9][0-9]*: Warning: .* `add'\n+.*:[1-9][0-9]*: Warning: .* `add'\n+.*:[1-9][0-9]*: Warning: .* `and'\n+.*:[1-9][0-9]*: Warning: .* `and'\n+.*:[1-9][0-9]*: Warning: .* `and'\n+.*:[1-9][0-9]*: Warning: .* `and'\n+.*:[1-9][0-9]*: Warning: .* `bt'\n+.*:[1-9][0-9]*: Warning: .* `btc'\n+.*:[1-9][0-9]*: Warning: .* `btr'\n+.*:[1-9][0-9]*: Warning: .* `bts'\n+.*:[1-9][0-9]*: Warning: .* `cmp'\n+.*:[1-9][0-9]*: Warning: .* `cmp'\n+.*:[1-9][0-9]*: Warning: .* `cmp'\n+.*:[1-9][0-9]*: Warning: .* `cmp'\n+.*:[1-9][0-9]*: Warning: .* `cmps'\n+.*:[1-9][0-9]*: Warning: .* `cmps'\n+.*:[1-9][0-9]*: Warning: .* `crc32'\n+.*:[1-9][0-9]*: Warning: .* `crc32'\n+.*:[1-9][0-9]*: Warning: .* `dec'\n+.*:[1-9][0-9]*: Warning: .* `div'\n+.*:[1-9][0-9]*: Warning: .* `fadd'\n+.*:[1-9][0-9]*: Warning: .* `fcom'\n+.*:[1-9][0-9]*: Warning: .* `fcomp'\n+.*:[1-9][0-9]*: Warning: .* `fdiv'\n+.*:[1-9][0-9]*: Warning: .* `fdivr'\n+.*:[1-9][0-9]*: Warning: .* `fiadd'\n+.*:[1-9][0-9]*: Warning: .* `ficom'\n+.*:[1-9][0-9]*: Warning: .* `ficomp'\n+.*:[1-9][0-9]*: Warning: .* `fidiv'\n+.*:[1-9][0-9]*: Warning: .* `fidivr'\n+.*:[1-9][0-9]*: Warning: .* `fild'\n+.*:[1-9][0-9]*: Warning: .* `fimul'\n+.*:[1-9][0-9]*: Warning: .* `fist'\n+.*:[1-9][0-9]*: Warning: .* `fistp'\n+.*:[1-9][0-9]*: Warning: .* `fisttp'\n+.*:[1-9][0-9]*: Warning: .* `fisub'\n+.*:[1-9][0-9]*: Warning: .* `fisubr'\n+.*:[1-9][0-9]*: Warning: .* `fld'\n+.*:[1-9][0-9]*: Warning: .* `fmul'\n+.*:[1-9][0-9]*: Warning: .* `fst'\n+.*:[1-9][0-9]*: Warning: .* `fstp'\n+.*:[1-9][0-9]*: Warning: .* `fsub'\n+.*:[1-9][0-9]*: Warning: .* `fsubr'\n+.*:[1-9][0-9]*: Warning: .* `idiv'\n+.*:[1-9][0-9]*: Warning: .* `imul'\n+.*:[1-9][0-9]*: Warning: .* `in'\n+.*:[1-9][0-9]*: Warning: .* `in'\n+.*:[1-9][0-9]*: Warning: .* `inc'\n+.*:[1-9][0-9]*: Warning: .* `ins'\n+.*:[1-9][0-9]*: Warning: .* `ins'\n+.*:[1-9][0-9]*: Warning: .* `iret'\n+.*:[1-9][0-9]*: Warning: .* `lcall'\n+.*:[1-9][0-9]*: Warning: .* `ljmp'\n+.*:[1-9][0-9]*: Warning: .* `lods'\n+.*:[1-9][0-9]*: Warning: .* `lods'\n+.*:[1-9][0-9]*: Warning: .* `lret'\n+.*:[1-9][0-9]*: Warning: .* `lret'\n+.*:[1-9][0-9]*: Warning: .* `mov'\n+.*:[1-9][0-9]*: Warning: .* `mov'\n+.*:[1-9][0-9]*: Warning: .* `mov'\n+.*:[1-9][0-9]*: Warning: .* `movs'\n+.*:[1-9][0-9]*: Warning: .* `movs'\n+.*:[1-9][0-9]*: Warning: .* `mul'\n+.*:[1-9][0-9]*: Warning: .* `neg'\n+.*:[1-9][0-9]*: Warning: .* `nop'\n+.*:[1-9][0-9]*: Warning: .* `not'\n+.*:[1-9][0-9]*: Warning: .* `or'\n+.*:[1-9][0-9]*: Warning: .* `or'\n+.*:[1-9][0-9]*: Warning: .* `or'\n+.*:[1-9][0-9]*: Warning: .* `or'\n+.*:[1-9][0-9]*: Warning: .* `out'\n+.*:[1-9][0-9]*: Warning: .* `out'\n+.*:[1-9][0-9]*: Warning: .* `outs'\n+.*:[1-9][0-9]*: Warning: .* `outs'\n+.*:[1-9][0-9]*: Warning: .* `ptwrite'\n+.*:[1-9][0-9]*: Warning: .* `rcl'\n+.*:[1-9][0-9]*: Warning: .* `rcl'\n+.*:[1-9][0-9]*: Warning: .* `rcl'\n+.*:[1-9][0-9]*: Warning: .* `rcl'\n+.*:[1-9][0-9]*: Warning: .* `rcr'\n+.*:[1-9][0-9]*: Warning: .* `rcr'\n+.*:[1-9][0-9]*: Warning: .* `rcr'\n+.*:[1-9][0-9]*: Warning: .* `rcr'\n+.*:[1-9][0-9]*: Warning: .* `rol'\n+.*:[1-9][0-9]*: Warning: .* `rol'\n+.*:[1-9][0-9]*: Warning: .* `rol'\n+.*:[1-9][0-9]*: Warning: .* `rol'\n+.*:[1-9][0-9]*: Warning: .* `ror'\n+.*:[1-9][0-9]*: Warning: .* `ror'\n+.*:[1-9][0-9]*: Warning: .* `ror'\n+.*:[1-9][0-9]*: Warning: .* `ror'\n+.*:[1-9][0-9]*: Warning: .* `sbb'\n+.*:[1-9][0-9]*: Warning: .* `sbb'\n+.*:[1-9][0-9]*: Warning: .* `sbb'\n+.*:[1-9][0-9]*: Warning: .* `sbb'\n+.*:[1-9][0-9]*: Warning: .* `scas'\n+.*:[1-9][0-9]*: Warning: .* `scas'\n+.*:[1-9][0-9]*: Warning: .* `sal'\n+.*:[1-9][0-9]*: Warning: .* `sal'\n+.*:[1-9][0-9]*: Warning: .* `sal'\n+.*:[1-9][0-9]*: Warning: .* `sal'\n+.*:[1-9][0-9]*: Warning: .* `sar'\n+.*:[1-9][0-9]*: Warning: .* `sar'\n+.*:[1-9][0-9]*: Warning: .* `sar'\n+.*:[1-9][0-9]*: Warning: .* `sar'\n+.*:[1-9][0-9]*: Warning: .* `shl'\n+.*:[1-9][0-9]*: Warning: .* `shl'\n+.*:[1-9][0-9]*: Warning: .* `shl'\n+.*:[1-9][0-9]*: Warning: .* `shl'\n+.*:[1-9][0-9]*: Warning: .* `shr'\n+.*:[1-9][0-9]*: Warning: .* `shr'\n+.*:[1-9][0-9]*: Warning: .* `shr'\n+.*:[1-9][0-9]*: Warning: .* `shr'\n+.*:[1-9][0-9]*: Warning: .* `stos'\n+.*:[1-9][0-9]*: Warning: .* `stos'\n+.*:[1-9][0-9]*: Warning: .* `sub'\n+.*:[1-9][0-9]*: Warning: .* `sub'\n+.*:[1-9][0-9]*: Warning: .* `sub'\n+.*:[1-9][0-9]*: Warning: .* `sub'\n+.*:[1-9][0-9]*: Warning: .* `sysret'\n+.*:[1-9][0-9]*: Warning: .* `test'\n+.*:[1-9][0-9]*: Warning: .* `test'\n+.*:[1-9][0-9]*: Warning: .* `test'\n+.*:[1-9][0-9]*: Warning: .* `xor'\n+.*:[1-9][0-9]*: Warning: .* `xor'\n+.*:[1-9][0-9]*: Warning: .* `xor'\n+.*:[1-9][0-9]*: Warning: .* `xor'"
    },
    {
      "sha": "e5487d1853cd0fbbbfc97ff10557877ecfc6db5e",
      "filename": "gas/testsuite/gas/i386/noreg-intel64.s",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg-intel64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noreg-intel64.s?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -0,0 +1 @@\n+\t.include \"noreg64.s\""
    },
    {
      "sha": "fd1193d83607902b77de19170d390f455581ff99",
      "filename": "gas/testsuite/gas/i386/noreg64.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noreg64.d?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -66,8 +66,10 @@ Disassembly of section .text:\n  *[a-f0-9]+:\t6d                   \tinsl   \\(%dx\\),%es:\\(%rdi\\)\n  *[a-f0-9]+:\tcf                   \tiret *\n  *[a-f0-9]+:\tff 20                \tjmpq   \\*\\(%rax\\)\n+ *[a-f0-9]+:\tff 18                \tlcall  \\*\\(%rax\\)\n  *[a-f0-9]+:\t0f 01 10             \tlgdt   \\(%rax\\)\n  *[a-f0-9]+:\t0f 01 18             \tlidt   \\(%rax\\)\n+ *[a-f0-9]+:\tff 28                \tljmp   \\*\\(%rax\\)\n  *[a-f0-9]+:\t0f 00 10             \tlldt   \\(%rax\\)\n  *[a-f0-9]+:\t0f 01 30             \tlmsw   \\(%rax\\)\n  *[a-f0-9]+:\tad                   \tlods   %ds:\\(%rsi\\),%eax"
    },
    {
      "sha": "4a68c4b90dfd3db5be811e4395c484f548a54de6",
      "filename": "gas/testsuite/gas/i386/noreg64.s",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/828c2a2580aa0a505e72cb8307905dd03c55d2a1/gas/testsuite/gas/i386/noreg64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noreg64.s?ref=828c2a2580aa0a505e72cb8307905dd03c55d2a1",
      "patch": "@@ -59,8 +59,10 @@ noreg:\n \tins\t%dx, %es:(%rdi)\n \tiret\n \tjmp\t*(%rax)\n+\tlcall\t*(%rax)\n \tlgdt\t(%rax)\n \tlidt\t(%rax)\n+\tljmp\t*(%rax)\n \tlldt\t(%rax)\n \tlmsw\t(%rax)\n \tlods"
    }
  ]
}