{
  "sha": "fc5e0925d4bff79c8c036cf00803112a1ec04188",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmM1ZTA5MjVkNGJmZjc5YzhjMDM2Y2YwMDgwMzExMmExZWMwNDE4OA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-15T05:06:26Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-15T05:06:54Z"
    },
    "message": "_mul_overflow and get_encoded_value\n\nA sufficiently mad compiler optimiser can take undefined behaviour\naccording to the C standard as an opportunity to remove code.  Since\n\"data + size\" might be seen to be past the end of an array,\ncalculating such an expression is UB.\n\n_mul_overflow is infrastructure for later patches.\n\n\t* bucomm.h (_mul_overflow): Define.\n\t* dwarf.c (get_encoded_value): Avoid pointer UB.",
    "tree": {
      "sha": "d71d622247fdaadaa710ece3fdce8bfb9ffc2289",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d71d622247fdaadaa710ece3fdce8bfb9ffc2289"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fc5e0925d4bff79c8c036cf00803112a1ec04188",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fc5e0925d4bff79c8c036cf00803112a1ec04188",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fc5e0925d4bff79c8c036cf00803112a1ec04188",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fc5e0925d4bff79c8c036cf00803112a1ec04188/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7c96e6120f1b9b5025629bbe995ca55d1be8f36f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7c96e6120f1b9b5025629bbe995ca55d1be8f36f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7c96e6120f1b9b5025629bbe995ca55d1be8f36f"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 14,
    "deletions": 1
  },
  "files": [
    {
      "sha": "74efc3376ebcbcad79b1266c72c2b5487f858c04",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=fc5e0925d4bff79c8c036cf00803112a1ec04188",
      "patch": "@@ -1,3 +1,8 @@\n+2021-05-15  Alan Modra  <amodra@gmail.com>\n+\n+\t* bucomm.h (_mul_overflow): Define.\n+\t* dwarf.c (get_encoded_value): Avoid pointer UB.\n+\n 2021-05-13  Alan Modra  <amodra@gmail.com>\n \n \tPR 27861"
    },
    {
      "sha": "2769c2786717c233c4ccf553aa445d587f188225",
      "filename": "binutils/bucomm.h",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/bucomm.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/bucomm.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/bucomm.h?ref=fc5e0925d4bff79c8c036cf00803112a1ec04188",
      "patch": "@@ -80,4 +80,12 @@ void *xmalloc (size_t);\n \n void *xrealloc (void *, size_t);\n \n+#if __GNUC__ >= 7\n+#define _mul_overflow(a, b, res) __builtin_mul_overflow (a, b, res)\n+#else\n+/* Assumes unsigned values.  Careful!  Args evaluated multiple times.  */\n+#define _mul_overflow(a, b, res) \\\n+  ((*res) = (a), (*res) *= (b), (b) != 0 && (*res) / (b) != (a))\n+#endif\n+\n #endif /* _BUCOMM_H */"
    },
    {
      "sha": "020b7e071ec22f36906a1ad4535c79d343065a40",
      "filename": "binutils/dwarf.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/dwarf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fc5e0925d4bff79c8c036cf00803112a1ec04188/binutils/dwarf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/dwarf.c?ref=fc5e0925d4bff79c8c036cf00803112a1ec04188",
      "patch": "@@ -178,7 +178,7 @@ get_encoded_value (unsigned char **pdata,\n   unsigned int size = size_of_encoded_value (encoding);\n   dwarf_vma val;\n \n-  if (data + size >= end)\n+  if (data >= end || size > (size_t) (end - data))\n     {\n       warn (_(\"Encoded value extends past end of section\\n\"));\n       * pdata = end;"
    }
  ]
}