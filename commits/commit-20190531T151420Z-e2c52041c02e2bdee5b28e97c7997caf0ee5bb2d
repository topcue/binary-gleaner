{
  "sha": "e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTJjNTIwNDFjMDJlMmJkZWU1YjI4ZTk3Yzc5OTdjYWYwZWU1YmIyZA==",
  "commit": {
    "author": {
      "name": "Philippe Waroquiers",
      "email": "philippe.waroquiers@skynet.be",
      "date": "2019-05-04T13:39:27Z"
    },
    "committer": {
      "name": "Philippe Waroquiers",
      "email": "philippe.waroquiers@skynet.be",
      "date": "2019-05-31T15:14:20Z"
    },
    "message": "NEWS and documentation for | (pipe) command.\n\ngdb/ChangeLog\n\t* NEWS: Mention new pipe command and new convenience variables.\n\ngdb/doc/ChangeLog\n\t* gdb.texinfo (Shell Commands): Document pipe command.\n\t(Logging Output): Add a reference to pipe command.\n\t(Convenience Variables): Document $_shell_exitcode and\n\t$_shell_exitstatus.",
    "tree": {
      "sha": "078d55ebb3f66b8e30a170287cc817c1c5807aa5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/078d55ebb3f66b8e30a170287cc817c1c5807aa5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "708dc93ed0c8ee744e2784a1c349d8129a84200f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/708dc93ed0c8ee744e2784a1c349d8129a84200f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/708dc93ed0c8ee744e2784a1c349d8129a84200f"
    }
  ],
  "stats": {
    "total": 102,
    "additions": 102,
    "deletions": 0
  },
  "files": [
    {
      "sha": "6d41fc60cad58ed301bebdf7b9d950ebc0187139",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
      "patch": "@@ -1,3 +1,7 @@\n+2019-05-31  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n+\n+\t* NEWS: Mention new pipe command and new convenience variables.\n+\n 2019-05-31  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n \n \t* cli/cli-cmds.c (pipe_command): New function."
    },
    {
      "sha": "be1ec4eb411c3f73d71741383c7a39b2f54d9af9",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
      "patch": "@@ -27,8 +27,20 @@\n      'array_indexes', 'symbols', 'unions', 'deref_refs', 'actual_objects',\n      'static_members', 'max_elements', 'repeat_threshold', and 'format'.\n \n+* New built-in convenience variables $_shell_exitcode and $_shell_exitsignal\n+  provide the exitcode or exit status of the shell commands launched by\n+  GDB commands such as \"shell\", \"pipe\" and \"make\".\n+\n * New commands\n \n+| [COMMAND] | SHELL_COMMAND\n+| -d DELIM COMMAND DELIM SHELL_COMMAND\n+pipe [COMMAND] | SHELL_COMMAND\n+pipe -d DELIM COMMAND DELIM SHELL_COMMAND\n+  Executes COMMAND and sends its output to SHELL_COMMAND.\n+  With no COMMAND, repeat the last executed command\n+  and send its output to SHELL_COMMAND.\n+\n set may-call-functions [on|off]\n show may-call-functions\n   This controls whether GDB will attempt to call functions in"
    },
    {
      "sha": "00388244fda9300190d66018c60b9c89af087ae5",
      "filename": "gdb/doc/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/doc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/doc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/ChangeLog?ref=e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
      "patch": "@@ -1,3 +1,10 @@\n+2019-05-31  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n+\n+\t* gdb.texinfo (Shell Commands): Document pipe command.\n+\t(Logging Output): Add a reference to pipe command.\n+\t(Convenience Variables): Document $_shell_exitcode and\n+\t$_shell_exitstatus.\n+\n 2019-05-29  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.texinfo (Continuing and Stepping): Document new"
    },
    {
      "sha": "79c22d0774214ee04b2163b2e8ab6eb470181479",
      "filename": "gdb/doc/gdb.texinfo",
      "status": "modified",
      "additions": 79,
      "deletions": 0,
      "changes": 79,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/doc/gdb.texinfo",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d/gdb/doc/gdb.texinfo",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/gdb.texinfo?ref=e2c52041c02e2bdee5b28e97c7997caf0ee5bb2d",
      "patch": "@@ -1454,6 +1454,68 @@ Execute the @code{make} program with the specified\n arguments.  This is equivalent to @samp{shell make @var{make-args}}.\n @end table\n \n+@table @code\n+@kindex pipe\n+@kindex |\n+@cindex send the output of a gdb command to a shell command\n+@anchor{pipe}\n+@item pipe [@var{command}] | @var{shell_command}\n+@itemx | [@var{command}] | @var{shell_command}\n+@itemx pipe -d @var{delim} @var{command} @var{delim} @var{shell_command}\n+@itemx | -d @var{delim} @var{command} @var{delim} @var{shell_command}\n+Executes @var{command} and sends its output to @var{shell_command}.\n+Note that no space is needed around @code{|}.\n+If no @var{command} is provided, the last command executed is repeated.\n+\n+In case the @var{command} contains a @code{|}, the option @code{-d @var{delim}}\n+can be used to specify an alternate delimiter string @var{delim} that separates\n+the @var{command} from the @var{shell_command}.\n+\n+Example:\n+@smallexample\n+@group\n+(gdb) p var\n+$1 = @{\n+  black = 144,\n+  red = 233,\n+  green = 377,\n+  blue = 610,\n+  white = 987\n+@}\n+@end group\n+@group\n+(gdb) pipe p var|wc\n+      7      19      80\n+(gdb) |p var|wc -l\n+7\n+@end group\n+@group\n+(gdb) p /x var\n+$4 = @{\n+  black = 0x90,\n+  red = 0xe9,\n+  green = 0x179,\n+  blue = 0x262,\n+  white = 0x3db\n+@}\n+(gdb) ||grep red\n+  red => 0xe9,\n+@end group\n+@group\n+(gdb) | -d ! echo this contains a | char\\n ! sed -e 's/|/PIPE/'\n+this contains a PIPE char\n+(gdb) | -d xxx echo this contains a | char!\\n xxx sed -e 's/|/PIPE/'\n+this contains a PIPE char!\n+(gdb)\n+@end group\n+@end smallexample\n+@end table\n+\n+The convenience variables @code{$_shell_exitcode} and @code{$_shell_exitsignal}\n+can be used to examine the exit status of the last shell command launched\n+by @code{shell}, @code{make}, @code{pipe} and @code{|}.\n+@xref{Convenience Vars,, Convenience Variables}.\n+\n @node Logging Output\n @section Logging Output\n @cindex logging @value{GDBN} output\n@@ -1485,6 +1547,8 @@ Set @code{debugredirect} if you want debug output to go only to the log file.\n Show the current values of the logging settings.\n @end table\n \n+You can also redirect the output of a @value{GDBN} command to a\n+shell command.  @xref{pipe}.\n @node Commands\n @chapter @value{GDBN} Commands\n \n@@ -11304,6 +11368,21 @@ the value 12 for @code{$_gdb_minor}.  These variables allow you to\n write scripts that work with different versions of @value{GDBN}\n without errors caused by features unavailable in some of those\n versions.\n+\n+@item $_shell_exitcode\n+@itemx $_shell_exitsignal\n+@vindex $_shell_exitcode@r{, convenience variable}\n+@vindex $_shell_exitsignal@r{, convenience variable}\n+@cindex shell command, exit code\n+@cindex shell command, exit signal\n+@cindex exit status of shell commands\n+@value{GDBN} commands such as @code{shell} and @code{|} are launching\n+shell commands.  When a launched command terminates, @value{GDBN}\n+automatically maintains the variables @code{$_shell_exitcode}\n+and @code{$_shell_exitsignal} according to the exit status of the last\n+launched command.  These variables are set and used similarly to\n+the variables @code{$_exitcode} and @code{$_exitsignal}.\n+\n @end table\n \n @node Convenience Funs"
    }
  ]
}