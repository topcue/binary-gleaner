{
  "sha": "14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
  "node_id": "C_kwDOANOeidoAKDE0YWE0ZWU0NDBmODVhMGU0ZDg2YjdhZGI1MGM5M2JiZjBiN2ZjNWI",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-12-13T20:09:39Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-12-13T20:13:34Z"
    },
    "message": "x86: Adjust linker tests for --disable-separate-code\n\nAdjust linker tests for linker configured with --disable-separate-code:\n\n1. Update expected outputs.\n2. Pass -z max-page-size=0x1000 -z separate-code\" to linker.\n\n\t* testsuite/ld-i386/report-reloc-1.l: Updated.\n\t* testsuite/ld-x86-64/report-reloc-1.l: Likewise.\n\t* testsuite/ld-x86-64/pe-x86-64.exp: Pass\n\t\"-z max-page-size=0x1000 -z separate-code\" to linker.\n\t* testsuite/ld-x86-64/pr19609-4e.d: Likewise.\n\t* testsuite/ld-x86-64/pr19609-6a.d: Likewise.\n\t* testsuite/ld-x86-64/pr19609-6b.d: Likewise.\n\t* testsuite/ld-x86-64/pr19609-7b.d: Likewise.\n\t* testsuite/ld-x86-64/pr19609-7d.d: Likewise.",
    "tree": {
      "sha": "bdacc899d360e4ac32cf5d54dd5413dceebbaf7b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bdacc899d360e4ac32cf5d54dd5413dceebbaf7b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "408db576c98b232de0b1a1ee3495bad0d1c704cf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/408db576c98b232de0b1a1ee3495bad0d1c704cf",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/408db576c98b232de0b1a1ee3495bad0d1c704cf"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 15,
    "deletions": 15
  },
  "files": [
    {
      "sha": "d141e06e08dd1fd3680f6995879b64b1f24b3c16",
      "filename": "ld/testsuite/ld-i386/report-reloc-1.l",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-i386/report-reloc-1.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-i386/report-reloc-1.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-i386/report-reloc-1.l?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,2 +1,2 @@\n-tmpdir/dump: R_386_IRELATIVE \\(offset: 0x0+2000, info: 0x0+2a\\) against 'ifunc' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n-tmpdir/dump: R_386_RELATIVE \\(offset: 0x0+2004, info: 0x0+8\\) against '_start' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n+tmpdir/dump: R_386_IRELATIVE \\(offset: 0x[0-9a-f]+, info: 0x0+2a\\) against 'ifunc' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n+tmpdir/dump: R_386_RELATIVE \\(offset: 0x[0-9a-f]+, info: 0x0+8\\) against '_start' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o"
    },
    {
      "sha": "473405660020206e6d77c6e3b2ca4342ae226e38",
      "filename": "ld/testsuite/ld-x86-64/pe-x86-64.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pe-x86-64.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pe-x86-64.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pe-x86-64.exp?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -27,7 +27,7 @@ if {![istarget \"x86_64-*-linux*\"] } {\n run_ld_link_tests [list \\\n     [list \\\n \t\"Build pe-x86-64-1\" \\\n-\t\"-m elf_x86_64 --entry=begin\" \\\n+\t\"-m elf_x86_64 --entry=begin -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-1a.obj.bz2 pe-x86-64-1b.obj.bz2 pe-x86-64-1c.obj.bz2} \\\n@@ -36,7 +36,7 @@ run_ld_link_tests [list \\\n     ] \\\n     [list \\\n \t\"Build pe-x86-64-2\" \\\n-\t\"-m elf_x86_64 --entry=begin\" \\\n+\t\"-m elf_x86_64 --entry=begin -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-2a.obj.bz2 pe-x86-64-2b.obj.bz2 pe-x86-64-2c.obj.bz2} \\\n@@ -45,7 +45,7 @@ run_ld_link_tests [list \\\n     ] \\\n     [list \\\n \t\"Build pe-x86-64-3\" \\\n-\t\"-m elf_x86_64 --entry=begin\" \\\n+\t\"-m elf_x86_64 --entry=begin -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-3a.obj.bz2 pe-x86-64-3b.obj.bz2 pe-x86-64-3c.obj.bz2 \\\n@@ -55,7 +55,7 @@ run_ld_link_tests [list \\\n     ] \\\n     [list \\\n \t\"Build pe-x86-64-4\" \\\n-\t\"-m elf_x86_64 --entry=begin\" \\\n+\t\"-m elf_x86_64 --entry=begin -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-4a.obj.bz2 pe-x86-64-4b.obj.bz2 pe-x86-64-4c.obj.bz2 \\\n@@ -65,7 +65,7 @@ run_ld_link_tests [list \\\n     ] \\\n     [list \\\n \t\"Build pe-x86-64-5\" \\\n-\t\"-m elf_x86_64 --entry=begin\" \\\n+\t\"-m elf_x86_64 --entry=begin -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-5.obj.bz2 } \\\n@@ -75,7 +75,7 @@ run_ld_link_tests [list \\\n     ] \\\n     [list \\\n \t\"Build pe-x86-64-6\" \\\n-\t\"-m elf_x86_64 --entry=main\" \\\n+\t\"-m elf_x86_64 --entry=main -z max-page-size=0x1000 -z separate-code\" \\\n \t\"\" \\\n \t\"\" \\\n \t{pe-x86-64-6.obj.bz2 } \\"
    },
    {
      "sha": "ed6e6e0bccab0d4f0e22f0d0a1b2702a35813579",
      "filename": "ld/testsuite/ld-x86-64/pr19609-4e.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-4e.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-4e.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr19609-4e.d?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,6 +1,6 @@\n #source: pr19609-4.s\n #as: --64 -mrelax-relocations=yes\n-#ld: -melf_x86_64 -Ttext=0x70000000 -Tdata=0xa0000000 --no-relax\n+#ld: -melf_x86_64 -Ttext=0x70000000 -Tdata=0xa0000000 --no-relax -z max-page-size=0x1000 -z separate-code\n #objdump: -dw\n \n .*: +file format .*"
    },
    {
      "sha": "3bad8b55fd615d7f31824c1da2a0a71bfe12f9c8",
      "filename": "ld/testsuite/ld-x86-64/pr19609-6a.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-6a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-6a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr19609-6a.d?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,6 +1,6 @@\n #source: pr19609-6.s\n #as: --64 -mrelax-relocations=yes\n-#ld: -melf_x86_64 --defsym foobar=0x80000000\n+#ld: -melf_x86_64 --defsym foobar=0x80000000 -z max-page-size=0x1000 -z separate-code\n #objdump: -dw\n \n .*: +file format .*"
    },
    {
      "sha": "2723fb1b98036603c9544b1d3df72ffe0a36234c",
      "filename": "ld/testsuite/ld-x86-64/pr19609-6b.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-6b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-6b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr19609-6b.d?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,6 +1,6 @@\n #source: pr19609-6.s\n #as: --64 -mrelax-relocations=yes\n-#ld: -melf_x86_64 --defsym foobar=0x80000000 --no-relax\n+#ld: -melf_x86_64 --defsym foobar=0x80000000 --no-relax -z max-page-size=0x1000 -z separate-code\n #objdump: -dw\n \n .*: +file format .*"
    },
    {
      "sha": "48d0b01616dae2be6896a09b567b58eab154f1f0",
      "filename": "ld/testsuite/ld-x86-64/pr19609-7b.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-7b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-7b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr19609-7b.d?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,6 +1,6 @@\n #source: pr19609-7.s\n #as: --64 -mrelax-relocations=yes\n-#ld: -melf_x86_64 -Ttext=0x80000000 --no-relax\n+#ld: -melf_x86_64 -Ttext=0x80000000 --no-relax -z max-page-size=0x1000 -z separate-code\n #objdump: -dw\n \n .*: +file format .*"
    },
    {
      "sha": "6e2882af3c9fbdb787c714eac360cf852b2ad69a",
      "filename": "ld/testsuite/ld-x86-64/pr19609-7d.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-7d.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/pr19609-7d.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr19609-7d.d?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,6 +1,6 @@\n #source: pr19609-7.s\n #as: --x32 -mrelax-relocations=yes\n-#ld: -melf32_x86_64 -Ttext=0x80000000 --no-relax\n+#ld: -melf32_x86_64 -Ttext=0x80000000 --no-relax -z max-page-size=0x1000 -z separate-code\n #objdump: -dw\n \n .*: +file format .*"
    },
    {
      "sha": "21e9b1ee87092c2af4bcadcbba34de7a9a2e7035",
      "filename": "ld/testsuite/ld-x86-64/report-reloc-1.l",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/report-reloc-1.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b/ld/testsuite/ld-x86-64/report-reloc-1.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/report-reloc-1.l?ref=14aa4ee440f85a0e4d86b7adb50c93bbf0b7fc5b",
      "patch": "@@ -1,2 +1,2 @@\n-tmpdir/dump: R_X86_64_IRELATIVE \\(offset: 0x0+2000, info: 0x0+25, addend: 0x0+1007\\) against 'ifunc' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n-tmpdir/dump: R_X86_64_RELATIVE \\(offset: 0x0+2008, info: 0x0+8, addend: 0x0+1000\\) against '_start' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n+tmpdir/dump: R_X86_64_IRELATIVE \\(offset: 0x[0-9a-f]+, info: 0x0+25, addend: 0x[0-9a-f]+\\) against 'ifunc' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o\n+tmpdir/dump: R_X86_64_RELATIVE \\(offset: 0x[0-9a-f]+, info: 0x0+8, addend: 0x[0-9a-f]+\\) against '_start' for section '.data.rel.ro.local' in tmpdir/report-reloc-1.o"
    }
  ]
}