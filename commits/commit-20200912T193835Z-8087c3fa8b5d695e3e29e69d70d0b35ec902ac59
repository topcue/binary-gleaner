{
  "sha": "8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODA4N2MzZmE4YjVkNjk1ZTNlMjllNjlkNzBkMGIzNWVjOTAyYWM1OQ==",
  "commit": {
    "author": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-09-12T19:30:56Z"
    },
    "committer": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-09-12T19:38:35Z"
    },
    "message": "Fix GDB build in infrun.c when configured with unit tests disabled\n\nI noticed this while testing the GDB in the context of the upcoming\nGDB 10 release branching, because part of the process involves setting\ndevelopment to False, which in turn changes the default for including\nunittest to false as well. As a result, without this patch, we get\ncompilation errors in infrun.c such as:\n\n    infrun.c:9219:5: error: `scoped_mock_context' was not declared in this scope\n\nThis patch fixes it by bracketing the unitttest in namespace selftest\nwith an #if GDB_SELF_TEST.\n\ngdb/ChangeLog:\n\n        * infrun.c (namespace selftests): Only define #if GDB_SELF_TEST.\n\nTested on x86_64-linux, with and without self-tests.",
    "tree": {
      "sha": "99a434d77dfef3cb3f881e41ec35b974c869a68f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/99a434d77dfef3cb3f881e41ec35b974c869a68f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59/comments",
  "author": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "496afd17055aeb7d8f45e01715c475664f2b73bd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/496afd17055aeb7d8f45e01715c475664f2b73bd",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/496afd17055aeb7d8f45e01715c475664f2b73bd"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 7,
    "deletions": 0
  },
  "files": [
    {
      "sha": "ec0ed5f1b2341deffd03efdab6d64e4e1754c95b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
      "patch": "@@ -1,3 +1,7 @@\n+2020-09-12  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* infrun.c (namespace selftests): Only define #if GDB_SELF_TEST.\n+\n 2020-09-11  Moritz Riesterer  <moritz.riesterer@intel.com>\n \t    Felix Willgerodt  <Felix.Willgerodt@intel.com>\n "
    },
    {
      "sha": "5773fd0395153f183cecf2c197930802351e6890",
      "filename": "gdb/infrun.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59/gdb/infrun.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8087c3fa8b5d695e3e29e69d70d0b35ec902ac59/gdb/infrun.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/infrun.c?ref=8087c3fa8b5d695e3e29e69d70d0b35ec902ac59",
      "patch": "@@ -9200,6 +9200,7 @@ infrun_async_inferior_event_handler (gdb_client_data data)\n   inferior_event_handler (INF_REG_EVENT);\n }\n \n+#if GDB_SELF_TEST\n namespace selftests\n {\n \n@@ -9264,6 +9265,8 @@ infrun_thread_ptid_changed ()\n \n } /* namespace selftests */\n \n+#endif /* GDB_SELF_TEST */\n+\n void _initialize_infrun ();\n void\n _initialize_infrun ()"
    }
  ]
}