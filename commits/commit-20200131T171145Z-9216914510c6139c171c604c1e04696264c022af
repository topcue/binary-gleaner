{
  "sha": "9216914510c6139c171c604c1e04696264c022af",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTIxNjkxNDUxMGM2MTM5YzE3MWM2MDRjMWUwNDY5NjI2NGMwMjJhZg==",
  "commit": {
    "author": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2020-01-31T17:09:27Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2020-01-31T17:11:45Z"
    },
    "message": "arm: PR gas/25472 Enable DSP instructions with +mve\n\nWe noticed +mve was not enabling DSP instructions as it should, reported in PR\n25472.\nThe MVE architecture extension for Armv8.1-M Mainline implies DSP extensions.\nThis patch reflects that in the '+mve' command line option.\n\ngas/ChangeLog:\n2020-01-31  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\tPR gas/25472\n\t* config/tc-arm.c (armv8m_main_ext_table): Refactored +dsp adding.\n\t(armv8_1m_main_ext_table): Refactored +dsp adding and enabled dsp for\n\t+mve.\n\t* testsuite/gas/arm/mve_dsp.d: New test.",
    "tree": {
      "sha": "76cbb478962b3eb6b1b3efda84d75d50dee3fddb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/76cbb478962b3eb6b1b3efda84d75d50dee3fddb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9216914510c6139c171c604c1e04696264c022af",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9216914510c6139c171c604c1e04696264c022af",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9216914510c6139c171c604c1e04696264c022af",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9216914510c6139c171c604c1e04696264c022af/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d26cc8a9d6ae9b0ffdb372bd65526cc3137747e5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d26cc8a9d6ae9b0ffdb372bd65526cc3137747e5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d26cc8a9d6ae9b0ffdb372bd65526cc3137747e5"
    }
  ],
  "stats": {
    "total": 154,
    "additions": 148,
    "deletions": 6
  },
  "files": [
    {
      "sha": "bb0b03e35ea912521924ec145e32de88f2e76221",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9216914510c6139c171c604c1e04696264c022af/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9216914510c6139c171c604c1e04696264c022af/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=9216914510c6139c171c604c1e04696264c022af",
      "patch": "@@ -31282,28 +31282,30 @@ static const struct arm_ext_table armv86a_ext_table[] =\n \n static const struct arm_ext_table armv8m_main_ext_table[] =\n {\n-  ARM_EXT (\"dsp\", ARM_FEATURE_CORE_LOW (ARM_EXT_V5ExP | ARM_EXT_V6_DSP),\n-\t\t  ARM_FEATURE_CORE_LOW (ARM_EXT_V5ExP | ARM_EXT_V6_DSP)),\n+  ARM_EXT (\"dsp\", ARM_FEATURE_CORE_LOW (ARM_AEXT_V8M_MAIN_DSP),\n+\t\t  ARM_FEATURE_CORE_LOW (ARM_AEXT_V8M_MAIN_DSP)),\n   ARM_EXT (\"fp\", FPU_ARCH_VFP_V5_SP_D16, ALL_FP),\n   ARM_ADD (\"fp.dp\", FPU_ARCH_VFP_V5D16),\n   { NULL, 0, ARM_ARCH_NONE, ARM_ARCH_NONE }\n };\n \n+\n static const struct arm_ext_table armv8_1m_main_ext_table[] =\n {\n-  ARM_EXT (\"dsp\", ARM_FEATURE_CORE_LOW (ARM_EXT_V5ExP | ARM_EXT_V6_DSP),\n-\t\t  ARM_FEATURE_CORE_LOW (ARM_EXT_V5ExP | ARM_EXT_V6_DSP)),\n+  ARM_EXT (\"dsp\", ARM_FEATURE_CORE_LOW (ARM_AEXT_V8M_MAIN_DSP),\n+\t\t  ARM_FEATURE_CORE_LOW (ARM_AEXT_V8M_MAIN_DSP)),\n   ARM_EXT (\"fp\",\n \t   ARM_FEATURE (0, ARM_EXT2_FP16_INST,\n \t\t\tFPU_VFP_V5_SP_D16 | FPU_VFP_EXT_FP16 | FPU_VFP_EXT_FMA),\n \t   ALL_FP),\n   ARM_ADD (\"fp.dp\",\n \t   ARM_FEATURE (0, ARM_EXT2_FP16_INST,\n \t\t\tFPU_VFP_V5D16 | FPU_VFP_EXT_FP16 | FPU_VFP_EXT_FMA)),\n-  ARM_EXT (\"mve\", ARM_FEATURE_CORE_HIGH (ARM_EXT2_MVE),\n+  ARM_EXT (\"mve\", ARM_FEATURE (ARM_AEXT_V8M_MAIN_DSP, ARM_EXT2_MVE, 0),\n \t   ARM_FEATURE_CORE_HIGH (ARM_EXT2_MVE | ARM_EXT2_MVE_FP)),\n   ARM_ADD (\"mve.fp\",\n-\t   ARM_FEATURE (0, ARM_EXT2_FP16_INST | ARM_EXT2_MVE | ARM_EXT2_MVE_FP,\n+\t   ARM_FEATURE (ARM_AEXT_V8M_MAIN_DSP,\n+\t\t\tARM_EXT2_FP16_INST | ARM_EXT2_MVE | ARM_EXT2_MVE_FP,\n \t\t\tFPU_VFP_V5_SP_D16 | FPU_VFP_EXT_FP16 | FPU_VFP_EXT_FMA)),\n   { NULL, 0, ARM_ARCH_NONE, ARM_ARCH_NONE }\n };"
    },
    {
      "sha": "d76c8b2c998e7a80ba19ce6f490ea1816924d868",
      "filename": "gas/testsuite/gas/arm/mve_dsp.d",
      "status": "added",
      "additions": 140,
      "deletions": 0,
      "changes": 140,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9216914510c6139c171c604c1e04696264c022af/gas/testsuite/gas/arm/mve_dsp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9216914510c6139c171c604c1e04696264c022af/gas/testsuite/gas/arm/mve_dsp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve_dsp.d?ref=9216914510c6139c171c604c1e04696264c022af",
      "patch": "@@ -0,0 +1,140 @@\n+# name: 32-bit Thumb DSP instructions (enabled by +mve)\n+# as: -march=armv8.1-m.main+mve\n+# source: arch7em.s\n+# objdump: -dr --prefix-addresses --show-raw-insn\n+\n+.*: +file format .*arm.*\n+\n+Disassembly of section .text:\n+0[0-9a-f]+ <[^>]+> eac0 0000 \tpkhbt\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> eac0 0900 \tpkhbt\tr9, r0, r0\n+0[0-9a-f]+ <[^>]+> eac9 0000 \tpkhbt\tr0, r9, r0\n+0[0-9a-f]+ <[^>]+> eac0 0009 \tpkhbt\tr0, r0, r9\n+0[0-9a-f]+ <[^>]+> eac0 5000 \tpkhbt\tr0, r0, r0, lsl #20\n+0[0-9a-f]+ <[^>]+> eac0 00c0 \tpkhbt\tr0, r0, r0, lsl #3\n+0[0-9a-f]+ <[^>]+> eac3 0102 \tpkhbt\tr1, r3, r2\n+0[0-9a-f]+ <[^>]+> eac2 4163 \tpkhtb\tr1, r2, r3, asr #17\n+0[0-9a-f]+ <[^>]+> fa83 f182 \tqadd\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f113 \tqadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f113 \tqadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f113 \tqasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f113 \tqasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa83 f192 \tqdadd\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa83 f1b2 \tqdsub\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa83 f1a2 \tqsub\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f113 \tqsub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f113 \tqsub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f113 \tqsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f113 \tqsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f103 \tsadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f103 \tsadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f103 \tsasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f103 \tsasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f103 \tssub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f103 \tssub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f103 \tssax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f103 \tssax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f123 \tshadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f123 \tshadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f123 \tshasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f123 \tshasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f123 \tshsub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f123 \tshsub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f123 \tshsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f123 \tshsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f143 \tuadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f143 \tuadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f143 \tuasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f143 \tuasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f143 \tusub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f143 \tusub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f143 \tusax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f143 \tusax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f163 \tuhadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f163 \tuhadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f163 \tuhasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f163 \tuhasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f163 \tuhsub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f163 \tuhsub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f163 \tuhsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f163 \tuhsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa92 f153 \tuqadd16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa82 f153 \tuqadd8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f153 \tuqasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f153 \tuqasx\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fad2 f153 \tuqsub16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fac2 f153 \tuqsub8\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f153 \tuqsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fae2 f153 \tuqsax\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> faa2 f183 \tsel\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fb10 0000 \tsmlabb\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 0900 \tsmlabb\tr9, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb19 0000 \tsmlabb\tr0, r9, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 0009 \tsmlabb\tr0, r0, r9, r0\n+0[0-9a-f]+ <[^>]+> fb10 9000 \tsmlabb\tr0, r0, r0, r9\n+0[0-9a-f]+ <[^>]+> fb10 0020 \tsmlatb\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 0010 \tsmlabt\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 0030 \tsmlatt\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb30 0000 \tsmlawb\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb30 0010 \tsmlawt\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb20 0000 \tsmlad\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb20 0010 \tsmladx\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb40 0000 \tsmlsd\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb40 0010 \tsmlsdx\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb50 0000 \tsmmla\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb50 0010 \tsmmlar\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb60 0000 \tsmmls\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb60 0010 \tsmmlsr\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb70 0000 \tusada8\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 0080 \tsmlalbb\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 9080 \tsmlalbb\tr9, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 0980 \tsmlalbb\tr0, r9, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc9 0080 \tsmlalbb\tr0, r0, r9, r0\n+0[0-9a-f]+ <[^>]+> fbc0 0089 \tsmlalbb\tr0, r0, r0, r9\n+0[0-9a-f]+ <[^>]+> fbc0 00a0 \tsmlaltb\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 0090 \tsmlalbt\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 00b0 \tsmlaltt\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 00c0 \tsmlald\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbc0 00d0 \tsmlaldx\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbd0 00c0 \tsmlsld\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbd0 00d0 \tsmlsldx\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fbe0 0060 \tumaal\tr0, r0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 f000 \tsmulbb\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 f900 \tsmulbb\tr9, r0, r0\n+0[0-9a-f]+ <[^>]+> fb19 f000 \tsmulbb\tr0, r9, r0\n+0[0-9a-f]+ <[^>]+> fb10 f009 \tsmulbb\tr0, r0, r9\n+0[0-9a-f]+ <[^>]+> fb10 f020 \tsmultb\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 f010 \tsmulbt\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb10 f030 \tsmultt\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb30 f000 \tsmulwb\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb30 f010 \tsmulwt\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb50 f000 \tsmmul\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb50 f010 \tsmmulr\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb20 f000 \tsmuad\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb20 f010 \tsmuadx\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb40 f000 \tsmusd\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb40 f010 \tsmusdx\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fb70 f000 \tusad8\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> f320 0000 \tssat16\tr0, #1, r0\n+0[0-9a-f]+ <[^>]+> f320 0900 \tssat16\tr9, #1, r0\n+0[0-9a-f]+ <[^>]+> f320 0009 \tssat16\tr0, #10, r0\n+0[0-9a-f]+ <[^>]+> f329 0000 \tssat16\tr0, #1, r9\n+0[0-9a-f]+ <[^>]+> f3a0 0000 \tusat16\tr0, #0, r0\n+0[0-9a-f]+ <[^>]+> f3a0 0900 \tusat16\tr9, #0, r0\n+0[0-9a-f]+ <[^>]+> f3a0 0009 \tusat16\tr0, #9, r0\n+0[0-9a-f]+ <[^>]+> f3a9 0000 \tusat16\tr0, #0, r9\n+0[0-9a-f]+ <[^>]+> fa2f f182 \tsxtb16\tr1, r2\n+0[0-9a-f]+ <[^>]+> fa2f f889 \tsxtb16\tr8, r9\n+0[0-9a-f]+ <[^>]+> fa3f f182 \tuxtb16\tr1, r2\n+0[0-9a-f]+ <[^>]+> fa3f f889 \tuxtb16\tr8, r9\n+0[0-9a-f]+ <[^>]+> fa40 f080 \tsxtab\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fa40 f080 \tsxtab\tr0, r0, r0\n+0[0-9a-f]+ <[^>]+> fa40 f990 \tsxtab\tr9, r0, r0, ror #8\n+0[0-9a-f]+ <[^>]+> fa49 f0a0 \tsxtab\tr0, r9, r0, ror #16\n+0[0-9a-f]+ <[^>]+> fa40 f0b9 \tsxtab\tr0, r0, r9, ror #24\n+0[0-9a-f]+ <[^>]+> fa22 f183 \tsxtab16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa02 f183 \tsxtah\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa52 f183 \tuxtab\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa32 f183 \tuxtab16\tr1, r2, r3\n+0[0-9a-f]+ <[^>]+> fa12 f183 \tuxtah\tr1, r2, r3\n+"
    }
  ]
}