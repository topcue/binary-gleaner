{
  "sha": "ea946b861c8da0afc44518cf94ae5998b789e571",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWE5NDZiODYxYzhkYTBhZmM0NDUxOGNmOTRhZTU5OThiNzg5ZTU3MQ==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-08-05T21:38:28Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-08-05T21:38:28Z"
    },
    "message": "gdb/testsuite: link some dwarf2 tests with nopie\n\nI noticed some gdb.dwarf2 tests not running on my machine because of\nthis:\n\n    Running /home/simark/src/binutils-gdb/gdb/testsuite/gdb.dwarf2/dw2-single-line-discriminators.exp ...\n    gdb compile failed, /usr/bin/ld: /home/simark/build/binutils-gdb/gdb/testsuite/outputs/gdb.dwarf2/dw2-single-line-discriminators/dw2-single-line-discriminators0.o: relocation R_X86_64_32S against\n     symbol `x' can not be used when making a PIE object; recompile with -fPIE\n    collect2: error: ld returned 1 exit status\n\nWe get this when the target toolchain produces position-independent\nexecutables by default.  These tests are built from some assembly which\nproduces some relocations incompatible with position-independent\nexecutables.\n\nAdd `nopie` to the compilation flags of these tests to force the\ntoolchain to produce non-position-independent executables.  With this,\nthe changed tests run successfully on my machine.\n\ngdb/ChangeLog:\n\n\t* gdb.dwarf2/clztest.exp, gdb.dwarf2/dw2-common-block.exp,\n\tgdb.dwarf2/dw2-dup-frame.exp, gdb.dwarf2/dw2-reg-undefined.exp,\n\tgdb.dwarf2/dw2-single-line-discriminators.exp,\n\tdw2-undefined-ret-addr.exp: Pass nopie to compilation options.\n\nChange-Id: Ie06c946f8e56a6030be247d1c57f416fa8b67e4c",
    "tree": {
      "sha": "13423d22b7ba39db6bcd2a308d52c68491587292",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/13423d22b7ba39db6bcd2a308d52c68491587292"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ea946b861c8da0afc44518cf94ae5998b789e571",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ea946b861c8da0afc44518cf94ae5998b789e571",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ea946b861c8da0afc44518cf94ae5998b789e571",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ea946b861c8da0afc44518cf94ae5998b789e571/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "57d02173a25465a5400fad3764568cefb8eae9ab",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/57d02173a25465a5400fad3764568cefb8eae9ab",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/57d02173a25465a5400fad3764568cefb8eae9ab"
    }
  ],
  "stats": {
    "total": 20,
    "additions": 14,
    "deletions": 6
  },
  "files": [
    {
      "sha": "1d510321d3b2e896eed82ac32ffcfabdaacf1c34",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -1,3 +1,10 @@\n+2020-08-05  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* gdb.dwarf2/clztest.exp, gdb.dwarf2/dw2-common-block.exp,\n+\tgdb.dwarf2/dw2-dup-frame.exp, gdb.dwarf2/dw2-reg-undefined.exp,\n+\tgdb.dwarf2/dw2-single-line-discriminators.exp,\n+\tdw2-undefined-ret-addr.exp: Pass nopie to compilation options.\n+\n 2020-08-05  Tom Tromey  <tromey@adacore.com>\n \n \tPR rust/26197:"
    },
    {
      "sha": "95c326660f5266b4012d7f9344a4155e6621f3a1",
      "filename": "gdb/testsuite/gdb.dwarf2/clztest.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/clztest.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/clztest.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/clztest.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -28,7 +28,8 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n     return 0\n }\n \n-if { [prepare_for_testing \"failed to prepare\" \"${test}\" ${test}.S {nodebug additional_flags=-nostdlib}] } {\n+if { [prepare_for_testing \"failed to prepare\" \"${test}\" ${test}.S \\\n+      {nodebug nopie additional_flags=-nostdlib}] } {\n     return -1\n }\n "
    },
    {
      "sha": "6a10ced6cacd7995f459da1a4f92a03646a2d533",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-common-block.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-common-block.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-common-block.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-common-block.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -33,7 +33,7 @@ if {[skip_fortran_tests]} {\n standard_testfile .S\n \n if { [prepare_for_testing \"failed to prepare\" \"${testfile}\" $srcfile \\\n-\t  {nodebug f90}] } {\n+      {nodebug nopie f90}] } {\n     return -1\n }\n "
    },
    {
      "sha": "b6151084f208bad86593a198ed12562edc72afe3",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-dup-frame.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-dup-frame.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-dup-frame.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-dup-frame.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -26,7 +26,7 @@ if {![istarget \"x86_64-*-*\"] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n-if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {nodebug}] } {\n+if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {nodebug nopie}] } {\n     return -1\n }\n "
    },
    {
      "sha": "29564face30b6fe97042b6722d203250578755c9",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-reg-undefined.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-reg-undefined.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-reg-undefined.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-reg-undefined.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -26,7 +26,7 @@ if {![istarget \"x86_64-*-*\"] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n-if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {nodebug}] } {\n+if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {nodebug nopie}] } {\n     return -1\n }\n "
    },
    {
      "sha": "9803ef829a84b415efdb61fffee768177a0789d7",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-single-line-discriminators.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-single-line-discriminators.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-single-line-discriminators.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-single-line-discriminators.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -31,7 +31,7 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n standard_testfile .S\n set csrcfile ${testfile}.c\n \n-if { [prepare_for_testing \"failed to prepare\" \"${testfile}\" $srcfile {nodebug}] } {\n+if { [prepare_for_testing \"failed to prepare\" \"${testfile}\" $srcfile {nodebug nopie}] } {\n     return -1\n }\n "
    },
    {
      "sha": "668ecfc9ab7fa5d4069b072ec20ce85506303020",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-undefined-ret-addr.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-undefined-ret-addr.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea946b861c8da0afc44518cf94ae5998b789e571/gdb/testsuite/gdb.dwarf2/dw2-undefined-ret-addr.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-undefined-ret-addr.exp?ref=ea946b861c8da0afc44518cf94ae5998b789e571",
      "patch": "@@ -26,7 +26,7 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n     return 0\n }\n \n-if {[prepare_for_testing \"failed to prepare\" \"$testfile\" $srcfile {nodebug}]} {\n+if {[prepare_for_testing \"failed to prepare\" \"$testfile\" $srcfile {nodebug nopie}]} {\n     return -1\n }\n "
    }
  ]
}