{
  "sha": "b627f56244cb2930c5891cfde03586987d46b5d2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjYyN2Y1NjI0NGNiMjkzMGM1ODkxY2ZkZTAzNTg2OTg3ZDQ2YjVkMg==",
  "commit": {
    "author": {
      "name": "Szabolcs Nagy",
      "email": "szabolcs.nagy@arm.com",
      "date": "2019-10-03T18:11:50Z"
    },
    "committer": {
      "name": "Szabolcs Nagy",
      "email": "szabolcs.nagy@arm.com",
      "date": "2019-10-04T09:54:16Z"
    },
    "message": "[PR ld/25062] arm: sign extend the addend of R_ARM_TLS_GOTDESC\n\nOn 64-bit host the 32-bit addend was loaded without sign extension into\nan unsigned long.\n\nbfd/ChangeLog:\n\n\tPR ld/25062\n\t* elf32-arm.c (elf32_arm_final_link_relocate): Sign extend data.\n\nld/ChangeLog:\n\n\tPR ld/25062\n\t* testsuite/ld-arm/arm-elf.exp: Update.\n\t* testsuite/ld-arm/tls-gdesc-neg.d: New test.\n\t* testsuite/ld-arm/tls-gdesc-neg.s: New test.",
    "tree": {
      "sha": "bcf98c81badd1d49b135cd58671732a9589a8b9a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bcf98c81badd1d49b135cd58671732a9589a8b9a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b627f56244cb2930c5891cfde03586987d46b5d2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b627f56244cb2930c5891cfde03586987d46b5d2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b627f56244cb2930c5891cfde03586987d46b5d2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b627f56244cb2930c5891cfde03586987d46b5d2/comments",
  "author": {
    "login": "nsz-arm",
    "id": 30925343,
    "node_id": "MDQ6VXNlcjMwOTI1MzQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nsz-arm",
    "html_url": "https://github.com/nsz-arm",
    "followers_url": "https://api.github.com/users/nsz-arm/followers",
    "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/nsz-arm/orgs",
    "repos_url": "https://api.github.com/users/nsz-arm/repos",
    "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nsz-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nsz-arm",
    "id": 30925343,
    "node_id": "MDQ6VXNlcjMwOTI1MzQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nsz-arm",
    "html_url": "https://github.com/nsz-arm",
    "followers_url": "https://api.github.com/users/nsz-arm/followers",
    "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/nsz-arm/orgs",
    "repos_url": "https://api.github.com/users/nsz-arm/repos",
    "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nsz-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "77c2dba3e843694fae090e237ccdf1b8f65b94e6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/77c2dba3e843694fae090e237ccdf1b8f65b94e6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/77c2dba3e843694fae090e237ccdf1b8f65b94e6"
    }
  ],
  "stats": {
    "total": 89,
    "additions": 87,
    "deletions": 2
  },
  "files": [
    {
      "sha": "85dc6b26be771b3808690b4ec1031e01b51e024f",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -1,3 +1,8 @@\n+2019-10-04  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\tPR ld/25062\n+\t* elf32-arm.c (elf32_arm_final_link_relocate): Sign extend data.\n+\n 2019-09-30  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* elf-bfd.h (bfd_section_is_ctf): New inline function."
    },
    {
      "sha": "d52c0469795fbbb10abf2a31c8b0b643bee54f26",
      "filename": "bfd/elf32-arm.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/bfd/elf32-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/bfd/elf32-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-arm.c?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -12027,9 +12027,9 @@ elf32_arm_final_link_relocate (reloc_howto_type *\t    howto,\n \t    unsigned long data, insn;\n \t    unsigned thumb;\n \n-\t    data = bfd_get_32 (input_bfd, hit_data);\n+\t    data = bfd_get_signed_32 (input_bfd, hit_data);\n \t    thumb = data & 1;\n-\t    data &= ~1u;\n+\t    data &= ~1ul;\n \n \t    if (thumb)\n \t      {"
    },
    {
      "sha": "671776bbe665598618b2c20eaf7143430f14ce26",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -1,3 +1,10 @@\n+2019-10-04  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\tPR ld/25062\n+\t* testsuite/ld-arm/arm-elf.exp: Update.\n+\t* testsuite/ld-arm/tls-gdesc-neg.d: New test.\n+\t* testsuite/ld-arm/tls-gdesc-neg.s: New test.\n+\n 2019-09-23  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* configure.ac (TESTCTFLIB): Set to the .so or .a, like TESTBFDLIB."
    },
    {
      "sha": "118aa642d1b7058c7136ee73d4fc7c46badd9bf3",
      "filename": "ld/testsuite/ld-arm/arm-elf.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/arm-elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/arm-elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/arm-elf.exp?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -839,6 +839,11 @@ set armeabitests_nonacl {\n      \"\" {tls-gdesc.s}\n      {{readelf \"-x .got\" tls-gdesc-nlazy.g}}\n      \"tls-lib2-nlazy.so\"}\n+    {\"TLS gnu shared library negative addend\"\n+     \"--no-fix-arm1176 -shared -T arm-dyn.ld --hash-style=sysv\" \"\"\n+     \"\" {tls-gdesc-neg.s}\n+     {{objdump -fdw tls-gdesc-neg.d}}\n+     \"tls-lib2-neg.so\"}\n     {\"TLS long plt library\"\n      \"-shared -T arm-dyn.ld --hash-style=sysv --section-start .foo=0x4001000\" \"\"\n      \"\" {tls-longplt-lib.s}"
    },
    {
      "sha": "4bbd0124e7591d8ef81ddd319075d328340b2061",
      "filename": "ld/testsuite/ld-arm/tls-gdesc-neg.d",
      "status": "added",
      "additions": 39,
      "deletions": 0,
      "changes": 39,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/tls-gdesc-neg.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/tls-gdesc-neg.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/tls-gdesc-neg.d?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -0,0 +1,39 @@\n+\n+tmpdir/tls-lib2-neg.so:     file format elf32-littlearm\n+architecture: armv.*, flags 0x[0-9a-f]+:\n+HAS_SYMS, DYNAMIC, D_PAGED\n+start address 0x[0-9a-f]+\n+\n+Disassembly of section .plt:\n+\n+00008164 <.plt>:\n+    8164:\te52de004 \tpush\t{lr}\t\t; .*\n+    8168:\te59fe004 \tldr\tlr, \\[pc, #4\\]\t; .*\n+    816c:\te08fe00e \tadd\tlr, pc, lr\n+    8170:\te5bef008 \tldr\tpc, \\[lr, #8\\]!\n+    8174:\t000080d8 \t.word\t0x000080d8\n+    8178:\te08e0000 \tadd\tr0, lr, r0\n+    817c:\te5901004 \tldr\tr1, \\[r0, #4\\]\n+    8180:\te12fff11 \tbx\tr1\n+    8184:\te52d2004 \tpush\t{r2}\t\t; .*\n+    8188:\te59f200c \tldr\tr2, \\[pc, #12\\]\t; .*\n+    818c:\te59f100c \tldr\tr1, \\[pc, #12\\]\t; .*\n+    8190:\te79f2002 \tldr\tr2, \\[pc, r2\\]\n+    8194:\te081100f \tadd\tr1, r1, pc\n+    8198:\te12fff12 \tbx\tr2\n+    819c:\t000080c8 \t.word\t0x000080c8\n+    81a0:\t000080b0 \t.word\t0x000080b0\n+\n+Disassembly of section .text:\n+\n+000081a4 <foo>:\n+    81a4:\te59f0000 \tldr\tr0, \\[pc\\]\t; .*\n+    81a8:\tea000000 \tb\t81b0 <foo\\+0xc>\n+    81ac:\t000080a4 \t.word\t0x000080a4\n+    81b0:\tfafffff0 \tblx\t8178 <.plt\\+0x14>\n+\n+000081b4 <bar>:\n+    81b4:\t4800      \tldr\tr0, \\[pc, #0\\]\t; .*\n+    81b6:\te001      \tb.n\t81bc <bar\\+0x8>\n+    81b8:\t00008097 \t.word\t0x00008097\n+    81bc:\tf7ff efdc \tblx\t8178 <.plt\\+0x14>"
    },
    {
      "sha": "78ec32f593679ba911c215b7ff76b85a47232a1f",
      "filename": "ld/testsuite/ld-arm/tls-gdesc-neg.s",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/tls-gdesc-neg.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b627f56244cb2930c5891cfde03586987d46b5d2/ld/testsuite/ld-arm/tls-gdesc-neg.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/tls-gdesc-neg.s?ref=b627f56244cb2930c5891cfde03586987d46b5d2",
      "patch": "@@ -0,0 +1,29 @@\n+\t.text\n+\t.arm\n+\t.globl foo\n+\t.type foo, %function\n+foo:\n+\tldr\tr0, 1f\n+\tb\t2f\n+1:\n+\t@ Negative addend for R_ARM_TLS_GOTDESC.\n+\t.word\ttlsdata(tlsdesc) + (. - 2f + 0)\n+2:\n+\tblx\ttlsdata(tlscall)\n+\n+\t.thumb\n+\t.globl bar\n+\t.type bar, %function\n+bar:\n+\tldr\tr0, 1f\n+\tb\t2f\n+1:\n+\t@ Negative addend for R_ARM_TLS_GOTDESC.\n+\t.word\ttlsdata(tlsdesc) + (. - 2f + 1)\n+2:\n+\tblx\ttlsdata(tlscall)\n+\n+\t.section .tdata,\"awT\"\n+\t.global tlsdata\n+tlsdata:\n+\t.space\t4"
    }
  ]
}