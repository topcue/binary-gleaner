{
  "sha": "abebb03c3af215d7542f5e6b71d78823b15220d5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWJlYmIwM2MzYWYyMTVkNzU0MmY1ZTZiNzFkNzg4MjNiMTUyMjBkNQ==",
  "commit": {
    "author": {
      "name": "Martin Liska",
      "email": "mliska@suse.cz",
      "date": "2020-08-15T17:46:33Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-08-20T01:21:57Z"
    },
    "message": "gas/hash.c: add new functions\n\nThe first of a patch series deleting the gas/hash.c hash table\nimplementation and instead using libiberty/hashtab.c hash tables in\ngas.\n\n\t* as.h: Include hashtab.h.\n\t* hash.c (htab_insert): New.\n\t(htab_print_statistics): Likewise.\n\t* hash.h (htab_insert): Likewise.\n\t(htab_print_statistics): Likewise.",
    "tree": {
      "sha": "e14c7c04f583709ad523399880ba504c3259d7cc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e14c7c04f583709ad523399880ba504c3259d7cc"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/abebb03c3af215d7542f5e6b71d78823b15220d5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/abebb03c3af215d7542f5e6b71d78823b15220d5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/abebb03c3af215d7542f5e6b71d78823b15220d5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/abebb03c3af215d7542f5e6b71d78823b15220d5/comments",
  "author": {
    "login": "marxin",
    "id": 2658545,
    "node_id": "MDQ6VXNlcjI2NTg1NDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/marxin",
    "html_url": "https://github.com/marxin",
    "followers_url": "https://api.github.com/users/marxin/followers",
    "following_url": "https://api.github.com/users/marxin/following{/other_user}",
    "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/marxin/subscriptions",
    "organizations_url": "https://api.github.com/users/marxin/orgs",
    "repos_url": "https://api.github.com/users/marxin/repos",
    "events_url": "https://api.github.com/users/marxin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/marxin/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c51ed085abec8c60bab2fbee16493666f6d84caa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c51ed085abec8c60bab2fbee16493666f6d84caa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c51ed085abec8c60bab2fbee16493666f6d84caa"
    }
  ],
  "stats": {
    "total": 41,
    "additions": 41,
    "deletions": 0
  },
  "files": [
    {
      "sha": "acc5e01cc97c032bd571722ef588a5be8ab51016",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=abebb03c3af215d7542f5e6b71d78823b15220d5",
      "patch": "@@ -1,3 +1,11 @@\n+2020-08-20  Martin Liska  <mliska@suse.cz>\n+\n+\t* as.h: Include hashtab.h.\n+\t* hash.c (htab_insert): New.\n+\t(htab_print_statistics): Likewise.\n+\t* hash.h (htab_insert): Likewise.\n+\t(htab_print_statistics): Likewise.\n+\n 2020-08-19  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/gas/ppc/int128.s: Correct vcmpuq."
    },
    {
      "sha": "bc27822b0cdbf1789db2c9d489f1d81e33f6a690",
      "filename": "gas/as.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/as.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/as.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/as.h?ref=abebb03c3af215d7542f5e6b71d78823b15220d5",
      "patch": "@@ -565,6 +565,7 @@ int generic_force_reloc (struct fix *);\n \n #include \"write.h\"\n #include \"frags.h\"\n+#include \"hashtab.h\"\n #include \"hash.h\"\n #include \"read.h\"\n #include \"symbols.h\""
    },
    {
      "sha": "e6b4ef5505bcffc447e08dbc2cd6e81d88eddda5",
      "filename": "gas/hash.c",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/hash.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/hash.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/hash.c?ref=abebb03c3af215d7542f5e6b71d78823b15220d5",
      "patch": "@@ -407,6 +407,30 @@ hash_print_statistics (FILE *f ATTRIBUTE_UNUSED,\n   fprintf (f, \"\\t%lu empty slots\\n\", empty);\n #endif\n }\n+\n+/* Insert ELEMENT into HTAB.  If the element exists, it is overwritten.  */\n+\n+void\n+htab_insert (htab_t htab, PTR element)\n+{\n+  void **slot = htab_find_slot (htab, element, INSERT);\n+  if (slot != NULL && htab->del_f)\n+    (*htab->del_f) (*slot);\n+\n+  *slot = element;\n+}\n+\n+/* Print statistics about a hash table.  */\n+\n+void\n+htab_print_statistics (FILE *f, const char *name, htab_t table)\n+{\n+  fprintf (f, \"%s hash statistics:\\n\", name);\n+  fprintf (f, \"\\t%u searches\\n\", table->searches);\n+  fprintf (f, \"\\t%u collisions\\n\", table->collisions);\n+  fprintf (f, \"\\t%lu elements\\n\", (unsigned long) htab_elements (table));\n+  fprintf (f, \"\\t%lu table size\\n\", (unsigned long) htab_size (table));\n+}\n \f\n #ifdef TEST\n "
    },
    {
      "sha": "f78cb73b0d31afa97b83d55bef98256047358c30",
      "filename": "gas/hash.h",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/hash.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abebb03c3af215d7542f5e6b71d78823b15220d5/gas/hash.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/hash.h?ref=abebb03c3af215d7542f5e6b71d78823b15220d5",
      "patch": "@@ -85,4 +85,12 @@ extern void hash_traverse (struct hash_control *,\n extern void hash_print_statistics (FILE *, const char *name,\n \t\t\t\t   struct hash_control *);\n \n+/* Insert ELEMENT into HTAB.  If the element exists, it is overwritten.  */\n+\n+extern void htab_insert (htab_t, void *);\n+\n+/* Print statistics about a hash table.  */\n+\n+extern void htab_print_statistics (FILE *f, const char *name, htab_t table);\n+\n #endif /* HASH_H */"
    }
  ]
}