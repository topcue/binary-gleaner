{
  "sha": "43f7c3581f5c615b65f7c15c298c9be20c2597cf",
  "node_id": "C_kwDOANOeidoAKDQzZjdjMzU4MWY1YzYxNWI2NWY3YzE1YzI5OGM5YmUyMGMyNTk3Y2Y",
  "commit": {
    "author": {
      "name": "Jan Vrany",
      "email": "jan.vrany@labware.com",
      "date": "2021-12-10T11:43:20Z"
    },
    "committer": {
      "name": "Jan Vrany",
      "email": "jan.vrany@labware.com",
      "date": "2021-12-10T11:43:20Z"
    },
    "message": "gdb/testsuite: respect GDBSERVER variable in remote-stdio-gdbserver \"board\"\n\nThe comment on top of gdb/testsuite/boards/remote-stdio-gdbserver.exp says\nthat user can specify path to gdbserver on remote system by setting\nGDBSERVER variable. However, this variable was ignored and /usr/bin/gdbserver\nwas used unconditionally.\n\nThis commit updates the code to respect GDBSERVER if set and fall back to\n/usr/bin/gdbserver if not.",
    "tree": {
      "sha": "fc186754173ea00627e287a78eb81a2cde5dd786",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fc186754173ea00627e287a78eb81a2cde5dd786"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/43f7c3581f5c615b65f7c15c298c9be20c2597cf",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/43f7c3581f5c615b65f7c15c298c9be20c2597cf",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/43f7c3581f5c615b65f7c15c298c9be20c2597cf",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/43f7c3581f5c615b65f7c15c298c9be20c2597cf/comments",
  "author": {
    "login": "janvrany",
    "id": 82951,
    "node_id": "MDQ6VXNlcjgyOTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/82951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janvrany",
    "html_url": "https://github.com/janvrany",
    "followers_url": "https://api.github.com/users/janvrany/followers",
    "following_url": "https://api.github.com/users/janvrany/following{/other_user}",
    "gists_url": "https://api.github.com/users/janvrany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janvrany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janvrany/subscriptions",
    "organizations_url": "https://api.github.com/users/janvrany/orgs",
    "repos_url": "https://api.github.com/users/janvrany/repos",
    "events_url": "https://api.github.com/users/janvrany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janvrany/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "janvrany",
    "id": 82951,
    "node_id": "MDQ6VXNlcjgyOTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/82951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janvrany",
    "html_url": "https://github.com/janvrany",
    "followers_url": "https://api.github.com/users/janvrany/followers",
    "following_url": "https://api.github.com/users/janvrany/following{/other_user}",
    "gists_url": "https://api.github.com/users/janvrany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janvrany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janvrany/subscriptions",
    "organizations_url": "https://api.github.com/users/janvrany/orgs",
    "repos_url": "https://api.github.com/users/janvrany/repos",
    "events_url": "https://api.github.com/users/janvrany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janvrany/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b80a346e3d567b9366a1da123eeae555a44ccf05",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b80a346e3d567b9366a1da123eeae555a44ccf05",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b80a346e3d567b9366a1da123eeae555a44ccf05"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 9,
    "deletions": 1
  },
  "files": [
    {
      "sha": "9fc4e2d5ce544140bb8794cf6e26002ad7e806ce",
      "filename": "gdb/testsuite/boards/remote-stdio-gdbserver.exp",
      "status": "modified",
      "additions": 9,
      "deletions": 1,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/43f7c3581f5c615b65f7c15c298c9be20c2597cf/gdb/testsuite/boards/remote-stdio-gdbserver.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/43f7c3581f5c615b65f7c15c298c9be20c2597cf/gdb/testsuite/boards/remote-stdio-gdbserver.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/boards/remote-stdio-gdbserver.exp?ref=43f7c3581f5c615b65f7c15c298c9be20c2597cf",
      "patch": "@@ -56,6 +56,13 @@ if [info exists REMOTE_TMPDIR] {\n     set_board_info remotedir $REMOTE_TMPDIR\n }\n \n+unset_board_info gdb_server_prog\n+if [info exists GDBSERVER] {\n+    set_board_info gdb_server_prog $GDBSERVER\n+} else {\n+    set_board_info gdb_server_prog /usr/bin/gdbserver\n+}\n+\n proc get_remote_login { } {\n     set result \"\"\n     if {[board_info [target_info name] exists username]} {\n@@ -70,7 +77,8 @@ proc get_remote_login { } {\n proc get_target_remote_pipe_cmd { } {\n     set target_exec [gdbserver_download_current_prog]\n     set rsh_cmd \"[board_info [target_info name] rsh_prog] [get_remote_login]\"\n-    return \"$rsh_cmd /usr/bin/gdbserver --once stdio $target_exec\"\n+    set gdbserver \"[board_info [target_info name] gdb_server_prog]\"\n+    return \"$rsh_cmd $gdbserver --once stdio $target_exec\"\n }\n \n proc ${board}_file { dest op args } {"
    }
  ]
}