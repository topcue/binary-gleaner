{
  "sha": "67b0f684803f5bec9b801c43fe1559bc88c15bb6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjdiMGY2ODQ4MDNmNWJlYzliODAxYzQzZmUxNTU5YmM4OGMxNWJiNg==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-10T07:12:37Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-10T07:12:37Z"
    },
    "message": "bfd: strip symbols not representable in COFF/PE symbol table\n\nThe offset-within-section field in the symbol table entry is only 32\nbits wide, so rather than emitting bogus entries omit them, and issue\na diagnostic identifying the issue.\n\nThis requires adjusting the PR/22267 test to no longer produce symbols\nwith out of range values on 64-bit BFD. This also depends on\nadjustments to testsuite/ld-scripts/map-address.* made by an earlier\npatch. The purpose of the test can very well be achieved nevertheless.",
    "tree": {
      "sha": "6430680e12759db6270ac8b4ffde38bab1756605",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6430680e12759db6270ac8b4ffde38bab1756605"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/67b0f684803f5bec9b801c43fe1559bc88c15bb6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/67b0f684803f5bec9b801c43fe1559bc88c15bb6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/67b0f684803f5bec9b801c43fe1559bc88c15bb6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/67b0f684803f5bec9b801c43fe1559bc88c15bb6/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3044062c34f2372f4ecf81b69d9e63685cd5e995",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3044062c34f2372f4ecf81b69d9e63685cd5e995",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3044062c34f2372f4ecf81b69d9e63685cd5e995"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 27,
    "deletions": 4
  },
  "files": [
    {
      "sha": "d3c1d403529b26a84850c205f508aeb09f7da476",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -1,3 +1,8 @@\n+2021-03-10  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* cofflink.c (_bfd_coff_write_global_sym): Range-check symbol\n+\toffset.\n+\n 2021-03-10  Alan Modra  <amodra@gmail.com>\n \t    Jan Beulich  <jbeulich@suse.com>\n "
    },
    {
      "sha": "874354a70d00c06579072cb9dfa3e689228c9e1e",
      "filename": "bfd/cofflink.c",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/bfd/cofflink.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/bfd/cofflink.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/cofflink.c?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -2602,6 +2602,17 @@ _bfd_coff_write_global_sym (struct bfd_hash_entry *bh, void *data)\n \t\t\t+ h->root.u.def.section->output_offset);\n \tif (! obj_pe (flaginfo->output_bfd))\n \t  isym.n_value += sec->vma;\n+#ifdef BFD64\n+\tif (isym.n_value > (bfd_vma) 0xffffffff)\n+\t  {\n+\t    if (! h->root.linker_def)\n+\t      _bfd_error_handler\n+\t        (_(\"%pB: stripping non-representable symbol '%s' (value \"\n+                  \"%\" BFD_VMA_FMT \"x)\"),\n+\t         output_bfd, h->root.root.string, isym.n_value);\n+\t    return TRUE;\n+\t  }\n+#endif\n       }\n       break;\n "
    },
    {
      "sha": "ec7854163fa72c6a9f7b1246e7076162dab203f8",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -1,3 +1,11 @@\n+2021-03-10  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* testsuite/ld-scripts/pr22267.t: Avoid symbol value with more\n+\tthan 32 set bits.\n+\t* testsuite/ld-scripts/pr22267.d: Adjust expectation and drop\n+\tcomment.\n+\t* scripttempl/mcorepe.sc: Use PROVIDE() for _stack.\n+\n 2021-03-09  Jan Beulich  <jbeulich@suse.com>\n \n \t* testsuite/ld-pe/reloc.s: Add entry point symbols. Increase"
    },
    {
      "sha": "20fa6f954650dd760b2a448edf252939758ae38b",
      "filename": "ld/scripttempl/mcorepe.sc",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/scripttempl/mcorepe.sc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/scripttempl/mcorepe.sc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/scripttempl/mcorepe.sc?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -168,7 +168,7 @@ SECTIONS\n \n   .stack 0x80000 :\n   {\n-    _stack = .;\n+    PROVIDE(_stack = .);\n     *(.stack)\n   }\n }"
    },
    {
      "sha": "b46fec3ee7376a7905f4444b86f885b4892e60b2",
      "filename": "ld/testsuite/ld-scripts/pr22267.d",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/testsuite/ld-scripts/pr22267.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/testsuite/ld-scripts/pr22267.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-scripts/pr22267.d?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -2,7 +2,6 @@\n #nm: -n\n #xfail: bfin-*-linux* frv-*-linux*\n \n-# Some targets may zero-extend 32-bit address to 64 bits.\n #...\n-0*f+00 A foo\n+0*ff A foo\n #pass"
    },
    {
      "sha": "004934594d5ae3e98aa9ff88568f2e87fd34de21",
      "filename": "ld/testsuite/ld-scripts/pr22267.t",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/testsuite/ld-scripts/pr22267.t",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/67b0f684803f5bec9b801c43fe1559bc88c15bb6/ld/testsuite/ld-scripts/pr22267.t",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-scripts/pr22267.t?ref=67b0f684803f5bec9b801c43fe1559bc88c15bb6",
      "patch": "@@ -1,4 +1,4 @@\n SECTIONS\n {\n-  foo = ~0xFF;\n+  foo = ~~0xFF;\n }"
    }
  ]
}