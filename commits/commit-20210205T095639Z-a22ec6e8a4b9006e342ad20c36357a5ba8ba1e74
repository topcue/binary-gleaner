{
  "sha": "a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTIyZWM2ZThhNGI5MDA2ZTM0MmFkMjBjMzYzNTdhNWJhOGJhMWU3NA==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-05T09:56:39Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-05T09:56:39Z"
    },
    "message": "[gdb/testsuite] Add KFAILs for PR symtab/24549\n\nWhen an executable contains an index such as a .gdb_index or .debug_names\nsection, gdb ignores the DW_AT_subprogram attribute.\n\nThis problem has been filed as PR symtab/24549.\n\nAdd KFAILs for this PR in test-cases gdb.dwarf2/main-subprogram.exp and\ngdb.fortran/mixed-lang-stack.exp.\n\nTested on x86_64-linux.\n\ngdb/testsuite/ChangeLog:\n\n2021-02-05  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.dwarf2/main-subprogram.exp: Add KFAIL for PR symtab/24549.\n\t* gdb.fortran/mixed-lang-stack.exp: Same.",
    "tree": {
      "sha": "7536846dd7a2342d4b8e8a0330364d7e17a8d8fd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7536846dd7a2342d4b8e8a0330364d7e17a8d8fd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ae7104966177c7bcb7bef9e1445489d9d2f97f06",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ae7104966177c7bcb7bef9e1445489d9d2f97f06",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ae7104966177c7bcb7bef9e1445489d9d2f97f06"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 37,
    "deletions": 3
  },
  "files": [
    {
      "sha": "84f064730d348b931611da61ce7c381cf6e244b6",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
      "patch": "@@ -1,3 +1,8 @@\n+2021-02-05  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.dwarf2/main-subprogram.exp: Add KFAIL for PR symtab/24549.\n+\t* gdb.fortran/mixed-lang-stack.exp: Same.\n+\n 2021-02-05  Tom de Vries  <tdevries@suse.de>\n \n \tPR exp/27265"
    },
    {
      "sha": "c618a40f2fb06553a245362f431ca117f5bcc711",
      "filename": "gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "status": "modified",
      "additions": 13,
      "deletions": 1,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/main-subprogram.exp?ref=a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
      "patch": "@@ -55,6 +55,8 @@ if {[prepare_for_testing \"failed to prepare\" ${testfile} \\\n     return -1\n }\n \n+set have_index [exec_has_index_section $binfile]\n+\n # Test that the \"start\" command stops in the \"mymain\" function.\n # This should happen because we used DW_AT_main_subprogram to tell gdb\n # that this was the real \"main\".\n@@ -64,4 +66,14 @@ if {[gdb_start_cmd] < 0} {\n     return -1\n }\n \n-gdb_test \"\" \"Temporary breakpoint .* mymain.*\" \"stopped at mymain\"\n+gdb_test_multiple \"\" \"stopped at mymain\" {\n+    -re -wrap \"Temporary breakpoint .* mymain.*\" {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap \"Temporary breakpoint .* main.*\" {\n+\tif { $have_index } {\n+\t    setup_kfail \"gdb/24549\" *-*-*\n+\t}\n+\tfail $gdb_test_name\n+    }\n+}"
    },
    {
      "sha": "6a249e60f2f7db6bd3b338bea2e744fdded790a0",
      "filename": "gdb/testsuite/gdb.fortran/mixed-lang-stack.exp",
      "status": "modified",
      "additions": 19,
      "deletions": 2,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/gdb.fortran/mixed-lang-stack.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74/gdb/testsuite/gdb.fortran/mixed-lang-stack.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/mixed-lang-stack.exp?ref=a22ec6e8a4b9006e342ad20c36357a5ba8ba1e74",
      "patch": "@@ -35,11 +35,13 @@ if {[prepare_for_testing_full \"failed to prepare\" \\\n     return -1\n }\n \n+set have_index [exec_has_index_section $binfile]\n+\n # Runs the test program and examins the stack.  LANG is a string, the\n # value to pass to GDB's 'set language ...' command.\n proc run_tests { lang } {\n     with_test_prefix \"lang=${lang}\" {\n-\tglobal binfile hex\n+\tglobal binfile hex have_index\n \n \tclean_restart ${binfile}\n \n@@ -74,7 +76,22 @@ proc run_tests { lang } {\n \t\t \"#7\\\\s+$hex in mixed_func_1b \\\\($1b_args\\\\) at \\[^\\r\\n\\]+\" \\\n \t\t \"#8\\\\s+$hex in mixed_func_1a \\\\(\\\\) at \\[^\\r\\n\\]+\" \\\n \t\t \"#9\\\\s+$hex in mixed_stack_main \\\\(\\\\) at \\[^\\r\\n\\]+\" ]\n-\tgdb_test \"bt -frame-arguments all\" $bt_stack\n+\tset main_args \"argc=1, argv=${hex}( \\[^\\r\\n\\]+)?\"\n+\tset bt_stack_kfail \\\n+\t    [multi_line \\\n+\t\t $bt_stack \\\n+\t\t \"#10\\\\s+$hex in main \\\\($main_args\\\\) at \\[^\\r\\n\\]+\"]\n+\tgdb_test_multiple \"bt -frame-arguments all\" \"\" {\n+\t    -re -wrap $bt_stack {\n+\t\tpass $gdb_test_name\n+\t    }\n+\t    -re -wrap $bt_stack_kfail {\n+\t\tif { $have_index } {\n+\t\t    setup_kfail \"gdb/24549\" *-*-*\n+\t\t}\n+\t\tfail $gdb_test_name\n+\t    }\n+\t}\n \n \t# Check the language for frame #0.\n \tgdb_test \"info frame\" \"source language fortran\\..*\" \\"
    }
  ]
}