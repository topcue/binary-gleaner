{
  "sha": "d4813f104685d3b36ab0c36a928264f99f5d3f17",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDQ4MTNmMTA0Njg1ZDNiMzZhYjBjMzZhOTI4MjY0Zjk5ZjVkM2YxNw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-01-07T13:58:19Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-01-07T13:58:19Z"
    },
    "message": "Fix regression in Ada aggregate assignment\n\nA recent upstream patch of mine caused a regression in aggregate\nassignment.  The bug was that add_component_interval didn't properly\nupdate the array contents in one resize case.\n\nI found furthermore that there was no test case that would provoke\nthis failure.  This patch fixes the bug and introduces a test.\n\ngdb/ChangeLog\n2021-01-07  Tom Tromey  <tromey@adacore.com>\n\n\t* ada-lang.c (add_component_interval): Start loop using vector's\n\tupdated size.\n\ngdb/testsuite/ChangeLog\n2021-01-07  Tom Tromey  <tromey@adacore.com>\n\n\t* gdb.ada/assign_arr.exp: Add 'others' test.",
    "tree": {
      "sha": "87b4572f002a155102ce0a11908f6d4b3ac52473",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/87b4572f002a155102ce0a11908f6d4b3ac52473"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d4813f104685d3b36ab0c36a928264f99f5d3f17",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d4813f104685d3b36ab0c36a928264f99f5d3f17",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d4813f104685d3b36ab0c36a928264f99f5d3f17",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d4813f104685d3b36ab0c36a928264f99f5d3f17/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "17d60030ae57fb53f5977fa6928d7d5006f42881",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/17d60030ae57fb53f5977fa6928d7d5006f42881",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/17d60030ae57fb53f5977fa6928d7d5006f42881"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 13,
    "deletions": 1
  },
  "files": [
    {
      "sha": "dd8c01b710acf13f56beff75d77b993e207c61f8",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=d4813f104685d3b36ab0c36a928264f99f5d3f17",
      "patch": "@@ -1,3 +1,8 @@\n+2021-01-07  Tom Tromey  <tromey@adacore.com>\n+\n+\t* ada-lang.c (add_component_interval): Start loop using vector's\n+\tupdated size.\n+\n 2021-01-06  Tom Tromey  <tromey@adacore.com>\n \n \t* ada-lang.c (ada_evaluate_subexp) <BINOP_ADD, BINOP_SUB>:"
    },
    {
      "sha": "4751b6eeda3ac9cca58c24239ca2ef42d315abe8",
      "filename": "gdb/ada-lang.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/ada-lang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/ada-lang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-lang.c?ref=d4813f104685d3b36ab0c36a928264f99f5d3f17",
      "patch": "@@ -9755,7 +9755,7 @@ add_component_interval (LONGEST low, LONGEST high,\n   }\n \t\n   indices.resize (indices.size () + 2);\n-  for (j = size - 1; j >= i + 2; j -= 1)\n+  for (j = indices.size () - 1; j >= i + 2; j -= 1)\n     indices[j] = indices[j - 2];\n   indices[i] = low;\n   indices[i + 1] = high;"
    },
    {
      "sha": "0f3ef7aaaba5988fcf4490621e5fbb41c6b7576a",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=d4813f104685d3b36ab0c36a928264f99f5d3f17",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-07  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gdb.ada/assign_arr.exp: Add 'others' test.\n+\n 2021-01-06  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.ada/fixed_points/pck.ads (Delta4): New constant."
    },
    {
      "sha": "ca894f057e24bc881af5decd628a8cecc56d6dff",
      "filename": "gdb/testsuite/gdb.ada/assign_arr.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/testsuite/gdb.ada/assign_arr.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d4813f104685d3b36ab0c36a928264f99f5d3f17/gdb/testsuite/gdb.ada/assign_arr.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/assign_arr.exp?ref=d4813f104685d3b36ab0c36a928264f99f5d3f17",
      "patch": "@@ -30,3 +30,6 @@ runto \"main_p324_051.adb:$bp_location\"\n \n gdb_test \"print assign_arr_input.u2 :=(0.25,0.5,0.75)\" \\\n          \" = \\\\(0\\\\.25, 0\\\\.5, 0\\\\.75\\\\)\"\n+\n+gdb_test \"print assign_arr_input.u2 :=(0.25, others => 0.125)\" \\\n+         \" = \\\\(0\\\\.25, 0\\\\.125, 0\\\\.125\\\\)\""
    }
  ]
}