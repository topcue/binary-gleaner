{
  "sha": "e3141a4d894d3e512c9c79e8686835ba71f05d70",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTMxNDFhNGQ4OTRkM2U1MTJjOWM3OWU4Njg2ODM1YmE3MWYwNWQ3MA==",
  "commit": {
    "author": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2021-03-03T13:43:39Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2021-03-12T12:18:33Z"
    },
    "message": "gdb/testsuite: make test names unique in gdb.python/py-mi.exp\n\nUse with_test_prefix to make the test names unique.\n\ngdb/testsuite/ChangeLog:\n\n\t* gdb.python/py-mi.exp: Use with_test_prefix to make test names\n\tunique.",
    "tree": {
      "sha": "4b24f868db49924ead3d0806e7c9d80255b5ffde",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4b24f868db49924ead3d0806e7c9d80255b5ffde"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e3141a4d894d3e512c9c79e8686835ba71f05d70",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e3141a4d894d3e512c9c79e8686835ba71f05d70",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e3141a4d894d3e512c9c79e8686835ba71f05d70",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e3141a4d894d3e512c9c79e8686835ba71f05d70/comments",
  "author": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1b2cb8e2ee578e68389c9201bfdfa8cd67c3b416",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1b2cb8e2ee578e68389c9201bfdfa8cd67c3b416",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1b2cb8e2ee578e68389c9201bfdfa8cd67c3b416"
    }
  ],
  "stats": {
    "total": 327,
    "additions": 171,
    "deletions": 156
  },
  "files": [
    {
      "sha": "dea3ce555050b6a2211091f9d1389897f1500bd9",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e3141a4d894d3e512c9c79e8686835ba71f05d70/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e3141a4d894d3e512c9c79e8686835ba71f05d70/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=e3141a4d894d3e512c9c79e8686835ba71f05d70",
      "patch": "@@ -1,3 +1,8 @@\n+2021-03-12  Andrew Burgess  <andrew.burgess@embecosm.com>\n+\n+\t* gdb.python/py-mi.exp: Use with_test_prefix to make test names\n+\tunique.\n+\n 2021-03-09  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.base/cast-call.exp: New file."
    },
    {
      "sha": "6f0c1c65e62ae4ed52ad0f3802c6c13a8258e466",
      "filename": "gdb/testsuite/gdb.python/py-mi.exp",
      "status": "modified",
      "additions": 166,
      "deletions": 156,
      "changes": 322,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e3141a4d894d3e512c9c79e8686835ba71f05d70/gdb/testsuite/gdb.python/py-mi.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e3141a4d894d3e512c9c79e8686835ba71f05d70/gdb/testsuite/gdb.python/py-mi.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.python/py-mi.exp?ref=e3141a4d894d3e512c9c79e8686835ba71f05d70",
      "patch": "@@ -49,26 +49,30 @@ mi_gdb_test \"source ${remote_python_file}\" \"load python file\"\n mi_continue_to_line [gdb_get_line_number {MI breakpoint here} ${srcfile}] \\\n   \"step to breakpoint\"\n \n-mi_create_floating_varobj container c \\\n-  \"create container varobj, no pretty-printing\"\n+with_test_prefix \"varobj container\" {\n+    mi_create_floating_varobj container c \\\n+\t\"create container varobj, no pretty-printing\"\n \n-mi_list_varobj_children container {\n-  { container.name name 1 string }\n-  { container.len len 0 int }\n-  { container.elements elements 1 \"int .\" }\n-} \"examine container children=0, no pretty-printing\"\n+    mi_list_varobj_children container {\n+\t{ container.name name 1 string }\n+\t{ container.len len 0 int }\n+\t{ container.elements elements 1 \"int .\" }\n+    } \"examine container children=0, no pretty-printing\"\n \n-mi_delete_varobj container \"delete varobj\"\n+    mi_delete_varobj container \"delete varobj\"\n+}\n \n-mi_create_floating_varobj nscont nstype \\\n-  \"create nscont varobj, no pretty-printing\"\n+with_test_prefix \"varobj nscont\" {\n+    mi_create_floating_varobj nscont nstype \\\n+\t\"create nscont varobj, no pretty-printing\"\n \n-mi_list_varobj_children nscont {\n-  { nscont.len len 0 int }\n-  { nscont.elements elements 1 \"int .\" }\n-} \"examine nscont children=0, no pretty-printing\"\n+    mi_list_varobj_children nscont {\n+\t{ nscont.len len 0 int }\n+\t{ nscont.elements elements 1 \"int .\" }\n+    } \"examine nscont children=0, no pretty-printing\"\n \n-mi_delete_varobj nscont \"delete varobj\"\n+    mi_delete_varobj nscont \"delete varobj\"\n+}\n \n mi_gdb_test \"-enable-pretty-printing\" \"\"\n \n@@ -87,119 +91,121 @@ mi_gdb_test \"-var-update string\" \\\n     \"\\\\^done,changelist=\\\\\\[{name=\\\"string\\\",in_scope=\\\"true\\\",type_changed=\\\"false\\\",dynamic=\\\"1\\\",has_more=\\\"0\\\"}\\\\\\]\" \\\n     \"update string varobj after assignment\"\n \n-# The \"elements\" field of \"c\" is still empty, so the attribute\n-# \"has_more\" is expected to be zero.\n-mi_create_dynamic_varobj container c 0 \\\n-  \"create container varobj\"\n-\n-mi_list_varobj_children container {\n-} \"examine container children=0\"\n-\n-mi_next \"next over update 1\"\n-\n-mi_varobj_update_dynamic container \"varobj update 1\" {\n-    type_changed false new_num_children 1 dynamic 1 has_more 0\n-} {\n-} {\n-    { name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n-}\n-\n-mi_next \"next over update 2\"\n-\n-mi_varobj_update_dynamic container \"varobj update 2\" {\n-    type_changed false new_num_children 2 dynamic 1 has_more 0\n-} {\n-} {\n-    { name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n+with_test_prefix \"varobj container\" {\n+    # The \"elements\" field of \"c\" is still empty, so the attribute\n+    # \"has_more\" is expected to be zero.\n+    mi_create_dynamic_varobj container c 0 \\\n+\t\"create container varobj\"\n+\n+    mi_list_varobj_children container {\n+    } \"examine container children=0\"\n+\n+    mi_next \"next over update 1\"\n+\n+    mi_varobj_update_dynamic container \"varobj update 1\" {\n+\ttype_changed false new_num_children 1 dynamic 1 has_more 0\n+    } {\n+    } {\n+\t{ name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n+    }\n+\n+    mi_next \"next over update 2\"\n+\n+    mi_varobj_update_dynamic container \"varobj update 2\" {\n+\ttype_changed false new_num_children 2 dynamic 1 has_more 0\n+    } {\n+    } {\n+\t{ name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n+    }\n+\n+    mi_gdb_test \"-var-set-visualizer container None\" \\\n+\t\"\\\\^done\" \\\n+\t\"clear visualizer\"\n+\n+    mi_gdb_test \"-var-update container\" \\\n+\t\"\\\\^done,changelist=\\\\\\[\\\\\\]\" \\\n+\t\"varobj update after clearing\"\n+\n+    mi_gdb_test \"-var-set-visualizer container gdb.default_visualizer\" \\\n+\t\"\\\\^done\" \\\n+\t\"choose default visualizer\"\n+\n+    mi_varobj_update_dynamic container \"varobj update after choosing default\" {\n+\ttype_changed false new_num_children 2 dynamic 1 has_more 0\n+    } {\n+    } {\n+\t{ name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n+\t{ name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n+    }\n+\n+    mi_gdb_test \"-var-set-visualizer container ContainerPrinter\" \\\n+\t\"\\\\^done\" \\\n+\t\"choose visualizer using expression\"\n+\n+    mi_varobj_update_dynamic container \\\n+\t\"varobj update after choosing via expression\" {\n+\t    type_changed false new_num_children 2 dynamic 1 has_more 0\n+\t} {\n+\t} {\n+\t    { name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n+\t    { name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n+\t}\n+\n+    mi_list_varobj_children_range container 1 2 2 {\n+\t{ {container.\\[1\\]} {\\[1\\]} 0 int }\n+    } \"list varobj children after selecting child range\"\n+\n+    mi_list_varobj_children_range container -1 -1 2 {\n+\t{ {container.\\[0\\]} {\\[0\\]} 0 int }\n+\t{ {container.\\[1\\]} {\\[1\\]} 0 int }\n+    } \"list varobj children after resetting child range\"\n+\n+    mi_next \"next over update 3\"\n+\n+    mi_gdb_test \"-var-set-update-range container 0 1\" \\\n+\t\"\\\\^done\" \\\n+\t\"set update range\"\n+\n+    # This should truncate the list.\n+    mi_list_varobj_children container {\n+\t{ {container.\\[0\\]} {\\[0\\]} 0 int }\n+    } \"list children after setting update range\"\n+\n+    # This should return just the items in [1,2).\n+    mi_list_varobj_children_range container 1 2 2 {\n+\t{ {container.\\[1\\]} {\\[1\\]} 0 int }\n+    } \"list selected children after setting range\"\n+\n+    # This should not be affected by the previous list-children request.\n+    mi_list_varobj_children container {\n+\t{ {container.\\[0\\]} {\\[0\\]} 0 int }\n+    } \"list children after listing selected range\"\n+\n+    mi_next \"next over update 4\"\n+\n+    # This should only show the first child, because the update range has\n+    # been set.\n+    mi_varobj_update_dynamic container \\\n+\t\"update after next with restricted range\" {\n+\t    type_changed false new_num_children 1 dynamic 1 has_more 1\n+\t} {\n+\t    { name {container.\\[0\\]} in_scope true type_changed false has_more 0 }\n+\t} {\n+\t}\n+\n+    mi_gdb_test \"-var-set-update-range container 3 4\" \\\n+\t\"\\\\^done\" \\\n+\t\"set update range with non-zero start\"\n+\n+    # Elements were updated but should not be reported.\n+    mi_varobj_update_dynamic container \\\n+\t\"update varobj with change outside selected range\" {\n+\t    type_changed false new_num_children 3 dynamic 1 has_more 0\n+\t} {\n+\t} {\n+\t}\n }\n \n-mi_gdb_test \"-var-set-visualizer container None\" \\\n-  \"\\\\^done\" \\\n-  \"clear visualizer\"\n-\n-mi_gdb_test \"-var-update container\" \\\n-  \"\\\\^done,changelist=\\\\\\[\\\\\\]\" \\\n-  \"varobj update after clearing\"\n-\n-mi_gdb_test \"-var-set-visualizer container gdb.default_visualizer\" \\\n-  \"\\\\^done\" \\\n-  \"choose default visualizer\"\n-\n-mi_varobj_update_dynamic container \"varobj update after choosing default\" {\n-    type_changed false new_num_children 2 dynamic 1 has_more 0\n-} {\n-} {\n-    { name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n-    { name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n-}\n-\n-mi_gdb_test \"-var-set-visualizer container ContainerPrinter\" \\\n-  \"\\\\^done\" \\\n-  \"choose visualizer using expression\"\n-\n-mi_varobj_update_dynamic container \\\n-  \"varobj update after choosing via expression\" {\n-      type_changed false new_num_children 2 dynamic 1 has_more 0\n-  } {\n-  } {\n-      { name {container.\\[0\\]} exp {\\[0\\]} numchild 0 type int }\n-      { name {container.\\[1\\]} exp {\\[1\\]} numchild 0 type int }\n-  }\n-\n-mi_list_varobj_children_range container 1 2 2 {\n-    { {container.\\[1\\]} {\\[1\\]} 0 int }\n-} \"list varobj children after selecting child range\"\n-\n-mi_list_varobj_children_range container -1 -1 2 {\n-    { {container.\\[0\\]} {\\[0\\]} 0 int }\n-    { {container.\\[1\\]} {\\[1\\]} 0 int }\n-} \"list varobj children after resetting child range\"\n-\n-mi_next \"next over update 3\"\n-\n-mi_gdb_test \"-var-set-update-range container 0 1\" \\\n-  \"\\\\^done\" \\\n-  \"set update range\"\n-\n-# This should truncate the list.\n-mi_list_varobj_children container {\n-    { {container.\\[0\\]} {\\[0\\]} 0 int }\n-} \"list children after setting update range\"\n-\n-# This should return just the items in [1,2).\n-mi_list_varobj_children_range container 1 2 2 {\n-    { {container.\\[1\\]} {\\[1\\]} 0 int }\n-} \"list selected children after setting range\"\n-\n-# This should not be affected by the previous list-children request.\n-mi_list_varobj_children container {\n-    { {container.\\[0\\]} {\\[0\\]} 0 int }\n-} \"list children after listing selected range\"\n-\n-mi_next \"next over update 4\"\n-\n-# This should only show the first child, because the update range has\n-# been set.\n-mi_varobj_update_dynamic container \\\n-  \"update after next with restricted range\" {\n-      type_changed false new_num_children 1 dynamic 1 has_more 1\n-  } {\n-      { name {container.\\[0\\]} in_scope true type_changed false has_more 0 }\n-  } {\n-  }\n-\n-mi_gdb_test \"-var-set-update-range container 3 4\" \\\n-  \"\\\\^done\" \\\n-  \"set update range with non-zero start\"\n-\n-# Elements were updated but should not be reported.\n-mi_varobj_update_dynamic container \\\n-  \"update varobj with change outside selected range\" {\n-      type_changed false new_num_children 3 dynamic 1 has_more 0\n-  } {\n-  } {\n-  }\n-\n mi_next \"next over update 5\"\n \n # Regression test: examine an object that has no children, then update\n@@ -255,25 +261,27 @@ mi_continue_to_line \\\n     [gdb_get_line_number {break to inspect struct and union} ${srcfile}] \\\n     \"step to outer breakpoint\"\n \n-mi_create_dynamic_varobj nscont nstype 1 \\\n-  \"create nstype varobj\"\n+with_test_prefix \"varobj nscont\" {\n+    mi_create_dynamic_varobj nscont nstype 1 \\\n+\t\"create nstype varobj\"\n \n-mi_list_varobj_children nscont {\n-    { {nscont.\\[0\\]} {\\[0\\]} 0 int }\n-    { {nscont.\\[1\\]} {\\[1\\]} 0 int }\n-} \"list children after setting update range\"\n+    mi_list_varobj_children nscont {\n+\t{ {nscont.\\[0\\]} {\\[0\\]} 0 int }\n+\t{ {nscont.\\[1\\]} {\\[1\\]} 0 int }\n+    } \"list children after setting update range\"\n \n-mi_gdb_test \"-var-set-visualizer nscont None\" \\\n-  \"\\\\^done\" \\\n-  \"clear visualizer\"\n+    mi_gdb_test \"-var-set-visualizer nscont None\" \\\n+\t\"\\\\^done\" \\\n+\t\"clear visualizer\"\n \n-mi_gdb_test \"-var-update nscont\" \\\n-  \"\\\\^done,changelist=\\\\\\[\\\\\\]\" \\\n-  \"varobj update after clearing\"\n+    mi_gdb_test \"-var-update nscont\" \\\n+\t\"\\\\^done,changelist=\\\\\\[\\\\\\]\" \\\n+\t\"varobj update after clearing\"\n \n-mi_gdb_test \"-var-set-visualizer nscont gdb.default_visualizer\" \\\n-  \"\\\\^done\" \\\n-  \"choose default visualizer\"\n+    mi_gdb_test \"-var-set-visualizer nscont gdb.default_visualizer\" \\\n+\t\"\\\\^done\" \\\n+\t\"choose default visualizer\"\n+}\n \n mi_gdb_test \"python exception_flag = True\" \"\"\n \n@@ -347,22 +355,24 @@ if {[lsearch -exact [mi_get_features] python] < 0} {\n     return -1\n }\n \n-mi_runto_main\n-mi_continue_to_line \\\n-    [gdb_get_line_number {break to inspect struct and union} ${srcfile}] \\\n-    \"step to breakpoint\"\n+with_test_prefix \"varobj fake\" {\n+    mi_runto_main\n+    mi_continue_to_line \\\n+\t[gdb_get_line_number {break to inspect struct and union} ${srcfile}] \\\n+\t\"step to breakpoint\"\n \n-# Test python/12531.  Install visualizer on a cplus_fake_child.\n-mi_create_varobj fake fake \\\n-  \"create fake varobj\"\n+    # Test python/12531.  Install visualizer on a cplus_fake_child.\n+    mi_create_varobj fake fake \\\n+\t\"create fake varobj\"\n \n-mi_list_varobj_children fake {\n-    { fake.private private 1 }\n-} \"list children of fake\"\n+    mi_list_varobj_children fake {\n+\t{ fake.private private 1 }\n+    } \"list children of fake\"\n \n-mi_list_varobj_children fake.private {\n-    { fake.private.sname sname 0 int }\n-} \"list children fake.private\"\n+    mi_list_varobj_children fake.private {\n+\t{ fake.private.sname sname 0 int }\n+    } \"list children fake.private\"\n \n-mi_gdb_test \"-var-set-visualizer fake.private gdb.default_visualizer\" \\\n-    \"\\\\^done\" \"Install visualizer on a cplus_fake_child\"\n+    mi_gdb_test \"-var-set-visualizer fake.private gdb.default_visualizer\" \\\n+\t\"\\\\^done\" \"Install visualizer on a cplus_fake_child\"\n+}"
    }
  ]
}