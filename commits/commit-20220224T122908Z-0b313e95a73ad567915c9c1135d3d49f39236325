{
  "sha": "0b313e95a73ad567915c9c1135d3d49f39236325",
  "node_id": "C_kwDOANOeidoAKDBiMzEzZTk1YTczYWQ1Njc5MTVjOWMxMTM1ZDNkNDlmMzkyMzYzMjU",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2022-02-23T21:26:17Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2022-02-24T12:29:08Z"
    },
    "message": "gdb/linux-tdep: move \"Perms\" column right\n\nCommit 29ef4c0699e1 (\"gdb/linux-tdep.c: Add Perms to the 'info proc\nmappings' output\") has broken test gdb.base/info-proc.exp on Linux,\nbecause it changes the output of \"info proc mappings\" in a way that the\ntest does not expect (my bad for not testing before pushing).\n\nI looked at how FreeBSD handles this, since I remembered it did show\npermission flags.  It looks like this:\n\n          Start Addr           End Addr       Size     Offset   Flags   File\n            0x200000           0x243000    0x43000        0x0  r-- CN-- /usr/local/bin/tmux\n\n(I think that `Flags` and the flags not being aligned is not\nintentional)\n\nThe test passes on FreeBSD, because the test looks for four hex numbers\nin a row and ignores the rest:\n\n    \".*Mapped address spaces:.*${hex}${ws}${hex}${ws}${hex}${ws}${hex}.*\"\n\nI suggest fixing it on Linux by moving the flags column to the same\nplace as in the FreeBSD output.  It makes things a bit more consistent\nbetween OSes, and we don't have to touch the test.\n\nAt the same time, make use of the actual length of the permission's\nstring to specify the number of characters to print.\n\nBefore this patch, the output looks like:\n\n          Start Addr           End Addr   Perms       Size     Offset objfile\n      0x55dd4b544000     0x55dd4b546000   r--p      0x2000        0x0 /usr/bin/sleep\n\nand after, it looks like:\n\n          Start Addr           End Addr       Size     Offset  Perms  objfile\n      0x5622ae662000     0x5622ae664000     0x2000        0x0  r--p   /usr/bin/sleep\n\nChange-Id: If0fc167b010b25f97a3c54e2f491df4973ccde8f",
    "tree": {
      "sha": "e512fbbb90af7158f1c26fb0aad5889091a2785c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e512fbbb90af7158f1c26fb0aad5889091a2785c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0b313e95a73ad567915c9c1135d3d49f39236325",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0b313e95a73ad567915c9c1135d3d49f39236325",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0b313e95a73ad567915c9c1135d3d49f39236325",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0b313e95a73ad567915c9c1135d3d49f39236325/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "11659552768f6b915a6bf5aa98dfb11ba0f004d0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/11659552768f6b915a6bf5aa98dfb11ba0f004d0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/11659552768f6b915a6bf5aa98dfb11ba0f004d0"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 12,
    "deletions": 10
  },
  "files": [
    {
      "sha": "d4868902ac319bc9a16441f774d2b9e9722fa7ef",
      "filename": "gdb/linux-tdep.c",
      "status": "modified",
      "additions": 12,
      "deletions": 10,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b313e95a73ad567915c9c1135d3d49f39236325/gdb/linux-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b313e95a73ad567915c9c1135d3d49f39236325/gdb/linux-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/linux-tdep.c?ref=0b313e95a73ad567915c9c1135d3d49f39236325",
      "patch": "@@ -892,15 +892,15 @@ linux_info_proc (struct gdbarch *gdbarch, const char *args,\n \t  printf_filtered (_(\"Mapped address spaces:\\n\\n\"));\n \t  if (gdbarch_addr_bit (gdbarch) == 32)\n \t    {\n-\t      printf_filtered (\"\\t%10s %10s %7s %10s %10s %s\\n\",\n-\t\t\t   \"Start Addr\", \"  End Addr\", \"Perms\",\n-\t\t\t   \"      Size\", \"    Offset\", \"objfile\");\n+\t      printf_filtered (\"\\t%10s %10s %10s %10s  %s %s\\n\",\n+\t\t\t       \"Start Addr\", \"  End Addr\", \"      Size\",\n+\t\t\t       \"    Offset\", \"Perms  \", \"objfile\");\n \t    }\n \t  else\n \t    {\n-\t      printf_filtered (\"  %18s %18s %7s %10s %10s %s\\n\",\n-\t\t\t   \"Start Addr\", \"  End Addr\", \"Perms\",\n-\t\t\t   \"      Size\", \"    Offset\", \"objfile\");\n+\t      printf_filtered (\"  %18s %18s %10s %10s  %s %s\\n\",\n+\t\t\t       \"Start Addr\", \"  End Addr\", \"      Size\",\n+\t\t\t       \"    Offset\", \"Perms \", \"objfile\");\n \t    }\n \n \t  char *saveptr;\n@@ -912,22 +912,24 @@ linux_info_proc (struct gdbarch *gdbarch, const char *args,\n \n \t      if (gdbarch_addr_bit (gdbarch) == 32)\n \t\t{\n-\t\t  printf_filtered (\"\\t%10s %10s %7.5s %10s %10s %s\\n\",\n+\t\t  printf_filtered (\"\\t%10s %10s %10s %10s  %-5.*s  %s\\n\",\n \t\t\t\t   paddress (gdbarch, m.addr),\n \t\t\t\t   paddress (gdbarch, m.endaddr),\n-\t\t\t\t   m.permissions.data (),\n \t\t\t\t   hex_string (m.endaddr - m.addr),\n \t\t\t\t   hex_string (m.offset),\n+\t\t\t\t   (int) m.permissions.size (),\n+\t\t\t\t   m.permissions.data (),\n \t\t\t\t   m.filename);\n \t\t}\n \t      else\n \t\t{\n-\t\t  printf_filtered (\"  %18s %18s %7.5s %10s %10s %s\\n\",\n+\t\t  printf_filtered (\"  %18s %18s %10s %10s  %-5.*s  %s\\n\",\n \t\t\t\t   paddress (gdbarch, m.addr),\n \t\t\t\t   paddress (gdbarch, m.endaddr),\n-\t\t\t\t   m.permissions.data (),\n \t\t\t\t   hex_string (m.endaddr - m.addr),\n \t\t\t\t   hex_string (m.offset),\n+\t\t\t\t   (int) m.permissions.size (),\n+\t\t\t\t   m.permissions.data (),\n \t\t\t\t   m.filename);\n \t\t}\n \t    }"
    }
  ]
}