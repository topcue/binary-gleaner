{
  "sha": "ec47b32a85294af959457ad19bd98dd13f6389fd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWM0N2IzMmE4NTI5NGFmOTU5NDU3YWQxOWJkOThkZDEzZjYzODlmZA==",
  "commit": {
    "author": {
      "name": "Mark Wielaard",
      "email": "mark@klomp.org",
      "date": "2020-09-23T14:31:14Z"
    },
    "committer": {
      "name": "Mark Wielaard",
      "email": "mark@klomp.org",
      "date": "2020-09-24T20:52:57Z"
    },
    "message": "binutils: Handle DWARF5 DW_FORM_ref_addr and DW_UT_partial.\n\ndwz in DWARF5 mode might produce DW_UT_partial unit types, which are\nthe same as DW_UT_compile unit types (but start with a DW_TAG_partial_unit)\nand it might produce DW_FORM_ref_addr to create a reference between\nunits. Accept both constructs.\n\nbinutils/ChangeLog:\n\n\t* dwarf.c (read_and_display_attr_value): Handle DW_FORM_ref_addr\n\tfor dwarf_version 5 just as version 3 and 4 (only 2 is different).\n\t(process_debug_info): Allow DW_UT_partial.",
    "tree": {
      "sha": "251b843adb9a3689d40d2d819d66fea9fc0cba05",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/251b843adb9a3689d40d2d819d66fea9fc0cba05"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ec47b32a85294af959457ad19bd98dd13f6389fd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ec47b32a85294af959457ad19bd98dd13f6389fd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ec47b32a85294af959457ad19bd98dd13f6389fd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ec47b32a85294af959457ad19bd98dd13f6389fd/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "29363cfa40b59aca282a0b3b2ba4c305f6ff8f79",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/29363cfa40b59aca282a0b3b2ba4c305f6ff8f79",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/29363cfa40b59aca282a0b3b2ba4c305f6ff8f79"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 10,
    "deletions": 2
  },
  "files": [
    {
      "sha": "8cd0fe0820f983dfab9ac198fbba5dab26095ef6",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ec47b32a85294af959457ad19bd98dd13f6389fd/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ec47b32a85294af959457ad19bd98dd13f6389fd/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=ec47b32a85294af959457ad19bd98dd13f6389fd",
      "patch": "@@ -1,3 +1,10 @@\n+2020-09-23  Mark Wielaard  <mark@klomp.org>\n+\n+\t* dwarf.c (read_and_display_attr_value): Handle DW_FORM_ref_addr\n+\tfor dwarf_version 5 just as version 3 and 4 (only 2 is\n+\tdifferent).\n+\t(process_debug_info): Allow DW_UT_partial.\n+\n 2020-09-24  Nick Clifton  <nickc@redhat.com>\n \n \tPR 26662"
    },
    {
      "sha": "9e98794ad66c08f5fd3b9086247f0dcec0488029",
      "filename": "binutils/dwarf.c",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ec47b32a85294af959457ad19bd98dd13f6389fd/binutils/dwarf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ec47b32a85294af959457ad19bd98dd13f6389fd/binutils/dwarf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/dwarf.c?ref=ec47b32a85294af959457ad19bd98dd13f6389fd",
      "patch": "@@ -2202,10 +2202,10 @@ read_and_display_attr_value (unsigned long           attribute,\n     case DW_FORM_ref_addr:\n       if (dwarf_version == 2)\n \tSAFE_BYTE_GET_AND_INC (uvalue, data, pointer_size, end);\n-      else if (dwarf_version == 3 || dwarf_version == 4)\n+      else if (dwarf_version > 2)\n \tSAFE_BYTE_GET_AND_INC (uvalue, data, offset_size, end);\n       else\n-\terror (_(\"Internal error: DWARF version is not 2, 3 or 4.\\n\"));\n+\terror (_(\"Internal error: DW_FORM_ref_addr is not supported in DWARF version 1.\\n\"));\n \n       break;\n \n@@ -3419,6 +3419,7 @@ process_debug_info (struct dwarf_section *           section,\n \t}\n \n       if (compunit.cu_unit_type != DW_UT_compile\n+\t  && compunit.cu_unit_type != DW_UT_partial\n \t  && compunit.cu_unit_type != DW_UT_type)\n \t{\n \t  warn (_(\"CU at offset %s contains corrupt or \""
    }
  ]
}