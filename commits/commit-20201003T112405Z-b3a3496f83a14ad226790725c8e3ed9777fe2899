{
  "sha": "b3a3496f83a14ad226790725c8e3ed9777fe2899",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjNhMzQ5NmY4M2ExNGFkMjI2NzkwNzI1YzhlM2VkOTc3N2ZlMjg5OQ==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-10-03T11:23:55Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-10-03T11:24:05Z"
    },
    "message": "x86: Update register operand check for AddrPrefixOpReg\n\nWhen the address size prefix applies to both the memory and the register\noperand, we need to extract the address size prefix from the register\noperand if the memory operand has no real registers, like symbol, DISP\nor symbol(%rip).\n\nNB: GCC always generates symbol(%rip) for RIP-relative addressing for\nboth x32 and x86-64.\n\nMove the .code16 tests in movdir.s to movdir-16bit to show the correct\noutput from objdump.\n\n\tPR gas/26685\n\t* config/tc-i386.c (process_suffix): Also check the register\n\toperand for the address size prefix if the memory operand has\n\tno real registers.\n\t* testsuite/gas/i386/enqcmd-16bit.d: New file.\n\t* testsuite/gas/i386/enqcmd-16bit.s: Likewise.\n\t* testsuite/gas/i386/movdir-16bit.d: Likewise.\n\t* testsuite/gas/i386/movdir-16bit.s: Likewise.\n\t* testsuite/gas/i386/enqcmd.s: Add tests with symbol and DISP.\n\t* testsuite/gas/i386/x86-64-enqcmd.s: Likewise.\n\t* testsuite/gas/i386/x86-64-movdir.s: Likewise.\n\t* testsuite/gas/i386/movdir.s: Add tests with symbol and DISP.\n\tRemove the .code16 test.\n\t* testsuite/gas/i386/i386.exp: Run movdir-16bit and enqcmd-16bit.\n\t* testsuite/gas/i386/x86-64-enqcmd-intel.d: Updated.\n\t* testsuite/gas/i386/x86-64-enqcmd.d: Likewise.\n\t* testsuite/gas/i386/x86-64-movdir-intel.d: Likewise.\n\t* testsuite/gas/i386/x86-64-movdir.d: Likewise.\n\t* testsuite/gas/i386/enqcmd-intel.d: Likewise.\n\t* testsuite/gas/i386/enqcmd.d: Likewise.\n\t* testsuite/gas/i386/movdir-intel.d: Likewise.\n\t* testsuite/gas/i386/movdir.d: Likewise.\n\t* testsuite/gas/i386/x86-64-enqcmd-intel.d: Likewise.\n\t* testsuite/gas/i386/x86-64-enqcmd.d: Likewise.\n\t* testsuite/gas/i386/x86-64-movdir-intel.d: Likewise.\n\t* testsuite/gas/i386/x86-64-movdir.d: Likewise.",
    "tree": {
      "sha": "013a3f6f00f3622c454cae156daf7f9e441b7a9b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/013a3f6f00f3622c454cae156daf7f9e441b7a9b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b3a3496f83a14ad226790725c8e3ed9777fe2899",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3a3496f83a14ad226790725c8e3ed9777fe2899",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b3a3496f83a14ad226790725c8e3ed9777fe2899",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3a3496f83a14ad226790725c8e3ed9777fe2899/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1fa1262d5a865a0f52c381f6465a3965e95c7904",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1fa1262d5a865a0f52c381f6465a3965e95c7904",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1fa1262d5a865a0f52c381f6465a3965e95c7904"
    }
  ],
  "stats": {
    "total": 256,
    "additions": 196,
    "deletions": 60
  },
  "files": [
    {
      "sha": "866a8b46baffe9f83a0eeb5b590685a81fb0b2f6",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -1,3 +1,32 @@\n+2020-10-03  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR gas/26685\n+\t* config/tc-i386.c (process_suffix): Also check the register\n+\toperand for the address size prefix if the memory operand has\n+\tno real registers.\n+\t* testsuite/gas/i386/enqcmd-16bit.d: New file.\n+\t* testsuite/gas/i386/enqcmd-16bit.s: Likewise.\n+\t* testsuite/gas/i386/movdir-16bit.d: Likewise.\n+\t* testsuite/gas/i386/movdir-16bit.s: Likewise.\n+\t* testsuite/gas/i386/enqcmd.s: Add tests with symbol and DISP.\n+\t* testsuite/gas/i386/x86-64-enqcmd.s: Likewise.\n+\t* testsuite/gas/i386/x86-64-movdir.s: Likewise.\n+\t* testsuite/gas/i386/movdir.s: Add tests with symbol and DISP.\n+\tRemove the .code16 test.\n+\t* testsuite/gas/i386/i386.exp: Run movdir-16bit and enqcmd-16bit.\n+\t* testsuite/gas/i386/x86-64-enqcmd-intel.d: Updated.\n+\t* testsuite/gas/i386/x86-64-enqcmd.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-movdir-intel.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-movdir.d: Likewise.\n+\t* testsuite/gas/i386/enqcmd-intel.d: Likewise.\n+\t* testsuite/gas/i386/enqcmd.d: Likewise.\n+\t* testsuite/gas/i386/movdir-intel.d: Likewise.\n+\t* testsuite/gas/i386/movdir.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-enqcmd-intel.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-enqcmd.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-movdir-intel.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-movdir.d: Likewise.\n+\n 2020-10-02  Nick Clifton  <nickc@redhat.com>\n \n \t* testsuite/gas/arm/mve-vcvtne-it.d: Allow for padding inserted by"
    },
    {
      "sha": "8f798479baa1cd138482d1ee3c96926b7468ceaf",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 9,
      "deletions": 5,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -7179,15 +7179,19 @@ process_suffix (void)\n \t  enum { need_word, need_dword, need_qword } need;\n \n \t  /* Check the register operand for the address size prefix if\n-\t     the memory operand is symbol(%rip).  */\n+\t     the memory operand has no real registers, like symbol, DISP\n+\t     or symbol(%rip).  */\n \t  if (i.mem_operands == 1\n \t      && i.reg_operands == 1\n \t      && i.operands == 2\n-\t      && i.base_reg\n-\t      && i.base_reg->reg_num == RegIP\n-\t      && i.base_reg->reg_type.bitfield.qword\n \t      && i.types[1].bitfield.class == Reg\n-\t      && i.op[1].regs->reg_type.bitfield.dword\n+\t      && (flag_code == CODE_32BIT\n+\t\t  ? i.op[1].regs->reg_type.bitfield.word\n+\t\t  : i.op[1].regs->reg_type.bitfield.dword)\n+\t      && ((i.base_reg == NULL && i.index_reg == NULL)\n+\t\t  || (i.base_reg\n+\t\t      && i.base_reg->reg_num == RegIP\n+\t\t      && i.base_reg->reg_type.bitfield.qword))\n \t      && !add_prefix (ADDR_PREFIX_OPCODE))\n \t    return 0;\n "
    },
    {
      "sha": "04e8706d291010b4296e61a49f6df1ed4f854523",
      "filename": "gas/testsuite/gas/i386/enqcmd-16bit.d",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-16bit.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-16bit.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/enqcmd-16bit.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -0,0 +1,21 @@\n+#as: -I${srcdir}/$subdir\n+#objdump: -dw -Mi8086\n+#name: i386 16-bit ENQCMD[S] insns\n+\n+.*: +file format .*\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 04       \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 04       \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n+#pass"
    },
    {
      "sha": "1f21cec363446a5e5ca0d2631ec51ee1896f9b43",
      "filename": "gas/testsuite/gas/i386/enqcmd-16bit.s",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-16bit.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-16bit.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/enqcmd-16bit.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -0,0 +1,4 @@\n+# Check ENQCMD[S] 16-bit instructions\n+\n+\t.code16\n+.include \"movdir.s\""
    },
    {
      "sha": "e1d30dacd70bf610454577976b17abc4836dd49a",
      "filename": "gas/testsuite/gas/i386/enqcmd-intel.d",
      "status": "modified",
      "additions": 17,
      "deletions": 9,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/enqcmd-intel.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -8,13 +8,21 @@\n \n Disassembly of section \\.text:\n \n-00000000 <_start>:\n-[ \t]*[a-f0-9]+:[ \t]*f2 0f 38 f8 01[ \t]*enqcmd eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 f2 0f 38 f8 04[ \t]*enqcmd ax,\\[si\\]\n-[ \t]*[a-f0-9]+:[ \t]*f3 0f 38 f8 01[ \t]*enqcmds eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 f3 0f 38 f8 04[ \t]*enqcmds ax,\\[si\\]\n-[ \t]*[a-f0-9]+:[ \t]*f2 0f 38 f8 01[ \t]*enqcmd eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 f2 0f 38 f8 04[ \t]*enqcmd ax,\\[si\\]\n-[ \t]*[a-f0-9]+:[ \t]*f3 0f 38 f8 01[ \t]*enqcmds eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 f3 0f 38 f8 04[ \t]*enqcmds ax,\\[si\\]\n+0+ <_start>:\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 04    \tenqcmd ax,\\[si\\]\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 04    \tenqcmds ax,\\[si\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 00 00 \tenqcmd cx,ds:0x0\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 34 12 \tenqcmd cx,ds:0x1234\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 00 00 \tenqcmds cx,ds:0x0\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 34 12 \tenqcmds cx,ds:0x1234\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 04    \tenqcmd ax,\\[si\\]\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 04    \tenqcmds ax,\\[si\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 00 00 \tenqcmd cx,ds:0x0\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 34 12 \tenqcmd cx,ds:0x1234\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 00 00 \tenqcmds cx,ds:0x0\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 34 12 \tenqcmds cx,ds:0x1234\n #pass"
    },
    {
      "sha": "99b9c0a729920f801a5900939fbc4fa3a3f5f70d",
      "filename": "gas/testsuite/gas/i386/enqcmd.d",
      "status": "modified",
      "additions": 17,
      "deletions": 9,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/enqcmd.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -8,13 +8,21 @@\n \n Disassembly of section \\.text:\n \n-00000000 <_start>:\n-[ \t]*[a-f0-9]+:[ \t]*f2 0f 38 f8 01[ \t]*enqcmd \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 f2 0f 38 f8 04[ \t]*enqcmd \\(%si\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*f3 0f 38 f8 01[ \t]*enqcmds \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 f3 0f 38 f8 04[ \t]*enqcmds \\(%si\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*f2 0f 38 f8 01[ \t]*enqcmd \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 f2 0f 38 f8 04[ \t]*enqcmd \\(%si\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*f3 0f 38 f8 01[ \t]*enqcmds \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 f3 0f 38 f8 04[ \t]*enqcmds \\(%si\\),%ax\n+0+ <_start>:\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 04    \tenqcmd \\(%si\\),%ax\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 04    \tenqcmds \\(%si\\),%ax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 00 00 \tenqcmd 0x0,%cx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 34 12 \tenqcmd 0x1234,%cx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 00 00 \tenqcmds 0x0,%cx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 34 12 \tenqcmds 0x1234,%cx\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 04    \tenqcmd \\(%si\\),%ax\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 04    \tenqcmds \\(%si\\),%ax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 00 00 \tenqcmd 0x0,%cx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0e 34 12 \tenqcmd 0x1234,%cx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 00 00 \tenqcmds 0x0,%cx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0e 34 12 \tenqcmds 0x1234,%cx\n #pass"
    },
    {
      "sha": "f7195fa7236ad9efdc99cc976790c34ace750dfb",
      "filename": "gas/testsuite/gas/i386/enqcmd.s",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/enqcmd.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/enqcmd.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -7,9 +7,17 @@ _start:\n \tenqcmd (%si),%ax\n \tenqcmds (%ecx),%eax\n \tenqcmds (%si),%ax\n+\tenqcmd foo, %cx\n+\tenqcmd 0x1234, %cx\n+\tenqcmds foo, %cx\n+\tenqcmds 0x1234, %cx\n \n \t.intel_syntax noprefix\n \tenqcmd eax,[ecx]\n \tenqcmd ax,[si]\n \tenqcmds eax,[ecx]\n \tenqcmds ax,[si]\n+\tenqcmd cx,ds:foo\n+\tenqcmd cx,ds:0x1234\n+\tenqcmds cx,ds:foo\n+\tenqcmds cx,ds:0x1234"
    },
    {
      "sha": "3a1ebda494aaab9bdf842ae34a72408e05984aeb",
      "filename": "gas/testsuite/gas/i386/i386.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/i386.exp?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -484,9 +484,11 @@ if [gas_32_check] then {\n     run_dump_test \"cldemote-intel\"\n     run_dump_test \"movdir\"\n     run_dump_test \"movdir-intel\"\n+    run_dump_test \"movdir-16bit\"\n     run_list_test \"movdir64b-reg\"\n     run_dump_test \"enqcmd\"\n     run_dump_test \"enqcmd-intel\"\n+    run_dump_test \"enqcmd-16bit\"\n     run_list_test \"enqcmd-inval\"\n     run_dump_test \"serialize\"\n     run_dump_test \"tdx\""
    },
    {
      "sha": "ac5d82507f1bc447ae09fb1964952286a12bd413",
      "filename": "gas/testsuite/gas/i386/movdir-16bit.d",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-16bit.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-16bit.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/movdir-16bit.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -0,0 +1,21 @@\n+#as: -I${srcdir}/$subdir\n+#objdump: -dw -Mi8086\n+#name: i386 16-bit MOVDIR[I,64B] insns\n+\n+.*: +file format .*\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 04       \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 0f 38 f9 01       \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 04       \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n+#pass"
    },
    {
      "sha": "27f5fda5a58b07f47be610bd0839b4f92ba0368e",
      "filename": "gas/testsuite/gas/i386/movdir-16bit.s",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-16bit.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-16bit.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/movdir-16bit.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -0,0 +1,4 @@\n+# Check MOVDIR[I,64B] 16-bit instructions\n+\n+\t.code16\n+.include \"movdir.s\""
    },
    {
      "sha": "56f4fa929a7c01523a1edd669218ccbf049004a5",
      "filename": "gas/testsuite/gas/i386/movdir-intel.d",
      "status": "modified",
      "additions": 12,
      "deletions": 15,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/movdir-intel.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -8,19 +8,16 @@\n \n Disassembly of section \\.text:\n \n-00000000 <_start>:\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri DWORD PTR \\[ecx\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 01[ \t]*movdir64b eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 04[ \t]*movdir64b ax,\\[si\\]\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri DWORD PTR \\[ecx\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri DWORD PTR \\[ecx\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 01[ \t]*movdir64b eax,\\[ecx\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 04[ \t]*movdir64b ax,\\[si\\]\n-[ \t]*[a-f0-9]+:[ \t]*67 0f 38 f9 01[ \t]*movdiri DWORD PTR \\[bx\\+di\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 01[ \t]*movdir64b ax,\\[bx\\+di\\]\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 04 67[ \t]*movdir64b eax,\\[edi\\+eiz\\*2\\]\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri DWORD PTR \\[ecx\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*67 0f 38 f9 01[ \t]*movdiri DWORD PTR \\[bx\\+di\\],eax\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 01[ \t]*movdir64b ax,\\[bx\\+di\\]\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 04 90[ \t]*movdir64b eax,\\[eax\\+edx\\*4\\]\n+0+ <_start>:\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[ecx\\],eax\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 04    \tmovdir64b ax,\\[si\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 00 00 \tmovdir64b cx,ds:0x0\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 34 12 \tmovdir64b cx,ds:0x1234\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[ecx\\],eax\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[ecx\\],eax\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b eax,\\[ecx\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 04    \tmovdir64b ax,\\[si\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 00 00 \tmovdir64b cx,ds:0x0\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 34 12 \tmovdir64b cx,ds:0x1234\n #pass"
    },
    {
      "sha": "a8f324bddec78acefbc73583094c1f970bf204fb",
      "filename": "gas/testsuite/gas/i386/movdir.d",
      "status": "modified",
      "additions": 12,
      "deletions": 15,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/movdir.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -8,19 +8,16 @@\n \n Disassembly of section \\.text:\n \n-00000000 <_start>:\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri %eax,\\(%ecx\\)\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 01[ \t]*movdir64b \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 04[ \t]*movdir64b \\(%si\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri %eax,\\(%ecx\\)\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri %eax,\\(%ecx\\)\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 01[ \t]*movdir64b \\(%ecx\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 04[ \t]*movdir64b \\(%si\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*67 0f 38 f9 01[ \t]*movdiri %eax,\\(%bx,%di\\)\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 01[ \t]*movdir64b \\(%bx,%di\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 04 67[ \t]*movdir64b \\(%edi,%eiz,2\\),%eax\n-[ \t]*[a-f0-9]+:[ \t]*0f 38 f9 01[ \t]*movdiri %eax,\\(%ecx\\)\n-[ \t]*[a-f0-9]+:[ \t]*67 0f 38 f9 01[ \t]*movdiri %eax,\\(%bx,%di\\)\n-[ \t]*[a-f0-9]+:[ \t]*67 66 0f 38 f8 01[ \t]*movdir64b \\(%bx,%di\\),%ax\n-[ \t]*[a-f0-9]+:[ \t]*66 0f 38 f8 04 90[ \t]*movdir64b \\(%eax,%edx,4\\),%eax\n+0+ <_start>:\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 04    \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%ecx\\)\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 04    \tmovdir64b \\(%si\\),%ax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 00 00 \tmovdir64b 0x0,%cx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0e 34 12 \tmovdir64b 0x1234,%cx\n #pass"
    },
    {
      "sha": "00c57db141a6e677d0481d161ec185ab8fac0cd0",
      "filename": "gas/testsuite/gas/i386/movdir.s",
      "status": "modified",
      "additions": 4,
      "deletions": 7,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/movdir.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/movdir.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -3,19 +3,16 @@\n \t.allow_index_reg\n \t.text\n _start:\n-\t.rept 2\n \tmovdiri %eax, (%ecx)\n \tmovdir64b (%ecx),%eax\n \tmovdir64b (%si),%ax\n+\tmovdir64b foo, %cx\n+\tmovdir64b 0x1234, %cx\n \n \t.intel_syntax noprefix\n \tmovdiri [ecx], eax\n \tmovdiri dword ptr [ecx], eax\n \tmovdir64b eax,[ecx]\n \tmovdir64b ax,[si]\n-\n-\t.att_syntax prefix\n-\t.code16\n-\t.endr\n-\n-\tnop\n+\tmovdir64b cx,ds:foo\n+\tmovdir64b cx,ds:0x1234"
    },
    {
      "sha": "d8dc7facba37a107ad8f833967fc15b79d3948fc",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -19,6 +19,10 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd ecx,\\[eiz\\*1\\+0x12345678\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds ecx,\\[eiz\\*1\\+0x12345678\\]\n  +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd rax,\\[rcx\\]\n  +[a-f0-9]+:\t67 f2 0f 38 f8 01    \tenqcmd eax,\\[ecx\\]\n  +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds rax,\\[rcx\\]\n@@ -29,4 +33,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd ecx,\\[eiz\\*1\\+0x12345678\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds ecx,\\[eiz\\*1\\+0x12345678\\]\n #pass"
    },
    {
      "sha": "e6f627ff09a2e753515299c5426d600f009ba406",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -19,6 +19,10 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds 0x12345678\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd \\(%rcx\\),%rax\n  +[a-f0-9]+:\t67 f2 0f 38 f8 01    \tenqcmd \\(%ecx\\),%eax\n  +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds \\(%rcx\\),%rax\n@@ -29,4 +33,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds 0x12345678\\(,%eiz,1\\),%ecx\n #pass"
    },
    {
      "sha": "a03a5ffc5f33fe4dba0bfb04781c8b5d4bf26ceb",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -13,6 +13,10 @@ _start:\n \tenqcmds foo(%rip),%rcx\n \tenqcmds foo(%rip),%ecx\n \tenqcmds foo(%eip),%ecx\n+\tenqcmd foo, %ecx\n+\tenqcmd 0x12345678, %ecx\n+\tenqcmds foo, %ecx\n+\tenqcmds 0x12345678, %ecx\n \n \t.intel_syntax noprefix\n \tenqcmd rax,[rcx]\n@@ -25,3 +29,7 @@ _start:\n \tenqcmds rcx,[rip+foo]\n \tenqcmds ecx,[rip+foo]\n \tenqcmds ecx,[eip+foo]\n+\tenqcmd ecx,ds:foo\n+\tenqcmd ecx,ds:0x12345678\n+\tenqcmds ecx,ds:foo\n+\tenqcmds ecx,ds:0x12345678"
    },
    {
      "sha": "a35bc6ca5d81ea2f029f96444f34d144bead3f04",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir-intel.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -15,6 +15,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b ecx,\\[eiz\\*1\\+0x12345678\\]\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[rcx\\],eax\n  +[a-f0-9]+:\t48 0f 38 f9 01       \tmovdiri QWORD PTR \\[rcx\\],rax\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[rcx\\],eax\n@@ -24,4 +26,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b ecx,\\[eiz\\*1\\+0x0\\]\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b ecx,\\[eiz\\*1\\+0x12345678\\]\n #pass"
    },
    {
      "sha": "d65787177dc4eac92d420f60efd0e2fe4d63b097",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir.d",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir.d?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -15,6 +15,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%rcx\\)\n  +[a-f0-9]+:\t48 0f 38 f9 01       \tmovdiri %rax,\\(%rcx\\)\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%rcx\\)\n@@ -24,4 +26,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n #pass"
    },
    {
      "sha": "ad69bb13223271263c768253965d2c0879affa56",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir.s",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3a3496f83a14ad226790725c8e3ed9777fe2899/gas/testsuite/gas/i386/x86-64-movdir.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir.s?ref=b3a3496f83a14ad226790725c8e3ed9777fe2899",
      "patch": "@@ -9,6 +9,8 @@ _start:\n \tmovdir64b foo(%rip),%rcx\n \tmovdir64b foo(%rip),%ecx\n \tmovdir64b foo(%eip),%ecx\n+\tmovdir64b foo, %ecx\n+\tmovdir64b 0x12345678, %ecx\n \n \t.intel_syntax noprefix\n \tmovdiri [rcx],eax\n@@ -20,3 +22,5 @@ _start:\n \tmovdir64b rcx,[rip+foo]\n \tmovdir64b ecx,[rip+foo]\n \tmovdir64b ecx,[eip+foo]\n+\tmovdir64b ecx,ds:foo\n+\tmovdir64b ecx,ds:0x12345678"
    }
  ]
}