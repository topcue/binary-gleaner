{
  "sha": "b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Yjk1M2U3MDM1NmZlYjYxNjFhMmMxYzViMThkYmViY2RiN2VhMGM5NA==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-03-30T13:16:26Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-03-30T13:16:26Z"
    },
    "message": "[gdb/testsuite] Add missing .debug_abbrev terminator in dw2-cu-size.S\n\nSince commit 27012aba8a6 \"Remove Irix 6 workaround from DWARF abbrev reader\"\nwe have:\n...\n(gdb) file dw2-cu-size^M\nReading symbols from dw2-cu-size...^M\nDW_FORM_strp pointing outside of .debug_str section [in module dw2-cu-size]^M\n(No debugging symbols found in dw2-cu-size)^M\n(gdb) ptype noloc^M\nNo symbol table is loaded.  Use the \"file\" command.^M\n(gdb) FAIL: gdb.dwarf2/dw2-cu-size.exp: ptype noloc\n...\n\nThe problem is a missing .debug_abbrev terminator in dw2-cu-size.S, which\ncauses the .debug_abbrev contribution to be merged with the next:\n...\n Number TAG (0x9b)\n   1      DW_TAG_compile_unit    [has children]\n    DW_AT_name         DW_FORM_string\n    DW_AT_producer     DW_FORM_string\n    DW_AT_language     DW_FORM_data1\n    DW_AT value: 0     DW_FORM value: 0\n   2      DW_TAG_variable    [no children]\n    DW_AT_name         DW_FORM_string\n    DW_AT_type         DW_FORM_ref4\n    DW_AT_external     DW_FORM_flag\n    DW_AT value: 0     DW_FORM value: 0\n   3      DW_TAG_base_type    [no children]\n    DW_AT_name         DW_FORM_string\n    DW_AT_byte_size    DW_FORM_data1\n    DW_AT_encoding     DW_FORM_data1\n    DW_AT value: 0     DW_FORM value: 0\n   4      DW_TAG_const_type    [no children]\n    DW_AT_type         DW_FORM_ref_udata\n    DW_AT value: 0     DW_FORM value: 0\n   1      DW_TAG_compile_unit    [has children]\n    DW_AT_producer     DW_FORM_strp\n    DW_AT_language     DW_FORM_data1\n    DW_AT_name         DW_FORM_strp\n    DW_AT_comp_dir     DW_FORM_strp\n    DW_AT_low_pc       DW_FORM_addr\n    DW_AT_high_pc      DW_FORM_data8\n    DW_AT_stmt_list    DW_FORM_sec_offset\n    DW_AT value: 0     DW_FORM value: 0\n...\nand consequently, abbreviation code 1 no longer refers to a unique entry.\n\nThe eventually causes us to access the first attribute of this DIE:\n...\n <0><124>: Abbrev Number: 1 (DW_TAG_compile_unit)\n    <125>   DW_AT_name        : file1.txt\n    <12f>   DW_AT_producer    : GNU C 3.3.3\n    <13b>   DW_AT_language    : 1       (ANSI C)\n...\nwhich has form DW_FORM_string, using DW_FORM_strp.\n\nFix this by adding the missing .debug_abbrev terminator in dw2-cu-size.S.\n\ngdb/testsuite/ChangeLog:\n\n2021-03-30  Tom de Vries  <tdevries@suse.de>\n\n\tPR testsuite/27604\n\t* gdb.dwarf2/dw2-cu-size.S: Add missing .debug_abbrev terminator.",
    "tree": {
      "sha": "4a285e4337d52672015903ff4ef255733520a261",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4a285e4337d52672015903ff4ef255733520a261"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "782c1ab836f73e9f18ad615a464b9dea92754f05",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/782c1ab836f73e9f18ad615a464b9dea92754f05",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/782c1ab836f73e9f18ad615a464b9dea92754f05"
    }
  ],
  "stats": {
    "total": 8,
    "additions": 8,
    "deletions": 0
  },
  "files": [
    {
      "sha": "f70d56417a1a3685030621c6282610d4c28f9016",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
      "patch": "@@ -1,3 +1,8 @@\n+2021-03-30  Tom de Vries  <tdevries@suse.de>\n+\n+\tPR testsuite/27604\n+\t* gdb.dwarf2/dw2-cu-size.S: Add missing .debug_abbrev terminator.\n+\n 2021-03-29  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \t* gdb.mi/user-selected-context-sync.exp: Spin on a variable in"
    },
    {
      "sha": "ebbfdb29c5c8720a972a52639b91e0698ad6079e",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-cu-size.S",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94/gdb/testsuite/gdb.dwarf2/dw2-cu-size.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b953e70356feb6161a2c1c5b18dbebcdb7ea0c94/gdb/testsuite/gdb.dwarf2/dw2-cu-size.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-cu-size.S?ref=b953e70356feb6161a2c1c5b18dbebcdb7ea0c94",
      "patch": "@@ -104,3 +104,6 @@\n \n \t.byte\t\t0x0\t\t\t/* Terminator */\n \t.byte\t\t0x0\t\t\t/* Terminator */\n+\n+\t.byte\t\t0x0\t\t\t/* Terminator .debug_abbrev\n+\t\t\t\t\t\t   section.  */"
    }
  ]
}