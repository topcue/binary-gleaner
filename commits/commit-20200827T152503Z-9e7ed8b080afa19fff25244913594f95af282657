{
  "sha": "9e7ed8b080afa19fff25244913594f95af282657",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWU3ZWQ4YjA4MGFmYTE5ZmZmMjUyNDQ5MTM1OTRmOTVhZjI4MjY1Nw==",
  "commit": {
    "author": {
      "name": "John David Anglin",
      "email": "danglin@gcc.gnu.org",
      "date": "2020-08-27T15:25:03Z"
    },
    "committer": {
      "name": "John David Anglin",
      "email": "danglin@gcc.gnu.org",
      "date": "2020-08-27T15:25:03Z"
    },
    "message": "Fix PR binutils/26356 on hppa*-*-hpux*.\n\n\tPR 26356\n\t* som.c (som_bfd_copy_private_section_data): Issue error when a\n\tsubspace is specified without its containing space.\n\t* testsuite/binutils-all/objcopy.exp (objcopy --reverse-bytes): Add\n\t\"-j $PRIVATE$\" to command on hppa*-*-hpux*.\n\t* testsuite/lib/utils-lib.exp (default_binutils_run): Remove existing\n\tdollar-sign quotes before quoting.  Do this prior to generating log\n\toutput.",
    "tree": {
      "sha": "e7f674d3c99c6e7a3c5b8ccab397a68d039e8810",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e7f674d3c99c6e7a3c5b8ccab397a68d039e8810"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9e7ed8b080afa19fff25244913594f95af282657",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9e7ed8b080afa19fff25244913594f95af282657",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9e7ed8b080afa19fff25244913594f95af282657",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9e7ed8b080afa19fff25244913594f95af282657/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "6b5473c97e98828d6d8509b13a257efbed308bad",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6b5473c97e98828d6d8509b13a257efbed308bad",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6b5473c97e98828d6d8509b13a257efbed308bad"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 39,
    "deletions": 11
  },
  "files": [
    {
      "sha": "7700973bf966fda5f9e4534a4163e1b7338a4f38",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9e7ed8b080afa19fff25244913594f95af282657/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9e7ed8b080afa19fff25244913594f95af282657/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=9e7ed8b080afa19fff25244913594f95af282657",
      "patch": "@@ -1,3 +1,9 @@\n+2020-08-27  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\tPR 26356\n+\t* som.c (som_bfd_copy_private_section_data): Issue error when a\n+\tsubspace is specified without its containing space.\n+\n 2020-08-27  Alan Modra  <amodra@gmail.com>\n \n \tPR 26469"
    },
    {
      "sha": "d3865f0ef6ecc4e9fabeb42314086954c1d9ca13",
      "filename": "bfd/som.c",
      "status": "modified",
      "additions": 12,
      "deletions": 2,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9e7ed8b080afa19fff25244913594f95af282657/bfd/som.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9e7ed8b080afa19fff25244913594f95af282657/bfd/som.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/som.c?ref=9e7ed8b080afa19fff25244913594f95af282657",
      "patch": "@@ -5455,8 +5455,18 @@ som_bfd_copy_private_section_data (bfd *ibfd,\n \n   /* Reparent if necessary.  */\n   if (som_section_data (osection)->copy_data->container)\n-    som_section_data (osection)->copy_data->container =\n-      som_section_data (osection)->copy_data->container->output_section;\n+    {\n+      if (som_section_data (osection)->copy_data->container->output_section)\n+\tsom_section_data (osection)->copy_data->container =\n+\t  som_section_data (osection)->copy_data->container->output_section;\n+      else\n+\t{\n+\t  /* User has specified a subspace without its containing space.  */\n+\t  _bfd_error_handler (_(\"%pB[%pA]: no output section for space %pA\"),\n+\t    obfd, osection, som_section_data (osection)->copy_data->container);\n+\t  return FALSE;\n+\t}\n+    }\n \n   return TRUE;\n }"
    },
    {
      "sha": "e5e33867200dcb6105827076067af35a52b2fdc6",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9e7ed8b080afa19fff25244913594f95af282657/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9e7ed8b080afa19fff25244913594f95af282657/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=9e7ed8b080afa19fff25244913594f95af282657",
      "patch": "@@ -1,3 +1,12 @@\n+2020-08-27  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\tPR 26356\n+\t* testsuite/binutils-all/objcopy.exp (objcopy --reverse-bytes): Add\n+\t\"-j $PRIVATE$\" to command on hppa*-*-hpux*.\n+\t* testsuite/lib/utils-lib.exp (default_binutils_run): Remove existing\n+\tdollar-sign quotes before quoting.  Do this prior to generating log\n+\toutput.\n+\n 2020-08-27  Ralf Habacker  <ralf.habacker@freenet.de>\n \n \tPR 26088"
    },
    {
      "sha": "9877f3d3107fd7b1f6c34a896f8b1d81744dd621",
      "filename": "binutils/testsuite/binutils-all/objcopy.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9e7ed8b080afa19fff25244913594f95af282657/binutils/testsuite/binutils-all/objcopy.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9e7ed8b080afa19fff25244913594f95af282657/binutils/testsuite/binutils-all/objcopy.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/objcopy.exp?ref=9e7ed8b080afa19fff25244913594f95af282657",
      "patch": "@@ -170,7 +170,11 @@ if { [file exists $tempfile] } {\n     set reversed ${tempfile}-reversed\n     set sect_names [get_standard_section_names]\n     if { $sect_names != \"\" } {\n-\tset got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS -j [lindex $sect_names 1] --reverse-bytes=4 $tempfile $reversed\"]\n+\tif { [istarget hppa*-*-hpux*] } {\n+\t    set got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS -j \\$PRIVATE\\$ -j [lindex $sect_names 1] --reverse-bytes=4 $tempfile $reversed\"]\n+\t} else {\n+\t    set got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS -j [lindex $sect_names 1] --reverse-bytes=4 $tempfile $reversed\"]\n+\t}\n     } else {\n \tset got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS -j .data --reverse-bytes=4 $tempfile $reversed\"]\n     }\n@@ -191,10 +195,6 @@ if { [file exists $tempfile] } {\n \tset found_rev [regexp -lineanchor $want $revdata -> revdata]\n \n \tif {$found_orig == 0 || $found_rev == 0} then {\n-\t    # som doesn't have a .data section\n-\t    setup_xfail \"hppa*-*-hpux*\"\n-\t    clear_xfail \"hppa*64*-*-hpux*\"\n-\n \t    fail \"objcopy --reverse-bytes\"\n \t} else {\n \t    scan $origdata \"%2x%2x%2x%2x\" b1 b2 b3 b4"
    },
    {
      "sha": "56ac0cda320da3822790539cdf1ea5d7c7c387d2",
      "filename": "binutils/testsuite/lib/utils-lib.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 4,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9e7ed8b080afa19fff25244913594f95af282657/binutils/testsuite/lib/utils-lib.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9e7ed8b080afa19fff25244913594f95af282657/binutils/testsuite/lib/utils-lib.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/lib/utils-lib.exp?ref=9e7ed8b080afa19fff25244913594f95af282657",
      "patch": "@@ -80,13 +80,16 @@ proc default_binutils_run { prog progargs } {\n         regsub -- \"-j \\\\.bss\"  $progargs \"-j [lindex $sect_names 2]\" progargs\n     }\n \n+    # Gotta quote dollar-signs because they get mangled by the\n+    # shell otherwise.  Since get_standard_section_names returns\n+    # quoted section names, we first remove the original quote\n+    # and then requote.\n+    regsub -all {\\\\\\$} \"$progargs\" {$} progargs\n+    regsub -all {\\$} \"$progargs\" {\\$} progargs\n+\n     send_log \"$prog $progargs\\n\"\n     verbose \"$prog $progargs\"\n \n-    # Gotta quote dollar-signs because they get mangled by the\n-    # shell otherwise.\n-    regsub -all \"\\\\$\" \"$progargs\" \"\\\\$\" progargs\n-\n     set state [remote_exec host $prog $progargs]\n     set binutils_run_status [lindex $state 0]\n     set exec_output [prune_warnings [lindex $state 1]]"
    }
  ]
}