{
  "sha": "b3e4d9326faf88d83745379f254d56b8a8324b63",
  "node_id": "C_kwDOANOeidoAKGIzZTRkOTMyNmZhZjg4ZDgzNzQ1Mzc5ZjI1NGQ1NmI4YTgzMjRiNjM",
  "commit": {
    "author": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2021-12-16T09:32:00Z"
    },
    "committer": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2021-12-16T09:32:00Z"
    },
    "message": "arm: Add support for Armv8.7-A and Armv8.8-A\n\nThis patch adds AArch32 support for -march=armv8.[78]-a.\nThe behaviour of the new options can be expressed using a\ncombination of existing feature flags and tables.\n\nThe cpu_arch_ver entries are technically redundant but\nit seemed less surprising to include them anyway.\n\ninclude/\n\t* opcode/arm.h (ARM_ARCH_V8_7A, ARM_ARCH_V8_8A): New macros.\n\ngas/\n\t* doc/c-arm.texi: Add armv8.7-a and armv8.8-a.\n\t* config/tc-arm.c (armv87a_ext_table, armv88a_ext_table): New macros.\n\t(arm_archs): Add armv8.7-a and armv8.8-a.\n\t(cpu_arch_ver): Add ARM_ARCH_V8_7A and ARM_ARCH_V8_8A.\n\t* NEWS: Mention the above.\n\t* testsuite/gas/arm/attr-march-armv8_7-a.d: New test.\n\t* testsuite/gas/arm/attr-march-armv8_8-a.d: Likewise.\n\t* testsuite/gas/arm/bfloat16-armv8.7-a.d: Likewise.\n\t* testsuite/gas/arm/bfloat16-armv8.8-a.d: Likewise.\n\t* testsuite/gas/arm/i8mm-armv8.7-a.d: Likewise.\n\t* testsuite/gas/arm/i8mm-armv8.8-a.d: Likewise.",
    "tree": {
      "sha": "e7bfa6bcfcde9b2cd862001af4e75f59d4310820",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e7bfa6bcfcde9b2cd862001af4e75f59d4310820"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b3e4d9326faf88d83745379f254d56b8a8324b63",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3e4d9326faf88d83745379f254d56b8a8324b63",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b3e4d9326faf88d83745379f254d56b8a8324b63",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3e4d9326faf88d83745379f254d56b8a8324b63/comments",
  "author": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3518022233e6b757c57d3deb7723fd91214fe036",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3518022233e6b757c57d3deb7723fd91214fe036",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3518022233e6b757c57d3deb7723fd91214fe036"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 67,
    "deletions": 1
  },
  "files": [
    {
      "sha": "82d5aa54260e3f6a15de9476c8b35b4b3f1c7817",
      "filename": "gas/NEWS",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/NEWS?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -31,7 +31,8 @@\n * Add support for 'armv8.8-a', 'armv9-a', 'armv9.1-a', 'armv9.2-a' and\n   'armv9.3-a' for -march in AArch64 GAS.\n \n-* Add support for 'armv9-a' for -march in Arm GAS.\n+* Add support for 'armv8.7-a', 'armv8.8-a', and 'armv9-a' for -march\n+  in Arm GAS.\n \n * Add support for Intel AVX512_FP16 instructions.\n "
    },
    {
      "sha": "50320fe31a229c06893e431afd3f1dcb4e28710f",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -31954,6 +31954,9 @@ static const struct arm_ext_table armv86a_ext_table[] =\n   { NULL, 0, ARM_ARCH_NONE, ARM_ARCH_NONE }\n };\n \n+#define armv87a_ext_table armv86a_ext_table\n+#define armv88a_ext_table armv87a_ext_table\n+\n static const struct arm_ext_table armv9a_ext_table[] =\n {\n   ARM_ADD (\"simd\", FPU_ARCH_DOTPROD_NEON_VFP_ARMV8),\n@@ -32091,6 +32094,8 @@ static const struct arm_arch_option_table arm_archs[] =\n   ARM_ARCH_OPT2 (\"armv8.4-a\",\t  ARM_ARCH_V8_4A,\tFPU_ARCH_VFP, armv84a),\n   ARM_ARCH_OPT2 (\"armv8.5-a\",\t  ARM_ARCH_V8_5A,\tFPU_ARCH_VFP, armv85a),\n   ARM_ARCH_OPT2 (\"armv8.6-a\",\t  ARM_ARCH_V8_6A,\tFPU_ARCH_VFP, armv86a),\n+  ARM_ARCH_OPT2 (\"armv8.7-a\",\t  ARM_ARCH_V8_7A,\tFPU_ARCH_VFP, armv87a),\n+  ARM_ARCH_OPT2 (\"armv8.8-a\",\t  ARM_ARCH_V8_8A,\tFPU_ARCH_VFP, armv88a),\n   ARM_ARCH_OPT2 (\"armv9-a\",\t  ARM_ARCH_V9A,\tFPU_ARCH_VFP, armv9a),\n   ARM_ARCH_OPT (\"xscale\",\t  ARM_ARCH_XSCALE,\tFPU_ARCH_VFP),\n   ARM_ARCH_OPT (\"iwmmxt\",\t  ARM_ARCH_IWMMXT,\tFPU_ARCH_VFP),\n@@ -32875,6 +32880,8 @@ static const cpu_arch_ver_table cpu_arch_ver[] =\n     {TAG_CPU_ARCH_V8,\t      ARM_ARCH_V8_5A},\n     {TAG_CPU_ARCH_V8_1M_MAIN, ARM_ARCH_V8_1M_MAIN},\n     {TAG_CPU_ARCH_V8,\t    ARM_ARCH_V8_6A},\n+    {TAG_CPU_ARCH_V8,\t    ARM_ARCH_V8_7A},\n+    {TAG_CPU_ARCH_V8,\t    ARM_ARCH_V8_8A},\n     {TAG_CPU_ARCH_V9,\t    ARM_ARCH_V9A},\n     {-1,\t\t    ARM_ARCH_NONE}\n };"
    },
    {
      "sha": "49a912760293bf8b8bd7ae7d675431e91cec680c",
      "filename": "gas/doc/c-arm.texi",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/doc/c-arm.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/doc/c-arm.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/c-arm.texi?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -265,6 +265,8 @@ names are recognized:\n @code{armv8-m.main},\n @code{armv8.1-m.main},\n @code{armv8.6-a},\n+@code{armv8.7-a},\n+@code{armv8.8-a},\n @code{armv9-a},\n @code{iwmmxt},\n @code{iwmmxt2}"
    },
    {
      "sha": "38f04297c2ff46c81351a14aeefb7680206f8e4f",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8_7-a.d",
      "status": "added",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/attr-march-armv8_7-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/attr-march-armv8_7-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8_7-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,17 @@\n+# name: attributes for -march=armv8.7-a\n+# source: blank.s\n+# as: -march=armv8.7-a\n+# readelf: -A\n+# This test is only valid on EABI based ports.\n+# target: *-*-*eabi* *-*-nacl*\n+\n+Attribute Section: aeabi\n+File Attributes\n+  Tag_CPU_name: \"8.7-A\"\n+  Tag_CPU_arch: v8\n+  Tag_CPU_arch_profile: Application\n+  Tag_ARM_ISA_use: Yes\n+  Tag_THUMB_ISA_use: Thumb-2\n+  Tag_Advanced_SIMD_arch: NEON for ARMv8.1\n+  Tag_MPextension_use: Allowed\n+  Tag_Virtualization_use: TrustZone and Virtualization Extensions"
    },
    {
      "sha": "64db00092906e8669462737649642d6cc6338e67",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8_8-a.d",
      "status": "added",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/attr-march-armv8_8-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/attr-march-armv8_8-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8_8-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,17 @@\n+# name: attributes for -march=armv8.8-a\n+# source: blank.s\n+# as: -march=armv8.8-a\n+# readelf: -A\n+# This test is only valid on EABI based ports.\n+# target: *-*-*eabi* *-*-nacl*\n+\n+Attribute Section: aeabi\n+File Attributes\n+  Tag_CPU_name: \"8.8-A\"\n+  Tag_CPU_arch: v8\n+  Tag_CPU_arch_profile: Application\n+  Tag_ARM_ISA_use: Yes\n+  Tag_THUMB_ISA_use: Thumb-2\n+  Tag_Advanced_SIMD_arch: NEON for ARMv8.1\n+  Tag_MPextension_use: Allowed\n+  Tag_Virtualization_use: TrustZone and Virtualization Extensions"
    },
    {
      "sha": "c898958a27aefcafe213f70cb8a2cf97d56caedf",
      "filename": "gas/testsuite/gas/arm/bfloat16-armv8.7-a.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/bfloat16-armv8.7-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/bfloat16-armv8.7-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/bfloat16-armv8.7-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,5 @@\n+#name: Bfloat 16 extension (Armv8.7-A)\n+#source: bfloat16.s\n+#as: -mno-warn-deprecated -march=armv8.7-a+simd -I$srcdir/$subdir\n+#objdump: -dr --show-raw-insn\n+#..."
    },
    {
      "sha": "074162421a75e0ba78f939635b9eb6be577823cc",
      "filename": "gas/testsuite/gas/arm/bfloat16-armv8.8-a.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/bfloat16-armv8.8-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/bfloat16-armv8.8-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/bfloat16-armv8.8-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,5 @@\n+#name: Bfloat 16 extension (Armv8.8-A)\n+#source: bfloat16.s\n+#as: -mno-warn-deprecated -march=armv8.8-a+simd -I$srcdir/$subdir\n+#objdump: -dr --show-raw-insn\n+#..."
    },
    {
      "sha": "881060bbe7a94193e5ae113b923caaeb7184d5bb",
      "filename": "gas/testsuite/gas/arm/i8mm-armv8.7-a.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/i8mm-armv8.7-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/i8mm-armv8.7-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/i8mm-armv8.7-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,5 @@\n+#name: Int8 Matrix Multiply extension (Armv8.7-A)\n+#source: i8mm.s\n+#as: -mno-warn-deprecated -march=armv8.7-a+i8mm+simd -I$srcdir/$subdir\n+#objdump: -dr --show-raw-insn\n+#..."
    },
    {
      "sha": "ab15b31f9f2803d28e1c401cdafbc68c220418fa",
      "filename": "gas/testsuite/gas/arm/i8mm-armv8.8-a.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/i8mm-armv8.8-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/gas/testsuite/gas/arm/i8mm-armv8.8-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/i8mm-armv8.8-a.d?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -0,0 +1,5 @@\n+#name: Int8 Matrix Multiply extension (Armv8.8-A)\n+#source: i8mm.s\n+#as: -mno-warn-deprecated -march=armv8.8-a+i8mm+simd -I$srcdir/$subdir\n+#objdump: -dr --show-raw-insn\n+#..."
    },
    {
      "sha": "8cf4856b0d69a9450f69bbb23043db10c8248909",
      "filename": "include/opcode/arm.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b3e4d9326faf88d83745379f254d56b8a8324b63/include/opcode/arm.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b3e4d9326faf88d83745379f254d56b8a8324b63/include/opcode/arm.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/arm.h?ref=b3e4d9326faf88d83745379f254d56b8a8324b63",
      "patch": "@@ -377,6 +377,8 @@\n #define ARM_ARCH_V8_6A\t ARM_FEATURE (ARM_AEXT_V8A, ARM_AEXT2_V8_6A\t   \\\n \t\t\t\t      | ARM_EXT2_CRC, FPU_NEON_EXT_RDMA\t   \\\n \t\t\t\t\t\t    | FPU_NEON_EXT_DOTPROD)\n+#define ARM_ARCH_V8_7A\t ARM_ARCH_V8_6A\n+#define ARM_ARCH_V8_8A\t ARM_ARCH_V8_7A\n #define ARM_ARCH_V8M_BASE      ARM_FEATURE_CORE (ARM_AEXT_V8M_BASE,\t   \\\n \t\t\t\t\t\t ARM_AEXT2_V8M_BASE)\n #define ARM_ARCH_V8M_MAIN      ARM_FEATURE_CORE (ARM_AEXT_V8M_MAIN,\t   \\"
    }
  ]
}