{
  "sha": "a190fabbfc6cca47d572550419f80c55802f3056",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTE5MGZhYmJmYzZjY2E0N2Q1NzI1NTA0MTlmODBjNTU4MDJmMzA1Ng==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-09-19T17:54:49Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-09-19T17:54:49Z"
    },
    "message": "Use gdb_bfd_sections in core_target_open\n\nThis changes core_target_open to avoid bfd_map_over_sections, in favor\nof iteration.\n\ngdb/ChangeLog\n2020-09-19  Tom Tromey  <tom@tromey.com>\n\n\t* corelow.c (add_to_thread_list): Change parameters.\n\t(core_target_open): Use foreach.",
    "tree": {
      "sha": "5d5f72ee0e0b4a293d05e0748a761f1888174b96",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5d5f72ee0e0b4a293d05e0748a761f1888174b96"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a190fabbfc6cca47d572550419f80c55802f3056",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a190fabbfc6cca47d572550419f80c55802f3056",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a190fabbfc6cca47d572550419f80c55802f3056",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a190fabbfc6cca47d572550419f80c55802f3056/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cafb0d81315ed3f8b4756a30e0c58fd73c161015",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cafb0d81315ed3f8b4756a30e0c58fd73c161015",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cafb0d81315ed3f8b4756a30e0c58fd73c161015"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 9,
    "deletions": 6
  },
  "files": [
    {
      "sha": "7e5201ee4b6fa24a4278116d6680e36ed976f446",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a190fabbfc6cca47d572550419f80c55802f3056/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a190fabbfc6cca47d572550419f80c55802f3056/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=a190fabbfc6cca47d572550419f80c55802f3056",
      "patch": "@@ -1,3 +1,8 @@\n+2020-09-19  Tom Tromey  <tom@tromey.com>\n+\n+\t* corelow.c (add_to_thread_list): Change parameters.\n+\t(core_target_open): Use foreach.\n+\n 2020-09-19  Tom Tromey  <tom@tromey.com>\n \n \t* gdb_bfd.h (gdb_bfd_sections): New overload.  Fix formatting of"
    },
    {
      "sha": "de15895c80b5634602ac56bf642f3549c65cf962",
      "filename": "gdb/corelow.c",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a190fabbfc6cca47d572550419f80c55802f3056/gdb/corelow.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a190fabbfc6cca47d572550419f80c55802f3056/gdb/corelow.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/corelow.c?ref=a190fabbfc6cca47d572550419f80c55802f3056",
      "patch": "@@ -290,8 +290,6 @@ core_target::build_file_mappings ()\n   normalize_mem_ranges (&m_core_unavailable_mappings);\n }\n \n-static void add_to_thread_list (bfd *, asection *, void *);\n-\n /* An arbitrary identifier for the core inferior.  */\n #define CORELOW_PID 1\n \n@@ -322,11 +320,10 @@ core_target::close ()\n    extract the list of threads in a core file.  */\n \n static void\n-add_to_thread_list (bfd *abfd, asection *asect, void *reg_sect_arg)\n+add_to_thread_list (asection *asect, asection *reg_sect)\n {\n   int core_tid;\n   int pid, lwpid;\n-  asection *reg_sect = (asection *) reg_sect_arg;\n   bool fake_pid_p = false;\n   struct inferior *inf;\n \n@@ -493,8 +490,9 @@ core_target_open (const char *arg, int from_tty)\n   /* Build up thread list from BFD sections, and possibly set the\n      current thread to the .reg/NN section matching the .reg\n      section.  */\n-  bfd_map_over_sections (core_bfd, add_to_thread_list,\n-\t\t\t bfd_get_section_by_name (core_bfd, \".reg\"));\n+  asection *reg_sect = bfd_get_section_by_name (core_bfd, \".reg\");\n+  for (asection *sect : gdb_bfd_sections (core_bfd))\n+    add_to_thread_list (sect, reg_sect);\n \n   if (inferior_ptid == null_ptid)\n     {"
    }
  ]
}