{
  "sha": "d54c09b99e6470e32d848a531f676734978a8951",
  "node_id": "C_kwDOANOeidoAKGQ1NGMwOWI5OWU2NDcwZTMyZDg0OGE1MzFmNjc2NzM0OTc4YTg5NTE",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-03T07:08:53Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-03T19:14:55Z"
    },
    "message": "sim: ppc: switch to common builds for callback objects\n\nWe don't need to build this anymore ourselves since the common build\nincludes it and produces the same object code.  We also need to pull\nin the split constant modules after the refactoring and pulling them\nout of nltvals.def & targ-map.o.  This doesn't matter for the sim\ndirectly, but does for gdb and other users of libsim.\n\nWe also delete some conditional source tree logic since we already\nrequire this be the \"new\" combined tree with a ../common/ dir.  This\nhas been the case for decades at this point.",
    "tree": {
      "sha": "7cb7145ea6026ca16c9575f8a91027472ae59764",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7cb7145ea6026ca16c9575f8a91027472ae59764"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d54c09b99e6470e32d848a531f676734978a8951",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d54c09b99e6470e32d848a531f676734978a8951",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d54c09b99e6470e32d848a531f676734978a8951",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d54c09b99e6470e32d848a531f676734978a8951/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a1700a3199d31910b87cd7db3c394ddd091cfcde",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a1700a3199d31910b87cd7db3c394ddd091cfcde",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a1700a3199d31910b87cd7db3c394ddd091cfcde"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 6,
    "deletions": 37
  },
  "files": [
    {
      "sha": "2f8fe9b20b0e0f09c14bafe4791d398a1aba1181",
      "filename": "sim/ppc/Makefile.in",
      "status": "modified",
      "additions": 6,
      "deletions": 5,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/Makefile.in?ref=d54c09b99e6470e32d848a531f676734978a8951",
      "patch": "@@ -430,7 +430,7 @@ BUILT_SRC_WO_CONFIG = \\\n \tpk.h \\\n \thw.h hw.c \\\n \tfilter_host.c \\\n-\t@sim_targ_vals@\n+\ttarg-vals.h targ-map.c targ-vals.def\n \n BUILT_SRC = \\\n \t$(BUILT_SRC_WO_CONFIG) \\\n@@ -469,6 +469,10 @@ MAIN_SRC = \\\n \tsim_calls.c\n \n COMMON_OBJS_NAMES = \\\n+\tcallback.o \\\n+\ttarget-newlib-errno.o \\\n+\ttarget-newlib-open.o \\\n+\ttarget-newlib-signal.o \\\n \tversion.o\n COMMON_OBJS = $(COMMON_OBJS_NAMES:%=../common/common_libcommon_a-%)\n \n@@ -511,7 +515,7 @@ LIB_OBJ = \\\n \toptions.o\n \n \n-GDB_OBJ = gdb-sim.o sim_calls.o @sim_callback@\n+GDB_OBJ = gdb-sim.o sim_calls.o targ-map.o\n \n HW_SRC = @sim_hw_src@\n HW_OBJ = @sim_hw_obj@\n@@ -616,9 +620,6 @@ stamp-map: Makefile gentmap $(srcroot)/move-if-change\n \t$(SILENCE) $(SHELL) $(srcroot)/move-if-change tmp-map.c targ-map.c\n \t$(SILENCE) touch $@\n \n-callback.o: $(srcdir)/../common/callback.c $(TARG_VALS_H) $(CONFIG_H)\n-\t$(ECHO_CC) $(CC) -c $(STD_CFLAGS) -DHAVE_CONFIG_H $(srcdir)/../common/callback.c\n-\n targ-map.o: targ-map.c $(ANSIDECL_H) $(GDB_CALLBACK_H) $(TARG_VALS_H)\n \n sim-fpu.o: $(srcdir)/../common/sim-fpu.c $(CONFIG_H)"
    },
    {
      "sha": "24531ee1820858bbcda58e185e43da7d0f6a73a5",
      "filename": "sim/ppc/configure",
      "status": "modified",
      "additions": 0,
      "deletions": 18,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/configure?ref=d54c09b99e6470e32d848a531f676734978a8951",
      "patch": "@@ -623,8 +623,6 @@ ac_subst_vars='LTLIBOBJS\n LIBOBJS\n sim_fpu\n sim_fpu_cflags\n-sim_targ_vals\n-sim_callback\n sim_devzero\n sim_termio\n sim_model_issue\n@@ -4123,20 +4121,6 @@ else\n   sim_devzero=\"\"\n fi\n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for common simulator directory\" >&5\n-$as_echo_n \"checking for common simulator directory... \" >&6; }\n-if test -f \"${srcdir}/../common/callback.c\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: yes\" >&5\n-$as_echo \"yes\" >&6; }\n-  sim_callback=\"callback.o targ-map.o\"\n-  sim_targ_vals=\"targ-vals.h targ-map.c targ-vals.def\"\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-  sim_callback=\"\"\n-  sim_targ_vals=\"\"\n-fi\n-\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for common simulator directory fpu implementation\" >&5\n $as_echo_n \"checking for common simulator directory fpu implementation... \" >&6; }\n if test -f \"${srcdir}/../common/sim-fpu.c\"; then\n@@ -4208,8 +4192,6 @@ fi\n \n \n \n-\n-\n \n \n "
    },
    {
      "sha": "8d5d78ce1dcde871a37c5794d793534eb35af8cc",
      "filename": "sim/ppc/configure.ac",
      "status": "modified",
      "additions": 0,
      "deletions": 14,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d54c09b99e6470e32d848a531f676734978a8951/sim/ppc/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ppc/configure.ac?ref=d54c09b99e6470e32d848a531f676734978a8951",
      "patch": "@@ -545,18 +545,6 @@ else\n   sim_devzero=\"\"\n fi\n \n-dnl Figure out if we are in the new Cygnus tree with a common directory or not\n-AC_MSG_CHECKING(for common simulator directory)\n-if test -f \"${srcdir}/../common/callback.c\"; then\n-  AC_MSG_RESULT(yes)\n-  sim_callback=\"callback.o targ-map.o\"\n-  sim_targ_vals=\"targ-vals.h targ-map.c targ-vals.def\"\n-else\n-  AC_MSG_RESULT(no)\n-  sim_callback=\"\"\n-  sim_targ_vals=\"\"\n-fi\n-\n AC_MSG_CHECKING(for common simulator directory fpu implementation)\n if test -f \"${srcdir}/../common/sim-fpu.c\"; then\n   AC_MSG_RESULT(yes)\n@@ -624,8 +612,6 @@ AC_SUBST(sim_default_model)\n AC_SUBST(sim_model_issue)\n AC_SUBST(sim_termio)\n AC_SUBST(sim_devzero)\n-AC_SUBST(sim_callback)\n-AC_SUBST(sim_targ_vals)\n AC_SUBST(sim_fpu_cflags)\n AC_SUBST(sim_fpu)\n "
    }
  ]
}