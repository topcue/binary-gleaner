{
  "sha": "c20c017b2cdd28aa93071151bb7e704541fde730",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzIwYzAxN2IyY2RkMjhhYTkzMDcxMTUxYmI3ZTcwNDU0MWZkZTczMA==",
  "commit": {
    "author": {
      "name": "Gary Benson",
      "email": "gbenson@redhat.com",
      "date": "2020-09-25T13:44:07Z"
    },
    "committer": {
      "name": "Gary Benson",
      "email": "gbenson@redhat.com",
      "date": "2020-09-25T13:44:07Z"
    },
    "message": "Fix gdb.base/infcall-nested-structs-c++.exp with Clang\n\ngdb.base/infcall-nested-structs-c++.exp failed to build using Clang\nwith many variations on the following error:\n\n  gdb compile failed, /gdbtest/src/gdb/testsuite/gdb.base/infcall-nested-structs.c:207:46:\n    warning: self-comparison always evaluates to true [-Wtautological-compare]\n\nThis commit builds this testcase with -Wno-tautological-compare when\nusing Clang, to avoid this failure.\n\ngdb/testsuite/ChangeLog:\n\n\t* gdb.base/infcall-nested-structs.exp.tcl: Add\n\tadditional_flags=-Wno-tautological-compare for C++\n\ttests when compiling using Clang.",
    "tree": {
      "sha": "719bb50a6c087c4e6091eca11e5b1028478f6005",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/719bb50a6c087c4e6091eca11e5b1028478f6005"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c20c017b2cdd28aa93071151bb7e704541fde730",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c20c017b2cdd28aa93071151bb7e704541fde730",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c20c017b2cdd28aa93071151bb7e704541fde730",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c20c017b2cdd28aa93071151bb7e704541fde730/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "68d654afdfcff840ebb3ae432ed72dca0521d670",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/68d654afdfcff840ebb3ae432ed72dca0521d670",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/68d654afdfcff840ebb3ae432ed72dca0521d670"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 13,
    "deletions": 0
  },
  "files": [
    {
      "sha": "2e35f6cdf1a573e04b813e5e022b47d60fef1030",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c20c017b2cdd28aa93071151bb7e704541fde730/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c20c017b2cdd28aa93071151bb7e704541fde730/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=c20c017b2cdd28aa93071151bb7e704541fde730",
      "patch": "@@ -1,3 +1,9 @@\n+2020-09-25  Gary Benson <gbenson@redhat.com>\n+\n+\t* gdb.base/infcall-nested-structs.exp.tcl: Add\n+\tadditional_flags=-Wno-tautological-compare for C++\n+\ttests when compiling using Clang.\n+\n 2020-09-25  Gary Benson <gbenson@redhat.com>\n \n \t* lib/gdb.exp (gdb_compile): Pass \"-x c++\" earlier, and only"
    },
    {
      "sha": "907abe7ee8527f9eec1583bde5dd1688588434a3",
      "filename": "gdb/testsuite/gdb.base/infcall-nested-structs.exp.tcl",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c20c017b2cdd28aa93071151bb7e704541fde730/gdb/testsuite/gdb.base/infcall-nested-structs.exp.tcl",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c20c017b2cdd28aa93071151bb7e704541fde730/gdb/testsuite/gdb.base/infcall-nested-structs.exp.tcl",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/infcall-nested-structs.exp.tcl?ref=c20c017b2cdd28aa93071151bb7e704541fde730",
      "patch": "@@ -33,6 +33,13 @@ if [support_complex_tests] {\n     lappend compile_flags \"additional_flags=-Wno-psabi\"\n }\n \n+if { $lang == \"c++\" && [test_compiler_info clang*] } {\n+    # Clang rightly deduces that the static member tests are\n+    # tautological comparisons, so we need to inhibit that\n+    # particular warning in order to build.\n+    lappend compile_flags \"additional_flags=-Wno-tautological-compare\"\n+}\n+\n # Given N (0..25), return the corresponding alphabetic letter in upper\n # case.\n "
    }
  ]
}