{
  "sha": "6506371f0671dd5ca11127fee4db8d8d7fec157f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjUwNjM3MWYwNjcxZGQ1Y2ExMTEyN2ZlZTRkYjhkOGQ3ZmVjMTU3Zg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-02-08T08:28:53Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-02-17T23:28:38Z"
    },
    "message": "Add styling to macro commands\n\nThis adds filename styling to \"info macro\".\n\ngdb/ChangeLog\n2019-02-17  Tom Tromey  <tom@tromey.com>\n\n\t* macrocmd.c (show_pp_source_pos): Style the file names.\n\ngdb/testsuite/ChangeLog\n2019-02-17  Tom Tromey  <tom@tromey.com>\n\n\t* gdb.base/style.exp: Use -g3 to compile when possible.  Add test\n\tfor macro styling.\n\t* gdb.base/style.c (SOME_MACRO): New macro.",
    "tree": {
      "sha": "da1e7c3598fd16e86fa307feacca5fd0a4b747b0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/da1e7c3598fd16e86fa307feacca5fd0a4b747b0"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6506371f0671dd5ca11127fee4db8d8d7fec157f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6506371f0671dd5ca11127fee4db8d8d7fec157f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6506371f0671dd5ca11127fee4db8d8d7fec157f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6506371f0671dd5ca11127fee4db8d8d7fec157f/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0c820d679358aa1ec7cd9e33c4bc23a7db964ea1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c820d679358aa1ec7cd9e33c4bc23a7db964ea1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0c820d679358aa1ec7cd9e33c4bc23a7db964ea1"
    }
  ],
  "stats": {
    "total": 37,
    "additions": 33,
    "deletions": 4
  },
  "files": [
    {
      "sha": "882546a814bb49714415e5c5de44d77b4d793f4f",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=6506371f0671dd5ca11127fee4db8d8d7fec157f",
      "patch": "@@ -1,3 +1,7 @@\n+2019-02-17  Tom Tromey  <tom@tromey.com>\n+\n+\t* macrocmd.c (show_pp_source_pos): Style the file names.\n+\n 2019-02-17  Tom Tromey  <tom@tromey.com>\n \n \tPR tui/24197:"
    },
    {
      "sha": "3313e65f929c643d83cf5320dbdc00bc115b9016",
      "filename": "gdb/macrocmd.c",
      "status": "modified",
      "additions": 6,
      "deletions": 3,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/macrocmd.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/macrocmd.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/macrocmd.c?ref=6506371f0671dd5ca11127fee4db8d8d7fec157f",
      "patch": "@@ -22,6 +22,7 @@\n #include \"macrotab.h\"\n #include \"macroexp.h\"\n #include \"macroscope.h\"\n+#include \"cli/cli-style.h\"\n #include \"cli/cli-utils.h\"\n #include \"command.h\"\n #include \"gdbcmd.h\"\n@@ -121,14 +122,16 @@ show_pp_source_pos (struct ui_file *stream,\n   char *fullname;\n \n   fullname = macro_source_fullname (file);\n-  fprintf_filtered (stream, \"%s:%d\\n\", fullname, line);\n+  fputs_styled (fullname, file_name_style.style (), stream);\n+  fprintf_filtered (stream, \":%d\\n\", line);\n   xfree (fullname);\n \n   while (file->included_by)\n     {\n       fullname = macro_source_fullname (file->included_by);\n-      fprintf_filtered (gdb_stdout, \"  included at %s:%d\\n\", fullname,\n-                        file->included_at_line);\n+      fputs_filtered (_(\"  included at \"), stream);\n+      fputs_styled (fullname, file_name_style.style (), stream);\n+      fprintf_filtered (stream, \":%d\\n\", file->included_at_line);\n       xfree (fullname);\n       file = file->included_by;\n     }"
    },
    {
      "sha": "f50f1e3aca49306a4bb246ebb040237515ff16bd",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=6506371f0671dd5ca11127fee4db8d8d7fec157f",
      "patch": "@@ -1,3 +1,9 @@\n+2019-02-17  Tom Tromey  <tom@tromey.com>\n+\n+\t* gdb.base/style.exp: Use -g3 to compile when possible.  Add test\n+\tfor macro styling.\n+\t* gdb.base/style.c (SOME_MACRO): New macro.\n+\n 2019-02-17  Tom Tromey  <tom@tromey.com>\n \n \t* gdb.base/style.exp: Add line-wrapping tests."
    },
    {
      "sha": "a44936ed731946bad4787bb83ed78e74b6b70bbd",
      "filename": "gdb/testsuite/gdb.base/style.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/gdb.base/style.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/gdb.base/style.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style.c?ref=6506371f0671dd5ca11127fee4db8d8d7fec157f",
      "patch": "@@ -13,6 +13,8 @@\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n \n+#define SOME_MACRO 23\n+\n int\n main (int argc, char **argv)\n {"
    },
    {
      "sha": "2778001fed5b19eb905f21610c6e1f1a705623f4",
      "filename": "gdb/testsuite/gdb.base/style.exp",
      "status": "modified",
      "additions": 15,
      "deletions": 1,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/gdb.base/style.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6506371f0671dd5ca11127fee4db8d8d7fec157f/gdb/testsuite/gdb.base/style.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style.exp?ref=6506371f0671dd5ca11127fee4db8d8d7fec157f",
      "patch": "@@ -21,7 +21,16 @@ save_vars { env(TERM) } {\n     # We need an ANSI-capable terminal to get the output.\n     setenv TERM ansi\n \n-    if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile]} {\n+    set test_macros 0\n+    set options debug\n+    get_compiler_info\n+    if { [test_compiler_info \"gcc-*\"] || [test_compiler_info \"clang-*\"] } {\n+\tlappend options additional_flags=-g3\n+\tset test_macros 1\n+    }\n+\n+    if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile \\\n+\t     $options]} {\n \treturn -1\n     }\n \n@@ -63,6 +72,11 @@ save_vars { env(TERM) } {\n \t    \"frame when width=$width\"\n     }\n \n+    if {$test_macros} {\n+\tgdb_test \"info macro SOME_MACRO\" \\\n+\t    \"Defined at $base_file_expr:16\\r\\n#define SOME_MACRO 23\"\n+    }\n+\n     gdb_exit\n     gdb_spawn\n "
    }
  ]
}