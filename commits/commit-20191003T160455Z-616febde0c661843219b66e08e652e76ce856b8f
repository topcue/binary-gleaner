{
  "sha": "616febde0c661843219b66e08e652e76ce856b8f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjE2ZmViZGUwYzY2MTg0MzIxOWI2NmUwOGU2NTJlNzZjZTg1NmI4Zg==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-07-13T18:47:11Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-10-03T16:04:55Z"
    },
    "message": "binutils: readelf: when dumping CTF, load strtab and symtab automatically\n\nWe were only loading them when explicitly requested, which leads to\nstrings that point off into empty space (into the non-loaded \"external\"\nELF string table).  Avoid this unfortunate consequence by loading the\nstrtab and symtab by default, unless a blank name is given.\n\nbinutils/\n\t* readelf.c (dump_ctf_symtab_name): Give default value.\n\t(dump_ctf_strtab_name): Likewise.\n\t(dump_section_as_ctf): Allow for the null string.",
    "tree": {
      "sha": "d682ec59d7393fa18c10248503bd7a65bafb69b5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d682ec59d7393fa18c10248503bd7a65bafb69b5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/616febde0c661843219b66e08e652e76ce856b8f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/616febde0c661843219b66e08e652e76ce856b8f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/616febde0c661843219b66e08e652e76ce856b8f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/616febde0c661843219b66e08e652e76ce856b8f/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2db912ba1a9e1c249cb4795f781fd4ea9fe9e7f2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2db912ba1a9e1c249cb4795f781fd4ea9fe9e7f2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2db912ba1a9e1c249cb4795f781fd4ea9fe9e7f2"
    }
  ],
  "stats": {
    "total": 19,
    "additions": 16,
    "deletions": 3
  },
  "files": [
    {
      "sha": "629e1566d01a1fd617d27a8d526e521a387c049f",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/616febde0c661843219b66e08e652e76ce856b8f/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/616febde0c661843219b66e08e652e76ce856b8f/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=616febde0c661843219b66e08e652e76ce856b8f",
      "patch": "@@ -1,3 +1,9 @@\n+2019-07-13  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* readelf.c (dump_ctf_symtab_name): Give default value.\n+\t(dump_ctf_strtab_name): Likewise.\n+\t(dump_section_as_ctf): Allow for the null string.\n+\n 2019-07-08  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* objdump.c (dump_ctf_archive_member): Dump the CTF header."
    },
    {
      "sha": "81d8bc1b91da50f9ba36fdd37e00d1a167eaca8d",
      "filename": "binutils/doc/binutils.texi",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/616febde0c661843219b66e08e652e76ce856b8f/binutils/doc/binutils.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/616febde0c661843219b66e08e652e76ce856b8f/binutils/doc/binutils.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/doc/binutils.texi?ref=616febde0c661843219b66e08e652e76ce856b8f",
      "patch": "@@ -4850,7 +4850,8 @@ command to @command{ar}, but without using the BFD library.  @xref{ar}.\n @item --ctf-symbols=@var{section}\n @item --ctf-strings=@var{section}\n Specify the name of another section from which the CTF file can inherit\n-strings and symbols.\n+strings and symbols.  By default, the @code{.symtab} and its linked\n+string table are used.\n \n If either of @option{--ctf-symbols} or @option{--ctf-strings} is specified, the\n other must be specified as well."
    },
    {
      "sha": "cecad76f16705141f50bbc6a499ed0049e79477f",
      "filename": "binutils/readelf.c",
      "status": "modified",
      "additions": 8,
      "deletions": 2,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/616febde0c661843219b66e08e652e76ce856b8f/binutils/readelf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/616febde0c661843219b66e08e652e76ce856b8f/binutils/readelf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/readelf.c?ref=616febde0c661843219b66e08e652e76ce856b8f",
      "patch": "@@ -13944,7 +13944,13 @@ dump_section_as_ctf (Elf_Internal_Shdr * section, Filedata * filedata)\n   data = get_section_contents (section, filedata);\n   ctfsect.cts_data = data;\n \n-  if (dump_ctf_symtab_name)\n+  if (!dump_ctf_symtab_name)\n+    dump_ctf_symtab_name = strdup (\".symtab\");\n+\n+  if (!dump_ctf_strtab_name)\n+    dump_ctf_strtab_name = strdup (\".strtab\");\n+\n+  if (dump_ctf_symtab_name && dump_ctf_symtab_name[0] != 0)\n     {\n       if ((symtab_sec = find_section (filedata, dump_ctf_symtab_name)) == NULL)\n \t{\n@@ -13959,7 +13965,7 @@ dump_section_as_ctf (Elf_Internal_Shdr * section, Filedata * filedata)\n       symsectp = shdr_to_ctf_sect (&symsect, symtab_sec, filedata);\n       symsect.cts_data = symdata;\n     }\n-  if (dump_ctf_strtab_name)\n+  if (dump_ctf_strtab_name && dump_ctf_symtab_name[0] != 0)\n     {\n       if ((strtab_sec = find_section (filedata, dump_ctf_strtab_name)) == NULL)\n \t{"
    }
  ]
}