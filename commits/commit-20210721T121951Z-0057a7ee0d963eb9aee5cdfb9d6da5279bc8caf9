{
  "sha": "0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDA1N2E3ZWUwZDk2M2ViOWFlZTVjZGZiOWQ2ZGE1Mjc5YmM4Y2FmOQ==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-07-21T12:19:51Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-07-21T12:19:51Z"
    },
    "message": "[gdb/testsuite] Add KFAILs for gdb.ada FAILs with gcc-11\n\nWith gcc-11 we run into:\n...\n(gdb) print pa_ptr.all^M\nThat operation is not available on integers of more than 8 bytes.^M\n(gdb) KFAIL: gdb.ada/arrayptr.exp: scenario=all: print pa_ptr.all (PRMS: gdb/20991)\n...\n\nThis is due to PR exp/20991 - \"__int128 type support\".  Mark this and similar\nFAILs as KFAIL.\n\nAlso mark this FAIL:\n....\n(gdb) print pa_ptr(3)^M\ncannot subscript or call something of type `foo__packed_array_ptr'^M\n(gdb) FAIL: gdb.ada/arrayptr.exp: scenario=minimal: print pa_ptr(3)\n...\nas a KFAIL for PR ada/28115 - \"Support packed array encoded as\nDW_TAG_subrange_type\".\n\nTested on x86_64-linux, with gcc-10 and gcc-11.\n\ngdb/testsuite/ChangeLog:\n\n2021-07-21  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.ada/arrayptr.exp: Add KFAILs for PR20991 and PR28115.\n\t* gdb.ada/exprs.exp: Add KFAILs for PR20991.\n\t* gdb.ada/packed_array_assign.exp: Same.",
    "tree": {
      "sha": "2c6c28165d9780ffffb9ba8fff8402f65217b3dd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2c6c28165d9780ffffb9ba8fff8402f65217b3dd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4bf094292c72b6d316a72ddc60739466c5085d3d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4bf094292c72b6d316a72ddc60739466c5085d3d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4bf094292c72b6d316a72ddc60739466c5085d3d"
    }
  ],
  "stats": {
    "total": 149,
    "additions": 127,
    "deletions": 22
  },
  "files": [
    {
      "sha": "606794909d9dacfde2559e93c584235f2da5bf55",
      "filename": "gdb/testsuite/gdb.ada/arrayptr.exp",
      "status": "modified",
      "additions": 32,
      "deletions": 4,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/arrayptr.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/arrayptr.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/arrayptr.exp?ref=0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
      "patch": "@@ -49,10 +49,38 @@ foreach_with_prefix scenario {all minimal} {\n \n     gdb_test \"ptype string_access\" \"= access array \\\\(<>\\\\) of character\"\n \n-    gdb_test \"print pa_ptr.all\" \\\n-\t\" = \\\\(10, 20, 30, 40, 50, 60, 62, 63, -23, 42\\\\)\"\n+    set kfail_int128support_re \\\n+\t\"That operation is not available on integers of more than 8 bytes\\\\.\"\n+    set kfail_packed_array_range_re \\\n+\t\"cannot subscript or call something of type `foo__packed_array_ptr'\"\n+\n+    gdb_test_multiple \"print pa_ptr.all\" \"\" {\n+\t-re -wrap \" = \\\\(10, 20, 30, 40, 50, 60, 62, 63, -23, 42\\\\)\" {\n+\t    pass $gdb_test_name\n+\t}\n+\t-re -wrap $kfail_int128support_re {\n+\t    kfail gdb/20991 $gdb_test_name\n+\t}\n+    }\n \n-    gdb_test \"print pa_ptr(3)\" \" = 30\"\n+    gdb_test_multiple \"print pa_ptr(3)\" \"\" {\n+\t-re -wrap \" = 30\" {\n+\t    pass $gdb_test_name\n+\t}\n+\t-re -wrap $kfail_int128support_re {\n+\t    kfail gdb/20991 $gdb_test_name\n+\t}\n+\t-re -wrap $kfail_packed_array_range_re {\n+\t    kfail gdb/28115 $gdb_test_name\n+\t}\n+    }\n \n-    gdb_test \"print pa_ptr.all(3)\" \" = 30\"\n+    gdb_test_multiple \"print pa_ptr.all(3)\" \"\" {\n+\t-re -wrap \" = 30\" {\n+\t    pass $gdb_test_name\n+\t}\n+\t-re -wrap $kfail_int128support_re {\n+\t    kfail gdb/20991 $gdb_test_name\n+\t}\n+    }\n }"
    },
    {
      "sha": "480e5e9f971d710f3e2e8ee91314c74f34c07271",
      "filename": "gdb/testsuite/gdb.ada/exprs.exp",
      "status": "modified",
      "additions": 29,
      "deletions": 9,
      "changes": 38,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/exprs.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/exprs.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/exprs.exp?ref=0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
      "patch": "@@ -28,14 +28,34 @@ clean_restart ${testfile}\n set bp_location [gdb_get_line_number \"START\" ${testdir}/p.adb]\n runto \"p.adb:$bp_location\"\n \n-gdb_test \"print X ** Y = Z\" \\\n-         \"= true\" \\\n-         \"Long_Long_Integer ** Y\"\n+set kfail_int128support_re \\\n+    \"That operation is not available on integers of more than 8 bytes\\\\.\"\n+\n+gdb_test_multiple \"print X ** Y = Z\" \"Long_Long_Integer ** Y\" {\n+    -re -wrap \"= true\" {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}\n \n-gdb_test \"print long_float'min (long_float (X), 8.0)\" \\\n-         \"= 7.0\" \\\n-         \"long_float'min\"\n+set cmd \"print long_float'min (long_float (X), 8.0)\"\n+gdb_test_multiple $cmd \"long_float'min\" {\n+    -re -wrap \"= 7.0\" {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}\n \n-gdb_test \"print long_float'max (long_float (X), 8.0)\" \\\n-         \"= 8.0\" \\\n-         \"long_float'max\"\n+set cmd \"print long_float'max (long_float (X), 8.0)\"\n+gdb_test_multiple $cmd \"long_float'max\" {\n+    -re -wrap \"= 8.0\" {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}"
    },
    {
      "sha": "5f34a07e3af19e78cb76eec5b26b0fb98644859e",
      "filename": "gdb/testsuite/gdb.ada/packed_array_assign.exp",
      "status": "modified",
      "additions": 66,
      "deletions": 9,
      "changes": 75,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/packed_array_assign.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9/gdb/testsuite/gdb.ada/packed_array_assign.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/packed_array_assign.exp?ref=0057a7ee0d963eb9aee5cdfb9d6da5279bc8caf9",
      "patch": "@@ -27,15 +27,72 @@ clean_restart ${testfile}\n \n runto \"aggregates.run_test\"\n \n-gdb_test \\\n-    \"print pra := ((packed_array_assign_x => 2, packed_array_assign_y => 0, packed_array_assign_w => 17), pr, (packed_array_assign_x => 7, packed_array_assign_y => 1, packed_array_assign_w => 23))\" \\\n-    \" = \\\\(\\\\(packed_array_assign_w => 17, packed_array_assign_x => 2, packed_array_assign_y => 0\\\\), \\\\(packed_array_assign_w => 104, packed_array_assign_x => 2, packed_array_assign_y => 3\\\\), \\\\(packed_array_assign_w => 23, packed_array_assign_x => 7, packed_array_assign_y => 1\\\\)\\\\)\" \\\n-    \"value of pra\"\n-\n-gdb_test \"print pra(1) := pr\" \\\n-    \" = \\\\(packed_array_assign_w => 104, packed_array_assign_x => 2, packed_array_assign_y => 3\\\\)\"\n-gdb_test \"print pra(1)\" \\\n-    \" = \\\\(packed_array_assign_w => 104, packed_array_assign_x => 2, packed_array_assign_y => 3\\\\)\"\n+set kfail_int128support_re \\\n+    \"That operation is not available on integers of more than 8 bytes\\\\.\"\n+\n+set cmd \\\n+    [list \\\n+\t \"print pra := \" \\\n+\t \"((packed_array_assign_x => 2,\" \\\n+\t \"packed_array_assign_y => 0,\" \\\n+\t \"packed_array_assign_w => 17),\" \\\n+\t \"pr,\" \\\n+\t \"(packed_array_assign_x => 7,\" \\\n+\t \"packed_array_assign_y => 1,\" \\\n+\t \"packed_array_assign_w => 23))\"]\n+set cmd [join $cmd]\n+set re \\\n+    [list \\\n+\t \" = \\\\(\\\\(packed_array_assign_w => 17,\" \\\n+\t \"packed_array_assign_x => 2,\" \\\n+\t \"packed_array_assign_y => 0\\\\),\" \\\n+\t \"\\\\(packed_array_assign_w => 104,\" \\\n+\t \"packed_array_assign_x => 2,\" \\\n+\t \"packed_array_assign_y => 3\\\\),\" \\\n+\t \"\\\\(packed_array_assign_w => 23,\" \\\n+\t \"packed_array_assign_x => 7,\" \\\n+\t \"packed_array_assign_y => 1\\\\)\\\\)\"]\n+set re [join $re]\n+gdb_test_multiple $cmd \"value of pra\" {\n+    -re -wrap $re {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}\n+\n+set cmd \"print pra(1) := pr\"\n+set re \\\n+    [list \\\n+\t \" = \\\\(packed_array_assign_w => 104,\" \\\n+\t \"packed_array_assign_x => 2,\" \\\n+\t \"packed_array_assign_y => 3\\\\)\"]\n+set re [join $re]\n+gdb_test_multiple $cmd \"\" {\n+    -re -wrap $re {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}\n+\n+set cmd \"print pra(1)\"\n+set re \\\n+    [list \\\n+\t \" = \\\\(packed_array_assign_w => 104,\" \\\n+\t \"packed_array_assign_x => 2,\" \\\n+\t \"packed_array_assign_y => 3\\\\)\"]\n+set re [join $re]\n+gdb_test_multiple $cmd \"\" {\n+    -re -wrap $re {\n+\tpass $gdb_test_name\n+    }\n+    -re -wrap $kfail_int128support_re {\n+\tkfail gdb/20991 $gdb_test_name\n+    }\n+}\n \n gdb_test \"print npr := (q000 => 3, r000 => (packed_array_assign_x => 6, packed_array_assign_y => 1, packed_array_assign_w => 117))\" \\\n     \" = \\\\(q000 => 3, r000 => \\\\(packed_array_assign_w => 117, packed_array_assign_x => 6, packed_array_assign_y => 1\\\\)\\\\)\" \\"
    }
  ]
}