{
  "sha": "0c3d9485091753e6d9c4d317a9219cf4b6dce116",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MGMzZDk0ODUwOTE3NTNlNmQ5YzRkMzE3YTkyMTljZjRiNmRjZTExNg==",
  "commit": {
    "author": {
      "name": "Jozef Lawrynowicz",
      "email": "jozef.l@mittosystems.com",
      "date": "2020-01-16T11:32:23Z"
    },
    "committer": {
      "name": "Jozef Lawrynowicz",
      "email": "jozef.l@mittosystems.com",
      "date": "2020-01-16T13:22:31Z"
    },
    "message": "MSP430: Add input section rules for .upper sections to default linker script\n\nld/ChangeLog:\n\n2020-01-16  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n\n\t* scripttempl/elf32msp430.sc: Add input section rules for\n\t.upper.{text,data,rodata,bss}.\n\t* testsuite/ld-msp430-elf/msp430-elf.exp: Run new test.\n\t* testsuite/ld-msp430-elf/upper-input-sections.s: New test.",
    "tree": {
      "sha": "b9576ece5e375dd1316876db4efec1ff51464c46",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b9576ece5e375dd1316876db4efec1ff51464c46"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0c3d9485091753e6d9c4d317a9219cf4b6dce116",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c3d9485091753e6d9c4d317a9219cf4b6dce116",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0c3d9485091753e6d9c4d317a9219cf4b6dce116",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c3d9485091753e6d9c4d317a9219cf4b6dce116/comments",
  "author": {
    "login": "jozefl-mitto",
    "id": 36524004,
    "node_id": "MDQ6VXNlcjM2NTI0MDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jozefl-mitto",
    "html_url": "https://github.com/jozefl-mitto",
    "followers_url": "https://api.github.com/users/jozefl-mitto/followers",
    "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}",
    "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions",
    "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs",
    "repos_url": "https://api.github.com/users/jozefl-mitto/repos",
    "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jozefl-mitto",
    "id": 36524004,
    "node_id": "MDQ6VXNlcjM2NTI0MDA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jozefl-mitto",
    "html_url": "https://github.com/jozefl-mitto",
    "followers_url": "https://api.github.com/users/jozefl-mitto/followers",
    "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}",
    "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions",
    "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs",
    "repos_url": "https://api.github.com/users/jozefl-mitto/repos",
    "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "45a4bb2010a42637bec03c06d84a998afacefb4e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/45a4bb2010a42637bec03c06d84a998afacefb4e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/45a4bb2010a42637bec03c06d84a998afacefb4e"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 50,
    "deletions": 0
  },
  "files": [
    {
      "sha": "7799d7d9fe2587e509408ae0ca9fd4beaeaa782c",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=0c3d9485091753e6d9c4d317a9219cf4b6dce116",
      "patch": "@@ -1,3 +1,10 @@\n+2020-01-16  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* scripttempl/elf32msp430.sc: Add input section rules for\n+\t.upper.{text,data,rodata,bss}.\n+\t* testsuite/ld-msp430-elf/msp430-elf.exp: Run new test.\n+\t* testsuite/ld-msp430-elf/upper-input-sections.s: New test.\n+\n 2020-01-15  Lars Brinkhoff  <lars@nocrew.org>\n \n \tPR 20694"
    },
    {
      "sha": "f9ee9ff65be38f7e7f88cd58448704332403bbf7",
      "filename": "ld/scripttempl/elf32msp430.sc",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/scripttempl/elf32msp430.sc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/scripttempl/elf32msp430.sc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/scripttempl/elf32msp430.sc?ref=0c3d9485091753e6d9c4d317a9219cf4b6dce116",
      "patch": "@@ -171,6 +171,8 @@ SECTIONS\n \n     *(.either.text.* .either.text)\n \n+    *(.upper.text.* .upper.text)\n+\n     . = ALIGN(2);\n     *(SORT_NONE(.fini9))\n     *(SORT_NONE(.fini8))\n@@ -198,6 +200,9 @@ SECTIONS\n     ${RELOCATING+*(.rodata1)\n \n     *(.either.rodata.*) *(.either.rodata)\n+\n+    *(.upper.rodata.* .upper.rodata)\n+\n     *(.eh_frame_hdr)\n     KEEP (*(.eh_frame))\n \n@@ -267,6 +272,8 @@ SECTIONS\n \n     *(.either.data.* .either.data)\n \n+    *(.upper.data.* .upper.data)\n+\n     *(.got.plt) *(.got)\n     . = ALIGN(2);\n     *(.sdata .sdata.* .gnu.linkonce.s.*)\n@@ -286,6 +293,7 @@ SECTIONS\n     . = ALIGN(2);}\n     *(.bss)\n     ${RELOCATING+*(.either.bss.* .either.bss)\n+    *(.upper.bss.* .upper.bss)\n     *(COMMON)\n     PROVIDE (__bss_end = .);}\n   } ${RELOCATING+ > data}"
    },
    {
      "sha": "e9a0fdc6292973f959f040716205c498507e9bc5",
      "filename": "ld/testsuite/ld-msp430-elf/msp430-elf.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/testsuite/ld-msp430-elf/msp430-elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/testsuite/ld-msp430-elf/msp430-elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-msp430-elf/msp430-elf.exp?ref=0c3d9485091753e6d9c4d317a9219cf4b6dce116",
      "patch": "@@ -176,6 +176,8 @@ run_ld_link_tests $msp430warntests\n run_dump_test valid-map\n run_ld_link_tests {{ \"Check no reloc overflow with #lo and data in the upper region\"\n         \"-m msp430X\" \"\" \"\" {reloc-lo-430x.s} {} \"reloc-lo-430x\"}}\n+run_ld_link_tests {{ \"Check .upper prefixed input sections can be placed\"\n+        \"-m msp430X\" \"\" \"\" {upper-input-sections.s} {} \"upper-input-sections\"}}\n \n # Don't run data region tests if a data region is specified\n if {[string match \"*-mdata-region*\" [board_info [target_info name] multilib_flags]]} {"
    },
    {
      "sha": "c816f30248013750da4b39415db4292306b7f2cf",
      "filename": "ld/testsuite/ld-msp430-elf/upper-input-sections.s",
      "status": "added",
      "additions": 33,
      "deletions": 0,
      "changes": 33,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/testsuite/ld-msp430-elf/upper-input-sections.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c3d9485091753e6d9c4d317a9219cf4b6dce116/ld/testsuite/ld-msp430-elf/upper-input-sections.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-msp430-elf/upper-input-sections.s?ref=0c3d9485091753e6d9c4d317a9219cf4b6dce116",
      "patch": "@@ -0,0 +1,33 @@\n+.text\n+\t.balign 2\n+  .section .upper.text,\"ax\",@progbits\n+\t.global\tfoo\n+\t.type\tfoo, @function\n+foo:\n+  MOV.W\t#42, R8\n+\tRETA\n+\t.size\tfoo, .-foo\n+\n+\t.balign 2\n+\t.global\tmain\n+\t.type\tmain, @function\n+main:\n+\tCALLA\t#foo\n+.L4:\n+\tBRA\t#.L4\n+\t.size\tmain, .-main\n+\t.section\t.upper.bss,\"aw\",@nobits\n+\t.balign 2\n+\t.global\tP\n+P:\n+\t.zero 4\n+\t.section\t.upper.data,\"aw\",@progbits\n+\t.balign 2\n+\t.global\tQ\n+Q:\n+\t.long 4\n+\t.section\t.upper.rodata,\"aw\",@progbits\n+\t.balign 2\n+\t.global\tR\n+R:\n+\t.word 8"
    }
  ]
}