{
  "sha": "ea06bbaaaa975331a42f2054551e78f588020462",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWEwNmJiYWFhYTk3NTMzMWE0MmYyMDU0NTUxZTc4ZjU4ODAyMDQ2Mg==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:56Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:09Z"
    },
    "message": "gdbserver: turn target op 'hostio_last_error' into a method\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's hostio_last_error op into a\n\tmethod of process_target.\n\n\t* target.h (struct process_stratum_target): Remove the target op.\n\t(class process_target): Add the target op.\n\t* target.cc: Add \"hostio.h\" to includes.\n\t(process_target::hostio_last_error): Define.\n\n\tUpdate the derived classes and callers below.\n\n\t* hostio.cc (hostio_error): Update.\n\t* linux-low.cc: Remove \"hostio.h\" from includes.\n\t(linux_target_ops): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t* win32-low.h (class win32_process_target): Update.\n\t* win32-low.cc (win32_target_ops): Update.\n\t(wince_hostio_last_error): Turn into ...\n\t(win32_process_target::hostio_last_error): ... this.",
    "tree": {
      "sha": "91b39b2e32a82b8ad8ca70195c48a6a9ad27787f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/91b39b2e32a82b8ad8ca70195c48a6a9ad27787f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ea06bbaaaa975331a42f2054551e78f588020462",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ea06bbaaaa975331a42f2054551e78f588020462",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ea06bbaaaa975331a42f2054551e78f588020462",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ea06bbaaaa975331a42f2054551e78f588020462/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6e3fd7e948d158a04c0af7130e6648ad75aaba66",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6e3fd7e948d158a04c0af7130e6648ad75aaba66",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6e3fd7e948d158a04c0af7130e6648ad75aaba66"
    }
  ],
  "stats": {
    "total": 56,
    "additions": 40,
    "deletions": 16
  },
  "files": [
    {
      "sha": "13fd47d65e34cf4d862e4915694bbba631a02b33",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -1,3 +1,25 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's hostio_last_error op into a\n+\tmethod of process_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target op.\n+\t(class process_target): Add the target op.\n+\t* target.cc: Add \"hostio.h\" to includes.\n+\t(process_target::hostio_last_error): Define.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* hostio.cc (hostio_error): Update.\n+\t* linux-low.cc: Remove \"hostio.h\" from includes.\n+\t(linux_target_ops): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t* win32-low.h (class win32_process_target): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\t(wince_hostio_last_error): Turn into ...\n+\t(win32_process_target::hostio_last_error): ... this.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's get_tls_address op into a method of"
    },
    {
      "sha": "a3b32cd0fdcb4a22f0983571fb216a763c1a37ef",
      "filename": "gdbserver/hostio.cc",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/hostio.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/hostio.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/hostio.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -196,7 +196,7 @@ require_valid_fd (int fd)\n static void\n hostio_error (char *own_buf)\n {\n-  the_target->hostio_last_error (own_buf);\n+  the_target->pt->hostio_last_error (own_buf);\n }\n \n static void"
    },
    {
      "sha": "a863474991d627e3100e482245ac877a7ddff329",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -45,7 +45,6 @@\n #include <sys/uio.h>\n #include \"gdbsupport/filestuff.h\"\n #include \"tracepoint.h\"\n-#include \"hostio.h\"\n #include <inttypes.h>\n #include \"gdbsupport/common-inferior.h\"\n #include \"nat/fork-inferior.h\"\n@@ -7415,7 +7414,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-  hostio_last_error_from_errno,\n   linux_qxfer_osdata,\n   linux_xfer_siginfo,\n   linux_supports_non_stop,"
    },
    {
      "sha": "0e904d073280a126f496fef67087c1767017af72",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -735,7 +735,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  NULL,  /* hostio_last_error */\n   NULL,  /* qxfer_osdata */\n   NULL,  /* qxfer_siginfo */\n   NULL,  /* supports_non_stop */"
    },
    {
      "sha": "ec0b477abe5945a5f9ac65d6611a26dab989dd8c",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -956,7 +956,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  hostio_last_error_from_errno,\n   NULL, /* nto_qxfer_osdata */\n   NULL, /* xfer_siginfo */\n   nto_supports_non_stop,"
    },
    {
      "sha": "e09ee7d0fa4dd5142e99e57ea237e2c049398d63",
      "filename": "gdbserver/target.cc",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/target.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/target.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -21,6 +21,7 @@\n #include \"server.h\"\n #include \"tracepoint.h\"\n #include \"gdbsupport/byte-vector.h\"\n+#include \"hostio.h\"\n \n process_stratum_target *the_target;\n \n@@ -506,3 +507,9 @@ process_target::get_tls_address (thread_info *thread, CORE_ADDR offset,\n {\n   gdb_assert_not_reached (\"target op get_tls_address not supported\");\n }\n+\n+void\n+process_target::hostio_last_error (char *buf)\n+{\n+  hostio_last_error_from_errno (buf);\n+}"
    },
    {
      "sha": "5f603fdf0bc6cca25e33be10dd7fc20cf820e5db",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -70,10 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* Fill BUF with an hostio error packet representing the last hostio\n-     error.  */\n-  void (*hostio_last_error) (char *buf);\n-\n   /* Read/Write OS data using qXfer packets.  */\n   int (*qxfer_osdata) (const char *annex, unsigned char *readbuf,\n \t\t       unsigned const char *writebuf, CORE_ADDR offset,\n@@ -479,6 +475,10 @@ class process_target\n      support the operation.  */\n   virtual int get_tls_address (thread_info *thread, CORE_ADDR offset,\n \t\t\t       CORE_ADDR load_module, CORE_ADDR *address);\n+\n+  /* Fill BUF with an hostio error packet representing the last hostio\n+     error.  */\n+  virtual void hostio_last_error (char *buf);\n };\n \n extern process_stratum_target *the_target;"
    },
    {
      "sha": "727bc9c8c95acb9f4f3e7069693778cc63ef704e",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 7,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -1784,8 +1784,8 @@ win32_error_to_fileio_error (DWORD err)\n   return FILEIO_EUNKNOWN;\n }\n \n-static void\n-wince_hostio_last_error (char *buf)\n+void\n+win32_process_target::hostio_last_error (char *buf)\n {\n   DWORD winerr = GetLastError ();\n   int fileio_err = win32_error_to_fileio_error (winerr);\n@@ -1844,11 +1844,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-#ifdef _WIN32_WCE\n-  wince_hostio_last_error,\n-#else\n-  hostio_last_error_from_errno,\n-#endif\n   NULL, /* qxfer_osdata */\n   win32_xfer_siginfo,\n   NULL, /* supports_non_stop */"
    },
    {
      "sha": "86447fd541afec6f6474d4b441a44ef8e1e781db",
      "filename": "gdbserver/win32-low.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/win32-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ea06bbaaaa975331a42f2054551e78f588020462/gdbserver/win32-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.h?ref=ea06bbaaaa975331a42f2054551e78f588020462",
      "patch": "@@ -152,6 +152,10 @@ class win32_process_target : public process_target\n   bool stopped_by_watchpoint () override;\n \n   CORE_ADDR stopped_data_address () override;\n+\n+#ifdef _WIN32_WCE\n+  void hostio_last_error (char *buf) override;\n+#endif\n };\n \n /* Retrieve the context for this thread, if not already retrieved.  */"
    }
  ]
}