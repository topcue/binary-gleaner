{
  "sha": "244ac24b51ba1375794eed93b58d5813e7c044ca",
  "node_id": "C_kwDOANOeidoAKDI0NGFjMjRiNTFiYTEzNzU3OTRlZWQ5M2I1OGQ1ODEzZTdjMDQ0Y2E",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-12-29T21:16:02Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2022-01-25T22:22:49Z"
    },
    "message": "Sent timing stats to gdb_stdlog\n\nThis changes the time / space / symtab per-command statistics code to\nsend its output to gdb_stdlog rather than gdb_stdout.  This seems\nslightly more correct to me.",
    "tree": {
      "sha": "5ffa8a35eacfa2d5cbce29873f414780fe5d3f33",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5ffa8a35eacfa2d5cbce29873f414780fe5d3f33"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/244ac24b51ba1375794eed93b58d5813e7c044ca",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/244ac24b51ba1375794eed93b58d5813e7c044ca",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/244ac24b51ba1375794eed93b58d5813e7c044ca",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/244ac24b51ba1375794eed93b58d5813e7c044ca/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1475b18b772bc06830b221edfdb0259ac2db6773",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1475b18b772bc06830b221edfdb0259ac2db6773",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1475b18b772bc06830b221edfdb0259ac2db6773"
    }
  ],
  "stats": {
    "total": 47,
    "additions": 25,
    "deletions": 22
  },
  "files": [
    {
      "sha": "7e84b60fea09e29a599d8418221f417860954485",
      "filename": "gdb/maint.c",
      "status": "modified",
      "additions": 25,
      "deletions": 22,
      "changes": 47,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/244ac24b51ba1375794eed93b58d5813e7c044ca/gdb/maint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/244ac24b51ba1375794eed93b58d5813e7c044ca/gdb/maint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/maint.c?ref=244ac24b51ba1375794eed93b58d5813e7c044ca",
      "patch": "@@ -990,11 +990,12 @@ scoped_command_stats::~scoped_command_stats ()\n       /* Subtract time spend in prompt_for_continue from walltime.  */\n       wall_time -= get_prompt_for_continue_wait_time ();\n \n-      printf_unfiltered (!m_msg_type\n-\t\t\t ? _(\"Startup time: %.6f (cpu), %.6f (wall)\\n\")\n-\t\t\t : _(\"Command execution time: %.6f (cpu), %.6f (wall)\\n\"),\n-\t\t\t duration<double> (cmd_time).count (),\n-\t\t\t duration<double> (wall_time).count ());\n+      fprintf_unfiltered (gdb_stdlog,\n+\t\t\t  !m_msg_type\n+\t\t\t  ? _(\"Startup time: %.6f (cpu), %.6f (wall)\\n\")\n+\t\t\t  : _(\"Command execution time: %.6f (cpu), %.6f (wall)\\n\"),\n+\t\t\t  duration<double> (cmd_time).count (),\n+\t\t\t  duration<double> (wall_time).count ());\n     }\n \n   if (m_space_enabled && per_command_space)\n@@ -1005,12 +1006,13 @@ scoped_command_stats::~scoped_command_stats ()\n       long space_now = lim - lim_at_start;\n       long space_diff = space_now - m_start_space;\n \n-      printf_unfiltered (!m_msg_type\n-\t\t\t ? _(\"Space used: %ld (%s%ld during startup)\\n\")\n-\t\t\t : _(\"Space used: %ld (%s%ld for this command)\\n\"),\n-\t\t\t space_now,\n-\t\t\t (space_diff >= 0 ? \"+\" : \"\"),\n-\t\t\t space_diff);\n+      fprintf_unfiltered (gdb_stdlog,\n+\t\t\t  !m_msg_type\n+\t\t\t  ? _(\"Space used: %ld (%s%ld during startup)\\n\")\n+\t\t\t  : _(\"Space used: %ld (%s%ld for this command)\\n\"),\n+\t\t\t  space_now,\n+\t\t\t  (space_diff >= 0 ? \"+\" : \"\"),\n+\t\t\t  space_diff);\n #endif\n     }\n \n@@ -1019,16 +1021,17 @@ scoped_command_stats::~scoped_command_stats ()\n       int nr_symtabs, nr_compunit_symtabs, nr_blocks;\n \n       count_symtabs_and_blocks (&nr_symtabs, &nr_compunit_symtabs, &nr_blocks);\n-      printf_unfiltered (_(\"#symtabs: %d (+%d),\"\n-\t\t\t   \" #compunits: %d (+%d),\"\n-\t\t\t   \" #blocks: %d (+%d)\\n\"),\n-\t\t\t nr_symtabs,\n-\t\t\t nr_symtabs - m_start_nr_symtabs,\n-\t\t\t nr_compunit_symtabs,\n-\t\t\t (nr_compunit_symtabs\n-\t\t\t  - m_start_nr_compunit_symtabs),\n-\t\t\t nr_blocks,\n-\t\t\t nr_blocks - m_start_nr_blocks);\n+      fprintf_unfiltered (gdb_stdlog,\n+\t\t\t  _(\"#symtabs: %d (+%d),\"\n+\t\t\t    \" #compunits: %d (+%d),\"\n+\t\t\t    \" #blocks: %d (+%d)\\n\"),\n+\t\t\t  nr_symtabs,\n+\t\t\t  nr_symtabs - m_start_nr_symtabs,\n+\t\t\t  nr_compunit_symtabs,\n+\t\t\t  (nr_compunit_symtabs\n+\t\t\t   - m_start_nr_compunit_symtabs),\n+\t\t\t  nr_blocks,\n+\t\t\t  nr_blocks - m_start_nr_blocks);\n     }\n }\n \n@@ -1095,7 +1098,7 @@ scoped_command_stats::print_time (const char *msg)\n   char out[100];\n   strftime (out, sizeof (out), \"%F %H:%M:%S\", &tm);\n \n-  printf_unfiltered (\"%s.%03d - %s\\n\", out, (int) millis, msg);\n+  fprintf_unfiltered (gdb_stdlog, \"%s.%03d - %s\\n\", out, (int) millis, msg);\n }\n \n /* Handle unknown \"mt set per-command\" arguments."
    }
  ]
}