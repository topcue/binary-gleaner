{
  "sha": "32377a8037eefae8091f345546f52370ed515399",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzIzNzdhODAzN2VlZmFlODA5MWYzNDU1NDZmNTIzNzBlZDUxNTM5OQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-07-27T09:18:57Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-07-27T13:01:37Z"
    },
    "message": "Allow new just-symbols test to run on XCOFF and PE\n\n\t* testsuite/ld-misc/just-symbols.exp: Run for x86_64 PE too.\n\tSet LDFLAGS for PE and XCOFF.\n\t* testsuite/ld-misc/just-symbols.ld: Accept XCOFF mapped .data.",
    "tree": {
      "sha": "dff83095ca42a10e22813cedd2f2e23be4675f0e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/dff83095ca42a10e22813cedd2f2e23be4675f0e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/32377a8037eefae8091f345546f52370ed515399",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/32377a8037eefae8091f345546f52370ed515399",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/32377a8037eefae8091f345546f52370ed515399",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/32377a8037eefae8091f345546f52370ed515399/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "93fd13c70468a7baac5ac7d56b71feb172509f7a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/93fd13c70468a7baac5ac7d56b71feb172509f7a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/93fd13c70468a7baac5ac7d56b71feb172509f7a"
    }
  ],
  "stats": {
    "total": 81,
    "additions": 45,
    "deletions": 36
  },
  "files": [
    {
      "sha": "99dfea8c0ec6baee278e3d7b0b83f440bac6534f",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/32377a8037eefae8091f345546f52370ed515399/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/32377a8037eefae8091f345546f52370ed515399/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=32377a8037eefae8091f345546f52370ed515399",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-27  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/ld-misc/just-symbols.exp: Run for x86_64 PE too.\n+\tSet LDFLAGS for PE and XCOFF.\n+\t* testsuite/ld-misc/just-symbols.ld: Accept XCOFF mapped .data.\n+\n 2020-07-27  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/lib/ld-lib.exp (check_ctf_available): Check first that"
    },
    {
      "sha": "9502566ac9c32e118e647da864ec54b1783669b4",
      "filename": "ld/testsuite/ld-misc/just-symbols-1.dd",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols-1.dd",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols-1.dd",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-misc/just-symbols-1.dd?ref=32377a8037eefae8091f345546f52370ed515399",
      "patch": "@@ -1,5 +1,3 @@\n-.*: +file format .*\n-\n-Contents of section \\.data:\n+#...\n  [0-9a-f]+ (?:(:?12000000|00120000|00000012) 0{8}|0{8} 00000012) 0{8} 0{8} .*\n #pass"
    },
    {
      "sha": "59c725d0d2c5be28284b29df4b7f018e9067da5f",
      "filename": "ld/testsuite/ld-misc/just-symbols.exp",
      "status": "modified",
      "additions": 36,
      "deletions": 31,
      "changes": 67,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-misc/just-symbols.exp?ref=32377a8037eefae8091f345546f52370ed515399",
      "patch": "@@ -20,38 +20,43 @@\n #\n \n # SH/PE targets complain about zero VMA.\n-# x86_64/PE targets hardcode VMA to 0x100000000.\n-if { [istarget sh-*-pe] \\\n-     || [istarget x86_64-*-cygwin] \\\n-     || [istarget x86_64-*-mingw*] \\\n-     || [istarget x86_64-*-pe] \\\n-     || [istarget x86_64-*-pep] } {\n+if { [istarget sh-*-pe] } {\n     return\n }\n \n-run_ld_link_tests {\n-    {\"Object for --just-symbols test\"\n-     \"-r -T just-symbols.ld\" \"\"\n-     \"\"\n-     {just-symbols-0.s}\n-     {}\n-     \"just-symbols-0.o\"}\n-    {\"Executable for --just-symbols test\"\n-     \"-e 0 -T just-symbols.ld\" \"\"\n-     \"\"\n-     {just-symbols-0.s}\n-     {}\n-     \"just-symbols-0\"}\n-    {\"Object with --just-symbols test\"\n-     \"-e 0 -T just-symbols.ld --just-symbols=tmpdir/just-symbols-0.o\" \"\"\n-     \"\"\n-     {just-symbols-1.s}\n-     {{objdump {-s -j .data} just-symbols-1.dd}}\n-     \"just-symbols-1obj\"}\n-    {\"Executable with --just-symbols test\"\n-     \"-e 0 -T just-symbols.ld --just-symbols=tmpdir/just-symbols-0\" \"\"\n-     \"\"\n-     {just-symbols-1.s}\n-     {{objdump {-s -j .data} just-symbols-1.dd}}\n-     \"just-symbols-1exe\"}\n+set saved_LDFLAGS \"$LDFLAGS\"\n+if { [is_pecoff_format] } then {\n+    # Avoid auto image-basing.\n+    set LDFLAGS \"$LDFLAGS --image-base 0\"\n+} elseif { [is_xcoff_format] } then {\n+    set LDFLAGS \"$LDFLAGS -bnogc\"\n }\n+\n+run_ld_link_tests [list \\\n+    [list \"Object for --just-symbols test\" \\\n+     \"$LDFLAGS -r -T just-symbols.ld\" \"\" \\\n+     \"\" \\\n+     {just-symbols-0.s} \\\n+     {} \\\n+     \"just-symbols-0.o\"] \\\n+    [list \"Executable for --just-symbols test\" \\\n+     \"$LDFLAGS -e 0 -T just-symbols.ld\" \"\" \\\n+     \"\" \\\n+     {just-symbols-0.s} \\\n+     {} \\\n+     \"just-symbols-0\"] \\\n+    [list \"Object with --just-symbols test\" \\\n+     \"$LDFLAGS -e 0 -T just-symbols.ld --just-symbols=tmpdir/just-symbols-0.o\" \"\" \\\n+     \"\" \\\n+     {just-symbols-1.s} \\\n+     {{objdump -s just-symbols-1.dd}} \\\n+     \"just-symbols-1obj\"] \\\n+    [list \"Executable with --just-symbols test\" \\\n+     \"$LDFLAGS -e 0 -T just-symbols.ld --just-symbols=tmpdir/just-symbols-0\" \"\" \\\n+     \"\" \\\n+     {just-symbols-1.s} \\\n+     {{objdump -s just-symbols-1.dd}} \\\n+     \"just-symbols-1exe\"] \\\n+]\n+\n+set LDFLAGS \"$saved_LDFLAGS\""
    },
    {
      "sha": "51d3b14bfa3d0387995c0189020f4fad3ad7dccf",
      "filename": "ld/testsuite/ld-misc/just-symbols.ld",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols.ld",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/32377a8037eefae8091f345546f52370ed515399/ld/testsuite/ld-misc/just-symbols.ld",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-misc/just-symbols.ld?ref=32377a8037eefae8091f345546f52370ed515399",
      "patch": "@@ -1,7 +1,7 @@\n SECTIONS\n {\n   .text : { *(.text) }\n-  .data : { *(.data) }\n-  .bss  : {  *(.bss) }\n+  .data : { *(.data .rw) }\n+  .bss  : { *(.bss) }\n   /DISCARD/ : { *(*) }\n }"
    }
  ]
}