{
  "sha": "346848622660e06b352613d425fe6ad67194ed14",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzQ2ODQ4NjIyNjYwZTA2YjM1MjYxM2Q0MjVmZTZhZDY3MTk0ZWQxNA==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-30T12:08:48Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-30T12:08:48Z"
    },
    "message": "x86: drop REGNAM_{AL,AX,EAX}\n\nThe former two are unused anyway. And having such constants isn't very\nhelpful either, when they live in a place where updating the register\ntable wouldn't even allow noticing the need to adjust these constants.",
    "tree": {
      "sha": "0496b3e75a3aff2756eb607f32265f02c7ff1275",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0496b3e75a3aff2756eb607f32265f02c7ff1275"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/346848622660e06b352613d425fe6ad67194ed14",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/346848622660e06b352613d425fe6ad67194ed14",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/346848622660e06b352613d425fe6ad67194ed14",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/346848622660e06b352613d425fe6ad67194ed14/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6288d05f11827f993308e6a2693516e2c123c0fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6288d05f11827f993308e6a2693516e2c123c0fb",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6288d05f11827f993308e6a2693516e2c123c0fb"
    }
  ],
  "stats": {
    "total": 29,
    "additions": 21,
    "deletions": 8
  },
  "files": [
    {
      "sha": "210a93858d462c1f428799d6d965e38795864c99",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/346848622660e06b352613d425fe6ad67194ed14/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/346848622660e06b352613d425fe6ad67194ed14/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=346848622660e06b352613d425fe6ad67194ed14",
      "patch": "@@ -1,3 +1,11 @@\n+2021-03-30  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* config/tc-i386.c (reg_eax): New.\n+\t(md_begin): Initialize reg_eax.\n+\t* config/tc-i386-intel.c (i386_intel_simplify_register): Use\n+\treg_eax.\n+\t(i386_intel_simplify): Likewise.\n+\n 2021-03-30  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (reg_st0): New."
    },
    {
      "sha": "e61e7572fc93d3b4914219a3636a093fb4a584c7",
      "filename": "gas/config/tc-i386-intel.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/346848622660e06b352613d425fe6ad67194ed14/gas/config/tc-i386-intel.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/346848622660e06b352613d425fe6ad67194ed14/gas/config/tc-i386-intel.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386-intel.c?ref=346848622660e06b352613d425fe6ad67194ed14",
      "patch": "@@ -335,7 +335,7 @@ i386_intel_simplify_register (expressionS *e)\n   else\n     {\n       /* esp is invalid as index */\n-      intel_state.index = i386_regtab + REGNAM_EAX + ESP_REG_NUM;\n+      intel_state.index = reg_eax + ESP_REG_NUM;\n     }\n   return 2;\n }\n@@ -500,7 +500,7 @@ static int i386_intel_simplify (expressionS *e)\n \t\tbreak;\n \t      default:\n \t\t/* esp is invalid as index */\n-\t\tintel_state.index = i386_regtab + REGNAM_EAX + ESP_REG_NUM;\n+\t\tintel_state.index = reg_eax + ESP_REG_NUM;\n \t\tbreak;\n \t      }\n "
    },
    {
      "sha": "7fa31dab553201bf81207a74ffd8f5c3d0bf7bfe",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/346848622660e06b352613d425fe6ad67194ed14/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/346848622660e06b352613d425fe6ad67194ed14/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=346848622660e06b352613d425fe6ad67194ed14",
      "patch": "@@ -214,6 +214,7 @@ static const char *default_arch = DEFAULT_ARCH;\n static const reg_entry bad_reg = { \"<bad>\", OPERAND_TYPE_NONE, 0, 0,\n \t\t\t\t   { Dw2Inval, Dw2Inval } };\n \n+static const reg_entry *reg_eax;\n static const reg_entry *reg_st0;\n static const reg_entry *reg_k0;\n \n@@ -3091,7 +3092,12 @@ md_begin (void)\n \tswitch (regtab->reg_type.bitfield.class)\n \t  {\n \t  case Reg:\n-\t    if (regtab->reg_type.bitfield.tbyte)\n+\t    if (regtab->reg_type.bitfield.dword)\n+\t      {\n+\t\tif (regtab->reg_type.bitfield.instance == Accum)\n+\t\t  reg_eax = regtab;\n+\t      }\n+\t    else if (regtab->reg_type.bitfield.tbyte)\n \t      {\n \t\t/* There's no point inserting st(<N>) in the hash table, as\n \t\t   parentheses aren't included in register_chars[] anyway.  */"
    },
    {
      "sha": "fb5b8c75ecf3707626c4c77c4b386d1919fd6357",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/346848622660e06b352613d425fe6ad67194ed14/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/346848622660e06b352613d425fe6ad67194ed14/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=346848622660e06b352613d425fe6ad67194ed14",
      "patch": "@@ -1,3 +1,7 @@\n+2021-03-30  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* i386-opc.h (REGNAM_AL, REGNAM_AX, REGNAM_EAX): Delete.\n+\n 2021-03-30  Jan Beulich  <jbeulich@suse.com>\n \n \t* i386-opc.h (REGNAM_AL, REGNAM_AX, REGNAM_EAX): Adjust values."
    },
    {
      "sha": "9c451defc934215a49ff4c29a19dfeb4d6994f53",
      "filename": "opcodes/i386-opc.h",
      "status": "modified",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/346848622660e06b352613d425fe6ad67194ed14/opcodes/i386-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/346848622660e06b352613d425fe6ad67194ed14/opcodes/i386-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-opc.h?ref=346848622660e06b352613d425fe6ad67194ed14",
      "patch": "@@ -990,11 +990,6 @@ typedef struct\n }\n reg_entry;\n \n-/* Entries in i386_regtab.  */\n-#define REGNAM_AL 0\n-#define REGNAM_AX 24\n-#define REGNAM_EAX 40\n-\n extern const reg_entry i386_regtab[];\n extern const unsigned int i386_regtab_size;\n "
    }
  ]
}