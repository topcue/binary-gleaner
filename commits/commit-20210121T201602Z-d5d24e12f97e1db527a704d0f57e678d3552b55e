{
  "sha": "d5d24e12f97e1db527a704d0f57e678d3552b55e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDVkMjRlMTJmOTdlMWRiNTI3YTcwNGQwZjU3ZTY3OGQzNTUyYjU1ZQ==",
  "commit": {
    "author": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-01-21T13:27:12Z"
    },
    "committer": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-01-21T20:16:02Z"
    },
    "message": "Fix build errors for armhf\n\nWhen building for 32-bit ARM, I ran into a couple build failures.\n\nThe first one seems to be caused by recent changes to warning switches,\nleading to the following error:\n\n--\nIn file included from gdb/coffread.c:35:0:\ngdb/coffread.c: In function  \"void enter_linenos(file_ptr, int, int, objfile*)\":\ngdb/complaints.h:40:40: error: format \"%ld\" expects argument of type \"long int\", but argument 2 has type \"file_ptr {aka long long int}\" [-Werror=format=]\n  complaint_internal (FMT, ##__VA_ARGS__);  \\\n                                        ^\ngdb/coffread.c:1413:7: note: in expansion of macro \"complaint\"\n       complaint (_(\"Line number pointer %ld lower than start of line numbers\"),\n       ^~~~~~~~~\n--\n\nThe other one is due to a narrowing conversion in valops.c:\n\n--\ngdb/valops.c: In function \"value* value_assign(value*, value*)\":\ngdb/gdbtypes.h:1798:43: error: narrowing conversion of \"type->type::length\" from \"ULONGEST {aka long long unsigned int}\" to \"size_t {aka unsigned int}\" inside { } [-Werror=narrowing]\n #define TYPE_LENGTH(thistype) (thistype)->length\n                               ~~~~~~~~~~~~^\ngdb/valops.c:1252:9: note: in expansion of macro \"TYPE_LENGTH\"\n         TYPE_LENGTH (type)});\n--\n\nFix both with the following patch. Validated with --enable-targets=all on\nUbuntu 18.04/20.04.\n\ngdb/ChangeLog:\n\n2021-01-21  Luis Machado  <luis.machado@linaro.org>\n\n\t* coffread.c (enter_linenos): Passing string to complaint.\n\t* valops.c (value_assign): Make array view.",
    "tree": {
      "sha": "9061e8bc763882cb71d9a421f3bc150f90d91fa2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9061e8bc763882cb71d9a421f3bc150f90d91fa2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d5d24e12f97e1db527a704d0f57e678d3552b55e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d5d24e12f97e1db527a704d0f57e678d3552b55e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d5d24e12f97e1db527a704d0f57e678d3552b55e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d5d24e12f97e1db527a704d0f57e678d3552b55e/comments",
  "author": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a59902a7c123512681bddc3fa90f271d4f089c35",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a59902a7c123512681bddc3fa90f271d4f089c35",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a59902a7c123512681bddc3fa90f271d4f089c35"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 11,
    "deletions": 4
  },
  "files": [
    {
      "sha": "83c1de9f54352ebda49911ec2581caa376842583",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=d5d24e12f97e1db527a704d0f57e678d3552b55e",
      "patch": "@@ -1,3 +1,8 @@\n+2021-01-21  Luis Machado  <luis.machado@linaro.org>\n+\n+\t* coffread.c (enter_linenos): Passing string to complaint.\n+\t* valops.c (value_assign): Make array view.\n+\n 2021-01-21  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* auto-load.h (debug_auto_load): Move here."
    },
    {
      "sha": "77752bc9111b02c35535d8a722cd1f7341646f1c",
      "filename": "gdb/coffread.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/coffread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/coffread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/coffread.c?ref=d5d24e12f97e1db527a704d0f57e678d3552b55e",
      "patch": "@@ -1410,8 +1410,8 @@ enter_linenos (file_ptr file_offset, int first_line,\n     return;\n   if (file_offset < linetab_offset)\n     {\n-      complaint (_(\"Line number pointer %ld lower than start of line numbers\"),\n-\t\t file_offset);\n+      complaint (_(\"Line number pointer %s lower than start of line numbers\"),\n+\t\t plongest (file_offset));\n       if (file_offset > linetab_size)\t/* Too big to be an offset?  */\n \treturn;\n       file_offset += linetab_offset;\t/* Try reading at that linetab"
    },
    {
      "sha": "d0d5628d11bcfb0111c346568560301cd9d6481b",
      "filename": "gdb/valops.c",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/valops.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d5d24e12f97e1db527a704d0f57e678d3552b55e/gdb/valops.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/valops.c?ref=d5d24e12f97e1db527a704d0f57e678d3552b55e",
      "patch": "@@ -1246,10 +1246,12 @@ value_assign (struct value *toval, struct value *fromval)\n \t      }\n \t    else\n \t      {\n+\t\tgdb::array_view<const gdb_byte> contents\n+\t\t  = gdb::make_array_view (value_contents (fromval),\n+\t\t\t\t\t  TYPE_LENGTH (type));\n \t\tput_frame_register_bytes (frame, value_reg,\n \t\t\t\t\t  value_offset (toval),\n-\t\t\t\t\t  {value_contents (fromval),\n-\t\t\t\t\t   TYPE_LENGTH (type)});\n+\t\t\t\t\t  contents);\n \t      }\n \t  }\n "
    }
  ]
}