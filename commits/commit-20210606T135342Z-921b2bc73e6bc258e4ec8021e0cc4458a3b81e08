{
  "sha": "921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTIxYjJiYzczZTZiYzI1OGU0ZWM4MDIxZTBjYzQ0NThhM2I4MWUwOA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2021-06-06T13:53:42Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-06T13:53:42Z"
    },
    "message": "gdb/testsuite: set sysroot in gdb.server/stop-reply-no-thread-multi.exp\n\nI get some random timeouts in this test due to big debug info taking a\nlot of time to read through gdbserver.  When host and target are on the\nsame machine, clear the sysroot parameter so that GDB reads the files\nfrom the local file system, as we already do in many tests.\n\nI agree with what Pedro says here:\n\n  https://sourceware.org/pipermail/gdb-patches/2019-March/156568.html\n\nthat if this is bad for us, it's also bad for users, so we should be\nfixing the slowness instead.  But so far nobody seems to be working on\nit, and the testsuite timeouts are getting in the way, so I think this\n\"set sysroot\" is a net positive for now.\n\nWithout this patch, the test takes over 2 minutes to run (most of it\n\"downloading\" libc debug info), with it it takes 10 seconds.\n\ngdb/testsuite/ChangeLog:\n\n\t* gdb.server/stop-reply-no-thread-multi.exp: Clear sysroot when\n\thost and target are local.\n\nChange-Id: Ieb6304f0e56b4575af450913de4210c667c6bf7b",
    "tree": {
      "sha": "7e007941e6d30326b5ff40d91d8e9d8e1f7f114d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7e007941e6d30326b5ff40d91d8e9d8e1f7f114d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9482e6e450c821052206283811d5a802fa9989dd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9482e6e450c821052206283811d5a802fa9989dd",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9482e6e450c821052206283811d5a802fa9989dd"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 12,
    "deletions": 0
  },
  "files": [
    {
      "sha": "d51b60c09c5d2f929fee0c669e2f4af1d88304fa",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
      "patch": "@@ -1,3 +1,8 @@\n+2021-06-06  Simon Marchi  <simon.marchi@efficios.com>\n+\n+\t* gdb.server/stop-reply-no-thread-multi.exp: Clear sysroot when\n+\thost and target are local.\n+\n 2021-06-05  Hannes Domani  <ssbssa@yahoo.de>\n \n \t* gdb.python/py-symbol.exp: Fix tests for Python 3."
    },
    {
      "sha": "b3ded0e5ab560ce3db7954737353fd4e77d98b75",
      "filename": "gdb/testsuite/gdb.server/stop-reply-no-thread-multi.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08/gdb/testsuite/gdb.server/stop-reply-no-thread-multi.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/921b2bc73e6bc258e4ec8021e0cc4458a3b81e08/gdb/testsuite/gdb.server/stop-reply-no-thread-multi.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.server/stop-reply-no-thread-multi.exp?ref=921b2bc73e6bc258e4ec8021e0cc4458a3b81e08",
      "patch": "@@ -48,6 +48,13 @@ proc run_test { target_non_stop disable_feature } {\n \n     save_vars { GDBFLAGS } {\n \tappend GDBFLAGS \" -ex \\\"maint set target-non-stop $target_non_stop\\\"\"\n+\n+\t# If GDB and GDBserver are both running locally, set the sysroot to avoid\n+\t# reading files via the remote protocol.\n+\tif { ![is_remote host] && ![is_remote target] } {\n+\t    set GDBFLAGS \"$GDBFLAGS -ex \\\"set sysroot\\\"\"\n+\t}\n+\n \tclean_restart ${binfile}\n     }\n "
    }
  ]
}