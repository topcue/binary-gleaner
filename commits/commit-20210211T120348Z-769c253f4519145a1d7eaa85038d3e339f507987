{
  "sha": "769c253f4519145a1d7eaa85038d3e339f507987",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzY5YzI1M2Y0NTE5MTQ1YTFkN2VhYTg1MDM4ZDNlMzM5ZjUwNzk4Nw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-02-11T11:53:45Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-02-11T12:03:48Z"
    },
    "message": "Revert \"ia64: Check UNDEFWEAK_NO_DYNAMIC_RELOC\"\n\nThis reverts commit db41f6eb5234ea3c74c1ce4798cf9923d4a45a98.",
    "tree": {
      "sha": "18d18706f7817975b2326d63cdf634a319f40b5e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/18d18706f7817975b2326d63cdf634a319f40b5e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/769c253f4519145a1d7eaa85038d3e339f507987",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/769c253f4519145a1d7eaa85038d3e339f507987",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/769c253f4519145a1d7eaa85038d3e339f507987",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/769c253f4519145a1d7eaa85038d3e339f507987/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a1670b7263d1cda1e373c0340c9b31b1f132e826",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a1670b7263d1cda1e373c0340c9b31b1f132e826",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a1670b7263d1cda1e373c0340c9b31b1f132e826"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 10,
    "deletions": 15
  },
  "files": [
    {
      "sha": "b0f1ce3ae48a97ae19bc1a405b37c312b827596b",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/769c253f4519145a1d7eaa85038d3e339f507987/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/769c253f4519145a1d7eaa85038d3e339f507987/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=769c253f4519145a1d7eaa85038d3e339f507987",
      "patch": "@@ -1,3 +1,8 @@\n+2021-02-11  Alan Modra  <amodra@gmail.com>\n+\n+\tPR ld/22269\n+\t* elfnn-ia64.c: Revert 2017-10-14 git commit db41f6eb5234.\n+\n 2021-02-11  Alan Modra  <amodra@gmail.com>\n \n \tPR 27294"
    },
    {
      "sha": "aaa69c4b2cd86d738453c23624c68d16ada0a237",
      "filename": "bfd/elfnn-ia64.c",
      "status": "modified",
      "additions": 5,
      "deletions": 15,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/769c253f4519145a1d7eaa85038d3e339f507987/bfd/elfnn-ia64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/769c253f4519145a1d7eaa85038d3e339f507987/bfd/elfnn-ia64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfnn-ia64.c?ref=769c253f4519145a1d7eaa85038d3e339f507987",
      "patch": "@@ -2200,9 +2200,6 @@ elfNN_ia64_check_relocs (bfd *abfd, struct bfd_link_info *info,\n       else\n \th = NULL;\n \n-      if (h && UNDEFWEAK_NO_DYNAMIC_RELOC (info, h))\n-\tcontinue;\n-\n       /* We can only get preliminary data on whether a symbol is\n \t locally or externally defined, as not all of the input files\n \t have yet been processed.  Do something with what we know, as\n@@ -2377,9 +2374,6 @@ elfNN_ia64_check_relocs (bfd *abfd, struct bfd_link_info *info,\n       else\n \th = NULL;\n \n-      if (h && UNDEFWEAK_NO_DYNAMIC_RELOC (info, h))\n-\tcontinue;\n-\n       /* We can only get preliminary data on whether a symbol is\n \t locally or externally defined, as not all of the input files\n \t have yet been processed.  Do something with what we know, as\n@@ -2732,8 +2726,7 @@ allocate_fptr (struct elfNN_ia64_dyn_sym_info *dyn_i, void * data)\n \n       if (!bfd_link_executable (x->info)\n \t  && (!h\n-\t      || (ELF_ST_VISIBILITY (h->other) == STV_DEFAULT\n-\t\t  && !UNDEFWEAK_NO_DYNAMIC_RELOC (x->info, h))\n+\t      || ELF_ST_VISIBILITY (h->other) == STV_DEFAULT\n \t      || (h->root.type != bfd_link_hash_undefweak\n \t\t  && h->root.type != bfd_link_hash_undefined)))\n \t{\n@@ -2862,8 +2855,8 @@ allocate_dynrel_entries (struct elfNN_ia64_dyn_sym_info *dyn_i,\n \n   shared = bfd_link_pic (x->info);\n   resolved_zero = (dyn_i->h\n-\t\t   && UNDEFWEAK_NO_DYNAMIC_RELOC (x->info,\n-\t\t\t\t\t\t       dyn_i->h));\n+\t\t   && ELF_ST_VISIBILITY (dyn_i->h->other)\n+\t\t   && dyn_i->h->root.type == bfd_link_hash_undefweak);\n \n   /* Take care of the GOT and PLT relocations.  */\n \n@@ -3307,8 +3300,7 @@ set_got_entry (bfd *abfd, struct bfd_link_info *info,\n       /* Install a dynamic relocation if needed.  */\n       if (((bfd_link_pic (info)\n \t    && (!dyn_i->h\n-\t\t|| (ELF_ST_VISIBILITY (dyn_i->h->other) == STV_DEFAULT\n-\t\t    && !UNDEFWEAK_NO_DYNAMIC_RELOC (info, dyn_i->h))\n+\t\t|| ELF_ST_VISIBILITY (dyn_i->h->other) == STV_DEFAULT\n \t\t|| dyn_i->h->root.type != bfd_link_hash_undefweak)\n \t    && dyn_r_type != R_IA64_DTPREL32LSB\n \t    && dyn_r_type != R_IA64_DTPREL64LSB)\n@@ -3472,8 +3464,7 @@ set_pltoff_entry (bfd *abfd, struct bfd_link_info *info,\n       if (!is_plt\n \t  && bfd_link_pic (info)\n \t  && (!dyn_i->h\n-\t      || (ELF_ST_VISIBILITY (dyn_i->h->other) == STV_DEFAULT\n-\t\t  && !UNDEFWEAK_NO_DYNAMIC_RELOC (info, dyn_i->h))\n+\t      || ELF_ST_VISIBILITY (dyn_i->h->other) == STV_DEFAULT\n \t      || dyn_i->h->root.type != bfd_link_hash_undefweak))\n \t{\n \t  unsigned int dyn_r_type;\n@@ -3940,7 +3931,6 @@ elfNN_ia64_relocate_section (bfd *output_bfd,\n \tcase R_IA64_DIR64LSB:\n \t  /* Install a dynamic relocation for this reloc.  */\n \t  if ((dynamic_symbol_p || bfd_link_pic (info))\n-\t      && !(h && UNDEFWEAK_NO_DYNAMIC_RELOC (info, h))\n \t      && r_symndx != STN_UNDEF\n \t      && (input_section->flags & SEC_ALLOC) != 0)\n \t    {"
    }
  ]
}