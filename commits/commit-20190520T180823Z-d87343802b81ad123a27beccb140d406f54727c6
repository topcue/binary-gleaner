{
  "sha": "d87343802b81ad123a27beccb140d406f54727c6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDg3MzQzODAyYjgxYWQxMjNhMjdiZWNjYjE0MGQ0MDZmNTQ3MjdjNg==",
  "commit": {
    "author": {
      "name": "Faraz Shahbazker",
      "email": "fshahbazker@wavecomp.com",
      "date": "2019-05-06T16:09:02Z"
    },
    "committer": {
      "name": "Faraz Shahbazker",
      "email": "fshahbazker@wavecomp.com",
      "date": "2019-05-20T18:08:23Z"
    },
    "message": "[MIPS] PR gas/14798: Limit IRIX5 specific default typing to IRIX targets\n\nOn IRIX 5, every global symbol that is not explicitly labelled as\nbeing a function is assumed to be an object.  There is no reason\nwhy IRIX behaviour should extend to all MIPS targets, so limit this\nto only IRIX targets.\n\ngas/\n\tPR 14798\n\t* config/tc-mips.c (s_mips_globl): Only treat symbols that are\n\tnot explicitly labelled as BSF_OBJECTs for IRIX targets.\n\t* testsuite/gas/mips/pr14798.s: New test source.\n\t* testsuite/gas/mips/pr14798-irix.d: New test.\n\t* testsuite/gas/mips/pr14798.d: Likewise.\n\t* testsuite/gas/mips/mips.exp: Run the new tests.\n\nbinutils/\n\tPR 14798\n\t* testsuite/binutils-all/readelf.ss-mips: Update reference output.\n\t* testsuite/binutils-all/readelf.ss-tmips: Likewise.\n\nld/\n\tPR 14798\n\t* testsuite/ld-mips-elf/reloc-6a.s: Specify .text section for\n\tglobal code symbols.\n\t* testsuite/ld-mips-elf/reloc-6b.s: Likewise.",
    "tree": {
      "sha": "009550005a43b878031c01be5ab6eafd390bd10f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/009550005a43b878031c01be5ab6eafd390bd10f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d87343802b81ad123a27beccb140d406f54727c6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d87343802b81ad123a27beccb140d406f54727c6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d87343802b81ad123a27beccb140d406f54727c6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d87343802b81ad123a27beccb140d406f54727c6/comments",
  "author": {
    "login": "farazs-github",
    "id": 57776434,
    "node_id": "MDQ6VXNlcjU3Nzc2NDM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/57776434?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/farazs-github",
    "html_url": "https://github.com/farazs-github",
    "followers_url": "https://api.github.com/users/farazs-github/followers",
    "following_url": "https://api.github.com/users/farazs-github/following{/other_user}",
    "gists_url": "https://api.github.com/users/farazs-github/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/farazs-github/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/farazs-github/subscriptions",
    "organizations_url": "https://api.github.com/users/farazs-github/orgs",
    "repos_url": "https://api.github.com/users/farazs-github/repos",
    "events_url": "https://api.github.com/users/farazs-github/events{/privacy}",
    "received_events_url": "https://api.github.com/users/farazs-github/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "farazs-github",
    "id": 57776434,
    "node_id": "MDQ6VXNlcjU3Nzc2NDM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/57776434?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/farazs-github",
    "html_url": "https://github.com/farazs-github",
    "followers_url": "https://api.github.com/users/farazs-github/followers",
    "following_url": "https://api.github.com/users/farazs-github/following{/other_user}",
    "gists_url": "https://api.github.com/users/farazs-github/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/farazs-github/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/farazs-github/subscriptions",
    "organizations_url": "https://api.github.com/users/farazs-github/orgs",
    "repos_url": "https://api.github.com/users/farazs-github/repos",
    "events_url": "https://api.github.com/users/farazs-github/events{/privacy}",
    "received_events_url": "https://api.github.com/users/farazs-github/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cffc205c9eaacfa312323807cd60b9d3d1c26894",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cffc205c9eaacfa312323807cd60b9d3d1c26894",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cffc205c9eaacfa312323807cd60b9d3d1c26894"
    }
  ],
  "stats": {
    "total": 72,
    "additions": 60,
    "deletions": 12
  },
  "files": [
    {
      "sha": "184c93accd842c82365c20047825bb6f201d8fa5",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -1,3 +1,9 @@\n+2019-05-20  Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\tPR 14798\n+\t* testsuite/binutils-all/readelf.ss-mips: Update reference output.\n+\t* testsuite/binutils-all/readelf.ss-tmips: Likewise.\n+\n 2019-05-20  Nick Clifton  <nickc@redhat.com>\n \n \t* po/ca.po: Updated Catalan translation."
    },
    {
      "sha": "c49416bab40d8c7fbe33cdb64c3de8cd22383b89",
      "filename": "binutils/testsuite/binutils-all/readelf.ss-mips",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/binutils/testsuite/binutils-all/readelf.ss-mips",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/binutils/testsuite/binutils-all/readelf.ss-mips",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.ss-mips?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -9,11 +9,11 @@ Symbol table '.symtab' contains 16 entries:\n  +5: 00000000 +0 +SECTION +LOCAL +DEFAULT +. (|\\.MIPS\\.abiflags)\n  +6: 00000000 +0 +SECTION +LOCAL +DEFAULT +. (|\\.pdr)\n  +7: 00000000 +0 +SECTION +LOCAL +DEFAULT +. (|\\.gnu\\.attributes)\n- +8: 00000000 +0 +OBJECT +GLOBAL +DEFAULT +. text_symbol\n+ +8: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +. text_symbol\n  +9: 00000000 +0 +NOTYPE +LOCAL +DEFAULT +. static_text_symbol\n  +10: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +UND external_symbol\n- +11: 00000000 +0 +OBJECT +GLOBAL +DEFAULT +. data_symbol\n+ +11: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +. data_symbol\n  +12: 00000000 +0 +NOTYPE +LOCAL +DEFAULT +. static_data_symbol\n  +13: 00000004 +4 +(COMMON|OBJECT) +GLOBAL +DEFAULT +(PRC|COM) common_symbol\n- +14: 00000008 +0 +OBJECT +GLOBAL +DEFAULT +. text_symbol2\n- +15: 0000000c +0 +OBJECT +GLOBAL +DEFAULT +. text_symbol3\n+ +14: 00000008 +0 +NOTYPE +GLOBAL +DEFAULT +. text_symbol2\n+ +15: 0000000c +0 +NOTYPE +GLOBAL +DEFAULT +. text_symbol3"
    },
    {
      "sha": "4fd7fe02786febc27bd21763565828e8971919a6",
      "filename": "binutils/testsuite/binutils-all/readelf.ss-tmips",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/binutils/testsuite/binutils-all/readelf.ss-tmips",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/binutils/testsuite/binutils-all/readelf.ss-tmips",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.ss-tmips?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -11,9 +11,9 @@ Symbol table '.symtab' contains 16 entries:\n  +7: 00000000 +0 +SECTION +LOCAL +DEFAULT +6 \n  +8: 00000000 +0 +SECTION +LOCAL +DEFAULT +7 \n  +9: 00000000 +0 +SECTION +LOCAL +DEFAULT +8 \n- +10: 00000000 +0 +OBJECT +GLOBAL +DEFAULT +1 text_symbol\n+ +10: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +1 text_symbol\n  +11: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +UND external_symbol\n- +12: 00000000 +0 +OBJECT +GLOBAL +DEFAULT +3 data_symbol\n+ +12: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +3 data_symbol\n  +13: 00000004 +4 +(COMMON|OBJECT) +GLOBAL +DEFAULT +(PRC|COM) common_symbol\n- +14: 00000008 +0 +OBJECT +GLOBAL +DEFAULT +. text_symbol2\n- +15: 0000000c +0 +OBJECT +GLOBAL +DEFAULT +. text_symbol3\n+ +14: 00000008 +0 +NOTYPE +GLOBAL +DEFAULT +. text_symbol2\n+ +15: 0000000c +0 +NOTYPE +GLOBAL +DEFAULT +. text_symbol3"
    },
    {
      "sha": "2230f44e550da3a9cf5d850f4eca02cc95e49c98",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -1,3 +1,13 @@\n+2019-05-20  Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\tPR 14798\n+\t* config/tc-mips.c (s_mips_globl): Only treat symbols that are\n+\tnot explicitly labelled as BSF_OBJECTs for IRIX targets.\n+\t* testsuite/gas/mips/pr14798.s: New test source.\n+\t* testsuite/gas/mips/pr14798-irix.d: New test.\n+\t* testsuite/gas/mips/pr14798.d: Likewise.\n+\t* testsuite/gas/mips/mips.exp: Run the new tests.\n+\n 2019-05-17  John Darrington  <john@darrington.wattle.id.au>\n \n \t* doc/c-arm.texi (ARM Options): Remove \"(r)\" and \"(tm)\""
    },
    {
      "sha": "0f0ace5180018d007959d2f901867345d566d8b7",
      "filename": "gas/config/tc-mips.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/config/tc-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/config/tc-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-mips.c?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -16454,9 +16454,13 @@ s_mips_globl (int x ATTRIBUTE_UNUSED)\n       *input_line_pointer = c;\n       SKIP_WHITESPACE_AFTER_NAME ();\n \n+#ifdef TE_IRIX\n       /* On Irix 5, every global symbol that is not explicitly labelled as\n          being a function is apparently labelled as being an object.  */\n       flag = BSF_OBJECT;\n+#else\n+      flag = BSF_NO_FLAGS;\n+#endif\n \n       if (!is_end_of_line[(unsigned char) *input_line_pointer]\n \t  && (*input_line_pointer != ','))"
    },
    {
      "sha": "c8ecd04e9433264c5d8406fdc00010250088f76f",
      "filename": "gas/testsuite/gas/mips/mips.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/mips.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/mips.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/mips.exp?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -2087,4 +2087,10 @@ if { [istarget mips*-*-vxworks*] } {\n \n     run_dump_test_arches \"llpscp-32\" [mips_arch_list_matching mips32r6]\n     run_dump_test_arch \"llpscp-64\" \"\" mips64r6\n+\n+    if [istarget *-*-irix*] {\n+\trun_dump_test \"pr14798-irix\"\n+    } else {\n+\trun_dump_test \"pr14798\"\n+    }\n }"
    },
    {
      "sha": "155a10cd5dc12d634dcd0db91adf36fe5054234d",
      "filename": "gas/testsuite/gas/mips/pr14798-irix.d",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798-irix.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798-irix.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/pr14798-irix.d?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -0,0 +1,6 @@\n+#DUMPPROG: readelf\n+#readelf: -s\n+#source: pr14798.s\n+#...\n+ *[0-9]+: +[0-9]+ +[0-9]+ +OBJECT +GLOBAL +DEFAULT +[0-9]+ foo\n+#pass"
    },
    {
      "sha": "cfdef3e3c6491aa6a0f2b1ce34c4ddd828c4b65b",
      "filename": "gas/testsuite/gas/mips/pr14798.d",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/pr14798.d?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -0,0 +1,5 @@\n+#DUMPPROG: readelf\n+#readelf: -s\n+#...\n+ *[0-9]+: +[0-9]+ +[0-9]+ +NOTYPE +GLOBAL +DEFAULT +[0-9]+ foo\n+#pass"
    },
    {
      "sha": "1ee2486b1b7706984794d86c228fc5e9483dd35c",
      "filename": "gas/testsuite/gas/mips/pr14798.s",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/gas/testsuite/gas/mips/pr14798.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/pr14798.s?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -0,0 +1,4 @@\n+\t.text\n+\t.globl foo\n+foo:\n+\tnop"
    },
    {
      "sha": "594a3043cf30017f11c2f0c6aa3b23880c7b328d",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -1,3 +1,10 @@\n+2019-05-20  Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\tPR 14798\n+\t* testsuite/ld-mips-elf/reloc-6a.s: Specify .text section for\n+\tglobal code symbols.\n+\t* testsuite/ld-mips-elf/reloc-6b.s: Likewise.\n+\n 2019-05-17  Alan Modra  <amodra@gmail.com>\n \n \tPR 24567"
    },
    {
      "sha": "da8ec116006678a044b395675e3bf53c4acb3fd1",
      "filename": "ld/testsuite/ld-mips-elf/reloc-6a.s",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/ld/testsuite/ld-mips-elf/reloc-6a.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/ld/testsuite/ld-mips-elf/reloc-6a.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-mips-elf/reloc-6a.s?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -1,5 +1,5 @@\n-\t.globl\tus\n-\t.globl\tgs\n+\t.globl\tus .text\n+\t.globl\tgs .text\n us:\n gs:\n ls:"
    },
    {
      "sha": "ae4e9bcf8a9dc05abfd3313b3b0854252706d83b",
      "filename": "ld/testsuite/ld-mips-elf/reloc-6b.s",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d87343802b81ad123a27beccb140d406f54727c6/ld/testsuite/ld-mips-elf/reloc-6b.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d87343802b81ad123a27beccb140d406f54727c6/ld/testsuite/ld-mips-elf/reloc-6b.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-mips-elf/reloc-6b.s?ref=d87343802b81ad123a27beccb140d406f54727c6",
      "patch": "@@ -1,5 +1,5 @@\n-\t.globl\t__start\n-\t.globl\tgs\n+\t.globl\t__start .text\n+\t.globl\tgs .text\n __start:\n gs:\n ls:"
    }
  ]
}