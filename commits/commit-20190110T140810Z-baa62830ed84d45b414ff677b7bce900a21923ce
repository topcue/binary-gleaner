{
  "sha": "baa62830ed84d45b414ff677b7bce900a21923ce",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmFhNjI4MzBlZDg0ZDQ1YjQxNGZmNjc3YjdiY2U5MDBhMjE5MjNjZQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2018-05-10T22:23:44Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-01-10T14:08:10Z"
    },
    "message": "Remove some unneeded psymtab initializations\n\nallocate_psymtab has long cleared the new psymtab that is returned.\nThis patch documents this behavior and then removes some redundant\ninitializations.\n\ngdb/ChangeLog\n2019-01-10  Tom Tromey  <tom@tromey.com>\n\n\t* xcoffread.c (xcoff_end_psymtab): Remove some initializations.\n\t* psymtab.c (allocate_psymtab): Add comment.\n\t* psympriv.h (allocate_psymtab): Add comment.\n\t* dwarf2read.c (dwarf2_create_include_psymtab): Remove some\n\tinitializations.\n\t* dbxread.c (dbx_end_psymtab): Remove some initializations.",
    "tree": {
      "sha": "c6bcf23339cd0deca2a1e76d9e0682a0125fed7b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c6bcf23339cd0deca2a1e76d9e0682a0125fed7b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/baa62830ed84d45b414ff677b7bce900a21923ce",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/baa62830ed84d45b414ff677b7bce900a21923ce",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/baa62830ed84d45b414ff677b7bce900a21923ce",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/baa62830ed84d45b414ff677b7bce900a21923ce/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0e8f53badb3df16f4104890395d9324a5bcf568d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0e8f53badb3df16f4104890395d9324a5bcf568d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0e8f53badb3df16f4104890395d9324a5bcf568d"
    }
  ],
  "stats": {
    "total": 41,
    "additions": 19,
    "deletions": 22
  },
  "files": [
    {
      "sha": "99b5afd1026ea6b5c224d3eac3330ffdf337b66a",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -1,3 +1,12 @@\n+2019-01-10  Tom Tromey  <tom@tromey.com>\n+\n+\t* xcoffread.c (xcoff_end_psymtab): Remove some initializations.\n+\t* psymtab.c (allocate_psymtab): Add comment.\n+\t* psympriv.h (allocate_psymtab): Add comment.\n+\t* dwarf2read.c (dwarf2_create_include_psymtab): Remove some\n+\tinitializations.\n+\t* dbxread.c (dbx_end_psymtab): Remove some initializations.\n+\n 2019-01-10  Tom Tromey  <tom@tromey.com>\n \n \t* symfile.h (mdebug_build_psymtabs, elfmdebug_build_psymtabs):"
    },
    {
      "sha": "743fced220f87aa540e01da3673083a434ccd463",
      "filename": "gdb/dbxread.c",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/dbxread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/dbxread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dbxread.c?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -2057,13 +2057,6 @@ dbx_end_psymtab (struct objfile *objfile, struct partial_symtab *pst,\n       subpst->dependencies[0] = pst;\n       subpst->number_of_dependencies = 1;\n \n-      subpst->globals_offset =\n-\tsubpst->n_global_syms =\n-\tsubpst->statics_offset =\n-\tsubpst->n_static_syms = 0;\n-\n-      subpst->readin = 0;\n-      subpst->compunit_symtab = 0;\n       subpst->read_symtab = pst->read_symtab;\n     }\n "
    },
    {
      "sha": "40d173aab6f279db5bb091495978842debf38ca9",
      "filename": "gdb/dwarf2read.c",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/dwarf2read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/dwarf2read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2read.c?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -6592,13 +6592,7 @@ dwarf2_create_include_psymtab (const char *name, struct partial_symtab *pst,\n   subpst->dependencies[0] = pst;\n   subpst->number_of_dependencies = 1;\n \n-  subpst->globals_offset = 0;\n-  subpst->n_global_syms = 0;\n-  subpst->statics_offset = 0;\n-  subpst->n_static_syms = 0;\n-  subpst->compunit_symtab = NULL;\n   subpst->read_symtab = pst->read_symtab;\n-  subpst->readin = 0;\n \n   /* No private part is necessary for include psymtabs.  This property\n      can be used to differentiate between such include psymtabs and"
    },
    {
      "sha": "76893f2bf0681b429f89cf5aa05b65f706a913d3",
      "filename": "gdb/psympriv.h",
      "status": "modified",
      "additions": 8,
      "deletions": 2,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/psympriv.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/psympriv.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/psympriv.h?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -290,8 +290,14 @@ extern struct partial_symtab *start_psymtab_common (struct objfile *,\n \n extern void end_psymtab_common (struct objfile *, struct partial_symtab *);\n \n-extern struct partial_symtab *allocate_psymtab (const char *,\n-\t\t\t\t\t\tstruct objfile *)\n+/* Allocate a new partial symbol table associated with OBJFILE.\n+   FILENAME (which must be non-NULL) is the filename of this partial\n+   symbol table; it is copied into the appropriate storage.  A new\n+   partial symbol table is returned; aside from \"next\" and \"filename\",\n+   its fields are initialized to zero.  */\n+\n+extern struct partial_symtab *allocate_psymtab (const char *filename,\n+\t\t\t\t\t\tstruct objfile *objfile)\n   ATTRIBUTE_NONNULL (1);\n \n extern void discard_psymtab (struct objfile *, struct partial_symtab *);"
    },
    {
      "sha": "1a54ea9c8e44c8bd442d21f52eb6698b450b01c1",
      "filename": "gdb/psymtab.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/psymtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/psymtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/psymtab.c?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -1677,6 +1677,8 @@ init_psymbol_list (struct objfile *objfile, int total_symbols)\n   objfile->static_psymbols.reserve (total_symbols / 10);\n }\n \n+/* See psympriv.h.  */\n+\n struct partial_symtab *\n allocate_psymtab (const char *filename, struct objfile *objfile)\n {"
    },
    {
      "sha": "41ff583628a5fb83df8ca388ad3108201c81cf81",
      "filename": "gdb/xcoffread.c",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/xcoffread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/baa62830ed84d45b414ff677b7bce900a21923ce/gdb/xcoffread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xcoffread.c?ref=baa62830ed84d45b414ff677b7bce900a21923ce",
      "patch": "@@ -2103,13 +2103,6 @@ xcoff_end_psymtab (struct objfile *objfile, struct partial_symtab *pst,\n       subpst->dependencies[0] = pst;\n       subpst->number_of_dependencies = 1;\n \n-      subpst->globals_offset =\n-\tsubpst->n_global_syms =\n-\tsubpst->statics_offset =\n-\tsubpst->n_static_syms = 0;\n-\n-      subpst->readin = 0;\n-      subpst->compunit_symtab = NULL;\n       subpst->read_symtab = pst->read_symtab;\n     }\n "
    }
  ]
}