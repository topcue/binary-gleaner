{
  "sha": "184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTg0ZGNkODFjNzk3MmMzZmQzNTU3ZWM0YTA0MDY0NTI5ZWUzY2E4ZA==",
  "commit": {
    "author": {
      "name": "Felix Willgerodt",
      "email": "felix.willgerodt@intel.com",
      "date": "2021-04-20T06:44:17Z"
    },
    "committer": {
      "name": "Felix Willgerodt",
      "email": "felix.willgerodt@intel.com",
      "date": "2021-04-20T06:44:17Z"
    },
    "message": "gdb: Fix reduce/reduce conflicts for qualifier_seq_noopt in the C parser.\n\nThis fixes a problem with GDB's address space qualifier parsing.  GDB uses\n'@' as a way to express an address space in expression evaluation.  This can\ncurrently lead to a crash for \"Add support for the __flash qualifier on AVR\"\n(487d975399dfcb2bb2f0998a7d12bd62acdd9fa1), the only user I am aware of.\n\nProgram:\n~~~\nconst __flash char data_in_flash = 0xab;\n\nint\nmain (void)\n{\n  const __flash char *pointer_to_flash = &data_in_flash;\n}\n~~~\n\nBefore:\n~~~\n(gdb) p data_in_flash\n$1 = -85 '\\253'\n(gdb) p *(const char * @flash) pointer_to_flash\n$2 = -85 '\\253'\n(gdb) p *(@flash const char *) pointer_to_flash\ntype-stack.c:201: internal-error: type* type_stack::follow_types(type*): unrecognized tp_ value in follow_types\nA problem internal to GDB has been detected,\nfurther debugging may prove unreliable.\nQuit this debugging session? (y or n)\n~~~\n\nAfter:\n~~~\n(gdb) p data_in_flash\n$1 = -85 '\\253'\n(gdb) p *(const char *) pointer_to_flash\n$2 = 0 '\\000'\n(gdb) p *(const char * @flash) pointer_to_flash\n$3 = -85 '\\253'\n(gdb) p *(@flash const char *) pointer_to_flash\n$4 = 0 '\\000'\n(gdb)\n~~~\n\nNote that how the binding of this qualifier is interpreted and resolved for an\naddress/pointer is target specific.  Hence only the prepended qualifier works\nfor AVR, even if it seems syntactically incorrect.  I won't change this for\nAVR, as I am not familiar with that target.\n\nBison now also complains about less conflicts:\n\nBefore:\n  YACC   c-exp.c\ngdb/gdb/c-exp.y: warning: 153 shift/reduce conflicts [-Wconflicts-sr]\ngdb/gdb/c-exp.y: warning: 70 reduce/reduce conflicts [-Wconflicts-rr]\n\nAfter:\n  YACC   c-exp.c\ngdb/gdb/c-exp.y: warning: 60 shift/reduce conflicts [-Wconflicts-sr]\ngdb/gdb/c-exp.y: warning: 69 reduce/reduce conflicts [-Wconflicts-rr]\n\ngdb/ChangeLog:\n2021-04-20  Felix Willgerodt  <felix.willgerodt@intel.com>\n\n\t* c-exp.y (qualifier_seq_noopt): Replace qualifier_seq with\n\tqualifier_seq_noopt.",
    "tree": {
      "sha": "fd8ff7933eddff55fed0a32f39347a1971fddb07",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fd8ff7933eddff55fed0a32f39347a1971fddb07"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/184dcd81c7972c3fd3557ec4a04064529ee3ca8d/comments",
  "author": {
    "login": "felix-willgerodt",
    "id": 68062808,
    "node_id": "MDQ6VXNlcjY4MDYyODA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/68062808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/felix-willgerodt",
    "html_url": "https://github.com/felix-willgerodt",
    "followers_url": "https://api.github.com/users/felix-willgerodt/followers",
    "following_url": "https://api.github.com/users/felix-willgerodt/following{/other_user}",
    "gists_url": "https://api.github.com/users/felix-willgerodt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/felix-willgerodt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/felix-willgerodt/subscriptions",
    "organizations_url": "https://api.github.com/users/felix-willgerodt/orgs",
    "repos_url": "https://api.github.com/users/felix-willgerodt/repos",
    "events_url": "https://api.github.com/users/felix-willgerodt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/felix-willgerodt/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "felix-willgerodt",
    "id": 68062808,
    "node_id": "MDQ6VXNlcjY4MDYyODA4",
    "avatar_url": "https://avatars.githubusercontent.com/u/68062808?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/felix-willgerodt",
    "html_url": "https://github.com/felix-willgerodt",
    "followers_url": "https://api.github.com/users/felix-willgerodt/followers",
    "following_url": "https://api.github.com/users/felix-willgerodt/following{/other_user}",
    "gists_url": "https://api.github.com/users/felix-willgerodt/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/felix-willgerodt/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/felix-willgerodt/subscriptions",
    "organizations_url": "https://api.github.com/users/felix-willgerodt/orgs",
    "repos_url": "https://api.github.com/users/felix-willgerodt/repos",
    "events_url": "https://api.github.com/users/felix-willgerodt/events{/privacy}",
    "received_events_url": "https://api.github.com/users/felix-willgerodt/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "525174e886044ce3538b13545939421032f77a1b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/525174e886044ce3538b13545939421032f77a1b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/525174e886044ce3538b13545939421032f77a1b"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "a601300e95509625664a344323f3c66754a65ccc",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/184dcd81c7972c3fd3557ec4a04064529ee3ca8d/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/184dcd81c7972c3fd3557ec4a04064529ee3ca8d/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
      "patch": "@@ -1,3 +1,8 @@\n+2021-04-20  Felix Willgerodt  <felix.willgerodt@intel.com>\n+\n+\t* c-exp.y (qualifier_seq_noopt): Replace qualifier_seq with\n+\tqualifier_seq_noopt.\n+\n 2021-04-20  Felix Willgerodt  <felix.willgerodt@intel.com>\n \n \t* c-exp.y (single_qualifier): Handle UNKNOWN_CPP_NAME."
    },
    {
      "sha": "93b10f05b7d24f79c04c62455bca40b854e4e510",
      "filename": "gdb/c-exp.y",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/184dcd81c7972c3fd3557ec4a04064529ee3ca8d/gdb/c-exp.y",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/184dcd81c7972c3fd3557ec4a04064529ee3ca8d/gdb/c-exp.y",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/c-exp.y?ref=184dcd81c7972c3fd3557ec4a04064529ee3ca8d",
      "patch": "@@ -1276,7 +1276,7 @@ single_qualifier:\n \n qualifier_seq_noopt:\n \t\tsingle_qualifier\n-\t| \tqualifier_seq single_qualifier\n+\t| \tqualifier_seq_noopt single_qualifier\n \t;\n \n qualifier_seq:"
    }
  ]
}