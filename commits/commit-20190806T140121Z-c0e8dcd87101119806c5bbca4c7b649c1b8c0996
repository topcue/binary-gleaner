{
  "sha": "c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzBlOGRjZDg3MTAxMTE5ODA2YzViYmNhNGM3YjY0OWMxYjhjMDk5Ng==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-07-23T18:41:02Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-08-06T14:01:21Z"
    },
    "message": "Change breakpoint::filter to be a unique_xmalloc_ptr\n\nThis changes breakpoint::filter to be a unique_xmalloc_ptr, removing\nan explicit xfree, as well as a use of a \"release\" method.\n\ngdb/ChangeLog\n2019-08-06  Tom Tromey  <tromey@adacore.com>\n\n\t* breakpoint.c (init_breakpoint_sal): Update.\n\t(breakpoint): Update.\n\t* breakpoint.h (struct breakpoint) <filter>: Now a\n\tunique_xmalloc_ptr.",
    "tree": {
      "sha": "5a48dc95bc727191690c782a470d1b184f87a1f0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5a48dc95bc727191690c782a470d1b184f87a1f0"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "128bf1fe608badb59d27f9c5c8ffb1a6a6d9d811",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/128bf1fe608badb59d27f9c5c8ffb1a6a6d9d811",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/128bf1fe608badb59d27f9c5c8ffb1a6a6d9d811"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 11,
    "deletions": 6
  },
  "files": [
    {
      "sha": "e1bd880d80c5538275872b6b1d7a9bc8910a41f9",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
      "patch": "@@ -1,3 +1,10 @@\n+2019-08-06  Tom Tromey  <tromey@adacore.com>\n+\n+\t* breakpoint.c (init_breakpoint_sal): Update.\n+\t(breakpoint): Update.\n+\t* breakpoint.h (struct breakpoint) <filter>: Now a\n+\tunique_xmalloc_ptr.\n+\n 2019-08-05  Christian Biesinger  <cbiesinger@google.com>\n \n \t* NEWS: Mention dictionary access on blocks."
    },
    {
      "sha": "7a1e7824f21a37a6164e652a010e2c9a81d0e31d",
      "filename": "gdb/breakpoint.c",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/breakpoint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/breakpoint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/breakpoint.c?ref=c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
      "patch": "@@ -8850,7 +8850,7 @@ init_breakpoint_sal (struct breakpoint *b, struct gdbarch *gdbarch,\n     b->location = std::move (location);\n   else\n     b->location = new_address_location (b->loc->address, NULL, 0);\n-  b->filter = filter.release ();\n+  b->filter = std::move (filter);\n }\n \n static void\n@@ -12124,7 +12124,6 @@ breakpoint::~breakpoint ()\n {\n   xfree (this->cond_string);\n   xfree (this->extra_string);\n-  xfree (this->filter);\n }\n \n static struct bp_location *\n@@ -13701,7 +13700,7 @@ decode_location_default (struct breakpoint *b,\n \n   decode_line_full (location, DECODE_LINE_FUNFIRSTLINE, search_pspace,\n \t\t    NULL, 0, &canonical, multiple_symbols_all,\n-\t\t    b->filter);\n+\t\t    b->filter.get ());\n \n   /* We should get 0 or 1 resulting SALs.  */\n   gdb_assert (canonical.lsals.size () < 2);"
    },
    {
      "sha": "69a043c7676b62c63fadcb3917c709ba655eab36",
      "filename": "gdb/breakpoint.h",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/breakpoint.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c0e8dcd87101119806c5bbca4c7b649c1b8c0996/gdb/breakpoint.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/breakpoint.h?ref=c0e8dcd87101119806c5bbca4c7b649c1b8c0996",
      "patch": "@@ -734,9 +734,8 @@ struct breakpoint\n   event_location_up location;\n \n   /* The filter that should be passed to decode_line_full when\n-     re-setting this breakpoint.  This may be NULL, but otherwise is\n-     allocated with xmalloc.  */\n-  char *filter = NULL;\n+     re-setting this breakpoint.  This may be NULL.  */\n+  gdb::unique_xmalloc_ptr<char> filter;\n \n   /* For a ranged breakpoint, the location we used to find the end of\n      the range.  */"
    }
  ]
}