{
  "sha": "b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjI2YTNkNTgyN2VkY2I5NDJiM2FmNWI5MjFiZjMxN2JiYzBjOGU4Mw==",
  "commit": {
    "author": {
      "name": "Sergei Trofimovich",
      "email": "siarheit@google.com",
      "date": "2020-01-03T11:21:00Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-01-03T11:21:00Z"
    },
    "message": "Fix ld/PR25316 for the ia64 target by refusing to support binary merging.\n\n\tld/PR25316\n\t* elfnn-ia64.c (elfNN_ia64_merge_private_bfd_data): don't fail\n        on binary inputs ld/PR25316.\n        (is_ia64_elf): new helper to filter on ia64 objects.",
    "tree": {
      "sha": "1fcc156fdd152c29dea7b74451c694d8b2724d06",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1fcc156fdd152c29dea7b74451c694d8b2724d06"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b26a3d5827edcb942b3af5b921bf317bbc0c8e83/comments",
  "author": {
    "login": "trofi",
    "id": 226650,
    "node_id": "MDQ6VXNlcjIyNjY1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/226650?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/trofi",
    "html_url": "https://github.com/trofi",
    "followers_url": "https://api.github.com/users/trofi/followers",
    "following_url": "https://api.github.com/users/trofi/following{/other_user}",
    "gists_url": "https://api.github.com/users/trofi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/trofi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/trofi/subscriptions",
    "organizations_url": "https://api.github.com/users/trofi/orgs",
    "repos_url": "https://api.github.com/users/trofi/repos",
    "events_url": "https://api.github.com/users/trofi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/trofi/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5437a02abc9fe106054965828787e8f232692935",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5437a02abc9fe106054965828787e8f232692935",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5437a02abc9fe106054965828787e8f232692935"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 13,
    "deletions": 4
  },
  "files": [
    {
      "sha": "2b988667966fdb16a821e50b27f92654ef794819",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b26a3d5827edcb942b3af5b921bf317bbc0c8e83/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b26a3d5827edcb942b3af5b921bf317bbc0c8e83/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
      "patch": "@@ -1,3 +1,9 @@\n+2020-01-03  Sergei Trofimovich  <siarheit@google.com>\n+\n+        * elfnn-ia64.c (elfNN_ia64_merge_private_bfd_data): don't fail\n+        on binary inputs ld/PR25316.\n+        (is_ia64_elf): new helper to filter on ia64 objects.\n+\n 2020-01-03  Jan Beulich  <jbeulich@suse.com>\n \n \t* mach-o.c (cpusubtype, bfd_mach_o_header_p): Insert underscore"
    },
    {
      "sha": "2ba9608e34973a653e453891c3d3cf8ddc73d6fe",
      "filename": "bfd/elfnn-ia64.c",
      "status": "modified",
      "additions": 7,
      "deletions": 4,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b26a3d5827edcb942b3af5b921bf317bbc0c8e83/bfd/elfnn-ia64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b26a3d5827edcb942b3af5b921bf317bbc0c8e83/bfd/elfnn-ia64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfnn-ia64.c?ref=b26a3d5827edcb942b3af5b921bf317bbc0c8e83",
      "patch": "@@ -39,6 +39,10 @@\n #define\tLOG_SECTION_ALIGN\t2\n #endif\n \n+#define is_ia64_elf(bfd)\t\t\t   \\\n+  (bfd_get_flavour (bfd) == bfd_target_elf_flavour \\\n+   && elf_object_id (bfd) == IA64_ELF_DATA)\n+\n typedef struct bfd_hash_entry *(*new_hash_entry_func)\n   (struct bfd_hash_entry *, struct bfd_hash_table *, const char *);\n \n@@ -4732,6 +4736,7 @@ elfNN_ia64_set_private_flags (bfd *abfd, flagword flags)\n \n /* Merge backend specific data from an object file to the output\n    object file when linking.  */\n+\n static bfd_boolean\n elfNN_ia64_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n {\n@@ -4740,10 +4745,8 @@ elfNN_ia64_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword in_flags;\n   bfd_boolean ok = TRUE;\n \n-  /* Don't even pretend to support mixed-format linking.  */\n-  if (bfd_get_flavour (ibfd) != bfd_target_elf_flavour\n-      || bfd_get_flavour (obfd) != bfd_target_elf_flavour)\n-    return FALSE;\n+  if (!is_ia64_elf (ibfd) || !is_ia64_elf (obfd))\n+    return TRUE;\n \n   in_flags  = elf_elfheader (ibfd)->e_flags;\n   out_flags = elf_elfheader (obfd)->e_flags;"
    }
  ]
}