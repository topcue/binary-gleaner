{
  "sha": "31bf18645d98b4d3d7357353be840e320649a67d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzFiZjE4NjQ1ZDk4YjRkM2Q3MzU3MzUzYmU4NDBlMzIwNjQ5YTY3ZA==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-03-06T14:52:14Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-03-06T14:52:14Z"
    },
    "message": "Add support for --dwarf-[3|4|5] to assembler command line.\n\n\tPR 25612\n\t* as.c (dwarf_level): Define.\n\t(show_usage): Add --gdwarf-3, --gdwarf-4 and --gdwarf-5.\n\t(parse_args): Add support for the new options.\n\tas.h (dwarf_level): Prototype.\n\t* dwarf2dbg.c (DWARF2_VERSION): Use dwarf_level as default version\n\tvalue.\n\t* config/tc-ia64.h (DWARF2_VERISION): Update definition.\n\t(DWARF2_LINE_VERSION): Remove definition.\n\t* doc/as.texi: Document the new options.",
    "tree": {
      "sha": "19e76bea23da3a56de6a64b949a4a8f3cd810fbd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/19e76bea23da3a56de6a64b949a4a8f3cd810fbd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/31bf18645d98b4d3d7357353be840e320649a67d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/31bf18645d98b4d3d7357353be840e320649a67d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/31bf18645d98b4d3d7357353be840e320649a67d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/31bf18645d98b4d3d7357353be840e320649a67d/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "09f2921cc95466db159cbf0476e1a8eeeee1806b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/09f2921cc95466db159cbf0476e1a8eeeee1806b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/09f2921cc95466db159cbf0476e1a8eeeee1806b"
    }
  ],
  "stats": {
    "total": 99,
    "additions": 88,
    "deletions": 11
  },
  "files": [
    {
      "sha": "1b377fd3b346210b09c734feafd9bbcf4da483e4",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -1,3 +1,16 @@\n+2020-03-06  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 25612\n+\t* as.c (dwarf_level): Define.\n+\t(show_usage): Add --gdwarf-3, --gdwarf-4 and --gdwarf-5.\n+\t(parse_args): Add support for the new options.\n+\tas.h (dwarf_level): Prototype.\n+\t* dwarf2dbg.c (DWARF2_VERSION): Use dwarf_level as default version\n+\tvalue.\n+\t* config/tc-ia64.h (DWARF2_VERISION): Update definition.\n+\t(DWARF2_LINE_VERSION): Remove definition.\n+\t* doc/as.texi: Document the new options.\n+\n 2020-03-06  Nick Clifton  <nickc@redhat.com>\n \n \tPR 25572"
    },
    {
      "sha": "4c5881abd88c8fd493b8448fa7859810f1d8c197",
      "filename": "gas/as.c",
      "status": "modified",
      "additions": 50,
      "deletions": 7,
      "changes": 57,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/as.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/as.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/as.c?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -102,6 +102,9 @@ int verbose = 0;\n    MD_AFTER_PARSE_ARGS.  */\n int flag_dwarf_cie_version = -1;\n \n+/* The maximum level of DWARF DEBUG information we should manufacture.  */\n+unsigned int dwarf_level = 0;\n+\n #if defined OBJ_ELF || defined OBJ_MAYBE_ELF\n int flag_use_elf_stt_common = DEFAULT_GENERATE_ELF_STT_COMMON;\n bfd_boolean flag_generate_build_notes = DEFAULT_GENERATE_BUILD_NOTES;\n@@ -338,7 +341,7 @@ Options:\\n\\\n   fprintf (stream, _(\"\\\n   --gstabs+               generate STABS debug info with GNU extensions\\n\"));\n   fprintf (stream, _(\"\\\n-  --gdwarf-2              generate DWARF2 debugging information\\n\"));\n+  --gdwarf-<N>            generate DWARF<N> debugging information. 2 <= <N> <= 5\\n\"));\n   fprintf (stream, _(\"\\\n   --gdwarf-sections       generate per-function section names for DWARF line information\\n\"));\n   fprintf (stream, _(\"\\\n@@ -484,7 +487,10 @@ parse_args (int * pargc, char *** pargv)\n       OPTION_DEPFILE,\n       OPTION_GSTABS,\n       OPTION_GSTABS_PLUS,\n-      OPTION_GDWARF2,\n+      OPTION_GDWARF_2,\n+      OPTION_GDWARF_3,\n+      OPTION_GDWARF_4,\n+      OPTION_GDWARF_5,\n       OPTION_GDWARF_SECTIONS,\n       OPTION_GDWARF_CIE_VERSION,\n       OPTION_STRIP_LOCAL_ABSOLUTE,\n@@ -537,10 +543,13 @@ parse_args (int * pargc, char *** pargv)\n     ,{\"generate-missing-build-notes\", required_argument, NULL, OPTION_ELF_BUILD_NOTES}\n #endif\n     ,{\"fatal-warnings\", no_argument, NULL, OPTION_WARN_FATAL}\n-    ,{\"gdwarf-2\", no_argument, NULL, OPTION_GDWARF2}\n-    /* GCC uses --gdwarf-2 but GAS uses to use --gdwarf2,\n+    ,{\"gdwarf-2\", no_argument, NULL, OPTION_GDWARF_2}\n+    ,{\"gdwarf-3\", no_argument, NULL, OPTION_GDWARF_3}\n+    ,{\"gdwarf-4\", no_argument, NULL, OPTION_GDWARF_4}\n+    ,{\"gdwarf-5\", no_argument, NULL, OPTION_GDWARF_5}\n+    /* GCC uses --gdwarf-2 but GAS used to to use --gdwarf2,\n        so we keep it here for backwards compatibility.  */\n-    ,{\"gdwarf2\", no_argument, NULL, OPTION_GDWARF2}\n+    ,{\"gdwarf2\", no_argument, NULL, OPTION_GDWARF_2}\n     ,{\"gdwarf-sections\", no_argument, NULL, OPTION_GDWARF_SECTIONS}\n     ,{\"gdwarf-cie-version\", required_argument, NULL, OPTION_GDWARF_CIE_VERSION}\n     ,{\"gen-debug\", no_argument, NULL, 'g'}\n@@ -817,7 +826,10 @@ This program has absolutely no warranty.\\n\"));\n \t  if (md_debug_format_selector)\n \t    debug_type = md_debug_format_selector (& use_gnu_debug_info_extensions);\n \t  else if (IS_ELF)\n-\t    debug_type = DEBUG_DWARF2;\n+\t    {\n+\t      debug_type = DEBUG_DWARF2;\n+\t      dwarf_level = 2;\n+\t    }\n \t  else\n \t    debug_type = DEBUG_STABS;\n \t  break;\n@@ -829,8 +841,24 @@ This program has absolutely no warranty.\\n\"));\n \t  debug_type = DEBUG_STABS;\n \t  break;\n \n-\tcase OPTION_GDWARF2:\n+\tcase OPTION_GDWARF_2:\n+\t  debug_type = DEBUG_DWARF2;\n+\t  dwarf_level = 2;\n+\t  break;\n+\n+\tcase OPTION_GDWARF_3:\n+\t  debug_type = DEBUG_DWARF2;\n+\t  dwarf_level = 3;\n+\t  break;\n+\n+\tcase OPTION_GDWARF_4:\n \t  debug_type = DEBUG_DWARF2;\n+\t  dwarf_level = 4;\n+\t  break;\n+\n+\tcase OPTION_GDWARF_5:\n+\t  debug_type = DEBUG_DWARF2;\n+\t  dwarf_level = 5;\n \t  break;\n \n \tcase OPTION_GDWARF_SECTIONS:\n@@ -845,6 +873,21 @@ This program has absolutely no warranty.\\n\"));\n               || flag_dwarf_cie_version == 2\n               || flag_dwarf_cie_version > 4)\n             as_fatal (_(\"Invalid --gdwarf-cie-version `%s'\"), optarg);\n+\t  switch (flag_dwarf_cie_version)\n+\t    {\n+\t    case 1:\n+\t      if (dwarf_level < 2)\n+\t\tdwarf_level = 2;\n+\t      break;\n+\t    case 3:\n+\t      if (dwarf_level < 3)\n+\t\tdwarf_level = 3;\n+\t      break;\n+\t    default:\n+\t      if (dwarf_level < 4)\n+\t\tdwarf_level = 4;\n+\t      break;\n+\t    }\n \t  break;\n \n \tcase 'J':"
    },
    {
      "sha": "7a72239dc23b305cde60127953bc482338b5551d",
      "filename": "gas/as.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/as.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/as.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/as.h?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -413,6 +413,7 @@ extern enum debug_info_type debug_type;\n extern int use_gnu_debug_info_extensions;\n COMMON bfd_boolean flag_dwarf_sections;\n extern int flag_dwarf_cie_version;\n+extern unsigned int dwarf_level;\n \f\n /* Maximum level of macro nesting.  */\n extern int max_macro_nest;"
    },
    {
      "sha": "3a50f86b229e0ceca6a597d1197e7df5d2589485",
      "filename": "gas/config/tc-ia64.h",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/config/tc-ia64.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/config/tc-ia64.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-ia64.h?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -325,6 +325,5 @@ typedef struct unwind_record\n \n /* VMS backtraces expect dwarf version 3.  */\n #ifdef TE_VMS\n-#define DWARF2_VERSION 3\n-#define DWARF2_LINE_VERSION 3\n+#define DWARF2_VERSION      (dwarf_level < 3 ? 3  : debug_level)\n #endif"
    },
    {
      "sha": "ff0ef63fbd81335cc14e3e10bfc23e36db519535",
      "filename": "gas/doc/as.texi",
      "status": "modified",
      "additions": 22,
      "deletions": 1,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/doc/as.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/doc/as.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/as.texi?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -230,7 +230,7 @@ gcc(1), ld(1), and the Info entries for @file{binutils} and @file{ld}.\n  [@b{--compress-debug-sections}]  [@b{--nocompress-debug-sections}]\n  [@b{--debug-prefix-map} @var{old}=@var{new}]\n  [@b{--defsym} @var{sym}=@var{val}] [@b{-f}] [@b{-g}] [@b{--gstabs}]\n- [@b{--gstabs+}] [@b{--gdwarf-2}] [@b{--gdwarf-sections}]\n+ [@b{--gstabs+}] [@b{--gdwarf-<N>}] [@b{--gdwarf-sections}]\n  [@b{--gdwarf-cie-version}=@var{VERSION}]\n  [@b{--help}] [@b{-I} @var{dir}] [@b{-J}]\n  [@b{-K}] [@b{-L}] [@b{--listing-lhs-width}=@var{NUM}]\n@@ -763,6 +763,27 @@ Generate DWARF2 debugging information for each assembler line.  This\n may help debugging assembler code, if the debugger can handle it.  Note---this\n option is only supported by some targets, not all of them.\n \n+@item --gdwarf-3\n+This option is the same as the @option{--gdwarf-2} option, except that it\n+allows for the possibility of the generation of extra debug information as per\n+version 3 of the DWARF specification.  Note - enabling this option does not\n+guarantee the generation of any extra infortmation, the choice to do so is on a\n+per target basis.\n+\n+@item --gdwarf-4\n+This option is the same as the @option{--gdwarf-2} option, except that it\n+allows for the possibility of the generation of extra debug information as per\n+version 4 of the DWARF specification.  Note - enabling this option does not\n+guarantee the generation of any extra infortmation, the choice to do so is on a\n+per target basis.\n+\n+@item --gdwarf-5\n+This option is the same as the @option{--gdwarf-2} option, except that it\n+allows for the possibility of the generation of extra debug information as per\n+version 4 of the DWARF specification.  Note - enabling this option does not\n+guarantee the generation of any extra infortmation, the choice to do so is on a\n+per target basis.\n+\n @item --gdwarf-sections\n Instead of creating a .debug_line section, create a series of\n .debug_line.@var{foo} sections where @var{foo} is the name of the"
    },
    {
      "sha": "7384a17c57759bb19a0c578ee2071d723408ebee",
      "filename": "gas/dwarf2dbg.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31bf18645d98b4d3d7357353be840e320649a67d/gas/dwarf2dbg.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31bf18645d98b4d3d7357353be840e320649a67d/gas/dwarf2dbg.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/dwarf2dbg.c?ref=31bf18645d98b4d3d7357353be840e320649a67d",
      "patch": "@@ -89,7 +89,7 @@\n #endif\n \n #ifndef DWARF2_VERSION\n-#define DWARF2_VERSION 2\n+#define DWARF2_VERSION dwarf_level\n #endif\n \n /* The .debug_aranges version has been 2 in DWARF version 2, 3 and 4. */"
    }
  ]
}