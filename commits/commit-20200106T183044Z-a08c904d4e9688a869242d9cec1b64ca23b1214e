{
  "sha": "a08c904d4e9688a869242d9cec1b64ca23b1214e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTA4YzkwNGQ0ZTk2ODhhODY5MjQyZDljZWMxYjY0Y2EyM2IxMjE0ZQ==",
  "commit": {
    "author": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-01-02T00:25:56Z"
    },
    "committer": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-01-06T18:30:44Z"
    },
    "message": "Fix a crash with a malformed PE header\n\nDon't try to read the PE export table when no section contains the RVA\nfor it.\n\n(I have a PE executable [1] packed with UPX, where the export table data\ndirectory entry contains a RVA which doesn't correspond to any section.\nMistakenly trying to debug this with gdb makes it crash.)\n\n[1] https://cygwin.com/setup/setup-2.898.x86_64.exe\n\ngdb/ChangeLog:\n\n2020-01-02  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* coff-pe-read.c (read_pe_exported_syms): Don't try to read the\n\texport table if no section contains it's RVA.",
    "tree": {
      "sha": "f2323563785cc167155240fa846194ae34e7379f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f2323563785cc167155240fa846194ae34e7379f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a08c904d4e9688a869242d9cec1b64ca23b1214e",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABAgAGBQJeE3zVAAoJEMfIbwNwKFyBhegP/0M3sdtgLkRJy5lfd2x33xXH\nybwdfgNbViggApBHsSBEDya+CCB+nvlEcs9rij/GZHeVsITQyx5pn9dj5g1exqbC\nAtkv/7Qv5+aDe2anR3OOZTx75AtakyZ1CGJJE8pPKKUmah2mfxLpiBZnG+BGuXp8\nKNVrwpfngVcca/eoQPfqI2io7drj1rBmwUT7Usb4UGoXUNiE5uHkYcZp1HhT14cJ\nvENfioIc/ADTyxPZ04kvqXil0ae/0GgncLmzGmdx+8cPL+wdBUo+p0ng+c+6Xw0z\n05KbG8lPd//2eqfXJN8a6L5GWIpWkI4BQZ4d0pV1tp7G81d8ewq6sVeuCun+Za03\niRJIkJaOAuJfIMgquI102/7nuUtsRtoDhSte9iJACdObrBzH+GX+aWB9WIv5/IQN\nPZXZKjN8jjgeAcTwpkJ1L0plcGcHjusdyv4buKUwaTzC90Bdc9SAiyymAeZrYqEA\nyezEdSO6BuuR5X5+5dCe900FLshIyDCoQ+pXC3AMp3VrZ8qjKGbQM0hT6oVDgTc1\nRxC6p4WhygGHlg9KuAtTFNXKl5lCTiQjkAGMr1uj+6A/w/D+yrSGk3eieeM97kJh\nP26bG2OIYVAaP08lE83j3LYURweINPELohCO6BXZZazCqwJY8Ct/cJiujrn2LLBJ\n3Ghv3ujlxkwMWwBj8YqL\n=ZSbP\n-----END PGP SIGNATURE-----",
      "payload": "tree f2323563785cc167155240fa846194ae34e7379f\nparent 89a65580f4522f81ef7e4e49298b24f3ebc14355\nauthor Jon Turney <jon.turney@dronecode.org.uk> 1577924756 +0000\ncommitter Jon Turney <jon.turney@dronecode.org.uk> 1578335444 +0000\n\nFix a crash with a malformed PE header\n\nDon't try to read the PE export table when no section contains the RVA\nfor it.\n\n(I have a PE executable [1] packed with UPX, where the export table data\ndirectory entry contains a RVA which doesn't correspond to any section.\nMistakenly trying to debug this with gdb makes it crash.)\n\n[1] https://cygwin.com/setup/setup-2.898.x86_64.exe\n\ngdb/ChangeLog:\n\n2020-01-02  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* coff-pe-read.c (read_pe_exported_syms): Don't try to read the\n\texport table if no section contains it's RVA.\n"
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a08c904d4e9688a869242d9cec1b64ca23b1214e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a08c904d4e9688a869242d9cec1b64ca23b1214e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a08c904d4e9688a869242d9cec1b64ca23b1214e/comments",
  "author": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "89a65580f4522f81ef7e4e49298b24f3ebc14355",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/89a65580f4522f81ef7e4e49298b24f3ebc14355",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/89a65580f4522f81ef7e4e49298b24f3ebc14355"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 11,
    "deletions": 0
  },
  "files": [
    {
      "sha": "9a3cca2a127a0dc6b4ef94429ed154ef5e708459",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a08c904d4e9688a869242d9cec1b64ca23b1214e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a08c904d4e9688a869242d9cec1b64ca23b1214e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=a08c904d4e9688a869242d9cec1b64ca23b1214e",
      "patch": "@@ -1,3 +1,8 @@\n+2020-01-02  Jon Turney  <jon.turney@dronecode.org.uk>\n+\n+\t* coff-pe-read.c (read_pe_exported_syms): Don't try to read the\n+\texport table if no section contains it's RVA.\n+\n 2020-01-06  Eli Zaretskii  <eliz@gnu.org>\n \n \t* windows-tdep.c: Fix a typo in WINDOWS_SIGABRT."
    },
    {
      "sha": "d0c1e050c891fbc438f6550ff66ad97748724d5d",
      "filename": "gdb/coff-pe-read.c",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a08c904d4e9688a869242d9cec1b64ca23b1214e/gdb/coff-pe-read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a08c904d4e9688a869242d9cec1b64ca23b1214e/gdb/coff-pe-read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/coff-pe-read.c?ref=a08c904d4e9688a869242d9cec1b64ca23b1214e",
      "patch": "@@ -441,6 +441,12 @@ read_pe_exported_syms (minimal_symbol_reader &reader,\n \t}\n     }\n \n+  if (expptr == 0)\n+    {\n+      /* no section contains export table rva */\n+      return;\n+    }\n+\n   export_rva = export_opthdrrva;\n   export_size = export_opthdrsize;\n "
    }
  ]
}