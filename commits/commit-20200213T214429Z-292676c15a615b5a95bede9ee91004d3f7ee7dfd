{
  "sha": "292676c15a615b5a95bede9ee91004d3f7ee7dfd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjkyNjc2YzE1YTYxNWI1YTk1YmVkZTllZTkxMDA0ZDNmN2VlN2RmZA==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-02-13T21:44:17Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-02-13T21:44:29Z"
    },
    "message": "x86: Resolve PLT32 reloc aganst local symbol to section\n\nSince PLT entry isn't needed for branch to local symbol, we can resolve\nR_386_PLT32/R_X86_64_PLT32 relocation aganst local symbol to section,\nsimilar to R_386_PC32/R_X86_64_PC32.\n\n2020-02-13  Fangrui Song   <maskray@google.com>\n\t    H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR gas/25551\n\t* config/tc-i386.c (tc_i386_fix_adjustable): Don't check\n\tBFD_RELOC_386_PLT32 nor BFD_RELOC_X86_64_PLT32.\n\t* testsuite/gas/i386/i386.exp: Run relax-5 and x86-64-relax-4.\n\t* testsuite/gas/i386/relax-5.d: New file.\n\t* testsuite/gas/i386/relax-5.s: Likewise.\n\t* testsuite/gas/i386/x86-64-relax-4.d: Likewise.\n\t* testsuite/gas/i386/x86-64-relax-4.s: Likewise.",
    "tree": {
      "sha": "e793712b02ffb7817f7ee7ccd2c320e2609115fa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e793712b02ffb7817f7ee7ccd2c320e2609115fa"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/292676c15a615b5a95bede9ee91004d3f7ee7dfd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/292676c15a615b5a95bede9ee91004d3f7ee7dfd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/292676c15a615b5a95bede9ee91004d3f7ee7dfd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/292676c15a615b5a95bede9ee91004d3f7ee7dfd/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "feacfcacaac9f7e62f467a33c4ae54c56501ed18",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/feacfcacaac9f7e62f467a33c4ae54c56501ed18",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/feacfcacaac9f7e62f467a33c4ae54c56501ed18"
    }
  ],
  "stats": {
    "total": 64,
    "additions": 62,
    "deletions": 2
  },
  "files": [
    {
      "sha": "8d5426d7641f358c04ba89d659bbec1b26ddb722",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -1,3 +1,15 @@\n+2020-02-13  Fangrui Song   <maskray@google.com>\n+\t    H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR gas/25551\n+\t* config/tc-i386.c (tc_i386_fix_adjustable): Don't check\n+\tBFD_RELOC_386_PLT32 nor BFD_RELOC_X86_64_PLT32.\n+\t* testsuite/gas/i386/i386.exp: Run relax-5 and x86-64-relax-4.\n+\t* testsuite/gas/i386/relax-5.d: New file.\n+\t* testsuite/gas/i386/relax-5.s: Likewise.\n+\t* testsuite/gas/i386/x86-64-relax-4.d: Likewise.\n+\t* testsuite/gas/i386/x86-64-relax-4.s: Likewise.\n+\n 2020-02-13  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (cpu_noarch): Use CPU_ANY_SSE4_FLAGS in"
    },
    {
      "sha": "8e422fd2dc24c112ddedc9ed7e8d750a6d5a17f5",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -3398,7 +3398,6 @@ tc_i386_fix_adjustable (fixS *fixP ATTRIBUTE_UNUSED)\n   if (fixP->fx_r_type == BFD_RELOC_SIZE32\n       || fixP->fx_r_type == BFD_RELOC_SIZE64\n       || fixP->fx_r_type == BFD_RELOC_386_GOTOFF\n-      || fixP->fx_r_type == BFD_RELOC_386_PLT32\n       || fixP->fx_r_type == BFD_RELOC_386_GOT32\n       || fixP->fx_r_type == BFD_RELOC_386_GOT32X\n       || fixP->fx_r_type == BFD_RELOC_386_TLS_GD\n@@ -3411,7 +3410,6 @@ tc_i386_fix_adjustable (fixS *fixP ATTRIBUTE_UNUSED)\n       || fixP->fx_r_type == BFD_RELOC_386_TLS_LE\n       || fixP->fx_r_type == BFD_RELOC_386_TLS_GOTDESC\n       || fixP->fx_r_type == BFD_RELOC_386_TLS_DESC_CALL\n-      || fixP->fx_r_type == BFD_RELOC_X86_64_PLT32\n       || fixP->fx_r_type == BFD_RELOC_X86_64_GOT32\n       || fixP->fx_r_type == BFD_RELOC_X86_64_GOTPCREL\n       || fixP->fx_r_type == BFD_RELOC_X86_64_GOTPCRELX"
    },
    {
      "sha": "8cace3dc9f87df9e8490b16321f6de0c906d4c85",
      "filename": "gas/testsuite/gas/i386/i386.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/i386.exp?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -580,6 +580,7 @@ if [expr ([istarget \"i*86-*-*\"] ||  [istarget \"x86_64-*-*\"]) && [gas_32_check]]\n \n \trun_dump_test \"relax-3\"\n \trun_dump_test \"relax-4\"\n+\trun_dump_test \"relax-5\"\n \n \trun_dump_test \"got\"\n \trun_dump_test \"got-no-relax\"\n@@ -1135,6 +1136,7 @@ if [expr ([istarget \"i*86-*-*\"] || [istarget \"x86_64-*-*\"]) && [gas_64_check]] t\n \n \trun_dump_test \"x86-64-relax-2\"\n \trun_dump_test \"x86-64-relax-3\"\n+\trun_dump_test \"x86-64-relax-4\"\n \n \trun_dump_test \"x86-64-jump\"\n \trun_dump_test \"x86-64-branch-2\""
    },
    {
      "sha": "bccfe681a0e127f528405a5ebfb18d02fb97ed0d",
      "filename": "gas/testsuite/gas/i386/relax-5.d",
      "status": "added",
      "additions": 15,
      "deletions": 0,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/relax-5.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/relax-5.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/relax-5.d?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -0,0 +1,15 @@\n+#objdump: -dwr\n+\n+.*: +file format .*\n+\n+Disassembly of section .text:\n+\n+0+ <printk>:\n+ +[a-f0-9]+:\tc3                   \tret    \n+\n+Disassembly of section .init.text:\n+\n+0+ <foo>:\n+ +[a-f0-9]+:\te8 fb ff ff ff       \tcall   0 <foo>\t1: R_386_PLT32\t.text\n+ +[a-f0-9]+:\te8 fc ff ff ff       \tcall   6 <foo\\+0x6>\t6: R_386_PC32\t.text\n+#pass"
    },
    {
      "sha": "35d5769f4a763b8029e7a3389950c6c553130075",
      "filename": "gas/testsuite/gas/i386/relax-5.s",
      "status": "added",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/relax-5.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/relax-5.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/relax-5.s?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -0,0 +1,8 @@\n+\t.section .init.text,\"ax\",@progbits\n+\t.global foo\n+foo:\n+\tcall\tprintk@PLT\n+\tcall\tprintk\n+\t.text\n+printk:\n+\tret"
    },
    {
      "sha": "234e16534ffd56e54056eae5eed6802e94cf9d1c",
      "filename": "gas/testsuite/gas/i386/x86-64-relax-4.d",
      "status": "added",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/x86-64-relax-4.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/x86-64-relax-4.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-relax-4.d?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -0,0 +1,17 @@\n+#objdump: -drw\n+#notarget: *-*-solaris*\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <printk>:\n+ +[a-f0-9]+:\tc3                   \tretq   \n+\n+Disassembly of section .init.text:\n+\n+0+ <foo>:\n+ +[a-f0-9]+:\te8 00 00 00 00       \tcallq  5 <foo\\+0x5>\t1: R_X86_64_PLT32\t.text-0x4\n+ +[a-f0-9]+:\t48 8d 05 00 00 00 00 \tlea    0x0\\(%rip\\),%rax        # c <foo\\+0xc>\t8: R_X86_64_PC32\t.text-0x4\n+#pass"
    },
    {
      "sha": "683d3e2b9b8860e406147d2fc58cba364deead5f",
      "filename": "gas/testsuite/gas/i386/x86-64-relax-4.s",
      "status": "added",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/x86-64-relax-4.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/292676c15a615b5a95bede9ee91004d3f7ee7dfd/gas/testsuite/gas/i386/x86-64-relax-4.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-relax-4.s?ref=292676c15a615b5a95bede9ee91004d3f7ee7dfd",
      "patch": "@@ -0,0 +1,8 @@\n+\t.section .init.text,\"ax\",@progbits\n+\t.global foo\n+foo:\n+\tcall\tprintk\n+\tlea\tprintk(%rip), %rax\n+\t.text\n+printk:\n+\tret"
    }
  ]
}