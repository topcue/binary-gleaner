{
  "sha": "269b4ded72af1fa05236f866b518f05cf2d408a6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjY5YjRkZWQ3MmFmMWZhMDUyMzZmODY2YjUxOGYwNWNmMmQ0MDhhNg==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2019-07-01T15:19:14Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2019-07-01T15:19:14Z"
    },
    "message": "Fix bug when generating REL type relocs for assembler generated build notes.\n\n\tPR 24748\n\t* write.c (create_note_reloc): Add desc2_offset parameter.  Change\n\tname of offset parameter to note_offset.  Only use desc2_offset\n\twhen placing addend into REL reloc's address space.\n\t(maybe_generate_build_notes): Update parameters passed to\n\tcreate_note_reloc.",
    "tree": {
      "sha": "364bd497a51f1c4cec97e5a8488db3853aaa6b53",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/364bd497a51f1c4cec97e5a8488db3853aaa6b53"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/269b4ded72af1fa05236f866b518f05cf2d408a6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/269b4ded72af1fa05236f866b518f05cf2d408a6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/269b4ded72af1fa05236f866b518f05cf2d408a6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/269b4ded72af1fa05236f866b518f05cf2d408a6/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "41be57caf36943d71ccc6ea70be27a4939399118",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/41be57caf36943d71ccc6ea70be27a4939399118",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/41be57caf36943d71ccc6ea70be27a4939399118"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 21,
    "deletions": 10
  },
  "files": [
    {
      "sha": "355de66fe787937fe8e4bbf4aa75f34c55277dcb",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/269b4ded72af1fa05236f866b518f05cf2d408a6/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/269b4ded72af1fa05236f866b518f05cf2d408a6/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=269b4ded72af1fa05236f866b518f05cf2d408a6",
      "patch": "@@ -1,3 +1,12 @@\n+2019-07-01  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 24748\n+\t* write.c (create_note_reloc): Add desc2_offset parameter.  Change\n+\tname of offset parameter to note_offset.  Only use desc2_offset\n+\twhen placing addend into REL reloc's address space.\n+\t(maybe_generate_build_notes): Update parameters passed to\n+\tcreate_note_reloc.\n+\n 2019-07-01  Matthew Malcomson  <matthew.malcomson@arm.com>\n \n \t* testsuite/gas/aarch64/illegal-sve2-aes.d: Update tests."
    },
    {
      "sha": "e9a17e4468b24e55d0d9678f95eaab88ca16870d",
      "filename": "gas/write.c",
      "status": "modified",
      "additions": 12,
      "deletions": 10,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/269b4ded72af1fa05236f866b518f05cf2d408a6/gas/write.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/269b4ded72af1fa05236f866b518f05cf2d408a6/gas/write.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/write.c?ref=269b4ded72af1fa05236f866b518f05cf2d408a6",
      "patch": "@@ -1240,6 +1240,7 @@ write_relocs (bfd *abfd, asection *sec, void *xxx ATTRIBUTE_UNUSED)\n \n   /* Extract relocs for this section from reloc_list.  */\n   rp = &reloc_list;\n+\n   my_reloc_list = NULL;\n   while ((r = *rp) != NULL)\n     {\n@@ -1889,7 +1890,8 @@ create_obj_attrs_section (void)\n static void\n create_note_reloc (segT           sec,\n \t\t   symbolS *      sym,\n-\t\t   bfd_size_type  offset,\n+\t\t   bfd_size_type  note_offset,\n+\t\t   bfd_size_type  desc2_offset,\n \t\t   int            reloc_type,\n \t\t   bfd_vma        addend,\n \t\t   char *         note)\n@@ -1899,10 +1901,10 @@ create_note_reloc (segT           sec,\n   reloc = XNEW (struct reloc_list);\n \n   /* We create a .b type reloc as resolve_reloc_expr_symbols() has already been called.  */\n-  reloc->u.b.sec   = sec;\n-  reloc->u.b.s     = symbol_get_bfdsym (sym);\n+  reloc->u.b.sec           = sec;\n+  reloc->u.b.s             = symbol_get_bfdsym (sym);\n   reloc->u.b.r.sym_ptr_ptr = & reloc->u.b.s;\n-  reloc->u.b.r.address     = offset;\n+  reloc->u.b.r.address     = note_offset + desc2_offset;\n   reloc->u.b.r.addend      = addend;\n   reloc->u.b.r.howto       = bfd_reloc_type_lookup (stdoutput, reloc_type);\n \n@@ -1927,12 +1929,12 @@ create_note_reloc (segT           sec,\n       if (target_big_endian)\n \t{\n \t  if (bfd_arch_bits_per_address (stdoutput) <= 32)\n-\t    note[offset + 3] = addend;\n+\t    note[desc2_offset + 3] = addend;\n \t  else\n-\t    note[offset + 7] = addend;\n+\t    note[desc2_offset + 7] = addend;\n \t}\n       else\n-\tnote[offset] = addend;\n+\tnote[desc2_offset] = addend;\n     }\n }\n \n@@ -2035,10 +2037,10 @@ maybe_generate_build_notes (void)\n \tmemcpy (note + 12, \"GA$\u00013a1\", 8);\n \n \t/* Create a relocation to install the start address of the note...  */\n-\tcreate_note_reloc (sec, sym, total_size + 20, desc_reloc, 0, note);\n+\tcreate_note_reloc (sec, sym, total_size, 20, desc_reloc, 0, note);\n \n \t/* ...and another one to install the end address.  */\n-\tcreate_note_reloc (sec, sym, total_size + desc2_offset, desc_reloc,\n+\tcreate_note_reloc (sec, sym, total_size, desc2_offset, desc_reloc,\n \t\t\t   bfd_get_section_size (bsym->section),\n \t\t\t   note);\n \n@@ -2269,7 +2271,7 @@ write_object_file (void)\n   if (IS_ELF)\n     maybe_generate_build_notes ();\n #endif\n-  \n+\n   PROGRESS (1);\n \n #ifdef tc_frob_file_before_adjust"
    }
  ]
}