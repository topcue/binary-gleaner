{
  "sha": "81491aa0968e5bcab0388914f909ccb12e084e32",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODE0OTFhYTA5NjhlNWJjYWIwMzg4OTE0ZjkwOWNjYjEyZTA4NGUzMg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-16T19:55:51Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-25T13:48:30Z"
    },
    "message": "Remove struct tui_command_info\n\nLike the previous patch, this removes tui_command_info in favor of\nputting it elements directly into tui_cmd_window.\n\ngdb/ChangeLog\n2019-06-25  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-layout.c (show_source_disasm_command)\n\t(show_source_or_disasm_and_command): Update.\n\t* tui/tui-io.c (update_cmdwin_start_line)\n\t(tui_redisplay_readline): Update.\n\t* tui/tui-data.h (struct tui_command_info): Remove.\n\t(struct tui_win_info) <detail>: Remove command_info member.\n\t(struct tui_data_window) <start_line>: New member, from\n\ttui_command_info.\n\t(TUI_CMD_WIN): Add casts.",
    "tree": {
      "sha": "f7842a0373f0f8a55549761358f9611d6cb2cb0b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f7842a0373f0f8a55549761358f9611d6cb2cb0b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/81491aa0968e5bcab0388914f909ccb12e084e32",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/81491aa0968e5bcab0388914f909ccb12e084e32",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/81491aa0968e5bcab0388914f909ccb12e084e32",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/81491aa0968e5bcab0388914f909ccb12e084e32/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e6e4150110bcee66adfadb9f126eb3bb1fd7c054",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e6e4150110bcee66adfadb9f126eb3bb1fd7c054",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e6e4150110bcee66adfadb9f126eb3bb1fd7c054"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 24,
    "deletions": 16
  },
  "files": [
    {
      "sha": "ab825d2efd223651f6fc3531e42ad46e3c82295a",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=81491aa0968e5bcab0388914f909ccb12e084e32",
      "patch": "@@ -1,3 +1,15 @@\n+2019-06-25  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-layout.c (show_source_disasm_command)\n+\t(show_source_or_disasm_and_command): Update.\n+\t* tui/tui-io.c (update_cmdwin_start_line)\n+\t(tui_redisplay_readline): Update.\n+\t* tui/tui-data.h (struct tui_command_info): Remove.\n+\t(struct tui_win_info) <detail>: Remove command_info member.\n+\t(struct tui_data_window) <start_line>: New member, from\n+\ttui_command_info.\n+\t(TUI_CMD_WIN): Add casts.\n+\n 2019-06-25  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-winsource.c (tui_update_source_window)"
    },
    {
      "sha": "91d0c94b414ddf53a1b5b0ac276d7a336fe73b20",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 3,
      "deletions": 8,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=81491aa0968e5bcab0388914f909ccb12e084e32",
      "patch": "@@ -238,12 +238,6 @@ struct tui_data_info\n };\n \n \n-struct tui_command_info\n-{\n-  int start_line;\n-};\n-\n-\n /* This defines information about each logical window.  */\n struct tui_win_info\n {\n@@ -287,7 +281,6 @@ struct tui_win_info\n   union\n   {\n     struct tui_data_info data_display_info;\n-    struct tui_command_info command_info;\n   }\n   detail;\n \n@@ -395,6 +388,8 @@ struct tui_cmd_window : public tui_win_info\n \n   void clear_detail () override;\n \n+  int start_line;\n+\n protected:\n \n   void do_scroll_vertical (enum tui_scroll_direction,\n@@ -420,7 +415,7 @@ extern struct tui_win_info *tui_win_list[MAX_MAJOR_WINDOWS];\n #define TUI_SRC_WIN     ((tui_source_window_base *) tui_win_list[SRC_WIN])\n #define TUI_DISASM_WIN\t((tui_source_window_base *) tui_win_list[DISASSEM_WIN])\n #define TUI_DATA_WIN    tui_win_list[DATA_WIN]\n-#define TUI_CMD_WIN     tui_win_list[CMD_WIN]\n+#define TUI_CMD_WIN     ((tui_cmd_window *) tui_win_list[CMD_WIN])\n \n /* Data Manipulation Functions.  */\n extern void tui_initialize_static_data (void);"
    },
    {
      "sha": "cdb14bf53146f4d2d4c12656db3f3bf3c5b6fb99",
      "filename": "gdb/tui/tui-io.c",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-io.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-io.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-io.c?ref=81491aa0968e5bcab0388914f909ccb12e084e32",
      "patch": "@@ -179,7 +179,7 @@ do_tui_putc (WINDOW *w, char c)\n static void\n update_cmdwin_start_line ()\n {\n-  TUI_CMD_WIN->detail.command_info.start_line\n+  TUI_CMD_WIN->start_line\n     = getcury (TUI_CMD_WIN->generic.handle);\n }\n \n@@ -539,7 +539,7 @@ tui_redisplay_readline (void)\n   c_pos = -1;\n   c_line = -1;\n   w = TUI_CMD_WIN->generic.handle;\n-  start_line = TUI_CMD_WIN->detail.command_info.start_line;\n+  start_line = TUI_CMD_WIN->start_line;\n   wmove (w, start_line, 0);\n   prev_col = 0;\n   height = 1;\n@@ -580,17 +580,17 @@ tui_redisplay_readline (void)\n           waddch (w, c);\n \t}\n       if (c == '\\n')\n-\tTUI_CMD_WIN->detail.command_info.start_line = getcury (w);\n+\tTUI_CMD_WIN->start_line = getcury (w);\n       col = getcurx (w);\n       if (col < prev_col)\n         height++;\n       prev_col = col;\n     }\n   wclrtobot (w);\n-  TUI_CMD_WIN->detail.command_info.start_line = getcury (w);\n+  TUI_CMD_WIN->start_line = getcury (w);\n   if (c_line >= 0)\n     wmove (w, c_line, c_pos);\n-  TUI_CMD_WIN->detail.command_info.start_line -= height - 1;\n+  TUI_CMD_WIN->start_line -= height - 1;\n \n   wrefresh (w);\n   fflush(stdout);"
    },
    {
      "sha": "95b89f8583af3fc32e8eb0517dc5cd20c58fa992",
      "filename": "gdb/tui/tui-layout.c",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-layout.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/81491aa0968e5bcab0388914f909ccb12e084e32/gdb/tui/tui-layout.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-layout.c?ref=81491aa0968e5bcab0388914f909ccb12e084e32",
      "patch": "@@ -692,8 +692,8 @@ show_source_disasm_command (void)\n       tui_show_source_content (TUI_DISASM_WIN);\n \n       if (TUI_CMD_WIN == NULL)\n-\tTUI_CMD_WIN = make_command_window (cmd_height,\n-\t\t\t\t\t   tui_term_height () - cmd_height);\n+\ttui_win_list[CMD_WIN]\n+\t  = make_command_window (cmd_height, tui_term_height () - cmd_height);\n       else\n \t{\n \t  init_gen_win_info (&TUI_CMD_WIN->generic,\n@@ -958,7 +958,8 @@ show_source_or_disasm_and_command (enum tui_layout_type layout_type)\n \n \t  if (TUI_CMD_WIN == NULL)\n \t    {\n-\t      TUI_CMD_WIN = make_command_window (cmd_height, src_height);\n+\t      tui_win_list[CMD_WIN] = make_command_window (cmd_height,\n+\t\t\t\t\t\t\t   src_height);\n \t      tui_refresh_win (&TUI_CMD_WIN->generic);\n \t    }\n \t  else"
    }
  ]
}