{
  "sha": "f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjM2ZWRhMWZlMzBkMzk0Mjc0YTVmMGJlY2RmZjQ1YmJkODFmZDZhOA==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-09-15T09:53:46Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-09-15T09:53:46Z"
    },
    "message": "Fix the assembler's new .nop directive so that the input line pointer is preserved.\n\n\t* read.c (s_nop): Preserve the input_line_pointer around the call\n\tto md_assemble.\n\t* config/tc-s12z.c (md_assemble): Revert previous delta.",
    "tree": {
      "sha": "a5c649c542367a4ea45a376a801cdbdbea0a962f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a5c649c542367a4ea45a376a801cdbdbea0a962f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6db9990640cdf7bc0880149f2707904506518fb8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6db9990640cdf7bc0880149f2707904506518fb8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6db9990640cdf7bc0880149f2707904506518fb8"
    }
  ],
  "stats": {
    "total": 20,
    "additions": 14,
    "deletions": 6
  },
  "files": [
    {
      "sha": "add14d8274947a8f86b87914b8d4b95b98de3ff6",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
      "patch": "@@ -1,3 +1,9 @@\n+2020-09-15  Nick Clifton  <nickc@redhat.com>\n+\n+\t* read.c (s_nop): Preserve the input_line_pointer around the call\n+\tto md_assemble.\n+\t* config/tc-s12z.c (md_assemble): Revert previous delta.\n+\n 2020-09-15  David Faust  <david.faust@oracle.com>\n \n \t* config/tc-bpf.h (md_single_noop_insn): Use 'ja 0' for no-op."
    },
    {
      "sha": "d89fb0c21ff3cd88a3bef527c012490eb2f6191a",
      "filename": "gas/config/tc-s12z.c",
      "status": "modified",
      "additions": 3,
      "deletions": 6,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/config/tc-s12z.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/config/tc-s12z.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-s12z.c?ref=f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
      "patch": "@@ -3807,7 +3807,6 @@ md_assemble (char *str)\n       return;\n     }\n \n-  char * saved_ilp = input_line_pointer;\n   input_line_pointer = skip_whites (op_end);\n \n   size_t i;\n@@ -3817,17 +3816,15 @@ md_assemble (char *str)\n       if (0 == strcmp (name, opc->name))\n \t{\n \t  if (opc->parse_operands (opc))\n-\t    {\n-\t      input_line_pointer = saved_ilp;\n-\t      return;\n-\t    }\n+\t    return;\n \t  continue;\n \t}\n     }\n \n   as_bad (_(\"Invalid instruction: \\\"%s\\\"\"), str);\n   as_bad (_(\"First invalid token: \\\"%s\\\"\"), fail_line_pointer);\n-  input_line_pointer = saved_ilp;\n+  while (*input_line_pointer++)\n+    ;\n }\n \n \f"
    },
    {
      "sha": "ff4737ef2cb6f049dd2fd41394b19b139f0a13d1",
      "filename": "gas/read.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f36eda1fe30d394274a5f0becdff45bbd81fd6a8/gas/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/read.c?ref=f36eda1fe30d394274a5f0becdff45bbd81fd6a8",
      "patch": "@@ -3530,7 +3530,12 @@ s_nop (int ignore ATTRIBUTE_UNUSED)\n   if (asprintf (&nop, \"%s\", md_single_noop_insn) < 0)\n     as_fatal (\"%s\", xstrerror (errno));\n \n+  /* Some targets assume that they can update input_line_pointer inside\n+     md_assemble, and, worse, that they can leave it assigned to the string\n+     pointer that was provided as an argument.  So preserve ilp here.  */\n+  char * saved_ilp = input_line_pointer;\n   md_assemble (nop);\n+  input_line_pointer = saved_ilp;\n   free (nop);\n #endif\n }"
    }
  ]
}