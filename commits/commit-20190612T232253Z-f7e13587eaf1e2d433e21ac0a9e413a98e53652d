{
  "sha": "f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjdlMTM1ODdlYWYxZTJkNDMzZTIxYWMwYTllNDEzYTk4ZTUzNjUyZA==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:06:54Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:22:53Z"
    },
    "message": "\"thread apply 1 -- -\" vs \"frame apply level 0 -- -\"\n\nWith the following patch, we'll be able to explicitly tell \"thread\napply\" where options end, using the \"--\" delimiter.  A test added by\nthat patch caught a pre-existing inconsistency:\n\n (gdb) thread apply 1 -- -\n Invalid thread ID: -\n\n (gdb) frame apply level 0 -- -\n #0  main () at threads.c:55\n Cannot enable the TUI when output is not a terminal\n\nAbove, \"thread apply\" did not try to run the command, while \"frame\napply level\" did.  (\"-\" is a valid TUI command.)\n\nThat \"-\" is past \"--\", so it should have not been confused with an\ninvalid TID, in the \"thread apply\" case.\n\nThat error actually doesn't come from the TID parser, but instead from\nthread_apply_command directly.\n\nSo that error/check needs tweaking.  The next question is what to\ntweak it to.\n\n\"-\" is actually a valid TUI command:\n\n (gdb) help -\n Scroll window backward.\n Usage: - [WIN] [N]\n\n(gdb) frame apply level 0 -- -\n#0  main () at threads.c:55\nCannot enable the TUI when output is not a terminal\n\nWhile I don't imagine it being useful to use that \"-\" command with\n\"thread apply\" or \"frame apply level\", the fact is that you can use it\nwith \"frame apply level\", but not with \"thread apply\".  And since it's\nan actual command, pedantically it seems right to allow it.\n\nThat's what this commit does.\n\nNote: simply removing the \"isalpha\" check regresses\ngdb.multi/tids.exp -- see related commit 3f5b7598805c.\n\ngdb/ChangeLog:\n2019-06-13  Pedro Alves  <palves@redhat.com>\n\n\t* thread.c (thread_apply_command): Check for invalid TID with\n\tisdigit instead of !isalpha.",
    "tree": {
      "sha": "2e358f2c0f568d163317698ea4cced426ac7185b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2e358f2c0f568d163317698ea4cced426ac7185b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f7e13587eaf1e2d433e21ac0a9e413a98e53652d/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5d7071341dd3c01d38fc01398ef8b23b1bd3783c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5d7071341dd3c01d38fc01398ef8b23b1bd3783c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5d7071341dd3c01d38fc01398ef8b23b1bd3783c"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "a89cb3df0680c6e029cbeda01d799b21b7b82571",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7e13587eaf1e2d433e21ac0a9e413a98e53652d/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7e13587eaf1e2d433e21ac0a9e413a98e53652d/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
      "patch": "@@ -1,3 +1,8 @@\n+2019-06-13  Pedro Alves  <palves@redhat.com>\n+\n+\t* thread.c (thread_apply_command): Check for invalid TID with\n+\tisdigit instead of !isalpha.\n+\n 2019-06-13  Pedro Alves  <palves@redhat.com>\n \n \t* cli/cli-utils.c (parse_flags_qcs): Use validate_flags_qcs."
    },
    {
      "sha": "ea87f51c6e6fd541f664fb26ffde732c61306b6f",
      "filename": "gdb/thread.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7e13587eaf1e2d433e21ac0a9e413a98e53652d/gdb/thread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7e13587eaf1e2d433e21ac0a9e413a98e53652d/gdb/thread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/thread.c?ref=f7e13587eaf1e2d433e21ac0a9e413a98e53652d",
      "patch": "@@ -1583,7 +1583,7 @@ thread_apply_command (const char *tidlist, int from_tty)\n   if (*cmd == '\\0')\n     error (_(\"Please specify a command following the thread ID list\"));\n \n-  if (tidlist == cmd || !isalpha (cmd[0]))\n+  if (tidlist == cmd || isdigit (cmd[0]))\n     invalid_thread_id_error (cmd);\n \n   scoped_restore_current_thread restore_thread;"
    }
  ]
}