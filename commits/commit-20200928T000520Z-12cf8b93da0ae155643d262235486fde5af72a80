{
  "sha": "12cf8b93da0ae155643d262235486fde5af72a80",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTJjZjhiOTNkYTBhZTE1NTY0M2QyNjIyMzU0ODZmZGU1YWY3MmE4MA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-09-28T00:00:19Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-09-28T00:05:20Z"
    },
    "message": "Re: PR26656, power10 libstdc++.so segfault in __cxxabiv1::__cxa_throw\n\nSome missing NULL checks meant a stub for a local symbol used a stub\nlooking like the __tls_get_addr_opt stub.\n\n\tPR 26656\n\t* elf64-ppc.c (ppc_build_one_stub, ppc_size_one_stub): Check for\n\tNULL stub_entry->h before calling is_tls_get_addr.",
    "tree": {
      "sha": "a2de67951781427b0f1840354f858e5ce52a9e7d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a2de67951781427b0f1840354f858e5ce52a9e7d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/12cf8b93da0ae155643d262235486fde5af72a80",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/12cf8b93da0ae155643d262235486fde5af72a80",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/12cf8b93da0ae155643d262235486fde5af72a80",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/12cf8b93da0ae155643d262235486fde5af72a80/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5ecafd70201ac84228ed6a394e6fa72c0e08f62f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5ecafd70201ac84228ed6a394e6fa72c0e08f62f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5ecafd70201ac84228ed6a394e6fa72c0e08f62f"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 10,
    "deletions": 1
  },
  "files": [
    {
      "sha": "4222ebbf5c6d8a11f0f3161ca47d20f50cfe1a07",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12cf8b93da0ae155643d262235486fde5af72a80/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12cf8b93da0ae155643d262235486fde5af72a80/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=12cf8b93da0ae155643d262235486fde5af72a80",
      "patch": "@@ -1,3 +1,9 @@\n+2020-09-28  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 26656\n+\t* elf64-ppc.c (ppc_build_one_stub, ppc_size_one_stub): Check for\n+\tNULL stub_entry->h before calling is_tls_get_addr.\n+\n 2020-09-26  Alan Modra  <amodra@gmail.com>\n \n \t* elf64-ppc.c (GLINK_PLTRESOLVE_SIZE): Depend on has_plt_localentry0."
    },
    {
      "sha": "35f3cbef1ef0d71cd489eedd1823ccc28ae9b326",
      "filename": "bfd/elf64-ppc.c",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12cf8b93da0ae155643d262235486fde5af72a80/bfd/elf64-ppc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12cf8b93da0ae155643d262235486fde5af72a80/bfd/elf64-ppc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf64-ppc.c?ref=12cf8b93da0ae155643d262235486fde5af72a80",
      "patch": "@@ -11678,6 +11678,7 @@ ppc_build_one_stub (struct bfd_hash_entry *gen_entry, void *in_arg)\n       obfd = htab->params->stub_bfd;\n       is_tga = ((stub_entry->stub_type == ppc_stub_plt_call_notoc\n \t\t || stub_entry->stub_type == ppc_stub_plt_call_both)\n+\t\t&& stub_entry->h != NULL\n \t\t&& is_tls_get_addr (&stub_entry->h->elf, htab)\n \t\t&& htab->params->tls_get_addr_opt);\n       if (is_tga)\n@@ -12188,7 +12189,8 @@ ppc_size_one_stub (struct bfd_hash_entry *gen_entry, void *in_arg)\n     case ppc_stub_plt_call_notoc:\n     case ppc_stub_plt_call_both:\n       lr_used = 0;\n-      if (is_tls_get_addr (&stub_entry->h->elf, htab)\n+      if (stub_entry->h != NULL\n+\t  && is_tls_get_addr (&stub_entry->h->elf, htab)\n \t  && htab->params->tls_get_addr_opt)\n \t{\n \t  lr_used += 7 * 4;\n@@ -12258,6 +12260,7 @@ ppc_size_one_stub (struct bfd_hash_entry *gen_entry, void *in_arg)\n \t}\n       if ((stub_entry->stub_type == ppc_stub_plt_call_notoc\n \t   || stub_entry->stub_type == ppc_stub_plt_call_both)\n+\t  && stub_entry->h != NULL\n \t  && is_tls_get_addr (&stub_entry->h->elf, htab)\n \t  && htab->params->tls_get_addr_opt)\n \t{"
    }
  ]
}