{
  "sha": "28ce7b07473c33f2e4e380a861973d68ffe8017f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjhjZTdiMDc0NzNjMzNmMmU0ZTM4MGE4NjE5NzNkNjhmZmU4MDE3Zg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-12-18T15:03:01Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-12-18T17:28:46Z"
    },
    "message": "Fix build failure on macOS\n\nPR build/25250 notes that the gdb 9 pre-release fails to build on\nmacOS, due to a name clash between field_kind::STRING and the STRING\ntoken in ada-exp.y.  I am not sure (I couldn't reproduce this myself),\nbut presumably this is due to differences caused by the version of\nbison in use there.\n\nThis patch works around the problem by renaming the field_kind\nenumerator.  I chose to rename this one because it is used in\nrelatively few places -- it's just an implementation detail of the\nstyle code.\n\nThis version also renames field_kind::SIGNED for consistency.\n\nLet me know what you think.  I intend to check this in on the gdb 9\nbranch as well.\n\ngdb/ChangeLog\n2019-12-18  Tom Tromey  <tromey@adacore.com>\n\n\tPR build/25250:\n\t* ui-out.c (ui_out::vmessage): Update.\n\t* ui-out.h (enum class field_kind) <FIELD_STRING, FIELD_SIGNED>:\n\tRename.\n\t(string_field): Update.\n\t(signed_field): Update.\n\nChange-Id: Iae9f36f1b793e22c61fee0de2ab2d508668ee7e4",
    "tree": {
      "sha": "2ae4f74d5438f0f56d3477c4d58c0d9725a61010",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2ae4f74d5438f0f56d3477c4d58c0d9725a61010"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/28ce7b07473c33f2e4e380a861973d68ffe8017f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/28ce7b07473c33f2e4e380a861973d68ffe8017f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/28ce7b07473c33f2e4e380a861973d68ffe8017f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/28ce7b07473c33f2e4e380a861973d68ffe8017f/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bbde7025e0d5629e309c15af5a07bac272e21b07",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bbde7025e0d5629e309c15af5a07bac272e21b07",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bbde7025e0d5629e309c15af5a07bac272e21b07"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 18,
    "deletions": 6
  },
  "files": [
    {
      "sha": "26d152b817f24b5bdc20a4d4d75b7ddbc0cf6da6",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=28ce7b07473c33f2e4e380a861973d68ffe8017f",
      "patch": "@@ -1,3 +1,12 @@\n+2019-12-18  Tom Tromey  <tromey@adacore.com>\n+\n+\tPR build/25250:\n+\t* ui-out.c (ui_out::vmessage): Update.\n+\t* ui-out.h (enum class field_kind) <FIELD_STRING, FIELD_SIGNED>:\n+\tRename.\n+\t(string_field): Update.\n+\t(signed_field): Update.\n+\n 2019-12-18  Simon Marchi  <simon.marchi@efficios.com>\n \n \t* top.c (print_gdb_configuration): Adjust indentation."
    },
    {
      "sha": "2b3b7e4accb3087f577e3322679f5f2c00cd2665",
      "filename": "gdb/ui-out.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ui-out.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ui-out.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ui-out.c?ref=28ce7b07473c33f2e4e380a861973d68ffe8017f",
      "patch": "@@ -730,13 +730,13 @@ ui_out::vmessage (const ui_file_style &in_style, const char *format,\n \t\tbase_field_s *bf = va_arg (args, base_field_s *);\n \t\tswitch (bf->kind)\n \t\t  {\n-\t\t  case field_kind::SIGNED:\n+\t\t  case field_kind::FIELD_SIGNED:\n \t\t    {\n \t\t      auto *f = (signed_field_s *) bf;\n \t\t      field_signed (f->name, f->val);\n \t\t    }\n \t\t    break;\n-\t\t  case field_kind::STRING:\n+\t\t  case field_kind::FIELD_STRING:\n \t\t    {\n \t\t      auto *f = (string_field_s *) bf;\n \t\t      field_string (f->name, f->str);"
    },
    {
      "sha": "c3ef8a57006a77a4717b12c20792bf25def6f35d",
      "filename": "gdb/ui-out.h",
      "status": "modified",
      "additions": 7,
      "deletions": 4,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ui-out.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/28ce7b07473c33f2e4e380a861973d68ffe8017f/gdb/ui-out.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ui-out.h?ref=28ce7b07473c33f2e4e380a861973d68ffe8017f",
      "patch": "@@ -77,8 +77,11 @@ enum ui_out_type\n /* The possible kinds of fields.  */\n enum class field_kind\n   {\n-    SIGNED,\n-    STRING,\n+    /* \"FIELD_STRING\" needs has a funny name to avoid clashes with\n+       tokens named \"STRING\".  See PR build/25250.  FIELD_SIGNED is\n+       given a similar name for consistency.  */\n+    FIELD_SIGNED,\n+    FIELD_STRING,\n   };\n \n /* The base type of all fields that can be emitted using %pF.  */\n@@ -105,7 +108,7 @@ signed_field (const char *name, LONGEST val,\n \t      signed_field_s &&tmp = {})\n {\n   tmp.name = name;\n-  tmp.kind = field_kind::SIGNED;\n+  tmp.kind = field_kind::FIELD_SIGNED;\n   tmp.val = val;\n   return &tmp;\n }\n@@ -126,7 +129,7 @@ string_field (const char *name, const char *str,\n \t      string_field_s &&tmp = {})\n {\n   tmp.name = name;\n-  tmp.kind = field_kind::STRING;\n+  tmp.kind = field_kind::FIELD_STRING;\n   tmp.str = str;\n   return &tmp;\n }"
    }
  ]
}