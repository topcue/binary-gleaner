{
  "sha": "de07a745805b28ed2c973635752719c4a6a32b1d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZGUwN2E3NDU4MDViMjhlZDJjOTczNjM1NzUyNzE5YzRhNmEzMmIxZA==",
  "commit": {
    "author": {
      "name": "Eric Botcazou",
      "email": "ebotcazou@gcc.gnu.org",
      "date": "2019-09-05T16:23:37Z"
    },
    "committer": {
      "name": "Eric Botcazou",
      "email": "ebotcazou@gcc.gnu.org",
      "date": "2019-09-05T16:23:37Z"
    },
    "message": "Fix PR ld/24574\n\nThis restores a line that has been dropped when the auto-import feature\nof the PE-COFF linker was overhauled about one year.  It is necessary\nfor GDB to properly resolve extern symbol in DLLs.\n\nld/ChangeLog\n\t* pe-dll.c (pe_find_data_imports): Replace again the original name\n\tof the undefined symbol with the __imp_ prefixed one after it is\n\tresolved.",
    "tree": {
      "sha": "64c4b7e469a0fd5746b03f777c4e35937dc0e9d4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/64c4b7e469a0fd5746b03f777c4e35937dc0e9d4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/de07a745805b28ed2c973635752719c4a6a32b1d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/de07a745805b28ed2c973635752719c4a6a32b1d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/de07a745805b28ed2c973635752719c4a6a32b1d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/de07a745805b28ed2c973635752719c4a6a32b1d/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "30331a6ca014f6b51b17627aa968c6b79627ce21",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/30331a6ca014f6b51b17627aa968c6b79627ce21",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/30331a6ca014f6b51b17627aa968c6b79627ce21"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 11,
    "deletions": 0
  },
  "files": [
    {
      "sha": "37836aa70a84e13ba9db56e2f564358c3a83dc34",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/de07a745805b28ed2c973635752719c4a6a32b1d/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/de07a745805b28ed2c973635752719c4a6a32b1d/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=de07a745805b28ed2c973635752719c4a6a32b1d",
      "patch": "@@ -1,3 +1,9 @@\n+2019-09-05  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ld/24574\n+\t* pe-dll.c (pe_find_data_imports): Replace again the original name of\n+\tthe undefined symbol with the __imp_ prefixed one after it is resolved.\n+\n 2019-09-05  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/ld-powerpc/pcrelopt.s,"
    },
    {
      "sha": "577b911da8a6ffb5b845fee6c4789da1da169c47",
      "filename": "ld/pe-dll.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/de07a745805b28ed2c973635752719c4a6a32b1d/ld/pe-dll.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/de07a745805b28ed2c973635752719c4a6a32b1d/ld/pe-dll.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/pe-dll.c?ref=de07a745805b28ed2c973635752719c4a6a32b1d",
      "patch": "@@ -1445,6 +1445,11 @@ pe_find_data_imports (const char *symhead,\n \t    undef->u.def.value = sym->u.def.value;\n \t    undef->u.def.section = sym->u.def.section;\n \n+\t    /* We replace the original name with the __imp_ prefixed one, this\n+\t       1) may trash memory 2) leads to duplicate symbols.  But this is\n+\t       better than having a misleading name that can confuse GDB.  */\n+\t    undef->root.string = sym->root.string;\n+\n \t    if (link_info.pei386_auto_import == -1)\n \t      {\n \t\tstatic bfd_boolean warned = FALSE;"
    }
  ]
}