{
  "sha": "62160ec9547cdd21ac7334d9a378ca2930aac61c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjIxNjBlYzk1NDdjZGQyMWFjNzMzNGQ5YTM3OGNhMjkzMGFhYzYxYw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-04-09T18:52:46Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-04-19T19:01:54Z"
    },
    "message": "Fix \"list\" when control characters are seen\n\nPR symtab/24423 points out that control characters in a source file\ncause a hang in the \"list\" command, a regression introduced by the\nstyling changes.\n\nThis patch, from the PR, fixes the bug.  I've included a minimal\nchange to the \"list\" test that exercises this code.\n\nI recall that this bug was discussed on gdb-patches, and I thought\nthere was a patch there as well, but I was unable to find it.\n\ngdb/ChangeLog\n2019-04-19  Ilya Yu. Malakhov  <malakhov@mcst.ru>\n\n\tPR symtab/24423:\n\t* source.c (print_source_lines_base): Advance \"iter\" when a\n\tcontrol character is seen.\n\ngdb/testsuite/ChangeLog\n2019-04-19  Tom Tromey  <tromey@adacore.com>\n\n\tPR symtab/24423:\n\t* gdb.base/list0.h (foo): Add a control-l character.",
    "tree": {
      "sha": "55873c12bd4acb1b1f7434524a1a2c0d10c3dc49",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/55873c12bd4acb1b1f7434524a1a2c0d10c3dc49"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/62160ec9547cdd21ac7334d9a378ca2930aac61c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/62160ec9547cdd21ac7334d9a378ca2930aac61c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/62160ec9547cdd21ac7334d9a378ca2930aac61c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/62160ec9547cdd21ac7334d9a378ca2930aac61c/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ee3c5f8968e7b43854204898fa46933b3a1b5991",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ee3c5f8968e7b43854204898fa46933b3a1b5991",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ee3c5f8968e7b43854204898fa46933b3a1b5991"
    }
  ],
  "stats": {
    "total": 21,
    "additions": 18,
    "deletions": 3
  },
  "files": [
    {
      "sha": "22f22b963e849410dc19e1d6abbf39c4c6cbd163",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=62160ec9547cdd21ac7334d9a378ca2930aac61c",
      "patch": "@@ -1,3 +1,9 @@\n+2019-04-19  Ilya Yu. Malakhov  <malakhov@mcst.ru>\n+\n+\tPR symtab/24423:\n+\t* source.c (print_source_lines_base): Advance \"iter\" when a\n+\tcontrol character is seen.\n+\n 2019-04-19  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n \n \t* cli/cli-cmds.c (_initialize_cli_cmds): Move \"shell\" \"!\" alias"
    },
    {
      "sha": "b61880ab503c6f957de9120d0bc77c3f06a1ad2c",
      "filename": "gdb/source.c",
      "status": "modified",
      "additions": 6,
      "deletions": 2,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/source.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/source.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/source.c?ref=62160ec9547cdd21ac7334d9a378ca2930aac61c",
      "patch": "@@ -1368,7 +1368,7 @@ print_source_lines_base (struct symtab *s, int line, int stopline,\n \t      char c = *iter;\n \t      if (c == '\\033' && skip_ansi_escape (iter, &skip_bytes))\n \t\titer += skip_bytes;\n-\t      else if (c < 040 && c != '\\t')\n+\t      else if (c >= 0 && c < 040 && c != '\\t')\n \t\tbreak;\n \t      else if (c == 0177)\n \t\tbreak;\n@@ -1397,9 +1397,13 @@ print_source_lines_base (struct symtab *s, int line, int stopline,\n \t    {\n \t      xsnprintf (buf, sizeof (buf), \"^%c\", *iter + 0100);\n \t      uiout->text (buf);\n+\t      ++iter;\n \t    }\n \t  else if (*iter == 0177)\n-\t    uiout->text (\"^?\");\n+\t    {\n+\t      uiout->text (\"^?\");\n+\t      ++iter;\n+\t    }\n \t}\n       uiout->text (\"\\n\");\n     }"
    },
    {
      "sha": "89058f41a1b6b914af19634ee561e4c132584a5e",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=62160ec9547cdd21ac7334d9a378ca2930aac61c",
      "patch": "@@ -1,3 +1,8 @@\n+2019-04-19  Tom Tromey  <tromey@adacore.com>\n+\n+\tPR symtab/24423:\n+\t* gdb.base/list0.h (foo): Add a control-l character.\n+\n 2019-04-18  Tom de Vries  <tdevries@suse.de>\n \n \tPR gdb/24433"
    },
    {
      "sha": "6f2809355093eb8890929a274d8cb7de1b5b9e9f",
      "filename": "gdb/testsuite/gdb.base/list0.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/testsuite/gdb.base/list0.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62160ec9547cdd21ac7334d9a378ca2930aac61c/gdb/testsuite/gdb.base/list0.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/list0.h?ref=62160ec9547cdd21ac7334d9a378ca2930aac61c",
      "patch": "@@ -3,7 +3,7 @@\n extern void bar(int);\n static void foo (int x)\n /* !\n-   !\n+\f\n    ! */\n {\n     bar (x++);"
    }
  ]
}