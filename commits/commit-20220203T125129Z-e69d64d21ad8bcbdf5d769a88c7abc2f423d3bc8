{
  "sha": "e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8",
  "node_id": "C_kwDOANOeidoAKGU2OWQ2NGQyMWFkOGJjYmRmNWQ3NjlhODhjN2FiYzJmNDIzZDNiYzg",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2022-02-03T12:48:53Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2022-02-03T12:51:29Z"
    },
    "message": "testsuite: fix failure in gdb.threads/killed-outside.exp\n\nStarting with commit\n\n  commit 1da5d0e664e362857153af8682321a89ebafb7f6\n  Date:   Tue Jan 4 08:02:24 2022 -0700\n\n    Change how Python architecture and language are handled\n\nwe see a failure in gdb.threads/killed-outside.exp:\n\n  ...\n  Executing on target: kill -9 16622    (timeout = 300)\n  builtin_spawn -ignore SIGHUP kill -9 16622\n  continue\n  Continuing.\n  Couldn't get registers: No such process.\n  (gdb) [Thread 0x7ffff77c2700 (LWP 16626) exited]\n\n  Program terminated with signal SIGKILL, Killed.\n  The program no longer exists.\n  FAIL: gdb.threads/killed-outside.exp: prompt after first continue (timeout)\n\nThis is not a regression but a failure due to a change in GDB's\noutput.  Prior to the aforementioned commit, GDB has been printing the\n\"Couldn't get registers: No such process.\" message twice.  The second\none came from\n\n  (top-gdb) bt\n  #0  amd64_linux_nat_target::fetch_registers (this=0x555557f31440 <the_amd64_linux_nat_target>, regcache=0x555558805ce0, regnum=16) at /gdb-up/gdb/amd64-linux-nat.c:225\n  #1  0x000055555640ac5f in target_ops::fetch_registers (this=0x555557d636d0 <the_thread_db_target>, arg0=0x555558805ce0, arg1=16) at /gdb-up/gdb/target-delegates.c:502\n  #2  0x000055555641a647 in target_fetch_registers (regcache=0x555558805ce0, regno=16) at /gdb-up/gdb/target.c:3945\n  #3  0x0000555556278e68 in regcache::raw_update (this=0x555558805ce0, regnum=16) at /gdb-up/gdb/regcache.c:587\n  #4  0x0000555556278f14 in readable_regcache::raw_read (this=0x555558805ce0, regnum=16, buf=0x555558881950 \"\") at /gdb-up/gdb/regcache.c:601\n  #5  0x00005555562792aa in readable_regcache::cooked_read (this=0x555558805ce0, regnum=16, buf=0x555558881950 \"\") at /gdb-up/gdb/regcache.c:690\n  #6  0x000055555627965e in readable_regcache::cooked_read_value (this=0x555558805ce0, regnum=16) at /gdb-up/gdb/regcache.c:748\n  #7  0x0000555556352a37 in sentinel_frame_prev_register (this_frame=0x555558181090, this_prologue_cache=0x5555581810a8, regnum=16) at /gdb-up/gdb/sentinel-frame.c:53\n  #8  0x0000555555fa4773 in frame_unwind_register_value (next_frame=0x555558181090, regnum=16) at /gdb-up/gdb/frame.c:1235\n  #9  0x0000555555fa420d in frame_register_unwind (next_frame=0x555558181090, regnum=16, optimizedp=0x7fffffffd570, unavailablep=0x7fffffffd574, lvalp=0x7fffffffd57c, addrp=0x7fffffffd580,\n      realnump=0x7fffffffd578, bufferp=0x7fffffffd5b0 \"\") at /gdb-up/gdb/frame.c:1143\n  #10 0x0000555555fa455f in frame_unwind_register (next_frame=0x555558181090, regnum=16, buf=0x7fffffffd5b0 \"\") at /gdb-up/gdb/frame.c:1199\n  #11 0x00005555560178e2 in i386_unwind_pc (gdbarch=0x5555587c4a70, next_frame=0x555558181090) at /gdb-up/gdb/i386-tdep.c:1972\n  #12 0x0000555555cd2b9d in gdbarch_unwind_pc (gdbarch=0x5555587c4a70, next_frame=0x555558181090) at /gdb-up/gdb/gdbarch.c:3007\n  #13 0x0000555555fa3a5b in frame_unwind_pc (this_frame=0x555558181090) at /gdb-up/gdb/frame.c:948\n  #14 0x0000555555fa7621 in get_frame_pc (frame=0x555558181160) at /gdb-up/gdb/frame.c:2572\n  #15 0x0000555555fa7706 in get_frame_address_in_block (this_frame=0x555558181160) at /gdb-up/gdb/frame.c:2602\n  #16 0x0000555555fa77d0 in get_frame_address_in_block_if_available (this_frame=0x555558181160, pc=0x7fffffffd708) at /gdb-up/gdb/frame.c:2665\n  #17 0x0000555555fa5f8d in select_frame (fi=0x555558181160) at /gdb-up/gdb/frame.c:1890\n  #18 0x0000555555fa5bab in lookup_selected_frame (a_frame_id=..., frame_level=-1) at /gdb-up/gdb/frame.c:1720\n  #19 0x0000555555fa5e47 in get_selected_frame (message=0x0) at /gdb-up/gdb/frame.c:1810\n  #20 0x0000555555cc9c6e in get_current_arch () at /gdb-up/gdb/arch-utils.c:848\n  #21 0x000055555625b239 in gdbpy_before_prompt_hook (extlang=0x555557451f20 <extension_language_python>, current_gdb_prompt=0x555557f4d890 <top_prompt+16> \"(gdb) \")\n      at /gdb-up/gdb/python/python.c:1063\n  #22 0x0000555555f7cfbb in ext_lang_before_prompt (current_gdb_prompt=0x555557f4d890 <top_prompt+16> \"(gdb) \") at /gdb-up/gdb/extension.c:922\n  #23 0x0000555555f7d442 in std::_Function_handler<void (char const*), void (*)(char const*)>::_M_invoke(std::_Any_data const&, char const*&&) (__functor=...,\n      __args#0=@0x7fffffffd900: 0x555557f4d890 <top_prompt+16> \"(gdb) \") at /usr/include/c++/7/bits/std_function.h:316\n  #24 0x0000555555f752dd in std::function<void (char const*)>::operator()(char const*) const (this=0x55555817d838, __args#0=0x555557f4d890 <top_prompt+16> \"(gdb) \")\n      at /usr/include/c++/7/bits/std_function.h:706\n  #25 0x0000555555f75100 in gdb::observers::observable<char const*>::notify (this=0x555557f49060 <gdb::observers::before_prompt>, args#0=0x555557f4d890 <top_prompt+16> \"(gdb) \")\n      at /gdb-up/gdb/../gdbsupport/observable.h:150\n  #26 0x0000555555f736dc in top_level_prompt () at /gdb-up/gdb/event-top.c:444\n  #27 0x0000555555f735ba in display_gdb_prompt (new_prompt=0x0) at /gdb-up/gdb/event-top.c:411\n  #28 0x00005555564611a7 in tui_on_command_error () at /gdb-up/gdb/tui/tui-interp.c:205\n  #29 0x0000555555c2173f in std::_Function_handler<void (), void (*)()>::_M_invoke(std::_Any_data const&) (__functor=...) at /usr/include/c++/7/bits/std_function.h:316\n  #30 0x0000555555e10c20 in std::function<void ()>::operator()() const (this=0x5555580f9028) at /usr/include/c++/7/bits/std_function.h:706\n  #31 0x0000555555e10973 in gdb::observers::observable<>::notify() const (this=0x555557f48d20 <gdb::observers::command_error>) at /gdb-up/gdb/../gdbsupport/observable.h:150\n  #32 0x00005555560e9b3f in start_event_loop () at /gdb-up/gdb/main.c:438\n  #33 0x00005555560e9bcc in captured_command_loop () at /gdb-up/gdb/main.c:481\n  #34 0x00005555560eb616 in captured_main (data=0x7fffffffddd0) at /gdb-up/gdb/main.c:1348\n  #35 0x00005555560eb67c in gdb_main (args=0x7fffffffddd0) at /gdb-up/gdb/main.c:1363\n  #36 0x0000555555c1b6b3 in main (argc=12, argv=0x7fffffffded8) at /gdb-up/gdb/gdb.c:32\n\nCommit 1da5d0e664 eliminated the call to 'get_current_arch'\nin 'gdbpy_before_prompt_hook'.  Hence, the second instance of\n\"Couldn't get registers: No such process.\" does not appear anymore.\n\nFix the failure by updating the regular expression in the test.",
    "tree": {
      "sha": "3b5457d5de353221597943c04bea77926c7dbd32",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3b5457d5de353221597943c04bea77926c7dbd32"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3a3a4c1fe4ccb1914d29fbf8f5930d55aacec78f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3a3a4c1fe4ccb1914d29fbf8f5930d55aacec78f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3a3a4c1fe4ccb1914d29fbf8f5930d55aacec78f"
    }
  ],
  "stats": {
    "total": 4,
    "additions": 2,
    "deletions": 2
  },
  "files": [
    {
      "sha": "3d4543e088cd5dc9fab36a5053d57e4b47c0e25a",
      "filename": "gdb/testsuite/gdb.threads/killed-outside.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8/gdb/testsuite/gdb.threads/killed-outside.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8/gdb/testsuite/gdb.threads/killed-outside.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.threads/killed-outside.exp?ref=e69d64d21ad8bcbdf5d769a88c7abc2f423d3bc8",
      "patch": "@@ -43,9 +43,9 @@ set no_longer_exists_msg \"The program no longer exists\\.\"\n set not_being_run_msg \"The program is not being run\\.\"\n \n gdb_test_multiple \"continue\" \"prompt after first continue\" {\n-    -re \"Continuing\\.\\r\\n$no_such_process_msg\\r\\n$no_such_process_msg\\r\\n$gdb_prompt \" {\n+    -re \"Continuing\\.\\r\\n$no_such_process_msg\\r\\n$gdb_prompt \" {\n \tpass $gdb_test_name\n-\t# Two times $no_such_process_msg.  The bug condition was triggered, go\n+\t# Saw $no_such_process_msg.  The bug condition was triggered, go\n \t# check for it.\n \tgdb_test_multiple \"\" \"messages\" {\n \t    -re \".*$killed_msg.*$no_longer_exists_msg\\r\\n\" {"
    }
  ]
}