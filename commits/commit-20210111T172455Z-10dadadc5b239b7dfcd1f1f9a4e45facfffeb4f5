{
  "sha": "10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTBkYWRhZGM1YjIzOWI3ZGZjZDFmMWY5YTRlNDVmYWNmZmZlYjRmNQ==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-01-11T17:24:55Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-01-11T17:24:55Z"
    },
    "message": "[gdb/testsuite] Fix gdb.arch/amd64-stap-three-arg-disp.S\n\nOn SLE-11 I ran into:\n...\n(gdb) print $_probe_arg0^M\nCannot access memory at address 0x8000003fe05c^M\n(gdb) FAIL: gdb.arch/amd64-stap-special-operands.exp: probe: three_arg: \\\n  print $_probe_arg0\n...\n\nThe memory cannot be accessed because the address used to evaluate\n$_probe_arg0 at the probe point is incorrect.\n\nThe address is calculated using this expression:\n...\n.asciz \"-4@-4(%rbp,%ebx,0)\"\n...\nwhich uses $ebx, but $ebx is uninitialized at the probe point.\n\nThe test-case does contain a \"movl $0, %ebx\" insn to set $ebx to 0, but that\ninsn is placed after the probe point.  We could fix this by moving the insn\nto before the probe point.  But, $ebx is also a callee-save register, so\nnormally, if we modify it, we also need to save and restore it, which is\ncurrently not done.  This is currently not harmful, because we don't run the\ntest-case further than the probe point, but it's bound to cause confusion.\n\nSo, fix this instead by using $eax instead in the expression, and moving the\ninsn setting $eax to 0 to before the probe point.\n\ngdb/testsuite/ChangeLog:\n\n2021-01-11  Tom de Vries  <tdevries@suse.de>\n\n\tPR testsuite/26968\n\t* gdb.arch/amd64-stap-three-arg-disp.S: Remove insn modifying $ebx.\n\tMove insn setting $eax to before probe point.",
    "tree": {
      "sha": "ac9c2334262ad43292c7a91a052f98501fc3c8a5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ac9c2334262ad43292c7a91a052f98501fc3c8a5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "82c70b08dfb47bf56ce78fbd9147d38f51ecdeb8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/82c70b08dfb47bf56ce78fbd9147d38f51ecdeb8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/82c70b08dfb47bf56ce78fbd9147d38f51ecdeb8"
    }
  ],
  "stats": {
    "total": 11,
    "additions": 8,
    "deletions": 3
  },
  "files": [
    {
      "sha": "65bbebfb598b751718618b8b573147c7fab3e595",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
      "patch": "@@ -1,3 +1,9 @@\n+2021-01-11  Tom de Vries  <tdevries@suse.de>\n+\n+\tPR testsuite/26968\n+\t* gdb.arch/amd64-stap-three-arg-disp.S: Remove insn modifying $ebx.\n+\tMove insn setting $eax to before probe point.\n+\n 2021-01-09  Tom Tromey  <tom@tromey.com>\n \n \t* gdb.trace/ax.exp: Do not require an \"ext\"."
    },
    {
      "sha": "17b640480821ac0584483d911f32c0c76f9591b5",
      "filename": "gdb/testsuite/gdb.arch/amd64-stap-three-arg-disp.S",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5/gdb/testsuite/gdb.arch/amd64-stap-three-arg-disp.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5/gdb/testsuite/gdb.arch/amd64-stap-three-arg-disp.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.arch/amd64-stap-three-arg-disp.S?ref=10dadadc5b239b7dfcd1f1f9a4e45facfffeb4f5",
      "patch": "@@ -15,6 +15,7 @@ main:\n \tmovl\t%edi, -20(%rbp)\n \tmovq\t%rsi, -32(%rbp)\n \tmovl\t$10, -4(%rbp)\n+\tmovl\t$0, %eax\n #APP\n # 8 \"amd64-stap-three-arg-disp.c\" 1\n \t990: nop\n@@ -28,7 +29,7 @@ main:\n .8byte 0\n .asciz \"test\"\n .asciz \"three_arg\"\n-.asciz \"-4@-4(%rbp,%ebx,0)\"\n+.asciz \"-4@-4(%rbp,%eax,0)\"\n 994: .balign 4\n .popsection\n \n@@ -45,8 +46,6 @@ _.stapsdt.base: .space 1\n \n # 0 \"\" 2\n #NO_APP\n-\tmovl\t$0, %eax\n-\tmovl\t$0, %ebx\n \tpopq\t%rbp\n \t.cfi_def_cfa 7, 8\n # SUCC: EXIT [100.0%] "
    }
  ]
}