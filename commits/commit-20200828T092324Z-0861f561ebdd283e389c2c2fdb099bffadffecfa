{
  "sha": "0861f561ebdd283e389c2c2fdb099bffadffecfa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDg2MWY1NjFlYmRkMjgzZTM4OWMyYzJmZGIwOTliZmZhZGZmZWNmYQ==",
  "commit": {
    "author": {
      "name": "Cooper Qu",
      "email": "cooper.qu@linux.alibaba.com",
      "date": "2020-08-26T03:21:14Z"
    },
    "committer": {
      "name": "Lifang Xia",
      "email": "lifang_xia@c-sky.com",
      "date": "2020-08-28T09:23:24Z"
    },
    "message": "CSKY: Support attribute section.\n\nbfd\n        * elf32-csky.c (csky_archs): Fix arch names.\n        (csky_find_arch_with_name): New.\n        (elf32_csky_merge_attributes): New.\n        (csky_elf_merge_private_bfd_data): Add process of merge\n        attribute section.\n        (elf32_csky_obj_attrs_arg_type): New.\n        (elf32_csky_obj_attrs_handle_unknown): New.\n        (elf_backend_obj_attrs_vendor): Define.\n        (elf_backend_obj_attrs_section): Define.\n        (elf_backend_obj_attrs_arg_type): Define.\n        (elf_backend_obj_attrs_section_type): Define.\n\nbinutils/\n        * readelf.c (get_csky_section_type_name): New.\n        (get_section_type_name): Add handler for CSKY.\n        (display_csky_attribute): New.\n        (process_arch_specific): Add handler for CSKY.\n        * testsuite/binutils-all/strip-3.d: Remove .csky.attributes\n        section.\n\nelfcpp/\n        * elfcpp.h (enum SHT): New enum SHT_CSKY_ATTRIBUTES.\n\ngas/\n        * gas/config/tc-csky.c (md_begin): Set attributes.\n        (isa_flag): Change type to unsigned 64 bits.\n        (struct csky_cpu_info): Likewise.\n        (struct csky_macro_info): Likewise.\n        (set_csky_attribute): New.\n        * testsuite/gas/csky/802j.d: Ignore .csky.attributes section.\n        * testsuite/gas/csky/all.d: Likewise.\n        * testsuite/gas/csky/bsr1.d: Likewise.\n        * testsuite/gas/csky/csky_vdsp.d: Likewise.\n        * testsuite/gas/csky/cskyv2_all.d: Likewise.\n        * testsuite/gas/csky/cskyv2_ck803r2.d: Likewise.\n        * testsuite/gas/csky/cskyv2_ck860.d: Likewise.\n        * testsuite/gas/csky/cskyv2_dsp.d: Likewise.\n        * testsuite/gas/csky/cskyv2_elrw.d: Likewise.\n        * testsuite/gas/csky/cskyv2_float.d: Likewise.\n        * testsuite/gas/csky/enhance_dsp.d: Likewise.\n        * testsuite/gas/csky/java.d: Likewise.\n        * testsuite/gas/csky/v1_float.d: Likewise.\n        * testsuite/gas/csky/v2_float_part1.d: Likewise.\n        * testsuite/gas/csky/v2_float_part2.d: Likewise.\n        * testsuite/gas/csky/v2_tls_gd.d: Likewise.\n        * testsuite/gas/csky/v2_tls_ie.d: Likewise.\n        * testsuite/gas/csky/v2_tls_ld.d: Likewise.\n        * testsuite/gas/csky/v2_tls_le.d: Likewise.\n        * testsuite/gas/elf/elf.exp: Add handler for CSKY.\n        * testsuite/gas/elf/section2.e-csky: New.\n\ninclude/\n        * elf/csky.h (SHT_CSKY_ATTRIBUTES): Define.\n        (Tag_CSKY_ARCH_NAME): New enum constant.\n        (Tag_CSKY_CPU_NAME): Likewise.\n        (Tag_CSKY_ISA_FLAGS): Likewise.\n        (Tag_CSKY_DSP_VERSION): Likewise.\n        (Tag_CSKY_VDSP_VERSION): Likewise.\n        (Tag_CSKY_FPU_VERSION): Likewise.\n        (Tag_CSKY_FPU_ABI): Likewise.\n        (Tag_CSKY_FPU_ROUNDING): Likewise.\n        (Tag_CSKY_FPU_DENORMAL): Likewise.\n        (Tag_CSKY_FPU_Exception): Likewise.\n        (Tag_CSKY_FPU_NUMBER_MODULE): Likewise.\n        (Tag_CSKY_FPU_HARDFP): Likewise.\n        (Tag_CSKY_MAX): Likewise.\n        (VAL_CSKY_DSP_VERSION_EXTENSION): Likewise.\n        (VAL_CSKY_DSP_VERSION_2): Likewise.\n        (VAL_CSKY_VDSP_VERSION_1): Likewise.\n        (VAL_CSKY_VDSP_VERSION_2): Likewise.\n        (VAL_CSKY_FPU_ABI_SOFT): Likewise.\n        (VAL_CSKY_FPU_ABI_SOFTFP): Likewise.\n        (VAL_CSKY_FPU_ABI_HARD): Likewise.\n        (VAL_CSKY_FPU_HARDFP_HALF): Likewise.\n        (VAL_CSKY_FPU_HARDFP_SINGLE): Likewise.\n        (VAL_CSKY_FPU_HARDFP_DOUBLE): Likewise.\n        * opcode/csky.h (CSKY_ISA_VDSP_V2): Define.\n        CSKYV1_ISA_E1: Change to long constant type.\n        CSKYV2_ISA_E1: Likewise.\n        CSKYV2_ISA_1E2: Likewise.\n        CSKYV2_ISA_2E3: Likewise.\n        CSKYV2_ISA_3E7: Likewise.\n        CSKYV2_ISA_7E10: Likewise.\n        CSKYV2_ISA_3E3R1: Likewise.\n        CSKYV2_ISA_3E3R2: Likewise.\n        CSKYV2_ISA_10E60: Likewise.\n        CSKY_ISA_TRUST: Likewise.\n        CSKY_ISA_CACHE: Likewise.\n        CSKY_ISA_NVIC: Likewise.\n        CSKY_ISA_CP: Likewise.\n        CSKY_ISA_MP: Likewise.\n        CSKY_ISA_MP_1E2: Likewise.\n        CSKY_ISA_JAVA: Likewise.\n        CSKY_ISA_MAC: Likewise.\n        CSKY_ISA_MAC_DSP: Likewise.\n        CSKY_ISA_DSP: Likewise.\n        CSKY_ISA_DSP_1E2: Likewise.\n        CSKY_ISA_DSP_ENHANCE: Likewise.\n        CSKY_ISA_FLOAT_E1: Likewise.\n        CSKY_ISA_FLOAT_1E2: Likewise.\n        CSKY_ISA_FLOAT_1E3: Likewise.\n        CSKY_ISA_FLOAT_3E4: Likewise.\n        CSKY_ISA_VDSP: Likewise.\n\nld/\n        * emulparams/cskyelf.sh: Support attribute section.\n        * testsuite/ld-csky/tls-le-v1.d: Match .csky.attributes section.\n        * ld/testsuite/ld-csky/tls-le.d: Likewise.\n        * testsuite/ld-elf/non-contiguous.ld: Ignore .csky.attributes\n        section.\n\nopcodes/\n        * csky-dis.c (CSKY_DEFAULT_ISA): Define.\n        (csky_dis_info): Add member isa.\n        (csky_find_inst_info): Skip instructions that do not belong to\n        current CPU.\n        (csky_get_disassembler): Get infomation from attribute section.\n        (print_insn_csky): Set defualt ISA flag.\n        * csky.h (CSKY_ISA_VDSP_2): Rename from CSKY_ISA_VDSP_V2.\n        * csky-opc.h (struct csky_opcode): Change isa_flag16 and\n        isa_flag32'type to unsigned 64 bits.",
    "tree": {
      "sha": "e5f13278de132426df58f2af728f1c7b747b790c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e5f13278de132426df58f2af728f1c7b747b790c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0861f561ebdd283e389c2c2fdb099bffadffecfa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0861f561ebdd283e389c2c2fdb099bffadffecfa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0861f561ebdd283e389c2c2fdb099bffadffecfa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0861f561ebdd283e389c2c2fdb099bffadffecfa/comments",
  "author": {
    "login": "Cooper-Qu",
    "id": 68842787,
    "node_id": "MDQ6VXNlcjY4ODQyNzg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/68842787?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Cooper-Qu",
    "html_url": "https://github.com/Cooper-Qu",
    "followers_url": "https://api.github.com/users/Cooper-Qu/followers",
    "following_url": "https://api.github.com/users/Cooper-Qu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Cooper-Qu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Cooper-Qu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Cooper-Qu/subscriptions",
    "organizations_url": "https://api.github.com/users/Cooper-Qu/orgs",
    "repos_url": "https://api.github.com/users/Cooper-Qu/repos",
    "events_url": "https://api.github.com/users/Cooper-Qu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Cooper-Qu/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "Lifang-XIA",
    "id": 22215568,
    "node_id": "MDQ6VXNlcjIyMjE1NTY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/22215568?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Lifang-XIA",
    "html_url": "https://github.com/Lifang-XIA",
    "followers_url": "https://api.github.com/users/Lifang-XIA/followers",
    "following_url": "https://api.github.com/users/Lifang-XIA/following{/other_user}",
    "gists_url": "https://api.github.com/users/Lifang-XIA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Lifang-XIA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Lifang-XIA/subscriptions",
    "organizations_url": "https://api.github.com/users/Lifang-XIA/orgs",
    "repos_url": "https://api.github.com/users/Lifang-XIA/repos",
    "events_url": "https://api.github.com/users/Lifang-XIA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Lifang-XIA/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6194b866b7a89969d8c66f8a97d40acc028373b1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6194b866b7a89969d8c66f8a97d40acc028373b1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6194b866b7a89969d8c66f8a97d40acc028373b1"
    }
  ],
  "stats": {
    "total": 928,
    "additions": 827,
    "deletions": 101
  },
  "files": [
    {
      "sha": "6fa6ee0f316b9f83b09bd3c12184fd18377b0e40",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,17 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* elf32-csky.c (csky_archs): Fix arch names.\n+\t(csky_find_arch_with_name): New.\n+\t(elf32_csky_merge_attributes): New.\n+\t(csky_elf_merge_private_bfd_data): Add process of merge\n+\tattribute section.\n+\t(elf32_csky_obj_attrs_arg_type): New.\n+\t(elf32_csky_obj_attrs_handle_unknown): New.\n+\t(elf_backend_obj_attrs_vendor): Define.\n+\t(elf_backend_obj_attrs_section): Define.\n+\t(elf_backend_obj_attrs_arg_type): Define.\n+\t(elf_backend_obj_attrs_section_type): Define.\n+\n 2020-08-28  Nick Clifton  <nickc@redhat.com>\n \n \tPR19011"
    },
    {
      "sha": "80155cd556eb239973a5c6f8344e2b14b0394c96",
      "filename": "bfd/elf32-csky.c",
      "status": "modified",
      "additions": 306,
      "deletions": 54,
      "changes": 360,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/bfd/elf32-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/bfd/elf32-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-csky.c?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -56,14 +56,15 @@ typedef struct csky_arch_for_merge\n static struct csky_arch_for_merge csky_archs[] =\n {\n   /* 510 and 610 merge to 610 without warning.  */\n-  { \"510\",  CSKY_ARCH_510,  CSKY_V1,  0, 0},\n-  { \"610\",  CSKY_ARCH_610,  CSKY_V1,  1, 0},\n+  { \"ck510\",  CSKY_ARCH_510,  CSKY_V1,  0, 0},\n+  { \"ck610\",  CSKY_ARCH_610,  CSKY_V1,  1, 0},\n   /* 801, 802, 803, 807, 810 merge to largest one.  */\n-  { \"801\",  CSKY_ARCH_801,  CSKY_V2,  0, 1},\n-  { \"802\",  CSKY_ARCH_802,  CSKY_V2,  1, 1},\n-  { \"803\",  CSKY_ARCH_803,  CSKY_V2,  2, 1},\n-  { \"807\",  CSKY_ARCH_807,  CSKY_V2,  3, 1},\n-  { \"810\",  CSKY_ARCH_810,  CSKY_V2,  4, 1},\n+  { \"ck801\",  CSKY_ARCH_801,  CSKY_V2,  0, 1},\n+  { \"ck802\",  CSKY_ARCH_802,  CSKY_V2,  1, 1},\n+  { \"ck803\",  CSKY_ARCH_803,  CSKY_V2,  2, 1},\n+  { \"ck807\",  CSKY_ARCH_807,  CSKY_V2,  3, 1},\n+  { \"ck810\",  CSKY_ARCH_810,  CSKY_V2,  4, 1},\n+  { \"ck860\",  CSKY_ARCH_860,  CSKY_V2,  5, 1},\n   { NULL, 0, 0, 0, 0}\n };\n \n@@ -2802,6 +2803,199 @@ csky_find_arch_with_eflag (const unsigned long arch_eflag)\n   return csky_arch;\n }\n \n+static csky_arch_for_merge *\n+csky_find_arch_with_name (const char *name)\n+{\n+  csky_arch_for_merge *csky_arch = NULL;\n+  const char *msg;\n+\n+  if (name == NULL)\n+    return NULL;\n+\n+  for (csky_arch = csky_archs; csky_arch->name != NULL; csky_arch++)\n+    {\n+      if (strncmp (csky_arch->name, name, strlen (csky_arch->name)) == 0)\n+\tbreak;\n+    }\n+  if (csky_arch == NULL)\n+    {\n+      msg = _(\"warning: unrecognised arch name '%#x'\");\n+      (*_bfd_error_handler) (msg, name);\n+      bfd_set_error (bfd_error_wrong_format);\n+    }\n+  return csky_arch;\n+}\n+\n+static bfd_boolean\n+elf32_csky_merge_attributes (bfd *ibfd, struct bfd_link_info *info)\n+{\n+  bfd *obfd = info->output_bfd;\n+  obj_attribute *in_attr;\n+  obj_attribute *out_attr;\n+  obj_attribute tattr;\n+  csky_arch_for_merge *old_arch = NULL;\n+  csky_arch_for_merge *new_arch = NULL;\n+  int i;\n+  bfd_boolean result = TRUE;\n+  const char *msg = NULL;\n+\n+  const char *sec_name = get_elf_backend_data (ibfd)->obj_attrs_section;\n+\n+  /* Skip the linker stubs file.  This preserves previous behavior\n+     of accepting unknown attributes in the first input file - but\n+     is that a bug?  */\n+  if (ibfd->flags & BFD_LINKER_CREATED)\n+    return TRUE;\n+\n+  /* Skip any input that hasn't attribute section.\n+     This enables to link object files without attribute section with\n+     any others.  */\n+  if (bfd_get_section_by_name (ibfd, sec_name) == NULL)\n+    {\n+      return TRUE;\n+    }\n+\n+  if (!elf_known_obj_attributes_proc (obfd)[0].i)\n+    {\n+      /* This is the first object.  Copy the attributes.  */\n+      out_attr = elf_known_obj_attributes_proc (obfd);\n+\n+      /* If Tag_CSKY_CPU_NAME is already set, save it.  */\n+      memcpy (&tattr, &out_attr[Tag_CSKY_ARCH_NAME], sizeof (tattr));\n+\n+      _bfd_elf_copy_obj_attributes (ibfd, obfd);\n+\n+      out_attr = elf_known_obj_attributes_proc (obfd);\n+\n+      /* Restore Tag_CSKY_CPU_NAME.  */\n+      memcpy (&out_attr[Tag_CSKY_ARCH_NAME], &tattr, sizeof (tattr));\n+\n+      /* Use the Tag_null value to indicate the attributes have been\n+\t initialized.  */\n+      out_attr[0].i = 1;\n+    }\n+\n+  in_attr = elf_known_obj_attributes_proc (ibfd);\n+  out_attr = elf_known_obj_attributes_proc (obfd);\n+\n+  for (i = LEAST_KNOWN_OBJ_ATTRIBUTE; i < NUM_KNOWN_OBJ_ATTRIBUTES; i++)\n+    {\n+      /* Merge this attribute with existing attributes.  */\n+      switch (i)\n+        {\n+\tcase Tag_CSKY_CPU_NAME:\n+\tcase Tag_CSKY_ARCH_NAME:\n+\t  /* Do arch merge.  */\n+\t  new_arch = csky_find_arch_with_name (in_attr[Tag_CSKY_ARCH_NAME].s);\n+\t  old_arch = csky_find_arch_with_name (out_attr[Tag_CSKY_ARCH_NAME].s);\n+\n+\t  if (new_arch != NULL && old_arch != NULL)\n+\t    {\n+\t      if (new_arch->class != old_arch->class)\n+\t\t{\n+\t\t  msg = _(\"%pB: machine flag conflict with target\");\n+\t\t  (*_bfd_error_handler) (msg, ibfd);\n+\t\t  bfd_set_error (bfd_error_wrong_format);\n+\t\t  return FALSE;\n+\t\t}\n+\t      else if (new_arch->class_level != old_arch->class_level)\n+\t\t{\n+\t\t  csky_arch_for_merge *newest_arch =\n+\t\t    ((new_arch->class_level > old_arch->class_level) ?\n+\t\t  new_arch : old_arch);\n+\n+\t\t  if (new_arch->do_warning || old_arch->do_warning)\n+\t\t    {\n+\t\t      msg = _(\"warning: file %pB's arch flag %s conflict \"\n+\t\t\t      \"with target %s,set target arch flag to %s\");\n+\t\t      (*_bfd_error_handler) (msg, ibfd,  new_arch->name,\n+\t\t\t\t\t     old_arch->name,\n+\t\t\t\t\t     (newest_arch->name));\n+\t\t      bfd_set_error (bfd_error_wrong_format);\n+                    }\n+\n+\t\t  if (out_attr[Tag_CSKY_ARCH_NAME].s != NULL)\n+\t\t    bfd_release (obfd, out_attr[Tag_CSKY_ARCH_NAME].s);\n+\n+\t\t  out_attr[Tag_CSKY_ARCH_NAME].s =\n+\t\t    _bfd_elf_attr_strdup (obfd, newest_arch->name);\n+\t\t}\n+\t    }\n+\n+\t  break;\n+\n+\tcase Tag_CSKY_ISA_FLAGS:\n+\tcase Tag_CSKY_ISA_EXT_FLAGS:\n+\t  /* Do ISA merge.  */\n+\t  break;\n+\n+\tcase Tag_CSKY_VDSP_VERSION:\n+\t  if (out_attr[i].i == 0)\n+\t    out_attr[i].i = in_attr[i].i;\n+\t  else if (out_attr[i].i != in_attr[i].i)\n+\t    {\n+\t      _bfd_error_handler\n+\t\t(_(\"Error: %pB and %pB has different VDSP version\"), ibfd, obfd);\n+\t      result = FALSE;\n+\t    }\n+\t  break;\n+\n+\tcase Tag_CSKY_FPU_VERSION:\n+\t  if (out_attr[i].i <= in_attr[i].i\n+\t      && out_attr[i].i == 0)\n+\t    out_attr[i].i = in_attr[i].i;\n+\t  break;\n+\n+\tcase Tag_CSKY_DSP_VERSION:\n+\t  if (out_attr[i].i == 0)\n+\t    out_attr[i].i = in_attr[i].i;\n+\t  else if (out_attr[i].i != in_attr[i].i)\n+\t    {\n+\t      _bfd_error_handler\n+\t\t(_(\"Error: %pB and %pB has different DSP version\"), ibfd, obfd);\n+\t      result = FALSE;\n+\t    }\n+\t  break;\n+\n+\tcase Tag_CSKY_FPU_ABI:\n+\t  if (out_attr[i].i != in_attr[i].i\n+\t      && (out_attr[i].i == 0\n+\t\t  || (out_attr[i].i == VAL_CSKY_FPU_ABI_SOFT\n+\t\t      && in_attr[i].i == VAL_CSKY_FPU_ABI_SOFTFP)))\n+\t    {\n+\t      out_attr[i].i = in_attr[i].i;\n+\t    }\n+\t  else if (out_attr[i].i == VAL_CSKY_FPU_ABI_HARD\n+\t\t   && (out_attr[i].i != in_attr[i].i\n+\t\t       && in_attr[i].i != 0))\n+\t    {\n+\t      _bfd_error_handler\n+\t       (_(\"Error: %pB and %pB has different FPU ABI\"), ibfd, obfd);\n+\t       result = FALSE;\n+\t    }\n+\t  break;\n+\n+\tdefault:\n+\t  result =\n+\t    result && _bfd_elf_merge_unknown_attribute_low (ibfd, obfd, i);\n+\t  break;\n+\t}\n+\n+      /* If out_attr was copied from in_attr then it won't have a type yet.  */\n+      if (in_attr[i].type && !out_attr[i].type)\n+\tout_attr[i].type = in_attr[i].type;\n+    }\n+\n+  /* Merge Tag_compatibility attributes and any common GNU ones.  */\n+  if (!_bfd_elf_merge_object_attributes (ibfd, info))\n+    return FALSE;\n+\n+  /* Check for any attributes not known on CSKY.  */\n+  result &= _bfd_elf_merge_unknown_attribute_list (ibfd, obfd);\n+\n+  return result;\n+}\n+\n /* Merge backend specific data from an object file to the output\n    object file when linking.  */\n \n@@ -2813,6 +3007,9 @@ csky_elf_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n   flagword new_flags;\n   csky_arch_for_merge *old_arch = NULL;\n   csky_arch_for_merge *new_arch = NULL;\n+  flagword newest_flag = 0;\n+  const char *sec_name;\n+  obj_attribute *out_attr;\n \n   /* Check if we have the same endianness.  */\n   if (! _bfd_generic_verify_endian_match (ibfd, info))\n@@ -2822,76 +3019,79 @@ csky_elf_merge_private_bfd_data (bfd *ibfd, struct bfd_link_info *info)\n       || bfd_get_flavour (obfd) != bfd_target_elf_flavour)\n     return TRUE;\n \n-  new_flags = elf_elfheader (ibfd)->e_flags;\n-  old_flags = elf_elfheader (obfd)->e_flags;\n+  /* Merge \".csky.attribute\" section.  */\n+  if (!elf32_csky_merge_attributes (ibfd, info))\n+    return FALSE;\n \n   if (! elf_flags_init (obfd))\n     {\n       /* First call, no flags set.  */\n       elf_flags_init (obfd) = TRUE;\n-      elf_elfheader (obfd)->e_flags = new_flags;\n     }\n-  else if (new_flags == old_flags)\n-    /* Do nothing.  */\n-    ;\n-  else if (new_flags == 0 || old_flags == 0)\n-    /* When one flag is 0, assign the other one's flag.  */\n-      elf_elfheader (obfd)->e_flags = new_flags | old_flags;\n-  else\n+\n+  /* Try to merge e_flag.  */\n+  new_flags = elf_elfheader (ibfd)->e_flags;\n+  old_flags = elf_elfheader (obfd)->e_flags;\n+  out_attr = elf_known_obj_attributes_proc (obfd);\n+\n+  /* the flags like\"e , f ,g ...\" , we take collection.  */\n+  newest_flag = (old_flags & (~CSKY_ARCH_MASK))\n+   | (new_flags & (~CSKY_ARCH_MASK));\n+\n+  sec_name = get_elf_backend_data (ibfd)->obj_attrs_section;\n+  if (bfd_get_section_by_name (ibfd, sec_name) == NULL)\n     {\n-      flagword newest_flag = 0;\n+      /* Input BFDs have no \".csky.attribute\" section.  */\n+      new_arch = csky_find_arch_with_eflag (new_flags & CSKY_ARCH_MASK);\n+      old_arch = csky_find_arch_with_name (out_attr[Tag_CSKY_ARCH_NAME].s);\n \n-      if ((new_flags & CSKY_ARCH_MASK) != 0\n-\t  && (old_flags & CSKY_ARCH_MASK) != 0)\n+      if (new_arch != NULL && old_arch != NULL)\n \t{\n-\t  new_arch = csky_find_arch_with_eflag (new_flags & CSKY_ARCH_MASK);\n-\t  old_arch = csky_find_arch_with_eflag (old_flags & CSKY_ARCH_MASK);\n-\t  /* Collect flags like e, f, g.  */\n-\t  newest_flag = (old_flags & (~CSKY_ARCH_MASK))\n-\t\t\t | (new_flags & (~CSKY_ARCH_MASK));\n-\t  if (new_arch != NULL && old_arch != NULL)\n+\t  if (new_arch->class != old_arch->class)\n \t    {\n-\t      if (new_arch->class != old_arch->class)\n+\t      _bfd_error_handler\n+\t\t/* xgettext:c-format */\n+\t\t(_(\"%pB: machine flag conflict with target\"), ibfd);\n+\t      bfd_set_error (bfd_error_wrong_format);\n+\t      return FALSE;\n+\t    }\n+\t  else if (new_arch->class_level != old_arch->class_level)\n+\t    {\n+\t      csky_arch_for_merge *newest_arch =\n+\t\t(new_arch->class_level > old_arch->class_level\n+\t\t ? new_arch : old_arch);\n+\n+\t      if (new_arch->do_warning || old_arch->do_warning)\n \t\t{\n \t\t  _bfd_error_handler\n \t\t    /* xgettext:c-format */\n-\t\t    (_(\"%pB: machine flag conflict with target\"), ibfd);\n+\t\t    (_(\"warning: file %pB's arch flag %s conflicts with \"\n+\t\t       \"target ck%s, using %s\"),\n+\t\t     ibfd, new_arch->name, old_arch->name,\n+\t\t     newest_arch->name);\n \t\t  bfd_set_error (bfd_error_wrong_format);\n-\t\t  return FALSE;\n \t\t}\n-\t      else if (new_arch->class_level != old_arch->class_level)\n-\t\t{\n-\t\t  csky_arch_for_merge *newest_arch\n-\t\t    = (new_arch->class_level > old_arch->class_level\n-\t\t       ? new_arch : old_arch);\n-\t\t  if (new_arch->do_warning || old_arch->do_warning)\n-\t\t    {\n-\t\t      _bfd_error_handler\n-\t\t\t/* xgettext:c-format */\n-\t\t\t(_(\"warning: file %pB's arch flag ck%s conflicts with \"\n-\t\t\t   \"target ck%s, using ck%s\"),\n-\t\t\t ibfd, new_arch->name, old_arch->name,\n-\t\t\t newest_arch->name);\n-\t\t       bfd_set_error (bfd_error_wrong_format);\n-\t\t    }\n \n-\t\t  newest_flag |= newest_arch->arch_eflag;\n-\t\t}\n-\t      else\n-\t\tnewest_flag |= ((new_flags & (CSKY_ARCH_MASK | CSKY_ABI_MASK))\n-\t\t\t\t| (old_flags\n-\t\t\t\t   & (CSKY_ARCH_MASK | CSKY_ABI_MASK)));\n+\t      if (out_attr[Tag_CSKY_ARCH_NAME].s != NULL)\n+\t\tbfd_release (obfd, out_attr[Tag_CSKY_ARCH_NAME].s);\n+\n+\t      out_attr[Tag_CSKY_ARCH_NAME].s =\n+\t\t_bfd_elf_attr_strdup (obfd, newest_arch->name);\n \t    }\n \t  else\n \t    newest_flag |= ((new_flags & (CSKY_ARCH_MASK | CSKY_ABI_MASK))\n \t\t\t    | (old_flags & (CSKY_ARCH_MASK | CSKY_ABI_MASK)));\n \t}\n       else\n-\tnewest_flag |= ((new_flags & (CSKY_ARCH_MASK | CSKY_ABI_MASK))\n-\t\t\t| (old_flags & (CSKY_ARCH_MASK | CSKY_ABI_MASK)));\n-\n-      elf_elfheader (obfd)->e_flags = newest_flag;\n+\t{\n+\t  if (new_arch && new_arch->name != NULL)\n+\t    out_attr[Tag_CSKY_ARCH_NAME].s =\n+\t  _bfd_elf_attr_strdup (obfd, new_arch->name);\n+\t}\n     }\n+\n+  elf_elfheader (obfd)->e_flags = newest_flag;\n+\n   return TRUE;\n }\n \n@@ -5035,6 +5235,47 @@ csky_elf_grok_psinfo (bfd *abfd, Elf_Internal_Note *note)\n   return TRUE;\n }\n \n+/* Determine whether an object attribute tag takes an integer, a\n+   string or both.  */\n+\n+static int\n+elf32_csky_obj_attrs_arg_type (int tag)\n+{\n+  switch (tag)\n+    {\n+    case Tag_compatibility:\n+      return ATTR_TYPE_FLAG_INT_VAL | ATTR_TYPE_FLAG_STR_VAL;\n+    case Tag_CSKY_ARCH_NAME:\n+    case Tag_CSKY_CPU_NAME:\n+    case Tag_CSKY_FPU_NUMBER_MODULE:\n+      return ATTR_TYPE_FLAG_STR_VAL;\n+    case Tag_CSKY_ISA_FLAGS:\n+    case Tag_CSKY_ISA_EXT_FLAGS:\n+    case Tag_CSKY_DSP_VERSION:\n+    case Tag_CSKY_VDSP_VERSION:\n+    case Tag_CSKY_FPU_VERSION:\n+    case Tag_CSKY_FPU_ABI:\n+    case Tag_CSKY_FPU_ROUNDING:\n+    case Tag_CSKY_FPU_HARDFP:\n+    case Tag_CSKY_FPU_Exception:\n+    case Tag_CSKY_FPU_DENORMAL:\n+      return ATTR_TYPE_FLAG_INT_VAL;\n+    default:\n+      break;\n+    }\n+\n+  return (tag & 1) != 0 ? ATTR_TYPE_FLAG_STR_VAL : ATTR_TYPE_FLAG_INT_VAL;\n+}\n+\n+/* Attribute numbers >=64 (mod 128) can be safely ignored.  */\n+\n+static bfd_boolean\n+elf32_csky_obj_attrs_handle_unknown (bfd *abfd ATTRIBUTE_UNUSED,\n+\t\t\t\t     int tag ATTRIBUTE_UNUSED)\n+{\n+  return TRUE;\n+}\n+\n /* End of external entry points for sizing and building linker stubs.  */\n \n /* CPU-related basic API.  */\n@@ -5088,4 +5329,15 @@ csky_elf_grok_psinfo (bfd *abfd, Elf_Internal_Note *note)\n #define elf_backend_grok_prstatus             csky_elf_grok_prstatus\n #define elf_backend_grok_psinfo               csky_elf_grok_psinfo\n \n+/* Attribute sections.  */\n+#undef  elf_backend_obj_attrs_vendor\n+#define elf_backend_obj_attrs_vendor          \"csky\"\n+#undef  elf_backend_obj_attrs_section\n+#define elf_backend_obj_attrs_section         \".csky.attributes\"\n+#undef  elf_backend_obj_attrs_arg_type\n+#define elf_backend_obj_attrs_arg_type        elf32_csky_obj_attrs_arg_type\n+#undef  elf_backend_obj_attrs_section_type\n+#define elf_backend_obj_attrs_section_type    SHT_CSKY_ATTRIBUTES\n+#define elf_backend_obj_attrs_handle_unknown  elf32_csky_obj_attrs_handle_unknown\n+\n #include \"elf32-target.h\""
    },
    {
      "sha": "8a6cadcc1c0975527105e1a4b5db969ab21d5a46",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,12 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* readelf.c (get_csky_section_type_name): New.\n+\t(get_section_type_name): Add handler for CSKY.\n+\t(display_csky_attribute): New.\n+\t(process_arch_specific): Add handler for CSKY.\n+\t* testsuite/binutils-all/strip-3.d: Remove .csky.attributes\n+\tsection.\n+\n 2020-08-27  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n \n \t* readelf.c (get_msp430x_section_type_name): Rename to ..."
    },
    {
      "sha": "f02848e4681707c4a1fee5fbc19070487ed5c7a9",
      "filename": "binutils/readelf.c",
      "status": "modified",
      "additions": 121,
      "deletions": 0,
      "changes": 121,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/readelf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/readelf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/readelf.c?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -4314,6 +4314,16 @@ get_riscv_section_type_name (unsigned int sh_type)\n     }\n }\n \n+static const char *\n+get_csky_section_type_name (unsigned int sh_type)\n+{\n+  switch (sh_type)\n+    {\n+    case SHT_CSKY_ATTRIBUTES:  return \"CSKY_ATTRIBUTES\";\n+    default:  return NULL;\n+    }\n+}\n+\n static const char *\n get_section_type_name (Filedata * filedata, unsigned int sh_type)\n {\n@@ -4397,6 +4407,9 @@ get_section_type_name (Filedata * filedata, unsigned int sh_type)\n \t    case EM_RISCV:\n \t      result = get_riscv_section_type_name (sh_type);\n \t      break;\n+\t    case EM_CSKY:\n+\t      result = get_csky_section_type_name (sh_type);\n+\t      break;\n \t    default:\n \t      result = NULL;\n \t      break;\n@@ -16358,6 +16371,110 @@ display_riscv_attribute (unsigned char *p,\n   return p;\n }\n \n+static unsigned char *\n+display_csky_attribute (unsigned char * p,\n+\t\t\tconst unsigned char * const end)\n+{\n+  unsigned int tag;\n+  unsigned int val;\n+  READ_ULEB (tag, p, end);\n+\n+  if (tag >= Tag_CSKY_MAX)\n+    {\n+      return display_tag_value (-1, p, end);\n+    }\n+\n+  switch (tag)\n+    {\n+    case Tag_CSKY_ARCH_NAME:\n+      printf (\"  Tag_CSKY_ARCH_NAME:\\t\\t\");\n+      return display_tag_value (-1, p, end);\n+    case Tag_CSKY_CPU_NAME:\n+      printf (\"  Tag_CSKY_CPU_NAME:\\t\\t\");\n+      return display_tag_value (-1, p, end);\n+\n+    case Tag_CSKY_ISA_FLAGS:\n+      printf (\"  Tag_CSKY_ISA_FLAGS:\\t\\t\");\n+      return display_tag_value (0, p, end);\n+    case Tag_CSKY_ISA_EXT_FLAGS:\n+      printf (\"  Tag_CSKY_ISA_EXT_FLAGS:\\t\");\n+      return display_tag_value (0, p, end);\n+\n+    case Tag_CSKY_DSP_VERSION:\n+      printf (\"  Tag_CSKY_DSP_VERSION:\\t\\t\");\n+      READ_ULEB (val, p, end);\n+      if (val == VAL_CSKY_DSP_VERSION_EXTENSION)\n+\tprintf (\"DSP Extension\\n\");\n+      else if (val == VAL_CSKY_DSP_VERSION_2)\n+\tprintf (\"DSP 2.0\\n\");\n+      break;\n+\n+    case Tag_CSKY_VDSP_VERSION:\n+      printf (\"  Tag_CSKY_VDSP_VERSION:\\t\");\n+      READ_ULEB (val, p, end);\n+      printf (\"VDSP Version %d\\n\", val);\n+      break;\n+\n+    case Tag_CSKY_FPU_VERSION:\n+      printf (\"  Tag_CSKY_FPU_VERSION:\\t\\t\");\n+      READ_ULEB (val, p, end);\n+      if (val == VAL_CSKY_FPU_VERSION_1)\n+\tprintf (\"ABIV1 FPU Version 1\\n\");\n+      else if (val == VAL_CSKY_FPU_VERSION_2)\n+\tprintf (\"FPU Version 2\\n\");\n+      break;\n+\n+    case Tag_CSKY_FPU_ABI:\n+      printf (\"  Tag_CSKY_FPU_ABI:\\t\\t\");\n+      READ_ULEB (val, p, end);\n+      if (val == VAL_CSKY_FPU_ABI_HARD)\n+\tprintf (\"Hard\\n\");\n+      else if (val == VAL_CSKY_FPU_ABI_SOFTFP)\n+\tprintf (\"SoftFP\\n\");\n+      else if (val == VAL_CSKY_FPU_ABI_SOFT)\n+\tprintf (\"Soft\\n\");\n+      break;\n+    case Tag_CSKY_FPU_ROUNDING:\n+      READ_ULEB (val, p, end);\n+      if (val == 1) {\n+\tprintf (\"  Tag_CSKY_FPU_ROUNDING:\\t\");\n+\tprintf (\"Needed\\n\");\n+      }\n+      break;\n+    case Tag_CSKY_FPU_DENORMAL:\n+      READ_ULEB (val, p, end);\n+      if (val == 1) {\n+\tprintf (\"  Tag_CSKY_FPU_DENORMAL:\\t\");\n+\tprintf (\"Needed\\n\");\n+      }\n+      break;\n+    case Tag_CSKY_FPU_Exception:\n+      READ_ULEB (val, p, end);\n+      if (val == 1) {\n+\tprintf (\"  Tag_CSKY_FPU_Exception:\\t\");\n+\tprintf (\"Needed\\n\");\n+      }\n+      break;\n+    case Tag_CSKY_FPU_NUMBER_MODULE:\n+      printf (\"  Tag_CSKY_FPU_NUMBER_MODULE:\\t\");\n+      return display_tag_value (-1, p, end);\n+    case Tag_CSKY_FPU_HARDFP:\n+      printf (\"  Tag_CSKY_FPU_HARDFP:\\t\\t\");\n+      READ_ULEB (val, p, end);\n+      if (val & VAL_CSKY_FPU_HARDFP_HALF)\n+\tprintf (\" Half\");\n+      if (val & VAL_CSKY_FPU_HARDFP_SINGLE)\n+\tprintf (\" Single\");\n+      if (val & VAL_CSKY_FPU_HARDFP_DOUBLE)\n+\tprintf (\" Double\");\n+      printf (\"\\n\");\n+      break;\n+    default:\n+      return display_tag_value (tag, p, end);\n+     }\n+  return p;\n+}\n+\n static bfd_boolean\n process_attributes (Filedata * filedata,\n \t\t    const char * public_name,\n@@ -20146,6 +20263,10 @@ process_arch_specific (Filedata * filedata)\n \t\t\t\t display_tic6x_attribute,\n \t\t\t\t display_generic_attribute);\n \n+    case EM_CSKY:\n+      return process_attributes (filedata, \"csky\", SHT_CSKY_ATTRIBUTES,\n+\t\t\t\t display_csky_attribute, NULL);\n+\n     default:\n       return process_attributes (filedata, \"gnu\", SHT_GNU_ATTRIBUTES,\n \t\t\t\t display_public_gnu_attributes,"
    },
    {
      "sha": "cb2f78eef5cf93c8588ccddb712f98663f2f57a4",
      "filename": "binutils/testsuite/binutils-all/strip-3.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/testsuite/binutils-all/strip-3.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/binutils/testsuite/binutils-all/strip-3.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/strip-3.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,6 +1,6 @@\n #PROG: strip\n #source: empty.s\n-#strip: -R .text -R .data -R .bss -R .ARM.attributes -R .reginfo -R .gnu.attributes -R .MIPS.abiflags -R .pdr -R .xtensa.info -R .ARC.attributes -R .note.gnu.property -R .riscv.attributes\n+#strip: -R .text -R .data -R .bss -R .ARM.attributes -R .reginfo -R .gnu.attributes -R .MIPS.abiflags -R .pdr -R .xtensa.info -R .ARC.attributes -R .note.gnu.property -R .riscv.attributes -R .csky.attributes\n #readelf: -S --wide\n #name: strip empty file\n #target: *-*-linux* *-*-gnu* arm*-*-uclinuxfdpiceabi"
    },
    {
      "sha": "e65f69b776a40f585b50bbd1c11f30bf681f675f",
      "filename": "elfcpp/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/elfcpp/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/elfcpp/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/elfcpp/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,7 @@\n+2020-08-26  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+        * elfcpp.h (enum SHT): New enum SHT_CSKY_ATTRIBUTES.\n+\n 2020-07-04  Nick Clifton  <nickc@redhat.com>\n \n \tBinutils 2.35 branch created."
    },
    {
      "sha": "65d803c00e270327bfa992b0abe1e163c6765bb4",
      "filename": "elfcpp/elfcpp.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/elfcpp/elfcpp.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/elfcpp/elfcpp.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/elfcpp/elfcpp.h?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -413,6 +413,10 @@ enum SHT\n   // AARCH64-specific section type.\n   SHT_AARCH64_ATTRIBUTES = 0x70000003,\n \n+  // CSKY-specific section types.\n+  // Object file compatibility attributes.\n+  SHT_CSKY_ATTRIBUTES = 0x70000001,\n+\n   // Link editor is to sort the entries in this section based on the\n   // address specified in the associated symbol table entry.\n   SHT_ORDERED = 0x7fffffff"
    },
    {
      "sha": "8d3a92f11386731537cb79593685ca7cf38db1ee",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,32 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* gas/config/tc-csky.c (md_begin): Set attributes.\n+\t(isa_flag): Change type to unsigned 64 bits.\n+\t(struct csky_cpu_info): Likewise.\n+\t(struct csky_macro_info): Likewise.\n+\t(set_csky_attribute): New.\n+\t* testsuite/gas/csky/802j.d: Ignore .csky.attributes section.\n+\t* testsuite/gas/csky/all.d: Likewise.\n+\t* testsuite/gas/csky/bsr1.d: Likewise.\n+\t* testsuite/gas/csky/csky_vdsp.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_all.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_ck803r2.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_ck860.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_dsp.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_elrw.d: Likewise.\n+\t* testsuite/gas/csky/cskyv2_float.d: Likewise.\n+\t* testsuite/gas/csky/enhance_dsp.d: Likewise.\n+\t* testsuite/gas/csky/java.d: Likewise.\n+\t* testsuite/gas/csky/v1_float.d: Likewise.\n+\t* testsuite/gas/csky/v2_float_part1.d: Likewise.\n+\t* testsuite/gas/csky/v2_float_part2.d: Likewise.\n+\t* testsuite/gas/csky/v2_tls_gd.d: Likewise.\n+\t* testsuite/gas/csky/v2_tls_ie.d: Likewise.\n+\t* testsuite/gas/csky/v2_tls_ld.d: Likewise.\n+\t* testsuite/gas/csky/v2_tls_le.d: Likewise.\n+\t* testsuite/gas/elf/elf.exp: Add handler for CSKY.\n+\t* testsuite/gas/elf/section2.e-csky: New.\n+\n 2020-08-27  Alan Modra  <amodra@gmail.com>\n \n \tPR 26467"
    },
    {
      "sha": "9f2975e5f685e718930fdcc924535c714f4d05a0",
      "filename": "gas/config/tc-csky.c",
      "status": "modified",
      "additions": 85,
      "deletions": 5,
      "changes": 90,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/config/tc-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/config/tc-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-csky.c?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -212,7 +212,7 @@ enum\n unsigned int mach_flag = 0;\n unsigned int arch_flag = 0;\n unsigned int other_flag = 0;\n-unsigned int isa_flag = 0;\n+BFD_HOST_U_64_BIT isa_flag = 0;\n unsigned int dsp_flag = 0;\n \n typedef struct stack_size_entry\n@@ -233,7 +233,7 @@ struct csky_cpu_info\n {\n   const char *name;\n   unsigned int mach_flag;\n-  unsigned int isa_flag;\n+  BFD_HOST_U_64_BIT isa_flag;\n };\n \n typedef enum\n@@ -249,7 +249,7 @@ struct csky_macro_info\n   const char *name;\n   /* How many operands : if operands == 5, all of 1,2,3,4 are ok.  */\n   long oprnd_num;\n-  int isa_flag;\n+  BFD_HOST_U_64_BIT isa_flag;\n   /* Do the work.  */\n   void (*handle_func)(void);\n };\n@@ -1186,6 +1186,78 @@ md_show_usage (FILE *fp)\n   -mvdsp\t\t\tenable vector DSP instructions\\n\"));\n }\n \n+static void set_csky_attribute (void)\n+{\n+  if (mach_flag & CSKY_ARCH_DSP)\n+    {\n+      if (dsp_flag & CSKY_DSP_FLAG_V2)\n+\t{\n+\t  /* Set DSPV2.  */\n+\t  bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t    Tag_CSKY_DSP_VERSION,\n+\t\t\t\t    VAL_CSKY_DSP_VERSION_2);\n+\t}\n+      else if (isa_flag & CSKY_ISA_DSP)\n+\t{\n+\t  /* Set DSP extension.  */\n+\t  bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t    Tag_CSKY_DSP_VERSION,\n+\t\t\t\t    VAL_CSKY_DSP_VERSION_EXTENSION);\n+\t}\n+      /* Set VDSP attribute.  */\n+      if (isa_flag & CSKY_ISA_VDSP)\n+\tbfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t  Tag_CSKY_VDSP_VERSION,\n+\t\t\t\t  VAL_CSKY_VDSP_VERSION_1);\n+\n+      else if (isa_flag & CSKY_ISA_VDSP_2)\n+\tbfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t  Tag_CSKY_VDSP_VERSION,\n+\t\t\t\t  VAL_CSKY_VDSP_VERSION_2);\n+\n+    }\n+\n+  if (mach_flag & CSKY_ARCH_FLOAT)\n+    {\n+      unsigned int val = VAL_CSKY_FPU_HARDFP_SINGLE;\n+      if (IS_CSKY_ARCH_V1 (mach_flag)) {\n+\tbfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t  Tag_CSKY_FPU_VERSION,\n+\t\t\t\t  VAL_CSKY_FPU_VERSION_1);\n+      }\n+      else\n+\t{\n+\t  if (isa_flag & CSKY_ISA_FLOAT_3E4)\n+\t    {\n+\t      bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t\tTag_CSKY_FPU_VERSION,\n+\t\t\t\t\tVAL_CSKY_FPU_VERSION_2);\n+\t      val |= VAL_CSKY_FPU_HARDFP_DOUBLE;\n+\t    }\n+\t  else\n+\t    {\n+\t      bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t\tTag_CSKY_FPU_VERSION,\n+\t\t\t\t\tVAL_CSKY_FPU_VERSION_2);\n+\t    }\n+\n+\t  bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t    Tag_CSKY_FPU_HARDFP,\n+\t\t\t\t    val);\n+\t  bfd_elf_add_obj_attr_string (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t    Tag_CSKY_FPU_NUMBER_MODULE,\n+\t\t\t\t    \"IEEE 754\");\n+\t}\n+    }\n+\n+\n+  bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t    Tag_CSKY_ISA_FLAGS, isa_flag);\n+\n+  bfd_elf_add_obj_attr_int (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t    Tag_CSKY_ISA_EXT_FLAGS, (isa_flag >> 32));\n+}\n+\n /* Target-specific initialization and option handling.  */\n \n void\n@@ -1263,6 +1335,8 @@ md_begin (void)\n   for (p_arch = csky_archs; p_arch->arch_flag != 0; p_arch++)\n     if ((mach_flag & CSKY_ARCH_MASK) == (p_arch->arch_flag & CSKY_ARCH_MASK))\n       {\n+\tbfd_elf_add_obj_attr_string (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t     Tag_CSKY_ARCH_NAME, p_arch->name);\n \tbfd_mach_flag =  p_arch->bfd_mach_flag;\n \tbreak;\n       }\n@@ -1271,6 +1345,8 @@ md_begin (void)\n   for (p_cpu = csky_cpus; p_cpu->mach_flag != 0; p_cpu++)\n     if ((mach_flag & CPU_ARCH_MASK) == p_cpu->mach_flag)\n       {\n+\tbfd_elf_add_obj_attr_string (stdoutput, OBJ_ATTR_PROC,\n+\t\t\t\t     Tag_CSKY_CPU_NAME, p_cpu->name);\n \tisa_flag |= p_cpu->isa_flag;\n \tbreak;\n       }\n@@ -1298,6 +1374,7 @@ md_begin (void)\n \t    {\n \t      /* In 803, dspv1 is conflict with dspv2. We keep dspv2.  */\n \t      as_warn (\"option -mdsp conflicts with -medsp, only enabling -medsp\");\n+        dsp_flag &= ~CSKY_DSP_FLAG_V1;\n \t      isa_flag &= ~(CSKY_ISA_MAC_DSP | CSKY_ISA_DSP);\n \t      isa_flag |= CSKY_ISA_DSP_ENHANCE;\n \t    }\n@@ -1306,6 +1383,7 @@ md_begin (void)\n \t{\n \t  if (dsp_flag & CSKY_DSP_FLAG_V2)\n \t    {\n+\t      dsp_flag &= ~CSKY_DSP_FLAG_V2;\n \t      isa_flag &= ~CSKY_ISA_DSP_ENHANCE;\n \t      as_warn (\"-medsp option is only supported by ck803s, ignoring -medsp\");\n \t    }\n@@ -1370,7 +1448,7 @@ md_begin (void)\n       else\n \tdo_intr_stack = 1;\n     }\n-  /* TODO: add isa_flag(SIMP/CACHE/APS).  */\n+  /* Add isa_flag(SIMP/CACHE/APS).  */\n   isa_flag |= (mach_flag & CSKY_ARCH_MAC) ? CSKY_ISA_MAC : 0;\n   isa_flag |= (mach_flag & CSKY_ARCH_MP) ? CSKY_ISA_MP : 0;\n   isa_flag |= (mach_flag & CSKY_ARCH_CP) ? CSKY_ISA_CP : 0;\n@@ -1418,9 +1496,11 @@ md_begin (void)\n     str_hash_insert (csky_macros_hash,\n \t\t     v2_lrw_macro_opcode.name, &v2_lrw_macro_opcode, 0);\n   /* Set e_flag to ELF Head.  */\n-  bfd_set_private_flags (stdoutput, mach_flag);\n+  bfd_set_private_flags (stdoutput, mach_flag & ~(0xffff));\n   /* Set bfd_mach to bfd backend data.  */\n   bfd_set_arch_mach (stdoutput, bfd_arch_csky, bfd_mach_flag);\n+\n+  set_csky_attribute ();\n }\n \n /* The C-SKY assembler emits mapping symbols $t and $d to mark the"
    },
    {
      "sha": "c75666b20cdbef4d1bbae7e4eb6c3f571705cd6b",
      "filename": "gas/testsuite/gas/csky/802j.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/802j.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/802j.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/802j.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -11,3 +11,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*1460\\s*nie\n \\s*[0-9a-f]*:\\s*1461\\s*nir\n \\s*[0-9a-f]*:\\s*3ae0\\s*jmpix\\s*r2,\\s*16.*\n+#..."
    },
    {
      "sha": "606bcc0d3c6a4d64429b4dd75206961114fd0c8d",
      "filename": "gas/testsuite/gas/csky/all.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/all.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/all.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/all.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -148,3 +148,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*1e37\\s*or\\s*r7, r7, r3\n \\s*[0-9a-f]*:\\s*1715\\s*xor\\s*r5, r5, r1\n \\s*[0-9a-f]*:\\s*1726\\s*xor\\s*r6, r6, r2\n+#..."
    },
    {
      "sha": "69bef8868793584e16bdb1c4eb5d2a39e39ff274",
      "filename": "gas/testsuite/gas/csky/bsr1.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/bsr1.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/bsr1.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/bsr1.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -10,3 +10,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]:\\s*f7fe\\s*br\\s*0x0\\s*\\/\\/\\s*0\\s*\\<lable*\\>\n \\s*[0-9a-f]:\\s*e7fd\\s*bt\\s*0x0\\s*\\/\\/\\s*0\\s*\\<lable*\\>\n \\s*[0-9a-f]:\\s*effc\\s*bf\\s*0x0\\s*\\/\\/\\s*0\\s*\\<lable*\\>\n+#..."
    },
    {
      "sha": "3af441315b93706dd0ef052f5a835bc8ebd5906f",
      "filename": "gas/testsuite/gas/csky/csky_vdsp.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/csky_vdsp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/csky_vdsp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/csky_vdsp.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -362,3 +362,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*f8830fa2\\s*vicl\\.8\\s*vr2,\\s*vr3,\\s*vr4\n \\s*[0-9a-f]*:\\s*f8930fa2\\s*vicl\\.16\\s*vr2,\\s*vr3,\\s*vr4\n \\s*[0-9a-f]*:\\s*fa830fa2\\s*vicl\\.32\\s*vr2,\\s*vr3,\\s*vr4\n+#..."
    },
    {
      "sha": "bb688ec97d4ca20ac63c832b2a21d8b374142303",
      "filename": "gas/testsuite/gas/csky/cskyv2_all.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_all.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_all.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_all.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -323,3 +323,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*cc480000\\s*lrs\\.w\\s*r2,\\s*\\[0x0\\].*\n \\s*[0-9a-f]*:\\s*ec430002\\s*ori\\s*r2,\\s*r3,\\s*2\n \\s*[0-9a-f]*:\\s*ec43000a\\s*ori\\s*r2,\\s*r3,\\s*10\n+#..."
    },
    {
      "sha": "8ef9e905c093d3a8159a9fe6603098beff8abc3f",
      "filename": "gas/testsuite/gas/csky/cskyv2_ck803r2.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_ck803r2.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_ck803r2.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_ck803r2.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -10,3 +10,4 @@ Disassembly of section \\.text:\n #...\n \\s*[0-9a-f]*:\\s*6c03\\s*mov\\s*r0,\\s*r0\n \\s*[0-9a-f]*:\\s*e820fffd\\s*bnezad\\s*r0,\\s*0.*\n+#..."
    },
    {
      "sha": "639bdbf8cd934ae191723261fd04f811aba3fa50",
      "filename": "gas/testsuite/gas/csky/cskyv2_ck860.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_ck860.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_ck860.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_ck860.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -38,4 +38,5 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*c2000420\\s*sync.s\n \\s*[0-9a-f]*:\\s*c0000420\\s*sync\n \\s*[0-9a-f]*:\\s*d8437000\\s*ldex.w\\s*r2,\\s*\\(r3,\\s*0x0\\)\n-\\s*[0-9a-f]*:\\s*dc437000\\s*stex.w\\s*r2,\\s*\\(r3,\\s*0x0\\)\n\\ No newline at end of file\n+\\s*[0-9a-f]*:\\s*dc437000\\s*stex.w\\s*r2,\\s*\\(r3,\\s*0x0\\)\n+#..."
    },
    {
      "sha": "3bc52fee8c3355c73d557db17754391f6146b87f",
      "filename": "gas/testsuite/gas/csky/cskyv2_dsp.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_dsp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_dsp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_dsp.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,4 +1,4 @@\n-# name: csky - all\n+# name: csky - dsp\n #as: -mcpu=ck810e -W\n #objdump: -D\n \n@@ -16,3 +16,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*c4319080\\s*mulshs\\s*r17,\\s*r1\n \\s*[0-9a-f]*:\\s*c6ec9440\\s*mulswa\\s*r12,\\s*r23\n \\s*[0-9a-f]*:\\s*c4a39480\\s*mulsws\\s*r3,\\s*r5\n+#..."
    },
    {
      "sha": "d0acefbfce49a025ced6cb32bf4f67950e486aba",
      "filename": "gas/testsuite/gas/csky/cskyv2_elrw.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_elrw.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_elrw.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_elrw.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -8,3 +8,4 @@\n #...\n \\s*[0-9a-f]*:\\s*c0004020\\s*rte\n \\s*[0-9a-f]*:\\s*00001234\\s*\\.long\\s*0x00001234\n+#..."
    },
    {
      "sha": "b1ed9cb72e37b0134c9f524dfb9966802c93c1ed",
      "filename": "gas/testsuite/gas/csky/cskyv2_float.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_float.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/cskyv2_float.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_float.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -57,3 +57,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*f4041aab\\s*fuitod\\s*fr11,\\s*fr4\n \\s*[0-9a-f]*:\\s*f4081ac2\\s*fdtos\\s*fr2,\\s*fr8\n \\s*[0-9a-f]*:\\s*f40b1ae5\\s*fstod\\s*fr5,\\s*fr11\n+#..."
    },
    {
      "sha": "17b33eaecb01c72ea63b73708403ac90d3a25f47",
      "filename": "gas/testsuite/gas/csky/enhance_dsp.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/enhance_dsp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/enhance_dsp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/enhance_dsp.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -216,3 +216,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*f8838ce2\\s*mulsca\\.s16\\.e\\s*r2,\\s*r3,\\s*r4\n \\s*[0-9a-f]*:\\s*f8838ce2\\s*mulsca\\.s16\\.e\\s*r2,\\s*r3,\\s*r4\n \\s*[0-9a-f]*:\\s*f8838442\\s*mula\\.32\\.l\\s*r2,\\s*r3,\\s*r4\n+#..."
    },
    {
      "sha": "c0791bff037fb5418025d3fc52c4806db8c3a700",
      "filename": "gas/testsuite/gas/csky/java.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/java.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/java.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/java.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -10,3 +10,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]:\\s*14ae\\s*bpop\\.w\\s*r3\n \\s*[0-9a-f]:\\s*14ec\\s*bpush\\.h\\s*r3\n \\s*[0-9a-f]:\\s*14ee\\s*bpush\\.w\\s*r3\n+#..."
    },
    {
      "sha": "4c08897706b838601113a0467e95e924a2e7bb83",
      "filename": "gas/testsuite/gas/csky/v1_float.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v1_float.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v1_float.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v1_float.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -220,3 +220,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*ffe08002\\s*\\.long\\s*0xffe08002\n \\s*[0-9a-f]*:\\s*ffe20002\\s*\\.long\\s*0xffe20002\n \\s*[0-9a-f]*:\\s*ffe18002\\s*\\.long\\s*0xffe18002\n+#..."
    },
    {
      "sha": "c3f5d56e7b6a86aa046cb2a438e4cf0a8c82cc32",
      "filename": "gas/testsuite/gas/csky/v2_float_part1.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_float_part1.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_float_part1.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_float_part1.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -52,3 +52,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*f4830202\\s*fmuls\\s*fr2,\\s*fr3,\\s*fr4\n \\s*[0-9a-f]*:\\s*f4830022\\s*fsubs\\s*fr2,\\s*fr3,\\s*fr4\n \\s*[0-9a-f]*:\\s*f4830002\\s*fadds\\s*fr2,\\s*fr3,\\s*fr4\n+#..."
    },
    {
      "sha": "78fa37bc0389868dc61b766e2284dcb0e7b0ac24",
      "filename": "gas/testsuite/gas/csky/v2_float_part2.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_float_part2.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_float_part2.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_float_part2.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -18,3 +18,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*4048f5c3\\s*\\.long\\s*0x4048f5c3\n \\s*[0-9a-f]*:\\s*51eb851f\\s*\\.long\\s*0x51eb851f\n \\s*[0-9a-f]*:\\s*40091eb8\\s*\\.long\\s*0x40091eb8\n+#..."
    },
    {
      "sha": "6680d6e0321c165b6e4d87d1de63d7522d08afed",
      "filename": "gas/testsuite/gas/csky/v2_tls_gd.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_gd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_gd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_tls_gd.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -8,3 +8,4 @@ Disassembly of section \\.text:\n #...\n \\s*[0-9a-f]*:\\s*R_CKCORE_TLS_GD32\\s*xxx.*\n \\s*[0-9a-f]*:\\s*R_CKCORE_PLT32\\s*__tls_get_addr\n+#..."
    },
    {
      "sha": "d55d1cebffc5d57f700dc55a03a905288e2c15c8",
      "filename": "gas/testsuite/gas/csky/v2_tls_ie.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_ie.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_ie.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_tls_ie.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -7,3 +7,4 @@\n Disassembly of section \\.text:\n #...\n \\s*[0-9a-f]*:\\s*R_CKCORE_TLS_IE32\\s*xxx.*\n+#..."
    },
    {
      "sha": "4843a4198b4fb1ebc581216306ea4fa7acbc591a",
      "filename": "gas/testsuite/gas/csky/v2_tls_ld.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_ld.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_ld.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_tls_ld.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -9,3 +9,4 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*R_CKCORE_TLS_LDM32\\s*xxx.*\n \\s*[0-9a-f]*:\\s*R_CKCORE_PLT32\\s*__tls_get_addr\n \\s*[0-9a-f]*:\\s*R_CKCORE_TLS_LDO32\\s*xxx\n+#..."
    },
    {
      "sha": "e4ab53637fe1b22eb3be950acb176de23ac1a483",
      "filename": "gas/testsuite/gas/csky/v2_tls_le.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_le.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/csky/v2_tls_le.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/v2_tls_le.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,4 +1,4 @@\n-# name: csky - v2 TLS IE\n+# name: csky - v2 TLS LE\n #as: -mcpu=ck810 -W\n #objdump: -Dr\n \n@@ -7,3 +7,4 @@\n Disassembly of section \\.text:\n #...\n \\s*[0-9a-f]*:\\s*R_CKCORE_TLS_LE32\\s*xxx\n+#..."
    },
    {
      "sha": "8520421ba308ad0838bd45fd064a643b904c5e6f",
      "filename": "gas/testsuite/gas/elf/elf.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/elf/elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/elf/elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/elf.exp?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -65,6 +65,9 @@ if { [is_elf_format] } then {\n     if {[istarget \"avr*-*-*\"]} {\n \tset dump_opts {{as -mno-link-relax}}\n     }\n+    if {[istarget \"csky*-*-*\"]} {\n+\tset target_machine -csky\n+    }\n     if {[istarget \"m32r*-*-*\"]} then {\n \tset target_machine -m32r\n     }"
    },
    {
      "sha": "115bae2173da02d4ffb58e61fb1f17fa8bef570c",
      "filename": "gas/testsuite/gas/elf/section2.e-csky",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/elf/section2.e-csky",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/gas/testsuite/gas/elf/section2.e-csky",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/section2.e-csky?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -0,0 +1,9 @@\n+\n+Symbol table '.symtab' contains 6 entries:\n+ +Num: +Value +Size +Type +Bind +Vis +Ndx +Name\n+ +0: 0+0 +0 +NOTYPE +LOCAL +DEFAULT +UND \n+ +1: 0+0 +0 +SECTION +LOCAL +DEFAULT +1 \n+ +2: 0+0 +0 +SECTION +LOCAL +DEFAULT +2 \n+ +3: 0+0 +0 +SECTION +LOCAL +DEFAULT +3 \n+ +4: 0+0 +0 +SECTION +LOCAL +DEFAULT +4 \n+ +5: 0+0 +0 +SECTION +LOCAL +DEFAULT +5 "
    },
    {
      "sha": "4da03f8cd9bbe76e4529b32f48c82bc46ae597ab",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 54,
      "deletions": 0,
      "changes": 54,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,57 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* elf/csky.h (SHT_CSKY_ATTRIBUTES): Define.\n+\t(Tag_CSKY_ARCH_NAME): New enum constant.\n+\t(Tag_CSKY_CPU_NAME): Likewise.\n+\t(Tag_CSKY_ISA_FLAGS): Likewise.\n+\t(Tag_CSKY_DSP_VERSION): Likewise.\n+\t(Tag_CSKY_VDSP_VERSION): Likewise.\n+\t(Tag_CSKY_FPU_VERSION): Likewise.\n+\t(Tag_CSKY_FPU_ABI): Likewise.\n+\t(Tag_CSKY_FPU_ROUNDING): Likewise.\n+\t(Tag_CSKY_FPU_DENORMAL): Likewise.\n+\t(Tag_CSKY_FPU_Exception): Likewise.\n+\t(Tag_CSKY_FPU_NUMBER_MODULE): Likewise.\n+\t(Tag_CSKY_FPU_HARDFP): Likewise.\n+\t(Tag_CSKY_MAX): Likewise.\n+\t(VAL_CSKY_DSP_VERSION_EXTENSION): Likewise.\n+\t(VAL_CSKY_DSP_VERSION_2): Likewise.\n+\t(VAL_CSKY_VDSP_VERSION_1): Likewise.\n+\t(VAL_CSKY_VDSP_VERSION_2): Likewise.\n+\t(VAL_CSKY_FPU_ABI_SOFT): Likewise.\n+\t(VAL_CSKY_FPU_ABI_SOFTFP): Likewise.\n+\t(VAL_CSKY_FPU_ABI_HARD): Likewise.\n+\t(VAL_CSKY_FPU_HARDFP_HALF): Likewise.\n+\t(VAL_CSKY_FPU_HARDFP_SINGLE): Likewise.\n+\t(VAL_CSKY_FPU_HARDFP_DOUBLE): Likewise.\n+\t* opcode/csky.h (CSKY_ISA_VDSP_V2): Define.\n+\tCSKYV1_ISA_E1: Change to long constant type.\n+\tCSKYV2_ISA_E1: Likewise.\n+\tCSKYV2_ISA_1E2: Likewise.\n+\tCSKYV2_ISA_2E3: Likewise.\n+\tCSKYV2_ISA_3E7: Likewise.\n+\tCSKYV2_ISA_7E10: Likewise.\n+\tCSKYV2_ISA_3E3R1: Likewise.\n+\tCSKYV2_ISA_3E3R2: Likewise.\n+\tCSKYV2_ISA_10E60: Likewise.\n+\tCSKY_ISA_TRUST: Likewise.\n+\tCSKY_ISA_CACHE: Likewise.\n+\tCSKY_ISA_NVIC: Likewise.\n+\tCSKY_ISA_CP: Likewise.\n+\tCSKY_ISA_MP: Likewise.\n+\tCSKY_ISA_MP_1E2: Likewise.\n+\tCSKY_ISA_JAVA: Likewise.\n+\tCSKY_ISA_MAC: Likewise.\n+\tCSKY_ISA_MAC_DSP: Likewise.\n+\tCSKY_ISA_DSP: Likewise.\n+\tCSKY_ISA_DSP_1E2: Likewise.\n+\tCSKY_ISA_DSP_ENHANCE: Likewise.\n+\tCSKY_ISA_FLOAT_E1: Likewise.\n+\tCSKY_ISA_FLOAT_1E2: Likewise.\n+\tCSKY_ISA_FLOAT_1E3: Likewise.\n+\tCSKY_ISA_FLOAT_3E4: Likewise.\n+\tCSKY_ISA_VDSP: Likewise.\n+\n 2020-08-27  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-api.h (ctf_errwarning_next): New err parameter."
    },
    {
      "sha": "cbce6c0173ed7ebb90308f6a94251fa04dfdd7aa",
      "filename": "include/elf/csky.h",
      "status": "modified",
      "additions": 75,
      "deletions": 0,
      "changes": 75,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/elf/csky.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/elf/csky.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/elf/csky.h?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -94,4 +94,79 @@ START_RELOC_NUMBERS (elf_csky_reloc_type)\n     RELOC_NUMBER (R_CKCORE_PCREL_BLOOP_IMM12BY4, 64)\n END_RELOC_NUMBERS (R_CKCORE_MAX)\n \n+/* Additional section types.  */\n+#define SHT_CSKY_ATTRIBUTES       0x70000001 /* Section holds attributes.  */\n+\n+/* Object attribute tags.  */\n+enum\n+{\n+  /* 0-3 are generic. */\n+  /* Arch name for this object file.  */\n+  Tag_CSKY_ARCH_NAME = 4,\n+  Tag_CSKY_CPU_NAME = 5,\n+\n+  /* ISA flags for this object file.  */\n+  Tag_CSKY_ISA_FLAGS,\n+  Tag_CSKY_ISA_EXT_FLAGS,\n+\n+  /* CSKY DSP version used by this object file.  */\n+  Tag_CSKY_DSP_VERSION,\n+\n+  /* CSKY VDSP version used by this object file.  */\n+  Tag_CSKY_VDSP_VERSION,\n+\n+  /* CSKY FPU version used by this object file.  */\n+  Tag_CSKY_FPU_VERSION = 0x10,\n+  /* FPU ABI.  params: Soft GR/Hard GR/Hard FR. */\n+  Tag_CSKY_FPU_ABI,\n+  /* Rounding Support.  */\n+  Tag_CSKY_FPU_ROUNDING,\n+  /* Denormal Support.  */\n+  Tag_CSKY_FPU_DENORMAL,\n+  /* Exeception Support.  */\n+  Tag_CSKY_FPU_Exception,\n+  /* Number Module Support(\"IEEE 754\").  */\n+  Tag_CSKY_FPU_NUMBER_MODULE,\n+  /* Half/Single/Double.  */\n+  Tag_CSKY_FPU_HARDFP,\n+\n+  Tag_CSKY_MAX,\n+};\n+\n+/* Object attribute values.  */\n+enum\n+{\n+  /* Values defined for Tag_CSKY_DSP_VERSION.  */\n+  VAL_CSKY_DSP_VERSION_EXTENSION = 1,\t/* hi-lo DSP extension.  */\n+  VAL_CSKY_DSP_VERSION_2 = 2,\t\t/* CK803s EDSP.  */\n+};\n+\n+enum\n+{\n+  /* Values defined for Tag_CSKY_VDSP_VERSION.  */\n+  VAL_CSKY_VDSP_VERSION_1 = 1,\t/* VDSP version 1.  */\n+  VAL_CSKY_VDSP_VERSION_2\t/* VDSP version 1.  */\n+};\n+\n+enum\n+{\n+  /* Values defined for Tag_CSKY_FPU_VERSION.  */\n+  VAL_CSKY_FPU_VERSION_1 = 1,\t/* ABIV1 FPU.  */\n+  VAL_CSKY_FPU_VERSION_2,\t/* ABIV2 FPU.  */\n+};\n+\n+enum\n+{\n+  VAL_CSKY_FPU_ABI_SOFT = 1,\n+  VAL_CSKY_FPU_ABI_SOFTFP,\n+  VAL_CSKY_FPU_ABI_HARD,\n+};\n+\n+enum\n+{\n+  VAL_CSKY_FPU_HARDFP_HALF = 1,\n+  VAL_CSKY_FPU_HARDFP_SINGLE = 2,\n+  VAL_CSKY_FPU_HARDFP_DOUBLE = 4,\n+};\n+\n #endif /* _ELF_CSKY_H  */"
    },
    {
      "sha": "493e822a5a30cae26cd8f6ec49b67990b38cfe6b",
      "filename": "include/opcode/csky.h",
      "status": "modified",
      "additions": 28,
      "deletions": 27,
      "changes": 55,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/opcode/csky.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/include/opcode/csky.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/csky.h?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -22,41 +22,42 @@\n #include \"dis-asm.h\"\n \n /* The following bitmasks control instruction set architecture.  */\n-#define CSKYV1_ISA_E1       (1 << 0)\n-#define CSKYV2_ISA_E1       (1 << 1)\n-#define CSKYV2_ISA_1E2      (1 << 2)\n-#define CSKYV2_ISA_2E3      (1 << 3)\n-#define CSKYV2_ISA_3E7      (1 << 4)\n-#define CSKYV2_ISA_7E10     (1 << 5)\n-#define CSKYV2_ISA_3E3R1    (1 << 6)\n-#define CSKYV2_ISA_3E3R2    (1 << 7)\n-#define CSKYV2_ISA_10E60    (1 << 8)\n-\n-#define CSKY_ISA_TRUST      (1 << 11)\n-#define CSKY_ISA_CACHE      (1 << 12)\n-#define CSKY_ISA_NVIC       (1 << 13)\n-#define CSKY_ISA_CP         (1 << 14)\n-#define CSKY_ISA_MP         (1 << 15)\n-#define CSKY_ISA_MP_1E2     (1 << 16)\n-#define CSKY_ISA_JAVA       (1 << 17)\n-#define CSKY_ISA_MAC        (1 << 18)\n-#define CSKY_ISA_MAC_DSP    (1 << 19)\n+#define CSKYV1_ISA_E1       (1L << 0)\n+#define CSKYV2_ISA_E1       (1L << 1)\n+#define CSKYV2_ISA_1E2      (1L << 2)\n+#define CSKYV2_ISA_2E3      (1L << 3)\n+#define CSKYV2_ISA_3E7      (1L << 4)\n+#define CSKYV2_ISA_7E10     (1L << 5)\n+#define CSKYV2_ISA_3E3R1    (1L << 6)\n+#define CSKYV2_ISA_3E3R2    (1L << 7)\n+#define CSKYV2_ISA_10E60    (1L << 8)\n+\n+#define CSKY_ISA_TRUST      (1L << 11)\n+#define CSKY_ISA_CACHE      (1L << 12)\n+#define CSKY_ISA_NVIC       (1L << 13)\n+#define CSKY_ISA_CP         (1L << 14)\n+#define CSKY_ISA_MP         (1L << 15)\n+#define CSKY_ISA_MP_1E2     (1L << 16)\n+#define CSKY_ISA_JAVA       (1L << 17)\n+#define CSKY_ISA_MAC        (1L << 18)\n+#define CSKY_ISA_MAC_DSP    (1L << 19)\n \n /* Base ISA for csky v1 and v2.  */\n-#define CSKY_ISA_DSP        (1 << 20)\n-#define CSKY_ISA_DSP_1E2    (1 << 21)\n-#define CSKY_ISA_DSP_ENHANCE (1 << 22)\n+#define CSKY_ISA_DSP        (1L << 20)\n+#define CSKY_ISA_DSP_1E2    (1L << 21)\n+#define CSKY_ISA_DSP_ENHANCE (1L << 22)\n \n /* Base float instruction (803f & 810f).  */\n-#define CSKY_ISA_FLOAT_E1   (1 << 25)\n+#define CSKY_ISA_FLOAT_E1   (1L << 25)\n /* M_FLOAT support (810f).  */\n-#define CSKY_ISA_FLOAT_1E2  (1 << 26)\n+#define CSKY_ISA_FLOAT_1E2  (1L << 26)\n /* 803 support (803f).  */\n-#define CSKY_ISA_FLOAT_1E3  (1 << 27)\n+#define CSKY_ISA_FLOAT_1E3  (1L << 27)\n /* 807 support (803f & 807f).  */\n-#define CSKY_ISA_FLOAT_3E4  (1 << 28)\n+#define CSKY_ISA_FLOAT_3E4  (1L << 28)\n /* Vector DSP support.  */\n-#define CSKY_ISA_VDSP       (1 << 29)\n+#define CSKY_ISA_VDSP       (1L << 29)\n+#define CSKY_ISA_VDSP_2     (1L << 30)\n \n /* The following bitmasks control cpu architecture for CSKY.  */\n #define CSKY_ABI_V1         (1 << 28)"
    },
    {
      "sha": "16274e8327eba70386f536239687bfbebe92dd69",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,11 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* emulparams/cskyelf.sh: Support attribute section.\n+\t* testsuite/ld-csky/tls-le-v1.d: Match .csky.attributes section.\n+\t* ld/testsuite/ld-csky/tls-le.d: Likewise.\n+\t* testsuite/ld-elf/non-contiguous.ld: Ignore .csky.attributes\n+\tsection.\n+\n 2020-08-28  Nick Clifton  <nickc@redhat.com>\n \n \tPR 19011"
    },
    {
      "sha": "b940c6c29783d06bd6a9bccf06f2146e806936d3",
      "filename": "ld/emulparams/cskyelf.sh",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/emulparams/cskyelf.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/emulparams/cskyelf.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/cskyelf.sh?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -10,6 +10,7 @@ MAXPAGESIZE=\"CONSTANT (MAXPAGESIZE)\"\n TEXT_START_ADDR=0x8000\n CHECK_RELOCS_AFTER_OPEN_INPUT=yes\n NONPAGED_TEXT_START_ADDR=0\n+ATTRS_SECTIONS='.csky.attributes 0 : { KEEP (*(.csky.attributes)) KEEP (*(.csky.attributes)) }'\n ARCH=csky\n EMBEDDED=yes\n EXTRA_EM_FILE=cskyelf"
    },
    {
      "sha": "d13c403819d125d8382bdac8105bef5fb2f877d3",
      "filename": "ld/testsuite/ld-csky/tls-le-v1.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-csky/tls-le-v1.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-csky/tls-le-v1.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-csky/tls-le-v1.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -12,3 +12,5 @@ Idx Name          Size      VMA       LMA       File off  Algn\n                   .*\n   1 .tbss         .*\n                   .*\n+  2 .csky.attributes .*\n+                  .*"
    },
    {
      "sha": "0a241b3b46718d3829f2804dabcd9895f12e38fc",
      "filename": "ld/testsuite/ld-csky/tls-le.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-csky/tls-le.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-csky/tls-le.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-csky/tls-le.d?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -11,3 +11,5 @@ Idx Name          Size      VMA       LMA       File off  Algn\n                   .*\n   1 .tbss         .*\n                   .*\n+  2 .csky.attributes .*\n+                  .*"
    },
    {
      "sha": "cfd3f248476b58eb0cb0b4b35ac91148e49516ef",
      "filename": "ld/testsuite/ld-elf/non-contiguous.ld",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-elf/non-contiguous.ld",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/ld/testsuite/ld-elf/non-contiguous.ld",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/non-contiguous.ld?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -23,6 +23,7 @@ SECTIONS\n \t     *(.note.renesas)\n \t     *(.MIPS.abiflags)\n \t     *(.MSP430.attributes)\n+\t     *(.csky.attributes)\n \t     *(.gnu.attributes)\n    }\n "
    },
    {
      "sha": "71826bdaea3e2237b12c61a8529766c27926f4f3",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -1,3 +1,15 @@\n+2020-08-28  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* csky-dis.c (CSKY_DEFAULT_ISA): Define.\n+\t(csky_dis_info): Add member isa.\n+\t(csky_find_inst_info): Skip instructions that do not belong to\n+\tcurrent CPU.\n+\t(csky_get_disassembler): Get infomation from attribute section.\n+\t(print_insn_csky): Set defualt ISA flag.\n+\t* csky.h (CSKY_ISA_VDSP_2): Rename from CSKY_ISA_VDSP_V2.\n+\t* csky-opc.h (struct csky_opcode): Change isa_flag16 and\n+\tisa_flag32'type to unsigned 64 bits.\n+\n 2020-08-26  Jose E. Marchesi  <jemarch@gnu.org>\n \n \t* disassemble.c (enum epbf_isa_attr): Add ISA_XBPFBE, ISA_EBPFMAX."
    },
    {
      "sha": "6becad0130195453d1b39d2a3507f909978d54a0",
      "filename": "opcodes/csky-dis.c",
      "status": "modified",
      "additions": 35,
      "deletions": 9,
      "changes": 44,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/csky-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/csky-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/csky-dis.c?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -23,6 +23,7 @@\n #include \"config.h\"\n #include <stdio.h>\n #include \"bfd_stdint.h\"\n+#include <elf/csky.h>\n #include \"disassemble.h\"\n #include \"elf-bfd.h\"\n #include \"opcode/csky.h\"\n@@ -32,6 +33,7 @@\n \n #define CSKY_INST_TYPE unsigned long\n #define HAS_SUB_OPERAND (unsigned int)0xffffffff\n+#define CSKY_DEFAULT_ISA 0xffffffff\n \n enum sym_type\n {\n@@ -47,6 +49,7 @@ struct csky_dis_info\n   disassemble_info *info;\n   /* Opcode information.  */\n   struct csky_opcode_info const *opinfo;\n+  BFD_HOST_U_64_BIT isa;\n   /* The value of operand to show.  */\n   int value;\n   /* Whether to look up/print a symbol name.  */\n@@ -159,10 +162,8 @@ csky_find_inst_info (struct csky_opcode_info const **pinfo,\n   p = g_opcodeP;\n   while (p->mnemonic)\n     {\n-      /* FIXME: Skip 860's instruction in other CPUs. It is not suitable.\n-\t These codes need to be optimized.  */\n-      if (((CSKY_ARCH_MASK & mach_flag) != CSKY_ARCH_860)\n-\t  && (p->isa_flag32 & CSKYV2_ISA_10E60))\n+\tif (!(p->isa_flag16 & dis_info.isa)\n+\t      && !(p->isa_flag32 & dis_info.isa))\n \t{\n \t  p++;\n \t  continue;\n@@ -235,9 +236,28 @@ csky_symbol_is_valid (asymbol *sym,\n disassembler_ftype\n csky_get_disassembler (bfd *abfd)\n {\n-  if (abfd != NULL)\n-    mach_flag = elf_elfheader (abfd)->e_flags;\n-  return print_insn_csky;\n+  obj_attribute *attr;\n+  const char *sec_name = NULL;\n+  if (!abfd)\n+    return NULL;\n+\n+  mach_flag = elf_elfheader (abfd)->e_flags;\n+\n+  sec_name = get_elf_backend_data (abfd)->obj_attrs_section;\n+  /* Skip any input that hasn't attribute section.\n+     This enables to link object files without attribute section with\n+     any others.  */\n+  if (bfd_get_section_by_name (abfd, sec_name) != NULL)\n+    {\n+      attr = elf_known_obj_attributes_proc (abfd);\n+      dis_info.isa = attr[Tag_CSKY_ISA_EXT_FLAGS].i;\n+      dis_info.isa <<= 32;\n+      dis_info.isa |= attr[Tag_CSKY_ISA_FLAGS].i;\n+    }\n+  else\n+    dis_info.isa = CSKY_DEFAULT_ISA;\n+\n+   return print_insn_csky;\n }\n \n static int\n@@ -937,10 +957,16 @@ print_insn_csky (bfd_vma memaddr, struct disassemble_info *info)\n   if (mach_flag != INIT_MACH_FLAG && mach_flag != BINARY_MACH_FLAG)\n     info->mach = mach_flag;\n   else if (mach_flag == INIT_MACH_FLAG)\n-    mach_flag = info->mach;\n+    {\n+      mach_flag = info->mach;\n+      dis_info.isa = CSKY_DEFAULT_ISA;\n+    }\n \n   if (mach_flag == BINARY_MACH_FLAG && info->endian == BFD_ENDIAN_UNKNOWN)\n-    info->endian = BFD_ENDIAN_LITTLE;\n+    {\n+      info->endian = BFD_ENDIAN_LITTLE;\n+      dis_info.isa = CSKY_DEFAULT_ISA;\n+    }\n \n   /* First check the full symtab for a mapping symbol, even if there\n      are no usable non-mapping symbols for this address.  */"
    },
    {
      "sha": "95df44dad389d0268711118cbb105a8f8f9528cc",
      "filename": "opcodes/csky-opc.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/csky-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0861f561ebdd283e389c2c2fdb099bffadffecfa/opcodes/csky-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/csky-opc.h?ref=0861f561ebdd283e389c2c2fdb099bffadffecfa",
      "patch": "@@ -262,8 +262,8 @@ struct csky_opcode\n   /* Encodings for 32-bit opcodes.  */\n   struct csky_opcode_info op32[OP_TABLE_NUM];\n   /* Instruction set flag.  */\n-  unsigned int isa_flag16;\n-  unsigned int isa_flag32;\n+  BFD_HOST_U_64_BIT isa_flag16;\n+  BFD_HOST_U_64_BIT isa_flag32;\n   /* Whether this insn needs relocation, 0: no, !=0: yes.  */\n   signed int reloc16;\n   signed int reloc32;"
    }
  ]
}