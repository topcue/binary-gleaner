{
  "sha": "3edf7b9f2c79be0bffcc05d7a8b4364924255282",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6M2VkZjdiOWYyYzc5YmUwYmZmY2MwNWQ3YThiNDM2NDkyNDI1NTI4Mg==",
  "commit": {
    "author": {
      "name": "Douglas B Rupp",
      "email": "rupp@adacore.com",
      "date": "2020-05-18T11:59:53Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-05-18T13:11:32Z"
    },
    "message": "Show AIX gc'd symbol address adjustments in map file\n\n\t* ldemul.h (ldemul_print_symbol): New.\n\t(ld_emulation_xfer_type) <print_symbol): Likewise.\n\t* ldemul.c (ldemul_print_symbol): New.\n\t* ldlang.c (SECTION_NAME_MAP_LANGTH): Move to ...\n\t(print_one_symbol): Make global and move declaration to ...\n\t(print_all_symbols): Rename print_one_symbol to ldemul_print_symbol\n\t(print_input_section): Likewise\n\t* ldlang.h: ... here.\n\t* emultempl/aix.em (gld${EMULATION_NAME}_print_symbol): New.\n\t(ld_emulation_xfer_struct): Use it.\n\t* emultempl/armcoff.em (ld_emulation_xfer_struct): Add print_symbol\n\tand default to NULL.\n\t* emultempl/beos.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/elf.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/generic.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/linux.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/msp430.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/pe.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/pep.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/ticoff.em (ld_emulation_xfer_struct): Likewise\n\t* emultempl/vanilla.em (ld_emulation_xfer_struct): Likewise",
    "tree": {
      "sha": "cf499e1cc207f511163402eda4591ac965657fc7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/cf499e1cc207f511163402eda4591ac965657fc7"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3edf7b9f2c79be0bffcc05d7a8b4364924255282",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3edf7b9f2c79be0bffcc05d7a8b4364924255282",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3edf7b9f2c79be0bffcc05d7a8b4364924255282",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3edf7b9f2c79be0bffcc05d7a8b4364924255282/comments",
  "author": null,
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6e0c75f7c4a94e835842f52aadb4e1a83c3b4e0a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6e0c75f7c4a94e835842f52aadb4e1a83c3b4e0a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6e0c75f7c4a94e835842f52aadb4e1a83c3b4e0a"
    }
  ],
  "stats": {
    "total": 116,
    "additions": 100,
    "deletions": 16
  },
  "files": [
    {
      "sha": "b719d456fb0b9c06acb16706b52d9a82ec0effe8",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -1,3 +1,27 @@\n+2020-05-18  Douglas B Rupp  <rupp@adacore.com>\n+\n+\t* ldemul.h (ldemul_print_symbol): New.\n+\t(ld_emulation_xfer_type) <print_symbol): Likewise.\n+\t* ldemul.c (ldemul_print_symbol): New.\n+\t* ldlang.c (SECTION_NAME_MAP_LANGTH): Move to ...\n+\t(print_one_symbol): Make global and move declaration to ...\n+\t(print_all_symbols): Rename print_one_symbol to ldemul_print_symbol\n+\t(print_input_section): Likewise\n+\t* ldlang.h: ... here.\n+\t* emultempl/aix.em (gld${EMULATION_NAME}_print_symbol): New.\n+\t(ld_emulation_xfer_struct): Use it.\n+\t* emultempl/armcoff.em (ld_emulation_xfer_struct): Add print_symbol\n+\tand default to NULL.\n+\t* emultempl/beos.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/elf.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/generic.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/linux.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/msp430.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/pe.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/pep.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/ticoff.em (ld_emulation_xfer_struct): Likewise\n+\t* emultempl/vanilla.em (ld_emulation_xfer_struct): Likewise\n+\n 2020-05-18  Sergei Trofimovich  <siarheit@google.com>\n \n \t* ldmain.c (add_archive_element): Fix s/claimi/claim/ typo"
    },
    {
      "sha": "de313e1f1741d63b979ec7074f43e8b4d736e7c6",
      "filename": "ld/emultempl/aix.em",
      "status": "modified",
      "additions": 32,
      "deletions": 1,
      "changes": 33,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/aix.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/aix.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/aix.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -1534,6 +1534,36 @@ gld${EMULATION_NAME}_open_dynamic_archive (const char *arch,\n   return TRUE;\n }\n \n+static bfd_boolean\n+gld${EMULATION_NAME}_print_symbol (struct bfd_link_hash_entry *hash_entry,\n+\t\t\t\t   void *ptr)\n+{\n+  asection *sec = (asection *) ptr;\n+\n+  if ((hash_entry->type == bfd_link_hash_defined\n+       || hash_entry->type == bfd_link_hash_defweak)\n+      && sec == hash_entry->u.def.section)\n+    {\n+      int i;\n+      struct xcoff_link_hash_entry *h;\n+\n+      for (i = 0; i < SECTION_NAME_MAP_LENGTH; i++)\n+\tprint_space ();\n+      minfo (\"0x%V   \",\n+\t     (hash_entry->u.def.value\n+\t      + hash_entry->u.def.section->output_offset\n+\t      + hash_entry->u.def.section->output_section->vma));\n+\n+      /* Flag symbol if it has been garbage collected.  */\n+      h = (struct xcoff_link_hash_entry *) hash_entry;\n+      if ((h != NULL) && !(h->flags & XCOFF_MARK))\n+\tminfo (\" -->gc\");\n+      minfo (\"             %pT\\n\", hash_entry->root.string);\n+    }\n+\n+  return TRUE;\n+}\n+\n struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation = {\n   gld${EMULATION_NAME}_before_parse,\n   syslib_default,\n@@ -1564,6 +1594,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation = {\n   NULL,\t\t\t\t/* new_vers_pattern */\n   NULL,\t\t\t\t/* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  gld${EMULATION_NAME}_print_symbol\n };\n EOF"
    },
    {
      "sha": "ff22af4eb371fc15819190f9bc60ae992b6b7c91",
      "filename": "ld/emultempl/armcoff.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/armcoff.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/armcoff.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/armcoff.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -286,6 +286,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern */\n   NULL,\t/* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "442ff1222c6e4ddfd2a6e5ab363788295f5f2a48",
      "filename": "ld/emultempl/beos.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/beos.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/beos.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/beos.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -786,6 +786,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern */\n   NULL,\t/* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "eac2ce2f4ca2f5e87fb0c14f6216ba368aee59ed",
      "filename": "ld/emultempl/elf.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/elf.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/elf.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/elf.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -903,6 +903,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   ${LDEMUL_NEW_VERS_PATTERN-NULL},\n   ${LDEMUL_EXTRA_MAP_FILE_TEXT-NULL},\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "24d3c1d9c68ed5895848eda1e622ee80d4e6a9d1",
      "filename": "ld/emultempl/generic.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/generic.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/generic.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/generic.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -161,6 +161,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   ${LDEMUL_NEW_VERS_PATTERN-NULL},\n   ${LDEMUL_EXTRA_MAP_FILE_TEXT-NULL},\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "e9d802c657cdab833c6e7b5287fd7c565e1e27aa",
      "filename": "ld/emultempl/linux.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/linux.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/linux.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/linux.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -213,6 +213,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern */\n   NULL,\t/* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "850c3a836ce605ef1c77001d7502eade22536079",
      "filename": "ld/emultempl/msp430.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/msp430.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/msp430.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/msp430.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -848,7 +848,8 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   ${LDEMUL_NEW_VERS_PATTERN-NULL},\n   ${LDEMUL_EXTRA_MAP_FILE_TEXT-NULL},\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF\n # \f"
    },
    {
      "sha": "3dd36de373dbb7c57f6503a0f252645a7cfe5cce",
      "filename": "ld/emultempl/pe.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/pe.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/pe.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/pe.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -2394,6 +2394,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern.  */\n   NULL,\t/* extra_map_file_text.  */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "39ddd8f23ec1208882c40606c19ec5e540734d67",
      "filename": "ld/emultempl/pep.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/pep.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/pep.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/pep.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -2192,6 +2192,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern.  */\n   NULL,\t/* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "11ddd0c9bada5b348aa1d16acc291b65625d0d60",
      "filename": "ld/emultempl/ticoff.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/ticoff.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/ticoff.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/ticoff.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -186,6 +186,7 @@ struct ld_emulation_xfer_struct ld_${EMULATION_NAME}_emulation =\n   NULL,\t/* new_vers_pattern */\n   NULL,  /* extra_map_file_text */\n   ${LDEMUL_EMIT_CTF_EARLY-NULL},\n-  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL}\n+  ${LDEMUL_EXAMINE_STRTAB_FOR_CTF-NULL},\n+  ${LDEMUL_PRINT_SYMBOL-NULL}\n };\n EOF"
    },
    {
      "sha": "70d193c2c7941afe6d698895b33cb4fa31417308",
      "filename": "ld/emultempl/vanilla.em",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/vanilla.em",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/emultempl/vanilla.em",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emultempl/vanilla.em?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -87,6 +87,7 @@ struct ld_emulation_xfer_struct ld_vanilla_emulation =\n   NULL,\t/* new_vers_pattern */\n   NULL,\t/* extra_map_file_text */\n   NULL, /* emit_ctf_early */\n-  NULL  /* examine_strtab_for_ctf */\n+  NULL, /* examine_strtab_for_ctf */\n+  NULL  /* print_symbol */\n };\n EOF"
    },
    {
      "sha": "00a6a5ad1338b4b4d67b2d2b06d276b3f193759e",
      "filename": "ld/ldemul.c",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldemul.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldemul.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldemul.c?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -428,3 +428,11 @@ ldemul_examine_strtab_for_ctf (struct ctf_file *ctf_output,\n     ld_emulation->examine_strtab_for_ctf (ctf_output, syms,\n \t\t\t\t\t  symcount, symstrtab);\n }\n+\n+bfd_boolean\n+ldemul_print_symbol (struct bfd_link_hash_entry *hash_entry, void *ptr)\n+{\n+  if (ld_emulation->print_symbol)\n+    return ld_emulation->print_symbol (hash_entry, ptr);\n+  return print_one_symbol (hash_entry, ptr);\n+}"
    },
    {
      "sha": "ca165ac957046df6acec4b31ae232c18d921bba4",
      "filename": "ld/ldemul.h",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldemul.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldemul.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldemul.h?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -112,6 +112,8 @@ extern int ldemul_emit_ctf_early\n extern void ldemul_examine_strtab_for_ctf\n   (struct ctf_file *, struct elf_sym_strtab *, bfd_size_type,\n    struct elf_strtab_hash *);\n+extern bfd_boolean ldemul_print_symbol\n+  (struct bfd_link_hash_entry *hash_entry, void *ptr);\n \n typedef struct ld_emulation_xfer_struct {\n   /* Run before parsing the command line and script file.\n@@ -236,6 +238,12 @@ typedef struct ld_emulation_xfer_struct {\n      bfd_link_callback is invoked by per-target code.  */\n   void (*examine_strtab_for_ctf) (struct ctf_file *, struct elf_sym_strtab *,\n \t\t\t\t  bfd_size_type, struct elf_strtab_hash *);\n+\n+  /* Called when printing a symbol to the map file.   AIX uses this\n+     hook to flag gc'd symbols.  */\n+  bfd_boolean (*print_symbol)\n+    (struct bfd_link_hash_entry *hash_entry, void *ptr);\n+\n } ld_emulation_xfer_type;\n \n typedef enum {"
    },
    {
      "sha": "35791e4e2c015cc83c9388e2ee815a99638ef794",
      "filename": "ld/ldlang.c",
      "status": "modified",
      "additions": 3,
      "deletions": 5,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldlang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldlang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldlang.c?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -155,8 +155,6 @@ static int lang_sizing_iteration = 0;\n #define outside_symbol_address(q) \\\n   ((q)->value + outside_section_address (q->section))\n \n-#define SECTION_NAME_MAP_LENGTH (16)\n-\n /* CTF sections smaller than this are not compressed: compression of\n    dictionaries this small doesn't gain much, and this lets consumers mmap the\n    sections directly out of the ELF file and use them with no decompression\n@@ -4619,7 +4617,7 @@ print_input_statement (lang_input_statement_type *statm)\n /* Print all symbols defined in a particular section.  This is called\n    via bfd_link_hash_traverse, or by print_all_symbols.  */\n \n-static bfd_boolean\n+bfd_boolean\n print_one_symbol (struct bfd_link_hash_entry *hash_entry, void *ptr)\n {\n   asection *sec = (asection *) ptr;\n@@ -4683,7 +4681,7 @@ print_all_symbols (asection *sec)\n \n   /* Print the symbols.  */\n   for (i = 0; i < ud->map_symbol_def_count; i++)\n-    print_one_symbol (entries[i], sec);\n+    ldemul_print_symbol (entries[i], sec);\n \n   obstack_free (&map_obstack, entries);\n }\n@@ -4747,7 +4745,7 @@ print_input_section (asection *i, bfd_boolean is_discarded)\n       && i->output_section->owner == link_info.output_bfd)\n     {\n       if (link_info.reduce_memory_overheads)\n-\tbfd_link_hash_traverse (link_info.hash, print_one_symbol, i);\n+\tbfd_link_hash_traverse (link_info.hash, ldemul_print_symbol, i);\n       else\n \tprint_all_symbols (i);\n "
    },
    {
      "sha": "3018c3e2ba5847ff0171a64367855e123e8f1e8e",
      "filename": "ld/ldlang.h",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldlang.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3edf7b9f2c79be0bffcc05d7a8b4364924255282/ld/ldlang.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldlang.h?ref=3edf7b9f2c79be0bffcc05d7a8b4364924255282",
      "patch": "@@ -23,6 +23,8 @@\n \n #define DEFAULT_MEMORY_REGION   \"*default*\"\n \n+#define SECTION_NAME_MAP_LENGTH (16)\n+\n typedef enum\n {\n   lang_input_file_is_l_enum,\n@@ -701,4 +703,7 @@ lang_print_memory_usage (void);\n extern void\n lang_add_gc_name (const char *);\n \n+extern bfd_boolean\n+print_one_symbol (struct bfd_link_hash_entry *hash_entry, void *ptr);\n+\n #endif"
    }
  ]
}