{
  "sha": "f1f28025c3ea75d5368ddd3046461648145b89b3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjFmMjgwMjVjM2VhNzVkNTM2OGRkZDMwNDY0NjE2NDgxNDViODliMw==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-01-08T16:30:20Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-01-08T16:30:20Z"
    },
    "message": "Make the assembler generate an error if there is an attempt to define a section with the same name as an already defined symbol.\n\n\tPR 14891\n\t* config/obj-elf.c (obj_elf_section): Fail if the section name is\n\talready defined as a different symbol type.\n\t* testsuite/gas/elf/pr14891.s: New test source file.\n\t* testsuite/gas/elf/pr14891.d: New test driver.\n\t* testsuite/gas/elf/pr14891.s: New test expected error output.\n\t* testsuite/gas/elf/elf.exp: Run the new test.",
    "tree": {
      "sha": "fb1d76e45031da950adaf8f42cc90c9a43cd749e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fb1d76e45031da950adaf8f42cc90c9a43cd749e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f1f28025c3ea75d5368ddd3046461648145b89b3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f1f28025c3ea75d5368ddd3046461648145b89b3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f1f28025c3ea75d5368ddd3046461648145b89b3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f1f28025c3ea75d5368ddd3046461648145b89b3/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "030a2e78acf66c5c12e073ec3887a167da7a7195",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/030a2e78acf66c5c12e073ec3887a167da7a7195",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/030a2e78acf66c5c12e073ec3887a167da7a7195"
    }
  ],
  "stats": {
    "total": 34,
    "additions": 34,
    "deletions": 0
  },
  "files": [
    {
      "sha": "799c591811285a81d25b2796146d46e605e9f125",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -1,3 +1,13 @@\n+2020-01-08  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 14891\n+\t* config/obj-elf.c (obj_elf_section): Fail if the section name is\n+\talready defined as a different symbol type.\n+\t* testsuite/gas/elf/pr14891.s: New test source file.\n+\t* testsuite/gas/elf/pr14891.d: New test driver.\n+\t* testsuite/gas/elf/pr14891.s: New test expected error output.\n+\t* testsuite/gas/elf/elf.exp: Run the new test.\n+\n 2020-01-08  Alan Modra  <amodra@gmail.com>\n \n \t* config/tc-z8k.c (md_begin): Make idx unsigned."
    },
    {
      "sha": "7cf921c051f62b4cd73b867e7d203cc3fec284fe",
      "filename": "gas/config/obj-elf.c",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/config/obj-elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/config/obj-elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/obj-elf.c?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -1039,6 +1039,18 @@ obj_elf_section (int push)\n   name = obj_elf_section_name ();\n   if (name == NULL)\n     return;\n+\n+  symbolS * sym;\n+  if ((sym = symbol_find (name)) != NULL\n+      && ! symbol_section_p (sym)\n+      && S_IS_DEFINED (sym)\n+      && ! S_IS_VOLATILE (sym)\n+      && ! S_CAN_BE_REDEFINED (sym))\n+    {\n+      as_bad (_(\"section name '%s' already defined as another symbol\"), name);\n+      ignore_rest_of_line ();\n+      return;\n+    }\n   type = SHT_NULL;\n   attr = 0;\n   gnu_attr = 0;"
    },
    {
      "sha": "746ff7eea0ddb323a18ed64a5699e6734be890dc",
      "filename": "gas/testsuite/gas/elf/elf.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/elf.exp?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -209,6 +209,7 @@ if { [is_elf_format] } then {\n     }\n     run_dump_test \"symver\"\n     run_dump_test \"pr21661\"\n+    run_dump_test \"pr14891\"\n \n     # No indirect functions on non-GNU targets.\n     # The Visium and MSP set the ELF header's OSABI field to ELFOSABI_STANDALONE."
    },
    {
      "sha": "c15f28c92ffba3578385e1b7d3f6fbf4e8b62c3a",
      "filename": "gas/testsuite/gas/elf/pr14891.d",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/pr14891.d?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -0,0 +1,2 @@\n+#name: defining a section with the same name as a symbol\n+#error_output: pr14891.l"
    },
    {
      "sha": "4013ec116b5ffa1b9e10a007687b55f855d71639",
      "filename": "gas/testsuite/gas/elf/pr14891.l",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/pr14891.l?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -0,0 +1,3 @@\n+[^:]*: Assembler messages:\n+[^:]*:3: Error: section name 'foo' already defined as another symbol\n+[^:]*:6: Error: symbol `bar' is already defined"
    },
    {
      "sha": "f8e1832ad104561f49c7bdc0520b29bdccb7cc47",
      "filename": "gas/testsuite/gas/elf/pr14891.s",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f1f28025c3ea75d5368ddd3046461648145b89b3/gas/testsuite/gas/elf/pr14891.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/pr14891.s?ref=f1f28025c3ea75d5368ddd3046461648145b89b3",
      "patch": "@@ -0,0 +1,6 @@\n+\n+foo:\n+.section foo, \"a\"\n+\n+.section bar, \"a\"\n+bar:"
    }
  ]
}