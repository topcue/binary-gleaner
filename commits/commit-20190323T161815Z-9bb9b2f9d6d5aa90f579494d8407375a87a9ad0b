{
  "sha": "9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWJiOWIyZjlkNmQ1YWE5MGY1Nzk0OTRkODQwNzM3NWE4N2E5YWQwYg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-03-23T15:43:49Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-03-23T16:18:15Z"
    },
    "message": "Use scoped_restore_current_language in two places\n\nI found a couple of spots that manually saved and restored the current\nlanguage.  This patch changes them to use\nscoped_restore_current_language.\n\nTested by the buildbot.\n\ngdb/ChangeLog\n2019-03-23  Tom Tromey  <tom@tromey.com>\n\n\t* linespec.c (get_current_search_block): Use\n\tscoped_restore_current_language.\n\t* symmisc.c (dump_symtab): Use scoped_restore_current_language.",
    "tree": {
      "sha": "decac06af2245024c51a76359d310f13212eaebb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/decac06af2245024c51a76359d310f13212eaebb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c90939d2d08caedf4f777112a1aafa0c69a9d1c1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c90939d2d08caedf4f777112a1aafa0c69a9d1c1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c90939d2d08caedf4f777112a1aafa0c69a9d1c1"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 10,
    "deletions": 14
  },
  "files": [
    {
      "sha": "8088b75758a2eadd489b175c1bca2b50fe997787",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
      "patch": "@@ -1,3 +1,9 @@\n+2019-03-23  Tom Tromey  <tom@tromey.com>\n+\n+\t* linespec.c (get_current_search_block): Use\n+\tscoped_restore_current_language.\n+\t* symmisc.c (dump_symtab): Use scoped_restore_current_language.\n+\n 2019-03-22  Alan Hayward  <alan.hayward@arm.com>\n \t    Jiong Wang  <jiong.wang@arm.com>\n "
    },
    {
      "sha": "8e2ade07c73adcb7dbe063f65cf6355efe8d0f40",
      "filename": "gdb/linespec.c",
      "status": "modified",
      "additions": 2,
      "deletions": 8,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/linespec.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/linespec.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/linespec.c?ref=9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
      "patch": "@@ -1190,16 +1190,10 @@ iterate_over_all_matching_symtabs\n static const struct block *\n get_current_search_block (void)\n {\n-  const struct block *block;\n-  enum language save_language;\n-\n   /* get_selected_block can change the current language when there is\n      no selected frame yet.  */\n-  save_language = current_language->la_language;\n-  block = get_selected_block (0);\n-  set_language (save_language);\n-\n-  return block;\n+  scoped_restore_current_language save_language;\n+  return get_selected_block (0);\n }\n \n /* Iterate over static and global blocks.  */"
    },
    {
      "sha": "3089c99e2321c6db46f5add3bab80f80163fe6fe",
      "filename": "gdb/symmisc.c",
      "status": "modified",
      "additions": 2,
      "deletions": 6,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/symmisc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b/gdb/symmisc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symmisc.c?ref=9bb9b2f9d6d5aa90f579494d8407375a87a9ad0b",
      "patch": "@@ -384,13 +384,9 @@ dump_symtab (struct symtab *symtab, struct ui_file *outfile)\n   if (symtab->language != language_unknown\n       && symtab->language != language_auto)\n     {\n-      enum language saved_lang;\n-\n-      saved_lang = set_language (symtab->language);\n-\n+      scoped_restore_current_language save_lang;\n+      set_language (symtab->language);\n       dump_symtab_1 (symtab, outfile);\n-\n-      set_language (saved_lang);\n     }\n   else\n     dump_symtab_1 (symtab, outfile);"
    }
  ]
}