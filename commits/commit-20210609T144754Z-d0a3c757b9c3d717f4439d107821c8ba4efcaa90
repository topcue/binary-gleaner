{
  "sha": "d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDBhM2M3NTdiOWMzZDcxN2Y0NDM5ZDEwNzgyMWM4YmE0ZWZjYWE5MA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-09T14:47:54Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-09T14:47:54Z"
    },
    "message": "gdb/testsuite: add some logging in Term::_check_box\n\nI was diagnosing some problem with a TUI test case, which lead me to\nimprove the logging of _check_box a bit.  It did help me, so I think it\nwould be nice to have it upstream.\n\ngdb/testsuite/ChangeLog:\n\n\t* lib/tuiterm.exp (Term) <_check_box>: Improve logging.\n\nChange-Id: I887e83c02507d6c59c991e17f795c844ed63bacf",
    "tree": {
      "sha": "c2e3c678e4cb0ce26c3359030847f71241e5f77f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c2e3c678e4cb0ce26c3359030847f71241e5f77f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d0a3c757b9c3d717f4439d107821c8ba4efcaa90/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f75bcf7e574c511f0ea742e05e5ae6e19bf29a92",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f75bcf7e574c511f0ea742e05e5ae6e19bf29a92",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f75bcf7e574c511f0ea742e05e5ae6e19bf29a92"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 34,
    "deletions": 16
  },
  "files": [
    {
      "sha": "d9bda5378059f10586b4c90e010ad5a2166320f2",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d0a3c757b9c3d717f4439d107821c8ba4efcaa90/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d0a3c757b9c3d717f4439d107821c8ba4efcaa90/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
      "patch": "@@ -1,3 +1,7 @@\n+2021-06-09  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* lib/tuiterm.exp (Term) <_check_box>: Improve logging.\n+\n 2021-06-08  Lancelot Six  <lsix@lancelotsix.com>\n \n \t* gdb.base/premature-dummy-frame-removal.py (TestUnwinder): Use"
    },
    {
      "sha": "fdd9f4d2188f2223cb51e91f6f0452df5cc782c3",
      "filename": "gdb/testsuite/lib/tuiterm.exp",
      "status": "modified",
      "additions": 30,
      "deletions": 16,
      "changes": 46,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d0a3c757b9c3d717f4439d107821c8ba4efcaa90/gdb/testsuite/lib/tuiterm.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d0a3c757b9c3d717f4439d107821c8ba4efcaa90/gdb/testsuite/lib/tuiterm.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/tuiterm.exp?ref=d0a3c757b9c3d717f4439d107821c8ba4efcaa90",
      "patch": "@@ -729,39 +729,53 @@ namespace eval Term {\n \tset x2 [expr {$x + $width - 1}]\n \tset y2 [expr {$y + $height - 1}]\n \n-\tif {[get_char $x $y] != \"+\"} {\n-\t    return \"ul corner\"\n+\tverbose -log \"_check_box x=$x, y=$y, x2=$x2, y2=$y2, width=$width, height=$height\"\n+\n+\tset c [get_char $x $y]\n+\tif {$c != \"+\"} {\n+\t    return \"ul corner is $c, not +\"\n \t}\n-\tif {[get_char $x $y2] != \"+\"} {\n-\t    return \"ll corner\"\n+\n+\tset c [get_char $x $y2]\n+\tif {$c != \"+\"} {\n+\t    return \"ll corner is $c, not +\"\n \t}\n-\tif {[get_char $x2 $y] != \"+\"} {\n-\t    return \"ur corner\"\n+\n+\tset c [get_char $x2 $y]\n+\tif {$c != \"+\"} {\n+\t    return \"ur corner is $c, not +\"\n \t}\n-\tif {[get_char $x2 $y2] != \"+\"} {\n-\t    return \"lr corner\"\n+\n+\tset c [get_char $x2 $y2]\n+\tif {$c != \"+\"} {\n+\t    return \"lr corner is $c, not +\"\n \t}\n \n \t# Note we do not check the full horizonal borders of the box.\n \t# The top will contain a title, and the bottom may as well, if\n \t# it is overlapped by some other border.  However, at most a\n \t# title should appear as '+-VERY LONG TITLE-+', so we can\n \t# check for the '+-' on the left, and '-+' on the right.\n-\tif {[get_char [expr {$x + 1}] $y] != \"-\"} {\n-\t    return \"ul title padding\"\n+\tset c [get_char [expr {$x + 1}] $y]\n+\tif {$c != \"-\"} {\n+\t    return \"ul title padding is $c, not -\"\n \t}\n \n-\tif {[get_char [expr {$x2 - 1}] $y] != \"-\"} {\n-\t    return \"ul title padding\"\n+\tset c [get_char [expr {$x2 - 1}] $y]\n+\tif {$c != \"-\"} {\n+\t    return \"ul title padding is $c, not -\"\n \t}\n \n \t# Now check the vertical borders.\n \tfor {set i [expr {$y + 1}]} {$i < $y2 - 1} {incr i} {\n-\t    if {[get_char $x $i] != \"|\"} {\n-\t\treturn \"left side $i\"\n+\t    set c [get_char $x $i]\n+\t    if {$c != \"|\"} {\n+\t\treturn \"left side $i is $c, not |\"\n \t    }\n-\t    if {[get_char $x2 $i] != \"|\"} {\n-\t\treturn \"right side $i\"\n+\n+\t    set c [get_char $x2 $i]\n+\t    if {$c != \"|\"} {\n+\t\treturn \"right side $i is $c, not |\"\n \t    }\n \t}\n "
    }
  ]
}