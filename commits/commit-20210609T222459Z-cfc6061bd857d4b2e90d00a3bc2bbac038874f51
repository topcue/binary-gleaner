{
  "sha": "cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2ZjNjA2MWJkODU3ZDRiMmU5MGQwMGEzYmMyYmJhYzAzODg3NGY1MQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-06T02:50:57Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-09T22:24:59Z"
    },
    "message": "sim: nrun: tweak init of callback endian\n\nAllow ports to initialize the callback endian if they want.  This will\nallow delegation of the logic out of common code in the future.\n\nAlso switch from the CURRENT_TARGET_BYTE_ORDER macro to the underlying\ncurrent_target_byte_order storage since the latter has been setup by\nthe sim-config module based on the same macros.  This will allow the\nnrun module to be moved to common building for sharing.",
    "tree": {
      "sha": "c29d37cefdc537610f58fdad9798948278390f86",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c29d37cefdc537610f58fdad9798948278390f86"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cfc6061bd857d4b2e90d00a3bc2bbac038874f51/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "eee649922f026dd8857abb0476188e0508efcf8b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eee649922f026dd8857abb0476188e0508efcf8b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/eee649922f026dd8857abb0476188e0508efcf8b"
    }
  ],
  "stats": {
    "total": 16,
    "additions": 11,
    "deletions": 5
  },
  "files": [
    {
      "sha": "b5b6db2f9a292d6c2d254d7c2a8b6c8094d21e80",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cfc6061bd857d4b2e90d00a3bc2bbac038874f51/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cfc6061bd857d4b2e90d00a3bc2bbac038874f51/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
      "patch": "@@ -1,3 +1,8 @@\n+2021-06-09  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* nrun.c (main): Set default_callback.target_endian to\n+\tcurrent_target_byte_order when it's BFD_ENDIAN_UNKNOWN.\n+\n 2021-06-09  Mike Frysinger  <vapier@gentoo.org>\n \n \t* cgen-defs.h (STATE_RUN_FAST_P, CGEN_STATE, cgen_init): Delete."
    },
    {
      "sha": "e39a0c6ed54638882cbb2beea34ddd19d17f5e06",
      "filename": "sim/common/nrun.c",
      "status": "modified",
      "additions": 6,
      "deletions": 5,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cfc6061bd857d4b2e90d00a3bc2bbac038874f51/sim/common/nrun.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cfc6061bd857d4b2e90d00a3bc2bbac038874f51/sim/common/nrun.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/nrun.c?ref=cfc6061bd857d4b2e90d00a3bc2bbac038874f51",
      "patch": "@@ -88,11 +88,12 @@ main (int argc, char **argv)\n       abort ();\n     }\n \n-  /* We can't set the endianness in the callback structure until\n-     sim_config is called, which happens in sim_open.  */\n-  default_callback.target_endian\n-    = (CURRENT_TARGET_BYTE_ORDER == BFD_ENDIAN_BIG\n-       ? BFD_ENDIAN_BIG : BFD_ENDIAN_LITTLE);\n+  /* We can't set the endianness in the callback structure until sim_config is\n+     called, which happens in sim_open.  If it's still the default, switch it.\n+     Don't use CURRENT_TARGET_BYTE_ORDER as all its internal processing already\n+     happened in sim_config.  */\n+  if (default_callback.target_endian == BFD_ENDIAN_UNKNOWN)\n+    default_callback.target_endian = current_target_byte_order;\n \n   /* Was there a program to run?  */\n   prog_argv = STATE_PROG_ARGV (sd);"
    }
  ]
}