{
  "sha": "cee00f171520eb85867230d4cbed34480c64e71e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2VlMDBmMTcxNTIwZWI4NTg2NzIzMGQ0Y2JlZDM0NDgwYzY0ZTcxZQ==",
  "commit": {
    "author": {
      "name": "Gary Benson",
      "email": "gbenson@redhat.com",
      "date": "2020-05-28T13:18:36Z"
    },
    "committer": {
      "name": "Gary Benson",
      "email": "gbenson@redhat.com",
      "date": "2020-05-28T13:18:36Z"
    },
    "message": "Fix \"'operator new' should not return NULL\" errors in testsuite\n\nWhen running the testsuite with clang, gdb.linespec/cpls-ops.cc\nfails to compile with the following errors:\n  warning: 'operator new' should not return a null pointer unless\n    it is declared 'throw()' or 'noexcept' [-Wnew-returns-null]\n  warning: 'operator new[]' should not return a null pointer unless\n    it is declared 'throw()' or 'noexcept' [-Wnew-returns-null]\n\nThis prevents the gdb.linespec/cpls-ops.exp testcase from executing.\nThis commit fixes.\n\ngdb/testsuite/ChangeLog:\n\n\t* gdb.linespec/cpls-ops.cc (dummy): New static global.\n\t(test_op_new::operator new): Add return statement.\n\t(test_op_new_array::operator new[]): Likewise.",
    "tree": {
      "sha": "599a8b9d336040b1114d6e810cb978b6d0b2263a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/599a8b9d336040b1114d6e810cb978b6d0b2263a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cee00f171520eb85867230d4cbed34480c64e71e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cee00f171520eb85867230d4cbed34480c64e71e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cee00f171520eb85867230d4cbed34480c64e71e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cee00f171520eb85867230d4cbed34480c64e71e/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "efcf5fb585cdb6b7304a5a61a2d1e7db7d4bec6b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/efcf5fb585cdb6b7304a5a61a2d1e7db7d4bec6b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/efcf5fb585cdb6b7304a5a61a2d1e7db7d4bec6b"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 10,
    "deletions": 2
  },
  "files": [
    {
      "sha": "d5554430bf5df24eb0770107f370947ed7352df5",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cee00f171520eb85867230d4cbed34480c64e71e/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cee00f171520eb85867230d4cbed34480c64e71e/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=cee00f171520eb85867230d4cbed34480c64e71e",
      "patch": "@@ -1,3 +1,9 @@\n+2020-05-28  Gary Benson <gbenson@redhat.com>\n+\n+\t* gdb.linespec/cpls-ops.cc (dummy): New static global.\n+\t(test_op_new::operator new): Add return statement.\n+\t(test_op_new_array::operator new[]): Likewise.\n+\n 2020-05-27  Pedro Alves  <palves@redhat.com>\n \n \t* gdb.linespec/cp-completion-aliases.exp: Remove readline_is_used"
    },
    {
      "sha": "e9dce59e153ba776cb28fef6bb58c2c5d37bb232",
      "filename": "gdb/testsuite/gdb.linespec/cpls-ops.cc",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cee00f171520eb85867230d4cbed34480c64e71e/gdb/testsuite/gdb.linespec/cpls-ops.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cee00f171520eb85867230d4cbed34480c64e71e/gdb/testsuite/gdb.linespec/cpls-ops.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.linespec/cpls-ops.cc?ref=cee00f171520eb85867230d4cbed34480c64e71e",
      "patch": "@@ -91,6 +91,8 @@ test_op_array::operator[] (T *t)\n \n /* Code for operator new tests.  */\n \n+static int dummy;\n+\n struct test_op_new\n {\n   void *operator new (size_t);\n@@ -99,7 +101,7 @@ struct test_op_new\n void *\n test_op_new::operator new (size_t)\n {\n-  return NULL;\n+  return &dummy;\n }\n \n /* Code for operator delete tests.  */\n@@ -124,7 +126,7 @@ struct test_op_new_array\n void *\n test_op_new_array::operator new[] (size_t)\n {\n-  return NULL;\n+  return &dummy;\n }\n \n /* Code for operator delete[] tests.  */"
    }
  ]
}