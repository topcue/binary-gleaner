{
  "sha": "abf6d805a0dfa792fdf232dabd7de18d2fe20834",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWJmNmQ4MDVhMGRmYTc5MmZkZjIzMmRhYmQ3ZGUxOGQyZmUyMDgzNA==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-05-06T11:49:34Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-05-06T11:49:34Z"
    },
    "message": "[gdb/testsuite] Fix gdb.base/store.exp with gcc-10\n\nWhen running gdb.base/store.exp with gcc-10 instead of gcc-9, we have:\n...\n (gdb) PASS: gdb.base/store.exp: continue to wack_double\n print l^M\n-$22 = <optimized out>^M\n+$22 = -1^M\n-(gdb) UNSUPPORTED: gdb.base/store.exp: var double l; print old l, expecting -1\n-(gdb) PASS: gdb.base/store.exp: var double l; print old l, expecting -1\n+print r^M\n+$23 = <optimized out>^M\n+(gdb) FAIL: gdb.base/store.exp: var double l; print old r, expecting -2\n...\n\nWith gcc-9, there's no location info for both l and r, but with gcc-10,\nthere's location info for l, but not r.\n\nThe test-case only checks for location info availability of l, and then\nassumes location info for r is also available.\n\nFix this by allowing missing location info for r.\n\nTested on x86_64-linux.\n\ngdb/testsuite/ChangeLog:\n\n2020-05-06  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.base/store.exp (check_set, up_set): Allowing missing location\n\tinfo for r.",
    "tree": {
      "sha": "0d5322b7031dcc5b2f0859fd6b5ca9c65d455b5f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0d5322b7031dcc5b2f0859fd6b5ca9c65d455b5f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/abf6d805a0dfa792fdf232dabd7de18d2fe20834",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/abf6d805a0dfa792fdf232dabd7de18d2fe20834",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/abf6d805a0dfa792fdf232dabd7de18d2fe20834",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/abf6d805a0dfa792fdf232dabd7de18d2fe20834/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0fc2a808cbf5302016535367191bb8cd0900f332",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0fc2a808cbf5302016535367191bb8cd0900f332",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0fc2a808cbf5302016535367191bb8cd0900f332"
    }
  ],
  "stats": {
    "total": 57,
    "additions": 41,
    "deletions": 16
  },
  "files": [
    {
      "sha": "7a62fe8ce77102840eeba091b5512c901f3adac9",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abf6d805a0dfa792fdf232dabd7de18d2fe20834/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abf6d805a0dfa792fdf232dabd7de18d2fe20834/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=abf6d805a0dfa792fdf232dabd7de18d2fe20834",
      "patch": "@@ -1,3 +1,8 @@\n+2020-05-06  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.base/store.exp (check_set, up_set): Allowing missing location\n+\tinfo for r.\n+\n 2020-05-06  Tom de Vries  <tdevries@suse.de>\n \n \t* gdb.base/shlib-call.exp: Add extra step to reach shmain.c:42, if"
    },
    {
      "sha": "f3a6c061457924502a2c30d1f26432c395b69e42",
      "filename": "gdb/testsuite/gdb.base/store.exp",
      "status": "modified",
      "additions": 36,
      "deletions": 16,
      "changes": 52,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/abf6d805a0dfa792fdf232dabd7de18d2fe20834/gdb/testsuite/gdb.base/store.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/abf6d805a0dfa792fdf232dabd7de18d2fe20834/gdb/testsuite/gdb.base/store.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/store.exp?ref=abf6d805a0dfa792fdf232dabd7de18d2fe20834",
      "patch": "@@ -55,26 +55,37 @@ proc check_set { t l r new add } {\n \t}\n     }\n \n-    set supported 1\n+    set supported_l 1\n     set test \"${prefix}; print old l, expecting ${l}\"\n     gdb_test_multiple \"print l\" \"$test\"  {\n-\t-re \" = <optimized out>\\r\\n$gdb_prompt $\" {\n+\t-re -wrap \" = <optimized out>\" {\n \t    unsupported $test\n-\t    set supported 0\n+\t    set supported_l 0\n \t}\n-\t-re \" = ${l}\\r\\n$gdb_prompt $\" {\n+\t-re -wrap \" = ${l}\" {\n \t    pass $test\n \t}\n     }\n-    if { $supported } {\n-\tgdb_test \"print r\" \" = ${r}\" \\\n-\t    \"${prefix}; print old r, expecting ${r}\"\n+\n+    set test \"${prefix}; print old r, expecting ${r}\"\n+    gdb_test_multiple \"print r\" \"$test\"  {\n+\t-re -wrap \" = <optimized out>\" {\n+\t    unsupported $test\n+\t}\n+\t-re -wrap \" = ${r}\" {\n+\t    pass $test\n+\t}\n+    }\n+\n+    if { $supported_l } {\n \tgdb_test_no_output \"set variable l = 4\" \\\n \t    \"${prefix}; setting l to 4\"\n \tgdb_test \"print l\" \" = ${new}\" \\\n \t    \"${prefix}; print new l, expecting ${new}\"\n-\tgdb_test \"next\" \"return l \\\\+ r;\" \\\n-\t    \"${prefix}; next over add call\"\n+    }\n+    gdb_test \"next\" \"return l \\\\+ r;\" \\\n+\t\"${prefix}; next over add call\"\n+    if { $supported_l } {\n \tgdb_test \"print l\" \" = ${add}\" \\\n \t    \"${prefix}; print incremented l, expecting ${add}\"\n     }\n@@ -101,20 +112,29 @@ proc up_set { t l r new } {\n     gdb_test \"up\" \"l = add_${t} .l, r.;\" \\\n \t\"${prefix}; up\"\n \n-    set supported 1\n+    set supported_l 1\n     set test \"${prefix}; print old l, expecting ${l}\"\n     gdb_test_multiple \"print l\" \"$test\"  {\n-\t-re \" = <optimized out>\\r\\n$gdb_prompt $\" {\n+\t-re -wrap \" = <optimized out>\" {\n \t    unsupported $test\n-\t    set supported 0\n+\t    set supported_l 0\n \t}\n-\t-re \" = ${l}\\r\\n$gdb_prompt $\" {\n+\t-re -wrap \" = ${l}\" {\n \t    pass $test\n \t}\n     }\n-    if { $supported } {\n-\tgdb_test \"print r\" \" = ${r}\" \\\n-\t    \"${prefix}; print old r, expecting ${r}\"\n+\n+    set test \"${prefix}; print old r, expecting ${r}\"\n+    gdb_test_multiple \"print r\" \"$test\"  {\n+\t-re -wrap \" = <optimized out>\" {\n+\t    unsupported $test\n+\t}\n+\t-re -wrap \" = ${r}\" {\n+\t    pass $test\n+\t}\n+    }\n+\n+    if { $supported_l } {\n \tgdb_test_no_output \"set variable l = 4\" \\\n \t    \"${prefix}; set l to 4\"\n \tgdb_test \"print l\" \" = ${new}\" \\"
    }
  ]
}