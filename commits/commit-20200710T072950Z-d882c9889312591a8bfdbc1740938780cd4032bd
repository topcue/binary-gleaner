{
  "sha": "d882c9889312591a8bfdbc1740938780cd4032bd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDg4MmM5ODg5MzEyNTkxYThiZmRiYzE3NDA5Mzg3ODBjZDQwMzJiZA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-07-10T07:28:49Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-07-10T07:29:50Z"
    },
    "message": "Document powerpc64 ld options\n\n\t* ld.texi (PowerPC64 ELF64): Document --no-inline-optimize,\n\t--power10-stubs and --no-power10-stubs.",
    "tree": {
      "sha": "8623c118daa38f6a21475994b0e49ea058bd0957",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/8623c118daa38f6a21475994b0e49ea058bd0957"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d882c9889312591a8bfdbc1740938780cd4032bd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d882c9889312591a8bfdbc1740938780cd4032bd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d882c9889312591a8bfdbc1740938780cd4032bd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d882c9889312591a8bfdbc1740938780cd4032bd/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d3b10ee787216d304a858246656ed2fdaecdfd93",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d3b10ee787216d304a858246656ed2fdaecdfd93",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d3b10ee787216d304a858246656ed2fdaecdfd93"
    }
  ],
  "stats": {
    "total": 32,
    "additions": 32,
    "deletions": 0
  },
  "files": [
    {
      "sha": "c0bbaf95dfa2c4b10c224f08da1c4c7536fdd632",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d882c9889312591a8bfdbc1740938780cd4032bd/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d882c9889312591a8bfdbc1740938780cd4032bd/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=d882c9889312591a8bfdbc1740938780cd4032bd",
      "patch": "@@ -1,3 +1,8 @@\n+2020-07-10  Alan Modra  <amodra@gmail.com>\n+\n+\t* ld.texi (PowerPC64 ELF64): Document --no-inline-optimize,\n+\t--power10-stubs and --no-power10-stubs.\n+\n 2020-07-10  Alan Modra  <amodra@gmail.com>\n \n \t* emultempl/ppc64elf.em (params): Init new field."
    },
    {
      "sha": "165a3d935e16e9c7497bdf51c1f50ae39bdc2e76",
      "filename": "ld/ld.texi",
      "status": "modified",
      "additions": 27,
      "deletions": 0,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d882c9889312591a8bfdbc1740938780cd4032bd/ld/ld.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d882c9889312591a8bfdbc1740938780cd4032bd/ld/ld.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ld.texi?ref=d882c9889312591a8bfdbc1740938780cd4032bd",
      "patch": "@@ -7823,6 +7823,16 @@ reliably for compiler generated code, but may be incorrect if assembly\n code is used to insert TOC entries.  Use this option to disable the\n optimization.\n \n+@cindex PowerPC64 inline PLT call optimization\n+@kindex --no-inline-optimize\n+@item --no-inline-optimize\n+PowerPC64 @command{ld} normally replaces inline PLT call sequences\n+marked with @code{R_PPC64_PLTSEQ}, @code{R_PPC64_PLTCALL},\n+@code{R_PPC64_PLT16_HA} and @code{R_PPC64_PLT16_LO_DS} relocations by\n+a number of @code{nop}s and a direct call when the function is defined\n+locally and can't be overridden by some other definition.  This option\n+disables that optimization.\n+\n @cindex PowerPC64 multi-TOC\n @kindex --no-multi-toc\n @item --no-multi-toc\n@@ -7904,6 +7914,23 @@ including system libraries, can cause a function that was localentry:0\n to become localentry:8.  This will result in a dynamic loader\n complaint and failure to run.  The option is experimental, use with\n care.  @option{--no-plt-localentry} is the default.\n+\n+@cindex PowerPC64 Power10 stubs\n+@kindex --power10-stubs\n+@kindex --no-power10-stubs\n+@item --power10-stubs\n+@itemx --no-power10-stubs\n+When PowerPC64 @command{ld} links input object files containing\n+relocations used on power10 prefixed instructions it normally creates\n+linkage stubs (PLT call and long branch) using power10 instructions.\n+In particular for @code{@@notoc} PLT calls where @code{r2} is not\n+known the power10 stubs are smaller and faster, so are preferred for\n+power10.  @option{--power10-stubs} and @option{--no-power10-stubs}\n+allow you to override the linker's selection of stub instructions.\n+For example, when linking a shared library that contains cpu-optimized\n+versions of functions for both power9 and power10, you might use\n+@option{--no-power10-stubs} so that power9 code making calls doesn't\n+attempt to execute power10 instructions.\n @end table\n \n @ifclear GENERIC"
    }
  ]
}