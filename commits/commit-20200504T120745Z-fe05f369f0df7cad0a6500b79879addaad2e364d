{
  "sha": "fe05f369f0df7cad0a6500b79879addaad2e364d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmUwNWYzNjlmMGRmN2NhZDBhNjUwMGI3OTg3OWFkZGFhZDJlMzY0ZA==",
  "commit": {
    "author": {
      "name": "Andre Simoes Dias Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2020-05-04T12:05:42Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2020-05-04T12:07:45Z"
    },
    "message": "gas: PR 25863: Fix scalar vmul inside it block when assembling for MVE\n\nThis fixes PR 25863 by fixing the condition in the parsing of vmul in\ndo_mve_vmull.  It also simplifies the code in there fixing latent issues that\nwould lead to NEON code being accepted when it shouldn't.\n\ngas/ChangeLog:\n2020-05-04  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\tPR gas/25863\n\t* config/tc-arm.c (do_mve_vmull): Fix scalar and NEON parsing of vmul.\n\t* testsuite/gas/arm/mve-scalar-vmult-it.d: New test.\n\t* testsuite/gas/arm/mve-scalar-vmult-it.s: New test.",
    "tree": {
      "sha": "f853042df0e8d3aa491deb65bdfe6021f620ff96",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f853042df0e8d3aa491deb65bdfe6021f620ff96"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fe05f369f0df7cad0a6500b79879addaad2e364d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fe05f369f0df7cad0a6500b79879addaad2e364d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fe05f369f0df7cad0a6500b79879addaad2e364d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fe05f369f0df7cad0a6500b79879addaad2e364d/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4706679daca21b5d637afaf5b55858b26f0f8c16",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4706679daca21b5d637afaf5b55858b26f0f8c16",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4706679daca21b5d637afaf5b55858b26f0f8c16"
    }
  ],
  "stats": {
    "total": 35,
    "additions": 26,
    "deletions": 9
  },
  "files": [
    {
      "sha": "20ae817834024e3af32df5a420e7706113f15361",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=fe05f369f0df7cad0a6500b79879addaad2e364d",
      "patch": "@@ -1,3 +1,10 @@\n+2020-05-04  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n+\n+\tPR gas/25863\n+\t* config/tc-arm.c (do_mve_vmull): Fix scalar and NEON parsing of vmul.\n+\t* testsuite/gas/arm/mve-scalar-vmult-it.d: New test.\n+\t* testsuite/gas/arm/mve-scalar-vmult-it.s: New test.\n+\n 2020-05-04  Nick Clifton  <nickc@redhat.com>\n \n \tPR 25917"
    },
    {
      "sha": "12ca245cbc7e616a6a5be635a9c026014ebf0d34",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 3,
      "deletions": 9,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=fe05f369f0df7cad0a6500b79879addaad2e364d",
      "patch": "@@ -18273,19 +18273,13 @@ do_mve_vmull (void)\n \n   enum neon_shape rs = neon_select_shape (NS_HHH, NS_FFF, NS_DDD, NS_DDS,\n \t\t\t\t\t  NS_QQS, NS_QQQ, NS_QQR, NS_NULL);\n-  if (!ARM_CPU_HAS_FEATURE (cpu_variant, mve_ext)\n-      && inst.cond == COND_ALWAYS\n+  if (inst.cond == COND_ALWAYS\n       && ((unsigned)inst.instruction) == M_MNEM_vmullt)\n     {\n+\n       if (rs == NS_QQQ)\n \t{\n-\n-\t  struct neon_type_el et = neon_check_type (3, rs, N_EQK , N_EQK,\n-\t\t\t\t\t\t    N_SUF_32 | N_F64 | N_P8\n-\t\t\t\t\t\t    | N_P16 | N_I_MVE | N_KEY);\n-\t  if (((et.type == NT_poly) && et.size == 8\n-\t       && ARM_CPU_IS_ANY (cpu_variant))\n-\t      || (et.type == NT_integer) || (et.type == NT_float))\n+\t  if (!ARM_CPU_HAS_FEATURE (cpu_variant, mve_ext))\n \t    goto neon_vmul;\n \t}\n       else"
    },
    {
      "sha": "f4564a5e80b55e50cadcfb9739c6178a78855484",
      "filename": "gas/testsuite/gas/arm/mve-scalar-vmul-it.d",
      "status": "added",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/testsuite/gas/arm/mve-scalar-vmul-it.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/testsuite/gas/arm/mve-scalar-vmul-it.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-scalar-vmul-it.d?ref=fe05f369f0df7cad0a6500b79879addaad2e364d",
      "patch": "@@ -0,0 +1,11 @@\n+# name: Armv8.1-M Mainline scalar vmul instructions in it blocks (with MVE)\n+# as: -march=armv8.1-m.main+mve.fp+fp.dp\n+# objdump: -dr --prefix-addresses --show-raw-insn -marmv8.1-m.main\n+\n+.*: +file format .*arm.*\n+\n+Disassembly of section .text:\n+[^>]*> bfbc      \titt\tlt\n+[^>]*> ee20 0a81 \tvmullt.f32\ts0, s1, s2\n+[^>]*> ee21 0b02 \tvmullt.f64\td0, d1, d2\n+#..."
    },
    {
      "sha": "e6c24acdfcc61b371c796b4f18fb7d39997a1f15",
      "filename": "gas/testsuite/gas/arm/mve-scalar-vmul-it.s",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/testsuite/gas/arm/mve-scalar-vmul-it.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fe05f369f0df7cad0a6500b79879addaad2e364d/gas/testsuite/gas/arm/mve-scalar-vmul-it.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/mve-scalar-vmul-it.s?ref=fe05f369f0df7cad0a6500b79879addaad2e364d",
      "patch": "@@ -0,0 +1,5 @@\n+.syntax unified\n+.text\n+itt lt\n+vmullt.f32 s0, s1, s2\n+vmullt.f64 d0, d1, d2"
    }
  ]
}