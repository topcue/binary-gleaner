{
  "sha": "15310fd4eb59093f0c394f7b3644a814b5422403",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTUzMTBmZDRlYjU5MDkzZjBjMzk0ZjdiMzY0NGE4MTRiNTQyMjQwMw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-03-18T15:01:10Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-03-18T18:08:41Z"
    },
    "message": "Reimplement dwarf_unit_type_name\n\nI noticed that dwarf_unit_type_name is nearly identical to\nget_DW_UT_name from libiberty; but rather than simply replacing it, it\nseemed better to have it work like the other DWARF constant\nstringification functions -- return a string showing unrecognized\nnumeric forms rather than nullptr.  (The previous code did include\nnumeric values for the recognized constants, but this seems to be not\nthat useful to me.)\n\n2021-03-18  Tom Tromey  <tromey@adacore.com>\n\n\t* dwarf2/stringify.c (dwarf_unit_type_name): New function.  Use\n\tget_DW_UT_name.\n\t* dwarf2/stringify.h (dwarf_unit_type_name): Declare.\n\t* dwarf2/comp-unit.c (dwarf_unit_type_name): Remove.",
    "tree": {
      "sha": "70efc7e27dd648251836f302ce14ec40a1eab425",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/70efc7e27dd648251836f302ce14ec40a1eab425"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/15310fd4eb59093f0c394f7b3644a814b5422403",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/15310fd4eb59093f0c394f7b3644a814b5422403",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/15310fd4eb59093f0c394f7b3644a814b5422403",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/15310fd4eb59093f0c394f7b3644a814b5422403/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "763b8efdcc0ab0f94f7af48792eb5c97b6eca41b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/763b8efdcc0ab0f94f7af48792eb5c97b6eca41b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/763b8efdcc0ab0f94f7af48792eb5c97b6eca41b"
    }
  ],
  "stats": {
    "total": 52,
    "additions": 24,
    "deletions": 28
  },
  "files": [
    {
      "sha": "11e9ea9c97c54b29d0e5d211d2b4e9c05e6c73c7",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=15310fd4eb59093f0c394f7b3644a814b5422403",
      "patch": "@@ -1,3 +1,10 @@\n+2021-03-18  Tom Tromey  <tromey@adacore.com>\n+\n+\t* dwarf2/stringify.c (dwarf_unit_type_name): New function.  Use\n+\tget_DW_UT_name.\n+\t* dwarf2/stringify.h (dwarf_unit_type_name): Declare.\n+\t* dwarf2/comp-unit.c (dwarf_unit_type_name): Remove.\n+\n 2021-03-18  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* python/py-param.c (get_set_value): Update header comment."
    },
    {
      "sha": "ce3b55778f4bba141824eed121524d61af9a3679",
      "filename": "gdb/dwarf2/comp-unit.c",
      "status": "modified",
      "additions": 1,
      "deletions": 28,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/comp-unit.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/comp-unit.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/comp-unit.c?ref=15310fd4eb59093f0c394f7b3644a814b5422403",
      "patch": "@@ -29,34 +29,7 @@\n #include \"dwarf2/leb.h\"\n #include \"dwarf2/read.h\"\n #include \"dwarf2/section.h\"\n-\n-/* Convert a unit type to corresponding DW_UT name.  */\n-\n-static const char *\n-dwarf_unit_type_name (int unit_type)\n-{\n-  switch (unit_type)\n-    {\n-      case 0x01:\n-\treturn \"DW_UT_compile (0x01)\";\n-      case 0x02:\n-\treturn \"DW_UT_type (0x02)\";\n-      case 0x03:\n-\treturn \"DW_UT_partial (0x03)\";\n-      case 0x04:\n-\treturn \"DW_UT_skeleton (0x04)\";\n-      case 0x05:\n-\treturn \"DW_UT_split_compile (0x05)\";\n-      case 0x06:\n-\treturn \"DW_UT_split_type (0x06)\";\n-      case 0x80:\n-\treturn \"DW_UT_lo_user (0x80)\";\n-      case 0xff:\n-\treturn \"DW_UT_hi_user (0xff)\";\n-      default:\n-\treturn nullptr;\n-    }\n-}\n+#include \"dwarf2/stringify.h\"\n \n /* See comp-unit.h.  */\n "
    },
    {
      "sha": "b292f9fccc88c017f38b0f2835f0f5244a52ca1c",
      "filename": "gdb/dwarf2/stringify.c",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/stringify.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/stringify.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/stringify.c?ref=15310fd4eb59093f0c394f7b3644a814b5422403",
      "patch": "@@ -112,3 +112,16 @@ dwarf_type_encoding_name (unsigned enc)\n \n   return name;\n }\n+\n+/* See stringify.h.  */\n+\n+const char *\n+dwarf_unit_type_name (int unit_type)\n+{\n+  const char *name = get_DW_UT_name (unit_type);\n+\n+  if (name == nullptr)\n+    return dwarf_unknown (\"UT\", unit_type);\n+\n+  return name;\n+}"
    },
    {
      "sha": "d2139d91db9a4d048c9cc19f9875b6ecc310c84c",
      "filename": "gdb/dwarf2/stringify.h",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/stringify.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15310fd4eb59093f0c394f7b3644a814b5422403/gdb/dwarf2/stringify.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/stringify.h?ref=15310fd4eb59093f0c394f7b3644a814b5422403",
      "patch": "@@ -35,4 +35,7 @@ extern const char *dwarf_bool_name (unsigned mybool);\n /* Convert a DWARF type code into its string name.  */\n extern const char *dwarf_type_encoding_name (unsigned enc);\n \n+/* Convert a DWARF unit type into is string name.  */\n+extern const char *dwarf_unit_type_name (int unit_type);\n+\n #endif /* GDB_DWARF2_STRINGIFY_H */"
    }
  ]
}