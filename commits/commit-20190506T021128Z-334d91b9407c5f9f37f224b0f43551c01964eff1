{
  "sha": "334d91b9407c5f9f37f224b0f43551c01964eff1",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzM0ZDkxYjk0MDdjNWY5ZjM3ZjIyNGIwZjQzNTUxYzAxOTY0ZWZmMQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-05-05T23:13:32Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-05-06T02:11:28Z"
    },
    "message": "PowerPC reloc symbols that shouldn't be adjusted\n\nGOT and PLT relocs shouldn't have their symbols replaced with a\nsection symbol plus added.  Nor should the HIGHA TLS relocations,\nwhich failed to be caught by the range test in ppc_fix_adjustable.\n\nbfd/\n\t* reloc.c (BFD_RELOC_PPC64_TPREL16_HIGH, BFD_RELOC_PPC64_TPREL16_HIGHA),\n\t(BFD_RELOC_PPC64_DTPREL16_HIGH, BFD_RELOC_PPC64_DTPREL16_HIGHA):\n\tSort before BFD_RELOC_PPC64_DTPREL16_HIGHESTA entry.\ngas/\n\t* config/tc-ppc.c (ppc_fix_adjustable): Exclude all GOT and PLT\n\trelocs, and VLE sdarel relocs.\n\t* testsuite/gas/ppc/power4.d: Adjust.",
    "tree": {
      "sha": "cbd9f9290f354419eaef60efd05261073ce323b3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/cbd9f9290f354419eaef60efd05261073ce323b3"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/334d91b9407c5f9f37f224b0f43551c01964eff1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/334d91b9407c5f9f37f224b0f43551c01964eff1",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/334d91b9407c5f9f37f224b0f43551c01964eff1",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/334d91b9407c5f9f37f224b0f43551c01964eff1/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "62e6b7b3b3c6f2fffe9f5863ddebf430533b79f0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/62e6b7b3b3c6f2fffe9f5863ddebf430533b79f0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/62e6b7b3b3c6f2fffe9f5863ddebf430533b79f0"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 51,
    "deletions": 17
  },
  "files": [
    {
      "sha": "09070989ca7445a5ee628308c345f65a6ad345a8",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -1,3 +1,11 @@\n+2019-05-06  Alan Modra  <amodra@gmail.com>\n+\n+\t* reloc.c (BFD_RELOC_PPC64_TPREL16_HIGH, BFD_RELOC_PPC64_TPREL16_HIGHA),\n+\t(BFD_RELOC_PPC64_DTPREL16_HIGH, BFD_RELOC_PPC64_DTPREL16_HIGHA):\n+\tSort before BFD_RELOC_PPC64_DTPREL16_HIGHESTA entry.\n+\t* libbfd.h: Regenerate.\n+\t* bfd-in2.h: Regenerate.\n+\n 2019-05-04  Alan Modra  <amodra@gmail.com>\n \n \tPR 24511"
    },
    {
      "sha": "9f60f57df9aa95ae84932f16b68ebe1517e83d41",
      "filename": "bfd/bfd-in2.h",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/bfd-in2.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/bfd-in2.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/bfd-in2.h?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -3521,20 +3521,20 @@ instruction.  */\n   BFD_RELOC_PPC_GOT_DTPREL16_HA,\n   BFD_RELOC_PPC64_TPREL16_DS,\n   BFD_RELOC_PPC64_TPREL16_LO_DS,\n+  BFD_RELOC_PPC64_TPREL16_HIGH,\n+  BFD_RELOC_PPC64_TPREL16_HIGHA,\n   BFD_RELOC_PPC64_TPREL16_HIGHER,\n   BFD_RELOC_PPC64_TPREL16_HIGHERA,\n   BFD_RELOC_PPC64_TPREL16_HIGHEST,\n   BFD_RELOC_PPC64_TPREL16_HIGHESTA,\n   BFD_RELOC_PPC64_DTPREL16_DS,\n   BFD_RELOC_PPC64_DTPREL16_LO_DS,\n+  BFD_RELOC_PPC64_DTPREL16_HIGH,\n+  BFD_RELOC_PPC64_DTPREL16_HIGHA,\n   BFD_RELOC_PPC64_DTPREL16_HIGHER,\n   BFD_RELOC_PPC64_DTPREL16_HIGHERA,\n   BFD_RELOC_PPC64_DTPREL16_HIGHEST,\n   BFD_RELOC_PPC64_DTPREL16_HIGHESTA,\n-  BFD_RELOC_PPC64_TPREL16_HIGH,\n-  BFD_RELOC_PPC64_TPREL16_HIGHA,\n-  BFD_RELOC_PPC64_DTPREL16_HIGH,\n-  BFD_RELOC_PPC64_DTPREL16_HIGHA,\n \n /* IBM 370/390 relocations  */\n   BFD_RELOC_I370_D12,"
    },
    {
      "sha": "d9b7fb7fa51e72ffab243af4ada487c70e0d0678",
      "filename": "bfd/libbfd.h",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/libbfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/libbfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd.h?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -1508,20 +1508,20 @@ static const char *const bfd_reloc_code_real_names[] = { \"@@uninitialized@@\",\n   \"BFD_RELOC_PPC_GOT_DTPREL16_HA\",\n   \"BFD_RELOC_PPC64_TPREL16_DS\",\n   \"BFD_RELOC_PPC64_TPREL16_LO_DS\",\n+  \"BFD_RELOC_PPC64_TPREL16_HIGH\",\n+  \"BFD_RELOC_PPC64_TPREL16_HIGHA\",\n   \"BFD_RELOC_PPC64_TPREL16_HIGHER\",\n   \"BFD_RELOC_PPC64_TPREL16_HIGHERA\",\n   \"BFD_RELOC_PPC64_TPREL16_HIGHEST\",\n   \"BFD_RELOC_PPC64_TPREL16_HIGHESTA\",\n   \"BFD_RELOC_PPC64_DTPREL16_DS\",\n   \"BFD_RELOC_PPC64_DTPREL16_LO_DS\",\n+  \"BFD_RELOC_PPC64_DTPREL16_HIGH\",\n+  \"BFD_RELOC_PPC64_DTPREL16_HIGHA\",\n   \"BFD_RELOC_PPC64_DTPREL16_HIGHER\",\n   \"BFD_RELOC_PPC64_DTPREL16_HIGHERA\",\n   \"BFD_RELOC_PPC64_DTPREL16_HIGHEST\",\n   \"BFD_RELOC_PPC64_DTPREL16_HIGHESTA\",\n-  \"BFD_RELOC_PPC64_TPREL16_HIGH\",\n-  \"BFD_RELOC_PPC64_TPREL16_HIGHA\",\n-  \"BFD_RELOC_PPC64_DTPREL16_HIGH\",\n-  \"BFD_RELOC_PPC64_DTPREL16_HIGHA\",\n   \"BFD_RELOC_I370_D12\",\n   \"BFD_RELOC_CTOR\",\n   \"BFD_RELOC_ARM_PCREL_BRANCH\","
    },
    {
      "sha": "f1465813f778dcc53ae39e1851c4a7b0243ca093",
      "filename": "bfd/reloc.c",
      "status": "modified",
      "additions": 8,
      "deletions": 8,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/reloc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/bfd/reloc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/reloc.c?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -2945,6 +2945,10 @@ ENUMX\n   BFD_RELOC_PPC64_TPREL16_DS\n ENUMX\n   BFD_RELOC_PPC64_TPREL16_LO_DS\n+ENUMX\n+  BFD_RELOC_PPC64_TPREL16_HIGH\n+ENUMX\n+  BFD_RELOC_PPC64_TPREL16_HIGHA\n ENUMX\n   BFD_RELOC_PPC64_TPREL16_HIGHER\n ENUMX\n@@ -2957,6 +2961,10 @@ ENUMX\n   BFD_RELOC_PPC64_DTPREL16_DS\n ENUMX\n   BFD_RELOC_PPC64_DTPREL16_LO_DS\n+ENUMX\n+  BFD_RELOC_PPC64_DTPREL16_HIGH\n+ENUMX\n+  BFD_RELOC_PPC64_DTPREL16_HIGHA\n ENUMX\n   BFD_RELOC_PPC64_DTPREL16_HIGHER\n ENUMX\n@@ -2965,14 +2973,6 @@ ENUMX\n   BFD_RELOC_PPC64_DTPREL16_HIGHEST\n ENUMX\n   BFD_RELOC_PPC64_DTPREL16_HIGHESTA\n-ENUMX\n-  BFD_RELOC_PPC64_TPREL16_HIGH\n-ENUMX\n-  BFD_RELOC_PPC64_TPREL16_HIGHA\n-ENUMX\n-  BFD_RELOC_PPC64_DTPREL16_HIGH\n-ENUMX\n-  BFD_RELOC_PPC64_DTPREL16_HIGHA\n ENUMDOC\n   PowerPC and PowerPC64 thread-local storage relocations.\n "
    },
    {
      "sha": "640fee13c8e4292b7c9deb2800b8025016acb5f4",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -1,3 +1,9 @@\n+2019-05-06  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/tc-ppc.c (ppc_fix_adjustable): Exclude all GOT and PLT\n+\trelocs, and VLE sdarel relocs.\n+\t* testsuite/gas/ppc/power4.d: Adjust.\n+\n 2019-05-05  Alexandre Oliva <aoliva@redhat.com>\n \n \t* dwarf2dbg.c (set_or_check_view): Skip heads when assigning"
    },
    {
      "sha": "d5d51f78f393b7bed2b80eb065260ce687b08df4",
      "filename": "gas/config/tc-ppc.c",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/config/tc-ppc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/config/tc-ppc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-ppc.c?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -6765,7 +6765,27 @@ ppc_fix_adjustable (fixS *fix)\n \t  && fix->fx_r_type != BFD_RELOC_HI16_S_GOTOFF\n \t  && fix->fx_r_type != BFD_RELOC_PPC64_GOT16_DS\n \t  && fix->fx_r_type != BFD_RELOC_PPC64_GOT16_LO_DS\n+\t  && fix->fx_r_type != BFD_RELOC_16_GOT_PCREL\n+\t  && fix->fx_r_type != BFD_RELOC_32_GOTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_24_PLT_PCREL\n+\t  && fix->fx_r_type != BFD_RELOC_32_PLTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_32_PLT_PCREL\n+\t  && fix->fx_r_type != BFD_RELOC_LO16_PLTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_HI16_PLTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_HI16_S_PLTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_64_PLTOFF\n+\t  && fix->fx_r_type != BFD_RELOC_64_PLT_PCREL\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLT16_LO_DS\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16_LO\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16_HI\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16_HA\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16_DS\n+\t  && fix->fx_r_type != BFD_RELOC_PPC64_PLTGOT16_LO_DS\n \t  && fix->fx_r_type != BFD_RELOC_GPREL16\n+\t  && fix->fx_r_type != BFD_RELOC_PPC_VLE_SDAREL_LO16A\n+\t  && fix->fx_r_type != BFD_RELOC_PPC_VLE_SDAREL_HI16A\n+\t  && fix->fx_r_type != BFD_RELOC_PPC_VLE_SDAREL_HA16A\n \t  && fix->fx_r_type != BFD_RELOC_VTABLE_INHERIT\n \t  && fix->fx_r_type != BFD_RELOC_VTABLE_ENTRY\n \t  && !(fix->fx_r_type >= BFD_RELOC_PPC_TLS"
    },
    {
      "sha": "d3e78a6df179e7f16492f0e30e9db52ba391323c",
      "filename": "gas/testsuite/gas/ppc/power4.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/testsuite/gas/ppc/power4.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/334d91b9407c5f9f37f224b0f43551c01964eff1/gas/testsuite/gas/ppc/power4.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/power4.d?ref=334d91b9407c5f9f37f224b0f43551c01964eff1",
      "patch": "@@ -57,7 +57,7 @@ Disassembly of section \\.text:\n .*:\t(e0 c3 00 00|00 00 c3 e0) \tlq      r6,0\\(r3\\)\n .*: R_PPC64_GOT16_LO_DS\tdsym0\n .*:\t(e0 c3 00 00|00 00 c3 e0) \tlq      r6,0\\(r3\\)\n-.*: R_PPC64_PLT16_LO_DS\t\\.data\n+.*: R_PPC64_PLT16_LO_DS\tdsym0\n .*:\t(e0 c3 00 .0|.0 00 c3 e0) \tlq      r6,.*\\(r3\\)\n .*: R_PPC64_SECTOFF_DS\t\\.data\\+0x10\n .*:\t(e0 c3 00 .0|.0 00 c3 e0) \tlq      r6,.*\\(r3\\)"
    }
  ]
}