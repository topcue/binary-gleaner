{
  "sha": "0e5ad4426a0b186290b845852ba9dac112388cbc",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MGU1YWQ0NDI2YTBiMTg2MjkwYjg0NTg1MmJhOWRhYzExMjM4OGNiYw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-12-15T15:07:32Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-12-15T15:07:32Z"
    },
    "message": "Highlight deprecated commands using title style\n\nAfter Andrew's latest patch, I noticed that the deprecation warnings\ncould use the (so-called) title style when printing command names.\nThis patch implements this idea.\n\ngdb/ChangeLog\n2020-12-15  Tom Tromey  <tromey@adacore.com>\n\n\t* cli/cli-decode.c (deprecated_cmd_warning): Use title style for\n\tcommand names.\n\ngdb/testsuite/ChangeLog\n2020-12-15  Tom Tromey  <tromey@adacore.com>\n\n\t* gdb.base/style.exp: Add deprecation tests.",
    "tree": {
      "sha": "721887ddeca2e38709d17d047df4edca4fa6a6f6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/721887ddeca2e38709d17d047df4edca4fa6a6f6"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0e5ad4426a0b186290b845852ba9dac112388cbc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0e5ad4426a0b186290b845852ba9dac112388cbc",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0e5ad4426a0b186290b845852ba9dac112388cbc",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0e5ad4426a0b186290b845852ba9dac112388cbc/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7bed846687589e1346626e8bc9f2948340ef454b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7bed846687589e1346626e8bc9f2948340ef454b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7bed846687589e1346626e8bc9f2948340ef454b"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 32,
    "deletions": 7
  },
  "files": [
    {
      "sha": "e82a7c4526d3a08eb1b3ac0d1bd9e62372df5f5b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=0e5ad4426a0b186290b845852ba9dac112388cbc",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-15  Tom Tromey  <tromey@adacore.com>\n+\n+\t* cli/cli-decode.c (deprecated_cmd_warning): Use title style for\n+\tcommand names.\n+\n 2020-12-14  Tom Tromey  <tom@tromey.com>\n \n \t* dtrace-probe.c (dtrace_process_dof_probe): Use value_type."
    },
    {
      "sha": "fb2856d43330973ed3a208e78d9cdd3231008dbf",
      "filename": "gdb/cli/cli-decode.c",
      "status": "modified",
      "additions": 16,
      "deletions": 7,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/cli/cli-decode.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/cli/cli-decode.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-decode.c?ref=0e5ad4426a0b186290b845852ba9dac112388cbc",
      "patch": "@@ -1939,16 +1939,23 @@ deprecated_cmd_warning (const char *text, struct cmd_list_element *list)\n       tmp_alias_str += std::string (alias->name);\n \n       if (cmd->cmd_deprecated)\n-\tprintf_filtered (_(\"Warning: command '%s' (%s) is deprecated.\\n\"),\n-\t\t\t tmp_cmd_str.c_str (), tmp_alias_str.c_str ());\n+\tprintf_filtered (_(\"Warning: command '%ps' (%ps) is deprecated.\\n\"),\n+\t\t\t styled_string (title_style.style (),\n+\t\t\t\t\ttmp_cmd_str.c_str ()),\n+\t\t\t styled_string (title_style.style (),\n+\t\t\t\t\ttmp_alias_str.c_str ()));\n       else\n-\tprintf_filtered (_(\"Warning: '%s', an alias for the command '%s', \"\n+\tprintf_filtered (_(\"Warning: '%ps', an alias for the command '%ps', \"\n \t\t\t   \"is deprecated.\\n\"),\n-\t\t\t tmp_alias_str.c_str (), tmp_cmd_str.c_str ());\n+\t\t\t styled_string (title_style.style (),\n+\t\t\t\t\ttmp_alias_str.c_str ()),\n+\t\t\t styled_string (title_style.style (),\n+\t\t\t\t\ttmp_cmd_str.c_str ()));\n     }\n   else\n-    printf_filtered (_(\"Warning: command '%s' is deprecated.\\n\"),\n-\t\t     tmp_cmd_str.c_str ());\n+    printf_filtered (_(\"Warning: command '%ps' is deprecated.\\n\"),\n+\t\t     styled_string (title_style.style (),\n+\t\t\t\t    tmp_cmd_str.c_str ()));\n \n   /* Now display a second line indicating what the user should use instead.\n      If it is only the alias that is deprecated, we want to indicate the\n@@ -1959,7 +1966,9 @@ deprecated_cmd_warning (const char *text, struct cmd_list_element *list)\n   else\n     replacement = cmd->replacement;\n   if (replacement != nullptr)\n-    printf_filtered (_(\"Use '%s'.\\n\\n\"), replacement);\n+    printf_filtered (_(\"Use '%ps'.\\n\\n\"),\n+\t\t     styled_string (title_style.style (),\n+\t\t\t\t    replacement));\n   else\n     printf_filtered (_(\"No alternative known.\\n\\n\"));\n "
    },
    {
      "sha": "0e6177b7dd4cedbe55d8ce53adcdb5cd8ef566d9",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=0e5ad4426a0b186290b845852ba9dac112388cbc",
      "patch": "@@ -1,3 +1,7 @@\n+2020-12-15  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gdb.base/style.exp: Add deprecation tests.\n+\n 2020-12-14  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* lib/gdb.exp (gdb_test_multiple): Fix typo in doc."
    },
    {
      "sha": "8d7eaa80b637000cf6037c61669363bee59e474a",
      "filename": "gdb/testsuite/gdb.base/style.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/testsuite/gdb.base/style.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0e5ad4426a0b186290b845852ba9dac112388cbc/gdb/testsuite/gdb.base/style.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style.exp?ref=0e5ad4426a0b186290b845852ba9dac112388cbc",
      "patch": "@@ -172,4 +172,11 @@ save_vars { env(TERM) } {\n \t\"warning: [style .*? file] is not a directory\\\\..*\"\n     gdb_test \"show data-directory\" \\\n \t\"GDB's data directory is \\\"[style .*? file]\\\"\\\\..*\"\n+\n+    # Check that deprecation styles command names.\n+    gdb_test_no_output \"maintenance deprecate p \\\"new_p\\\"\" \\\n+\t\"maintenance deprecate p \\\"new_p\\\" /1/\"\n+    gdb_test \"p 5\" \\\n+\t\"Warning: '[style p title]', an alias for the command '[style print title]', is deprecated.*Use '[style new_p title]'.*\" \\\n+\t\"p deprecated warning, with replacement\"\n }"
    }
  ]
}