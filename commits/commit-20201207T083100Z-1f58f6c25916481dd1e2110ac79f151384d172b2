{
  "sha": "1f58f6c25916481dd1e2110ac79f151384d172b2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MWY1OGY2YzI1OTE2NDgxZGQxZTIxMTBhYzc5ZjE1MTM4NGQxNzJiMg==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-12-07T08:28:33Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-12-07T08:31:00Z"
    },
    "message": "gdb/completer: improve tab completion to consider the '-force-condition' flag\n\nThe commit\n\n  commit 733d554a4625db4ffb89b7a20e1cf27ab071ef4d\n  Author: Tankut Baris Aktemur <tankut.baris.aktemur@intel.com>\n  Date:   Tue Oct 27 10:56:03 2020 +0100\n\n  gdb/breakpoint: add flags to 'condition' and 'break' commands to force condition\n\nintroduced the '-force-condition' flag to the 'break' command.  This\nflag was defined as a keyword like 'thread', 'task', and 'if'.\nHowever, it starts with '-'.  This difference caused an uncovered case\nwhen tab-completing a seemingly complete linespec.\n\nBelow, we see \"-force-condition\" in the completion list, where both\nthe options and the keywords are listed:\n\n  (gdb) break -function main <TAB>\n  -force-condition  -function  -label  -line  -qualified\n  -source           if         task    thread\n\nBut tab-completing '-' lists only options:\n\n  (gdb) break -function main -<TAB>\n  -function   -label      -line       -qualified  -source\n\nThis patch fixes the problem by adding keywords to the completion\nlist, so that we see:\n\n  (gdb) break -function main -<TAB>\n  -force-condition  -function  -label  -line  -qualified  -source\n\ngdb/ChangeLog:\n2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\t* completer.c (complete_explicit_location): Also add keywords\n\tthat start with '-' to the completion list.\n\ngdb/testsuite/ChangeLog:\n2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\t* gdb.linespec/explicit.exp: Extend with a test to check completing\n\t'-' after seemingly complete options.",
    "tree": {
      "sha": "08697c1970cba6268fb5050fbad29b22e2b7bd4e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/08697c1970cba6268fb5050fbad29b22e2b7bd4e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1f58f6c25916481dd1e2110ac79f151384d172b2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1f58f6c25916481dd1e2110ac79f151384d172b2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1f58f6c25916481dd1e2110ac79f151384d172b2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1f58f6c25916481dd1e2110ac79f151384d172b2/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5759831a2d06600a7eae4697417a388444c8e13b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5759831a2d06600a7eae4697417a388444c8e13b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5759831a2d06600a7eae4697417a388444c8e13b"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 29,
    "deletions": 1
  },
  "files": [
    {
      "sha": "bea7a5b67b4a8b2628358861a924537272e63b28",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=1f58f6c25916481dd1e2110ac79f151384d172b2",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\t* completer.c (complete_explicit_location): Also add keywords\n+\tthat start with '-' to the completion list.\n+\n 2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \t* linespec.c (linespec_lexer_lex_keyword): The \"-force-condition\""
    },
    {
      "sha": "7f63ced93d8e486a698c2862fb19dcb77ce0a5f3",
      "filename": "gdb/completer.c",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/completer.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/completer.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/completer.c?ref=1f58f6c25916481dd1e2110ac79f151384d172b2",
      "patch": "@@ -892,7 +892,11 @@ complete_explicit_location (completion_tracker &tracker,\n   int keyword = skip_keyword (tracker, explicit_options, &text);\n \n   if (keyword == -1)\n-    complete_on_enum (tracker, explicit_options, text, text);\n+    {\n+      complete_on_enum (tracker, explicit_options, text, text);\n+      /* There are keywords that start with \"-\".   Include them, too.  */\n+      complete_on_enum (tracker, linespec_keywords, text, text);\n+    }\n   else\n     {\n       /* Completing on value.  */"
    },
    {
      "sha": "f5219ea182fb9ce47c5b92434f085f2c44722f5d",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=1f58f6c25916481dd1e2110ac79f151384d172b2",
      "patch": "@@ -1,3 +1,8 @@\n+2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\t* gdb.linespec/explicit.exp: Extend with a test to check completing\n+\t'-' after seemingly complete options.\n+\n 2020-12-07  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \t* gdb.linespec/keywords.exp: Add tests to check positional"
    },
    {
      "sha": "c33ab505e347256294695a3098ff097351f94167",
      "filename": "gdb/testsuite/gdb.linespec/explicit.exp",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/testsuite/gdb.linespec/explicit.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f58f6c25916481dd1e2110ac79f151384d172b2/gdb/testsuite/gdb.linespec/explicit.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.linespec/explicit.exp?ref=1f58f6c25916481dd1e2110ac79f151384d172b2",
      "patch": "@@ -469,6 +469,20 @@ namespace eval $testfile {\n \t    }\n \t}\n \n+\t# Test that after a seemingly finished option argument,\n+\t# completion for \"-\" matches both the explicit location\n+\t# options and the linespec keywords that start with \"-\".\n+\twith_test_prefix \"complete '-' after options\" {\n+\t    test_gdb_complete_multiple \"b -function myfunction \" \"-\" \"\" {\n+\t\t\"-force-condition\"\n+\t\t\"-function\"\n+\t\t\"-label\"\n+\t\t\"-line\"\n+\t\t\"-qualified\"\n+\t\t\"-source\"\n+\t    }\n+\t}\n+\n \t# Tests that ensure that after \"if\" we complete on expressions\n \t# are in cpcompletion.exp.\n "
    }
  ]
}