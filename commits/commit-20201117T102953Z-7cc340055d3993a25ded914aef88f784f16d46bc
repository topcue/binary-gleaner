{
  "sha": "7cc340055d3993a25ded914aef88f784f16d46bc",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6N2NjMzQwMDU1ZDM5OTNhMjVkZWQ5MTRhZWY4OGY3ODRmMTZkNDZiYw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-11-16T22:08:05Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-11-17T10:29:53Z"
    },
    "message": "PR26882, --enable-textrel-check=warning test failures on powerpc\n\n\tPR 26882\n\t* testsuite/ld-powerpc/dotsym3.d: Add \"-z notext\" to ld options.\n\t* testsuite/ld-powerpc/dotsym4.d: Likewise.\n\t* testsuite/ld-powerpc/ppc476-shared.d: Likewise.\n\t* testsuite/ld-powerpc/ppc476-shared2.d: Likewise.\n\t* testsuite/ld-powerpc/powerpc.exp: Likewise for various tests.\n\t* testsuite/ld-undefined/weak-fundef.s: Add BLPLT variant.\n\t* testsuite/ld-undefined/weak-undef.exp: Define BLPLT for ppc32.",
    "tree": {
      "sha": "bfe3c19a8ebf58690f5f6e811d54ec02434377cb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bfe3c19a8ebf58690f5f6e811d54ec02434377cb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/7cc340055d3993a25ded914aef88f784f16d46bc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7cc340055d3993a25ded914aef88f784f16d46bc",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/7cc340055d3993a25ded914aef88f784f16d46bc",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7cc340055d3993a25ded914aef88f784f16d46bc/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6f2643dbd2192e6fff77a5e6fec5141d209fd7d0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6f2643dbd2192e6fff77a5e6fec5141d209fd7d0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6f2643dbd2192e6fff77a5e6fec5141d209fd7d0"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 24,
    "deletions": 9
  },
  "files": [
    {
      "sha": "7141182900bff3258d2a2b27b0f4f995e0c20fe5",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -1,3 +1,14 @@\n+2020-11-17  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 26882\n+\t* testsuite/ld-powerpc/dotsym3.d: Add \"-z notext\" to ld options.\n+\t* testsuite/ld-powerpc/dotsym4.d: Likewise.\n+\t* testsuite/ld-powerpc/ppc476-shared.d: Likewise.\n+\t* testsuite/ld-powerpc/ppc476-shared2.d: Likewise.\n+\t* testsuite/ld-powerpc/powerpc.exp: Likewise for various tests.\n+\t* testsuite/ld-undefined/weak-fundef.s: Add BLPLT variant.\n+\t* testsuite/ld-undefined/weak-undef.exp: Define BLPLT for ppc32.\n+\n 2020-11-16  Nick Clifton  <nickc@redhat.com>\n \n \t* po/es.po: Updated Spanish translation."
    },
    {
      "sha": "215a9c2a6c120b2ba9afcc1d98caf07c4c4c88ce",
      "filename": "ld/testsuite/ld-powerpc/dotsym3.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/dotsym3.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/dotsym3.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-powerpc/dotsym3.d?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -1,7 +1,7 @@\n #source: nodotsym.s\n #source: dotsymref.s\n #as: -a64\n-#ld: -melf64ppc -Ttext=0x1000 -shared\n+#ld: -melf64ppc -Ttext=0x1000 -shared -z notext\n #objdump: -dR\n \n .*:     file format .*"
    },
    {
      "sha": "d774e83bcf6cba5a5bff62613aa44a05319390d5",
      "filename": "ld/testsuite/ld-powerpc/dotsym4.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/dotsym4.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/dotsym4.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-powerpc/dotsym4.d?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -1,7 +1,7 @@\n #source: dotsymref.s\n #source: nodotsym.s\n #as: -a64\n-#ld: -melf64ppc -Ttext=0x1000 -shared\n+#ld: -melf64ppc -Ttext=0x1000 -shared -z notext\n #objdump: -dR\n \n .*:     file format .*"
    },
    {
      "sha": "2cbefb841c272aefae419ffd3e258a94783e55aa",
      "filename": "ld/testsuite/ld-powerpc/powerpc.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/powerpc.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/powerpc.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-powerpc/powerpc.exp?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -99,7 +99,7 @@ proc supports_ppc64 { } {\n # readelf: Apply readelf options on result.  Compare with regex (last arg).\n \n set ppcelftests {\n-    {\"Reloc section order\" \"-melf32ppc -shared -z nocombreloc\" \"\" \"-a32\" {reloc.s}\n+    {\"Reloc section order\" \"-melf32ppc -shared -z nocombreloc -z notext\" \"\" \"-a32\" {reloc.s}\n      {{objdump -hw reloc.d}} \"reloc.so\"}\n     {\"APUinfo section processing\" \"-melf32ppc\" \"\"\n      \"-a32 -me500\" {apuinfo1.s apuinfo-nul.s apuinfo2.s}\n@@ -134,7 +134,7 @@ set ppcelftests {\n      {{readelf -WSsrl tlsexe32no.r} {objdump -dr tlsexe32no.d}\n       {objdump -sj.got tlsexe32no.g} {objdump -sj.tdata tlsexe32.t}}\n      \"tlsexe32no\"}\n-    {\"TLS32 shared\" \"-shared -melf32ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv tmpdir/tls32.o\" \"\" \"\" {}\n+    {\"TLS32 shared\" \"-shared -melf32ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv -z notext tmpdir/tls32.o\" \"\" \"\" {}\n      {{readelf -WSsrl tlsso32.r} {objdump -dr tlsso32.d}\n       {objdump -sj.got tlsso32.g} {objdump -sj.tdata tlsso32.t}}\n      \"tls32.so\"}\n@@ -202,7 +202,7 @@ set ppc64elftests {\n      {{readelf -WSsrl tlsexeno.r} {objdump -dr tlsexeno.d}\n       {objdump -sj.got tlsexeno.g} {objdump -sj.tdata tlsexe.t}}\n      \"tlsexeno\"}\n-    {\"TLS shared\" \"-shared -melf64ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv tmpdir/tls.o\" \"\" \"\" {}\n+    {\"TLS shared\" \"-shared -melf64ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv -z notext tmpdir/tls.o\" \"\" \"\" {}\n      {{readelf -WSsrl tlsso.r} {objdump -dr tlsso.d}\n       {objdump -sj.got tlsso.g} {objdump -sj.tdata tlsso.t}}\n      \"tls.so\"}\n@@ -229,7 +229,7 @@ set ppc64elftests {\n      {{readelf -WSsrl tlsexetoc.r} {objdump -dr tlsexetocno.d}\n       {objdump -sj.got tlsexetocno.g} {objdump -sj.tdata tlsexetoc.t}}\n      \"tlsexetocno\"}\n-    {\"TLSTOC shared\" \"-shared -melf64ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv tmpdir/tlstoc.o\" \"\" \"\" {}\n+    {\"TLSTOC shared\" \"-shared -melf64ppc --no-plt-align --no-ld-generated-unwind-info --hash-style=sysv -z notext tmpdir/tlstoc.o\" \"\" \"\" {}\n      {{readelf -WSsrl tlstocso.r} {objdump -dr tlstocso.d}\n       {objdump -sj.got tlstocso.g} {objdump -sj.tdata tlstocso.t}}\n      \"tlstoc.so\"}"
    },
    {
      "sha": "3b2cc8a155cc89b44c57c0c163191e1fccc1ed6e",
      "filename": "ld/testsuite/ld-powerpc/ppc476-shared.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/ppc476-shared.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/ppc476-shared.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-powerpc/ppc476-shared.d?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -1,6 +1,6 @@\n #source: ppc476-shared.s\n #as: -a32\n-#ld: -melf32ppc -q -shared -z common-page-size=0x10000 --ppc476-workaround -T ppc476-shared.lnk\n+#ld: -melf32ppc -q -shared -z common-page-size=0x10000 -z notext --ppc476-workaround -T ppc476-shared.lnk\n #objdump: -dr\n #target: powerpc*-*-*\n "
    },
    {
      "sha": "48917fd4d92ff433e89111fefeddcabe0088fe49",
      "filename": "ld/testsuite/ld-powerpc/ppc476-shared2.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/ppc476-shared2.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-powerpc/ppc476-shared2.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-powerpc/ppc476-shared2.d?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -1,6 +1,6 @@\n #source: ppc476-shared.s\n #as: -a32\n-#ld: -melf32ppc -shared -z common-page-size=0x10000 --ppc476-workaround -T ppc476-shared.lnk\n+#ld: -melf32ppc -shared -z common-page-size=0x10000 -z notext --ppc476-workaround -T ppc476-shared.lnk\n #objdump: -R\n #target: powerpc*-*-*\n "
    },
    {
      "sha": "de8f641b6c2905067fe8771326818e93ff095358",
      "filename": "ld/testsuite/ld-undefined/weak-fundef.s",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-undefined/weak-fundef.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-undefined/weak-fundef.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-undefined/weak-fundef.s?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -5,6 +5,9 @@\n \tbl undef_weak_fun\n \tnop\n  .endif\n+ .ifdef BLPLT\n+\tbl undef_weak_fun@plt\n+ .endif\n  .ifdef CALLPLT\n \tcall undef_weak_fun@plt\n  .endif"
    },
    {
      "sha": "14b6774c5bc0078457a719a2f69722b90942f017",
      "filename": "ld/testsuite/ld-undefined/weak-undef.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-undefined/weak-undef.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7cc340055d3993a25ded914aef88f784f16d46bc/ld/testsuite/ld-undefined/weak-undef.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-undefined/weak-undef.exp?ref=7cc340055d3993a25ded914aef88f784f16d46bc",
      "patch": "@@ -105,7 +105,8 @@ set asflags \"\"\n switch -glob $target_triplet {\n     aarch64* -\n     arm* -\n-    powerpc* { set asflags \"--defsym BL=1\" }\n+    powerpc64* { set asflags \"--defsym BL=1\" }\n+    powerpc* { set asflags \"--defsym BLPLT=1\" }\n     hppa* { set asflags \"--defsym HPPA=1\" }\n     i\\[3-7\\]86* -\n     x86_64* { set asflags \"--defsym CALLPLT=1\" }"
    }
  ]
}