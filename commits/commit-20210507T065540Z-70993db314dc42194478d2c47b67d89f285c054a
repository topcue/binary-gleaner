{
  "sha": "70993db314dc42194478d2c47b67d89f285c054a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzA5OTNkYjMxNGRjNDIxOTQ0NzhkMmM0N2I2N2Q4OWYyODVjMDU0YQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-07T01:54:10Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-07T06:55:40Z"
    },
    "message": "multiple definition warnings from script symbols\n\nIn commit 89753bbf81 I enabled a warning for scripts redefining\nsymbols.  The idea was to not warn for symbols defined by shared\nlibraries (the h->u.def.section->output_section != NULL test), but the\ntest failed to take into account absolute symbols.  Absolute symbols\ndefined in shared libraries are currently indistinguishable from\nabsolute symbols defined in relocatable objects, at least when only\nlooking at struct bfd_link_hash_entry.  So, don't warn for any\nabsolute symbols.\n\n\t* ldexp.c (update_definedness): Don't return false for absolute\n\tsymbols.\n\t* ldmain.c (multiple_definition): Print \"warning: \" in message\n\twhen not a hard error.",
    "tree": {
      "sha": "728ce7254d2d17cf617b788f1b2b5b2edc7b271e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/728ce7254d2d17cf617b788f1b2b5b2edc7b271e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/70993db314dc42194478d2c47b67d89f285c054a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/70993db314dc42194478d2c47b67d89f285c054a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/70993db314dc42194478d2c47b67d89f285c054a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/70993db314dc42194478d2c47b67d89f285c054a/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "44056b7ce43618094e61bf856d77c798628cac83",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/44056b7ce43618094e61bf856d77c798628cac83",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/44056b7ce43618094e61bf856d77c798628cac83"
    }
  ],
  "stats": {
    "total": 18,
    "additions": 14,
    "deletions": 4
  },
  "files": [
    {
      "sha": "fa367d3e69c582233c116d0be75a865dee55cb1e",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/70993db314dc42194478d2c47b67d89f285c054a/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/70993db314dc42194478d2c47b67d89f285c054a/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=70993db314dc42194478d2c47b67d89f285c054a",
      "patch": "@@ -1,3 +1,10 @@\n+2021-05-07  Alan Modra  <amodra@gmail.com>\n+\n+\t* ldexp.c (update_definedness): Don't return false for absolute\n+\tsymbols.\n+\t* ldmain.c (multiple_definition): Print \"warning: \" in message\n+\twhen not a hard error.\n+\n 2021-05-07  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/ld-elf/pr27825-1.d: Correct xfail."
    },
    {
      "sha": "02c76f8b33c22dd6235aec8ef49aac68d299267f",
      "filename": "ld/ldexp.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/70993db314dc42194478d2c47b67d89f285c054a/ld/ldexp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/70993db314dc42194478d2c47b67d89f285c054a/ld/ldexp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldexp.c?ref=70993db314dc42194478d2c47b67d89f285c054a",
      "patch": "@@ -325,6 +325,7 @@ update_definedness (const char *name, struct bfd_link_hash_entry *h)\n       defentry->by_object = 1;\n       if (h->type == bfd_link_hash_defined\n \t  && h->u.def.section->output_section != NULL\n+\t  && !bfd_is_abs_section (h->u.def.section)\n \t  && !h->linker_def)\n \tret = false;\n     }"
    },
    {
      "sha": "42660eb9a3ce309b9ee98b27ebcea0d392dfef67",
      "filename": "ld/ldmain.c",
      "status": "modified",
      "additions": 6,
      "deletions": 4,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/70993db314dc42194478d2c47b67d89f285c054a/ld/ldmain.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/70993db314dc42194478d2c47b67d89f285c054a/ld/ldmain.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldmain.c?ref=70993db314dc42194478d2c47b67d89f285c054a",
      "patch": "@@ -1073,10 +1073,12 @@ multiple_definition (struct bfd_link_info *info,\n       nval = oval;\n       obfd = NULL;\n     }\n-  if (!info->warn_multiple_definition)\n-    einfo (\"%X\");\n-  einfo (_(\"%P: %C: multiple definition of `%pT'\"),\n-\t nbfd, nsec, nval, name);\n+  if (info->warn_multiple_definition)\n+    einfo (_(\"%P: %C: warning: multiple definition of `%pT'\"),\n+\t   nbfd, nsec, nval, name);\n+  else\n+    einfo (_(\"%X%P: %C: multiple definition of `%pT'\"),\n+\t   nbfd, nsec, nval, name);\n   if (obfd != NULL)\n     einfo (_(\"; %D: first defined here\"), obfd, osec, oval);\n   einfo (\"\\n\");"
    }
  ]
}