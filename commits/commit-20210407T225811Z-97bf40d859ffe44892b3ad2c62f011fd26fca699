{
  "sha": "97bf40d859ffe44892b3ad2c62f011fd26fca699",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTdiZjQwZDg1OWZmZTQ0ODkyYjNhZDJjNjJmMDExZmQyNmZjYTY5OQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-04-04T22:47:06Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-04-07T22:58:11Z"
    },
    "message": "PR27676, PowerPC missing extended dcbt, dcbtst mnemonics\n\nNote that this doesn't implement the ISA to the letter regarding\ndcbtds (and dcbtstds), which says that the TH field may be zero.  That\ndoesn't make sense because allowing TH=0 would mean you no long have a\ndcbtds but rather a dcbtct instruction.  I'm interpreting the ISA\nwording about allowing TH=0 to mean that the TH field of dcbtds is\noptional (in which case the TH value is 0b1000).\n\nopcodes/\n\tPR 27676\n\t* ppc-opc.c (DCBT_EO): Move earlier.\n\t(insert_thct, extract_thct, insert_thds, extract_thds): New functions.\n\t(powerpc_operands): Add THCT and THDS entries.\n\t(powerpc_opcodes): Add dcbtstct, dcbtstds, dcbna, dcbtct, dcbtds.\ngas/\n\t* testsuite/gas/ppc/pr27676.d,\n\t* testsuite/gas/ppc/pr27676.s: New test.\n\t* testsuite/gas/ppc/ppc.exp: Run it.\n\t* testsuite/gas/ppc/dcbt.d: Update.\n\t* testsuite/gas/ppc/power4_32.d: Update.",
    "tree": {
      "sha": "683ce48a3eb768ba21d6ad1127f5c12d597aa400",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/683ce48a3eb768ba21d6ad1127f5c12d597aa400"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/97bf40d859ffe44892b3ad2c62f011fd26fca699",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/97bf40d859ffe44892b3ad2c62f011fd26fca699",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/97bf40d859ffe44892b3ad2c62f011fd26fca699",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/97bf40d859ffe44892b3ad2c62f011fd26fca699/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e97007b64a388ece1789f6c2cd51d2768e3b4829",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e97007b64a388ece1789f6c2cd51d2768e3b4829",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e97007b64a388ece1789f6c2cd51d2768e3b4829"
    }
  ],
  "stats": {
    "total": 264,
    "additions": 253,
    "deletions": 11
  },
  "files": [
    {
      "sha": "ba23cc2e007a831cfe56f294dacb2ba442f33f88",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -1,3 +1,11 @@\n+2021-04-08  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/gas/ppc/pr27676.d,\n+\t* testsuite/gas/ppc/pr27676.s: New test.\n+\t* testsuite/gas/ppc/ppc.exp: Run it.\n+\t* testsuite/gas/ppc/dcbt.d: Update.\n+\t* testsuite/gas/ppc/power4_32.d: Update.\n+\n 2021-04-07  Alan Modra  <amodra@gmail.com>\n \n \tPR 27217"
    },
    {
      "sha": "0a213fd9b7931080ab4fa9d5f9ec27f8a3ff34b8",
      "filename": "gas/testsuite/gas/ppc/dcbt.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/dcbt.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/dcbt.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/dcbt.d?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -6,4 +6,4 @@\n Disassembly of section \\.text:\n \n .*:\n-   0:\t(7d 40 5a 2c|2c 5a 40 7d) \tdcbt    0,r11,10\n+   0:\t(7d 40 5a 2c|2c 5a 40 7d) \tdcbtds  0,r11,10"
    },
    {
      "sha": "8396d7d294fb0038f21abc9d5ff507d078c3567a",
      "filename": "gas/testsuite/gas/ppc/power4_32.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/power4_32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/power4_32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/power4_32.d?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -41,7 +41,7 @@ Disassembly of section \\.text:\n   7c:\t(7c 01 17 ec|ec 17 01 7c) \tdcbz    r1,r2\n   80:\t(7c 23 27 ec|ec 27 23 7c) \tdcbzl   r3,r4\n   84:\t(7c 05 37 ec|ec 37 05 7c) \tdcbz    r5,r6\n-  88:\t(7c 05 32 2c|2c 32 05 7c) \tdcbt    r5,r6\n-  8c:\t(7c 05 32 2c|2c 32 05 7c) \tdcbt    r5,r6\n-  90:\t(7d 05 32 2c|2c 32 05 7d) \tdcbt    r5,r6,8\n+  88:\t(7c 05 32 2c|2c 32 05 7c) \tdcbtct  r5,r6\n+  8c:\t(7c 05 32 2c|2c 32 05 7c) \tdcbtct  r5,r6\n+  90:\t(7d 05 32 2c|2c 32 05 7d) \tdcbtds  r5,r6\n #pass"
    },
    {
      "sha": "560d927e7edd0152b03fa15b12b270db418f38a8",
      "filename": "gas/testsuite/gas/ppc/ppc.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/ppc.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/ppc.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/ppc.exp?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -150,3 +150,4 @@ run_dump_test \"rop\"\n run_dump_test \"rop-checks\"\n \n run_dump_test \"dcbt\"\n+run_dump_test \"pr27676\""
    },
    {
      "sha": "55e16391f13da716e07f95f9ff4163e14c3f86e4",
      "filename": "gas/testsuite/gas/ppc/pr27676.d",
      "status": "added",
      "additions": 79,
      "deletions": 0,
      "changes": 79,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/pr27676.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/pr27676.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/pr27676.d?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -0,0 +1,79 @@\n+#as: -mpower10\n+#objdump: -dr -Mpower10\n+\n+.*:     file format .*\n+\n+Disassembly of section \\.text:\n+\n+0+ <\\.text>:\n+   0:\t(7c 03 22 2c|2c 22 03 7c) \tdcbtct  r3,r4\n+   4:\t(7c 23 22 2c|2c 22 23 7c) \tdcbtct  r3,r4,1\n+   8:\t(7c 43 22 2c|2c 22 43 7c) \tdcbtct  r3,r4,2\n+   c:\t(7c 63 22 2c|2c 22 63 7c) \tdcbtct  r3,r4,3\n+  10:\t(7c 83 22 2c|2c 22 83 7c) \tdcbtct  r3,r4,4\n+  14:\t(7c a3 22 2c|2c 22 a3 7c) \tdcbtct  r3,r4,5\n+  18:\t(7c c3 22 2c|2c 22 c3 7c) \tdcbtct  r3,r4,6\n+  1c:\t(7c e3 22 2c|2c 22 e3 7c) \tdcbtct  r3,r4,7\n+  20:\t(7d 03 22 2c|2c 22 03 7d) \tdcbtds  r3,r4\n+  24:\t(7d 23 22 2c|2c 22 23 7d) \tdcbtds  r3,r4,9\n+  28:\t(7d 43 22 2c|2c 22 43 7d) \tdcbtds  r3,r4,10\n+  2c:\t(7d 63 22 2c|2c 22 63 7d) \tdcbtds  r3,r4,11\n+  30:\t(7d 83 22 2c|2c 22 83 7d) \tdcbtds  r3,r4,12\n+  34:\t(7d a3 22 2c|2c 22 a3 7d) \tdcbtds  r3,r4,13\n+  38:\t(7d c3 22 2c|2c 22 c3 7d) \tdcbtds  r3,r4,14\n+  3c:\t(7d e3 22 2c|2c 22 e3 7d) \tdcbtds  r3,r4,15\n+  40:\t(7e 03 22 2c|2c 22 03 7e) \tdcbtt   r3,r4\n+  44:\t(7e 23 22 2c|2c 22 23 7e) \tdcbna   r3,r4\n+  48:\t(7e 43 22 2c|2c 22 43 7e) \tdcbt    r3,r4,18\n+  4c:\t(7e 63 22 2c|2c 22 63 7e) \tdcbt    r3,r4,19\n+  50:\t(7e 83 22 2c|2c 22 83 7e) \tdcbt    r3,r4,20\n+  54:\t(7e a3 22 2c|2c 22 a3 7e) \tdcbt    r3,r4,21\n+  58:\t(7e c3 22 2c|2c 22 c3 7e) \tdcbt    r3,r4,22\n+  5c:\t(7e e3 22 2c|2c 22 e3 7e) \tdcbt    r3,r4,23\n+  60:\t(7f 03 22 2c|2c 22 03 7f) \tdcbt    r3,r4,24\n+  64:\t(7f 23 22 2c|2c 22 23 7f) \tdcbt    r3,r4,25\n+  68:\t(7f 43 22 2c|2c 22 43 7f) \tdcbt    r3,r4,26\n+  6c:\t(7f 63 22 2c|2c 22 63 7f) \tdcbt    r3,r4,27\n+  70:\t(7f 83 22 2c|2c 22 83 7f) \tdcbt    r3,r4,28\n+  74:\t(7f a3 22 2c|2c 22 a3 7f) \tdcbt    r3,r4,29\n+  78:\t(7f c3 22 2c|2c 22 c3 7f) \tdcbt    r3,r4,30\n+  7c:\t(7f e3 22 2c|2c 22 e3 7f) \tdcbt    r3,r4,31\n+  80:\t(7c 05 32 2c|2c 32 05 7c) \tdcbtct  r5,r6\n+  84:\t(7d 05 32 2c|2c 32 05 7d) \tdcbtds  r5,r6\n+  88:\t(7e 05 32 2c|2c 32 05 7e) \tdcbtt   r5,r6\n+  8c:\t(7e 25 32 2c|2c 32 25 7e) \tdcbna   r5,r6\n+  90:\t(7c 03 21 ec|ec 21 03 7c) \tdcbtstct r3,r4\n+  94:\t(7c 23 21 ec|ec 21 23 7c) \tdcbtstct r3,r4,1\n+  98:\t(7c 43 21 ec|ec 21 43 7c) \tdcbtstct r3,r4,2\n+  9c:\t(7c 63 21 ec|ec 21 63 7c) \tdcbtstct r3,r4,3\n+  a0:\t(7c 83 21 ec|ec 21 83 7c) \tdcbtstct r3,r4,4\n+  a4:\t(7c a3 21 ec|ec 21 a3 7c) \tdcbtstct r3,r4,5\n+  a8:\t(7c c3 21 ec|ec 21 c3 7c) \tdcbtstct r3,r4,6\n+  ac:\t(7c e3 21 ec|ec 21 e3 7c) \tdcbtstct r3,r4,7\n+  b0:\t(7d 03 21 ec|ec 21 03 7d) \tdcbtstds r3,r4\n+  b4:\t(7d 23 21 ec|ec 21 23 7d) \tdcbtstds r3,r4,9\n+  b8:\t(7d 43 21 ec|ec 21 43 7d) \tdcbtstds r3,r4,10\n+  bc:\t(7d 63 21 ec|ec 21 63 7d) \tdcbtstds r3,r4,11\n+  c0:\t(7d 83 21 ec|ec 21 83 7d) \tdcbtstds r3,r4,12\n+  c4:\t(7d a3 21 ec|ec 21 a3 7d) \tdcbtstds r3,r4,13\n+  c8:\t(7d c3 21 ec|ec 21 c3 7d) \tdcbtstds r3,r4,14\n+  cc:\t(7d e3 21 ec|ec 21 e3 7d) \tdcbtstds r3,r4,15\n+  d0:\t(7e 03 21 ec|ec 21 03 7e) \tdcbtstt r3,r4\n+  d4:\t(7e 23 21 ec|ec 21 23 7e) \tdcbtst  r3,r4,17\n+  d8:\t(7e 43 21 ec|ec 21 43 7e) \tdcbtst  r3,r4,18\n+  dc:\t(7e 63 21 ec|ec 21 63 7e) \tdcbtst  r3,r4,19\n+  e0:\t(7e 83 21 ec|ec 21 83 7e) \tdcbtst  r3,r4,20\n+  e4:\t(7e a3 21 ec|ec 21 a3 7e) \tdcbtst  r3,r4,21\n+  e8:\t(7e c3 21 ec|ec 21 c3 7e) \tdcbtst  r3,r4,22\n+  ec:\t(7e e3 21 ec|ec 21 e3 7e) \tdcbtst  r3,r4,23\n+  f0:\t(7f 03 21 ec|ec 21 03 7f) \tdcbtst  r3,r4,24\n+  f4:\t(7f 23 21 ec|ec 21 23 7f) \tdcbtst  r3,r4,25\n+  f8:\t(7f 43 21 ec|ec 21 43 7f) \tdcbtst  r3,r4,26\n+  fc:\t(7f 63 21 ec|ec 21 63 7f) \tdcbtst  r3,r4,27\n+ 100:\t(7f 83 21 ec|ec 21 83 7f) \tdcbtst  r3,r4,28\n+ 104:\t(7f a3 21 ec|ec 21 a3 7f) \tdcbtst  r3,r4,29\n+ 108:\t(7f c3 21 ec|ec 21 c3 7f) \tdcbtst  r3,r4,30\n+ 10c:\t(7f e3 21 ec|ec 21 e3 7f) \tdcbtst  r3,r4,31\n+ 110:\t(7c 05 31 ec|ec 31 05 7c) \tdcbtstct r5,r6\n+ 114:\t(7d 05 31 ec|ec 31 05 7d) \tdcbtstds r5,r6\n+ 118:\t(7e 05 31 ec|ec 31 05 7e) \tdcbtstt r5,r6"
    },
    {
      "sha": "3186e49a54bcfc1128842355b051f70fdbf70f7c",
      "filename": "gas/testsuite/gas/ppc/pr27676.s",
      "status": "added",
      "additions": 71,
      "deletions": 0,
      "changes": 71,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/pr27676.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/gas/testsuite/gas/ppc/pr27676.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/pr27676.s?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -0,0 +1,71 @@\n+ dcbt 3,4,0\n+ dcbt 3,4,1\n+ dcbt 3,4,2\n+ dcbt 3,4,3\n+ dcbt 3,4,4\n+ dcbt 3,4,5\n+ dcbt 3,4,6\n+ dcbt 3,4,7\n+ dcbt 3,4,8\n+ dcbt 3,4,9\n+ dcbt 3,4,10\n+ dcbt 3,4,11\n+ dcbt 3,4,12\n+ dcbt 3,4,13\n+ dcbt 3,4,14\n+ dcbt 3,4,15\n+ dcbt 3,4,16\n+ dcbt 3,4,17\n+ dcbt 3,4,18\n+ dcbt 3,4,19\n+ dcbt 3,4,20\n+ dcbt 3,4,21\n+ dcbt 3,4,22\n+ dcbt 3,4,23\n+ dcbt 3,4,24\n+ dcbt 3,4,25\n+ dcbt 3,4,26\n+ dcbt 3,4,27\n+ dcbt 3,4,28\n+ dcbt 3,4,29\n+ dcbt 3,4,30\n+ dcbt 3,4,31\n+ dcbtct 5,6\n+ dcbtds 5,6\n+ dcbtt 5,6\n+ dcbna 5,6\n+ dcbtst 3,4,0\n+ dcbtst 3,4,1\n+ dcbtst 3,4,2\n+ dcbtst 3,4,3\n+ dcbtst 3,4,4\n+ dcbtst 3,4,5\n+ dcbtst 3,4,6\n+ dcbtst 3,4,7\n+ dcbtst 3,4,8\n+ dcbtst 3,4,9\n+ dcbtst 3,4,10\n+ dcbtst 3,4,11\n+ dcbtst 3,4,12\n+ dcbtst 3,4,13\n+ dcbtst 3,4,14\n+ dcbtst 3,4,15\n+ dcbtst 3,4,16\n+ dcbtst 3,4,17\n+ dcbtst 3,4,18\n+ dcbtst 3,4,19\n+ dcbtst 3,4,20\n+ dcbtst 3,4,21\n+ dcbtst 3,4,22\n+ dcbtst 3,4,23\n+ dcbtst 3,4,24\n+ dcbtst 3,4,25\n+ dcbtst 3,4,26\n+ dcbtst 3,4,27\n+ dcbtst 3,4,28\n+ dcbtst 3,4,29\n+ dcbtst 3,4,30\n+ dcbtst 3,4,31\n+ dcbtstct 5,6\n+ dcbtstds 5,6\n+ dcbtstt 5,6"
    },
    {
      "sha": "6ed8178b9930b5e9d1bb1174c121344f07aaef15",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -1,3 +1,11 @@\n+2021-04-08  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 27676\n+\t* ppc-opc.c (DCBT_EO): Move earlier.\n+\t(insert_thct, extract_thct, insert_thds, extract_thds): New functions.\n+\t(powerpc_operands): Add THCT and THDS entries.\n+\t(powerpc_opcodes): Add dcbtstct, dcbtstds, dcbna, dcbtct, dcbtds.\n+\n 2021-04-06  Alan Modra  <amodra@gmail.com>\n \n \t* dis-buf.c (generic_symbol_at_address): Return symbol* NULL."
    },
    {
      "sha": "025a2ba2fba7dab236b091752e06fc18ea676121",
      "filename": "opcodes/ppc-opc.c",
      "status": "modified",
      "additions": 82,
      "deletions": 7,
      "changes": 89,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/97bf40d859ffe44892b3ad2c62f011fd26fca699/opcodes/ppc-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/97bf40d859ffe44892b3ad2c62f011fd26fca699/opcodes/ppc-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ppc-opc.c?ref=97bf40d859ffe44892b3ad2c62f011fd26fca699",
      "patch": "@@ -2233,6 +2233,74 @@ extract_sxl (uint64_t insn,\n     return 1;\n   return (insn >> 11) & 0x1;\n }\n+\n+/* The list of embedded processors that use the embedded operand ordering\n+   for the 3 operand dcbt and dcbtst instructions.  */\n+#define DCBT_EO (PPC_OPCODE_E500 | PPC_OPCODE_E500MC | PPC_OPCODE_476 \\\n+\t\t | PPC_OPCODE_A2)\n+\n+/* ISA 2.03 and later specify extended mnemonics dcbtct, dcbtds, and\n+   dcbtstct, dcbtstds with a note saying these should be used in new\n+   programs rather than the base mnemonics \"so that it can be coded\n+   with TH as the last operand for all categories\".  For that reason\n+   the extended mnemonics are enabled in the assembler for the\n+   embedded processors, but not for the disassembler so as to display\n+   the embedded dcbt or dcbtst expected form with TH first for\n+   embedded programmers.  */\n+\n+static uint64_t\n+insert_thct (uint64_t insn,\n+\t    int64_t value,\n+\t    ppc_cpu_t dialect ATTRIBUTE_UNUSED,\n+\t    const char **errmsg)\n+{\n+  if ((uint64_t) value > 7)\n+    *errmsg = _(\"invalid TH value\");\n+  return insn | ((value & 7) << 21);\n+}\n+\n+static int64_t\n+extract_thct (uint64_t insn,\n+\t      ppc_cpu_t dialect,\n+\t      int *invalid)\n+{\n+  /* Missing optional operands have a value of 0.  */\n+  if (*invalid < 0)\n+    return 0;\n+\n+  int64_t value = (insn >> 21) & 0x1f;\n+  if (value > 7 || (dialect & DCBT_EO) != 0)\n+    *invalid = 1;\n+\n+  return value;\n+}\n+\n+static uint64_t\n+insert_thds (uint64_t insn,\n+\t     int64_t value,\n+\t     ppc_cpu_t dialect ATTRIBUTE_UNUSED,\n+\t     const char **errmsg)\n+{\n+  if (value < 8 || value > 15)\n+    *errmsg = _(\"invalid TH value\");\n+  return insn | ((value & 0x1f) << 21);\n+}\n+\n+static int64_t\n+extract_thds (uint64_t insn,\n+\t      ppc_cpu_t dialect,\n+\t      int *invalid)\n+{\n+  /* Missing optional operands have a value of 8.  */\n+  if (*invalid < 0)\n+    return 8;\n+\n+  int64_t value = (insn >> 21) & 0x1f;\n+  if (value < 8 || value > 15 || (dialect & DCBT_EO) != 0)\n+    *invalid = 1;\n+\n+  return value;\n+}\n \f\n /* The operands table.\n \n@@ -2430,10 +2498,18 @@ const struct powerpc_operand powerpc_operands[] =\n #define MO CT\n   { 0x1f, 21, NULL, NULL, PPC_OPERAND_OPTIONAL },\n \n+  /* The TH field in dcbtct.  */\n+#define THCT CT + 1\n+  { 0x1f, 21, insert_thct, extract_thct, PPC_OPERAND_OPTIONAL },\n+\n+  /* The TH field in dcbtds.  */\n+#define THDS THCT + 1\n+  { 0x1f, 21, insert_thds, extract_thds, PPC_OPERAND_OPTIONAL },\n+\n   /* The D field in a D form instruction.  This is a displacement off\n      a register, and implies that the next operand is a register in\n      parentheses.  */\n-#define D CT + 1\n+#define D THDS + 1\n   { 0xffff, 0, NULL, NULL, PPC_OPERAND_PARENS | PPC_OPERAND_SIGNED },\n \n   /* The D8 field in a D form instruction.  This is a displacement off\n@@ -4248,12 +4324,6 @@ const unsigned int num_powerpc_operands = (sizeof (powerpc_operands)\n #define PPCHTM  PPC_OPCODE_POWER8\n #define E200Z4  PPC_OPCODE_E200Z4\n #define PPCLSP  PPC_OPCODE_LSP\n-/* The list of embedded processors that use the embedded operand ordering\n-   for the 3 operand dcbt and dcbtst instructions.  */\n-#define DCBT_EO\t(PPC_OPCODE_E500 | PPC_OPCODE_E500MC | PPC_OPCODE_476 \\\n-\t\t | PPC_OPCODE_A2)\n-\n-\n \f\n /* The opcode table.\n \n@@ -6632,6 +6702,8 @@ const struct powerpc_opcode powerpc_opcodes[] = {\n {\"mtvsrwz\",\tX(31,243),\tXX1RB_MASK,   PPCVSX2,\t0,\t\t{XT6, RA}},\n \n {\"dcbtstt\",\tXRT(31,246,0x10), XRT_MASK,  POWER7,\t0,\t\t{RA0, RB}},\n+{\"dcbtstct\",\tX(31,246),\tX_MASK,\t     POWER4,\t0,\t\t{RA0, RB, THCT}},\n+{\"dcbtstds\",\tX(31,246),\tX_MASK,\t     POWER4,\t0,\t\t{RA0, RB, THDS}},\n {\"dcbtst\",\tX(31,246),\tX_MASK,\t     POWER4,\tDCBT_EO,\t{RA0, RB, CT}},\n {\"dcbtst\",\tX(31,246),\tX_MASK,\t     DCBT_EO,\t0,\t\t{CT, RA0, RB}},\n {\"dcbtst\",\tX(31,246),\tX_MASK,\t     PPC,\tPOWER4|DCBT_EO,\t{RA0, RB}},\n@@ -6683,6 +6755,9 @@ const struct powerpc_opcode powerpc_opcodes[] = {\n {\"lscbx.\",\tXRC(31,277,1),\tX_MASK,\t     M601,\t0,\t\t{RT, RA, RB}},\n \n {\"dcbtt\",\tXRT(31,278,0x10), XRT_MASK,  POWER7,\t0,\t\t{RA0, RB}},\n+{\"dcbna\",\tXRT(31,278,0x11), XRT_MASK,  POWER10,\t0,\t\t{RA0, RB}},\n+{\"dcbtct\",\tX(31,278),\tX_MASK,      POWER4,\t0,\t\t{RA0, RB, THCT}},\n+{\"dcbtds\",\tX(31,278),\tX_MASK,      POWER4,\t0,\t\t{RA0, RB, THDS}},\n {\"dcbt\",\tX(31,278),\tX_MASK,\t     POWER4,\tDCBT_EO,\t{RA0, RB, CT}},\n {\"dcbt\",\tX(31,278),\tX_MASK,\t     DCBT_EO,\t0,\t\t{CT, RA0, RB}},\n {\"dcbt\",\tX(31,278),\tX_MASK,\t     PPC,\tPOWER4|DCBT_EO,\t{RA0, RB}},"
    }
  ]
}