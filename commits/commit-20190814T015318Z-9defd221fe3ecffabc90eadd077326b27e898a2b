{
  "sha": "9defd221fe3ecffabc90eadd077326b27e898a2b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWRlZmQyMjFmZTNlY2ZmYWJjOTBlYWRkMDc3MzI2YjI3ZTg5OGEyYg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-08-14T01:10:20Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-08-14T01:53:18Z"
    },
    "message": "Remove _bfd_dwarf2_find_nearest_line addr_size parameter\n\nThis parameter might appear to be used to set up offset_size, but\nsince git commit 024b2372f5 offset_size is either set from the\ndebug_info data or is set to 4.\n\n\t* dwarf2.c (_bfd_dwarf2_find_nearest_line): Remove addr_size parameter.\n\t* libbfd-in.h  (_bfd_dwarf2_find_nearest_line): Update prototype.\n\t* coffgen.c (coff_find_nearest_line_with_names): Adjust\n\t_bfd_dwarf2_find_nearest_line calls.\n\t* elf.c (_bfd_elf_find_nearest_line, _bfd_elf_find_line): Likewise.\n\t* elf32-arm.c (elf32_arm_find_nearest_line): Likewise.\n\t* elf64-alpha.c (elf64_alpha_find_nearest_line): Likewise.\n\t* elfnn-aarch64.c (elfNN_aarch64_find_nearest_line): Likewise.\n\t* elfxx-mips.c (_bfd_mips_elf_find_nearest_line): Likewise.\n\t* mach-o.c (bfd_mach_o_find_nearest_line): Likewise.\n\t* libbfd.h: Regenerate.",
    "tree": {
      "sha": "2d8df8545bdb384f5b342f39a6762cfb18462f76",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2d8df8545bdb384f5b342f39a6762cfb18462f76"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9defd221fe3ecffabc90eadd077326b27e898a2b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9defd221fe3ecffabc90eadd077326b27e898a2b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9defd221fe3ecffabc90eadd077326b27e898a2b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9defd221fe3ecffabc90eadd077326b27e898a2b/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "414b84043054e9656aad008e6efb49979ec614e9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/414b84043054e9656aad008e6efb49979ec614e9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/414b84043054e9656aad008e6efb49979ec614e9"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 26,
    "deletions": 24
  },
  "files": [
    {
      "sha": "a2c2e51b4aea5fb5f6e9c3b78d7e4c0516bfb242",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -1,3 +1,17 @@\n+2019-08-14  Alan Modra  <amodra@gmail.com>\n+\n+\t* dwarf2.c (_bfd_dwarf2_find_nearest_line): Remove addr_size parameter.\n+\t* libbfd-in.h  (_bfd_dwarf2_find_nearest_line): Update prototype.\n+\t* coffgen.c (coff_find_nearest_line_with_names): Adjust\n+\t_bfd_dwarf2_find_nearest_line calls.\n+\t* elf.c (_bfd_elf_find_nearest_line, _bfd_elf_find_line): Likewise.\n+\t* elf32-arm.c (elf32_arm_find_nearest_line): Likewise.\n+\t* elf64-alpha.c (elf64_alpha_find_nearest_line): Likewise.\n+\t* elfnn-aarch64.c (elfNN_aarch64_find_nearest_line): Likewise.\n+\t* elfxx-mips.c (_bfd_mips_elf_find_nearest_line): Likewise.\n+\t* mach-o.c (bfd_mach_o_find_nearest_line): Likewise.\n+\t* libbfd.h: Regenerate.\n+\n 2019-08-09  Mihailo Stojanovic  <mihailo.stojanovic@rt-rk.com>\n \n \t* elf-bfd.h (struct elf_backend_data): New members."
    },
    {
      "sha": "5d61f39c8ce5e4460bb1000679bc63cb00a4cf38",
      "filename": "bfd/coffgen.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/coffgen.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/coffgen.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/coffgen.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -2290,7 +2290,7 @@ coff_find_nearest_line_with_names (bfd *abfd,\n   /* Also try examining DWARF2 debugging information.  */\n   if (_bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t     filename_ptr, functionname_ptr,\n-\t\t\t\t     line_ptr, NULL, debug_sections, 0,\n+\t\t\t\t     line_ptr, NULL, debug_sections,\n \t\t\t\t     &coff_data(abfd)->dwarf2_find_line_info))\n     return TRUE;\n \n@@ -2330,7 +2330,7 @@ coff_find_nearest_line_with_names (bfd *abfd,\n \t  && _bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section,\n \t\t\t\t\t    offset + bias,\n \t\t\t\t\t    filename_ptr, functionname_ptr,\n-\t\t\t\t\t    line_ptr, NULL, debug_sections, 0,\n+\t\t\t\t\t    line_ptr, NULL, debug_sections,\n \t\t\t\t\t    &coff_data(abfd)->dwarf2_find_line_info))\n \treturn TRUE;\n     }"
    },
    {
      "sha": "9cbd81de76d4671750cf736db7a912a85cf7fd78",
      "filename": "bfd/dwarf2.c",
      "status": "modified",
      "additions": 2,
      "deletions": 13,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/dwarf2.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/dwarf2.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/dwarf2.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -4531,7 +4531,6 @@ _bfd_dwarf2_find_symbol_bias (asymbol ** symbols, void ** pinfo)\n    NULL the FUNCTIONNAME_PTR is also filled in.\n    SYMBOLS contains the symbol table for ABFD.\n    DEBUG_SECTIONS contains the name of the dwarf debug sections.\n-   ADDR_SIZE is the number of bytes in the initial .debug_info length\n    field and in the abbreviation offset, or zero to indicate that the\n    default value should be used.  */\n \n@@ -4546,7 +4545,6 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd,\n \t\t\t       unsigned int *linenumber_ptr,\n \t\t\t       unsigned int *discriminator_ptr,\n \t\t\t       const struct dwarf_debug_section *debug_sections,\n-\t\t\t       unsigned int addr_size,\n \t\t\t       void **pinfo)\n {\n   /* Read each compilation unit from the section .debug_info, and check\n@@ -4727,18 +4725,11 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd,\n \t}\n     }\n \n-  /* The DWARF2 spec says that the initial length field, and the\n-     offset of the abbreviation table, should both be 4-byte values.\n-     However, some compilers do things differently.  */\n-  if (addr_size == 0)\n-    addr_size = 4;\n-  BFD_ASSERT (addr_size == 4 || addr_size == 8);\n-\n   /* Read each remaining comp. units checking each as they are read.  */\n   while (stash->info_ptr < stash->info_ptr_end)\n     {\n       bfd_vma length;\n-      unsigned int offset_size = addr_size;\n+      unsigned int offset_size;\n       bfd_byte *info_ptr_unit = stash->info_ptr;\n \n       length = read_4_bytes (stash->bfd_ptr, stash->info_ptr, stash->info_ptr_end);\n@@ -4768,13 +4759,11 @@ _bfd_dwarf2_find_nearest_line (bfd *abfd,\n \t   b) if they do use 64-bit offsets but they are not using\n \t      the size hints that are tested for above then they are\n \t      not conforming to the DWARF3 standard anyway.  */\n-      else if (addr_size == 8)\n+      else\n \t{\n \t  offset_size = 4;\n \t  stash->info_ptr += 4;\n \t}\n-      else\n-\tstash->info_ptr += 4;\n \n       if (length > 0)\n \t{"
    },
    {
      "sha": "42ae1627ba7c412add0772f7657db6120433494c",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -8972,7 +8972,7 @@ _bfd_elf_find_nearest_line (bfd *abfd,\n   if (_bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t     filename_ptr, functionname_ptr,\n \t\t\t\t     line_ptr, discriminator_ptr,\n-\t\t\t\t     dwarf_debug_sections, 0,\n+\t\t\t\t     dwarf_debug_sections,\n \t\t\t\t     &elf_tdata (abfd)->dwarf2_find_line_info)\n       || _bfd_dwarf1_find_nearest_line (abfd, symbols, section, offset,\n \t\t\t\t\tfilename_ptr, functionname_ptr,\n@@ -9012,7 +9012,7 @@ _bfd_elf_find_line (bfd *abfd, asymbol **symbols, asymbol *symbol,\n {\n   return _bfd_dwarf2_find_nearest_line (abfd, symbols, symbol, NULL, 0,\n \t\t\t\t\tfilename_ptr, NULL, line_ptr, NULL,\n-\t\t\t\t\tdwarf_debug_sections, 0,\n+\t\t\t\t\tdwarf_debug_sections,\n \t\t\t\t\t&elf_tdata (abfd)->dwarf2_find_line_info);\n }\n "
    },
    {
      "sha": "f1895df2788483bfe09ffdaebfcedd6b00a1d288",
      "filename": "bfd/elf32-arm.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf32-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf32-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-arm.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -16112,7 +16112,7 @@ elf32_arm_find_nearest_line (bfd *\t    abfd,\n   if (_bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t     filename_ptr, functionname_ptr,\n \t\t\t\t     line_ptr, discriminator_ptr,\n-\t\t\t\t     dwarf_debug_sections, 0,\n+\t\t\t\t     dwarf_debug_sections,\n \t\t\t\t     & elf_tdata (abfd)->dwarf2_find_line_info))\n     {\n       if (!*functionname_ptr)"
    },
    {
      "sha": "490860123c917241104069418f7da2754085080f",
      "filename": "bfd/elf64-alpha.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf64-alpha.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elf64-alpha.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf64-alpha.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -1467,7 +1467,7 @@ elf64_alpha_find_nearest_line (bfd *abfd, asymbol **symbols,\n   if (_bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t     filename_ptr, functionname_ptr,\n \t\t\t\t     line_ptr, discriminator_ptr,\n-\t\t\t\t     dwarf_debug_sections, 0,\n+\t\t\t\t     dwarf_debug_sections,\n \t\t\t\t     &elf_tdata (abfd)->dwarf2_find_line_info))\n     return TRUE;\n "
    },
    {
      "sha": "4e6cbc9a3ad63c8d4485c9e43cf83b6aedef60a9",
      "filename": "bfd/elfnn-aarch64.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elfnn-aarch64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elfnn-aarch64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfnn-aarch64.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -8040,7 +8040,7 @@ elfNN_aarch64_find_nearest_line (bfd *abfd,\n   if (_bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t     filename_ptr, functionname_ptr,\n \t\t\t\t     line_ptr, discriminator_ptr,\n-\t\t\t\t     dwarf_debug_sections, 0,\n+\t\t\t\t     dwarf_debug_sections,\n \t\t\t\t     &elf_tdata (abfd)->dwarf2_find_line_info))\n     {\n       if (!*functionname_ptr)"
    },
    {
      "sha": "e3054043df3b3a2ad73a72af1efbc4783ca7a0f3",
      "filename": "bfd/elfxx-mips.c",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elfxx-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/elfxx-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfxx-mips.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -13084,7 +13084,6 @@ _bfd_mips_elf_find_nearest_line (bfd *abfd, asymbol **symbols,\n \t\t\t\t     filename_ptr, functionname_ptr,\n \t\t\t\t     line_ptr, discriminator_ptr,\n \t\t\t\t     dwarf_debug_sections,\n-\t\t\t\t     ABI_64_P (abfd) ? 8 : 0,\n \t\t\t\t     &elf_tdata (abfd)->dwarf2_find_line_info)\n       || _bfd_dwarf1_find_nearest_line (abfd, symbols, section, offset,\n \t\t\t\t\tfilename_ptr, functionname_ptr,"
    },
    {
      "sha": "7a97dfae19904ebc32831311818f117e29eb3e37",
      "filename": "bfd/libbfd-in.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/libbfd-in.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/libbfd-in.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd-in.h?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -588,7 +588,7 @@ extern const struct dwarf_debug_section dwarf_debug_sections[] ATTRIBUTE_HIDDEN;\n extern bfd_boolean _bfd_dwarf2_find_nearest_line\n   (bfd *, asymbol **, asymbol *, asection *, bfd_vma,\n    const char **, const char **, unsigned int *, unsigned int *,\n-   const struct dwarf_debug_section *, unsigned int, void **) ATTRIBUTE_HIDDEN;\n+   const struct dwarf_debug_section *, void **) ATTRIBUTE_HIDDEN;\n \n /* Find the bias between DWARF addresses and real addresses.  */\n extern bfd_signed_vma _bfd_dwarf2_find_symbol_bias"
    },
    {
      "sha": "13f4c5b4082b945dbc9c16ac11eaf56ff51bdc00",
      "filename": "bfd/libbfd.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/libbfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/libbfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd.h?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -593,7 +593,7 @@ extern const struct dwarf_debug_section dwarf_debug_sections[] ATTRIBUTE_HIDDEN;\n extern bfd_boolean _bfd_dwarf2_find_nearest_line\n   (bfd *, asymbol **, asymbol *, asection *, bfd_vma,\n    const char **, const char **, unsigned int *, unsigned int *,\n-   const struct dwarf_debug_section *, unsigned int, void **) ATTRIBUTE_HIDDEN;\n+   const struct dwarf_debug_section *, void **) ATTRIBUTE_HIDDEN;\n \n /* Find the bias between DWARF addresses and real addresses.  */\n extern bfd_signed_vma _bfd_dwarf2_find_symbol_bias"
    },
    {
      "sha": "d02398048cebba6c1f70e64289981a3f0a885b12",
      "filename": "bfd/mach-o.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/mach-o.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9defd221fe3ecffabc90eadd077326b27e898a2b/bfd/mach-o.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/mach-o.c?ref=9defd221fe3ecffabc90eadd077326b27e898a2b",
      "patch": "@@ -5985,7 +5985,7 @@ bfd_mach_o_find_nearest_line (bfd *abfd,\n   return _bfd_dwarf2_find_nearest_line (abfd, symbols, NULL, section, offset,\n \t\t\t\t\tfilename_ptr, functionname_ptr,\n \t\t\t\t\tline_ptr, discriminator_ptr,\n-\t\t\t\t\tdwarf_debug_sections, 0,\n+\t\t\t\t\tdwarf_debug_sections,\n \t\t\t\t\t&mdata->dwarf2_find_line_info);\n }\n "
    }
  ]
}