{
  "sha": "85e963f185884ffec4ed9577da9b9fbd028b62ee",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODVlOTYzZjE4NTg4NGZmZWM0ZWQ5NTc3ZGE5YjlmYmQwMjhiNjJlZQ==",
  "commit": {
    "author": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-01-08T12:04:13Z"
    },
    "committer": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-01-19T01:40:18Z"
    },
    "message": "ld: Just xfail riscv little endian targets for compressed1d.d test.\n\nThe sizes of compressed and uncompressed .debug_aranges are the same\nfor the riscv big endian targets, but different for the little endian\ntargets.  The compress rule is fine and isn't broken by riscv, just the\noriginal compressed1d.d fails by accident.  Ideally, we should fill the\nR_RISCV_ADD/SUB relocations when disabling relaxations in the assembler.\nBut before that, Jim already had written an alternative test compressed1d-alt\nto relpace compressed1d.d for riscv, so we can only xfail the riscv little\nendian targets in the short-term.\n\nld/\n    * testsuite/ld-elf/elf.exp (riscv_little_endian): Added.  Return true\n    if target is riscv little endian.  Otherwise, return false.\n    * testsuite/ld-elf/compressed1d.d: Only xfail the riscv little endian\n    targets by [riscv_little_endian].",
    "tree": {
      "sha": "cda0d545109641321b3e9b348db0afb4ddefe5ee",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/cda0d545109641321b3e9b348db0afb4ddefe5ee"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/85e963f185884ffec4ed9577da9b9fbd028b62ee",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/85e963f185884ffec4ed9577da9b9fbd028b62ee",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/85e963f185884ffec4ed9577da9b9fbd028b62ee",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/85e963f185884ffec4ed9577da9b9fbd028b62ee/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "f0c1efa53d78b335dfc0f86166121f051ecc3d02",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0c1efa53d78b335dfc0f86166121f051ecc3d02",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f0c1efa53d78b335dfc0f86166121f051ecc3d02"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 23,
    "deletions": 2
  },
  "files": [
    {
      "sha": "035e6aa3fdcf5400571c7e2bad9e1c10bcfb5b98",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=85e963f185884ffec4ed9577da9b9fbd028b62ee",
      "patch": "@@ -1,3 +1,10 @@\n+2021-01-19  Nelson Chu  <nelson.chu@sifive.com>\n+\n+\t* testsuite/ld-elf/elf.exp (riscv_little_endian): Added.  Return true\n+\tif target is riscv little endian.  Otherwise, return false.\n+\t* testsuite/ld-elf/compressed1d.d: Only xfail the riscv little endian\n+\ttargets by [riscv_little_endian].\n+\n 2021-01-18  Alan Modra  <amodra@gmail.com>\n \n \tPR 26378"
    },
    {
      "sha": "9d891c1933f0d9072b56d54d1f510508c169afba",
      "filename": "ld/testsuite/ld-elf/compressed1d.d",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/testsuite/ld-elf/compressed1d.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/testsuite/ld-elf/compressed1d.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/compressed1d.d?ref=85e963f185884ffec4ed9577da9b9fbd028b62ee",
      "patch": "@@ -3,10 +3,11 @@\n #ld: -r --compress-debug-sections=zlib-gnu\n #readelf: -SW\n #xfail: [uses_genelf]\n-#xfail: riscv*-*-*\n+#xfail: [riscv_little_endian]\n # Not all ELF targets use the elf.em emulation...\n # RISC-V has linker relaxations that delete code, so text label subtractions\n-# do not get resolved at assembly time, which results in a compressed section.\n+# do not get resolved at assembly time, which results in a compressed section\n+# for little endian targets; but it is uncompressed for big endian targets.\n \n #failif\n #..."
    },
    {
      "sha": "e98bffc0c5f3669b874f237d20b17707e787ce43",
      "filename": "ld/testsuite/ld-elf/elf.exp",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/testsuite/ld-elf/elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/85e963f185884ffec4ed9577da9b9fbd028b62ee/ld/testsuite/ld-elf/elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/elf.exp?ref=85e963f185884ffec4ed9577da9b9fbd028b62ee",
      "patch": "@@ -25,6 +25,19 @@ if ![is_elf_format] {\n     return\n }\n \n+# Return true if target is riscv little endian.\n+# xfail the riscv little endain targets for the compressed1d1 test;\n+# The riscv big endian targets and others should pass.\n+proc riscv_little_endian { } {\n+    if { [istarget \"riscv32-*-*\"]\n+\t || [istarget \"riscv64-*-*\"]\n+\t || [istarget \"riscv32le-*-*\"]\n+\t || [istarget \"riscv64le-*-*\"] } {\n+\treturn 1\n+    }\n+    return 0\n+}\n+\n set old_ldflags $LDFLAGS\n if { [istarget spu*-*-*] } {\n     set LDFLAGS \"$LDFLAGS --local-store 0:0\""
    }
  ]
}