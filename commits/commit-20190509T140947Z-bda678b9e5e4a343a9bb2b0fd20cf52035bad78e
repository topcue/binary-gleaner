{
  "sha": "bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmRhNjc4YjllNWU0YTM0M2E5YmIyYjBmZDIwY2Y1MjAzNWJhZDc4ZQ==",
  "commit": {
    "author": {
      "name": "Peter Bergner",
      "email": "bergner@linux.ibm.com",
      "date": "2019-05-09T14:09:47Z"
    },
    "committer": {
      "name": "Peter Bergner",
      "email": "bergner@linux.ibm.com",
      "date": "2019-05-09T14:09:47Z"
    },
    "message": "Update printing of optional operands during disassembly.\n\nopcodes/\n\t* ppc-dis.c (skip_optional_operands): Change return type and returns.\n\t(print_insn_powerpc) <skip_optional>: Change type.\n\tCall skip_optional_operands if we have not skipped any operands.\ngas/\n\t* testsuite/gas/ppc/476.d: Update expected output.\n\t* testsuite/gas/ppc/power6.d: Likewise.",
    "tree": {
      "sha": "84824e7309d19e73d36a41bcc5c0c2045106b66f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/84824e7309d19e73d36a41bcc5c0c2045106b66f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/comments",
  "author": {
    "login": "peter-bergner",
    "id": 17504345,
    "node_id": "MDQ6VXNlcjE3NTA0MzQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peter-bergner",
    "html_url": "https://github.com/peter-bergner",
    "followers_url": "https://api.github.com/users/peter-bergner/followers",
    "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}",
    "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions",
    "organizations_url": "https://api.github.com/users/peter-bergner/orgs",
    "repos_url": "https://api.github.com/users/peter-bergner/repos",
    "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peter-bergner/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "peter-bergner",
    "id": 17504345,
    "node_id": "MDQ6VXNlcjE3NTA0MzQ1",
    "avatar_url": "https://avatars.githubusercontent.com/u/17504345?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/peter-bergner",
    "html_url": "https://github.com/peter-bergner",
    "followers_url": "https://api.github.com/users/peter-bergner/followers",
    "following_url": "https://api.github.com/users/peter-bergner/following{/other_user}",
    "gists_url": "https://api.github.com/users/peter-bergner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/peter-bergner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/peter-bergner/subscriptions",
    "organizations_url": "https://api.github.com/users/peter-bergner/orgs",
    "repos_url": "https://api.github.com/users/peter-bergner/repos",
    "events_url": "https://api.github.com/users/peter-bergner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/peter-bergner/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8de09632ff6683a48b8acfb05d3b35b4ab4507fe",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8de09632ff6683a48b8acfb05d3b35b4ab4507fe",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8de09632ff6683a48b8acfb05d3b35b4ab4507fe"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 12,
    "deletions": 13
  },
  "files": [
    {
      "sha": "7818b86b13402d9305990ceff7d8e523660e8a4a",
      "filename": "gas/testsuite/gas/ppc/476.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/gas/testsuite/gas/ppc/476.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/gas/testsuite/gas/ppc/476.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/476.d?ref=bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
      "patch": "@@ -322,11 +322,11 @@ Disassembly of section \\.text:\n  4e0:\t(fc 0c 55 8e|8e 55 0c fc) \tmtfsf   6,f10\n  4e4:\t(fc 0c 55 8e|8e 55 0c fc) \tmtfsf   6,f10\n  4e8:\t(fc 0d 55 8e|8e 55 0d fc) \tmtfsf   6,f10,0,1\n- 4ec:\t(fe 0c 55 8e|8e 55 0c fe) \tmtfsf   6,f10,1,0\n+ 4ec:\t(fe 0c 55 8e|8e 55 0c fe) \tmtfsf   6,f10,1\n  4f0:\t(fc 0c 5d 8f|8f 5d 0c fc) \tmtfsf\\.  6,f11\n  4f4:\t(fc 0c 5d 8f|8f 5d 0c fc) \tmtfsf\\.  6,f11\n  4f8:\t(fc 0d 5d 8f|8f 5d 0d fc) \tmtfsf\\.  6,f11,0,1\n- 4fc:\t(fe 0c 5d 8f|8f 5d 0c fe) \tmtfsf\\.  6,f11,1,0\n+ 4fc:\t(fe 0c 5d 8f|8f 5d 0c fe) \tmtfsf\\.  6,f11,1\n  500:\t(ff 00 01 0c|0c 01 00 ff) \tmtfsfi  6,0\n  504:\t(ff 00 01 0c|0c 01 00 ff) \tmtfsfi  6,0\n  508:\t(ff 00 01 0c|0c 01 00 ff) \tmtfsfi  6,0"
    },
    {
      "sha": "8f7426573148bbca845a54e310f0ae64f0086bb7",
      "filename": "gas/testsuite/gas/ppc/power6.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/gas/testsuite/gas/ppc/power6.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/gas/testsuite/gas/ppc/power6.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/power6.d?ref=bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
      "patch": "@@ -58,8 +58,8 @@ Disassembly of section \\.text:\n   c0:\t(fc 0c 5d 8f|8f 5d 0c fc) \tmtfsf.  6,f11\n   c4:\t(fc 0d 55 8e|8e 55 0d fc) \tmtfsf   6,f10,0,1\n   c8:\t(fc 0d 5d 8f|8f 5d 0d fc) \tmtfsf.  6,f11,0,1\n-  cc:\t(fe 0c 55 8e|8e 55 0c fe) \tmtfsf   6,f10,1,0\n-  d0:\t(fe 0c 5d 8f|8f 5d 0c fe) \tmtfsf.  6,f11,1,0\n+  cc:\t(fe 0c 55 8e|8e 55 0c fe) \tmtfsf   6,f10,1\n+  d0:\t(fe 0c 5d 8f|8f 5d 0c fe) \tmtfsf.  6,f11,1\n   d4:\t(ff 00 01 0c|0c 01 00 ff) \tmtfsfi  6,0\n   d8:\t(ff 00 f1 0d|0d f1 00 ff) \tmtfsfi. 6,15\n   dc:\t(ff 00 01 0c|0c 01 00 ff) \tmtfsfi  6,0"
    },
    {
      "sha": "d9ae42a3d084b3ec676c1229666cf3e2e5b6522d",
      "filename": "opcodes/ppc-dis.c",
      "status": "modified",
      "additions": 8,
      "deletions": 9,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/opcodes/ppc-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bda678b9e5e4a343a9bb2b0fd20cf52035bad78e/opcodes/ppc-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ppc-dis.c?ref=bda678b9e5e4a343a9bb2b0fd20cf52035bad78e",
      "patch": "@@ -479,7 +479,7 @@ operand_value_powerpc (const struct powerpc_operand *operand,\n \n /* Determine whether the optional operand(s) should be printed.  */\n \n-static int\n+static bfd_boolean\n skip_optional_operands (const unsigned char *opindex,\n \t\t\tuint64_t insn, ppc_cpu_t dialect)\n {\n@@ -490,19 +490,19 @@ skip_optional_operands (const unsigned char *opindex,\n     {\n       operand = &powerpc_operands[*opindex];\n       if ((operand->flags & PPC_OPERAND_NEXT) != 0)\n-\treturn 0;\n+\treturn FALSE;\n       if ((operand->flags & PPC_OPERAND_OPTIONAL) != 0)\n \t{\n \t  /* Negative count is used as a flag to extract function.  */\n \t  --num_optional;\n \t  if (operand_value_powerpc (operand, insn, dialect)\n \t      != ppc_optional_operand_value (operand, insn, dialect,\n \t\t\t\t\t     num_optional))\n-\t    return 0;\n+\t    return FALSE;\n \t}\n     }\n \n-  return 1;\n+  return TRUE;\n }\n \n /* Find a match for INSN in the opcode table, given machine DIALECT.  */\n@@ -731,7 +731,7 @@ print_insn_powerpc (bfd_vma memaddr,\n \tneed_7spaces = 7,\n \tneed_paren\n       } op_separator;\n-      int skip_optional;\n+      bfd_boolean skip_optional;\n       int spaces;\n \n       (*info->fprintf_func) (info->stream, \"%s\", opcode->name);\n@@ -742,7 +742,7 @@ print_insn_powerpc (bfd_vma memaddr,\n \n       /* Now extract and print the operands.  */\n       op_separator = spaces;\n-      skip_optional = -1;\n+      skip_optional = FALSE;\n       for (opindex = opcode->operands; *opindex != 0; opindex++)\n \t{\n \t  int64_t value;\n@@ -753,9 +753,8 @@ print_insn_powerpc (bfd_vma memaddr,\n \t     then don't print any of them.  */\n \t  if ((operand->flags & PPC_OPERAND_OPTIONAL) != 0)\n \t    {\n-\t      if (skip_optional < 0)\n-\t\tskip_optional = skip_optional_operands (opindex, insn,\n-\t\t\t\t\t\t\tdialect);\n+\t      if (!skip_optional)\n+\t\tskip_optional = skip_optional_operands (opindex, insn, dialect);\n \t      if (skip_optional)\n \t\tcontinue;\n \t    }"
    }
  ]
}