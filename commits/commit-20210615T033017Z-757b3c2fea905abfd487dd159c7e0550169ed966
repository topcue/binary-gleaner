{
  "sha": "757b3c2fea905abfd487dd159c7e0550169ed966",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzU3YjNjMmZlYTkwNWFiZmQ0ODdkZDE1OWM3ZTA1NTAxNjllZDk2Ng==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-15T03:25:01Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-15T03:30:17Z"
    },
    "message": "sim: erc32: fix build w/out F_{G,S}ETFL\n\nAdd conditional logic around fcntl.h F_{G,S}ETFL usage to fix builds\non systems that don't have it (e.g. Windows).  The code is only used\nto save & restore limited terminal stdin state.",
    "tree": {
      "sha": "d1a5472f34798307e0c70420eb1b63b334444418",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d1a5472f34798307e0c70420eb1b63b334444418"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/757b3c2fea905abfd487dd159c7e0550169ed966",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/757b3c2fea905abfd487dd159c7e0550169ed966",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/757b3c2fea905abfd487dd159c7e0550169ed966",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/757b3c2fea905abfd487dd159c7e0550169ed966/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4df5cdbd3afc33e8c0a0d18542899f3f88d2f22f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4df5cdbd3afc33e8c0a0d18542899f3f88d2f22f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4df5cdbd3afc33e8c0a0d18542899f3f88d2f22f"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 13,
    "deletions": 2
  },
  "files": [
    {
      "sha": "0a82427cb5f4accb528243c37e56df9354b9556c",
      "filename": "sim/erc32/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/erc32/ChangeLog?ref=757b3c2fea905abfd487dd159c7e0550169ed966",
      "patch": "@@ -1,3 +1,9 @@\n+2021-06-14  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* interf.c (sim_open) [F_GETFL]: Only set termsave.\n+\t(sim_close) [F_SETFL]: Only call fcntl.\n+\t* sis.c (main) [F_GETFL]: Only set termsave.\n+\n 2021-06-14  Mike Frysinger  <vapier@gentoo.org>\n \n \t* erc32.c [HAVE_TERMIOS_H]: Include termios.h and declare ioc1,"
    },
    {
      "sha": "0cd655517630a8b2e5a8ae39aa461d971fd3a409",
      "filename": "sim/erc32/interf.c",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/interf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/interf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/erc32/interf.c?ref=757b3c2fea905abfd487dd159c7e0550169ed966",
      "patch": "@@ -241,7 +241,9 @@ sim_open (SIM_OPEN_KIND kind, struct host_callback_struct *callback,\n     }\n \n     sregs.freq = freq ? freq : 15;\n+#ifdef F_GETFL\n     termsave = fcntl(0, F_GETFL, 0);\n+#endif\n     INIT_DISASSEMBLE_INFO(dinfo, stdout,(fprintf_ftype)fprintf);\n #ifdef HOST_LITTLE_ENDIAN\n     dinfo.endian = BFD_ENDIAN_LITTLE;\n@@ -263,9 +265,10 @@ sim_close(SIM_DESC sd, int quitting)\n {\n \n     exit_sim();\n+#ifdef F_SETFL\n     fcntl(0, F_SETFL, termsave);\n-\n-};\n+#endif\n+}\n \n SIM_RC\n sim_load(SIM_DESC sd, const char *prog, bfd *abfd, int from_tty)"
    },
    {
      "sha": "b49e5a606098bbf54596ee4c74e9187801e7fe6b",
      "filename": "sim/erc32/sis.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/sis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/757b3c2fea905abfd487dd159c7e0550169ed966/sim/erc32/sis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/erc32/sis.c?ref=757b3c2fea905abfd487dd159c7e0550169ed966",
      "patch": "@@ -219,7 +219,9 @@ main(int argc, char **argv)\n     dinfo.endian = BFD_ENDIAN_BIG;\n #endif\n \n+#ifdef F_GETFL\n     termsave = fcntl(0, F_GETFL, 0);\n+#endif\n     using_history();\n     init_signals();\n     ebase.simtime = 0;"
    }
  ]
}