{
  "sha": "c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzM5Yzg2Mzc4ZmNhN2VhNGNmOGI1NzY2ZTViMzE3ZTU1ZDNkNmU3Mg==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-01T17:24:49Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-01T17:24:49Z"
    },
    "message": "[gdb/testsuite] Fix gdb.dwarf2/fission-reread.exp with .gdb_index\n\nWhen running test-case gdb.dwarf2/fission-reread.exp with target board\ncc-with-gdb-index, we run into:\n...\ngdb compile failed, warning: Could not find DWO TU \\\n  fission-reread.dwo(0x9022f1ceac7e8b19) referenced by TU at offset 0x0 \\\n  [in module outputs/gdb.dwarf2/fission-reread/fission-reread]\n...\nThe problem is that the .dwo file is not found.\n\nThere's code added in the .exp file to make sure the .dwo can be found:\n...\n # Make sure we can find the .dwo file, regardless of whether we're\n # running in parallel mode.\n gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n     \"set debug-file-directory\"\n...\nThis works normally, but not for the gdb invocation done by cc-with-tweaks.sh\nfor target board cc-with-gdb-index.\n\nFix this by finding the full path to the .dwo file and passing it\nto the compilation.\n\nTested on x86_64-linux with native and target boards cc-with-gdb-index,\ncc-with-debug-names and readnow.\n\ngdb/testsuite/ChangeLog:\n\n2021-02-01  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.dwarf2/fission-base.S: Pass -DDWO=$dwo.\n\t* gdb.dwarf2/fission-loclists-pie.S: Same.\n\t* gdb.dwarf2/fission-loclists.S: Same.\n\t* gdb.dwarf2/fission-multi-cu.S: Same.\n\t* gdb.dwarf2/fission-reread.S: Same.\n\t* gdb.dwarf2/fission-base.exp: Use DWO.\n\t* gdb.dwarf2/fission-loclists-pie.exp: Same.\n\t* gdb.dwarf2/fission-loclists.exp: Same.\n\t* gdb.dwarf2/fission-multi-cu.exp: Same.\n\t* gdb.dwarf2/fission-reread.exp: Same.",
    "tree": {
      "sha": "c2b5b92868bbee2eca41335f4735165c594de478",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c2b5b92868bbee2eca41335f4735165c594de478"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "34c10233cd204fe5ccafde590294fe20978cb7fa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/34c10233cd204fe5ccafde590294fe20978cb7fa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/34c10233cd204fe5ccafde590294fe20978cb7fa"
    }
  ],
  "stats": {
    "total": 116,
    "additions": 64,
    "deletions": 52
  },
  "files": [
    {
      "sha": "a557765c4b6c2d800f5d045623d9c808d6e121a1",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -1,3 +1,16 @@\n+2021-02-01  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.dwarf2/fission-base.S: Pass -DDWO=$dwo.\n+\t* gdb.dwarf2/fission-loclists-pie.S: Same.\n+\t* gdb.dwarf2/fission-loclists.S: Same.\n+\t* gdb.dwarf2/fission-multi-cu.S: Same.\n+\t* gdb.dwarf2/fission-reread.S: Same.\n+\t* gdb.dwarf2/fission-base.exp: Use DWO.\n+\t* gdb.dwarf2/fission-loclists-pie.exp: Same.\n+\t* gdb.dwarf2/fission-loclists.exp: Same.\n+\t* gdb.dwarf2/fission-multi-cu.exp: Same.\n+\t* gdb.dwarf2/fission-reread.exp: Same.\n+\n 2021-01-29  Tom de Vries  <tdevries@suse.de>\n \n \tPR breakpoints/26063"
    },
    {
      "sha": "5e10713e938f3d51661753e4a20b82b851d6e9de",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-base.S",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-base.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-base.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-base.S?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -20,6 +20,9 @@\n    and then massaging the output.\n */\n \n+#define XSTR(s) STR(s)\n+#define STR(s) #s\n+\n \t.file\t\"fission-base.c\"\n \n \t.text\n@@ -143,7 +146,7 @@ main:\n \t.8byte\t.Letext0-.Ltext0\t# DW_AT_high_pc\n \t.4byte\t.Ldebug_line0\t# DW_AT_stmt_list\n \t.ascii \"/tmp/src/gdb/testsuite\\0\"\t# DW_AT_comp_dir\n-\t.ascii \"fission-base.dwo\\0\"\t# DW_AT_GNU_dwo_name\n+\t.asciz XSTR(DWO)\t# DW_AT_GNU_dwo_name\n \t.4byte\t.Ldebug_pubnames0\t# DW_AT_GNU_pubnames\n \t.4byte\t.Ldebug_pubtypes0\t# DW_AT_GNU_pubtypes\n \t.4byte\t.Ldebug_addr0_begin\t# DW_AT_GNU_addr_base"
    },
    {
      "sha": "40a7e2a4e3c40088e348a4c18229556212b30652",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-base.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 9,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-base.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-base.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-base.exp?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -32,19 +32,15 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n+set dwo [standard_output_file \"fission-base.dwo\"]\n+\n if [build_executable_from_fission_assembler \\\n-\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" {nodebug}] {\n+\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" \\\n+\t[list nodebug additional_flags=-DDWO=$dwo]] {\n     return -1\n }\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-# Make sure we can find the .dwo file, regardless of whether we're\n-# running in parallel mode.\n-gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n-    \"set debug-file-directory\"\n-gdb_load $binfile\n+clean_restart $binfile\n \n if ![runto_main] {\n     return -1"
    },
    {
      "sha": "e87ca369bf749c89dd7a3415b4996a2190e4b6fe",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-loclists-pie.S",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.S?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -33,6 +33,8 @@\n      return init (&argc);\n    }\n */\n+#define XSTR(s) STR(s)\n+#define STR(s) #s\n \n \t.file\t\"fission-loclists-pie.c\"\n \t.text\n@@ -461,7 +463,7 @@ main:\n .LASF1:\n \t.string\t\"/tmp/19999/obj64/gdb/testsuite\"\n .LASF0:\n-\t.string\t\"fission-loclists-pie.dwo\"\n+\t.string\tXSTR(DWO)\n \t.section\t.debug_str_offsets.dwo,\"e\",@progbits\n \t.long\t0\t# indexed string 0x0: argv\n \t.long\t0x5\t# indexed string 0x1: argc"
    },
    {
      "sha": "c0a7785985be3c20423de0afe6d75a904a79b4c0",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-loclists-pie.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 9,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-loclists-pie.exp?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -37,20 +37,15 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n+set dwo [standard_output_file \"fission-loclists-pie.dwo\"]\n+\n if [build_executable_from_fission_assembler \\\n \t\"$testfile.exp\" \"$binfile\" \"$srcfile\" \\\n-\t[list \"nodebug\" \"ldflags=-pie\"]] {\n+\t[list \"nodebug\" \"ldflags=-pie\" additional_flags=-DDWO=$dwo]] {\n     return -1\n }\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-# Make sure we can find the .dwo file, regardless of whether we're\n-# running in parallel mode.\n-gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n-    \"set debug-file-directory\"\n-gdb_load $binfile\n+clean_restart $binfile\n \n if ![runto_main] {\n     return -1"
    },
    {
      "sha": "c40b956dc4e2a51b10524c76dc3742bfa2b5ece4",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-loclists.S",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-loclists.S?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -33,6 +33,9 @@\n    }\n */\n \n+#define XSTR(s) STR(s)\n+#define STR(s) #s\n+\n \t.file\t\"fission-loclists.c\"\n \t.text\n .Ltext0:\n@@ -240,7 +243,7 @@ main:\n \t.byte\t0x5\n \t.4byte\t.Ldebug_ranges0\t# DW_AT_GNU_ranges_base\n \t.ascii \"/tmp/src/gdb/testsuite\\0\"\t# DW_AT_comp_dir\n-\t.ascii \"fission-loclists.dwo\\0\"\t# DW_AT_GNU_dwo_name\n+\t.asciz XSTR(DWO)\t# DW_AT_GNU_dwo_name\n \t.4byte\t.Ldebug_pubnames0\t# DW_AT_GNU_pubnames\n \t.4byte\t.Ldebug_pubtypes0\t# DW_AT_GNU_pubtypes\n \t.4byte\t.Ldebug_addr0\t# DW_AT_GNU_addr_base"
    },
    {
      "sha": "54eace0496cc1d7f9f7905e5cb9f552af68b860f",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-loclists.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 9,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-loclists.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-loclists.exp?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -32,19 +32,15 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n+set dwo [standard_output_file \"fission-loclists.dwo\"]\n+\n if [build_executable_from_fission_assembler \\\n-\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" {nodebug}] {\n+\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" \\\n+\t[list nodebug additional_flags=-DDWO=$dwo]] {\n     return -1\n }\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-# Make sure we can find the .dwo file, regardless of whether we're\n-# running in parallel mode.\n-gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n-    \"set debug-file-directory\"\n-gdb_load $binfile\n+clean_restart $binfile\n \n if ![runto_main] {\n     return -1"
    },
    {
      "sha": "df83613831e460393dba14b13eb26c14948ff597",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-multi-cu.S",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-multi-cu.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-multi-cu.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-multi-cu.S?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -23,6 +23,10 @@\n \n    and then massaging the output.\n */\n+\n+#define XSTR(s) STR(s)\n+#define STR(s) #s\n+\n \t.text\n \t.file\t\"llvm-link\"\n \t.globl\tfunc\n@@ -80,7 +84,7 @@ main:                                   # @main\n \n \t.section\t.debug_str,\"MS\",@progbits,1\n .Lskel_string0:\n-\t.asciz\t\"fission-multi-cu.dwo\"  # string offset=0\n+\t.asciz\tXSTR(DWO)  # string offset=0\n .Lskel_string1:\n \t.asciz\t\"/tmp/src/gdb/testsuite\" # string offset=21\n \t.section\t.debug_loc.dwo,\"\",@progbits"
    },
    {
      "sha": "dec754798b670566607600ede7902453e4babec5",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-multi-cu.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 9,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-multi-cu.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-multi-cu.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-multi-cu.exp?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -32,19 +32,15 @@ if {![istarget x86_64-*] || ![is_lp64_target]} {\n \n standard_testfile .S\n \n+set dwo [standard_output_file \"fission-multi-cu.dwo\"]\n+\n if [build_executable_from_fission_assembler \\\n-\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" {nodebug}] {\n+\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" \\\n+\t[list nodebug additional_flags=-DDWO=$dwo]] {\n     return -1\n }\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-# Make sure we can find the .dwo file, regardless of whether we're\n-# running in parallel mode.\n-gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n-    \"set debug-file-directory\"\n-gdb_load $binfile\n+clean_restart $binfile\n \n if ![runto_main] {\n     return -1"
    },
    {
      "sha": "dd1ffcd05e86b745fe5ab625fc5e6a503734277e",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-reread.S",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-reread.S",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-reread.S",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-reread.S?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -47,6 +47,9 @@\n # define SYMBOL(str)     str\n #endif\n \n+#define XSTR(s) STR(s)\n+#define STR(s) #s\n+\n \t.file\t\"fission-reread.cc\"\n \n \t.globl\tSYMBOL(baz)\n@@ -143,7 +146,7 @@ SYMBOL(main):\n \t.4byte\t0\t/* Offset to Type DIE */\n \t.uleb128 0x2\t/* (DIE (0) DW_TAG_type_unit) */\n \t.ascii \"/tmp/src/gdb/testsuite\\0\"\t/* DW_AT_comp_dir */\n-\t.ascii \"fission-reread.dwo\\0\" /* DW_AT_GNU_dwo_name */\n+\t.asciz XSTR(DWO) /* DW_AT_GNU_dwo_name */\n \t.4byte\t.Ldebug_pubnames0\t/* DW_AT_GNU_pubnames */\n \t.4byte\t.Ldebug_pubtypes0\t/* DW_AT_GNU_pubtypes */\n \t.4byte\t.Ldebug_addr0\t/* DW_AT_GNU_addr_base */\n@@ -214,7 +217,7 @@ SYMBOL(main):\n \t.4byte\t.Letext0-.Ltext0\t/* DW_AT_high_pc */\n \t.4byte\t.Ldebug_line0\t/* DW_AT_stmt_list */\n \t.ascii \"/tmp/src/gdb/testsuite\\0\"\t/* DW_AT_comp_dir */\n-\t.ascii \"fission-reread.dwo\\0\" /* DW_AT_GNU_dwo_name */\n+\t.asciz XSTR(DWO) /* DW_AT_GNU_dwo_name */\n \t.4byte\t.Ldebug_pubnames0\t/* DW_AT_GNU_pubnames */\n \t.4byte\t.Ldebug_pubtypes0\t/* DW_AT_GNU_pubtypes */\n \t.4byte\t.Ldebug_addr0\t/* DW_AT_GNU_addr_base */"
    },
    {
      "sha": "b97c48ad1b36733ef89cf6c0cd9adedc9514aff7",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 10,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c39c86378fca7ea4cf8b5766e5b317e55d3d6e72/gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-reread.exp?ref=c39c86378fca7ea4cf8b5766e5b317e55d3d6e72",
      "patch": "@@ -30,20 +30,21 @@ set additional_flags [gdb_target_symbol_prefix_flags_asm]\n \n standard_testfile .S\n \n+set dwo [standard_output_file \"fission-reread.dwo\"]\n+\n+set options [list]\n+lappend options nodebug\n+if { $additional_flags != \"\" } {\n+    lappend options $additional_flags\n+}\n+lappend options additional_flags=-DDWO=$dwo\n+\n if [build_executable_from_fission_assembler \\\n-\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" \\\n-\t[list nodebug $additional_flags]] {\n+\t\"$testfile.exp\" \"$binfile\" \"$srcfile\" $options] {\n     return -1\n }\n \n-gdb_exit\n-gdb_start\n-gdb_reinitialize_dir $srcdir/$subdir\n-# Make sure we can find the .dwo file, regardless of whether we're\n-# running in parallel mode.\n-gdb_test_no_output \"set debug-file-directory [file dirname $binfile]\" \\\n-    \"set debug-file-directory\"\n-gdb_load $binfile\n+clean_restart $binfile\n \n gdb_test \"break -q main\" \"Breakpoint.*at.*\"\n "
    }
  ]
}