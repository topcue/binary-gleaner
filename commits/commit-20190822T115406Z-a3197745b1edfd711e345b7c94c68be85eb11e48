{
  "sha": "a3197745b1edfd711e345b7c94c68be85eb11e48",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTMxOTc3NDViMWVkZmQ3MTFlMzQ1YjdjOTRjNjhiZTg1ZWIxMWU0OA==",
  "commit": {
    "author": {
      "name": "Bosco Garc?a",
      "email": "jbgg.gnu@gmail.com",
      "date": "2019-08-22T11:54:06Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2019-08-22T11:54:06Z"
    },
    "message": "Fix the assembler's floating point number parser so that it can correctly handle numbers encoded as a leading decimal point, followed by zeroes, followed by a non-zero sequence.\n\n\t* atof-generic.c (atof_generic): Do not ignore leading zeros if\n\tthey appear after a decimal point.\n\t* testsuite/gas/all/float.s: Extend test to include a number with\n\ta leading decimal point followed by several zeroes.\n\t* testsuite/gas/i386/fp.s: Likewise.\n\t* testsuite/gas/i386/fp.d: Update expected output.",
    "tree": {
      "sha": "c277a5d5c856563d1cd4d64a2e76ce9c5418b0d6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c277a5d5c856563d1cd4d64a2e76ce9c5418b0d6"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a3197745b1edfd711e345b7c94c68be85eb11e48",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a3197745b1edfd711e345b7c94c68be85eb11e48",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a3197745b1edfd711e345b7c94c68be85eb11e48",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a3197745b1edfd711e345b7c94c68be85eb11e48/comments",
  "author": {
    "login": "jbgg-gnu",
    "id": 54843402,
    "node_id": "MDQ6VXNlcjU0ODQzNDAy",
    "avatar_url": "https://avatars.githubusercontent.com/u/54843402?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbgg-gnu",
    "html_url": "https://github.com/jbgg-gnu",
    "followers_url": "https://api.github.com/users/jbgg-gnu/followers",
    "following_url": "https://api.github.com/users/jbgg-gnu/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbgg-gnu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbgg-gnu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbgg-gnu/subscriptions",
    "organizations_url": "https://api.github.com/users/jbgg-gnu/orgs",
    "repos_url": "https://api.github.com/users/jbgg-gnu/repos",
    "events_url": "https://api.github.com/users/jbgg-gnu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbgg-gnu/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "43771869e5021b6bdc02b6eaae103a33c05a821c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/43771869e5021b6bdc02b6eaae103a33c05a821c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/43771869e5021b6bdc02b6eaae103a33c05a821c"
    }
  ],
  "stats": {
    "total": 56,
    "additions": 49,
    "deletions": 7
  },
  "files": [
    {
      "sha": "bd9887e4243a3b3a2897dc77f671a1cde8e2ab87",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a3197745b1edfd711e345b7c94c68be85eb11e48",
      "patch": "@@ -1,3 +1,13 @@\n+2019-08-22  Bosco Garc\u00eda  <jbgg.gnu@gmail.com>\n+\t    Nick Clifton  <nickc@redhat.com>\n+\n+\t* atof-generic.c (atof_generic): Do not ignore leading zeros if\n+\tthey appear after a decimal point.\n+\t* testsuite/gas/all/float.s: Extend test to include a number with\n+\ta leading decimal point followed by several zeroes.\n+\t* testsuite/gas/i386/fp.s: Likewise.\n+\t* testsuite/gas/i386/fp.d: Update expected output.\n+\n 2019-08-22  Barnaby Wilks  <barnaby.wilks@arm.com>\n \n \t* config/tc-aarch64.c: Add float16 directive and add \"Hh\" to"
    },
    {
      "sha": "345ccef2c1c32c7acbf98acca48109f2ae62adcc",
      "filename": "gas/atof-generic.c",
      "status": "modified",
      "additions": 32,
      "deletions": 7,
      "changes": 39,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/atof-generic.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/atof-generic.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/atof-generic.c?ref=a3197745b1edfd711e345b7c94c68be85eb11e48",
      "patch": "@@ -184,23 +184,42 @@ atof_generic (/* return pointer to just AFTER number we read.  */\n \n #ifndef OLD_FLOAT_READS\n   /* Ignore trailing 0's after the decimal point.  The original code here\n-   * (ifdef'd out) does not do this, and numbers like\n-   *\t4.29496729600000000000e+09\t(2**31)\n-   * come out inexact for some reason related to length of the digit\n-   * string.\n-   */\n+     (ifdef'd out) does not do this, and numbers like\n+    \t4.29496729600000000000e+09\t(2**31)\n+     come out inexact for some reason related to length of the digit\n+     string.  */\n+\n+  /* The case number_of_digits_before_decimal = 0 is handled for\n+     deleting zeros after decimal.  In this case the decimal mark and\n+     the first zero digits after decimal mark are skipped.  */\n+  seen_significant_digit = 0;\n+  signed long subtract_decimal_exponent = 0;\n+\n   if (c && IS_DECIMAL_MARK (c))\n     {\n-      unsigned int zeros = 0;\t/* Length of current string of zeros */\n+      unsigned int zeros = 0;\t/* Length of current string of zeros.  */\n+\n+      if (number_of_digits_before_decimal == 0)\n+\t/* Skip decimal mark.  */\n+\tfirst_digit++;\n \n       for (p++; (c = *p) && ISDIGIT (c); p++)\n \t{\n \t  if (c == '0')\n \t    {\n-\t      zeros++;\n+\t      if (number_of_digits_before_decimal == 0\n+\t\t  && !seen_significant_digit)\n+\t\t{\n+\t\t  /* Skip '0' and the decimal mark.  */\n+\t\t  first_digit++;\n+\t\t  subtract_decimal_exponent--;\n+\t\t}\n+\t      else\n+\t\tzeros++;\n \t    }\n \t  else\n \t    {\n+\t      seen_significant_digit = 1;\n \t      number_of_digits_after_decimal += 1 + zeros;\n \t      zeros = 0;\n \t    }\n@@ -287,6 +306,12 @@ atof_generic (/* return pointer to just AFTER number we read.  */\n \t}\n     }\n \n+#ifndef OLD_FLOAT_READS\n+  /* Subtract_decimal_exponent != 0 when number_of_digits_before_decimal = 0\n+     and first digit after decimal is '0'.  */\n+  decimal_exponent += subtract_decimal_exponent;\n+#endif\n+\n   *address_of_string_pointer = p;\n \n   number_of_digits_available ="
    },
    {
      "sha": "902914f4dc81c5e05d11d22495dc1e614085deac",
      "filename": "gas/testsuite/gas/all/float.s",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/all/float.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/all/float.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/all/float.s?ref=a3197745b1edfd711e345b7c94c68be85eb11e48",
      "patch": "@@ -2,3 +2,5 @@\n foo:\t.single\t0r1.2345e+06\n \t.single 0f3.14159\n \t.double 0r2.718282\n+        .double .0000000000000000000001\n+        .double 1e-22"
    },
    {
      "sha": "a9a9538cd09252269270e6a2659c4cec51184e59",
      "filename": "gas/testsuite/gas/i386/fp.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/i386/fp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/i386/fp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.d?ref=a3197745b1edfd711e345b7c94c68be85eb11e48",
      "patch": "@@ -6,3 +6,4 @@\n Contents of section .data:\n  0000 00881bcd 4b789ad4 004071a3 79094f93  ....Kx...@q.y.O.\n  0010 0a40789a 5440789a 54400000 00000000  .@x.T@x.T@......\n+ 0020 e65e1710 20395e3b e65e1710 20395e3b  .\\^.. 9\\^;.\\^.. 9\\^;"
    },
    {
      "sha": "a1f2b0f0a48428d1745354767ea4854fca8e199d",
      "filename": "gas/testsuite/gas/i386/fp.s",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/i386/fp.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a3197745b1edfd711e345b7c94c68be85eb11e48/gas/testsuite/gas/i386/fp.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/fp.s?ref=a3197745b1edfd711e345b7c94c68be85eb11e48",
      "patch": "@@ -11,3 +11,7 @@\n \t.single 3.32192809488736218171e0\n #\t.byte 0x78, 0x9a, 0x54, 0x40, 0, 0, 0, 0\n \t.byte 0, 0, 0, 0, 0, 0\n+\n+# The assembler used to treat the next value as zero instead of 1e-22.\n+        .double .0000000000000000000001\n+        .double 1e-22"
    }
  ]
}