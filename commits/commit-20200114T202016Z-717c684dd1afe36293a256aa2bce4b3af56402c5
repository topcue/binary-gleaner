{
  "sha": "717c684dd1afe36293a256aa2bce4b3af56402c5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzE3YzY4NGRkMWFmZTM2MjkzYTI1NmFhMmJjZTRiM2FmNTY0MDJjNQ==",
  "commit": {
    "author": {
      "name": "Bernd Edlinger",
      "email": "bernd.edlinger@hotmail.de",
      "date": "2019-12-25T15:35:32Z"
    },
    "committer": {
      "name": "Bernd Edlinger",
      "email": "bernd.edlinger@hotmail.de",
      "date": "2020-01-14T20:20:16Z"
    },
    "message": "Make skip without argument skip the current inline function\n\nPreviously always the outermost function block was used, but\nsince skip is now able to skip over inline functions it is more\nnatural to skip the inline function that the program is currently\nexecuting.\n\ngdb:\n2020-01-14  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n\t* skip.c (skip_function_command): Make skip w/o arguments use the\n\tname of the inlined function if pc is inside any inlined function.\n\ngdb/testsuite:\n2020-01-14  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n\n\t* gdb.base/skip-inline.exp: Extend test.",
    "tree": {
      "sha": "0d2e12e16f47a0806a7fb63d843e4e250b7719bc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0d2e12e16f47a0806a7fb63d843e4e250b7719bc"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/717c684dd1afe36293a256aa2bce4b3af56402c5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/717c684dd1afe36293a256aa2bce4b3af56402c5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/717c684dd1afe36293a256aa2bce4b3af56402c5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/717c684dd1afe36293a256aa2bce4b3af56402c5/comments",
  "author": {
    "login": "bernd-edlinger",
    "id": 17638929,
    "node_id": "MDQ6VXNlcjE3NjM4OTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernd-edlinger",
    "html_url": "https://github.com/bernd-edlinger",
    "followers_url": "https://api.github.com/users/bernd-edlinger/followers",
    "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions",
    "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs",
    "repos_url": "https://api.github.com/users/bernd-edlinger/repos",
    "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "bernd-edlinger",
    "id": 17638929,
    "node_id": "MDQ6VXNlcjE3NjM4OTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernd-edlinger",
    "html_url": "https://github.com/bernd-edlinger",
    "followers_url": "https://api.github.com/users/bernd-edlinger/followers",
    "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions",
    "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs",
    "repos_url": "https://api.github.com/users/bernd-edlinger/repos",
    "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e44925ae5689fc997b833d039e971484f54bd8c0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e44925ae5689fc997b833d039e971484f54bd8c0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e44925ae5689fc997b833d039e971484f54bd8c0"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 30,
    "deletions": 10
  },
  "files": [
    {
      "sha": "3f9a6ca550f819dc3c8f99dfa4e1d7513c2de49f",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=717c684dd1afe36293a256aa2bce4b3af56402c5",
      "patch": "@@ -1,3 +1,8 @@\n+2020-01-14  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* skip.c (skip_function_command): Make skip w/o arguments use the\n+\tname of the inlined function if pc is inside any inlined function.\n+\n 2020-01-14  Luis Machado  <luis.machado@linaro.org>\n \n \t* inf-ptrace.c (inf_ptrace_target::resume): Update comments."
    },
    {
      "sha": "419dd7a46821f4f7f34087956ed432e82322159a",
      "filename": "gdb/skip.c",
      "status": "modified",
      "additions": 7,
      "deletions": 10,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/skip.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/skip.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/skip.c?ref=717c684dd1afe36293a256aa2bce4b3af56402c5",
      "patch": "@@ -209,18 +209,15 @@ skip_function_command (const char *arg, int from_tty)\n   /* Default to the current function if no argument is given.  */\n   if (arg == NULL)\n     {\n+      frame_info *fi = get_selected_frame (_(\"No default function now.\"));\n+      struct symbol *sym = get_frame_function (fi);\n       const char *name = NULL;\n-      CORE_ADDR pc;\n \n-      if (!last_displayed_sal_is_valid ())\n-\terror (_(\"No default function now.\"));\n-\n-      pc = get_last_displayed_addr ();\n-      if (!find_pc_partial_function (pc, &name, NULL, NULL))\n-\t{\n-\t  error (_(\"No function found containing current program point %s.\"),\n-\t\t  paddress (get_current_arch (), pc));\n-\t}\n+      if (sym != NULL)\n+\tname = sym->print_name ();\n+      else\n+\terror (_(\"No function found containing current program point %s.\"),\n+\t       paddress (get_current_arch (), get_frame_pc (fi)));\n       skip_function (name);\n       return;\n     }"
    },
    {
      "sha": "4c1e6040d6738bd052fd0d5ab22d1c5a3fe6c25e",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=717c684dd1afe36293a256aa2bce4b3af56402c5",
      "patch": "@@ -1,3 +1,7 @@\n+2020-01-14  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* gdb.base/skip-inline.exp: Extend test.\n+\n 2020-01-13  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* gdb.dwarf2/dw2-bad-elf-other.S: New file."
    },
    {
      "sha": "ff85f3bbf250e5ef641b926b2cff30930987c6aa",
      "filename": "gdb/testsuite/gdb.base/skip-inline.exp",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/testsuite/gdb.base/skip-inline.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/717c684dd1afe36293a256aa2bce4b3af56402c5/gdb/testsuite/gdb.base/skip-inline.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/skip-inline.exp?ref=717c684dd1afe36293a256aa2bce4b3af56402c5",
      "patch": "@@ -76,3 +76,17 @@ with_test_prefix \"triple step\" {\n     gdb_test \"step 3\" \".*\" \"step over baz, again\"\n     gdb_test \"bt\" \"\\\\s*\\\\#0\\\\s+main.*\" \"again back to main\"\n }\n+\n+if ![runto_main] {\n+    fail \"can't run to main\"\n+    return\n+}\n+\n+gdb_test \"skip delete\" \".*\" \"skip delete\"\n+\n+with_test_prefix \"skip current frame\" {\n+    gdb_test \"bt\" \"\\\\s*\\\\#0\\\\s+main.*\" \"in the main\"\n+    gdb_test \"step\" \".*\" \"step into foo\"\n+    gdb_test \"bt\" \"\\\\s*\\\\#0\\\\s+foo.*\" \"in the foo\"\n+    gdb_test \"skip\" \"Function foo will be skipped when stepping\\.\" \"skip\"\n+}"
    }
  ]
}