{
  "sha": "7abb8d81115a2a748443f041e37cc13a70b34faa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6N2FiYjhkODExMTVhMmE3NDg0NDNmMDQxZTM3Y2MxM2E3MGIzNGZhYQ==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-11-05T08:19:50Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-11-05T08:19:50Z"
    },
    "message": "x86: fold OP_Mwaitx() into OP_Mwait()\n\nThere's no need to have separate functions, the difference can easily be\nexpressed using the function arguments.",
    "tree": {
      "sha": "44641c4b24d8a692f422d563484277e82c2dc487",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/44641c4b24d8a692f422d563484277e82c2dc487"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/7abb8d81115a2a748443f041e37cc13a70b34faa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7abb8d81115a2a748443f041e37cc13a70b34faa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/7abb8d81115a2a748443f041e37cc13a70b34faa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7abb8d81115a2a748443f041e37cc13a70b34faa/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "267b8516f2899ed24cd77cb9233b514c22506ecf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/267b8516f2899ed24cd77cb9233b514c22506ecf",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/267b8516f2899ed24cd77cb9233b514c22506ecf"
    }
  ],
  "stats": {
    "total": 35,
    "additions": 11,
    "deletions": 24
  },
  "files": [
    {
      "sha": "94c619b0d5ca7dcd64e882d039bf556bc28a451f",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7abb8d81115a2a748443f041e37cc13a70b34faa/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7abb8d81115a2a748443f041e37cc13a70b34faa/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=7abb8d81115a2a748443f041e37cc13a70b34faa",
      "patch": "@@ -1,3 +1,9 @@\n+2019-11-05  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* i386-dis.c (OP_Mwaitx): Delete.\n+\t(prefix_table): Use OP_Mwait for mwaitx entry.\n+\t(OP_Mwait): Also handle mwaitx.\n+\n 2019-11-05  Jan Beulich  <jbeulich@suse.com>\n \n \t* i386-dis.c (PREFIX_0F01_REG_7_MOD_3_RM_2,"
    },
    {
      "sha": "0f4a844dce78a3260f92514695126f77ea24eb3a",
      "filename": "opcodes/i386-dis.c",
      "status": "modified",
      "additions": 5,
      "deletions": 24,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7abb8d81115a2a748443f041e37cc13a70b34faa/opcodes/i386-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7abb8d81115a2a748443f041e37cc13a70b34faa/opcodes/i386-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-dis.c?ref=7abb8d81115a2a748443f041e37cc13a70b34faa",
      "patch": "@@ -101,7 +101,6 @@ static void VPCOM_Fixup (int, int);\n static void OP_0f07 (int, int);\n static void OP_Monitor (int, int);\n static void OP_Mwait (int, int);\n-static void OP_Mwaitx (int, int);\n static void NOP_Fixup1 (int, int);\n static void NOP_Fixup2 (int, int);\n static void OP_3DNowSuffix (int, int);\n@@ -3652,7 +3651,7 @@ static const struct dis386 prefix_table[][4] = {\n \n   /* PREFIX_0F01_REG_7_MOD_3_RM_3 */\n   {\n-    { \"mwaitx\",\t\t{ { OP_Mwaitx,  0 } }, 0  },\n+    { \"mwaitx\",\t\t{ { OP_Mwait, eBX_reg } }, 0  },\n   },\n \n   /* PREFIX_0F09 */\n@@ -15516,35 +15515,17 @@ CMP_Fixup (int bytemode ATTRIBUTE_UNUSED, int sizeflag ATTRIBUTE_UNUSED)\n }\n \n static void\n-OP_Mwaitx (int bytemode ATTRIBUTE_UNUSED,\n-\t  int sizeflag ATTRIBUTE_UNUSED)\n+OP_Mwait (int bytemode, int sizeflag ATTRIBUTE_UNUSED)\n {\n-  /* mwaitx %eax,%ecx,%ebx */\n-  if (!intel_syntax)\n-    {\n-      const char **names = (address_mode == mode_64bit\n-\t\t\t    ? names64 : names32);\n-      strcpy (op_out[0], names[0]);\n-      strcpy (op_out[1], names[1]);\n-      strcpy (op_out[2], names[3]);\n-      two_source_ops = 1;\n-    }\n-  /* Skip mod/rm byte.  */\n-  MODRM_CHECK;\n-  codep++;\n-}\n-\n-static void\n-OP_Mwait (int bytemode ATTRIBUTE_UNUSED,\n-\t  int sizeflag ATTRIBUTE_UNUSED)\n-{\n-  /* mwait %eax,%ecx  */\n+  /* mwait %eax,%ecx / mwaitx %eax,%ecx,%ebx  */\n   if (!intel_syntax)\n     {\n       const char **names = (address_mode == mode_64bit\n \t\t\t    ? names64 : names32);\n       strcpy (op_out[0], names[0]);\n       strcpy (op_out[1], names[1]);\n+      if (bytemode == eBX_reg)\n+\tstrcpy (op_out[2], names[3]);\n       two_source_ops = 1;\n     }\n   /* Skip mod/rm byte.  */"
    }
  ]
}