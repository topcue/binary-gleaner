{
  "sha": "aa2045e7fa41ea80a876421bca89443f7a2df92f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWEyMDQ1ZTdmYTQxZWE4MGE4NzY0MjFiY2E4OTQ0M2Y3YTJkZjkyZg==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-10-30T19:01:13Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-10-30T19:01:13Z"
    },
    "message": "gdb: rs6000_dwarf2_reg_to_regnum return -1 for unknown register number\n\nWith the current implementation of rs6000_dwarf2_reg_to_regnum, if an\nunknown DWARF register number is passed, the same number is returned as\nthe internal GDB number.  This assumes that the internal GDB register\nnumbers match the DWARF register numbers, which is not the case.\n\nChange it to return -1, as documented in gdbarch.sh for the\ndwarf2_reg_to_regnum method.\n\nThis fixes a failure in gdb.dwarf2/bad-regnum.exp:\n\n     (gdb) info addr foo1\n    -Symbol \"foo1\" is a variable in $.\n    -(gdb) FAIL: gdb.dwarf2/bad-regnum.exp: info addr foo1\n    +Symbol \"foo1\" is a variable in $bad_register_number.\n    +(gdb) PASS: gdb.dwarf2/bad-regnum.exp: info addr foo1\n\nI ran the entire testsuite on powerpc64 (gcc203 on the compile farm) and\ndidn't see any regression.\n\ngdb/ChangeLog:\n\n\t* rs6000-tdep.c (rs6000_dwarf2_reg_to_regnum): Return -1 for\n \tunknown register numbers.\n\nChange-Id: I585aa07a08f845a46c36bfdb6d3118ea94f8f54d",
    "tree": {
      "sha": "d621c45ad142eb5a86769ac9798938415fe6ba09",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d621c45ad142eb5a86769ac9798938415fe6ba09"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/aa2045e7fa41ea80a876421bca89443f7a2df92f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa2045e7fa41ea80a876421bca89443f7a2df92f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/aa2045e7fa41ea80a876421bca89443f7a2df92f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa2045e7fa41ea80a876421bca89443f7a2df92f/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b1ec273502937ca128df0ebf3e5961731fdc7272",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b1ec273502937ca128df0ebf3e5961731fdc7272",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b1ec273502937ca128df0ebf3e5961731fdc7272"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 7,
    "deletions": 2
  },
  "files": [
    {
      "sha": "185d4a37e04847410190fa95cfbd54ab39b0892a",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa2045e7fa41ea80a876421bca89443f7a2df92f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa2045e7fa41ea80a876421bca89443f7a2df92f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=aa2045e7fa41ea80a876421bca89443f7a2df92f",
      "patch": "@@ -1,3 +1,7 @@\n+2020-10-30  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* rs6000-tdep.c (rs6000_dwarf2_reg_to_regnum): Return -1 for\n+\n 2020-10-30  Tom Tromey  <tromey@adacore.com>\n \n \t* Makefile.in (stamp-init): Depend on config.status."
    },
    {
      "sha": "4b8c3ed99cacda0c2b4621e9633eb7894c0c3950",
      "filename": "gdb/rs6000-tdep.c",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa2045e7fa41ea80a876421bca89443f7a2df92f/gdb/rs6000-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa2045e7fa41ea80a876421bca89443f7a2df92f/gdb/rs6000-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/rs6000-tdep.c?ref=aa2045e7fa41ea80a876421bca89443f7a2df92f",
      "patch": "@@ -3240,9 +3240,10 @@ rs6000_dwarf2_reg_to_regnum (struct gdbarch *gdbarch, int num)\n         return tdep->ppc_vrsave_regnum;\n       case 612:\n         return tdep->ppc_spefscr_regnum;\n-      default:\n-        return num;\n       }\n+\n+  /* Unknown DWARF register number.  */\n+  return -1;\n }\n \n /* Translate a .eh_frame register to DWARF register, or adjust a"
    }
  ]
}