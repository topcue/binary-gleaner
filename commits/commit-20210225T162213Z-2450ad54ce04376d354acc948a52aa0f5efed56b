{
  "sha": "2450ad54ce04376d354acc948a52aa0f5efed56b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjQ1MGFkNTRjZTA0Mzc2ZDM1NGFjYzk0OGE1MmFhMGY1ZWZlZDU2Yg==",
  "commit": {
    "author": {
      "name": "Jan Vrany",
      "email": "jan.vrany@labware.com",
      "date": "2021-02-25T16:22:13Z"
    },
    "committer": {
      "name": "Jan Vrany",
      "email": "jan.vrany@labware.com",
      "date": "2021-02-25T16:22:13Z"
    },
    "message": "gdb/mi: Remove extra \\n from tsv and and traceframe notifications\n\nAn extra \\n in calls to fprintf_unfiltered() caused invalid MI records\nto be emitted:\n\n   > gdb -i mi3 -ex \"target remote :7000\"\n   =thread-group-added,id=\"i1\"\n   ~\"GNU gdb (GDB) 11.0.50.20201019-git\\n\"\n   ~\"Copyright (C) 2020 Free Software Foundation, Inc.\\n\"\n   ...\n   ~\"Remote debugging using :7001\\n\"\n   =tsv-created,name=\"trace_timestamp\",initial=\"0\"\\n\n   =thread-group-started,id=\"i1\",pid=\"304973\"\n\nThis commit fixes the problem.\n\ngdb/ChangeLog:\n\n        * gdb/mi/mi-interp.c (mi_traceframe_changed): Remove trailing \\n from output.\n        (mi_tsv_created): Likewise.\n        (mi_tsv_deleted): Likewise.",
    "tree": {
      "sha": "b19020dabd626124ecc81ec6902c2b39562cef4c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b19020dabd626124ecc81ec6902c2b39562cef4c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2450ad54ce04376d354acc948a52aa0f5efed56b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2450ad54ce04376d354acc948a52aa0f5efed56b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2450ad54ce04376d354acc948a52aa0f5efed56b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2450ad54ce04376d354acc948a52aa0f5efed56b/comments",
  "author": {
    "login": "janvrany",
    "id": 82951,
    "node_id": "MDQ6VXNlcjgyOTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/82951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janvrany",
    "html_url": "https://github.com/janvrany",
    "followers_url": "https://api.github.com/users/janvrany/followers",
    "following_url": "https://api.github.com/users/janvrany/following{/other_user}",
    "gists_url": "https://api.github.com/users/janvrany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janvrany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janvrany/subscriptions",
    "organizations_url": "https://api.github.com/users/janvrany/orgs",
    "repos_url": "https://api.github.com/users/janvrany/repos",
    "events_url": "https://api.github.com/users/janvrany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janvrany/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "janvrany",
    "id": 82951,
    "node_id": "MDQ6VXNlcjgyOTUx",
    "avatar_url": "https://avatars.githubusercontent.com/u/82951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/janvrany",
    "html_url": "https://github.com/janvrany",
    "followers_url": "https://api.github.com/users/janvrany/followers",
    "following_url": "https://api.github.com/users/janvrany/following{/other_user}",
    "gists_url": "https://api.github.com/users/janvrany/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/janvrany/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/janvrany/subscriptions",
    "organizations_url": "https://api.github.com/users/janvrany/orgs",
    "repos_url": "https://api.github.com/users/janvrany/repos",
    "events_url": "https://api.github.com/users/janvrany/events{/privacy}",
    "received_events_url": "https://api.github.com/users/janvrany/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "30c80d8833c037f25dd144a64f7f8b7b3ab19027",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/30c80d8833c037f25dd144a64f7f8b7b3ab19027",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/30c80d8833c037f25dd144a64f7f8b7b3ab19027"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 10,
    "deletions": 4
  },
  "files": [
    {
      "sha": "27b0e0cfec0e8b86ea44641928644332a727c0d7",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2450ad54ce04376d354acc948a52aa0f5efed56b/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2450ad54ce04376d354acc948a52aa0f5efed56b/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=2450ad54ce04376d354acc948a52aa0f5efed56b",
      "patch": "@@ -1,3 +1,9 @@\n+2021-02-25  Jan Vrany  <jan.vrany@labware.com>\n+\n+\t* gdb/mi/mi-interp.c (mi_traceframe_changed): Remove trailing \\n from output.\n+\t(mi_tsv_created): Likewise.\n+\t(mi_tsv_deleted): Likewise.\n+\n 2021-02-25  Tom de Vries  <tdevries@suse.de>\n \n \tPR symtab/27354"
    },
    {
      "sha": "4c5612ee9ee0d3377dc9d1526b09c2c775007e57",
      "filename": "gdb/mi/mi-interp.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2450ad54ce04376d354acc948a52aa0f5efed56b/gdb/mi/mi-interp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2450ad54ce04376d354acc948a52aa0f5efed56b/gdb/mi/mi-interp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/mi/mi-interp.c?ref=2450ad54ce04376d354acc948a52aa0f5efed56b",
      "patch": "@@ -731,7 +731,7 @@ mi_traceframe_changed (int tfnum, int tpnum)\n \n       if (tfnum >= 0)\n \tfprintf_unfiltered (mi->event_channel, \"traceframe-changed,\"\n-\t\t\t    \"num=\\\"%d\\\",tracepoint=\\\"%d\\\"\\n\",\n+\t\t\t    \"num=\\\"%d\\\",tracepoint=\\\"%d\\\"\",\n \t\t\t    tfnum, tpnum);\n       else\n \tfprintf_unfiltered (mi->event_channel, \"traceframe-changed,end\");\n@@ -756,7 +756,7 @@ mi_tsv_created (const struct trace_state_variable *tsv)\n       target_terminal::ours_for_output ();\n \n       fprintf_unfiltered (mi->event_channel, \"tsv-created,\"\n-\t\t\t  \"name=\\\"%s\\\",initial=\\\"%s\\\"\\n\",\n+\t\t\t  \"name=\\\"%s\\\",initial=\\\"%s\\\"\",\n \t\t\t  tsv->name.c_str (), plongest (tsv->initial_value));\n \n       gdb_flush (mi->event_channel);\n@@ -780,9 +780,9 @@ mi_tsv_deleted (const struct trace_state_variable *tsv)\n \n       if (tsv != NULL)\n \tfprintf_unfiltered (mi->event_channel, \"tsv-deleted,\"\n-\t\t\t    \"name=\\\"%s\\\"\\n\", tsv->name.c_str ());\n+\t\t\t    \"name=\\\"%s\\\"\", tsv->name.c_str ());\n       else\n-\tfprintf_unfiltered (mi->event_channel, \"tsv-deleted\\n\");\n+\tfprintf_unfiltered (mi->event_channel, \"tsv-deleted\");\n \n       gdb_flush (mi->event_channel);\n     }"
    }
  ]
}