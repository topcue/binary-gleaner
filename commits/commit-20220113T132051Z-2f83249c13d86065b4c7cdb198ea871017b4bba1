{
  "sha": "2f83249c13d86065b4c7cdb198ea871017b4bba1",
  "node_id": "C_kwDOANOeidoAKDJmODMyNDljMTNkODYwNjViNGM3Y2RiMTk4ZWE4NzEwMTdiNGJiYTE",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2022-01-10T23:26:18Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2022-01-13T13:20:51Z"
    },
    "message": "elf: Remove the 1-page gap before the RELRO segment\n\nThe existing RELRO scheme may leave a 1-page gap before the RELRO segment\nand align the end of the RELRO segment to the page size:\n\n  [18] .eh_frame    PROGBITS    408fa0 008fa0 005e80 00   A  0   0  8\n  [19] .init_array  INIT_ARRAY  410de0 00fde0 000008 08  WA  0   0  8\n  [20] .fini_array  FINI_ARRAY  410de8 00fde8 000008 08  WA  0   0  8\n  [21] .dynamic     DYNAMIC     410df0 00fdf0 000200 10  WA  7   0  8\n  [22] .got         PROGBITS    410ff0 00fff0 000010 08  WA  0   0  8\n  [23] .got.plt     PROGBITS    411000 010000 000048 08  WA  0   0  8\n\nInstead, we can remove the 1-page gap if the maximum page size >= the\nmaximum section alignment:\n\n  [18] .eh_frame    PROGBITS    408fa0 008fa0 005e80 00   A  0   0  8\n  [19] .init_array  INIT_ARRAY  40fde0 00fde0 000008 08  WA  0   0  8\n  [20] .fini_array  FINI_ARRAY  40fde8 00fde8 000008 08  WA  0   0  8\n  [21] .dynamic     DYNAMIC     40fdf0 00fdf0 000200 10  WA  7   0  8\n  [22] .got         PROGBITS    40fff0 00fff0 000010 08  WA  0   0  8\n  [23] .got.plt     PROGBITS    410000 010000 000048 08  WA  0   0  8\n\nBecause the end of the RELRO segment is always aligned to the page size\nand may not be moved, the RELRO segment size may be increased:\n\n  [ 3] .dynstr      STRTAB      000148 000148 000001 00   A  0   0  1\n  [ 4] .eh_frame    PROGBITS    000150 000150 000000 00   A  0   0  8\n  [ 5] .init_array  INIT_ARRAY  200150 000150 000010 08  WA  0   0  1\n  [ 6] .fini_array  FINI_ARRAY  200160 000160 000010 08  WA  0   0  1\n  [ 7] .jcr         PROGBITS    200170 000170 000008 00  WA  0   0  1\n  [ 8] .data.rel.ro PROGBITS    200180 000180 000020 00  WA  0   0 16\n  [ 9] .dynamic     DYNAMIC     2001a0 0001a0 0001c0 10  WA  3   0  8\n  [10] .got         PROGBITS    200360 000360 0002a8 00  WA  0   0  8\n  [11] .bss         NOBITS      201000 000608 000840 00  WA  0   0  1\n\nvs the old section layout:\n\n  [ 3] .dynstr      STRTAB      000148 000148 000001 00   A  0   0  1\n  [ 4] .eh_frame    PROGBITS    000150 000150 000000 00   A  0   0  8\n  [ 5] .init_array  INIT_ARRAY  200b48 000b48 000010 08  WA  0   0  1\n  [ 6] .fini_array  FINI_ARRAY  200b58 000b58 000010 08  WA  0   0  1\n  [ 7] .jcr         PROGBITS    200b68 000b68 000008 00  WA  0   0  1\n  [ 8] .data.rel.ro PROGBITS    200b70 000b70 000020 00  WA  0   0 16\n  [ 9] .dynamic     DYNAMIC     200b90 000b90 0001c0 10  WA  3   0  8\n  [10] .got         PROGBITS    200d50 000d50 0002a8 00  WA  0   0  8\n  [11] .bss         NOBITS      201000 000ff8 000840 00  WA  0   0  1\n\nBut there is no 1-page gap.\n\n\tPR ld/28743\n\t* ldlang.c (lang_size_relro_segment_1): Remove the 1-page gap\n\tbefore the RELRO segment if the maximum page size >= the maximum\n\tsection alignment.\n\t* testsuite/ld-i386/pr20830.d: Adjusted.\n\t* testsuite/ld-s390/gotreloc_64-relro-1.dd: Likewise.\n\t* testsuite/ld-x86-64/pr14207.d: Likewise.\n\t* testsuite/ld-x86-64/pr18176.d: Likewise.\n\t* testsuite/ld-x86-64/pr20830a-now.d: Likewise.\n\t* testsuite/ld-x86-64/pr20830a.d: Likewise.\n\t* testsuite/ld-x86-64/pr20830b-now.d: Likewise.\n\t* testsuite/ld-x86-64/pr20830b.d: Likewise.\n\t* testsuite/ld-x86-64/pr21038a-now.d: Likewise.\n\t* testsuite/ld-x86-64/pr21038a.d: Likewise.\n\t* testsuite/ld-x86-64/pr21038b-now.d: Likewise.\n\t* testsuite/ld-x86-64/pr21038c-now.d: Likewise.\n\t* testsuite/ld-x86-64/pr21038c.d: Likewise.",
    "tree": {
      "sha": "9e1807cdf070909cb98f34c3bb25a53f33d6f36b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9e1807cdf070909cb98f34c3bb25a53f33d6f36b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2f83249c13d86065b4c7cdb198ea871017b4bba1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2f83249c13d86065b4c7cdb198ea871017b4bba1",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2f83249c13d86065b4c7cdb198ea871017b4bba1",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2f83249c13d86065b4c7cdb198ea871017b4bba1/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ce2d3708bc8b1dfed6a3c69b56077ad10d2f351d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ce2d3708bc8b1dfed6a3c69b56077ad10d2f351d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ce2d3708bc8b1dfed6a3c69b56077ad10d2f351d"
    }
  ],
  "stats": {
    "total": 167,
    "additions": 110,
    "deletions": 57
  },
  "files": [
    {
      "sha": "48e4082863463f659839c2c992ae943024f75347",
      "filename": "ld/ldlang.c",
      "status": "modified",
      "additions": 71,
      "deletions": 18,
      "changes": 89,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/ldlang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/ldlang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldlang.c?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -6371,7 +6371,9 @@ static bfd_vma\n lang_size_relro_segment_1 (seg_align_type *seg)\n {\n   bfd_vma relro_end, desired_end;\n-  asection *sec;\n+  asection *sec, *prev_sec = NULL;\n+  bool remove_page_gap = false;\n+  unsigned int max_alignment_power = 0;\n \n   /* Compute the expected PT_GNU_RELRO/PT_LOAD segment end.  */\n   relro_end = ((seg->relro_end + seg->pagesize - 1)\n@@ -6382,28 +6384,79 @@ lang_size_relro_segment_1 (seg_align_type *seg)\n \n   /* For sections in the relro segment..  */\n   for (sec = link_info.output_bfd->section_last; sec; sec = sec->prev)\n-    if ((sec->flags & SEC_ALLOC) != 0\n-\t&& sec->vma >= seg->base\n-\t&& sec->vma < seg->relro_end - seg->relro_offset)\n+    if ((sec->flags & SEC_ALLOC) != 0)\n       {\n-\t/* Where do we want to put this section so that it ends as\n-\t   desired?  */\n-\tbfd_vma start, end, bump;\n-\n-\tend = start = sec->vma;\n-\tif (!IS_TBSS (sec))\n-\t  end += TO_ADDR (sec->size);\n-\tbump = desired_end - end;\n-\t/* We'd like to increase START by BUMP, but we must heed\n-\t   alignment so the increase might be less than optimum.  */\n-\tstart += bump;\n-\tstart &= ~(((bfd_vma) 1 << sec->alignment_power) - 1);\n-\t/* This is now the desired end for the previous section.  */\n-\tdesired_end = start;\n+\tif (sec->alignment_power > max_alignment_power)\n+\t  max_alignment_power = sec->alignment_power;\n+\n+\tif (sec->vma >= seg->base\n+\t    && sec->vma < seg->relro_end - seg->relro_offset)\n+\t  {\n+\t    /* Where do we want to put this section so that it ends as\n+\t       desired?  */\n+\t    bfd_vma start, end, bump;\n+\n+\t    end = start = sec->vma;\n+\t    if (!IS_TBSS (sec))\n+\t      end += TO_ADDR (sec->size);\n+\t    bump = desired_end - end;\n+\t    /* We'd like to increase START by BUMP, but we must heed\n+\t       alignment so the increase might be less than optimum.  */\n+\t    start += bump;\n+\t    start &= ~(((bfd_vma) 1 << sec->alignment_power) - 1);\n+\t    /* This is now the desired end for the previous section.  */\n+\t    desired_end = start;\n+\t    prev_sec = sec->prev;\n+\t  }\n       }\n \n   seg->phase = exp_seg_relro_adjust;\n   ASSERT (desired_end >= seg->base);\n+\n+  for (; prev_sec; prev_sec = prev_sec->prev)\n+    if ((prev_sec->flags & SEC_ALLOC) != 0)\n+      {\n+\tif (prev_sec->alignment_power > max_alignment_power)\n+\t  max_alignment_power = prev_sec->alignment_power;\n+\n+\tif (prev_sec->size != 0)\n+\t  {\n+\t    /* The 1-page gap before the RELRO segment may be removed.  */\n+\t    remove_page_gap = ((prev_sec->vma + prev_sec->size\n+\t\t\t\t+ seg->maxpagesize) < desired_end);\n+\n+\t    break;\n+\t  }\n+      }\n+\n+  if (remove_page_gap)\n+    {\n+      /* Find the maximum section alignment.  */\n+      for (sec = prev_sec; sec; sec = sec->prev)\n+\tif ((sec->flags & SEC_ALLOC) != 0\n+\t    && sec->alignment_power > max_alignment_power)\n+\t  max_alignment_power = sec->alignment_power;\n+\n+      /* Remove the 1-page gap before the RELRO segment only if the\n+\t maximum page size >= the maximum section alignment.  */\n+      if (seg->maxpagesize >= (1U << max_alignment_power))\n+\t{\n+\t  /* If the preceding section size is greater than the maximum\n+\t     page size, subtract the maximum page size.  Otherwise,\n+\t     align the RELRO segment to the maximum page size.  */\n+\t  if (prev_sec->size > seg->maxpagesize)\n+\t    {\n+\t      desired_end -= seg->maxpagesize;\n+\t      relro_end -= seg->maxpagesize;\n+\t    }\n+\t  else\n+\t    {\n+\t      desired_end &= ~(seg->maxpagesize - 1);\n+\t      relro_end &= ~(seg->maxpagesize - 1);\n+\t    }\n+\t  }\n+      }\n+\n   seg->base = desired_end;\n   return relro_end;\n }"
    },
    {
      "sha": "f1e3733673313709c253371ceb6794ca47b1e672",
      "filename": "ld/testsuite/ld-i386/pr20830.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-i386/pr20830.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-i386/pr20830.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-i386/pr20830.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -49,12 +49,12 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+120 <func@plt>:\n- +[a-f0-9]+:\tff a3 fc ff ff ff    \tjmp    \\*-0x4\\(%ebx\\)\n+ +[a-f0-9]+:\tff a3 78 f0 ff ff    \tjmp    \\*-0xf88\\(%ebx\\)\n  +[a-f0-9]+:\t66 90                \txchg   %ax,%ax\n \n Disassembly of section .text:\n \n 0+128 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   120 <func@plt>\n- +[a-f0-9]+:\t8b 83 fc ff ff ff    \tmov    -0x4\\(%ebx\\),%eax\n+ +[a-f0-9]+:\t8b 83 78 f0 ff ff    \tmov    -0xf88\\(%ebx\\),%eax\n #pass"
    },
    {
      "sha": "5a107465be29e0277f521d0970e69eb129e706f7",
      "filename": "ld/testsuite/ld-s390/gotreloc_64-relro-1.dd",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-s390/gotreloc_64-relro-1.dd",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-s390/gotreloc_64-relro-1.dd",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-s390/gotreloc_64-relro-1.dd?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -5,8 +5,8 @@ Disassembly of section .text:\n .* <foo>:\n .*:\tc0 10 00 00 0f 0c [\t ]*larl\t%r1,2000 <bar>\n .*:\tc0 10 00 00 0f 09 [\t ]*larl\t%r1,2000 <bar>\n-.*:\tc4 1d 00 00 0f 02 [\t ]*lrl\t%r1,1ff8 <_GLOBAL_OFFSET_TABLE_\\+0x28>\n+.*:\tc4 1d 00 00 07 8a [\t ]*lrl\t%r1,1108 <_GLOBAL_OFFSET_TABLE_\\+0x28>\n .*:\t58 10 c0 28 [\t ]*l\t%r1,40\\(%r12\\)\n .*:\te3 10 c0 28 00 58 [\t ]*ly\t%r1,40\\(%r12\\)\n-.*:\tc4 18 00 00 0e f6 [\t ]*lgrl\t%r1,1ff0 <_GLOBAL_OFFSET_TABLE_\\+0x20>\n-.*:\tc4 18 00 00 0e ef [\t ]*lgrl\t%r1,1fe8 <_GLOBAL_OFFSET_TABLE_\\+0x18>\n+.*:\tc4 18 00 00 07 7e [\t ]*lgrl\t%r1,1100 <_GLOBAL_OFFSET_TABLE_\\+0x20>\n+.*:\tc4 18 00 00 07 77 [\t ]*lgrl\t%r1,10f8 <_GLOBAL_OFFSET_TABLE_\\+0x18>"
    },
    {
      "sha": "c1991daccc8acedd312c1b9dd4e21d39a1cbc95e",
      "filename": "ld/testsuite/ld-x86-64/pr14207.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr14207.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr14207.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr14207.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -11,9 +11,9 @@ There are 4 program headers, starting at offset 64\n Program Headers:\n   Type           Offset   VirtAddr           PhysAddr           FileSiz  MemSiz   Flg Align\n   LOAD           0x000000 0x0000000000000000 0x0000000000000000 0x000150 0x000150 R   0x200000\n-  LOAD           0x000b.8 0x0000000000200b.8 0x0000000000200b.8 0x0004.0 0x000c.8 RW  0x200000\n-  DYNAMIC        0x000b.0 0x0000000000200b.0 0x0000000000200b.0 0x0001.0 0x0001.0 RW  0x8\n-  GNU_RELRO      0x000b.8 0x0000000000200b.8 0x0000000000200b.8 0x0004.0 0x0004.8 R   0x1\n+  LOAD           0x000150 0x0000000000200150 0x0000000000200150 0x0004b8 0x0016f0 RW  0x200000\n+  DYNAMIC        0x0001a0 0x00000000002001a0 0x00000000002001a0 0x0001c0 0x0001c0 RW  0x8\n+  GNU_RELRO      0x000150 0x0000000000200150 0x0000000000200150 0x0004b8 0x000eb0 R   0x1\n \n  Section to Segment mapping:\n   Segment Sections..."
    },
    {
      "sha": "c053b52a2928612e82340244f1d14cfbab422632",
      "filename": "ld/testsuite/ld-x86-64/pr18176.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr18176.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr18176.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr18176.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -5,5 +5,5 @@\n #target: x86_64-*-linux*\n \n #...\n-  GNU_RELRO      0x04bd17 0x000000000024bd17 0x000000000024bd17 0x0022e9 0x0022e9 R   0x1\n+  GNU_RELRO      0x04bcc7 0x000000000024bcc7 0x000000000024bcc7 0x002339 0x002339 R   0x1\n #pass"
    },
    {
      "sha": "b8fa6acd1d400e95306110e07d7588121ee005dc",
      "filename": "ld/testsuite/ld-x86-64/pr20830a-now.d",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830a-now.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830a-now.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr20830a-now.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -50,19 +50,19 @@ Contents of the .eh_frame section:\n Disassembly of section .plt:\n \n 0+1b0 <.plt>:\n- +[a-f0-9]+:\tff 35 32 0e 20 00    \tpush   0x200e32\\(%rip\\)        # 200fe8 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n- +[a-f0-9]+:\tff 25 34 0e 20 00    \tjmp    \\*0x200e34\\(%rip\\)        # 200ff0 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n+ +[a-f0-9]+:\tff 35 aa 01 20 00    \tpush   0x2001aa\\(%rip\\)        # 200360 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n+ +[a-f0-9]+:\tff 25 ac 01 20 00    \tjmp    \\*0x2001ac\\(%rip\\)        # 200368 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n  +[a-f0-9]+:\t0f 1f 40 00          \tnopl   0x0\\(%rax\\)\n \n Disassembly of section .plt.got:\n \n 0+1c0 <func@plt>:\n- +[a-f0-9]+:\tff 25 32 0e 20 00    \tjmp    \\*0x200e32\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tff 25 aa 01 20 00    \tjmp    \\*0x2001aa\\(%rip\\)        # 200370 <func>\n  +[a-f0-9]+:\t66 90                \txchg   %ax,%ax\n \n Disassembly of section .text:\n \n 0+1c8 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   1c0 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 24 0e 20 00 \tmov    0x200e24\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 9c 01 20 00 \tmov    0x20019c\\(%rip\\),%rax        # 200370 <func>\n #pass"
    },
    {
      "sha": "5c16652c4a86c2f158c6275065227d7106524c40",
      "filename": "ld/testsuite/ld-x86-64/pr20830a.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr20830a.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -57,12 +57,12 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+1c0 <func@plt>:\n- +[a-f0-9]+:\tff 25 32 0e 20 00    \tjmp    \\*0x200e32\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tff 25 72 01 20 00    \tjmp    \\*0x200172\\(%rip\\)        # 200338 <func>\n  +[a-f0-9]+:\t66 90                \txchg   %ax,%ax\n \n Disassembly of section .text:\n \n 0+1c8 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   1c0 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 24 0e 20 00 \tmov    0x200e24\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 64 01 20 00 \tmov    0x200164\\(%rip\\),%rax        # 200338 <func>\n #pass"
    },
    {
      "sha": "0c4f2ada3dd856b565eef7da777560d29b8f1f7c",
      "filename": "ld/testsuite/ld-x86-64/pr20830b-now.d",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830b-now.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830b-now.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr20830b-now.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -1,4 +1,4 @@\n-#name: PR ld/20830 (.plt.got, -z now)\n+#name: PR ld/20830 x32 (.plt.got, -z now)\n #source: pr20830.s\n #as: --x32\n #ld: -z now -melf32_x86_64 -shared -z relro --ld-generated-unwind-info --hash-style=sysv -z max-page-size=0x200000 -z noseparate-code\n@@ -42,19 +42,19 @@ Contents of the .eh_frame section:\n Disassembly of section .plt:\n \n 0+120 <.plt>:\n- +[a-f0-9]+:\tff 35 c2 0e 20 00    \tpush   0x200ec2\\(%rip\\)        # 200fe8 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n- +[a-f0-9]+:\tff 25 c4 0e 20 00    \tjmp    \\*0x200ec4\\(%rip\\)        # 200ff0 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n+ +[a-f0-9]+:\tff 35 12 01 20 00    \tpush   0x200112\\(%rip\\)        # 200238 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n+ +[a-f0-9]+:\tff 25 14 01 20 00    \tjmp    \\*0x200114\\(%rip\\)        # 200240 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n  +[a-f0-9]+:\t0f 1f 40 00          \tnopl   0x0\\(%rax\\)\n \n Disassembly of section .plt.got:\n \n 0+130 <func@plt>:\n- +[a-f0-9]+:\tff 25 c2 0e 20 00    \tjmp    \\*0x200ec2\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tff 25 12 01 20 00    \tjmp    \\*0x200112\\(%rip\\)        # 200248 <func>\n  +[a-f0-9]+:\t66 90                \txchg   %ax,%ax\n \n Disassembly of section .text:\n \n 0+138 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   130 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 b4 0e 20 00 \tmov    0x200eb4\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 04 01 20 00 \tmov    0x200104\\(%rip\\),%rax        # 200248 <func>\n #pass"
    },
    {
      "sha": "6f4f22ca960c3167fc2b283259b695d0337dfb82",
      "filename": "ld/testsuite/ld-x86-64/pr20830b.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr20830b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr20830b.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -1,4 +1,4 @@\n-#name: PR ld/20830 (.plt.got)\n+#name: PR ld/20830 x32 (.plt.got)\n #source: pr20830.s\n #as: --x32\n #ld: -melf32_x86_64 -shared -z relro --ld-generated-unwind-info --hash-style=sysv -z max-page-size=0x200000 -z noseparate-code\n@@ -49,12 +49,12 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+130 <func@plt>:\n- +[a-f0-9]+:\tff 25 c2 0e 20 00    \tjmp    \\*0x200ec2\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tff 25 ea 00 20 00    \tjmp    \\*0x2000ea\\(%rip\\)        # 200220 <func>\n  +[a-f0-9]+:\t66 90                \txchg   %ax,%ax\n \n Disassembly of section .text:\n \n 0+138 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   130 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 b4 0e 20 00 \tmov    0x200eb4\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 dc 00 20 00 \tmov    0x2000dc\\(%rip\\),%rax        # 200220 <func>\n #pass"
    },
    {
      "sha": "c05800962be7f22680c2d6e95a174ab943c4d09c",
      "filename": "ld/testsuite/ld-x86-64/pr21038a-now.d",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038a-now.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038a-now.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr21038a-now.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -50,19 +50,19 @@ Contents of the .eh_frame section:\n Disassembly of section .plt:\n \n 0+1b0 <.plt>:\n- +[a-f0-9]+:\tff 35 32 0e 20 00    \tpush   0x200e32\\(%rip\\)        # 200fe8 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n- +[a-f0-9]+:\tf2 ff 25 33 0e 20 00 \tbnd jmp \\*0x200e33\\(%rip\\)        # 200ff0 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n+ +[a-f0-9]+:\tff 35 aa 01 20 00    \tpush   0x2001aa\\(%rip\\)        # 200360 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n+ +[a-f0-9]+:\tf2 ff 25 ab 01 20 00 \tbnd jmp \\*0x2001ab\\(%rip\\)        # 200368 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n  +[a-f0-9]+:\t0f 1f 00             \tnopl   \\(%rax\\)\n \n Disassembly of section .plt.got:\n \n 0+1c0 <func@plt>:\n- +[a-f0-9]+:\tf2 ff 25 31 0e 20 00 \tbnd jmp \\*0x200e31\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tf2 ff 25 a9 01 20 00 \tbnd jmp \\*0x2001a9\\(%rip\\)        # 200370 <func>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .text:\n \n 0+1c8 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   1c0 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 24 0e 20 00 \tmov    0x200e24\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 9c 01 20 00 \tmov    0x20019c\\(%rip\\),%rax        # 200370 <func>\n #pass"
    },
    {
      "sha": "e0c3c7cf63f60b1d7945f88222333bbcbccd83cf",
      "filename": "ld/testsuite/ld-x86-64/pr21038a.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr21038a.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -56,12 +56,12 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+1c0 <func@plt>:\n- +[a-f0-9]+:\tf2 ff 25 31 0e 20 00 \tbnd jmp \\*0x200e31\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tf2 ff 25 71 01 20 00 \tbnd jmp \\*0x200171\\(%rip\\)        # 200338 <func>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .text:\n \n 0+1c8 <foo>:\n  +[a-f0-9]+:\te8 f3 ff ff ff       \tcall   1c0 <func@plt>\n- +[a-f0-9]+:\t48 8b 05 24 0e 20 00 \tmov    0x200e24\\(%rip\\),%rax        # 200ff8 <func>\n+ +[a-f0-9]+:\t48 8b 05 64 01 20 00 \tmov    0x200164\\(%rip\\),%rax        # 200338 <func>\n #pass"
    },
    {
      "sha": "519c5a3e9574e517a94aca13e033163bf5cd8184",
      "filename": "ld/testsuite/ld-x86-64/pr21038b-now.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038b-now.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038b-now.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr21038b-now.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -50,8 +50,8 @@ Contents of the .eh_frame section:\n Disassembly of section .plt:\n \n 0+1b0 <.plt>:\n- +[a-f0-9]+:\tff 35 32 0e 20 00    \tpush   0x200e32\\(%rip\\)        # 200fe8 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n- +[a-f0-9]+:\tf2 ff 25 33 0e 20 00 \tbnd jmp \\*0x200e33\\(%rip\\)        # 200ff0 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n+ +[a-f0-9]+:\tff 35 b2 01 20 00    \tpush   0x2001b2\\(%rip\\)        # 200368 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n+ +[a-f0-9]+:\tf2 ff 25 b3 01 20 00 \tbnd jmp \\*0x2001b3\\(%rip\\)        # 200370 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n  +[a-f0-9]+:\t0f 1f 00             \tnopl   \\(%rax\\)\n  +[a-f0-9]+:\t68 00 00 00 00       \tpush   \\$0x0\n  +[a-f0-9]+:\tf2 e9 e5 ff ff ff    \tbnd jmp 1b0 <func@plt-0x20>\n@@ -60,7 +60,7 @@ Disassembly of section .plt:\n Disassembly of section .plt.sec:\n \n 0+1d0 <func@plt>:\n- +[a-f0-9]+:\tf2 ff 25 21 0e 20 00 \tbnd jmp \\*0x200e21\\(%rip\\)        # 200ff8 <func>\n+ +[a-f0-9]+:\tf2 ff 25 a1 01 20 00 \tbnd jmp \\*0x2001a1\\(%rip\\)        # 200378 <func>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .text:"
    },
    {
      "sha": "6c947ea4c1382e423209d61c382c4d0367094984",
      "filename": "ld/testsuite/ld-x86-64/pr21038c-now.d",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038c-now.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038c-now.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr21038c-now.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -59,8 +59,8 @@ Contents of the .eh_frame section:\n Disassembly of section .plt:\n \n 0+1f0 <.plt>:\n- +[a-f0-9]+:\tff 35 ea 0d 20 00    \tpush   0x200dea\\(%rip\\)        # 200fe0 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n- +[a-f0-9]+:\tf2 ff 25 eb 0d 20 00 \tbnd jmp \\*0x200deb\\(%rip\\)        # 200fe8 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n+ +[a-f0-9]+:\tff 35 12 02 20 00    \tpush   0x200212\\(%rip\\)        # 200408 <_GLOBAL_OFFSET_TABLE_\\+0x8>\n+ +[a-f0-9]+:\tf2 ff 25 13 02 20 00 \tbnd jmp \\*0x200213\\(%rip\\)        # 200410 <_GLOBAL_OFFSET_TABLE_\\+0x10>\n  +[a-f0-9]+:\t0f 1f 00             \tnopl   \\(%rax\\)\n  +[a-f0-9]+:\t68 00 00 00 00       \tpush   \\$0x0\n  +[a-f0-9]+:\tf2 e9 e5 ff ff ff    \tbnd jmp 1f0 <func1@plt-0x20>\n@@ -69,19 +69,19 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+210 <func1@plt>:\n- +[a-f0-9]+:\tf2 ff 25 e1 0d 20 00 \tbnd jmp \\*0x200de1\\(%rip\\)        # 200ff8 <func1>\n+ +[a-f0-9]+:\tf2 ff 25 09 02 20 00 \tbnd jmp \\*0x200209\\(%rip\\)        # 200420 <func1>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .plt.sec:\n \n 0+218 <func2@plt>:\n- +[a-f0-9]+:\tf2 ff 25 d1 0d 20 00 \tbnd jmp \\*0x200dd1\\(%rip\\)        # 200ff0 <func2>\n+ +[a-f0-9]+:\tf2 ff 25 f9 01 20 00 \tbnd jmp \\*0x2001f9\\(%rip\\)        # 200418 <func2>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .text:\n \n 0+220 <foo>:\n  +[a-f0-9]+:\te8 eb ff ff ff       \tcall   210 <func1@plt>\n  +[a-f0-9]+:\te8 ee ff ff ff       \tcall   218 <func2@plt>\n- +[a-f0-9]+:\t48 8b 05 c7 0d 20 00 \tmov    0x200dc7\\(%rip\\),%rax        # 200ff8 <func1>\n+ +[a-f0-9]+:\t48 8b 05 ef 01 20 00 \tmov    0x2001ef\\(%rip\\),%rax        # 200420 <func1>\n #pass"
    },
    {
      "sha": "40ecc97e5174adee04301af48566d57581389e89",
      "filename": "ld/testsuite/ld-x86-64/pr21038c.d",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038c.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f83249c13d86065b4c7cdb198ea871017b4bba1/ld/testsuite/ld-x86-64/pr21038c.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr21038c.d?ref=2f83249c13d86065b4c7cdb198ea871017b4bba1",
      "patch": "@@ -68,7 +68,7 @@ Disassembly of section .plt:\n Disassembly of section .plt.got:\n \n 0+210 <func1@plt>:\n- +[a-f0-9]+:\tf2 ff 25 e1 0d 20 00 \tbnd jmp \\*0x200de1\\(%rip\\)        # 200ff8 <func1>\n+ +[a-f0-9]+:\tf2 ff 25 c9 01 20 00 \tbnd jmp \\*0x2001c9\\(%rip\\)        # 2003e0 <func1>\n  +[a-f0-9]+:\t90                   \tnop\n \n Disassembly of section .plt.sec:\n@@ -82,5 +82,5 @@ Disassembly of section .text:\n 0+220 <foo>:\n  +[a-f0-9]+:\te8 eb ff ff ff       \tcall   210 <func1@plt>\n  +[a-f0-9]+:\te8 ee ff ff ff       \tcall   218 <func2@plt>\n- +[a-f0-9]+:\t48 8b 05 c7 0d 20 00 \tmov    0x200dc7\\(%rip\\),%rax        # 200ff8 <func1>\n+ +[a-f0-9]+:\t48 8b 05 af 01 20 00 \tmov    0x2001af\\(%rip\\),%rax        # 2003e0 <func1>\n #pass"
    }
  ]
}