{
  "sha": "a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTZkMGYyNDkwYzBjNzk2OWViNjAwMzhmMDFjMGVlMGY0NmU0ZDVmZA==",
  "commit": {
    "author": {
      "name": "Alan Hayward",
      "email": "alan.hayward@arm.com",
      "date": "2019-05-14T09:09:05Z"
    },
    "committer": {
      "name": "Alan Hayward",
      "email": "alan.hayward@arm.com",
      "date": "2019-05-14T09:10:56Z"
    },
    "message": "AArch64: Add half float view to V registers\n\nAArch64 can fill the vector registers with half precision floats.\nAdd a view for this.\n\nAdd builtin type ieee half and connect this to the existing\nfloatformats_ieee_half.\n\ngdb/ChangeLog:\n\n2019-05-14  Alan Hayward  <alan.hayward@arm.com>\n\n\t* aarch64-tdep.c (aarch64_vnh_type): Add half view.\n\t(aarch64_vnv_type): Likewise.\n\t* target-descriptions.c (make_gdb_type): Add TDESC_TYPE_IEEE_HALF.\n\t* common/tdesc.c: Likewise.\n\t* common/tdesc.h (enum tdesc_type_kind): Likewise.\n\t* features/aarch64-fpu.c (create_feature_aarch64_fpu): Regenerate.\n\t* features/aarch64-fpu.xml: Add ieee half view.\n\t* features/aarch64-sve.c (create_feature_aarch64_fpu): Likewise.\n\t* gdbtypes.c (gdbtypes_post_init): Add builtin_half\n\t* gdbtypes.h (struct builtin_type): Likewise.\n\t(struct objfile_type): Likewise.",
    "tree": {
      "sha": "691f94788a913e65c545a9cedff6dc2082c2ec10",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/691f94788a913e65c545a9cedff6dc2082c2ec10"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/comments",
  "author": {
    "login": "a74nh",
    "id": 4146708,
    "node_id": "MDQ6VXNlcjQxNDY3MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4146708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/a74nh",
    "html_url": "https://github.com/a74nh",
    "followers_url": "https://api.github.com/users/a74nh/followers",
    "following_url": "https://api.github.com/users/a74nh/following{/other_user}",
    "gists_url": "https://api.github.com/users/a74nh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/a74nh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/a74nh/subscriptions",
    "organizations_url": "https://api.github.com/users/a74nh/orgs",
    "repos_url": "https://api.github.com/users/a74nh/repos",
    "events_url": "https://api.github.com/users/a74nh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/a74nh/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "a74nh",
    "id": 4146708,
    "node_id": "MDQ6VXNlcjQxNDY3MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4146708?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/a74nh",
    "html_url": "https://github.com/a74nh",
    "followers_url": "https://api.github.com/users/a74nh/followers",
    "following_url": "https://api.github.com/users/a74nh/following{/other_user}",
    "gists_url": "https://api.github.com/users/a74nh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/a74nh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/a74nh/subscriptions",
    "organizations_url": "https://api.github.com/users/a74nh/orgs",
    "repos_url": "https://api.github.com/users/a74nh/repos",
    "events_url": "https://api.github.com/users/a74nh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/a74nh/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2764128dee821448ba43a50ed8cee387f2ee8dca",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2764128dee821448ba43a50ed8cee387f2ee8dca",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2764128dee821448ba43a50ed8cee387f2ee8dca"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 43,
    "deletions": 0
  },
  "files": [
    {
      "sha": "44646f50d5b007fee2c65fcc64b420760ec3892e",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -1,3 +1,17 @@\n+2019-05-14  Alan Hayward  <alan.hayward@arm.com>\n+\n+\t* aarch64-tdep.c (aarch64_vnh_type): Add half view.\n+\t(aarch64_vnv_type): Likewise.\n+\t* target-descriptions.c (make_gdb_type): Add TDESC_TYPE_IEEE_HALF.\n+\t* common/tdesc.c: Likewise.\n+\t* common/tdesc.h (enum tdesc_type_kind): Likewise.\n+\t* features/aarch64-fpu.c (create_feature_aarch64_fpu): Regenerate.\n+\t* features/aarch64-fpu.xml: Add ieee half view.\n+\t* features/aarch64-sve.c (create_feature_aarch64_fpu): Likewise.\n+\t* gdbtypes.c (gdbtypes_post_init): Add builtin_half\n+\t* gdbtypes.h (struct builtin_type): Likewise.\n+\t(struct objfile_type): Likewise.\n+\n 2019-05-12  Paul Naert  <paul.naert@polymtl.ca>\n \n \t* language.c (language_sniff_from_mangled_name): Fix \"langauge\""
    },
    {
      "sha": "bbb2a25f956c3b09ba199143d5439e2a135fe719",
      "filename": "gdb/aarch64-tdep.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/aarch64-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/aarch64-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/aarch64-tdep.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -1885,6 +1885,9 @@ aarch64_vnh_type (struct gdbarch *gdbarch)\n       t = arch_composite_type (gdbarch, \"__gdb_builtin_type_vnh\",\n \t\t\t       TYPE_CODE_UNION);\n \n+      elem = builtin_type (gdbarch)->builtin_half;\n+      append_composite_type_field (t, \"f\", elem);\n+\n       elem = builtin_type (gdbarch)->builtin_uint16;\n       append_composite_type_field (t, \"u\", elem);\n \n@@ -1963,6 +1966,8 @@ aarch64_vnv_type (struct gdbarch *gdbarch)\n \n       sub = arch_composite_type (gdbarch, \"__gdb_builtin_type_vnh\",\n \t\t\t\t TYPE_CODE_UNION);\n+      append_composite_type_field (sub, \"f\",\n+\t\t\t\t   init_vector_type (bt->builtin_half, 8));\n       append_composite_type_field (sub, \"u\",\n \t\t\t\t   init_vector_type (bt->builtin_uint16, 8));\n       append_composite_type_field (sub, \"s\","
    },
    {
      "sha": "f946a53c7f36fd915f2e5409c50aaeaa0b604716",
      "filename": "gdb/common/tdesc.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/common/tdesc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/common/tdesc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/common/tdesc.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -50,6 +50,7 @@ static tdesc_type_builtin tdesc_predefined_types[] =\n   { \"uint128\", TDESC_TYPE_UINT128 },\n   { \"code_ptr\", TDESC_TYPE_CODE_PTR },\n   { \"data_ptr\", TDESC_TYPE_DATA_PTR },\n+  { \"ieee_half\", TDESC_TYPE_IEEE_HALF },\n   { \"ieee_single\", TDESC_TYPE_IEEE_SINGLE },\n   { \"ieee_double\", TDESC_TYPE_IEEE_DOUBLE },\n   { \"arm_fpa_ext\", TDESC_TYPE_ARM_FPA_EXT },"
    },
    {
      "sha": "9eb3d5ea3121681ef0b4fe6cb4ba7a4553fe49fc",
      "filename": "gdb/common/tdesc.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/common/tdesc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/common/tdesc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/common/tdesc.h?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -147,6 +147,7 @@ enum tdesc_type_kind\n   TDESC_TYPE_UINT128,\n   TDESC_TYPE_CODE_PTR,\n   TDESC_TYPE_DATA_PTR,\n+  TDESC_TYPE_IEEE_HALF,\n   TDESC_TYPE_IEEE_SINGLE,\n   TDESC_TYPE_IEEE_DOUBLE,\n   TDESC_TYPE_ARM_FPA_EXT,"
    },
    {
      "sha": "b73d12ebe4880e0c03cc8cd01e24dd3efe2c040a",
      "filename": "gdb/features/aarch64-fpu.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-fpu.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-fpu.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/aarch64-fpu.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -28,6 +28,9 @@ create_feature_aarch64_fpu (struct target_desc *result, long regnum)\n   element_type = tdesc_named_type (feature, \"int32\");\n   tdesc_create_vector (feature, \"v4i\", element_type, 4);\n \n+  element_type = tdesc_named_type (feature, \"ieee_half\");\n+  tdesc_create_vector (feature, \"v8f\", element_type, 8);\n+\n   element_type = tdesc_named_type (feature, \"uint16\");\n   tdesc_create_vector (feature, \"v8u\", element_type, 8);\n \n@@ -65,6 +68,8 @@ create_feature_aarch64_fpu (struct target_desc *result, long regnum)\n   tdesc_add_field (type_with_fields, \"s\", field_type);\n \n   type_with_fields = tdesc_create_union (feature, \"vnh\");\n+  field_type = tdesc_named_type (feature, \"v8f\");\n+  tdesc_add_field (type_with_fields, \"f\", field_type);\n   field_type = tdesc_named_type (feature, \"v8u\");\n   tdesc_add_field (type_with_fields, \"u\", field_type);\n   field_type = tdesc_named_type (feature, \"v8i\");"
    },
    {
      "sha": "1eba8faea7c92bda8eba922dbf0e8f71701f010f",
      "filename": "gdb/features/aarch64-fpu.xml",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-fpu.xml",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-fpu.xml",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/aarch64-fpu.xml?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -14,6 +14,7 @@\n   <vector id=\"v4f\" type=\"ieee_single\" count=\"4\"/>\n   <vector id=\"v4u\" type=\"uint32\" count=\"4\"/>\n   <vector id=\"v4i\" type=\"int32\" count=\"4\"/>\n+  <vector id=\"v8f\" type=\"ieee_half\" count=\"8\"/>\n   <vector id=\"v8u\" type=\"uint16\" count=\"8\"/>\n   <vector id=\"v8i\" type=\"int16\" count=\"8\"/>\n   <vector id=\"v16u\" type=\"uint8\" count=\"16\"/>\n@@ -31,6 +32,7 @@\n     <field name=\"s\" type=\"v4i\"/>\n   </union>\n   <union id=\"vnh\">\n+    <field name=\"f\" type=\"v8f\"/>\n     <field name=\"u\" type=\"v8u\"/>\n     <field name=\"s\" type=\"v8i\"/>\n   </union>"
    },
    {
      "sha": "ae292d2f3da50291587a6cdfbca6bc789430ce19",
      "filename": "gdb/features/aarch64-sve.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-sve.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/features/aarch64-sve.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/aarch64-sve.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -55,6 +55,9 @@ create_feature_aarch64_sve (struct target_desc *result, long regnum,\n   element_type = tdesc_named_type (feature, \"int32\");\n   tdesc_create_vector (feature, \"svevss\", element_type, 4 * scale);\n \n+  element_type = tdesc_named_type (feature, \"ieee_half\");\n+  tdesc_create_vector (feature, \"svevhf\", element_type, 8 * scale);\n+\n   element_type = tdesc_named_type (feature, \"uint16\");\n   tdesc_create_vector (feature, \"svevhu\", element_type, 8 * scale);\n \n@@ -90,6 +93,8 @@ create_feature_aarch64_sve (struct target_desc *result, long regnum,\n   tdesc_add_field (type_with_fields, \"s\", field_type);\n \n   type_with_fields = tdesc_create_union (feature, \"svevnh\");\n+  field_type = tdesc_named_type (feature, \"svevhf\");\n+  tdesc_add_field (type_with_fields, \"f\", field_type);\n   field_type = tdesc_named_type (feature, \"svevhu\");\n   tdesc_add_field (type_with_fields, \"u\", field_type);\n   field_type = tdesc_named_type (feature, \"svevhs\");"
    },
    {
      "sha": "e329adc368e049608fb953a349d463247c744af2",
      "filename": "gdb/gdbtypes.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/gdbtypes.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/gdbtypes.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbtypes.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -5359,6 +5359,9 @@ gdbtypes_post_init (struct gdbarch *gdbarch)\n   builtin_type->builtin_unsigned_long_long\n     = arch_integer_type (gdbarch, gdbarch_long_long_bit (gdbarch),\n \t\t\t 1, \"unsigned long long\");\n+  builtin_type->builtin_half\n+    = arch_float_type (gdbarch, gdbarch_half_bit (gdbarch),\n+\t\t       \"half\", gdbarch_half_format (gdbarch));\n   builtin_type->builtin_float\n     = arch_float_type (gdbarch, gdbarch_float_bit (gdbarch),\n \t\t       \"float\", gdbarch_float_format (gdbarch));"
    },
    {
      "sha": "2f3834e9f560ec35b5aa786b8f9d40e2b4149c91",
      "filename": "gdb/gdbtypes.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/gdbtypes.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/gdbtypes.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbtypes.h?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -1595,6 +1595,7 @@ struct builtin_type\n   struct type *builtin_unsigned_short;\n   struct type *builtin_unsigned_int;\n   struct type *builtin_unsigned_long;\n+  struct type *builtin_half;\n   struct type *builtin_float;\n   struct type *builtin_double;\n   struct type *builtin_long_double;\n@@ -1690,6 +1691,7 @@ struct objfile_type\n   struct type *builtin_unsigned_int;\n   struct type *builtin_unsigned_long;\n   struct type *builtin_unsigned_long_long;\n+  struct type *builtin_half;\n   struct type *builtin_float;\n   struct type *builtin_double;\n   struct type *builtin_long_double;"
    },
    {
      "sha": "bd33091ba9e4bcbad5efafe4fb6e211ca379bfe9",
      "filename": "gdb/target-descriptions.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/target-descriptions.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd/gdb/target-descriptions.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/target-descriptions.c?ref=a6d0f2490c0c7969eb60038f01c0ee0f46e4d5fd",
      "patch": "@@ -119,6 +119,11 @@ make_gdb_type (struct gdbarch *gdbarch, struct tdesc_type *ttype)\n \n       switch (e->kind)\n \t{\n+\tcase TDESC_TYPE_IEEE_HALF:\n+\t  m_type = arch_float_type (m_gdbarch, -1, \"builtin_type_ieee_half\",\n+\t\t\t\t    floatformats_ieee_half);\n+\t  return;\n+\n \tcase TDESC_TYPE_IEEE_SINGLE:\n \t  m_type = arch_float_type (m_gdbarch, -1, \"builtin_type_ieee_single\",\n \t\t\t\t    floatformats_ieee_single);"
    }
  ]
}