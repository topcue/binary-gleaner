{
  "sha": "f99d1d37496f3af263e0761c2fd330e62599f383",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Zjk5ZDFkMzc0OTZmM2FmMjYzZTA3NjFjMmZkMzMwZTYyNTk5ZjM4Mw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-06-01T14:11:30Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2021-06-01T14:11:30Z"
    },
    "message": "Remove gdb/testsuite/configure\n\nI didn't see a strong reason to have a separate configure script in\ngdb/testsuite, so this patch removes it.  The few relevant configury\nbits are moved into gdb's configure script.  Some of the old\ntestsuite/configure script (e.g., the header check) is dead code.\n\nThis also adds a Makefile rule to rebuild lib/pdtrace.  This was\nmissing from the old code.\n\n'read1' is now a dependency of check-read1, rather than extra code at\nconfigure time.\n\nFinally, the old \"ENABLE_LIBCTF\" subst in gdb/configure was not used;\nnor was the variable defined, so this was always empty.  However, the\nlower-case variant was used by the testsuite, so this patch renames\nthe subst.\n\ngdb/ChangeLog\n2021-06-01  Tom Tromey  <tromey@adacore.com>\n\n\t* configure.ac: Copy some code from testsuite/configure.ac.\n\t(enable_libctf): Subst this, not ENABLE_LIBCTF.\n\t* configure: Rebuild.\n\ngdb/testsuite/ChangeLog\n2021-06-01  Tom Tromey  <tromey@adacore.com>\n\n\t* aclocal.m4, configure.ac, configure: Remove.\n\t* Makefile.in (EXTRA_RULES): Remove.\n\t($(abs_builddir)/site.exp site.exp): Don't depend on\n\tconfig.status.\n\t(distclean maintainer-clean realclean, Makefile): Update.\n\t(config.status): Remove target.\n\t(lib/pdtrace): New target.\n\t(all): Don't depend on EXTRA_RULES.\n\t(check-read1): Depend on read1.so, expect-read1.",
    "tree": {
      "sha": "6d2c707eeb75b85b7b7d99e3663a57e492cdda74",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6d2c707eeb75b85b7b7d99e3663a57e492cdda74"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f99d1d37496f3af263e0761c2fd330e62599f383",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f99d1d37496f3af263e0761c2fd330e62599f383",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f99d1d37496f3af263e0761c2fd330e62599f383",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f99d1d37496f3af263e0761c2fd330e62599f383/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "17d305ef8f4b5bf20beaaad427490b3c6773909b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/17d305ef8f4b5bf20beaaad427490b3c6773909b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/17d305ef8f4b5bf20beaaad427490b3c6773909b"
    }
  ],
  "stats": {
    "total": 5102,
    "additions": 141,
    "deletions": 4961
  },
  "files": [
    {
      "sha": "5e882d776b26764180e7fae1e74758bf8d1d31ba",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f99d1d37496f3af263e0761c2fd330e62599f383",
      "patch": "@@ -1,3 +1,9 @@\n+2021-06-01  Tom Tromey  <tromey@adacore.com>\n+\n+\t* configure.ac: Copy some code from testsuite/configure.ac.\n+\t(enable_libctf): Subst this, not ENABLE_LIBCTF.\n+\t* configure: Rebuild.\n+\n 2021-06-01  Tom de Vries  <tdevries@suse.de>\n \n \tPR symtab/26096"
    },
    {
      "sha": "7897a57113f362e6cdfb3e905d2bda0fa0e6ea11",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 81,
      "deletions": 7,
      "changes": 88,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=f99d1d37496f3af263e0761c2fd330e62599f383",
      "patch": "@@ -619,10 +619,14 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-enable_option_checking=no\n ac_header_list=\n+enable_option_checking=no\n ac_subst_vars='LTLIBOBJS\n LIBOBJS\n+NM_TRANSFORM_NAME\n+GAS_TRANSFORM_NAME\n+READELF_TRANSFORM_NAME\n+STRIP_TRANSFORM_NAME\n GCORE_TRANSFORM_NAME\n GDB_TRANSFORM_NAME\n XSLTPROC\n@@ -633,7 +637,7 @@ LIBXXHASH\n HAVE_LIBXXHASH\n CTF_DEPS\n LIBCTF\n-ENABLE_LIBCTF\n+enable_libctf\n LTLIBBABELTRACE\n LIBBABELTRACE\n HAVE_LIBBABELTRACE\n@@ -664,6 +668,7 @@ GDBTKLIBS\n X_LIBS\n X_LDFLAGS\n X_CFLAGS\n+subdirs\n TK_XINCLUDES\n TK_DEPS\n TK_LIBRARY\n@@ -771,7 +776,7 @@ PKG_CONFIG_PATH\n PKG_CONFIG\n HAVE_NATIVE_GCORE_TARGET\n TARGET_OBS\n-subdirs\n+RPATH_ENVVAR\n GDB_DATADIR\n DEBUGDIR\n MAKEINFO_EXTRA_FLAGS\n@@ -876,6 +881,7 @@ with_gdb_datadir\n with_relocated_sources\n with_auto_load_dir\n with_auto_load_safe_path\n+enable_shared\n enable_targets\n enable_64_bit_bfd\n enable_gdbmi\n@@ -956,8 +962,7 @@ DEBUGINFOD_LIBS\n YACC\n YFLAGS\n XMKMF'\n-ac_subdirs_all='testsuite\n-gdbtk'\n+ac_subdirs_all='gdbtk'\n \n # Initialize some variables set by options.\n ac_init_help=\n@@ -1583,6 +1588,7 @@ Optional Features:\n                           sometimes confusing) to the casual installer\n   --enable-plugins        Enable support for plugins\n   --disable-largefile     omit support for large files\n+  --enable-shared         build shared libraries deault=yes\n   --enable-targets=TARGETS\n                           alternative target configurations\n   --enable-64-bit-bfd     64-bit support (on hosts with narrower word sizes)\n@@ -6597,9 +6603,34 @@ _ACEOF\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $with_auto_load_safe_path\" >&5\n $as_echo \"$with_auto_load_safe_path\" >&6; }\n \n+# Enable shared libraries.\n+# Check whether --enable-shared was given.\n+if test \"${enable_shared+set}\" = set; then :\n+  enableval=$enable_shared;\n+else\n+  enable_shared=yes\n+fi\n \n \n-subdirs=\"$subdirs testsuite\"\n+# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n+# such that we can find the shared libraries in the build tree.\n+if test $enable_shared = no; then\n+  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n+  # platform.\n+  RPATH_ENVVAR=RPATH_ENVVAR\n+else\n+  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n+  RPATH_ENVVAR=LD_LIBRARY_PATH\n+  # The following exceptions are taken from Libtool 1.4.3.\n+  case $host_os in\n+    aix*)\n+      if test $host_cpu != ia64; then\n+        RPATH_ENVVAR=LIBPATH\n+      fi ;;\n+    darwin* | rhapsody*)\n+      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n+  esac\n+fi\n \n \n # Check whether to support alternative target configurations\n@@ -18274,7 +18305,9 @@ $as_echo \"${private_dir}\" >&6; }\n \t  CONFIG_OBS=\"${CONFIG_OBS} gdbres.o\"\n \tfi\n \n-        subdirs=\"$subdirs gdbtk\"\n+\n+\n+subdirs=\"$subdirs gdbtk\"\n \n     fi\n fi\n@@ -19788,6 +19821,44 @@ ac_config_files=\"$ac_config_files gcore\"\n \n ac_config_files=\"$ac_config_files Makefile gdb-gdb.gdb gdb-gdb.py doc/Makefile data-directory/Makefile\"\n \n+# Transform the name of some programs for the testsuite/lib/pdtrace\n+# test tool.\n+\n+  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n+  STRIP_TRANSFORM_NAME=`echo strip | sed -e \"$gdb_ac_transform\"`\n+  if test \"x$STRIP_TRANSFORM_NAME\" = x; then\n+     STRIP_TRANSFORM_NAME=strip\n+  fi\n+\n+\n+\n+  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n+  READELF_TRANSFORM_NAME=`echo readelf | sed -e \"$gdb_ac_transform\"`\n+  if test \"x$READELF_TRANSFORM_NAME\" = x; then\n+     READELF_TRANSFORM_NAME=readelf\n+  fi\n+\n+\n+\n+  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n+  GAS_TRANSFORM_NAME=`echo as | sed -e \"$gdb_ac_transform\"`\n+  if test \"x$GAS_TRANSFORM_NAME\" = x; then\n+     GAS_TRANSFORM_NAME=as\n+  fi\n+\n+\n+\n+  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n+  NM_TRANSFORM_NAME=`echo nm | sed -e \"$gdb_ac_transform\"`\n+  if test \"x$NM_TRANSFORM_NAME\" = x; then\n+     NM_TRANSFORM_NAME=nm\n+  fi\n+\n+\n+ac_config_files=\"$ac_config_files testsuite/lib/pdtrace\"\n+\n+ac_config_files=\"$ac_config_files testsuite/Makefile\"\n+\n \n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure\n@@ -20517,6 +20588,8 @@ do\n     \"gdb-gdb.py\") CONFIG_FILES=\"$CONFIG_FILES gdb-gdb.py\" ;;\n     \"doc/Makefile\") CONFIG_FILES=\"$CONFIG_FILES doc/Makefile\" ;;\n     \"data-directory/Makefile\") CONFIG_FILES=\"$CONFIG_FILES data-directory/Makefile\" ;;\n+    \"testsuite/lib/pdtrace\") CONFIG_FILES=\"$CONFIG_FILES testsuite/lib/pdtrace\" ;;\n+    \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n \n   *) as_fn_error $? \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;\n   esac\n@@ -21147,6 +21220,7 @@ $as_echo \"$as_me: executing $ac_file commands\" >&6;}\n     \"depdir\":C) $SHELL $ac_aux_dir/mkinstalldirs $DEPDIR ;;\n     \"nm.h\":L) echo > stamp-nmh ;;\n     \"gcore\":F) chmod +x gcore ;;\n+    \"testsuite/lib/pdtrace\":F) chmod +x testsuite/lib/pdtrace ;;\n \n   esac\n done # for ac_tag"
    },
    {
      "sha": "c08a3b53b6c121bc1e3a3a709993598934da491f",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 34,
      "deletions": 2,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=f99d1d37496f3af263e0761c2fd330e62599f383",
      "patch": "@@ -152,7 +152,31 @@ AC_DEFINE_DIR(AUTO_LOAD_SAFE_PATH, escape_dir,\n \t      [Directories safe to hold auto-loaded files.])\n AC_MSG_RESULT([$with_auto_load_safe_path])\n \n-AC_CONFIG_SUBDIRS(testsuite)\n+# Enable shared libraries.\n+AC_ARG_ENABLE(shared,\n+[  --enable-shared         build shared libraries [deault=yes]],,\n+  enable_shared=yes)\n+\n+# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n+# such that we can find the shared libraries in the build tree.\n+if test $enable_shared = no; then\n+  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n+  # platform.\n+  RPATH_ENVVAR=RPATH_ENVVAR\n+else\n+  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n+  RPATH_ENVVAR=LD_LIBRARY_PATH\n+  # The following exceptions are taken from Libtool 1.4.3.\n+  case $host_os in\n+    aix*)\n+      if test $host_cpu != ia64; then\n+        RPATH_ENVVAR=LIBPATH\n+      fi ;;\n+    darwin* | rhapsody*)\n+      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n+  esac\n+fi\n+AC_SUBST(RPATH_ENVVAR)\n \n # Check whether to support alternative target configurations\n AC_ARG_ENABLE(targets,\n@@ -2170,7 +2194,7 @@ else\n   LIBCTF=\n   CTF_DEPS=\n fi\n-AC_SUBST(ENABLE_LIBCTF)\n+AC_SUBST(enable_libctf)\n AC_SUBST(LIBCTF)\n AC_SUBST(CTF_DEPS)\n \n@@ -2236,5 +2260,13 @@ GDB_AC_TRANSFORM([gdb], [GDB_TRANSFORM_NAME])\n GDB_AC_TRANSFORM([gcore], [GCORE_TRANSFORM_NAME])\n AC_CONFIG_FILES([gcore], [chmod +x gcore])\n AC_CONFIG_FILES([Makefile gdb-gdb.gdb gdb-gdb.py doc/Makefile data-directory/Makefile])\n+# Transform the name of some programs for the testsuite/lib/pdtrace\n+# test tool.\n+GDB_AC_TRANSFORM(strip, STRIP_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(readelf, READELF_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(as, GAS_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(nm, NM_TRANSFORM_NAME)\n+AC_CONFIG_FILES([testsuite/lib/pdtrace], [chmod +x testsuite/lib/pdtrace])\n+AC_CONFIG_FILES([testsuite/Makefile])\n \n AC_OUTPUT"
    },
    {
      "sha": "60a8ca96b3bc77d8067ec5f741cfa70833a83196",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=f99d1d37496f3af263e0761c2fd330e62599f383",
      "patch": "@@ -1,3 +1,15 @@\n+2021-06-01  Tom Tromey  <tromey@adacore.com>\n+\n+\t* aclocal.m4, configure.ac, configure: Remove.\n+\t* Makefile.in (EXTRA_RULES): Remove.\n+\t($(abs_builddir)/site.exp site.exp): Don't depend on\n+\tconfig.status.\n+\t(distclean maintainer-clean realclean, Makefile): Update.\n+\t(config.status): Remove target.\n+\t(lib/pdtrace): New target.\n+\t(all): Don't depend on EXTRA_RULES.\n+\t(check-read1): Depend on read1.so, expect-read1.\n+\n 2021-06-01  Tom de Vries  <tdevries@suse.de>\n \n \tPR symtab/26096"
    },
    {
      "sha": "e44d44edc3bde407592eb87ddc7c0aa37d1568a0",
      "filename": "gdb/testsuite/Makefile.in",
      "status": "modified",
      "additions": 8,
      "deletions": 10,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/testsuite/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f99d1d37496f3af263e0761c2fd330e62599f383/gdb/testsuite/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/Makefile.in?ref=f99d1d37496f3af263e0761c2fd330e62599f383",
      "patch": "@@ -35,8 +35,6 @@ EXEEXT = @EXEEXT@\n SUBDIRS = @subdirs@\n RPATH_ENVVAR = @RPATH_ENVVAR@\n \n-EXTRA_RULES = @EXTRA_RULES@\n-\n CC=@CC@\n \n EXPECT = `if [ \"$${READ1}\" != \"\" ] ; then \\\n@@ -97,7 +95,7 @@ TARGET_FLAGS_TO_PASS = \\\n         \"RUNTEST=$(RUNTEST)\" \\\n         \"RUNTESTFLAGS=$(RUNTESTFLAGS)\"\n \n-all: $(EXTRA_RULES)\n+all:\n \t@echo \"Nothing to be done for all...\"\n \n .NOEXPORT:\n@@ -118,7 +116,7 @@ uninstall: force\n # Bare `site.exp' is used as a target here if user requests it explicitly.\n # $(RUNTEST) is looking up `site.exp' only in the current directory.\n \n-$(abs_builddir)/site.exp site.exp: ./config.status Makefile\n+$(abs_builddir)/site.exp site.exp: Makefile\n \t@echo \"Making a new config file...\"\n \t-@rm -f ./tmp?\n \t@touch site.exp\n@@ -160,7 +158,7 @@ CHECK_TARGET = $(if $(RACY_ITER),$(addsuffix -racy,$(CHECK_TARGET_TMP)),$(CHECK_\n check: all $(abs_builddir)/site.exp\n \t$(MAKE) $(CHECK_TARGET)\n \n-check-read1:\n+check-read1: read1.so expect-read1\n \t$(MAKE) READ1=\"1\" check\n \n # Check whether we need to print the timestamp for each line of\n@@ -350,14 +348,14 @@ clean mostlyclean:\n \n distclean maintainer-clean realclean: clean\n \t-rm -f *~ core\n-\t-rm -f Makefile config.status *-init.exp\n+\t-rm -f Makefile *-init.exp\n \t-rm -fr *.log summary detail *.plog *.sum *.psum site.*\n \n-Makefile : Makefile.in config.status $(host_makefile_frag)\n-\t$(SHELL) config.status\n+Makefile : Makefile.in ../config.status $(host_makefile_frag)\n+\tcd .. && $(SHELL) ./config.status testsuite/Makefile\n \n-config.status: configure\n-\t$(SHELL) config.status --recheck\n+lib/pdtrace: pdtrace.in ../config.status\n+\tcd .. && $(SHELL) ./config.status testsuite/lib/pdtrace\n \n TAGS: force\n \tfind $(srcdir) -name '*.exp' -print | \\"
    },
    {
      "sha": "c5d3ba527a766843fbeb9f26c72a2bda46595214",
      "filename": "gdb/testsuite/aclocal.m4",
      "status": "removed",
      "additions": 0,
      "deletions": 37,
      "changes": 37,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/aclocal.m4?ref=17d305ef8f4b5bf20beaaad427490b3c6773909b",
      "patch": "@@ -1,37 +0,0 @@\n-m4_include(../../config/acx.m4)\n-m4_include(../../config/override.m4)\n-m4_include(../../config/enable.m4)\n-m4_include(../transform.m4)\n-\n-# AM_CONDITIONAL                                            -*- Autoconf -*-\n-\n-# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005\n-# Free Software Foundation, Inc.\n-#\n-# This file is free software; the Free Software Foundation\n-# gives unlimited permission to copy and/or distribute it,\n-# with or without modifications, as long as this notice is preserved.\n-\n-# serial 7\n-\n-# AM_CONDITIONAL(NAME, SHELL-CONDITION)\n-# -------------------------------------\n-# Define a conditional.\n-AC_DEFUN([AM_CONDITIONAL],\n-[AC_PREREQ(2.52)dnl\n- ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],\n-\t[$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl\n-AC_SUBST([$1_TRUE])\n-AC_SUBST([$1_FALSE])\n-if $2; then\n-  $1_TRUE=\n-  $1_FALSE='#'\n-else\n-  $1_TRUE='#'\n-  $1_FALSE=\n-fi\n-AC_CONFIG_COMMANDS_PRE(\n-[if test -z \"${$1_TRUE}\" && test -z \"${$1_FALSE}\"; then\n-  AC_MSG_ERROR([[conditional \"$1\" was never defined.\n-Usually this means the macro was only invoked conditionally.]])\n-fi])])"
    },
    {
      "sha": "3b0d4ed8ad352b9859c728746134e4d35120e497",
      "filename": "gdb/testsuite/configure",
      "status": "removed",
      "additions": 0,
      "deletions": 4806,
      "changes": 4806,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/configure?ref=17d305ef8f4b5bf20beaaad427490b3c6773909b"
    },
    {
      "sha": "b15dbcb1bbdf94d0034fe60baa76232fb3872544",
      "filename": "gdb/testsuite/configure.ac",
      "status": "removed",
      "additions": 0,
      "deletions": 99,
      "changes": 99,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/17d305ef8f4b5bf20beaaad427490b3c6773909b/gdb/testsuite/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/configure.ac?ref=17d305ef8f4b5bf20beaaad427490b3c6773909b",
      "patch": "@@ -1,99 +0,0 @@\n-#                                                       -*- Autoconf -*-\n-# Process this file with autoconf to produce a configure script.\n-\n-# Copyright 2002-2021 Free Software Foundation, Inc.\n-#\n-# This program is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 3 of the License, or\n-# (at your option) any later version.\n-#\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n-#\n-# You should have received a copy of the GNU General Public License\n-# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n-\n-AC_INIT\n-AC_CONFIG_SRCDIR([gdb.base])\n-\n-AC_CANONICAL_BUILD\n-AC_CANONICAL_HOST\n-AC_CANONICAL_TARGET\n-\n-ACX_NONCANONICAL_TARGET\n-\n-# Enable gdbtk.\n-AC_ARG_ENABLE(gdbtk,\n-[  --enable-gtk            enable gdbtk graphical user interface (GUI)],,\n-  [if test -d $srcdir/../gdbtk && test -d $srcdir/gdb.gdbtk; then\n-    enable_gdbtk=yes\n-  else\n-    enable_gdbtk=no\n-  fi])\n-# We unconditionally disable gdbtk tests on selected platforms.\n-case $host_os in\n-  go32* | windows*)\n-    enable_gdbtk=no ;;\n-esac\n-\n-# Add gdbtk tests when appropriate.\n-if test $enable_gdbtk = yes; then\n-   AC_CONFIG_SUBDIRS(gdb.gdbtk)\n-fi\n-\n-GCC_ENABLE([libctf], [yes], [], [Handle .ctf type-info sections])\n-AC_SUBST(enable_libctf)\n-\n-# Enable shared libraries.\n-AC_ARG_ENABLE(shared,\n-[  --enable-shared         build shared libraries [deault=yes]],,\n-  enable_shared=yes)\n-\n-# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n-# such that we can find the shared libraries in the build tree.\n-if test $enable_shared = no; then\n-  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n-  # platform.\n-  RPATH_ENVVAR=RPATH_ENVVAR\n-else\n-  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n-  RPATH_ENVVAR=LD_LIBRARY_PATH\n-  # The following exceptions are taken from Libtool 1.4.3.\n-  case $host_os in\n-    aix*)\n-      if test $host_cpu != ia64; then\n-        RPATH_ENVVAR=LIBPATH\n-      fi ;;\n-    darwin* | rhapsody*)\n-      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n-  esac\n-fi\n-AC_SUBST(RPATH_ENVVAR)\n-\n-AC_CHECK_HEADERS(pthread.h)\n-\n-AC_EXEEXT\n-\n-if test \"${build}\" = \"${host}\" -a \"${host}\" = \"${target}\"; then\n-   case \"${host}\" in\n-     *gnu*)\n-       EXTRA_RULES=read1\n-       ;;\n-   esac\n-fi\n-AC_SUBST(EXTRA_RULES)\n-\n-# Transform the name of some programs and generate the lib/pdtrace\n-# test tool.\n-AC_ARG_PROGRAM\n-GDB_AC_TRANSFORM(strip, STRIP_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(readelf, READELF_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(as, GAS_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(nm, NM_TRANSFORM_NAME)\n-AC_CONFIG_FILES([lib/pdtrace], [chmod +x lib/pdtrace])\n-AC_CONFIG_FILES([Makefile])\n-\n-AC_OUTPUT"
    }
  ]
}