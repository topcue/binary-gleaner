{
  "sha": "5cfe428cd1788be52a0af540f02b8f2705354d50",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NWNmZTQyOGNkMTc4OGJlNTJhMGFmNTQwZjAyYjhmMjcwNTM1NGQ1MA==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2019-02-27T19:53:16Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2019-02-27T19:53:27Z"
    },
    "message": "x86-64: Skip protected check on symbol defined by linker\n\nSkip symbol defined by linker when checking copy reloc on protected\nsymbol.\n\nbfd/\n\n\tPR ld/24276\n\t* elf64-x86-64.c (elf_x86_64_check_relocs): Skip symbol defined\n\tby linker when checking copy reloc on protected symbol.\n\nld/\n\n\tPR ld/24276\n\t* testsuite/ld-i386/i386.exp: Run PR ld/24276 test.\n\t* testsuite/ld-x86-64/x86-64.exp: Likewise.\n\t* testsuite/ld-i386/pr24276.dso: New file.\n\t* testsuite/ld-i386/pr24276.warn: Likewise.\n\t* testsuite/ld-x86-64/pr24276.dso: Likewise.\n\t* testsuite/ld-x86-64/pr24276.warn: Likewise.",
    "tree": {
      "sha": "0e1447ed315df9489fb256b01a4bf88b42a1da3b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0e1447ed315df9489fb256b01a4bf88b42a1da3b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5cfe428cd1788be52a0af540f02b8f2705354d50",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5cfe428cd1788be52a0af540f02b8f2705354d50",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5cfe428cd1788be52a0af540f02b8f2705354d50",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5cfe428cd1788be52a0af540f02b8f2705354d50/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "43ac54fca353ea8d77d56dc5ad9e049bbb9a81fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/43ac54fca353ea8d77d56dc5ad9e049bbb9a81fb",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/43ac54fca353ea8d77d56dc5ad9e049bbb9a81fb"
    }
  ],
  "stats": {
    "total": 56,
    "additions": 56,
    "deletions": 0
  },
  "files": [
    {
      "sha": "f0aec1f655617debb7cef03e04a0b14674771360",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -1,3 +1,9 @@\n+2019-02-27  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/24276\n+\t* elf64-x86-64.c (elf_x86_64_check_relocs): Skip symbol defined\n+\tby linker when checking copy reloc on protected symbol.\n+\n 2019-02-24  Alan Modra  <amodra@gmail.com>\n \n \tPR 24144"
    },
    {
      "sha": "e193f44e93f17d4270b1e5da6a7ceb1cd5f1e9e5",
      "filename": "bfd/elf64-x86-64.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/bfd/elf64-x86-64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/bfd/elf64-x86-64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf64-x86-64.c?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -2238,6 +2238,8 @@ elf_x86_64_check_relocs (bfd *abfd, struct bfd_link_info *info,\n \t      bfd_boolean no_copyreloc_p\n \t\t= (info->nocopyreloc\n \t\t   || (h != NULL\n+\t\t       && !h->root.linker_def\n+\t\t       && !h->root.ldscript_def\n \t\t       && eh->def_protected\n \t\t       && elf_has_no_copy_on_protected (h->root.u.def.section->owner)));\n \t      if ((sec->flags & SEC_ALLOC) != 0"
    },
    {
      "sha": "cd368bd80c9ca94679b0f67ba391cc764c616b08",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -1,3 +1,13 @@\n+2019-02-27  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/24276\n+\t* testsuite/ld-i386/i386.exp: Run PR ld/24276 test.\n+\t* testsuite/ld-x86-64/x86-64.exp: Likewise.\n+\t* testsuite/ld-i386/pr24276.dso: New file.\n+\t* testsuite/ld-i386/pr24276.warn: Likewise.\n+\t* testsuite/ld-x86-64/pr24276.dso: Likewise.\n+\t* testsuite/ld-x86-64/pr24276.warn: Likewise.\n+\n 2019-02-20  Eric Tsai  <erictsai@cadence.com>\n \n \t* testsuite/ld-xtensa/call_overflow.d: New test definition."
    },
    {
      "sha": "e51a4c30f623cabbf67206a1d9596466d9d51966",
      "filename": "ld/testsuite/ld-i386/i386.exp",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-i386/i386.exp?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -804,6 +804,15 @@ if { [isnative]\n \t    {{objdump {-dw} pr19319.dd}} \\\n \t    \"pr19319\" \\\n \t] \\\n+\t[list \\\n+\t    \"Build pr24276.so\" \\\n+\t    \"-shared -nostdlib -nostartfiles \\\n+\t     -Ltmpdir $srcdir/$subdir/pr24276.dso\" \\\n+\t    \"-Wa,-mx86-used-note=yes\" \\\n+\t    { pr19319b.S } \\\n+\t    {{warning_output pr24276.warn}} \\\n+\t    \"pr24276.so\" \\\n+\t] \\\n \t[list \\\n \t    \"Build property 1\" \\\n \t    \"\" \\"
    },
    {
      "sha": "9add115e1c78e25cfe32671b5be02c9f26d7be0d",
      "filename": "ld/testsuite/ld-i386/pr24276.dso",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/pr24276.dso",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/pr24276.dso",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-i386/pr24276.dso?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -0,0 +1,9 @@\n+INPUT(pr19319.so)\n+SECTIONS {\n+  my_section : {\n+    __start_my_section = .;\n+    *(my_section);\n+    __stop_my_section = .;\n+\n+  }\n+}"
    },
    {
      "sha": "5fcfa343c1dd8fbb7593fae1a68068eca6567cdc",
      "filename": "ld/testsuite/ld-i386/pr24276.warn",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/pr24276.warn",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-i386/pr24276.warn",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-i386/pr24276.warn?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -0,0 +1 @@\n+.*contains output sections.*"
    },
    {
      "sha": "9add115e1c78e25cfe32671b5be02c9f26d7be0d",
      "filename": "ld/testsuite/ld-x86-64/pr24276.dso",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/pr24276.dso",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/pr24276.dso",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24276.dso?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -0,0 +1,9 @@\n+INPUT(pr19319.so)\n+SECTIONS {\n+  my_section : {\n+    __start_my_section = .;\n+    *(my_section);\n+    __stop_my_section = .;\n+\n+  }\n+}"
    },
    {
      "sha": "5fcfa343c1dd8fbb7593fae1a68068eca6567cdc",
      "filename": "ld/testsuite/ld-x86-64/pr24276.warn",
      "status": "added",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/pr24276.warn",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/pr24276.warn",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24276.warn?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -0,0 +1 @@\n+.*contains output sections.*"
    },
    {
      "sha": "b03aaced91f8bb6d7ac14ea6de3aa8d7e61821d7",
      "filename": "ld/testsuite/ld-x86-64/x86-64.exp",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/x86-64.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5cfe428cd1788be52a0af540f02b8f2705354d50/ld/testsuite/ld-x86-64/x86-64.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/x86-64.exp?ref=5cfe428cd1788be52a0af540f02b8f2705354d50",
      "patch": "@@ -940,6 +940,15 @@ if { [isnative] && [which $CC] != 0 } {\n \t    {{objdump {-dw} pr19319.dd}} \\\n \t    \"pr19319\" \\\n \t] \\\n+\t[list \\\n+\t    \"Build pr24276.so\" \\\n+\t    \"-shared -nostdlib -nostartfiles \\\n+\t     -Ltmpdir $srcdir/$subdir/pr24276.dso\" \\\n+\t    \"-Wa,-mx86-used-note=yes\" \\\n+\t    { pr19319b.S } \\\n+\t    {{warning_output pr24276.warn}} \\\n+\t    \"pr24276.so\" \\\n+\t] \\\n \t[list \\\n \t    \"Build property 1\" \\\n \t    \"\" \\"
    }
  ]
}