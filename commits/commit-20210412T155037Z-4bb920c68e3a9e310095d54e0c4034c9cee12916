{
  "sha": "4bb920c68e3a9e310095d54e0c4034c9cee12916",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NGJiOTIwYzY4ZTNhOWUzMTAwOTVkNTRlMGM0MDM0YzljZWUxMjkxNg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-04-12T15:02:11Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-04-12T15:50:37Z"
    },
    "message": "m68hc11 gas testsuite wart\n\nWriting to a potentially read-only source directory is not good.\n\n\t* testsuite/gas/m68hc11/m68hc11.exp (gas_m68hc11_message): Don't\n\twrite to $srcdir.  Use gas_host_run and read output file rather\n\tthan gas_start/gas_finish.",
    "tree": {
      "sha": "16ad36cfdd78ff9a7a06230cd27b3fe8597d6996",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/16ad36cfdd78ff9a7a06230cd27b3fe8597d6996"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/4bb920c68e3a9e310095d54e0c4034c9cee12916",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4bb920c68e3a9e310095d54e0c4034c9cee12916",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/4bb920c68e3a9e310095d54e0c4034c9cee12916",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4bb920c68e3a9e310095d54e0c4034c9cee12916/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6ba4cb845bd319f11d1caf42de5156daed28ff9d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6ba4cb845bd319f11d1caf42de5156daed28ff9d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6ba4cb845bd319f11d1caf42de5156daed28ff9d"
    }
  ],
  "stats": {
    "total": 28,
    "additions": 15,
    "deletions": 13
  },
  "files": [
    {
      "sha": "40fedbbe802dbee9e12a9019baf6b3fa01cd7a11",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4bb920c68e3a9e310095d54e0c4034c9cee12916/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4bb920c68e3a9e310095d54e0c4034c9cee12916/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=4bb920c68e3a9e310095d54e0c4034c9cee12916",
      "patch": "@@ -1,3 +1,9 @@\n+2021-04-13  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/gas/m68hc11/m68hc11.exp (gas_m68hc11_message): Don't\n+\twrite to $srcdir.  Use gas_host_run and read output file rather\n+\tthan gas_start/gas_finish.\n+\n 2021-04-12  Alan Modra  <amodra@gmail.com>\n \n \t* config/tc-ppc.c (insn_validate): Use uint64_t for operand values."
    },
    {
      "sha": "d58448a85f2f24b8411da4f8be5a3bab6e92f140",
      "filename": "gas/testsuite/gas/m68hc11/m68hc11.exp",
      "status": "modified",
      "additions": 9,
      "deletions": 13,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4bb920c68e3a9e310095d54e0c4034c9cee12916/gas/testsuite/gas/m68hc11/m68hc11.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4bb920c68e3a9e310095d54e0c4034c9cee12916/gas/testsuite/gas/m68hc11/m68hc11.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/m68hc11/m68hc11.exp?ref=4bb920c68e3a9e310095d54e0c4034c9cee12916",
      "patch": "@@ -51,35 +51,31 @@ gas_m68hc11_opcode_list \"-mm9s12xg\" 74\n \n # Test for a message produced when assembling a file\n proc gas_m68hc11_message { kind options line expect } {\n-    global srcdir\n-    global subdir\n+    global AS\n+    global ASFLAGS\n \n     regsub -all \"\\n\" \"$line: $expect\" \" \" title\n \n     # Make a file containing the instructions to assemble.\n-    set fd [open \"$srcdir/$subdir/tst-m68hc1x.s\" \"w\"]\n+    set fd [open \"tst-m68hc1x.s\" \"w\"]\n     puts -nonewline $fd \"$line\"\n     close $fd\n \n     verbose -log \"Test: $title\"\n-    gas_start \"tst-m68hc1x.s\" \"$options\"\n+    set status [gas_host_run \"$AS $ASFLAGS $options tst-m68hc1x.s\" \">&gas.out\"]\n     set ok 0\n-    while 1 {\n-\texpect {\n-\t    -re \".*: Assembler messages:\\n\" { }\n-\t    -re \".*1: $kind: $expect\" { incr ok; break }\n-\t    timeout       { perror \"timeout\\n\"; break }\n-\t    eof\t\t  { verbose \"EOF from gas\"; break }\n+    set fd [open \"gas.out\" r]\n+    while { [gets $fd outline] != -1 } {\n+\tif { [regexp \".*1: $kind: $expect\" $outline] } {\n+\t    incr ok\n \t}\n     }\n-    #sleep 1 # Uncomment this line when using gcov\n-    gas_finish\n     if { $ok > 0 } then {\n \tpass $title\n     } else {\n \tfail $title\n     }\n-    catch \"exec rm -f $srcdir/$subdir/tst-m68hc1x.s\"\n+    catch \"exec rm -f tst-m68hc1x.s gas.out\"\n }\n \n # Test for an error message produced by gas"
    }
  ]
}