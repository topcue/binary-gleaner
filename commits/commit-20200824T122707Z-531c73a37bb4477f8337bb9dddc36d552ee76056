{
  "sha": "531c73a37bb4477f8337bb9dddc36d552ee76056",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTMxYzczYTM3YmI0NDc3ZjgzMzdiYjlkZGRjMzZkNTUyZWU3NjA1Ng==",
  "commit": {
    "author": {
      "name": "Cooper Qu",
      "email": "cooper.qu@linux.alibaba.com",
      "date": "2020-08-24T12:13:47Z"
    },
    "committer": {
      "name": "Lifang Xia",
      "email": "lifang_xia@c-sky.com",
      "date": "2020-08-24T12:27:07Z"
    },
    "message": "CSKY: Add new arch CK860.\n\nbfd/\n        * bfd-in2.h (bfd_mach_ck860): New.\n        * cpu-csky.c (arch_info_struct): Add item for CK860.\n\ngas/\n        * config/tc-csky.c (csky_archs): Add item for CK860,\n        change ck810 and ck807's arch_flag.\n        (csky_cpus): Add item for CK860.\n        (md_begin): Enable DSP for CK810 and CK807 by default.\n        (md_apply_fix): Fix CKCORE_TLS_IE32 relocation failure.\n        * gas/testsuite/gas/csky/cskyv2_all.d: Change 'sync 0'\n        to 'sync'.\n        * gas/testsuite/gas/csky/cskyv2_all.s: Likewise.\n        * gas/testsuite/gas/csky/cskyv2_ck860.d: New.\n        * gas/testsuite/gas/csky/cskyv2_ck860.s: New.\n        * gas/testsuite/gas/csky/enhance_dsp.d: Change plsli.u16\n        to plsli.16.\n        * gas/testsuite/gas/csky/enhance_dsp.s: Likewise.\n\ninclude/\n        * opcode/csky.h (CSKYV2_ISA_10E60): New.\n        (CSKY_ARCH_860): New.\n\nopcode/\n        * csky-dis.c (csky_find_inst_info): Skip CK860's instructions\n        in other CPUs to speed up disassembling.\n        * csky-opc.h (csky_v2_opcodes): Add CK860's instructions,\n        Change plsli.u16 to plsli.16, change sync's operand format.\n\nChange-Id: I80ec1a9c0cc600d668082a9b91ae6d45b33ec0fc",
    "tree": {
      "sha": "e9602367da318d2f52ee872304c8fe3f95d6dc60",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e9602367da318d2f52ee872304c8fe3f95d6dc60"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/531c73a37bb4477f8337bb9dddc36d552ee76056",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/531c73a37bb4477f8337bb9dddc36d552ee76056",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/531c73a37bb4477f8337bb9dddc36d552ee76056",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/531c73a37bb4477f8337bb9dddc36d552ee76056/comments",
  "author": {
    "login": "Cooper-Qu",
    "id": 68842787,
    "node_id": "MDQ6VXNlcjY4ODQyNzg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/68842787?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Cooper-Qu",
    "html_url": "https://github.com/Cooper-Qu",
    "followers_url": "https://api.github.com/users/Cooper-Qu/followers",
    "following_url": "https://api.github.com/users/Cooper-Qu/following{/other_user}",
    "gists_url": "https://api.github.com/users/Cooper-Qu/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Cooper-Qu/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Cooper-Qu/subscriptions",
    "organizations_url": "https://api.github.com/users/Cooper-Qu/orgs",
    "repos_url": "https://api.github.com/users/Cooper-Qu/repos",
    "events_url": "https://api.github.com/users/Cooper-Qu/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Cooper-Qu/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "Lifang-XIA",
    "id": 22215568,
    "node_id": "MDQ6VXNlcjIyMjE1NTY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/22215568?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Lifang-XIA",
    "html_url": "https://github.com/Lifang-XIA",
    "followers_url": "https://api.github.com/users/Lifang-XIA/followers",
    "following_url": "https://api.github.com/users/Lifang-XIA/following{/other_user}",
    "gists_url": "https://api.github.com/users/Lifang-XIA/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Lifang-XIA/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Lifang-XIA/subscriptions",
    "organizations_url": "https://api.github.com/users/Lifang-XIA/orgs",
    "repos_url": "https://api.github.com/users/Lifang-XIA/repos",
    "events_url": "https://api.github.com/users/Lifang-XIA/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Lifang-XIA/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f1a9fbd995b8997b7ed7e8e6a83129e923400a58",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f1a9fbd995b8997b7ed7e8e6a83129e923400a58",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f1a9fbd995b8997b7ed7e8e6a83129e923400a58"
    }
  ],
  "stats": {
    "total": 274,
    "additions": 259,
    "deletions": 15
  },
  "files": [
    {
      "sha": "490aec6d9de0d61c8c49d2a3622bf82c756c108e",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -1,3 +1,8 @@\n+2020-08-24  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* bfd-in2.h (bfd_mach_ck860): New.\n+\t* cpu-csky.c (arch_info_struct): Add item for CK860.\n+\n 2020-08-24  Alan Modra  <amodra@gmail.com>\n \n \t* elf32-ppc.c (ppc_elf_check_relocs): Set has_tls_reloc for"
    },
    {
      "sha": "a16d03780e2fa2f8428d36e1e180a577c203737e",
      "filename": "bfd/bfd-in2.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/bfd-in2.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/bfd-in2.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/bfd-in2.h?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -1952,6 +1952,7 @@ enum bfd_architecture\n #define bfd_mach_ck803         5\n #define bfd_mach_ck807         6\n #define bfd_mach_ck810         7\n+#define bfd_mach_ck860         8\n   bfd_arch_last\n   };\n "
    },
    {
      "sha": "4ec6db62984465a6368ac5c14c6c9eec215038c9",
      "filename": "bfd/cpu-csky.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/cpu-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/bfd/cpu-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/cpu-csky.c?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -53,6 +53,7 @@ static const bfd_arch_info_type arch_info_struct[] =\n   N (bfd_mach_ck803,   \"csky:ck803\",    FALSE, & arch_info_struct[5]),\n   N (bfd_mach_ck807,   \"csky:ck807\",    FALSE, & arch_info_struct[6]),\n   N (bfd_mach_ck810,   \"csky:ck810\",    FALSE, & arch_info_struct[7]),\n+  N (bfd_mach_ck860,   \"csky:ck860\",    FALSE, & arch_info_struct[8]),\n   N (bfd_mach_ck_unknown, \"csky:any\",   FALSE, NULL)\n };\n "
    },
    {
      "sha": "b6f4eddaa091b0a3d15a623d20642a0bf6a71e71",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -1,3 +1,19 @@\n+2020-08-24  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* config/tc-csky.c (csky_archs): Add item for CK860,\n+\tchange ck810 and ck807's arch_flag.\n+\t(csky_cpus): Add item for CK860.\n+\t(md_begin): Enable DSP for CK810 and CK807 by default.\n+\t(md_apply_fix): Fix CKCORE_TLS_IE32 relocation failure.\n+\t* gas/testsuite/gas/csky/cskyv2_all.d: Change 'sync 0'\n+\tto 'sync'.\n+\t* gas/testsuite/gas/csky/cskyv2_all.s: Likewise.\n+\t* gas/testsuite/gas/csky/cskyv2_ck860.d: New.\n+\t* gas/testsuite/gas/csky/cskyv2_ck860.s: New.\n+\t* gas/testsuite/gas/csky/enhance_dsp.d: Change plsli.u16\n+\tto plsli.16.\n+\t* gas/testsuite/gas/csky/enhance_dsp.s: Likewise.\n+\n 2020-08-24  Alan Modra  <amodra@gmail.com>\n \n \t* config/tc-tic54x.c (stag_add_field_symbols): Don't free \"name\""
    },
    {
      "sha": "f621fa9824b2f4ed6a70148b187af843648c365d",
      "filename": "gas/config/tc-csky.c",
      "status": "modified",
      "additions": 21,
      "deletions": 5,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/config/tc-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/config/tc-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-csky.c?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -564,13 +564,15 @@ const struct csky_arch_info csky_archs[] =\n   {\"ck801\",  CSKY_ARCH_801,  bfd_mach_ck801},\n   {\"ck802\",  CSKY_ARCH_802,  bfd_mach_ck802},\n   {\"ck803\",  CSKY_ARCH_803,  bfd_mach_ck803},\n-#define CSKY_ARCH_807_BASE    CSKY_ARCH_807 | CSKY_ARCH_DSP\n-#define CSKY_ARCH_810_BASE    CSKY_ARCH_810 | CSKY_ARCH_DSP\n-  {\"ck807\",  CSKY_ARCH_807_BASE,  bfd_mach_ck807},\n-  {\"ck810\",  CSKY_ARCH_810_BASE,  bfd_mach_ck810},\n+  {\"ck807\",  CSKY_ARCH_807,  bfd_mach_ck807},\n+  {\"ck810\",  CSKY_ARCH_810,  bfd_mach_ck810},\n+  {\"ck860\",  CSKY_ARCH_860,  bfd_mach_ck860},\n   {NULL, 0, 0}\n };\n \n+#define CSKY_ARCH_807_BASE    CSKY_ARCH_807 | CSKY_ARCH_DSP\n+#define CSKY_ARCH_810_BASE    CSKY_ARCH_810 | CSKY_ARCH_DSP\n+\n /* C-SKY cpus table.  */\n const struct csky_cpu_info csky_cpus[] =\n {\n@@ -683,6 +685,11 @@ const struct csky_cpu_info csky_cpus[] =\n   {\"ck810ft\", CSKY_ARCH_810_BASE | CSKY_ARCH_FLOAT, CSKY_ISA_810 | CSKYV2_ISA_DSP | CSKY_ISA_VDSP | CSKY_ISA_FLOAT_810 | CSKY_ISA_TRUST},\n   {\"ck810ftv\", CSKY_ARCH_810_BASE | CSKY_ARCH_FLOAT, CSKY_ISA_810 | CSKYV2_ISA_DSP | CSKY_ISA_VDSP | CSKY_ISA_FLOAT_810 | CSKY_ISA_TRUST},\n \n+  /* CK860 Series.  */\n+#define CSKY_ISA_860    (CSKY_ISA_810 | CSKYV2_ISA_10E60)\n+#define CSKY_ISA_FLOAT_860 (CSKY_ISA_FLOAT_810)\n+  {\"ck860\", CSKY_ARCH_860, CSKY_ISA_860},\n+\n   {NULL, 0, 0}\n };\n \n@@ -1207,7 +1214,14 @@ md_begin (void)\n \tas_warn (_(\"-mcpu conflict with other model parameters, using -mcpu\"));\n     }\n   else if (arch_flag != 0)\n-    mach_flag |= arch_flag | flags;\n+    {\n+      if ((arch_flag & CSKY_ARCH_MASK) == CSKY_ARCH_810\n+\t  || ((arch_flag & CSKY_ARCH_MASK) == CSKY_ARCH_807)) {\n+\t  /* CK807 and CK810 have DSP instruction by default.  */\n+\t  mach_flag |= CSKY_ARCH_DSP;\n+      }\n+      mach_flag |= arch_flag | flags;\n+    }\n   else\n     {\n #ifdef TARGET_WITH_CPU\n@@ -4941,6 +4955,7 @@ md_apply_fix (fixS   *fixP,\n \t   struct tls_addend *ta = &(fixP->tc_fix_data);\n \t   fixP->fx_offset = (fixP->fx_frag->fr_address + fixP->fx_where\n \t\t\t      - (ta->frag->fr_address + ta->offset));\n+\t   *valP = fixP->fx_offset;\n \t }\n \t /* Fall through.  */\n        case BFD_RELOC_CKCORE_TLS_LE32:\n@@ -5002,6 +5017,7 @@ md_apply_fix (fixS   *fixP,\n \tstruct tls_addend *ta = &(fixP->tc_fix_data);\n \tfixP->fx_offset = (fixP->fx_frag->fr_address + fixP->fx_where\n \t\t\t   - (ta->frag->fr_address + ta->offset));\n+\t*valP = fixP->fx_offset;\n       }\n       /* Fall through.  */\n     case BFD_RELOC_CKCORE_TLS_LE32:"
    },
    {
      "sha": "5092690aa3f515707f10c6432c5fa185a3a1cde1",
      "filename": "gas/testsuite/gas/csky/cskyv2_all.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_all.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_all.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_all.d?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -163,7 +163,7 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*c4139c40\\s*mthi\\s*r19\n \\s*[0-9a-f]*:\\s*c4009c83\\s*mflo\\s*r3\n \\s*[0-9a-f]*:\\s*c4089d00\\s*mtlo\\s*r8\n-\\s*[0-9a-f]*:\\s*c0000420\\s*sync\\s*0\n+\\s*[0-9a-f]*:\\s*c0000420\\s*sync\n \\s*[0-9a-f]*:\\s*c0200420\\s*sync\\s*1\n \\s*[0-9a-f]*:\\s*c2800420\\s*sync\\s*20\n \\s*[0-9a-f]*:\\s*c0601c20\\s*idly\\s*4"
    },
    {
      "sha": "6e6902e077bd998d044c0dd5ceb05cf08eaab63d",
      "filename": "gas/testsuite/gas/csky/cskyv2_all.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_all.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_all.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_all.s?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -157,7 +157,7 @@ all:\n    mthi   r19\n    mflo   r3\n    mtlo   r8\n-   sync   0\n+   sync\n    sync   1\n    sync   20\n    idly   0"
    },
    {
      "sha": "2beb8845b7be9f05cd7067f1d49812e2a2273a5b",
      "filename": "gas/testsuite/gas/csky/cskyv2_ck860.d",
      "status": "added",
      "additions": 41,
      "deletions": 0,
      "changes": 41,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_ck860.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_ck860.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_ck860.d?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -0,0 +1,41 @@\n+# name: csky - ck860\n+#as: -mcpu=ck860\n+#objdump: -D\n+\n+.*: +file format .*csky.*\n+\n+Disassembly of section \\.text:\n+#...\n+\\s*[0-9a-f]*:\\s*c0008820\\s*tlbi.all\n+\\s*[0-9a-f]*:\\s*c2008820\\s*tlbi.alls\n+\\s*[0-9a-f]*:\\s*c0618820\\s*tlbi.va\\s*r1\n+\\s*[0-9a-f]*:\\s*c26f8820\\s*tlbi.vas\\s*r15\n+\\s*[0-9a-f]*:\\s*c0218820\\s*tlbi.asid\\s*r1\n+\\s*[0-9a-f]*:\\s*c22f8820\\s*tlbi.asids\\s*r15\n+\\s*[0-9a-f]*:\\s*c04f8820\\s*tlbi.vaa\\s*r15\n+\\s*[0-9a-f]*:\\s*c24f8820\\s*tlbi.vaas\\s*r15\n+\\s*[0-9a-f]*:\\s*c1df9420\\s*dcache.cisw\\s*r31\n+\\s*[0-9a-f]*:\\s*c1ff9420\\s*dcache.civa\\s*r31\n+\\s*[0-9a-f]*:\\s*c1809420\\s*dcache.ciall\n+\\s*[0-9a-f]*:\\s*c0df9420\\s*dcache.csw\\s*r31\n+\\s*[0-9a-f]*:\\s*c0ff9420\\s*dcache.cva\\s*r31\n+\\s*[0-9a-f]*:\\s*c2ff9420\\s*dcache.cval1\\s*r31\n+\\s*[0-9a-f]*:\\s*c0809420\\s*dcache.call\n+\\s*[0-9a-f]*:\\s*c15f9420\\s*dcache.isw\\s*r31\n+\\s*[0-9a-f]*:\\s*c17f9420\\s*dcache.iva\\s*r31\n+\\s*[0-9a-f]*:\\s*c1009420\\s*dcache.iall\n+\\s*[0-9a-f]*:\\s*c1009020\\s*icache.iall\n+\\s*[0-9a-f]*:\\s*c3009020\\s*icache.ialls\n+\\s*[0-9a-f]*:\\s*c0bf9020\\s*icache.iva\\s*r31\n+\\s*[0-9a-f]*:\\s*c000842f\\s*bar.brwarw\n+\\s*[0-9a-f]*:\\s*c200842f\\s*bar.brwarws\n+\\s*[0-9a-f]*:\\s*c0008425\\s*bar.brar\n+\\s*[0-9a-f]*:\\s*c2008425\\s*bar.brars\n+\\s*[0-9a-f]*:\\s*c000842a\\s*bar.bwaw\n+\\s*[0-9a-f]*:\\s*c200842a\\s*bar.bwaws\n+\\s*[0-9a-f]*:\\s*c2200420\\s*sync.is\n+\\s*[0-9a-f]*:\\s*c0200420\\s*sync.i\n+\\s*[0-9a-f]*:\\s*c2000420\\s*sync.s\n+\\s*[0-9a-f]*:\\s*c0000420\\s*sync\n+\\s*[0-9a-f]*:\\s*d8437000\\s*ldex.w\\s*r2,\\s*\\(r3,\\s*0x0\\)\n+\\s*[0-9a-f]*:\\s*dc437000\\s*stex.w\\s*r2,\\s*\\(r3,\\s*0x0\\)\n\\ No newline at end of file"
    },
    {
      "sha": "632b43319f6bbed9f035cfa69d69b6396829f711",
      "filename": "gas/testsuite/gas/csky/cskyv2_ck860.s",
      "status": "added",
      "additions": 35,
      "deletions": 0,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_ck860.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/cskyv2_ck860.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/cskyv2_ck860.s?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -0,0 +1,35 @@\n+ck860:\n+     tlbi.all\n+     tlbi.alls\n+     tlbi.va  r1\n+     tlbi.vas r15\n+     tlbi.asid r1\n+     tlbi.asids r15\n+     tlbi.vaa r15\n+     tlbi.vaas r15\n+     dcache.cisw r31\n+     dcache.civa r31\n+     dcache.ciall\n+     dcache.csw r31\n+     dcache.cva r31\n+     dcache.cval1 r31\n+     dcache.call\n+     dcache.isw r31\n+     dcache.iva r31\n+     dcache.iall\n+     icache.iall\n+     icache.ialls\n+     icache.iva r31\n+     bar.brwarw\n+     bar.brwarws\n+     bar.brar\n+     bar.brars\n+     bar.bwaw\n+     bar.bwaws\n+     sync.is\n+     sync.i\n+     sync.s\n+     sync\n+\n+     ldex.w r2, (r3, 0)\n+     stex.w r2, (r3, 0)"
    },
    {
      "sha": "96d26ab6c50fd2f75c9abaa8f884eaba77067a64",
      "filename": "gas/testsuite/gas/csky/enhance_dsp.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/enhance_dsp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/enhance_dsp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/enhance_dsp.d?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -109,7 +109,7 @@ Disassembly of section \\.text:\n \\s*[0-9a-f]*:\\s*f883d242\\s*plsr\\.u16\\s*r2,\\s*r3,\\s*r4\n \\s*[0-9a-f]*:\\s*f8e3d302\\s*plsri\\.u16\\.r\\s*r2,\\s*r3,\\s*8\n \\s*[0-9a-f]*:\\s*f883d342\\s*plsr\\.u16\\.r\\s*r2,\\s*r3,\\s*r4\n-\\s*[0-9a-f]*:\\s*f8e3d402\\s*plsli\\.u16\\s*r2,\\s*r3,\\s*8\n+\\s*[0-9a-f]*:\\s*f8e3d402\\s*plsli\\.16\\s*r2,\\s*r3,\\s*8\n \\s*[0-9a-f]*:\\s*fa03d442\\s*plsl\\.u16\\s*r2,\\s*r3,\\s*r16\n \\s*[0-9a-f]*:\\s*f8e3d502\\s*plsli\\.u16\\.s\\s*r2,\\s*r3,\\s*8\n \\s*[0-9a-f]*:\\s*f8e3d582\\s*plsli\\.s16\\.s\\s*r2,\\s*r3,\\s*8"
    },
    {
      "sha": "32772e27097b11f43581ae3737a422b69bd41ba8",
      "filename": "gas/testsuite/gas/csky/enhance_dsp.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/enhance_dsp.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/gas/testsuite/gas/csky/enhance_dsp.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/csky/enhance_dsp.s?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -109,7 +109,7 @@ hello:\n     plsr.u16     r2, r3, r4\n     plsri.u16.r  r2, r3, 8\n     plsr.u16.r   r2, r3, r4\n-    plsli.u16    r2, r3, 8\n+    plsli.16    r2, r3, 8\n     plsl.u16     r2, r3, r16\n     plsli.u16.s  r2, r3, 8\n     plsli.s16.s  r2, r3, 8"
    },
    {
      "sha": "2ec02dc5000e1e06b296ab4f40e40c4060f359ac",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -1,3 +1,8 @@\n+2020-08-24  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* opcode/csky.h (CSKYV2_ISA_10E60): New.\n+\t(CSKY_ARCH_860): New.\n+\n 2020-08-21  Cooper Qu  <cooper.qu@linux.alibaba.com>\n \n \t* csky.h (CSKYV2_ISA_3E3R2): New."
    },
    {
      "sha": "098bdc9ba651abcaf52d9e9e266c1c3b04658846",
      "filename": "include/opcode/csky.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/include/opcode/csky.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/include/opcode/csky.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/csky.h?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -30,6 +30,7 @@\n #define CSKYV2_ISA_7E10     (1 << 5)\n #define CSKYV2_ISA_3E3R1    (1 << 6)\n #define CSKYV2_ISA_3E3R2    (1 << 7)\n+#define CSKYV2_ISA_10E60    (1 << 8)\n \n #define CSKY_ISA_TRUST      (1 << 11)\n #define CSKY_ISA_CACHE      (1 << 12)\n@@ -70,6 +71,7 @@\n #define CSKY_ARCH_803       0x9\n #define CSKY_ARCH_807       0x6\n #define CSKY_ARCH_810       0x8\n+#define CSKY_ARCH_860       0xb\n \n #define CSKY_ARCH_MAC       (1 << 15)\n #define CSKY_ARCH_DSP       (1 << 14)"
    },
    {
      "sha": "f2dbc22e8065668dafeaa1ca11616ef9033266b3",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -1,3 +1,10 @@\n+2020-08-24  Cooper Qu  <cooper.qu@linux.alibaba.com>\n+\n+\t* csky-dis.c (csky_find_inst_info): Skip CK860's instructions\n+\tin other CPUs to speed up disassembling.\n+\t* csky-opc.h (csky_v2_opcodes): Add CK860's instructions,\n+\tChange plsli.u16 to plsli.16, change sync's operand format.\n+\n 2020-08-21  Cooper Qu  <cooper.qu@linux.alibaba.com>\n \n \t* csky-opc.h (csky_v2_opcodes): Add instruction bnezad."
    },
    {
      "sha": "537725baa405ff906632b65eb835c12df157b102",
      "filename": "opcodes/csky-dis.c",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/csky-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/csky-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/csky-dis.c?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -159,6 +159,15 @@ csky_find_inst_info (struct csky_opcode_info const **pinfo,\n   p = g_opcodeP;\n   while (p->mnemonic)\n     {\n+      /* FIXME: Skip 860's instruction in other CPUs. It is not suitable.\n+\t These codes need to be optimized.  */\n+      if (((CSKY_ARCH_MASK & mach_flag) != CSKY_ARCH_860)\n+\t  && (p->isa_flag32 & CSKYV2_ISA_10E60))\n+\t{\n+\t  p++;\n+\t  continue;\n+\t}\n+\n       /* Get the opcode mask.  */\n       for (i = 0; i < OP_TABLE_NUM; i++)\n \tif (length == 2)"
    },
    {
      "sha": "796d3757024a13e0eb6bfcabd6dabdbbc551fb6f",
      "filename": "opcodes/csky-opc.h",
      "status": "modified",
      "additions": 112,
      "deletions": 6,
      "changes": 118,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/csky-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/531c73a37bb4477f8337bb9dddc36d552ee76056/opcodes/csky-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/csky-opc.h?ref=531c73a37bb4477f8337bb9dddc36d552ee76056",
      "patch": "@@ -3401,11 +3401,6 @@ const struct csky_opcode csky_v2_opcodes[] =\n \t\t\t(0_3or21_24, FREGLIST_DASH, OPRND_SHIFT_0_BIT),\n \t\t\t(16_20, AREG_WITH_BRACKET, OPRND_SHIFT_0_BIT)),\n \t  CSKY_ISA_FLOAT_1E2),\n-    DOP32 (\"sync\",\n-\t   OPCODE_INFO1 (0xc0000420,\n-\t\t\t (21_25, IMM5b, OPRND_SHIFT_0_BIT)),\n-\t   OPCODE_INFO0 (0xc0000420),\n-\t   CSKYV2_ISA_E1),\n     DOP32 (\"idly\",\n \t   OPCODE_INFO1 (0xc0001c20,\n \t\t\t (21_25, OIMM5b_IDLY, OPRND_SHIFT_0_BIT)),\n@@ -4681,6 +4676,117 @@ const struct csky_opcode csky_v2_opcodes[] =\n #undef _RELAX\n #define _RELAX      0\n \n+  /* CK860 instructions.  */\n+  OP32(\"sync.is\",\n+       OPCODE_INFO0(0xc2200420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"sync.i\",\n+       OPCODE_INFO0(0xc0200420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"sync.s\",\n+       OPCODE_INFO0(0xc2000420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.brwarw\",\n+       OPCODE_INFO0(0xc000842f),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.brwarws\",\n+       OPCODE_INFO0(0xc200842f),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.brar\",\n+       OPCODE_INFO0(0xc0008425),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.brars\",\n+       OPCODE_INFO0(0xc2008425),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.bwaw\",\n+       OPCODE_INFO0(0xc000842a),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"bar.bwaws\",\n+       OPCODE_INFO0(0xc200842a),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"icache.iall\",\n+       OPCODE_INFO0(0xc1009020),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"icache.ialls\",\n+       OPCODE_INFO0(0xc3009020),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"icache.iva\",\n+       OPCODE_INFO1(0xc0a09020,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.iall\",\n+       OPCODE_INFO0(0xc1009420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.iva\",\n+       OPCODE_INFO1(0xc1609420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.isw\",\n+       OPCODE_INFO1(0xc1409420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.call\",\n+       OPCODE_INFO0(0xc0809420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.cva\",\n+       OPCODE_INFO1(0xc0e09420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.cval1\",\n+       OPCODE_INFO1(0xc2e09420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.csw\",\n+       OPCODE_INFO1(0xc0c09420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.ciall\",\n+       OPCODE_INFO0(0xc1809420),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.civa\",\n+       OPCODE_INFO1(0xc1e09420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"dcache.cisw\",\n+       OPCODE_INFO1(0xc1c09420,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.vaa\",\n+       OPCODE_INFO1(0xc0408820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.vaas\",\n+       OPCODE_INFO1(0xc2408820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.asid\",\n+       OPCODE_INFO1(0xc0208820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.asids\",\n+       OPCODE_INFO1(0xc2208820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.va\",\n+       OPCODE_INFO1(0xc0608820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.vas\",\n+       OPCODE_INFO1(0xc2608820,\n+\t\t    (16_20, AREG, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.all\",\n+       OPCODE_INFO0(0xc0008820),\n+       CSKYV2_ISA_10E60),\n+  OP32(\"tlbi.alls\",\n+       OPCODE_INFO0(0xc2008820),\n+       CSKYV2_ISA_10E60),\n+  DOP32(\"sync\",\n+       OPCODE_INFO0(0xc0000420),\n+       OPCODE_INFO1(0xc0000420,\n+\t\t    (21_25, IMM5b, OPRND_SHIFT_0_BIT)),\n+       CSKYV2_ISA_E1),\n+\n     /* The followings are enhance DSP instructions.  */\n     DOP32_WITH_WORK (\"bloop\",\n \t\t     OPCODE_INFO3 (0xe9c00000,\n@@ -5325,7 +5431,7 @@ const struct csky_opcode csky_v2_opcodes[] =\n \t\t\t(16_20, AREG, OPRND_SHIFT_0_BIT),\n \t\t\t(21_25, AREG, OPRND_SHIFT_0_BIT)),\n \t  CSKY_ISA_DSP_ENHANCE),\n-    OP32 (\"plsli.u16\",\n+    OP32 (\"plsli.16\",\n \t  OPCODE_INFO3 (0xf800d400,\n \t\t\t(0_4, AREG, OPRND_SHIFT_0_BIT),\n \t\t\t(16_20, AREG, OPRND_SHIFT_0_BIT),"
    }
  ]
}