{
  "sha": "86cd6bc8f69613d81a2024d7d3436b774a4039cd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODZjZDZiYzhmNjk2MTNkODFhMjAyNGQ3ZDM0MzZiNzc0YTQwMzljZA==",
  "commit": {
    "author": {
      "name": "Alok Kumar Sharma",
      "email": "AlokKumar.Sharma@amd.com",
      "date": "2020-05-10T19:12:00Z"
    },
    "committer": {
      "name": "Alok Kumar Sharma",
      "email": "AlokKumar.Sharma@amd.com",
      "date": "2020-05-10T19:18:10Z"
    },
    "message": "gdb/fortran: Allow Flang MAIN_ in Fortran testing\n\nName of fortran main function for Flang compiler is MAIN_ while\nfor gfortran it is MAIN__ . In test cases MAIN__ is hardcoded for\nthe purpose of inserting breakpoint.\n\nNew proc is added to detect main function name depending on the\ncompiler used.\nFortran specific version of runto_main named fortran_runto_main\nis added.\n\nThis commit adds support for Flang main function, there should be\nno change for gfortran.\n\ngdb/testsuite/ChangeLog\n\n\t* lib/fortran.exp (fortran_main): New Proc, handle flang MAIN_,\n\t(fortran_runto_main): New Proc, fortran version of runto_main.\n\t* gdb.fortran/array-bounds-high.exp: Handle flang MAIN_.\n\t* gdb.fortran/array-bounds.exp: Likewise.\n\t* gdb.fortran/array-slices.exp: Likewise.\n\t* gdb.fortran/block-data.exp: Likewise.\n\t* gdb.fortran/charset.exp: Likewise.\n\t* gdb.fortran/common-block.exp: Likewise.\n\t* gdb.fortran/complex.exp: Likewise.\n\t* gdb.fortran/derived-type-function.exp: Likewise.\n\t* gdb.fortran/derived-type.exp: Likewise.\n\t* gdb.fortran/info-modules.exp: Likewise.\n\t* gdb.fortran/info-types.exp: Likewise.\n\t* gdb.fortran/intrinsics.exp: Likewise.\n\t* gdb.fortran/library-module.exp: Likewise.\n\t* gdb.fortran/logical.exp: Likewise.\n\t* gdb.fortran/max-depth.exp: Likewise.\n\t* gdb.fortran/module.exp: Likewise.\n\t* gdb.fortran/multi-dim.exp: Likewise.\n\t* gdb.fortran/nested-funcs.exp: Likewise.\n\t* gdb.fortran/print-formatted.exp: Likewise.\n\t* gdb.fortran/print_type.exp: Likewise.\n\t* gdb.fortran/printing-types.exp: Likewise.\n\t* gdb.fortran/ptr-indentation.exp: Likewise.\n\t* gdb.fortran/ptype-on-functions.exp: Likewise.\n\t* gdb.fortran/subarray.exp: Likewise.\n\t* gdb.fortran/vla-alloc-assoc.exp: Likewise.\n\t* gdb.fortran/vla-datatypes.exp: Likewise.\n\t* gdb.fortran/vla-history.exp: Likewise.\n\t* gdb.fortran/vla-ptr-info.exp: Likewise.\n\t* gdb.fortran/vla-ptype-sub.exp: Likewise.\n\t* gdb.fortran/vla-ptype.exp: Likewise.\n\t* gdb.fortran/vla-sizeof.exp: Likewise.\n\t* gdb.fortran/vla-type.exp: Likewise.\n\t* gdb.fortran/vla-value-sub-arbitrary.exp: Likewise.\n\t* gdb.fortran/vla-value-sub-finish.exp: Likewise.\n\t* gdb.fortran/vla-value-sub.exp: Likewise.\n\t* gdb.fortran/vla-value.exp: Likewise.\n\t* gdb.fortran/whatis_type.exp: Likewise.\n\t* gdb.mi/mi-var-child-f.exp: Likewise.",
    "tree": {
      "sha": "2340ab048b5afbd1eea54458f035b89fa2861b1e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2340ab048b5afbd1eea54458f035b89fa2861b1e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/86cd6bc8f69613d81a2024d7d3436b774a4039cd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/86cd6bc8f69613d81a2024d7d3436b774a4039cd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/86cd6bc8f69613d81a2024d7d3436b774a4039cd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/86cd6bc8f69613d81a2024d7d3436b774a4039cd/comments",
  "author": {
    "login": "alokkrsharma",
    "id": 60725621,
    "node_id": "MDQ6VXNlcjYwNzI1NjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/60725621?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alokkrsharma",
    "html_url": "https://github.com/alokkrsharma",
    "followers_url": "https://api.github.com/users/alokkrsharma/followers",
    "following_url": "https://api.github.com/users/alokkrsharma/following{/other_user}",
    "gists_url": "https://api.github.com/users/alokkrsharma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alokkrsharma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alokkrsharma/subscriptions",
    "organizations_url": "https://api.github.com/users/alokkrsharma/orgs",
    "repos_url": "https://api.github.com/users/alokkrsharma/repos",
    "events_url": "https://api.github.com/users/alokkrsharma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alokkrsharma/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "alokkrsharma",
    "id": 60725621,
    "node_id": "MDQ6VXNlcjYwNzI1NjIx",
    "avatar_url": "https://avatars.githubusercontent.com/u/60725621?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alokkrsharma",
    "html_url": "https://github.com/alokkrsharma",
    "followers_url": "https://api.github.com/users/alokkrsharma/followers",
    "following_url": "https://api.github.com/users/alokkrsharma/following{/other_user}",
    "gists_url": "https://api.github.com/users/alokkrsharma/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alokkrsharma/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alokkrsharma/subscriptions",
    "organizations_url": "https://api.github.com/users/alokkrsharma/orgs",
    "repos_url": "https://api.github.com/users/alokkrsharma/repos",
    "events_url": "https://api.github.com/users/alokkrsharma/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alokkrsharma/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1ea1aee1ed295d27a6aab933c3bd9d83af1b2cc5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1ea1aee1ed295d27a6aab933c3bd9d83af1b2cc5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1ea1aee1ed295d27a6aab933c3bd9d83af1b2cc5"
    }
  ],
  "stats": {
    "total": 209,
    "additions": 145,
    "deletions": 64
  },
  "files": [
    {
      "sha": "c13b651e90cd034e471a4044f929f3547f9c23d7",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 43,
      "deletions": 0,
      "changes": 43,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -1,3 +1,46 @@\n+2020-05-10  Alok Kumar Sharma  <alokkumar.sharma@amd.com>\n+\n+\t* lib/fortran.exp (fortran_main): New Proc, handle flang MAIN_,\n+\t(fortran_runto_main): New Proc, fortran version of runto_main.\n+\t* gdb.fortran/array-bounds-high.exp: Handle flang MAIN_\n+\t* gdb.fortran/array-bounds.exp: Likewise.\n+\t* gdb.fortran/array-slices.exp: Likewise.\n+\t* gdb.fortran/block-data.exp: Likewise.\n+\t* gdb.fortran/charset.exp: Likewise.\n+\t* gdb.fortran/common-block.exp: Likewise.\n+\t* gdb.fortran/complex.exp: Likewise.\n+\t* gdb.fortran/derived-type-function.exp: Likewise.\n+\t* gdb.fortran/derived-type.exp: Likewise.\n+\t* gdb.fortran/info-modules.exp: Likewise.\n+\t* gdb.fortran/info-types.exp: Likewise.\n+\t* gdb.fortran/intrinsics.exp: Likewise.\n+\t* gdb.fortran/library-module.exp: Likewise.\n+\t* gdb.fortran/logical.exp: Likewise.\n+\t* gdb.fortran/max-depth.exp: Likewise.\n+\t* gdb.fortran/module.exp: Likewise.\n+\t* gdb.fortran/multi-dim.exp: Likewise.\n+\t* gdb.fortran/nested-funcs.exp: Likewise.\n+\t* gdb.fortran/print-formatted.exp: Likewise.\n+\t* gdb.fortran/print_type.exp: Likewise.\n+\t* gdb.fortran/printing-types.exp: Likewise.\n+\t* gdb.fortran/ptr-indentation.exp: Likewise.\n+\t* gdb.fortran/ptype-on-functions.exp: Likewise.\n+\t* gdb.fortran/subarray.exp: Likewise.\n+\t* gdb.fortran/vla-alloc-assoc.exp: Likewise.\n+\t* gdb.fortran/vla-datatypes.exp: Likewise.\n+\t* gdb.fortran/vla-history.exp: Likewise.\n+\t* gdb.fortran/vla-ptr-info.exp: Likewise.\n+\t* gdb.fortran/vla-ptype-sub.exp: Likewise.\n+\t* gdb.fortran/vla-ptype.exp: Likewise.\n+\t* gdb.fortran/vla-sizeof.exp: Likewise.\n+\t* gdb.fortran/vla-type.exp: Likewise.\n+\t* gdb.fortran/vla-value-sub-arbitrary.exp: Likewise.\n+\t* gdb.fortran/vla-value-sub-finish.exp: Likewise.\n+\t* gdb.fortran/vla-value-sub.exp: Likewise.\n+\t* gdb.fortran/vla-value.exp: Likewise.\n+\t* gdb.fortran/whatis_type.exp: Likewise.\n+\t* gdb.mi/mi-var-child-f.exp: Likewise.\n+\n 2020-05-09  Tom de Vries  <tdevries@suse.de>\n \n \t* gdb.dwarf2/clang-debug-names.exp: Remove PR25952 kfail."
    },
    {
      "sha": "ba34dbc23e279fbd5db41905b0cef2090002f9c5",
      "filename": "gdb/testsuite/gdb.fortran/array-bounds-high.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-bounds-high.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-bounds-high.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/array-bounds-high.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -20,13 +20,14 @@ if { [skip_fortran_tests] } { return -1 }\n \n set testfile \"array-bounds-high\"\n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing $testfile.exp $testfile $srcfile {f90 debug}]} {\n     return -1\n }\n \n-if {![runto MAIN__]} {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if {![fortran_runto_main]} {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "3f2527343b1f41324cf9a86b82d10f94961bc480",
      "filename": "gdb/testsuite/gdb.fortran/array-bounds.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-bounds.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-bounds.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/array-bounds.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -20,13 +20,14 @@ if { [skip_fortran_tests] } { return -1 }\n \n set testfile \"array-bounds\"\n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing $testfile.exp $testfile $srcfile {f90 debug}]} {\n     return -1\n }\n \n-if {![runto MAIN__]} {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if {![fortran_runto_main]} {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "4ca1db90f7fc9176cc256b9747d958d24b535b99",
      "filename": "gdb/testsuite/gdb.fortran/array-slices.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-slices.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/array-slices.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/array-slices.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,13 +21,14 @@\n if {[skip_fortran_tests]} { return -1 }\n \n standard_testfile \".f90\"\n+load_lib fortran.exp\n \n if {[prepare_for_testing ${testfile}.exp ${testfile} ${srcfile} \\\n \t {debug f90}]} {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "632c0141a349c93da56d5bd9380279c771439394",
      "filename": "gdb/testsuite/gdb.fortran/block-data.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/block-data.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/block-data.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/block-data.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -30,8 +30,8 @@ if {[prepare_for_testing $testfile.exp $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    untested \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    untested \"couldn't run to main\"\n     return -1\n }\n "
    },
    {
      "sha": "fc504ae0b08bb4ea9a348eeb0aeda0a488569899",
      "filename": "gdb/testsuite/gdb.fortran/charset.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/charset.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/charset.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/charset.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -19,12 +19,14 @@\n if { [skip_fortran_tests] } { return -1 }\n \n standard_testfile .f90\n+load_lib fortran.exp\n+\n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} {debug additional_flags=-fbackslash f90}] } {\n     return -1\n }\n \n-if ![runto MAIN__] {\n-    perror \"Couldn't run to MAIN__\"\n+if ![fortran_runto_main] {\n+    perror \"Couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "3dacfd32b2419d24c1f984cf2ac8d6f9c93dcf61",
      "filename": "gdb/testsuite/gdb.fortran/common-block.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/common-block.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/common-block.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/common-block.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -27,8 +27,8 @@ if {[prepare_for_testing \"failed to prepare\" ${testfile} \\\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "a88e553e586e74b30ab29cf3eb309fca3b567468",
      "filename": "gdb/testsuite/gdb.fortran/complex.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/complex.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/complex.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/complex.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90 quiet}]} {\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    perror \"Couldn't run to MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"Couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "2ae6f46c1ec4a940ce6a931b47e732ea0f5327eb",
      "filename": "gdb/testsuite/gdb.fortran/derived-type-function.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/derived-type-function.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/derived-type-function.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/derived-type-function.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,13 +21,14 @@\n if { [skip_fortran_tests] } { return -1 }\n \n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "4b86ba97de656848585401b7ee3e7f6e75f89f6c",
      "filename": "gdb/testsuite/gdb.fortran/derived-type.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/derived-type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/derived-type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/derived-type.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -27,8 +27,8 @@ if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "a3a9b2cb18548ecdaba2f90f6c102d7d053901f2",
      "filename": "gdb/testsuite/gdb.fortran/info-modules.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/info-modules.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/info-modules.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/info-modules.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -28,8 +28,8 @@ if { [prepare_for_testing \"failed to prepare\" $testfile \\\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if { ![fortran_runto_main] } {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "e80c990a85690270d47a0851b51074712f52949a",
      "filename": "gdb/testsuite/gdb.fortran/info-types.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/info-types.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/info-types.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/info-types.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -27,8 +27,8 @@ if { [prepare_for_testing \"failed to prepare\" $testfile \\\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if { ![fortran_runto_main] } {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "2cb0237c9554b7b43c0a77a5c32cc7a59615b31b",
      "filename": "gdb/testsuite/gdb.fortran/intrinsics.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/intrinsics.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/intrinsics.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/intrinsics.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -25,8 +25,8 @@ if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}] }\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if { ![fortran_runto_main] } {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "8254fcf10a3eb602e6f646b4ec3947e7b366fe23",
      "filename": "gdb/testsuite/gdb.fortran/library-module.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/library-module.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/library-module.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/library-module.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -40,9 +40,10 @@ if  { [gdb_compile $srcdir/$subdir/$srcfile $binfile executable [list debug f90\n clean_restart $testfile\n \n gdb_load_shlib $libfile\n+load_lib fortran.exp\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "161bbdd908156edc5222bca0d7449d3aa5626e10",
      "filename": "gdb/testsuite/gdb.fortran/logical.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/logical.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/logical.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/logical.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -16,13 +16,14 @@\n # This file was written by Jan Kratochvil <jan.kratochvil@redhat.com>.\n \n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90 quiet}]} {\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if { ![fortran_runto_main] } {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "420b72539f8450eed9a9f1a79bc83114a67db671",
      "filename": "gdb/testsuite/gdb.fortran/max-depth.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/max-depth.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/max-depth.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/max-depth.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -26,8 +26,8 @@ if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}] }\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    perror \"Could not run to breakpoint `MAIN__'.\"\n+if { ![fortran_runto_main] } {\n+    perror \"Could not run to main.\"\n     continue\n }\n "
    },
    {
      "sha": "4a8251c44c6b4b66c13555b2196d44894b3b7690",
      "filename": "gdb/testsuite/gdb.fortran/module.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/module.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/module.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/module.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -29,8 +29,8 @@ gdb_test \"p modmany::var_i\" \" = 14\" \"stopped language detection\"\n \n gdb_test \"print mod1::var_const\" \" = 20\" \"fully qualified name of DW_TAG_constant\"\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n \n@@ -123,7 +123,7 @@ complete \"modmany::var\" $modmany_list\n # Breakpoint would work in language \"c\".\n gdb_test \"show language\" {The current source language is \"(auto; currently )?fortran\".}\n \n-# gcc-4.4.2: The main program is always MAIN__ in .symtab so \"runto\" above\n+# gcc-4.4.2: The main program is always $fmain in .symtab so \"runto\" above\n # works.  But DWARF DW_TAG_subprogram contains the name specified by\n # the \"program\" Fortran statement.\n if [gdb_breakpoint \"module\"] {"
    },
    {
      "sha": "ef6c6da8bd5eec00fc126b69d52a327e1de1d996",
      "filename": "gdb/testsuite/gdb.fortran/multi-dim.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/multi-dim.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/multi-dim.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/multi-dim.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -25,8 +25,8 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} {debug f90}\n     return -1\n }\n \n-if ![runto MAIN__] {\n-    perror \"Couldn't run to MAIN__\"\n+if ![fortran_runto_main] {\n+    perror \"Couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "9e0073d210e2e4b16435c2dc82ed8d8a84d5e53f",
      "filename": "gdb/testsuite/gdb.fortran/nested-funcs.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/nested-funcs.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/nested-funcs.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/nested-funcs.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -25,8 +25,8 @@ if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}]} {\n     return -1\r\n }\r\n \r\n-if ![runto MAIN__] then {\r\n-    perror \"couldn't run to breakpoint MAIN__\"\r\n+if ![fortran_runto_main] then {\r\n+    perror \"couldn't run to main\"\r\n     continue\r\n }\r\n \r"
    },
    {
      "sha": "e71287724b1deef7d4e3f252f0fc6404e29d3fbf",
      "filename": "gdb/testsuite/gdb.fortran/print-formatted.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/print-formatted.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/print-formatted.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/print-formatted.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -25,8 +25,8 @@ if { [prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}] }\n     return -1\n }\n \n-if { ![runto MAIN__] } {\n-    fail \"runto MAIN__\"\n+if { ![fortran_runto_main] } {\n+    fail \"could not run to main\"\n     return -1\n }\n "
    },
    {
      "sha": "fcedb9579a931070f5c9bf38b27b613484d7a91e",
      "filename": "gdb/testsuite/gdb.fortran/print_type.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/print_type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/print_type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/print_type.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -24,7 +24,7 @@ if { [prepare_for_testing ${testfile}.exp ${testfile} ${srcfile} \\\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "44fd93cc56a7ab57870ed06102637d1fa4c3b782",
      "filename": "gdb/testsuite/gdb.fortran/printing-types.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/printing-types.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/printing-types.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/printing-types.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -16,13 +16,14 @@\n if {[skip_fortran_tests]} { return -1 }\n \n standard_testfile .f90\n+load_lib fortran.exp\n \n if {[prepare_for_testing $testfile.exp $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if {![runto MAIN__]} then {\n-    untested \"could not run to breakpoint MAIN__\"\n+if {![fortran_runto_main]} then {\n+    untested \"could not run to main\"\n     return -1\n }\n "
    },
    {
      "sha": "209809a2922b390b0d509ed7c32793bc9b7885f1",
      "filename": "gdb/testsuite/gdb.fortran/ptr-indentation.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/ptr-indentation.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/ptr-indentation.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/ptr-indentation.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -22,8 +22,8 @@ if {[prepare_for_testing $testfile.exp $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if {![runto MAIN__]} then {\n-    untested \"couldn't run to breakpoint MAIN__\"\n+if {![fortran_runto_main]} then {\n+    untested \"couldn't run to main\"\n     return -1\n }\n "
    },
    {
      "sha": "8dc5f76d93a2420af3725fc45bf74a2103f405c5",
      "filename": "gdb/testsuite/gdb.fortran/ptype-on-functions.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/ptype-on-functions.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/ptype-on-functions.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/ptype-on-functions.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -24,8 +24,8 @@ if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}]} {\n     return -1\n }\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "9ee5a9b3cb19986ce7062a501a81c6b9108cede0",
      "filename": "gdb/testsuite/gdb.fortran/subarray.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/subarray.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/subarray.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/subarray.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,6 +21,7 @@\n if { [skip_fortran_tests] } { return -1 }\n \n standard_testfile .f\n+load_lib fortran.exp\n \n if {[prepare_for_testing \"failed to prepare\" $testfile $srcfile {debug f90}]} {\n     return -1\n@@ -31,8 +32,8 @@ gdb_start\n gdb_reinitialize_dir $srcdir/$subdir\n gdb_load ${binfile}\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n "
    },
    {
      "sha": "2ae0411cf12a15921953532fb791a4f6b91a858d",
      "filename": "gdb/testsuite/gdb.fortran/vla-alloc-assoc.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-alloc-assoc.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-alloc-assoc.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-alloc-assoc.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "b69636f600ca47ece345e3ce0c2642dd66a47b66",
      "filename": "gdb/testsuite/gdb.fortran/vla-datatypes.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-datatypes.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-datatypes.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-datatypes.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -24,7 +24,7 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n # check that all fortran standard datatypes will be\n # handled correctly when using as VLA's\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "3bf98db19704f2d4f082999a93a288225398fff9",
      "filename": "gdb/testsuite/gdb.fortran/vla-history.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-history.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-history.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-history.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "d3fa595bea5696b43579a38ccc6cbba06e944848",
      "filename": "gdb/testsuite/gdb.fortran/vla-ptr-info.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptr-info.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptr-info.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-ptr-info.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "07a4a5fc2e9d03157f1be9afda850c9a7c1f411b",
      "filename": "gdb/testsuite/gdb.fortran/vla-ptype-sub.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptype-sub.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptype-sub.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-ptype-sub.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,7 +21,7 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "bbb81ea0c81899f00d56ac467a8b86c769177bc6",
      "filename": "gdb/testsuite/gdb.fortran/vla-ptype.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptype.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-ptype.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-ptype.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,7 +21,7 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "d26b8c60f80eb797e34a159c146726a8f854a496",
      "filename": "gdb/testsuite/gdb.fortran/vla-sizeof.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-sizeof.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-sizeof.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-sizeof.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "f007ea3a786fd58fb686cd581d3861ed818c939e",
      "filename": "gdb/testsuite/gdb.fortran/vla-type.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-type.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,7 +21,7 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "c3ed909a81e69f7c73a0978dfd3bd8d93ae68b79",
      "filename": "gdb/testsuite/gdb.fortran/vla-value-sub-arbitrary.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub-arbitrary.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub-arbitrary.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-value-sub-arbitrary.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla-sub.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "403e411cc29ce8e37b9fe35fd9c1ac1bcec468c8",
      "filename": "gdb/testsuite/gdb.fortran/vla-value-sub-finish.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub-finish.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub-finish.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-value-sub-finish.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla-sub.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "fd923edf401eeb657dad91a06808ee367bf29963",
      "filename": "gdb/testsuite/gdb.fortran/vla-value-sub.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value-sub.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-value-sub.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -14,13 +14,14 @@\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n standard_testfile \"vla-sub.f90\"\n+load_lib fortran.exp\n \n if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     {debug f90 quiet}] } {\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }"
    },
    {
      "sha": "9a727fc30a0c5cf8a292fa8a0948e4f481765079",
      "filename": "gdb/testsuite/gdb.fortran/vla-value.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/vla-value.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/vla-value.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -21,7 +21,7 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} ${srcfile} \\\n     return -1\n }\n \n-if ![runto_main] {\n+if ![fortran_runto_main] {\n     untested \"could not run to main\"\n     return -1\n }\n@@ -129,8 +129,8 @@ gdb_test \"print vla1(9, 9, 9)\" \"no such vector element \\\\\\(vector not allocated\\\n # Try to assign VLA to user variable\n clean_restart ${testfile}\n \n-if ![runto MAIN__] then {\n-    perror \"couldn't run to breakpoint MAIN__\"\n+if ![fortran_runto_main] then {\n+    perror \"couldn't run to main\"\n     continue\n }\n gdb_breakpoint [gdb_get_line_number \"vla2-allocated\"]"
    },
    {
      "sha": "4b0cbf9c28d8dfde71d4f22689d91fb284a81da8",
      "filename": "gdb/testsuite/gdb.fortran/whatis_type.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/whatis_type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.fortran/whatis_type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.fortran/whatis_type.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -23,8 +23,8 @@ if { [prepare_for_testing \"failed to prepare\" ${testfile} \\\n     return -1\n }\n \n-if ![runto MAIN__] {\n-    fail \"run to MAIN__\"\n+if ![fortran_runto_main] {\n+    fail \"run to main\"\n     return\n }\n "
    },
    {
      "sha": "3af80a8e60470e3910e14b08f02f1a33ff7efe8c",
      "filename": "gdb/testsuite/gdb.mi/mi-var-child-f.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.mi/mi-var-child-f.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/gdb.mi/mi-var-child-f.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.mi/mi-var-child-f.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -36,7 +36,7 @@ if {[gdb_compile \"${srcdir}/${subdir}/${srcfile}\" \"${binfile}\" \\\n mi_gdb_reinitialize_dir $srcdir/$subdir\n mi_gdb_load ${binfile}\n \n-mi_runto MAIN__\n+mi_runto [fortran_main]\n \n mi_create_varobj \"array\" \"array\" \"create local variable array\"\n "
    },
    {
      "sha": "b9def7fa21e57305fa227eaf315f2bb19c88fa7d",
      "filename": "gdb/testsuite/lib/fortran.exp",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/lib/fortran.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86cd6bc8f69613d81a2024d7d3436b774a4039cd/gdb/testsuite/lib/fortran.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/fortran.exp?ref=86cd6bc8f69613d81a2024d7d3436b774a4039cd",
      "patch": "@@ -126,3 +126,23 @@ proc fortran_character1 {} {\n \treturn \"unknown\"\n     }\n }\n+\n+# Return name of the main procedure based on the compiler version.\n+\n+proc fortran_main {} {\n+    if {[test_compiler_info {gcc-4-[012]-*}]\n+         || [test_compiler_info {gcc-*}]\n+         || [test_compiler_info {icc-*}]} {\n+\treturn \"MAIN__\"\n+    } elseif {[test_compiler_info {clang-*}]} {\n+\treturn \"MAIN_\"\n+    } else {\n+\treturn \"unknown\"\n+    }\n+}\n+\n+# Fortran version of runto_main.\n+\n+proc fortran_runto_main { } {\n+    return [runto [fortran_main]]\n+}"
    }
  ]
}