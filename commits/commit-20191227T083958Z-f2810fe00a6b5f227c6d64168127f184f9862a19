{
  "sha": "f2810fe00a6b5f227c6d64168127f184f9862a19",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjI4MTBmZTAwYTZiNWYyMjdjNmQ2NDE2ODEyN2YxODRmOTg2MmExOQ==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-12-27T08:39:58Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-12-27T08:39:58Z"
    },
    "message": "x86: adjust ignored prefix warning for branches\n\nThere's no reason to not also issue them in Intel syntax mode, and it\ncan be quite helpful to mention the actual insn (after all there can be\nmultiple on a single line).",
    "tree": {
      "sha": "a5d7e46c18f457b1c1059f8630675e83e85b3593",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a5d7e46c18f457b1c1059f8630675e83e85b3593"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f2810fe00a6b5f227c6d64168127f184f9862a19",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2810fe00a6b5f227c6d64168127f184f9862a19",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f2810fe00a6b5f227c6d64168127f184f9862a19",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2810fe00a6b5f227c6d64168127f184f9862a19/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6cb0a70ef31ff585f046cb20a30088c0433d84f0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6cb0a70ef31ff585f046cb20a30088c0433d84f0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6cb0a70ef31ff585f046cb20a30088c0433d84f0"
    }
  ],
  "stats": {
    "total": 41,
    "additions": 27,
    "deletions": 14
  },
  "files": [
    {
      "sha": "dc028c9f055fbfc67fd43da101c28ea5ac8dd5b4",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f2810fe00a6b5f227c6d64168127f184f9862a19",
      "patch": "@@ -1,3 +1,12 @@\n+2019-12-27  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* config/tc-i386.c (output_branch, output_jump,\n+\toutput_interseg_jump): Also emit skipped prefix warning in Intel\n+\tsyntax mode. Name instruction in the warning text.\n+\t* testsuite/gas/i386/mpx-inval-1.l,\n+\ttestsuite/gas/i386/notrackbad.l,\n+\ttestsuite/gas/i386/x86-64-notrackbad.l: Adjust expectations.\n+\n 2019-12-27  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (output_branch): Handle BND prefix the same"
    },
    {
      "sha": "a78aaba6cda8a27f20b9cb2b61230ea5bce47a89",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=f2810fe00a6b5f227c6d64168127f184f9862a19",
      "patch": "@@ -7914,8 +7914,8 @@ output_branch (void)\n       i.prefixes--;\n     }\n \n-  if (i.prefixes != 0 && !intel_syntax)\n-    as_warn (_(\"skipping prefixes on this instruction\"));\n+  if (i.prefixes != 0)\n+    as_warn (_(\"skipping prefixes on `%s'\"), i.tm.name);\n \n   /* It's always a symbol;  End frag & setup for relax.\n      Make sure there is enough room in this frag for the largest\n@@ -8057,8 +8057,8 @@ output_jump (void)\n       i.prefixes -= 1;\n     }\n \n-  if (i.prefixes != 0 && !intel_syntax)\n-    as_warn (_(\"skipping prefixes on this instruction\"));\n+  if (i.prefixes != 0)\n+    as_warn (_(\"skipping prefixes on `%s'\"), i.tm.name);\n \n   p = frag_more (i.tm.opcode_length + size);\n   switch (i.tm.opcode_length)\n@@ -8118,8 +8118,8 @@ output_interseg_jump (void)\n   if (code16)\n     size = 2;\n \n-  if (i.prefixes != 0 && !intel_syntax)\n-    as_warn (_(\"skipping prefixes on this instruction\"));\n+  if (i.prefixes != 0)\n+    as_warn (_(\"skipping prefixes on `%s'\"), i.tm.name);\n \n   /* 1 opcode; 2 segment; offset  */\n   p = frag_more (prefix + 1 + 2 + size);"
    },
    {
      "sha": "f50fd7f06ca356420bc7ff66ab5e1cfdf15e9a47",
      "filename": "gas/testsuite/gas/i386/mpx-inval-1.l",
      "status": "modified",
      "additions": 8,
      "deletions": 4,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/mpx-inval-1.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/mpx-inval-1.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/mpx-inval-1.l?ref=f2810fe00a6b5f227c6d64168127f184f9862a19",
      "patch": "@@ -2,15 +2,17 @@\n .*:6: Error: expecting valid branch instruction after `bnd'\n .*:7: Error: expecting valid branch instruction after `bnd'\n .*:8: Error: expecting valid branch instruction after `bnd'\n-.*:8: Warning: skipping prefixes on this instruction\n+.*:8: Warning: skipping prefixes on `lcall'\n .*:9: Error: expecting valid branch instruction after `bnd'\n-.*:9: Warning: skipping prefixes on this instruction\n+.*:9: Warning: skipping prefixes on `ljmp'\n .*:10: Error: expecting valid branch instruction after `bnd'\n .*:11: Error: expecting valid branch instruction after `bnd'\n .*:14: Error: expecting valid branch instruction after `bnd'\n .*:15: Error: expecting valid branch instruction after `bnd'\n .*:16: Error: expecting valid branch instruction after `bnd'\n+.*:16: Warning: skipping prefixes on `lcall'\n .*:17: Error: expecting valid branch instruction after `bnd'\n+.*:17: Warning: skipping prefixes on `ljmp'\n .*:18: Error: expecting valid branch instruction after `bnd'\n .*:19: Error: expecting valid branch instruction after `bnd'\n GAS LISTING .*\n@@ -27,11 +29,11 @@ GAS LISTING .*\n .*  Error: expecting valid branch instruction after `bnd'\n [ \t]*8[ \t]+\\?\\?\\?\\? 9A000000 \t\tbnd lcall \\$0x1234,\\$xxx\n .*  Error: expecting valid branch instruction after `bnd'\n-.*  Warning: skipping prefixes on this instruction\n+.*  Warning: skipping prefixes on `lcall'\n [ \t]*8[ \t]+003412\n [ \t]*9[ \t]+\\?\\?\\?\\? EA000000 \t\tbnd ljmp \\$0x1234,\\$xxx\n .*  Error: expecting valid branch instruction after `bnd'\n-.*  Warning: skipping prefixes on this instruction\n+.*  Warning: skipping prefixes on `ljmp'\n [ \t]*9[ \t]+003412\n [ \t]*10[ \t]+\\?\\?\\?\\? F2E2E9   \t\tbnd loop foo\n .*  Error: expecting valid branch instruction after `bnd'\n@@ -45,9 +47,11 @@ GAS LISTING .*\n .*  Error: expecting valid branch instruction after `bnd'\n [ \t]*16[ \t]+\\?\\?\\?\\? 9A000000 \t\tbnd lcall 0x1234,xxx\n .*  Error: expecting valid branch instruction after `bnd'\n+.*  Warning: skipping prefixes on `lcall'\n [ \t]*16[ \t]+003412\n [ \t]*17[ \t]+\\?\\?\\?\\? EA000000 \t\tbnd ljmp 0x1234,xxx\n .*  Error: expecting valid branch instruction after `bnd'\n+.*  Warning: skipping prefixes on `ljmp'\n [ \t]*17[ \t]+003412\n [ \t]*18[ \t]+\\?\\?\\?\\? F2E2CE   \t\tbnd loop foo\n .*  Error: expecting valid branch instruction after `bnd'"
    },
    {
      "sha": "75d55536ee1c95e30130a416dbbac0a2665a7f3b",
      "filename": "gas/testsuite/gas/i386/notrackbad.l",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/notrackbad.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/notrackbad.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/notrackbad.l?ref=f2810fe00a6b5f227c6d64168127f184f9862a19",
      "patch": "@@ -1,6 +1,6 @@\n .*: Assembler messages:\n .*:6: Error: expecting indirect branch instruction after `notrack'\n-.*:6: Warning: skipping prefixes on this instruction\n+.*:6: Warning: skipping prefixes on `call'\n .*:7: Error: expecting indirect branch instruction after `notrack'\n .*:9: Error: same type of prefix used twice\n .*:10: Error: same type of prefix used twice\n@@ -16,7 +16,7 @@ GAS LISTING .*\n [ \t]*5[ \t]+_start:\n [ \t]*6[ \t]+\\?\\?\\?\\? [0-9A-F]* \t\tnotrack call foo\n \\*\\*\\*\\*  Error: expecting indirect branch instruction after `notrack'\n-\\*\\*\\*\\*  Warning: skipping prefixes on this instruction\n+\\*\\*\\*\\*  Warning: skipping prefixes on `call'\n [ \t]*6[ \t]+[0-9A-F]*\n [ \t]*7[ \t]+\\?\\?\\?\\? [0-9A-F]* \t\tnotrack jmp foo\n \\*\\*\\*\\*  Error: expecting indirect branch instruction after `notrack'"
    },
    {
      "sha": "173b3d1508cf60ee4497a2585a6f1a53e8cffef0",
      "filename": "gas/testsuite/gas/i386/x86-64-notrackbad.l",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/x86-64-notrackbad.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f2810fe00a6b5f227c6d64168127f184f9862a19/gas/testsuite/gas/i386/x86-64-notrackbad.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-notrackbad.l?ref=f2810fe00a6b5f227c6d64168127f184f9862a19",
      "patch": "@@ -1,6 +1,6 @@\n .*: Assembler messages:\n .*:6: Error: expecting indirect branch instruction after `notrack'\n-.*:6: Warning: skipping prefixes on this instruction\n+.*:6: Warning: skipping prefixes on `call'\n .*:7: Error: expecting indirect branch instruction after `notrack'\n .*:9: Error: same type of prefix used twice\n .*:10: Error: same type of prefix used twice\n@@ -16,7 +16,7 @@ GAS LISTING .*\n [ \t]*5[ \t]+_start:\n [ \t]*6[ \t]+\\?\\?\\?\\? [0-9A-F]* \t\tnotrack call foo\n \\*\\*\\*\\*  Error: expecting indirect branch instruction after `notrack'\n-\\*\\*\\*\\*  Warning: skipping prefixes on this instruction\n+\\*\\*\\*\\*  Warning: skipping prefixes on `call'\n [ \t]*6[ \t]+[0-9A-F]*\n [ \t]*7[ \t]+\\?\\?\\?\\? [0-9A-F]* \t\tnotrack jmp foo\n \\*\\*\\*\\*  Error: expecting indirect branch instruction after `notrack'"
    }
  ]
}