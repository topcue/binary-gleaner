{
  "sha": "a100a94530eb85991fa736ea5037cf8b83190ae6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTEwMGE5NDUzMGViODU5OTFmYTczNmVhNTAzN2NmOGI4MzE5MGFlNg==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-22T18:11:32Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-07-06T18:53:27Z"
    },
    "message": "gdb/testsuite: restore configure script\n\nCommit f99d1d37496f (\"Remove gdb/testsuite/configure\") removed\ngdb/testsuite/configure, as anything gdb/testsuite/configure did could\nbe done by gdb/configure.\n\nThere is however one use case that popped up when this changed\npropagated to downstream consumers, to run the testsuite on an already\nbuilt GDB.  In the workflow of ROCm-GDB at AMD, a GDB package is built\nin a CI job.  This GDB package is then tested on different machines /\nhardware configurations as part of other CI jobs.  To achieve this,\nthose CI jobs only configure the testsuite directory and run \"make\ncheck\" with an appropriate board file.\n\nIn light of this use case, the way I see it is that gdb/testsuite could\nbe considered its own project.  It could be stored in a completely\ndifferent repo if we want to, it just happens to be stored inside gdb/.\n\nSince the only downside of having gdb/testsuite/configure is that it\ntakes a few more seconds to run, but on the other hand it's quite useful\nfor some people, I propose re-adding it.\n\nIn a sense, this is revert of f99d1d37496f, but it's not a direct\ngit-revert, as some things have changed since.\n\ngdb/ChangeLog:\n\n\t* configure.ac: Remove things that were moved from\n\ttestsuite/configure.ac.\n\t* configure: Re-generate.\n\ngdb/testsuite/ChangeLog:\n\n\t* configure.ac: Restore.\n\t* configure: Re-generate.\n\t* aclocal.m4: Re-generate.\n\t* Makefile.in (distclean): Add config.status.\n\t(Makefile): Adjust paths.\n\t(lib/pdtrace): Adjust paths.\n\t(config.status): Add.\n\nChange-Id: Ic38c79485e1835712d9c99649c9dfb59667254f1",
    "tree": {
      "sha": "2d72cbcb61e9e50e8db4ed949533d840f87ca32a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2d72cbcb61e9e50e8db4ed949533d840f87ca32a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a100a94530eb85991fa736ea5037cf8b83190ae6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a100a94530eb85991fa736ea5037cf8b83190ae6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a100a94530eb85991fa736ea5037cf8b83190ae6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a100a94530eb85991fa736ea5037cf8b83190ae6/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f069ea46a03ae868581d1c852da28e979ea1245a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f069ea46a03ae868581d1c852da28e979ea1245a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f069ea46a03ae868581d1c852da28e979ea1245a"
    }
  ],
  "stats": {
    "total": 5078,
    "additions": 4957,
    "deletions": 121
  },
  "files": [
    {
      "sha": "5d89635c043fb745aa562136c1e919c0874579bc",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 6,
      "deletions": 82,
      "changes": 88,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=a100a94530eb85991fa736ea5037cf8b83190ae6",
      "patch": "@@ -619,14 +619,10 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_header_list=\n enable_option_checking=no\n+ac_header_list=\n ac_subst_vars='LTLIBOBJS\n LIBOBJS\n-NM_TRANSFORM_NAME\n-GAS_TRANSFORM_NAME\n-READELF_TRANSFORM_NAME\n-STRIP_TRANSFORM_NAME\n GCORE_TRANSFORM_NAME\n GDB_TRANSFORM_NAME\n XSLTPROC\n@@ -637,7 +633,6 @@ LIBXXHASH\n HAVE_LIBXXHASH\n CTF_DEPS\n LIBCTF\n-enable_libctf\n LTLIBBABELTRACE\n LIBBABELTRACE\n HAVE_LIBBABELTRACE\n@@ -668,7 +663,6 @@ GDBTKLIBS\n X_LIBS\n X_LDFLAGS\n X_CFLAGS\n-subdirs\n TK_XINCLUDES\n TK_DEPS\n TK_LIBRARY\n@@ -776,7 +770,7 @@ PKG_CONFIG_PATH\n PKG_CONFIG\n HAVE_NATIVE_GCORE_TARGET\n TARGET_OBS\n-RPATH_ENVVAR\n+subdirs\n GDB_DATADIR\n DEBUGDIR\n MAKEINFO_EXTRA_FLAGS\n@@ -882,7 +876,6 @@ with_gdb_datadir\n with_relocated_sources\n with_auto_load_dir\n with_auto_load_safe_path\n-enable_shared\n enable_targets\n enable_64_bit_bfd\n enable_gdbmi\n@@ -963,7 +956,8 @@ DEBUGINFOD_LIBS\n YACC\n YFLAGS\n XMKMF'\n-ac_subdirs_all='gdbtk'\n+ac_subdirs_all='testsuite\n+gdbtk'\n \n # Initialize some variables set by options.\n ac_init_help=\n@@ -1589,7 +1583,6 @@ Optional Features:\n                           sometimes confusing) to the casual installer\n   --enable-plugins        Enable support for plugins\n   --disable-largefile     omit support for large files\n-  --enable-shared         build shared libraries [default=yes]\n   --enable-targets=TARGETS\n                           alternative target configurations\n   --enable-64-bit-bfd     64-bit support (on hosts with narrower word sizes)\n@@ -6623,34 +6616,9 @@ _ACEOF\n { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $with_auto_load_safe_path\" >&5\n $as_echo \"$with_auto_load_safe_path\" >&6; }\n \n-# Enable shared libraries.\n-# Check whether --enable-shared was given.\n-if test \"${enable_shared+set}\" = set; then :\n-  enableval=$enable_shared;\n-else\n-  enable_shared=yes\n-fi\n \n \n-# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n-# such that we can find the shared libraries in the build tree.\n-if test $enable_shared = no; then\n-  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n-  # platform.\n-  RPATH_ENVVAR=RPATH_ENVVAR\n-else\n-  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n-  RPATH_ENVVAR=LD_LIBRARY_PATH\n-  # The following exceptions are taken from Libtool 1.4.3.\n-  case $host_os in\n-    aix*)\n-      if test $host_cpu != ia64; then\n-        RPATH_ENVVAR=LIBPATH\n-      fi ;;\n-    darwin* | rhapsody*)\n-      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n-  esac\n-fi\n+subdirs=\"$subdirs testsuite\"\n \n \n # Check whether to support alternative target configurations\n@@ -18325,9 +18293,7 @@ $as_echo \"${private_dir}\" >&6; }\n \t  CONFIG_OBS=\"${CONFIG_OBS} gdbres.o\"\n \tfi\n \n-\n-\n-subdirs=\"$subdirs gdbtk\"\n+        subdirs=\"$subdirs gdbtk\"\n \n     fi\n fi\n@@ -19209,7 +19175,6 @@ fi\n \n \n \n-\n # If nativefile (NAT_FILE) is not set in configure.nat, we link to an\n # empty version.\n \n@@ -19841,44 +19806,6 @@ ac_config_files=\"$ac_config_files gcore\"\n \n ac_config_files=\"$ac_config_files Makefile gdb-gdb.gdb gdb-gdb.py doc/Makefile data-directory/Makefile\"\n \n-# Transform the name of some programs for the testsuite/lib/pdtrace\n-# test tool.\n-\n-  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n-  STRIP_TRANSFORM_NAME=`echo strip | sed -e \"$gdb_ac_transform\"`\n-  if test \"x$STRIP_TRANSFORM_NAME\" = x; then\n-     STRIP_TRANSFORM_NAME=strip\n-  fi\n-\n-\n-\n-  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n-  READELF_TRANSFORM_NAME=`echo readelf | sed -e \"$gdb_ac_transform\"`\n-  if test \"x$READELF_TRANSFORM_NAME\" = x; then\n-     READELF_TRANSFORM_NAME=readelf\n-  fi\n-\n-\n-\n-  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n-  GAS_TRANSFORM_NAME=`echo as | sed -e \"$gdb_ac_transform\"`\n-  if test \"x$GAS_TRANSFORM_NAME\" = x; then\n-     GAS_TRANSFORM_NAME=as\n-  fi\n-\n-\n-\n-  gdb_ac_transform=`echo \"$program_transform_name\" | sed -e 's/\\\\$\\\\$/\\\\$/g'`\n-  NM_TRANSFORM_NAME=`echo nm | sed -e \"$gdb_ac_transform\"`\n-  if test \"x$NM_TRANSFORM_NAME\" = x; then\n-     NM_TRANSFORM_NAME=nm\n-  fi\n-\n-\n-ac_config_files=\"$ac_config_files testsuite/lib/pdtrace\"\n-\n-ac_config_files=\"$ac_config_files testsuite/Makefile\"\n-\n \n cat >confcache <<\\_ACEOF\n # This file is a shell script that caches the results of configure\n@@ -20608,8 +20535,6 @@ do\n     \"gdb-gdb.py\") CONFIG_FILES=\"$CONFIG_FILES gdb-gdb.py\" ;;\n     \"doc/Makefile\") CONFIG_FILES=\"$CONFIG_FILES doc/Makefile\" ;;\n     \"data-directory/Makefile\") CONFIG_FILES=\"$CONFIG_FILES data-directory/Makefile\" ;;\n-    \"testsuite/lib/pdtrace\") CONFIG_FILES=\"$CONFIG_FILES testsuite/lib/pdtrace\" ;;\n-    \"testsuite/Makefile\") CONFIG_FILES=\"$CONFIG_FILES testsuite/Makefile\" ;;\n \n   *) as_fn_error $? \"invalid argument: \\`$ac_config_target'\" \"$LINENO\" 5;;\n   esac\n@@ -21240,7 +21165,6 @@ $as_echo \"$as_me: executing $ac_file commands\" >&6;}\n     \"depdir\":C) $SHELL $ac_aux_dir/mkinstalldirs $DEPDIR ;;\n     \"nm.h\":L) echo > stamp-nmh ;;\n     \"gcore\":F) chmod +x gcore ;;\n-    \"testsuite/lib/pdtrace\":F) chmod +x testsuite/lib/pdtrace ;;\n \n   esac\n done # for ac_tag"
    },
    {
      "sha": "b8c79bcac9abf78f42a156c5c4b03f4c32c329a0",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 34,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=a100a94530eb85991fa736ea5037cf8b83190ae6",
      "patch": "@@ -153,31 +153,7 @@ AC_DEFINE_DIR(AUTO_LOAD_SAFE_PATH, escape_dir,\n \t      [Directories safe to hold auto-loaded files.])\n AC_MSG_RESULT([$with_auto_load_safe_path])\n \n-# Enable shared libraries.\n-AC_ARG_ENABLE(shared,\n-AS_HELP_STRING([--enable-shared], [build shared libraries [default=yes]]),,\n-  enable_shared=yes)\n-\n-# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n-# such that we can find the shared libraries in the build tree.\n-if test $enable_shared = no; then\n-  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n-  # platform.\n-  RPATH_ENVVAR=RPATH_ENVVAR\n-else\n-  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n-  RPATH_ENVVAR=LD_LIBRARY_PATH\n-  # The following exceptions are taken from Libtool 1.4.3.\n-  case $host_os in\n-    aix*)\n-      if test $host_cpu != ia64; then\n-        RPATH_ENVVAR=LIBPATH\n-      fi ;;\n-    darwin* | rhapsody*)\n-      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n-  esac\n-fi\n-AC_SUBST(RPATH_ENVVAR)\n+AC_CONFIG_SUBDIRS(testsuite)\n \n # Check whether to support alternative target configurations\n AC_ARG_ENABLE(targets,\n@@ -2195,7 +2171,6 @@ else\n   LIBCTF=\n   CTF_DEPS=\n fi\n-AC_SUBST(enable_libctf)\n AC_SUBST(LIBCTF)\n AC_SUBST(CTF_DEPS)\n \n@@ -2261,13 +2236,5 @@ GDB_AC_TRANSFORM([gdb], [GDB_TRANSFORM_NAME])\n GDB_AC_TRANSFORM([gcore], [GCORE_TRANSFORM_NAME])\n AC_CONFIG_FILES([gcore], [chmod +x gcore])\n AC_CONFIG_FILES([Makefile gdb-gdb.gdb gdb-gdb.py doc/Makefile data-directory/Makefile])\n-# Transform the name of some programs for the testsuite/lib/pdtrace\n-# test tool.\n-GDB_AC_TRANSFORM(strip, STRIP_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(readelf, READELF_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(as, GAS_TRANSFORM_NAME)\n-GDB_AC_TRANSFORM(nm, NM_TRANSFORM_NAME)\n-AC_CONFIG_FILES([testsuite/lib/pdtrace], [chmod +x testsuite/lib/pdtrace])\n-AC_CONFIG_FILES([testsuite/Makefile])\n \n AC_OUTPUT"
    },
    {
      "sha": "20cb3dae2ed14d7f91ce999b0521113dea711354",
      "filename": "gdb/testsuite/Makefile.in",
      "status": "modified",
      "additions": 8,
      "deletions": 5,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/Makefile.in?ref=a100a94530eb85991fa736ea5037cf8b83190ae6",
      "patch": "@@ -348,14 +348,17 @@ clean mostlyclean:\n \n distclean maintainer-clean realclean: clean\n \t-rm -f *~ core\n-\t-rm -f Makefile *-init.exp\n+\t-rm -f Makefile config.status *-init.exp\n \t-rm -fr *.log summary detail *.plog *.sum *.psum site.*\n \n-Makefile : Makefile.in ../config.status $(host_makefile_frag)\n-\tcd .. && $(SHELL) ./config.status testsuite/Makefile\n+Makefile : Makefile.in config.status $(host_makefile_frag)\n+\t$(SHELL) config.status Makefile\n \n-lib/pdtrace: pdtrace.in ../config.status\n-\tcd .. && $(SHELL) ./config.status testsuite/lib/pdtrace\n+lib/pdtrace: pdtrace.in config.status\n+\t$(SHELL) config.status lib/pdtrace\n+\n+config.status: configure\n+\t$(SHELL) config.status --recheck\n \n TAGS: force\n \tfind $(srcdir) -name '*.exp' -print | \\"
    },
    {
      "sha": "c5d3ba527a766843fbeb9f26c72a2bda46595214",
      "filename": "gdb/testsuite/aclocal.m4",
      "status": "added",
      "additions": 37,
      "deletions": 0,
      "changes": 37,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/aclocal.m4?ref=a100a94530eb85991fa736ea5037cf8b83190ae6",
      "patch": "@@ -0,0 +1,37 @@\n+m4_include(../../config/acx.m4)\n+m4_include(../../config/override.m4)\n+m4_include(../../config/enable.m4)\n+m4_include(../transform.m4)\n+\n+# AM_CONDITIONAL                                            -*- Autoconf -*-\n+\n+# Copyright (C) 1997, 2000, 2001, 2003, 2004, 2005\n+# Free Software Foundation, Inc.\n+#\n+# This file is free software; the Free Software Foundation\n+# gives unlimited permission to copy and/or distribute it,\n+# with or without modifications, as long as this notice is preserved.\n+\n+# serial 7\n+\n+# AM_CONDITIONAL(NAME, SHELL-CONDITION)\n+# -------------------------------------\n+# Define a conditional.\n+AC_DEFUN([AM_CONDITIONAL],\n+[AC_PREREQ(2.52)dnl\n+ ifelse([$1], [TRUE],  [AC_FATAL([$0: invalid condition: $1])],\n+\t[$1], [FALSE], [AC_FATAL([$0: invalid condition: $1])])dnl\n+AC_SUBST([$1_TRUE])\n+AC_SUBST([$1_FALSE])\n+if $2; then\n+  $1_TRUE=\n+  $1_FALSE='#'\n+else\n+  $1_TRUE='#'\n+  $1_FALSE=\n+fi\n+AC_CONFIG_COMMANDS_PRE(\n+[if test -z \"${$1_TRUE}\" && test -z \"${$1_FALSE}\"; then\n+  AC_MSG_ERROR([[conditional \"$1\" was never defined.\n+Usually this means the macro was only invoked conditionally.]])\n+fi])])"
    },
    {
      "sha": "3b0d4ed8ad352b9859c728746134e4d35120e497",
      "filename": "gdb/testsuite/configure",
      "status": "added",
      "additions": 4806,
      "deletions": 0,
      "changes": 4806,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/configure?ref=a100a94530eb85991fa736ea5037cf8b83190ae6"
    },
    {
      "sha": "b15dbcb1bbdf94d0034fe60baa76232fb3872544",
      "filename": "gdb/testsuite/configure.ac",
      "status": "added",
      "additions": 99,
      "deletions": 0,
      "changes": 99,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a100a94530eb85991fa736ea5037cf8b83190ae6/gdb/testsuite/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/configure.ac?ref=a100a94530eb85991fa736ea5037cf8b83190ae6",
      "patch": "@@ -0,0 +1,99 @@\n+#                                                       -*- Autoconf -*-\n+# Process this file with autoconf to produce a configure script.\n+\n+# Copyright 2002-2021 Free Software Foundation, Inc.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+AC_INIT\n+AC_CONFIG_SRCDIR([gdb.base])\n+\n+AC_CANONICAL_BUILD\n+AC_CANONICAL_HOST\n+AC_CANONICAL_TARGET\n+\n+ACX_NONCANONICAL_TARGET\n+\n+# Enable gdbtk.\n+AC_ARG_ENABLE(gdbtk,\n+[  --enable-gtk            enable gdbtk graphical user interface (GUI)],,\n+  [if test -d $srcdir/../gdbtk && test -d $srcdir/gdb.gdbtk; then\n+    enable_gdbtk=yes\n+  else\n+    enable_gdbtk=no\n+  fi])\n+# We unconditionally disable gdbtk tests on selected platforms.\n+case $host_os in\n+  go32* | windows*)\n+    enable_gdbtk=no ;;\n+esac\n+\n+# Add gdbtk tests when appropriate.\n+if test $enable_gdbtk = yes; then\n+   AC_CONFIG_SUBDIRS(gdb.gdbtk)\n+fi\n+\n+GCC_ENABLE([libctf], [yes], [], [Handle .ctf type-info sections])\n+AC_SUBST(enable_libctf)\n+\n+# Enable shared libraries.\n+AC_ARG_ENABLE(shared,\n+[  --enable-shared         build shared libraries [deault=yes]],,\n+  enable_shared=yes)\n+\n+# If we have shared libraries, try to set RPATH_ENVVAR reasonably,\n+# such that we can find the shared libraries in the build tree.\n+if test $enable_shared = no; then\n+  # The variable `RPATH_ENVVAR' itself is not likely to be used on any\n+  # platform.\n+  RPATH_ENVVAR=RPATH_ENVVAR\n+else\n+  # The variable `LD_LIBRARY_PATH' is used on most platforms.\n+  RPATH_ENVVAR=LD_LIBRARY_PATH\n+  # The following exceptions are taken from Libtool 1.4.3.\n+  case $host_os in\n+    aix*)\n+      if test $host_cpu != ia64; then\n+        RPATH_ENVVAR=LIBPATH\n+      fi ;;\n+    darwin* | rhapsody*)\n+      RPATH_ENVVAR=DYLD_LIBRARY_PATH ;;\n+  esac\n+fi\n+AC_SUBST(RPATH_ENVVAR)\n+\n+AC_CHECK_HEADERS(pthread.h)\n+\n+AC_EXEEXT\n+\n+if test \"${build}\" = \"${host}\" -a \"${host}\" = \"${target}\"; then\n+   case \"${host}\" in\n+     *gnu*)\n+       EXTRA_RULES=read1\n+       ;;\n+   esac\n+fi\n+AC_SUBST(EXTRA_RULES)\n+\n+# Transform the name of some programs and generate the lib/pdtrace\n+# test tool.\n+AC_ARG_PROGRAM\n+GDB_AC_TRANSFORM(strip, STRIP_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(readelf, READELF_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(as, GAS_TRANSFORM_NAME)\n+GDB_AC_TRANSFORM(nm, NM_TRANSFORM_NAME)\n+AC_CONFIG_FILES([lib/pdtrace], [chmod +x lib/pdtrace])\n+AC_CONFIG_FILES([Makefile])\n+\n+AC_OUTPUT"
    }
  ]
}