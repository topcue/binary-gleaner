{
  "sha": "f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjVlOThiN2Q2NzUyMzBmZGZlZTc5NGFmYTVlYmFlMWZiYzI4OTNhMg==",
  "commit": {
    "author": {
      "name": "Eric Botcazou",
      "email": "ebotcazou@gcc.gnu.org",
      "date": "2021-04-23T17:07:59Z"
    },
    "committer": {
      "name": "Eric Botcazou",
      "email": "ebotcazou@gcc.gnu.org",
      "date": "2021-04-23T17:13:52Z"
    },
    "message": "Fix type of .persistent.bss section\n\nThe change implementing the .persistent family of sections broke the\nexisting support for the .persistent.bss section in the compiler:\n\nint a __attribute__ ((section (\".persistent.bss\")));\n\nt.s: Assembler messages:\nt.s:4: Warning: setting incorrect section type for .persistent.bss\n\nThe compiler encodes it as @nobits but the assembler expects @progbits.\nThe assembler is incorrect and should treat the section like the compiler.\n\nbfd/\n\t* elf.c (special_sections_p): Add .persistent.bss.\ngas/\n\t* testsuite/gas/elf/section25.d: Run it everywhere.\n\t* testsuite/gas/elf/section26.d: Likewise.\n\t* testsuite/gas/elf/section26.s: Add test for .persistent.bss.",
    "tree": {
      "sha": "efb4c02527179124846ccd92779ac8d41dd1a1c1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/efb4c02527179124846ccd92779ac8d41dd1a1c1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "d039200a7ee8ac170afbdc3b987af553c07fb6a3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d039200a7ee8ac170afbdc3b987af553c07fb6a3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d039200a7ee8ac170afbdc3b987af553c07fb6a3"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 22,
    "deletions": 2
  },
  "files": [
    {
      "sha": "701357c3ad7d8c3f416d7d1158bcf26c4253b97f",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -1,3 +1,7 @@\n+2021-04-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* elf.c (special_sections_p): Add .persistent.bss.\n+\n 2021-04-23  Jan Beulich  <jbeulich@suse.com>\n \n \t* elf32-i386.c (elf_howto_table): R_386_TLS_DESC_CALL has zero"
    },
    {
      "sha": "4846b7bd47f98fd52a2aee86bdc6486bd9a7964f",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -2725,6 +2725,7 @@ static const struct bfd_elf_special_section special_sections_n[] =\n \n static const struct bfd_elf_special_section special_sections_p[] =\n {\n+  { STRING_COMMA_LEN (\".persistent.bss\"), 0, SHT_NOBITS,\tSHF_ALLOC + SHF_WRITE },\n   { STRING_COMMA_LEN (\".persistent\"),\t -2, SHT_PROGBITS,\tSHF_ALLOC + SHF_WRITE },\n   { STRING_COMMA_LEN (\".preinit_array\"), -2, SHT_PREINIT_ARRAY, SHF_ALLOC + SHF_WRITE },\n   { STRING_COMMA_LEN (\".plt\"),\t\t  0, SHT_PROGBITS,\tSHF_ALLOC + SHF_EXECINSTR },"
    },
    {
      "sha": "696d728d8c7df753e5f3ece688c776259f634aaf",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -1,3 +1,9 @@\n+2021-04-23  Eric Botcazou<ebotcazou@adacore.com>\n+\n+\t* testsuite/gas/elf/section25.d: Run it everywhere.\n+\t* testsuite/gas/elf/section26.d: Likewise.\n+\t* testsuite/gas/elf/section26.s: Add test for .persistent.bss.\n+\n 2021-04-23  J\u00e9r\u00f4me Gardou  <jerome.gardou@gmail.com>\n \n \t* config/obj-coff-seh.c (obj_coff_seh_pushframe): Allow an"
    },
    {
      "sha": "fa09b85074fa14092ee03ec2e7142ac90df269ce",
      "filename": "gas/testsuite/gas/elf/section25.d",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section25.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section25.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/section25.d?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -1,7 +1,9 @@\n #name: sections 25 (.noinit)\n-#target: [supports_noinit_section]\n #source: section25.s\n #readelf: -S --wide\n+# The h8300 port issues a warning message for\n+# new sections created without atrributes.\n+#xfail: h8300-*\n \n #...\n   \\[..\\] .noinit[ \t]+NOBITS[ \t]+[0-9a-f]+ [0-9a-f]+ [0-9a-f]+ 00  WA .*"
    },
    {
      "sha": "f08f444e9c925ffee2ce6858f7e2dea23fa8bf51",
      "filename": "gas/testsuite/gas/elf/section26.d",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section26.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section26.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/section26.d?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -1,12 +1,16 @@\n #name: sections 26 (.persistent)\n-#target: [supports_persistent_section]\n #source: section26.s\n #readelf: -S --wide\n+# The h8300 port issues a warning message for\n+# new sections created without atrributes.\n+#xfail: h8300-*\n \n #...\n   \\[..\\] .persistent[ \t]+PROGBITS[ \t]+[0-9a-f]+ [0-9a-f]+ [0-9a-f]+ 00  WA .*\n #...\n   \\[..\\] .persistent.foo[ \t]+PROGBITS[ \t]+[0-9a-f]+ [0-9a-f]+ [0-9a-f]+ 00  WA .*\n+#...\n+  \\[..\\] .persistent.bss[ \t]+NOBITS[ \t]+[0-9a-f]+ [0-9a-f]+ [0-9a-f]+ 00  WA .*\n #...\n   \\[..\\] .gnu.linkonce.p.bar[ \t]+PROGBITS[ \t]+[0-9a-f]+ [0-9a-f]+ [0-9a-f]+ 00  WA .*\n #pass"
    },
    {
      "sha": "aefe15d4c2c33904985f078c180d7e073d5ec410",
      "filename": "gas/testsuite/gas/elf/section26.s",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section26.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5e98b7d675230fdfee794afa5ebae1fbc2893a2/gas/testsuite/gas/elf/section26.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/elf/section26.s?ref=f5e98b7d675230fdfee794afa5ebae1fbc2893a2",
      "patch": "@@ -4,5 +4,8 @@\n .section .persistent.foo\n .word 0\n \n+.section .persistent.bss\n+.word 0\n+\n .section .gnu.linkonce.p.bar\n .word 0"
    }
  ]
}