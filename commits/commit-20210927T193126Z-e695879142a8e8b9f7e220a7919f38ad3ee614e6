{
  "sha": "e695879142a8e8b9f7e220a7919f38ad3ee614e6",
  "node_id": "C_kwDOANOeidoAKGU2OTU4NzkxNDJhOGU4YjlmN2UyMjBhNzkxOWYzOGFkM2VlNjE0ZTY",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-09-27T19:31:21Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2021-09-27T19:31:26Z"
    },
    "message": "libctf, testsuite: fix various warnings in tests\n\nThese warnings are all off by default, but if they do fire you get\nspurious ERRORs when running make check-libctf.\n\nlibctf/ChangeLog\n2021-09-27  Nick Alcock  <nick.alcock@oracle.com>\n\n\t* testsuite/libctf-lookup/enum-symbol.c: Remove unused label.\n\t* testsuite/libctf-lookup/conflicting-type-syms.c: Remove unused\n\tvariables.\n\t* testsuite/libctf-regression/pptrtab.c: Likewise.\n\t* testsuite/libctf-regression/type-add-unnamed-struct.c: Likewise.\n\t* testsuite/libctf-writable/pptrtab.c: Likewise.\n\t* testsuite/libctf-writable/reserialize-strtab-corruption.c:\n\tLikewise.\n\t* testsuite/libctf-regression/nonstatic-var-section-ld-r.c: Fix\n\tformat string.\n\t* testsuite/libctf-regression/nonstatic-var-section-ld.c:\n\tLikewise.\n\t* testsuite/libctf-regression/nonstatic-var-section-ld.lk: Adjust.\n\t* testsuite/libctf-writable/symtypetab-nonlinker-writeout.c: Fix\n\tinitializer.",
    "tree": {
      "sha": "c389be608e0687587cde8916d165e291f7285f97",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c389be608e0687587cde8916d165e291f7285f97"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e695879142a8e8b9f7e220a7919f38ad3ee614e6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e695879142a8e8b9f7e220a7919f38ad3ee614e6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e695879142a8e8b9f7e220a7919f38ad3ee614e6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e695879142a8e8b9f7e220a7919f38ad3ee614e6/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b62d5edd0a5794a6ba142ed66dbba366546dc307",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b62d5edd0a5794a6ba142ed66dbba366546dc307",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b62d5edd0a5794a6ba142ed66dbba366546dc307"
    }
  ],
  "stats": {
    "total": 46,
    "additions": 28,
    "deletions": 18
  },
  "files": [
    {
      "sha": "e66cf2a88ea4d8b7cdca3f733bc0282d94e003e1",
      "filename": "libctf/ChangeLog",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ChangeLog?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -1,3 +1,21 @@\n+2021-09-27  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* testsuite/libctf-lookup/enum-symbol.c: Remove unused label.\n+\t* testsuite/libctf-lookup/conflicting-type-syms.c: Remove unused\n+\tvariables.\n+\t* testsuite/libctf-regression/pptrtab.c: Likewise.\n+\t* testsuite/libctf-regression/type-add-unnamed-struct.c: Likewise.\n+\t* testsuite/libctf-writable/pptrtab.c: Likewise.\n+\t* testsuite/libctf-writable/reserialize-strtab-corruption.c:\n+\tLikewise.\n+\t* testsuite/libctf-regression/nonstatic-var-section-ld-r.c: Fix\n+\tformat string.\n+\t* testsuite/libctf-regression/nonstatic-var-section-ld.c:\n+\tLikewise.\n+\t* testsuite/libctf-regression/nonstatic-var-section-ld.lk: Adjust.\n+\t* testsuite/libctf-writable/symtypetab-nonlinker-writeout.c: Fix\n+\tinitializer.\n+\n 2021-09-27  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-open.c (ctf_bufopen_internal): Don't complain about corrupt"
    },
    {
      "sha": "239b8775964b41bf32483c9e192dbcd5b70dd800",
      "filename": "libctf/testsuite/libctf-lookup/conflicting-type-syms.c",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-lookup/conflicting-type-syms.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-lookup/conflicting-type-syms.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-lookup/conflicting-type-syms.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -12,9 +12,6 @@ main (int argc, char *argv[])\n   int err;\n   ctf_id_t a, b, ignore1, ignore2, tmp;\n   char *foo;\n-  ctf_next_t *i = NULL;\n-  const char *name;\n-  int val;\n \n   if (argc != 2)\n     {"
    },
    {
      "sha": "1244c9004345bf901a35d4544a9d67d8ba70f5f0",
      "filename": "libctf/testsuite/libctf-lookup/enum-symbol.c",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-lookup/enum-symbol.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-lookup/enum-symbol.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-lookup/enum-symbol.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -57,9 +57,6 @@ main (int argc, char *argv[])\n   fprintf (stderr, \"%s: Symbol re-lookup error (caching bug): %s\\n\", argv[0],\n \t   ctf_errmsg (err));\n   return 1;\n- err:\n-  fprintf (stderr, \"Lookup failed: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n-  return 1;\n  nerr:\n   fprintf (stderr, \"iteration failed: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n   return 1;"
    },
    {
      "sha": "6ae2ea53042db059f316c1220273fd002e91a2fd",
      "filename": "libctf/testsuite/libctf-regression/nonstatic-var-section-ld-r.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld-r.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld-r.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-regression/nonstatic-var-section-ld-r.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -31,12 +31,12 @@ main (int argc, char *argv[])\n      ld -r link.  */\n \n   if ((foo_type = ctf_lookup_variable (fp, \"foo\")) == CTF_ERR)\n-    printf (\"Cannot look up foo\\n\", ctf_errmsg (ctf_errno (fp)));\n+    printf (\"Cannot look up foo: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n   else\n     printf (\"foo is of type %lx\\n\", foo_type);\n \n   if ((bar_type = ctf_lookup_variable (fp, \"bar\")) == CTF_ERR)\n-    printf (\"Cannot look up bar\\n\", ctf_errmsg (ctf_errno (fp)));\n+    printf (\"Cannot look up bar: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n   else\n     printf (\"bar is of type %lx\\n\", bar_type);\n "
    },
    {
      "sha": "93988eb1e8d87e135d32fc948c66f2bc9294dd5b",
      "filename": "libctf/testsuite/libctf-regression/nonstatic-var-section-ld.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -30,12 +30,12 @@ main (int argc, char *argv[])\n      should have been erased.  */\n \n   if ((foo_type = ctf_lookup_variable (fp, \"foo\")) == CTF_ERR)\n-    printf (\"Cannot look up foo\\n\", ctf_errmsg (ctf_errno (fp)));\n+    printf (\"Cannot look up foo: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n   else\n     printf (\"foo is of type %lx\\n\", foo_type);\n \n   if ((bar_type = ctf_lookup_variable (fp, \"bar\")) == CTF_ERR)\n-    printf (\"Cannot look up bar\\n\", ctf_errmsg (ctf_errno (fp)));\n+    printf (\"Cannot look up bar: %s\\n\", ctf_errmsg (ctf_errno (fp)));\n   else\n     printf (\"bar is of type %lx\\n\", bar_type);\n "
    },
    {
      "sha": "2ea4d323bfcfcb9389074bbe758752393c73c137",
      "filename": "libctf/testsuite/libctf-regression/nonstatic-var-section-ld.lk",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.lk",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.lk",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-regression/nonstatic-var-section-ld.lk?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -2,5 +2,5 @@\n # link: on\n # link_flags: -Wl,--ctf-variables\n foo is of type [0-9a-f]*\n-Cannot look up bar\n+Cannot look up bar: No type information available for symbol.\n foo missing from the data object section"
    },
    {
      "sha": "2ef5f9c5cc07310a7db58c6c6e0f468c717d29dc",
      "filename": "libctf/testsuite/libctf-regression/pptrtab.c",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/pptrtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/pptrtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-regression/pptrtab.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -10,7 +10,6 @@ main (int argc, char *argv[])\n   ctf_next_t *i = NULL;\n   ctf_id_t type;\n   const char *arcname;\n-  char *type_name;\n   int err;\n \n   if (argc != 2)"
    },
    {
      "sha": "cf10804814ccccd7c89723be1de5f810af8de7ad",
      "filename": "libctf/testsuite/libctf-regression/type-add-unnamed-struct.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/type-add-unnamed-struct.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-regression/type-add-unnamed-struct.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-regression/type-add-unnamed-struct.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -8,10 +8,8 @@ main (int argc, char *argv[])\n   ctf_dict_t *fp;\n   ctf_archive_t *ctf;\n   ctf_dict_t *dyn;\n-  ctf_next_t *i = NULL;\n   ctf_id_t type;\n   ctf_id_t newtype;\n-  const char *memb;\n   ctf_membinfo_t mi;\n   const char *membs[] = { \"bar\", \"baz\", \"foo\", NULL };\n   const char **walk;"
    },
    {
      "sha": "b8d1e63b9975353bebfbb0bfe0b6e960d4ae0b99",
      "filename": "libctf/testsuite/libctf-writable/pptrtab.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/pptrtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/pptrtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-writable/pptrtab.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -7,7 +7,7 @@ main (int argc, char *argv[])\n {\n   ctf_dict_t *pfp;\n   ctf_dict_t *cfp;\n-  ctf_id_t base, base2, ptr, ptr2, type, last_type;\n+  ctf_id_t base, base2, ptr, type, last_type;\n   ctf_encoding_t encoding = { CTF_INT_SIGNED, 0, sizeof (int) };\n   ctf_encoding_t encoding2 = { CTF_INT_SIGNED, 0, sizeof (long) };\n   char *type_name;"
    },
    {
      "sha": "2c9ec8d9ed2d27d6c9353079baa3d28144c4b045",
      "filename": "libctf/testsuite/libctf-writable/reserialize-strtab-corruption.c",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/reserialize-strtab-corruption.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/reserialize-strtab-corruption.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-writable/reserialize-strtab-corruption.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -13,7 +13,6 @@ main (int argc, char *argv[])\n   ctf_snapshot_id_t snap;\n   unsigned char *foo;\n   size_t foo_size;\n-  const char *bar;\n   int err;\n   char name[64];\n "
    },
    {
      "sha": "7a2b88d6dfa124764626083bc68a47a580902939",
      "filename": "libctf/testsuite/libctf-writable/symtypetab-nonlinker-writeout.c",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/symtypetab-nonlinker-writeout.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e695879142a8e8b9f7e220a7919f38ad3ee614e6/libctf/testsuite/libctf-writable/symtypetab-nonlinker-writeout.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/testsuite/libctf-writable/symtypetab-nonlinker-writeout.c?ref=e695879142a8e8b9f7e220a7919f38ad3ee614e6",
      "patch": "@@ -174,10 +174,12 @@ try_maybe_reporting (int report)\n   } *expected;\n   struct ctf_symtype_expected expected_obj[] = { { \"data_a\", base2 },\n \t\t\t\t\t\t { \"data_b\", base3 },\n-\t\t\t\t\t\t { \"data_c\", base }, NULL };\n+\t\t\t\t\t\t { \"data_c\", base },\n+\t\t\t\t\t\t { NULL, 0 } };\n   struct ctf_symtype_expected expected_func[] = { { \"func_a\", func2 },\n \t\t\t\t\t\t  { \"func_b\", func3 },\n-\t\t\t\t\t\t  { \"func_c\", func }, NULL };\n+\t\t\t\t\t\t  { \"func_c\", func },\n+\t\t\t\t\t\t  { NULL, 0 } };\n   expected = expected_obj;\n \n   while ((symtype = ctf_symbol_next (fp, &i, &symname, 0)) != CTF_ERR)"
    }
  ]
}