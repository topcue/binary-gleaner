{
  "sha": "8adb37b9c039168ed8805c5edffc34e12d84ff04",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OGFkYjM3YjljMDM5MTY4ZWQ4ODA1YzVlZGZmYzM0ZTEyZDg0ZmYwNA==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:51Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:03Z"
    },
    "message": "gdbserver: turn target op 'mourn' into a method\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's mourn op into a method of\n\tprocess_target.\n\n\t* target.h (struct process_stratum_target): Remove the target op.\n\t(class process_target): Add the target op.\n\n\tUpdate the derived classes and callers below.\n\n\t* target.cc (target_mourn_inferior): Update.\n\t* linux-low.cc (linux_target_ops): Update.\n\t(linux_mourn): Turn into ...\n\t(linux_process_target::mourn): ... this.\n\t(handle_extended_wait): Update.\n\t(linux_process_target::kill): Update.\n\t(linux_process_target::detach): Update.\n\t* linux-low.h (class linux_process_target): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t(lynx_mourn): Turn into ...\n\t(lynx_process_target::mourn): ... this.\n\t* lynx-low.h (class lynx_process_target): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t(nto_mourn): Turn into ...\n\t(nto_process_target::mourn): ... this.\n\t* nto-low.h (class nto_process_target): Update.\n\t* win32-low.cc (win32_target_ops): Update.\n\t(win32_mourn): Turn into ...\n\t(win32_process_target::mourn): ... this.\n\t* win32-low.h (class win32_process_target): Update.",
    "tree": {
      "sha": "3181f40acbefa53c823444bdb8280d0eaedd2f54",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3181f40acbefa53c823444bdb8280d0eaedd2f54"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8adb37b9c039168ed8805c5edffc34e12d84ff04",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8adb37b9c039168ed8805c5edffc34e12d84ff04",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8adb37b9c039168ed8805c5edffc34e12d84ff04",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8adb37b9c039168ed8805c5edffc34e12d84ff04/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9061c9cfb3a0d4105873dbd5b411d75f475e0bf1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9061c9cfb3a0d4105873dbd5b411d75f475e0bf1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9061c9cfb3a0d4105873dbd5b411d75f475e0bf1"
    }
  ],
  "stats": {
    "total": 79,
    "additions": 56,
    "deletions": 23
  },
  "files": [
    {
      "sha": "eac95ee81ec06d67a2f17f840edb70f1c1321d6a",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -1,3 +1,34 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's mourn op into a method of\n+\tprocess_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target op.\n+\t(class process_target): Add the target op.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* target.cc (target_mourn_inferior): Update.\n+\t* linux-low.cc (linux_target_ops): Update.\n+\t(linux_mourn): Turn into ...\n+\t(linux_process_target::mourn): ... this.\n+\t(handle_extended_wait): Update.\n+\t(linux_process_target::kill): Update.\n+\t(linux_process_target::detach): Update.\n+\t* linux-low.h (class linux_process_target): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t(lynx_mourn): Turn into ...\n+\t(lynx_process_target::mourn): ... this.\n+\t* lynx-low.h (class lynx_process_target): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t(nto_mourn): Turn into ...\n+\t(nto_process_target::mourn): ... this.\n+\t* nto-low.h (class nto_process_target): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\t(win32_mourn): Turn into ...\n+\t(win32_process_target::mourn): ... this.\n+\t* win32-low.h (class win32_process_target): Update.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's detach op into a method of"
    },
    {
      "sha": "66790ee5ce1cf5112a1555fed6588e0671bdcc7f",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -270,7 +270,6 @@ static int linux_wait_for_event_filtered (ptid_t wait_ptid, ptid_t filter_ptid,\n \t\t\t\t\t  int *wstat, int options);\n static int linux_wait_for_event (ptid_t ptid, int *wstat, int options);\n static struct lwp_info *add_lwp (ptid_t ptid);\n-static void linux_mourn (struct process_info *process);\n static int linux_stopped_by_watchpoint (void);\n static void mark_lwp_dead (struct lwp_info *lwp, int wstat);\n static int lwp_is_marked_dead (struct lwp_info *lwp);\n@@ -707,7 +706,7 @@ handle_extended_wait (struct lwp_info **orig_event_lwp, int wstat)\n       syscalls_to_catch = std::move (proc->syscalls_to_catch);\n \n       /* Delete the execing process and all its threads.  */\n-      linux_mourn (proc);\n+      the_target->pt->mourn (proc);\n       current_thread = NULL;\n \n       /* Create a new process/lwp/thread.  */\n@@ -1413,7 +1412,7 @@ linux_process_target::kill (process_info *process)\n   else\n     kill_wait_lwp (lwp);\n \n-  the_target->mourn (process);\n+  mourn (process);\n \n   /* Since we presently can only stop all lwps of all processes, we\n      need to unstop lwps of other processes.  */\n@@ -1634,7 +1633,7 @@ linux_process_target::detach (process_info *process)\n   main_lwp = find_lwp_pid (ptid_t (process->pid));\n   linux_detach_one_lwp (main_lwp);\n \n-  the_target->mourn (process);\n+  mourn (process);\n \n   /* Since we presently can only stop all lwps of all processes, we\n      need to unstop lwps of other processes.  */\n@@ -1644,8 +1643,8 @@ linux_process_target::detach (process_info *process)\n \n /* Remove all LWPs that belong to process PROC from the lwp list.  */\n \n-static void\n-linux_mourn (struct process_info *process)\n+void\n+linux_process_target::mourn (process_info *process)\n {\n   struct process_info_private *priv;\n \n@@ -7359,7 +7358,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-  linux_mourn,\n   linux_join,\n   linux_thread_alive,\n   linux_resume,"
    },
    {
      "sha": "8f43812766e6974545db534d49b32a9001407c1b",
      "filename": "gdbserver/linux-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/linux-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/linux-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.h?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -280,6 +280,8 @@ class linux_process_target : public process_target\n   int kill (process_info *proc) override;\n \n   int detach (process_info *proc) override;\n+\n+  void mourn (process_info *proc) override;\n };\n \n #define get_thread_lwp(thr) ((struct lwp_info *) (thread_target_data (thr)))"
    },
    {
      "sha": "558f4aea8dbf7228c0c64ee8e3faa95808738e90",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 4,
      "deletions": 5,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -529,7 +529,7 @@ lynx_process_target::kill (process_info *process)\n \n   lynx_ptrace (PTRACE_KILL, ptid, 0, 0, 0);\n   lynx_wait (ptid, &status, 0);\n-  the_target->mourn (process);\n+  mourn (process);\n   return 0;\n }\n \n@@ -541,14 +541,14 @@ lynx_process_target::detach (process_info *process)\n   ptid_t ptid = lynx_ptid_t (process->pid, 0);\n \n   lynx_ptrace (PTRACE_DETACH, ptid, 0, 0, 0);\n-  the_target->mourn (process);\n+  mourn (process);\n   return 0;\n }\n \n /* Implement the mourn target_ops method.  */\n \n-static void\n-lynx_mourn (struct process_info *proc)\n+void\n+lynx_process_target::mourn (struct process_info *proc)\n {\n   for_each_thread (proc->pid, remove_thread);\n \n@@ -726,7 +726,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  lynx_mourn,\n   lynx_join,\n   lynx_thread_alive,\n   lynx_resume,"
    },
    {
      "sha": "6cffe6d811ef122603474c4b8d616d0111d72fb8",
      "filename": "gdbserver/lynx-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/lynx-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/lynx-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.h?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -66,6 +66,8 @@ class lynx_process_target : public process_target\n   int kill (process_info *proc) override;\n \n   int detach (process_info *proc) override;\n+\n+  void mourn (process_info *proc) override;\n };\n \n /* The inferior's target description.  This is a global because the"
    },
    {
      "sha": "263f73d42c3c90a74e35364021ba86eba1888fc0",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -417,8 +417,8 @@ nto_process_target::detach (process_info *proc)\n   return 0;\n }\n \n-static void\n-nto_mourn (struct process_info *process)\n+void\n+nto_process_target::mourn (struct process_info *process)\n {\n   remove_process (process);\n }\n@@ -935,7 +935,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  nto_mourn,\n   NULL, /* nto_join */\n   nto_thread_alive,\n   nto_resume,"
    },
    {
      "sha": "69728b8279567615164530f14d2cc8ebad5a1c9f",
      "filename": "gdbserver/nto-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/nto-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/nto-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.h?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -56,6 +56,8 @@ class nto_process_target : public process_target\n   int kill (process_info *proc) override;\n \n   int detach (process_info *proc) override;\n+\n+  void mourn (process_info *proc) override;\n };\n \n /* The inferior's target description.  This is a global because the"
    },
    {
      "sha": "f6d8d927b8536c34443be47f733bf9a2a6580dd5",
      "filename": "gdbserver/target.cc",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/target.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/target.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.cc?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -231,7 +231,7 @@ target_wait (ptid_t ptid, struct target_waitstatus *status, int options)\n void\n target_mourn_inferior (ptid_t ptid)\n {\n-  (*the_target->mourn) (find_process_pid (ptid.pid ()));\n+  the_target->pt->mourn (find_process_pid (ptid.pid ()));\n }\n \n /* See target/target.h.  */"
    },
    {
      "sha": "d6b7377722a5c69492a0d83e8ab2ca6e8a9b5b48",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -70,10 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* The inferior process has died.  Do what is right.  */\n-\n-  void (*mourn) (struct process_info *proc);\n-\n   /* Wait for process PID to exit.  */\n \n   void (*join) (int pid);\n@@ -486,6 +482,9 @@ class process_target\n   /* Detach from process PROC.  Return -1 on failure, and 0 on\n      success.  */\n   virtual int detach (process_info *proc) = 0;\n+\n+  /* The inferior process has died.  Do what is right.  */\n+  virtual void mourn (process_info *proc) = 0;\n };\n \n extern process_stratum_target *the_target;"
    },
    {
      "sha": "9bccc1bb9c7cfb8cbaff078c00b310b3683e0881",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -878,8 +878,8 @@ win32_process_target::detach (process_info *process)\n   return 0;\n }\n \n-static void\n-win32_mourn (struct process_info *process)\n+void\n+win32_process_target::mourn (struct process_info *process)\n {\n   remove_process (process);\n }\n@@ -1839,7 +1839,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-  win32_mourn,\n   win32_join,\n   win32_thread_alive,\n   win32_resume,"
    },
    {
      "sha": "d07d99881e6fb0a6c79e6cfcb7c4729fd18fc40e",
      "filename": "gdbserver/win32-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/win32-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8adb37b9c039168ed8805c5edffc34e12d84ff04/gdbserver/win32-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.h?ref=8adb37b9c039168ed8805c5edffc34e12d84ff04",
      "patch": "@@ -115,6 +115,8 @@ class win32_process_target : public process_target\n   int kill (process_info *proc) override;\n \n   int detach (process_info *proc) override;\n+\n+  void mourn (process_info *proc) override;\n };\n \n /* Retrieve the context for this thread, if not already retrieved.  */"
    }
  ]
}