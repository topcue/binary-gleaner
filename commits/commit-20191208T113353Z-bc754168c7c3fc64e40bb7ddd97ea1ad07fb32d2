{
  "sha": "bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmM3NTQxNjhjN2MzZmM2NGU0MGJiN2RkZDk3ZWExYWQwN2ZiMzJkMg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-12-07T12:02:52Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-12-08T11:33:53Z"
    },
    "message": "Optional matching for run_dump_test\n\nThis adds an alternative to using #... in dump files, useful where we\nonly want to allow specific extra output.  DW_CFA_nop in CIEs and FDEs\nto pad out to required alignment (larger for 64-bit than 32-bit) is\nan example where these optional match patterns are useful.\n\nbinutils/\n\t* testsuite/lib/binutils-common.exp (regexp_diff): Support #?REGEXP.\nld/\n\t* testsuite/ld-elf/eh4.d: Match optional padding DW_CFA_nop in FDEs.\n\t* testsuite/ld-elf/eh5.d: Likewise, and extra CIEs emitted on\n\tembedded targets.",
    "tree": {
      "sha": "7ad59eaed63d19869be1254f850dac48a42f968a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7ad59eaed63d19869be1254f850dac48a42f968a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c14aab8cd3135a86915f4be4ea711b30de674bb3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c14aab8cd3135a86915f4be4ea711b30de674bb3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c14aab8cd3135a86915f4be4ea711b30de674bb3"
    }
  ],
  "stats": {
    "total": 95,
    "additions": 86,
    "deletions": 9
  },
  "files": [
    {
      "sha": "ef72f21be3694a55b0182330509a495d2e4cfa21",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
      "patch": "@@ -1,3 +1,7 @@\n+2019-12-08  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/lib/binutils-common.exp (regexp_diff): Support #?REGEXP.\n+\n 2019-11-22  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* dwarf.c (regname_internal_riscv): New function."
    },
    {
      "sha": "f2efa236518604d2c737684ae46947df682414c0",
      "filename": "binutils/testsuite/lib/binutils-common.exp",
      "status": "modified",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/binutils/testsuite/lib/binutils-common.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/binutils/testsuite/lib/binutils-common.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/lib/binutils-common.exp?ref=bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
      "patch": "@@ -286,6 +286,10 @@ proc check_shared_lib_support { } {\n #    REGEXP\n #        Skip all lines in FILE_1 until the first that matches REGEXP.\n #\n+#    #?REGEXP\n+#        Optionally match REGEXP against line from FILE_1.  If the REGEXP\n+#        does not match then the next line from FILE_2 is tried.\n+#\n # Other # lines are comments.  Regexp lines starting with the `!' character\n # specify inverse matching (use `\\!' for literal matching against a leading\n # `!').  Skip empty lines in both files.\n@@ -372,6 +376,21 @@ proc regexp_diff { file_1 file_2 args } {\n \t\t    }\n \t\t}\n \t\tbreak\n+\t    } elseif { [string match \"#\\\\?*\" $line_b] } {\n+\t\tif { ! $end_1 } {\n+\t\t    set line_b [string replace $line_b 0 1]\n+\t\t    set negated [expr { [string index $line_b 0] == \"!\" }]\n+\t\t    set line_bx [string range $line_b $negated end]\n+\t\t    set n [expr { $negated ? \"! \" : \"\" }]\n+\t\t    # Substitute on the reference.\n+\t\t    foreach {name value} $ref_subst {\n+\t\t\tregsub -- $name $line_bx $value line_bx\n+\t\t    }\n+\t\t    verbose \"optional match for $n\\\"^$line_bx$\\\"\" 3\n+\t\t    if { [expr [regexp \"^$line_bx$\" \"$line_a\"] != $negated] } {\n+\t\t\tbreak\n+\t\t    }\n+\t\t}\n \t    }\n \t    if { [gets $file_b line_b] == $eof } {\n \t\tset end_2 1"
    },
    {
      "sha": "a70421478bf6f44ce5fb41ba2de3235338376bbb",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
      "patch": "@@ -1,3 +1,9 @@\n+2019-12-08  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/ld-elf/eh4.d: Match optional padding DW_CFA_nop in FDEs.\n+\t* testsuite/ld-elf/eh5.d: Likewise, and extra CIEs emitted on\n+\tembedded targets.\n+\n 2019-12-06  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/ld-mips-elf/eh-frame1-n32.d: Pass --eh-frame-hdr to ld."
    },
    {
      "sha": "f33431a8b7fed3285b8a6f438934e969f9a21f32",
      "filename": "ld/testsuite/ld-elf/eh4.d",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/testsuite/ld-elf/eh4.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/testsuite/ld-elf/eh4.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/eh4.d?ref=bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
      "patch": "@@ -34,6 +34,10 @@ Contents of the .eh_frame section:\n   DW_CFA_def_cfa_offset: 24\n   DW_CFA_advance_loc: [0-9a-f]+ to [0-9a-f]+\n   DW_CFA_def_cfa_expression \\(DW_OP_breg7 \\(rsp\\): 8; DW_OP_breg16 \\(rip\\): 0;.*\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n [0-9a-f]+ ZERO terminator\n #pass"
    },
    {
      "sha": "4a69748235587f5484aeec6f2d56eaa59f2e64bb",
      "filename": "ld/testsuite/ld-elf/eh5.d",
      "status": "modified",
      "additions": 52,
      "deletions": 8,
      "changes": 60,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/testsuite/ld-elf/eh5.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2/ld/testsuite/ld-elf/eh5.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/eh5.d?ref=bc754168c7c3fc64e40bb7ddd97ea1ad07fb32d2",
      "patch": "@@ -19,7 +19,11 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+001[48] 0+0014 0+001[8c] FDE cie=0+0000 pc=.*\n   DW_CFA_advance_loc: 4 to .*\n   DW_CFA_def_cfa: r0(.*) ofs 16\n@@ -62,7 +66,11 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+009[08] 0+001c 0+002[04] FDE cie=0+007[48] pc=.*\n   Augmentation data:     (ef be ad de 00 00 00 00|00 00 00 00 de ad be ef)\n \n@@ -81,12 +89,20 @@ Contents of the .eh_frame section:\n   Augmentation data:     (0b|1b)\n \n   DW_CFA_def_cfa: r0(.*) ofs 16\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+00(c4|d0) 0+001[04] 0+001[8c] FDE cie=0+00b[08] pc=.*\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+00[de]8 0+0014 0+0000 CIE\n   Version:               [13]\n   Augmentation:          \"zPR\"\n@@ -108,7 +124,11 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+01(1c|30) 0+001[8c] 0+0000 CIE\n   Version:               [13]\n   Augmentation:          \"zPLR\"\n@@ -120,7 +140,11 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+01(38|50) 0+001c 0+002[04] FDE cie=0+01(1c|30) pc=.*\n   Augmentation data:     (ef be ad de 00 00 00 00|00 00 00 00 de ad be ef)\n \n@@ -136,7 +160,16 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+\n+#?0+0170 0+0014 0+ CIE\n+#?  Version:               1\n+#?  Augmentation:          \"zPR\"\n+#?  Code alignment factor: .*\n+#?  Data alignment factor: .*\n+#?  Return address column: .*\n+#?  Augmentation data:     03 .. .. .. .. 1b\n+#?  DW_CFA_nop\n+\n 0+01(70|88) 0+0014 0+0(01c|148|15c) FDE cie=0+0(02c|030|170) pc=.*\n   DW_CFA_advance_loc: 4 to .*\n   DW_CFA_def_cfa: r0(.*) ofs 16\n@@ -150,7 +183,18 @@ Contents of the .eh_frame section:\n   DW_CFA_nop\n   DW_CFA_nop\n   DW_CFA_nop\n-#...\n+\n+#?0+01b8 0+0018 0+ CIE\n+#?  Version:               1\n+#?  Augmentation:          \"zPLR\"\n+#?  Code alignment factor: .*\n+#?  Data alignment factor: .*\n+#?  Return address column: .*\n+#?  Augmentation data:     03 .. .. .. .. 0c 1b\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+#?  DW_CFA_nop\n+\n 0+01(a0|b8|d4) 0+001c 0+0(020|130|144) FDE cie=0+0(074|078|1b8) pc=.*\n   Augmentation data:     (ef be ad de 00 00 00 00|00 00 00 00 de ad be ef)\n "
    }
  ]
}