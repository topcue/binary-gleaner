{
  "sha": "dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZGVlN2I0YzgzYTYzNjQ3MWVlMzIxZmI0ZmUxYzNiZTBhMTZhOWVhNw==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:06:52Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:17:58Z"
    },
    "message": "boolean/auto-boolean commands, make \"o\" ambiguous\n\nWe currently accept \"o\" with boolean/auto-boolean commands, taking it\nto mean \"on\".  But \"o\" is ambiguous, between \"on\" and \"off\".  I can't\nimagine why assuming the user wanted to type \"on\" is a good idea, it\nmight have been a typo.\n\nThis commit makes gdb error out.  We now get:\n\n (gdb) maint test-settings set boolean o\n \"on\" or \"off\" expected.\n\n (gdb) maint test-settings set auto-boolean o\n \"on\", \"off\" or \"auto\" expected.\n\ngdb/ChangeLog:\n2019-06-13  Pedro Alves  <palves@redhat.com>\n\n\t* cli/cli-setshow.c (parse_auto_binary_operation)\n\t(parse_cli_boolean_value): Don't allow \"o\".\n\ngdb/testsuite/ChangeLog:\n2019-06-13  Pedro Alves  <palves@redhat.com>\n\n\t* gdb.base/settings.exp (test-boolean, test-auto-boolean): Check\n\tthat \"o\" is ambiguous.",
    "tree": {
      "sha": "7cca7c8f9d80b735aab6746745c9b13b68faba55",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7cca7c8f9d80b735aab6746745c9b13b68faba55"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "dca0f6c0a4bafff9039d8bdb2a7efec9f70ce82f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dca0f6c0a4bafff9039d8bdb2a7efec9f70ce82f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/dca0f6c0a4bafff9039d8bdb2a7efec9f70ce82f"
    }
  ],
  "stats": {
    "total": 35,
    "additions": 28,
    "deletions": 7
  },
  "files": [
    {
      "sha": "63a3690c52dddcf3aad0f77206f425e2b5bbe2f7",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "patch": "@@ -1,3 +1,8 @@\n+2019-06-13  Pedro Alves  <palves@redhat.com>\n+\n+\t* cli/cli-setshow.c (parse_auto_binary_operation)\n+\t(parse_cli_boolean_value): Don't allow \"o\".\n+\n 2019-06-13  Pedro Alves  <palves@redhat.com>\n \n \t* Makefile.in (COMMON_SFILES): Add maint-test-settings.c."
    },
    {
      "sha": "9841ec13ef408e87478ed56b1a8ae16fc846ad0d",
      "filename": "gdb/cli/cli-setshow.c",
      "status": "modified",
      "additions": 10,
      "deletions": 5,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/cli/cli-setshow.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/cli/cli-setshow.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-setshow.c?ref=dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "patch": "@@ -54,18 +54,21 @@ parse_auto_binary_operation (const char *arg)\n \n       while (isspace (arg[length - 1]) && length > 0)\n \tlength--;\n-      if (strncmp (arg, \"on\", length) == 0\n+\n+      /* Note that \"o\" is ambiguous.  */\n+\n+      if ((length == 2 && strncmp (arg, \"on\", length) == 0)\n \t  || strncmp (arg, \"1\", length) == 0\n \t  || strncmp (arg, \"yes\", length) == 0\n \t  || strncmp (arg, \"enable\", length) == 0)\n \treturn AUTO_BOOLEAN_TRUE;\n-      else if (strncmp (arg, \"off\", length) == 0\n+      else if ((length >= 2 && strncmp (arg, \"off\", length) == 0)\n \t       || strncmp (arg, \"0\", length) == 0\n \t       || strncmp (arg, \"no\", length) == 0\n \t       || strncmp (arg, \"disable\", length) == 0)\n \treturn AUTO_BOOLEAN_FALSE;\n       else if (strncmp (arg, \"auto\", length) == 0\n-\t       || (strncmp (arg, \"-1\", length) == 0 && length > 1))\n+\t       || (length > 1 && strncmp (arg, \"-1\", length) == 0))\n \treturn AUTO_BOOLEAN_AUTO;\n     }\n   error (_(\"\\\"on\\\", \\\"off\\\" or \\\"auto\\\" expected.\"));\n@@ -87,12 +90,14 @@ parse_cli_boolean_value (const char *arg)\n   while (arg[length - 1] == ' ' || arg[length - 1] == '\\t')\n     length--;\n \n-  if (strncmp (arg, \"on\", length) == 0\n+  /* Note that \"o\" is ambiguous.  */\n+\n+  if ((length == 2 && strncmp (arg, \"on\", length) == 0)\n       || strncmp (arg, \"1\", length) == 0\n       || strncmp (arg, \"yes\", length) == 0\n       || strncmp (arg, \"enable\", length) == 0)\n     return 1;\n-  else if (strncmp (arg, \"off\", length) == 0\n+  else if ((length >= 2 && strncmp (arg, \"off\", length) == 0)\n \t   || strncmp (arg, \"0\", length) == 0\n \t   || strncmp (arg, \"no\", length) == 0\n \t   || strncmp (arg, \"disable\", length) == 0)"
    },
    {
      "sha": "1c362f7696d79074822660448723085f5dc5738d",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "patch": "@@ -1,3 +1,8 @@\n+2019-06-13  Pedro Alves  <palves@redhat.com>\n+\n+\t* gdb.base/settings.exp (test-boolean, test-auto-boolean): Check\n+\tthat \"o\" is ambiguous.\n+\n 2019-06-13  Pedro Alves  <palves@redhat.com>\n \n \t* gdb.base/settings.c: New file."
    },
    {
      "sha": "4a7319df4895a4318e72a0efa736722b2274856b",
      "filename": "gdb/testsuite/gdb.base/settings.exp",
      "status": "modified",
      "additions": 8,
      "deletions": 2,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/testsuite/gdb.base/settings.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7/gdb/testsuite/gdb.base/settings.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/settings.exp?ref=dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "patch": "@@ -194,13 +194,16 @@ proc_with_prefix test-boolean {} {\n     gdb_test \"$set_cmd auto\" \\\n \t\"\\\"on\\\" or \\\"off\\\" expected\\\\.\"\n \n+    # \"o\" is ambiguous.\n+    gdb_test \"$set_cmd o\" \\\n+\t\"\\\"on\\\" or \\\"off\\\" expected\\\\.\"\n+\n     # Various valid values.  Test both full value names and\n     # abbreviations.\n \n     # Note that unlike with auto-bool, empty value implies \"on\".\n     foreach_with_prefix value {\n \t\"\"\n-\t\"o\"\n \t\"on\"\n \t\"1\"\n \t\"y\"\n@@ -278,11 +281,14 @@ proc_with_prefix test-auto-boolean {} {\n     gdb_test \"$set_cmd on 1\" \\\n \t\"\\\"on\\\", \\\"off\\\" or \\\"auto\\\" expected\\\\.\"\n \n+    # \"o\" is ambiguous.\n+    gdb_test \"$set_cmd o\" \\\n+\t\"\\\"on\\\", \\\"off\\\" or \\\"auto\\\" expected\\\\.\"\n+\n     # Various valid values.  Test both full value names and\n     # abbreviations.\n \n     foreach_with_prefix value {\n-\t\"o\"\n \t\"on\"\n \t\"1\"\n \t\"y\""
    }
  ]
}