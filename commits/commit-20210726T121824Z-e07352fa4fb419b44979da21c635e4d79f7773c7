{
  "sha": "e07352fa4fb419b44979da21c635e4d79f7773c7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTA3MzUyZmE0ZmI0MTliNDQ5NzlkYTIxYzYzNWU0ZDc5Zjc3NzNjNw==",
  "commit": {
    "author": {
      "name": "Andrea Corallo",
      "email": "andrea.corallo@arm.com",
      "date": "2021-05-19T13:04:24Z"
    },
    "committer": {
      "name": "Andrea Corallo",
      "email": "andrea.corallo@arm.com",
      "date": "2021-07-26T12:18:24Z"
    },
    "message": "PATCH [7/10] arm: add 'bxaut' instruction for Armv8.1-M pacbti extension\n\ngas/\n2021-06-11  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* config/tc-arm.c (T16_32_TAB): Add '_bxaut'.\n\t(do_t_pacbti_nonop): New function.\n\t(insns): Define 'bxaut' insn.\n\t* testsuite/gas/arm/armv8_1-m-pacbti.d: Add 'bxaut' test.\n\t* testsuite/gas/arm/armv8_1-m-pacbti.s: Likewise.\n\nopcodes/\n2021-06-11  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* arm-dis.c (thumb32_opcodes): Add 'bxaut'.",
    "tree": {
      "sha": "abeb70f5b5a646a200f783e0137798e86b3e4d00",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/abeb70f5b5a646a200f783e0137798e86b3e4d00"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e07352fa4fb419b44979da21c635e4d79f7773c7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e07352fa4fb419b44979da21c635e4d79f7773c7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e07352fa4fb419b44979da21c635e4d79f7773c7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e07352fa4fb419b44979da21c635e4d79f7773c7/comments",
  "author": {
    "login": "AndreaCorallo",
    "id": 6765576,
    "node_id": "MDQ6VXNlcjY3NjU1NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndreaCorallo",
    "html_url": "https://github.com/AndreaCorallo",
    "followers_url": "https://api.github.com/users/AndreaCorallo/followers",
    "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions",
    "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs",
    "repos_url": "https://api.github.com/users/AndreaCorallo/repos",
    "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "AndreaCorallo",
    "id": 6765576,
    "node_id": "MDQ6VXNlcjY3NjU1NzY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/AndreaCorallo",
    "html_url": "https://github.com/AndreaCorallo",
    "followers_url": "https://api.github.com/users/AndreaCorallo/followers",
    "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}",
    "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions",
    "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs",
    "repos_url": "https://api.github.com/users/AndreaCorallo/repos",
    "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5a0c7a819f1d40654f7e39c8ff73951723c3e1e8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5a0c7a819f1d40654f7e39c8ff73951723c3e1e8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5a0c7a819f1d40654f7e39c8ff73951723c3e1e8"
    }
  ],
  "stats": {
    "total": 20,
    "additions": 19,
    "deletions": 1
  },
  "files": [
    {
      "sha": "30ef199124903ceae445e3be510f25e544ea42fc",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=e07352fa4fb419b44979da21c635e4d79f7773c7",
      "patch": "@@ -11463,6 +11463,7 @@ encode_thumb32_addr_mode (int i, bool is_t, bool is_d)\n   X(_bflx,  0000, f070e001),\t\t\t\\\n   X(_bic,   4380, ea200000),\t\t\t\\\n   X(_bics,  4380, ea300000),\t\t\t\\\n+  X(_bxaut, 0000, fb500f10),\t\t\t\\\n   X(_cinc,  0000, ea509000),\t\t\t\\\n   X(_cinv,  0000, ea50a000),\t\t\t\\\n   X(_cmn,   42c0, eb100f00),\t\t\t\\\n@@ -22343,6 +22344,18 @@ do_t_pacbti (void)\n   inst.instruction = THUMB_OP32 (inst.instruction);\n }\n \n+static void\n+do_t_pacbti_nonop (void)\n+{\n+  constraint (!ARM_CPU_HAS_FEATURE (cpu_variant, pacbti_ext),\n+\t      _(BAD_PACBTI));\n+\n+  inst.instruction = THUMB_OP32 (inst.instruction);\n+  inst.instruction |= inst.operands[0].reg << 12;\n+  inst.instruction |= inst.operands[1].reg << 16;\n+  inst.instruction |= inst.operands[2].reg;\n+}\n+\n \f\n /* Overall per-instruction processing.\t*/\n \n@@ -26333,6 +26346,7 @@ static const struct asm_opcode insns[] =\n #define THUMB_VARIANT & arm_ext_v8_1m_main\n  toU(\"aut\",   _aut, 3, (R12, LR, SP), t_pacbti),\n  ToU(\"bti\",   f3af800f, 0, (), noargs),\n+ toU(\"bxaut\", _bxaut, 3, (RR, RR, RR), t_pacbti_nonop),\n  toU(\"pac\",   _pac,   3, (R12, LR, SP), t_pacbti),\n  toU(\"pacbti\", _pacbti, 3, (R12, LR, SP), t_pacbti),\n  toU(\"cinc\",  _cinc,  3, (RRnpcsp, RR_ZR, COND),\tt_cond),"
    },
    {
      "sha": "411454a5fd1b228a7dbe1e7a3034b8729f1531cd",
      "filename": "gas/testsuite/gas/arm/armv8_1-m-pacbti.d",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/testsuite/gas/arm/armv8_1-m-pacbti.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/testsuite/gas/arm/armv8_1-m-pacbti.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8_1-m-pacbti.d?ref=e07352fa4fb419b44979da21c635e4d79f7773c7",
      "patch": "@@ -1,6 +1,6 @@\n #name: Valid Armv8.1-M pointer authentication and branch target identification extention\n #source: armv8_1-m-pacbti.s\n-#as: -march=armv8.1-m.main\n+#as: -march=armv8.1-m.main+pacbti\n #objdump: -dr --prefix-addresses --show-raw-insn\n \n .*: +file format .*arm.*\n@@ -10,4 +10,5 @@ Disassembly of section .text:\n 0[0-9a-f]+ <[^>]+> f3af 800d \tpacbti\tr12, lr, sp\n 0[0-9a-f]+ <[^>]+> f3af 802d \taut\tr12, lr, sp\n 0[0-9a-f]+ <[^>]+> f3af 801d \tpac\tr12, lr, sp\n+0[0-9a-f]+ <[^>]+> fb54 3f15 \tbxaut\tr3, r4, r5\n #..."
    },
    {
      "sha": "22da2cefb4e33629a714c2d42b38308c7eb15cb3",
      "filename": "gas/testsuite/gas/arm/armv8_1-m-pacbti.s",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/testsuite/gas/arm/armv8_1-m-pacbti.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e07352fa4fb419b44979da21c635e4d79f7773c7/gas/testsuite/gas/arm/armv8_1-m-pacbti.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8_1-m-pacbti.s?ref=e07352fa4fb419b44979da21c635e4d79f7773c7",
      "patch": "@@ -6,3 +6,4 @@\n \tpacbti\tr12, lr, sp\n \taut\tr12, lr, sp\n \tpac\tr12, lr, sp\n+\tbxaut\tr3, r4, r5"
    },
    {
      "sha": "1d183605030f689c1469774e4037f201c559e8ec",
      "filename": "opcodes/arm-dis.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e07352fa4fb419b44979da21c635e4d79f7773c7/opcodes/arm-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e07352fa4fb419b44979da21c635e4d79f7773c7/opcodes/arm-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/arm-dis.c?ref=e07352fa4fb419b44979da21c635e4d79f7773c7",
      "patch": "@@ -4658,6 +4658,8 @@ static const struct opcode32 thumb32_opcodes[] =\n    0xf3af802d, 0xffffffff, \"aut\\tr12, lr, sp\"},\n   {ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8_1M_MAIN),\n    0xf3af800f, 0xffffffff, \"bti\"},\n+  {ARM_FEATURE_CORE_HIGH_HIGH (ARM_EXT3_PACBTI),\n+   0xfb500f10, 0xfff00ff0, \"bxaut%c\\t%12-15r, %16-19r, %0-3r\"},\n   {ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8_1M_MAIN),\n    0xf3af801d, 0xffffffff, \"pac\\tr12, lr, sp\"},\n   {ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8_1M_MAIN),"
    }
  ]
}