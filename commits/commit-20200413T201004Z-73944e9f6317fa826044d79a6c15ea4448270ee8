{
  "sha": "73944e9f6317fa826044d79a6c15ea4448270ee8",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzM5NDRlOWY2MzE3ZmE4MjYwNDRkNzlhNmMxNWVhNDQ0ODI3MGVlOA==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-04-13T18:42:59Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-04-13T20:10:04Z"
    },
    "message": "Remove gdb_fildes_t\n\ngdb_fildes_t and pfildes are no longer used, so remove them.\n\ngdbserver/ChangeLog\n2020-04-13  Tom Tromey  <tom@tromey.com>\n\n\t* server.h (gdb_fildes_t): Remove typedef.\n\t* remote-utils.c (remote_desc, list_desc): Now int.\n\t(INVALID_DESCRIPTOR): Remove.\n\t(gdb_connected, remote_close)\n\t(check_remote_input_interrupt_request): Update.\n\t* utils.h (pfildes): Don't declare.\n\t* utils.c (pfildes): Remove.",
    "tree": {
      "sha": "035734dc0879a755c179cdab623aac79bea0918b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/035734dc0879a755c179cdab623aac79bea0918b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/73944e9f6317fa826044d79a6c15ea4448270ee8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/73944e9f6317fa826044d79a6c15ea4448270ee8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/73944e9f6317fa826044d79a6c15ea4448270ee8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/73944e9f6317fa826044d79a6c15ea4448270ee8/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7990abcc9b7d96f16ea51076685d4dfa7d503fe3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7990abcc9b7d96f16ea51076685d4dfa7d503fe3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7990abcc9b7d96f16ea51076685d4dfa7d503fe3"
    }
  ],
  "stats": {
    "total": 46,
    "additions": 15,
    "deletions": 31
  },
  "files": [
    {
      "sha": "2b381455ed7926a29e18c69b701bcaebbbf675d2",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=73944e9f6317fa826044d79a6c15ea4448270ee8",
      "patch": "@@ -1,3 +1,13 @@\n+2020-04-13  Tom Tromey  <tom@tromey.com>\n+\n+\t* server.h (gdb_fildes_t): Remove typedef.\n+\t* remote-utils.c (remote_desc, list_desc): Now int.\n+\t(INVALID_DESCRIPTOR): Remove.\n+\t(gdb_connected, remote_close)\n+\t(check_remote_input_interrupt_request): Update.\n+\t* utils.h (pfildes): Don't declare.\n+\t* utils.c (pfildes): Remove.\n+\n 2020-04-13  Tom Tromey  <tom@tromey.com>\n \n \t* server.h (handle_serial_event, handle_target_event): Update."
    },
    {
      "sha": "67c560d1c87bbdd5d42b8b9448bd8b5b9091affb",
      "filename": "gdbserver/remote-utils.cc",
      "status": "modified",
      "additions": 5,
      "deletions": 11,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/remote-utils.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/remote-utils.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/remote-utils.cc?ref=73944e9f6317fa826044d79a6c15ea4448270ee8",
      "patch": "@@ -78,12 +78,6 @@ typedef int socklen_t;\n \n #ifndef IN_PROCESS_AGENT\n \n-#if USE_WIN32API\n-# define INVALID_DESCRIPTOR INVALID_SOCKET\n-#else\n-# define INVALID_DESCRIPTOR -1\n-#endif\n-\n /* Extra value for readchar_callback.  */\n enum {\n   /* The callback is currently not scheduled.  */\n@@ -108,8 +102,8 @@ struct sym_cache\n \n static int remote_is_stdio = 0;\n \n-static gdb_fildes_t remote_desc = INVALID_DESCRIPTOR;\n-static gdb_fildes_t listen_desc = INVALID_DESCRIPTOR;\n+static int remote_desc = -1;\n+static int listen_desc = -1;\n \n #ifdef USE_WIN32API\n # define read(fd, buf, len) recv (fd, (char *) buf, len, 0)\n@@ -119,7 +113,7 @@ static gdb_fildes_t listen_desc = INVALID_DESCRIPTOR;\n int\n gdb_connected (void)\n {\n-  return remote_desc != INVALID_DESCRIPTOR;\n+  return remote_desc != -1;\n }\n \n /* Return true if the remote connection is over stdio.  */\n@@ -425,7 +419,7 @@ remote_close (void)\n   if (! remote_connection_is_stdio ())\n     close (remote_desc);\n #endif\n-  remote_desc = INVALID_DESCRIPTOR;\n+  remote_desc = -1;\n \n   reset_readchar ();\n }\n@@ -788,7 +782,7 @@ check_remote_input_interrupt_request (void)\n   /* This function may be called before establishing communications,\n      therefore we need to validate the remote descriptor.  */\n \n-  if (remote_desc == INVALID_DESCRIPTOR)\n+  if (remote_desc == -1)\n     return;\n \n   input_interrupt (0);"
    },
    {
      "sha": "09989e46264cc64d562d472201c4479d9628db7a",
      "filename": "gdbserver/server.h",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/server.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/server.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/server.h?ref=73944e9f6317fa826044d79a6c15ea4448270ee8",
      "patch": "@@ -81,13 +81,6 @@ extern bool disable_packet_T;\n extern bool run_once;\n extern bool non_stop;\n \n-#if USE_WIN32API\n-#include <winsock2.h>\n-typedef SOCKET gdb_fildes_t;\n-#else\n-typedef int gdb_fildes_t;\n-#endif\n-\n #include \"gdbsupport/event-loop.h\"\n \n /* Functions from server.c.  */"
    },
    {
      "sha": "d52d2ac8736315617d204851ceebaf4c4bbdd480",
      "filename": "gdbserver/utils.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 12,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/utils.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/utils.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/utils.cc?ref=73944e9f6317fa826044d79a6c15ea4448270ee8",
      "patch": "@@ -113,15 +113,3 @@ paddress (CORE_ADDR addr)\n {\n   return phex_nz (addr, sizeof (CORE_ADDR));\n }\n-\n-/* Convert a file descriptor into a printable string.  */\n-\n-char *\n-pfildes (gdb_fildes_t fd)\n-{\n-#if USE_WIN32API\n-  return phex_nz (fd, sizeof (gdb_fildes_t));\n-#else\n-  return plongest (fd);\n-#endif\n-}"
    },
    {
      "sha": "fc56f33f9f361b5ea273af634a83061ba93d9940",
      "filename": "gdbserver/utils.h",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/utils.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/73944e9f6317fa826044d79a6c15ea4448270ee8/gdbserver/utils.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/utils.h?ref=73944e9f6317fa826044d79a6c15ea4448270ee8",
      "patch": "@@ -20,6 +20,5 @@\n #define GDBSERVER_UTILS_H\n \n char *paddress (CORE_ADDR addr);\n-char *pfildes (gdb_fildes_t fd);\n \n #endif /* GDBSERVER_UTILS_H */"
    }
  ]
}