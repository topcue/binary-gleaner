{
  "sha": "cebc89b9328eab994f6b0314c263f94e7949a553",
  "node_id": "C_kwDOANOeidoAKGNlYmM4OWI5MzI4ZWFiOTk0ZjZiMDMxNGMyNjNmOTRlNzk0OWE1NTM",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2022-02-21T00:28:57Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2022-02-23T08:53:09Z"
    },
    "message": "binutils 2.38 vs. ppc32 linux kernel\n\nCommit b25f942e18d6 made .machine more strict.  Weaken it again.\n\n\t* config/tc-ppc.c (ppc_machine): Treat an early .machine specially,\n\tkeeping sticky options to work around gcc bugs.",
    "tree": {
      "sha": "fce63334a0a98bd8192784e4beb749d68e253d79",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fce63334a0a98bd8192784e4beb749d68e253d79"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cebc89b9328eab994f6b0314c263f94e7949a553",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cebc89b9328eab994f6b0314c263f94e7949a553",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cebc89b9328eab994f6b0314c263f94e7949a553",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cebc89b9328eab994f6b0314c263f94e7949a553/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9cbed90ee623d75e31994e7943960c997ba565f2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9cbed90ee623d75e31994e7943960c997ba565f2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9cbed90ee623d75e31994e7943960c997ba565f2"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 24,
    "deletions": 1
  },
  "files": [
    {
      "sha": "89bc7d3f9b9842149f64ae50e4efd37d2acc7dfc",
      "filename": "gas/config/tc-ppc.c",
      "status": "modified",
      "additions": 24,
      "deletions": 1,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cebc89b9328eab994f6b0314c263f94e7949a553/gas/config/tc-ppc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cebc89b9328eab994f6b0314c263f94e7949a553/gas/config/tc-ppc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-ppc.c?ref=cebc89b9328eab994f6b0314c263f94e7949a553",
      "patch": "@@ -5965,7 +5965,30 @@ ppc_machine (int ignore ATTRIBUTE_UNUSED)\n \t     options do not count as a new machine, instead they add\n \t     to currently selected opcodes.  */\n \t  ppc_cpu_t machine_sticky = 0;\n-\t  new_cpu = ppc_parse_cpu (ppc_cpu, &machine_sticky, cpu_string);\n+\t  /* Unfortunately, some versions of gcc emit a .machine\n+\t     directive very near the start of the compiler's assembly\n+\t     output file.  This is bad because it overrides user -Wa\n+\t     cpu selection.  Worse, there are versions of gcc that\n+\t     emit the *wrong* cpu, not even respecting the -mcpu given\n+\t     to gcc.  See gcc pr101393.  And to compound the problem,\n+\t     as of 20220222 gcc doesn't pass the correct cpu option to\n+\t     gas on the command line.  See gcc pr59828.  Hack around\n+\t     this by keeping sticky options for an early .machine.  */\n+\t  asection *sec;\n+\t  for (sec = stdoutput->sections; sec != NULL; sec = sec->next)\n+\t    {\n+\t      segment_info_type *info = seg_info (sec);\n+\t      /* Are the frags for this section perturbed from their\n+\t\t initial state?  Even .align will count here.  */\n+\t      if (info != NULL\n+\t\t  && (info->frchainP->frch_root != info->frchainP->frch_last\n+\t\t      || info->frchainP->frch_root->fr_type != rs_fill\n+\t\t      || info->frchainP->frch_root->fr_fix != 0))\n+\t\tbreak;\n+\t    }\n+\t  new_cpu = ppc_parse_cpu (ppc_cpu,\n+\t\t\t\t   sec == NULL ? &sticky : &machine_sticky,\n+\t\t\t\t   cpu_string);\n \t  if (new_cpu != 0)\n \t    ppc_cpu = new_cpu;\n \t  else"
    }
  ]
}