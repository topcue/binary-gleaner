{
  "sha": "24f19ccb8907b8d2bafb905a5db1a3537084d522",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjRmMTljY2I4OTA3YjhkMmJhZmI5MDVhNWRiMWEzNTM3MDg0ZDUyMg==",
  "commit": {
    "author": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-12-11T15:53:26Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-12-11T15:53:26Z"
    },
    "message": "[gas][arm] Add -mwarn-restrict-it\n\nAdd a -m{no-}warn-restrict-it option to control IT related warnings in\nARMv8-A and ARMv8-R.  This is disabled by default.\n\nCommitted on behalf of Wilco Dijkstra.\n\ngas/ChangeLog:\n2019-12-11  Wilco Dijkstra  <wdijkstr@arm.com>\n\n\t* config/tc-arm.c (warn_on_restrict_it): Add new variable.\n\t(it_fsm_post_encode): Check warn_on_restrict_it.\n\t(arm_option_table): Add -mwarn-restrict-it/-mno-warn-restrict-it.\n\t* testsuite/gas/arm/armv8-2-fp16-scalar-bad.d: Add -mwarn-restrict-it.\n\t* testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d: Likewise.\n\t* testsuite/gas/arm/armv8-a-bad.d: Likewise.\n\t* testsuite/gas/arm/armv8-a-it-bad.d: Likewise.\n\t* testsuite/gas/arm/armv8-r-bad.d: Likewise.\n\t* testsuite/gas/arm/armv8-r-it-bad.d: Likewise.\n\t* testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d: Likewise.\n\t* testsuite/gas/arm/udf.d: Likewise.",
    "tree": {
      "sha": "e9d47fd87244ef8769fad5d2f761509f19923247",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e9d47fd87244ef8769fad5d2f761509f19923247"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/24f19ccb8907b8d2bafb905a5db1a3537084d522",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/24f19ccb8907b8d2bafb905a5db1a3537084d522",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/24f19ccb8907b8d2bafb905a5db1a3537084d522",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/24f19ccb8907b8d2bafb905a5db1a3537084d522/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2e744276988acd52b967d2505c42ef170147b5f9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2e744276988acd52b967d2505c42ef170147b5f9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2e744276988acd52b967d2505c42ef170147b5f9"
    }
  ],
  "stats": {
    "total": 37,
    "additions": 29,
    "deletions": 8
  },
  "files": [
    {
      "sha": "700014d47f133909d792d8c4481bca19c100d369",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,3 +1,17 @@\n+2019-12-11  Wilco Dijkstra  <wdijkstr@arm.com>\n+\n+\t* config/tc-arm.c (warn_on_restrict_it): Add new variable.\n+\t(it_fsm_post_encode): Check warn_on_restrict_it.\n+\t(arm_option_table): Add -mwarn-restrict-it/-mno-warn-restrict-it.\n+\t* testsuite/gas/arm/armv8-2-fp16-scalar-bad.d: Add -mwarn-restrict-it.\n+\t* testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d: Likewise.\n+\t* testsuite/gas/arm/armv8-a-bad.d: Likewise.\n+\t* testsuite/gas/arm/armv8-a-it-bad.d: Likewise.\n+\t* testsuite/gas/arm/armv8-r-bad.d: Likewise.\n+\t* testsuite/gas/arm/armv8-r-it-bad.d: Likewise.\n+\t* testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d: Likewise.\n+\t* testsuite/gas/arm/udf.d: Likewise.\n+\n 2018-12-11  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (md_assemble): Extend SSE check conditional."
    },
    {
      "sha": "e680f93cff2d59c23f25f2475d9bf5ffefa07a80",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -154,6 +154,7 @@ static int pic_code\t     = FALSE;\n static int fix_v4bx\t     = FALSE;\n /* Warn on using deprecated features.  */\n static int warn_on_deprecated = TRUE;\n+static int warn_on_restrict_it = FALSE;\n \n /* Understand CodeComposer Studio assembly syntax.  */\n bfd_boolean codecomposer_syntax = FALSE;\n@@ -22788,6 +22789,7 @@ it_fsm_post_encode (void)\n     handle_pred_state ();\n \n   if (now_pred.insn_cond\n+      && warn_on_restrict_it\n       && !now_pred.warn_deprecated\n       && warn_on_deprecated\n       && ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v8)\n@@ -30529,6 +30531,11 @@ struct arm_option_table arm_opts[] =\n   {\"mwarn-deprecated\", NULL, &warn_on_deprecated, 1, NULL},\n   {\"mno-warn-deprecated\", N_(\"do not warn on use of deprecated feature\"),\n    &warn_on_deprecated, 0, NULL},\n+\n+  {\"mwarn-restrict-it\", N_(\"warn about performance deprecated IT instructions\"\n+   \" in ARMv8-A and ARMv8-R\"), &warn_on_restrict_it, 1, NULL},\n+  {\"mno-warn-restrict-it\", NULL, &warn_on_restrict_it, 0, NULL},\n+\n   {\"mwarn-syms\", N_(\"warn about symbols that match instruction names [default]\"), (int *) (& flag_warn_syms), TRUE, NULL},\n   {\"mno-warn-syms\", N_(\"disable warnings about symobls that match instructions\"), (int *) (& flag_warn_syms), FALSE, NULL},\n   {NULL, NULL, NULL, 0, NULL}"
    },
    {
      "sha": "d9049445144ba2367da84cff68b2c31bb9ad5e3b",
      "filename": "gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad-ext.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Invalid armv8.2-a scalar fp16\n #source: armv8-2-fp16-scalar-bad.s\n-#as: -march=armv8.2-a+fp16\n+#as: -march=armv8.2-a+fp16 -mwarn-restrict-it\n #error_output: armv8-2-fp16-scalar-bad.l"
    },
    {
      "sha": "da625db4dd07aff61b93e0f614468b1386773a19",
      "filename": "gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-2-fp16-scalar-bad.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Invalid armv8.2-a scalar fp16\n #source: armv8-2-fp16-scalar-bad.s\n-#as: -march=armv8.2-a+fp16 -mfpu=fp-armv8\n+#as: -march=armv8.2-a+fp16 -mfpu=fp-armv8 -mwarn-restrict-it\n #error_output: armv8-2-fp16-scalar-bad.l"
    },
    {
      "sha": "45109ceeb3f067668dbaf8fd4f03681629d2a916",
      "filename": "gas/testsuite/gas/arm/armv8-a-bad.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-a-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-a-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-a-bad.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Invalid v8-a\n #source: armv8-ar-bad.s\n-#as: -march=armv8-a\n+#as: -march=armv8-a -mwarn-restrict-it\n #error_output: armv8-ar-bad.l"
    },
    {
      "sha": "02788e0dcd2fe310dab06f0e1f2a8f66aaca7acb",
      "filename": "gas/testsuite/gas/arm/armv8-a-it-bad.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-a-it-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-a-it-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-a-it-bad.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Deprecated IT blocks (ARM v8)\n #source: armv8-ar-it-bad.s\n #error_output: armv8-ar-it-bad.l\n-#as: -march=armv8-a -mimplicit-it=always\n+#as: -march=armv8-a -mimplicit-it=always -mwarn-restrict-it"
    },
    {
      "sha": "b643c81de561ffb33ed5e50e59ba7d3589c62ba6",
      "filename": "gas/testsuite/gas/arm/armv8-r-bad.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-r-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-r-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-r-bad.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Invalid v8-r\n #source: armv8-ar-bad.s\n-#as: -march=armv8-r\n+#as: -march=armv8-r -mwarn-restrict-it\n #error_output: armv8-ar-bad.l"
    },
    {
      "sha": "c6f0c5bcae84edc7cb22773a38a10c95c093a9b6",
      "filename": "gas/testsuite/gas/arm/armv8-r-it-bad.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-r-it-bad.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/armv8-r-it-bad.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8-r-it-bad.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n #name: Deprecated IT blocks (ARM v8)\n #source: armv8-ar-it-bad.s\n #error_output: armv8-ar-it-bad.l\n-#as: -march=armv8-r -mimplicit-it=always\n+#as: -march=armv8-r -mimplicit-it=always -mwarn-restrict-it"
    },
    {
      "sha": "41a6cdced739eb38341b6efa08f4be60ba1d0d19",
      "filename": "gas/testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/sp-pc-validations-bad-t-v8a.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,4 +1,4 @@\n-# as: -march=armv8-a\n+# as: -march=armv8-a -mwarn-restrict-it\n # name: Invalid SP and PC operands test - THUMB (v8a)\n # source: sp-pc-validations-bad-t.s\n # error_output: sp-pc-validations-bad-t-v8a.l"
    },
    {
      "sha": "a6a021e4d0329e15c4d400c1d2499e4b70d6d34e",
      "filename": "gas/testsuite/gas/arm/udf.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/udf.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/24f19ccb8907b8d2bafb905a5db1a3537084d522/gas/testsuite/gas/arm/udf.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/udf.d?ref=24f19ccb8907b8d2bafb905a5db1a3537084d522",
      "patch": "@@ -1,6 +1,6 @@\n #objdump: -dr --prefix-addresses --show-raw-insn\n #name: UDF\n-#as: -march=armv8-a\n+#as: -march=armv8-a -mwarn-restrict-it\n #warning_output: udf.l\n #skip: *-*-pe *-*-wince\n "
    }
  ]
}