{
  "sha": "cf83625da29d1239e97f1eb4d145f347cb741889",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2Y4MzYyNWRhMjlkMTIzOWU5N2YxZWI0ZDE0NWYzNDdjYjc0MTg4OQ==",
  "commit": {
    "author": {
      "name": "Artur Shepilko",
      "email": "nomadbyte@gmail.com",
      "date": "2020-04-10T14:56:43Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-04-11T01:04:03Z"
    },
    "message": "gdb: fix undefined behavior reported in copy_bitwise\n\ngdb version 9.1, built with clang 8.0.0 on Ubuntu 18.04 (x86_64);\n--enable-ubsan (for clang's undefined behavior sanitizer)\n\nExecuting command; `maint selftest copy_bitwise` bombs in runtime error:\n../../gdb/utils.c:3432:28: runtime error: left shift of negative value -1\n\nCloser look reveals the offending shift: `(~0 << nbits)`, apparently 0\nis treated as signed int, resulting in negative complement. Explicitly\nstating it unsigned 0U  fixes it and the `copy_bitwise` test passes\nok.",
    "tree": {
      "sha": "6b707b179bb60dbfbca74a14d8fd4af0f5a7d4c9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6b707b179bb60dbfbca74a14d8fd4af0f5a7d4c9"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cf83625da29d1239e97f1eb4d145f347cb741889",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cf83625da29d1239e97f1eb4d145f347cb741889",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cf83625da29d1239e97f1eb4d145f347cb741889",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cf83625da29d1239e97f1eb4d145f347cb741889/comments",
  "author": {
    "login": "nomadbyte",
    "id": 1738281,
    "node_id": "MDQ6VXNlcjE3MzgyODE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1738281?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nomadbyte",
    "html_url": "https://github.com/nomadbyte",
    "followers_url": "https://api.github.com/users/nomadbyte/followers",
    "following_url": "https://api.github.com/users/nomadbyte/following{/other_user}",
    "gists_url": "https://api.github.com/users/nomadbyte/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nomadbyte/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nomadbyte/subscriptions",
    "organizations_url": "https://api.github.com/users/nomadbyte/orgs",
    "repos_url": "https://api.github.com/users/nomadbyte/repos",
    "events_url": "https://api.github.com/users/nomadbyte/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nomadbyte/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "de7ac122a7f98c181c1ec175b0560bb48eabc6ea",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/de7ac122a7f98c181c1ec175b0560bb48eabc6ea",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/de7ac122a7f98c181c1ec175b0560bb48eabc6ea"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "81102ee569bcb841d38688b5ac0eb905ba043261",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cf83625da29d1239e97f1eb4d145f347cb741889/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cf83625da29d1239e97f1eb4d145f347cb741889/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=cf83625da29d1239e97f1eb4d145f347cb741889",
      "patch": "@@ -1,3 +1,8 @@\n+2020-04-10  Artur Shepilko  <nomadbyte@gmail.com>\n+\n+\t* utils.c (copy_bitwise): Use unsigned 0 constant as operand of\n+\tbit shift.\n+\n 2020-04-10  Tom Tromey  <tromey@adacore.com>\n \n \t* symfile.c (symbol_file_add_separate): Preserve OBJF_MAINLINE."
    },
    {
      "sha": "f5b20331b1e2f2966cea7abce27836b639874508",
      "filename": "gdb/utils.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cf83625da29d1239e97f1eb4d145f347cb741889/gdb/utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cf83625da29d1239e97f1eb4d145f347cb741889/gdb/utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.c?ref=cf83625da29d1239e97f1eb4d145f347cb741889",
      "patch": "@@ -3433,7 +3433,7 @@ copy_bitwise (gdb_byte *dest, ULONGEST dest_offset,\n \tbuf |= *source << avail;\n \n       buf &= (1 << nbits) - 1;\n-      *dest = (*dest & (~0 << nbits)) | buf;\n+      *dest = (*dest & (~0U << nbits)) | buf;\n     }\n }\n "
    }
  ]
}