{
  "sha": "36170420e329a8d6229eb89b38d8680cf39f1d53",
  "node_id": "C_kwDOANOeidoAKDM2MTcwNDIwZTMyOWE4ZDYyMjllYjg5YjM4ZDg2ODBjZjM5ZjFkNTM",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-10-13T09:06:36Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-10-13T09:06:36Z"
    },
    "message": "[gdb/testsuite] Fix test name in gdb.python/python.exp\n\nWhen running test-case gdb.python/python.exp, we have:\n...\nPASS: gdb.python/python.exp: starti via gdb.execute, not from tty\nPASS: gdb.python/python.exp: starti via interactive input\n...\n\nThe two tests are instances of the same test, with different values for\nstarti command argument from_tty, so it's strange that the test names are so\ndifferent.\n\nThis is due to using a gdb_test nested in a gdb_test_multiple, with the inner\none using a different test name than the outer one.  [ That could still make\nsense if both produced passes, but that's not the case here. ]\n\nFix this by using $gdb_test_name, such that we have:\n...\nPASS: gdb.python/python.exp: starti via gdb.execute, not from tty\nPASS: gdb.python/python.exp: starti via gdb.execute, from tty\n...\n\nAlso make this more readable by using variables.\n\nTested on x86_64-linux.",
    "tree": {
      "sha": "347bd307d99d456054c72aa4759434c64e868275",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/347bd307d99d456054c72aa4759434c64e868275"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/36170420e329a8d6229eb89b38d8680cf39f1d53",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/36170420e329a8d6229eb89b38d8680cf39f1d53",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/36170420e329a8d6229eb89b38d8680cf39f1d53",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/36170420e329a8d6229eb89b38d8680cf39f1d53/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "746723ba6c1b36d6ec88de3f772a80a8d2de6e4d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/746723ba6c1b36d6ec88de3f772a80a8d2de6e4d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/746723ba6c1b36d6ec88de3f772a80a8d2de6e4d"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 11,
    "deletions": 4
  },
  "files": [
    {
      "sha": "7f9c2b4af7ff011a09a67c8d96efe93f2d3cbd56",
      "filename": "gdb/testsuite/gdb.python/python.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 4,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/36170420e329a8d6229eb89b38d8680cf39f1d53/gdb/testsuite/gdb.python/python.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/36170420e329a8d6229eb89b38d8680cf39f1d53/gdb/testsuite/gdb.python/python.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.python/python.exp?ref=36170420e329a8d6229eb89b38d8680cf39f1d53",
      "patch": "@@ -542,12 +542,19 @@ gdb_test \"python gdb.execute(\\\"show commands\\\")\" \"$decimal  print \\\\\\$cvar3.*\"\n # Test that the from_tty argument to gdb.execute is effective. If\n # False, the user is not prompted for decisions such as restarting the\n # program, and \"yes\" is assumed. If True, the user is prompted.\n+# Case 1, from_tty=False.\n gdb_test \"python gdb.execute('starti', from_tty=False)\" \\\n     \"Program stopped.*\" \\\n     \"starti via gdb.execute, not from tty\"\n-gdb_test_multiple \"python gdb.execute('starti', from_tty=True)\" \\\n-    \"starti via gdb.execute, from tty\" {\n-    -re {The program being debugged has been started already\\.\\r\\nStart it from the beginning\\? \\(y or n\\) $} {\n-\tgdb_test \"y\" \"Starting program:.*\" \"starti via interactive input\"\n+\n+# Case 2, from_tty=True.\n+set test \"starti via gdb.execute, from tty\"\n+set question \\\n+    [multi_line \\\n+\t {The program being debugged has been started already\\.} \\\n+\t {Start it from the beginning\\? \\(y or n\\) $}]\n+gdb_test_multiple \"python gdb.execute('starti', from_tty=True)\" $test {\n+    -re $question {\n+\tgdb_test \"y\" \"Starting program:.*\" $gdb_test_name\n     }\n }"
    }
  ]
}