{
  "sha": "c3bd716ffc20cada32e8a18a209638b578d47f5e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzNiZDcxNmZmYzIwY2FkYTMyZThhMThhMjA5NjM4YjU3OGQ0N2Y1ZQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-17T18:56:39Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-25T13:48:41Z"
    },
    "message": "Remove tui_scroll_direction enum\n\nThe tui_scroll_direction enum is not really needed, because it's\nsimple to adapt the various scrolling methods to use the sign of their\nargument as the direction in which to scroll.\n\ngdb/ChangeLog\n2019-06-25  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-winsource.c\n\t(tui_source_window_base::do_scroll_horizontal): Remove direction\n\tparameter.\n\t* tui/tui-windata.c (tui_data_window::do_scroll_vertical): Remove\n\tdirection parameter.\n\t* tui/tui-win.c (tui_win_info::forward_scroll)\n\t(tui_win_info::backward_scroll, tui_win_info::left_scroll)\n\t(tui_win_info::right_scroll): Update.\n\t* tui/tui-source.c (tui_source_window::do_scroll_vertical): Remove\n\tdirection parameter.\n\t* tui/tui-disasm.c (tui_disasm_window::do_scroll_vertical): Remove\n\tdirection parameter.\n\t* tui/tui-data.h (enum tui_scroll_direction): Remove.\n\t(struct tui_win_info) <do_scroll_vertical, do_scroll_horizontal>:\n\tRemove direction parameter.\n\t(struct tui_source_window_base, struct tui_source_window)\n\t(struct tui_disasm_window, struct tui_data_window)\n\t(struct tui_cmd_window): Update.",
    "tree": {
      "sha": "a3b5f316344b173b61903b7b9d19998716e22914",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a3b5f316344b173b61903b7b9d19998716e22914"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c3bd716ffc20cada32e8a18a209638b578d47f5e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3bd716ffc20cada32e8a18a209638b578d47f5e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c3bd716ffc20cada32e8a18a209638b578d47f5e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3bd716ffc20cada32e8a18a209638b578d47f5e/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "21c32dca764039afd3517954f6dd0a23d0c9e16c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/21c32dca764039afd3517954f6dd0a23d0c9e16c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/21c32dca764039afd3517954f6dd0a23d0c9e16c"
    }
  ],
  "stats": {
    "total": 132,
    "additions": 56,
    "deletions": 76
  },
  "files": [
    {
      "sha": "2e6b47e93e9f5b5bea01f6879ca638eb77a8ba84",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -1,3 +1,24 @@\n+2019-06-25  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-winsource.c\n+\t(tui_source_window_base::do_scroll_horizontal): Remove direction\n+\tparameter.\n+\t* tui/tui-windata.c (tui_data_window::do_scroll_vertical): Remove\n+\tdirection parameter.\n+\t* tui/tui-win.c (tui_win_info::forward_scroll)\n+\t(tui_win_info::backward_scroll, tui_win_info::left_scroll)\n+\t(tui_win_info::right_scroll): Update.\n+\t* tui/tui-source.c (tui_source_window::do_scroll_vertical): Remove\n+\tdirection parameter.\n+\t* tui/tui-disasm.c (tui_disasm_window::do_scroll_vertical): Remove\n+\tdirection parameter.\n+\t* tui/tui-data.h (enum tui_scroll_direction): Remove.\n+\t(struct tui_win_info) <do_scroll_vertical, do_scroll_horizontal>:\n+\tRemove direction parameter.\n+\t(struct tui_source_window_base, struct tui_source_window)\n+\t(struct tui_disasm_window, struct tui_data_window)\n+\t(struct tui_cmd_window): Update.\n+\n 2019-06-25  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-winsource.h (tui_set_exec_info_content)"
    },
    {
      "sha": "59d1900c2bb59976fb9f49219b0a6de3abfabf20",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 9,
      "deletions": 28,
      "changes": 37,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -122,16 +122,6 @@ struct tui_gen_win_info\n #define MAX_TARGET_WIDTH  10\n #define MAX_PID_WIDTH     19\n \n-/* Scroll direction enum.  */\n-enum tui_scroll_direction\n-{\n-  FORWARD_SCROLL,\n-  BACKWARD_SCROLL,\n-  LEFT_SCROLL,\n-  RIGHT_SCROLL\n-};\n-\n-\n /* The kinds of layouts available.  */\n enum tui_layout_type\n {\n@@ -264,13 +254,11 @@ struct tui_win_info : public tui_gen_win_info\n \n   /* Scroll the contents vertically.  This is only called via\n      forward_scroll and backward_scroll.  */\n-  virtual void do_scroll_vertical (enum tui_scroll_direction,\n-\t\t\t\t   int num_to_scroll) = 0;\n+  virtual void do_scroll_vertical (int num_to_scroll) = 0;\n \n   /* Scroll the contents horizontally.  This is only called via\n      left_scroll and right_scroll.  */\n-  virtual void do_scroll_horizontal (enum tui_scroll_direction,\n-\t\t\t\t     int num_to_scroll) = 0;\n+  virtual void do_scroll_horizontal (int num_to_scroll) = 0;\n \n public:\n \n@@ -337,8 +325,7 @@ struct tui_source_window_base : public tui_win_info\n   ~tui_source_window_base () override;\n   DISABLE_COPY_AND_ASSIGN (tui_source_window_base);\n \n-  void do_scroll_horizontal (enum tui_scroll_direction,\n-\t\t\t     int num_to_scroll) override;\n+  void do_scroll_horizontal (int num_to_scroll) override;\n \n public:\n \n@@ -396,8 +383,7 @@ struct tui_source_window : public tui_source_window_base\n \n protected:\n \n-  void do_scroll_vertical (enum tui_scroll_direction,\n-\t\t\t   int num_to_scroll) override;\n+  void do_scroll_vertical (int num_to_scroll) override;\n };\n \n /* A TUI disassembly window.  */\n@@ -418,8 +404,7 @@ struct tui_disasm_window : public tui_source_window_base\n \n protected:\n \n-  void do_scroll_vertical (enum tui_scroll_direction,\n-\t\t\t   int num_to_scroll) override;\n+  void do_scroll_vertical (int num_to_scroll) override;\n };\n \n struct tui_data_window : public tui_win_info\n@@ -457,10 +442,8 @@ struct tui_data_window : public tui_win_info\n \n protected:\n \n-  void do_scroll_vertical (enum tui_scroll_direction,\n-\t\t\t   int num_to_scroll) override;\n-  void do_scroll_horizontal (enum tui_scroll_direction,\n-\t\t\t     int num_to_scroll) override\n+  void do_scroll_vertical (int num_to_scroll) override;\n+  void do_scroll_horizontal (int num_to_scroll) override\n   {\n   }\n };\n@@ -495,13 +478,11 @@ struct tui_cmd_window : public tui_win_info\n \n protected:\n \n-  void do_scroll_vertical (enum tui_scroll_direction,\n-\t\t\t   int num_to_scroll) override\n+  void do_scroll_vertical (int num_to_scroll) override\n   {\n   }\n \n-  void do_scroll_horizontal (enum tui_scroll_direction,\n-\t\t\t     int num_to_scroll) override\n+  void do_scroll_horizontal (int num_to_scroll) override\n   {\n   }\n };"
    },
    {
      "sha": "b3d39ea8031b9a74419fa4616c632b261fb8bb79",
      "filename": "gdb/tui/tui-disasm.c",
      "status": "modified",
      "additions": 6,
      "deletions": 7,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-disasm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-disasm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-disasm.c?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -371,22 +371,21 @@ tui_get_low_disassembly_address (struct gdbarch *gdbarch,\n \n /* Scroll the disassembly forward or backward vertically.  */\n void\n-tui_disasm_window::do_scroll_vertical\n-  (enum tui_scroll_direction scroll_direction, int num_to_scroll)\n+tui_disasm_window::do_scroll_vertical (int num_to_scroll)\n {\n   if (content != NULL)\n     {\n       CORE_ADDR pc;\n       struct tui_line_or_address val;\n-      int dir;\n \n       pc = content[0]->which_element.source.line_or_addr.u.addr;\n-      num_to_scroll++;\n-      dir = (scroll_direction == FORWARD_SCROLL)\n-\t? num_to_scroll : -num_to_scroll;\n+      if (num_to_scroll >= 0)\n+\tnum_to_scroll++;\n+      else\n+\t--num_to_scroll;\n \n       val.loa = LOA_ADDRESS;\n-      val.u.addr = tui_find_disassembly_address (gdbarch, pc, dir);\n+      val.u.addr = tui_find_disassembly_address (gdbarch, pc, num_to_scroll);\n       tui_update_source_window_as_is (this, gdbarch,\n \t\t\t\t      NULL, val, FALSE);\n     }"
    },
    {
      "sha": "54e53cf8dbd75ff63c7ff9263218f0faeb38365c",
      "filename": "gdb/tui/tui-source.c",
      "status": "modified",
      "additions": 10,
      "deletions": 19,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-source.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-source.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-source.c?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -308,8 +308,7 @@ tui_source_is_displayed (const char *fullname)\n \n /* Scroll the source forward or backward vertically.  */\n void\n-tui_source_window::do_scroll_vertical\n-  (enum tui_scroll_direction scroll_direction, int num_to_scroll)\n+tui_source_window::do_scroll_vertical (int num_to_scroll)\n {\n   if (content != NULL)\n     {\n@@ -323,23 +322,15 @@ tui_source_window::do_scroll_vertical\n \ts = cursal.symtab;\n \n       l.loa = LOA_LINE;\n-      if (scroll_direction == FORWARD_SCROLL)\n-\t{\n-\t  l.u.line_no = content[0]->which_element.source.line_or_addr.u.line_no\n-\t    + num_to_scroll;\n-\t  if (l.u.line_no > s->nlines)\n-\t    /* line = s->nlines - win_info->content_size + 1; */\n-\t    /* elz: fix for dts 23398.  */\n-\t    l.u.line_no\n-\t      = content[0]->which_element.source.line_or_addr.u.line_no;\n-\t}\n-      else\n-\t{\n-\t  l.u.line_no = content[0]->which_element.source.line_or_addr.u.line_no\n-\t    - num_to_scroll;\n-\t  if (l.u.line_no <= 0)\n-\t    l.u.line_no = 1;\n-\t}\n+      l.u.line_no = content[0]->which_element.source.line_or_addr.u.line_no\n+\t+ num_to_scroll;\n+      if (l.u.line_no > s->nlines)\n+\t/* line = s->nlines - win_info->content_size + 1; */\n+\t/* elz: fix for dts 23398.  */\n+\tl.u.line_no\n+\t  = content[0]->which_element.source.line_or_addr.u.line_no;\n+      if (l.u.line_no <= 0)\n+\tl.u.line_no = 1;\n \n       print_source_lines (s, l.u.line_no, l.u.line_no + 1, 0);\n     }"
    },
    {
      "sha": "22938b41f24f8fabf57bed4c28cac68e4cd29b16",
      "filename": "gdb/tui/tui-win.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-win.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-win.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-win.c?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -475,7 +475,7 @@ tui_win_info::forward_scroll (int num_to_scroll)\n   if (num_to_scroll == 0)\n     num_to_scroll = height - 3;\n \n-  do_scroll_vertical (FORWARD_SCROLL, num_to_scroll);\n+  do_scroll_vertical (num_to_scroll);\n }\n \n void\n@@ -484,7 +484,7 @@ tui_win_info::backward_scroll (int num_to_scroll)\n   if (num_to_scroll == 0)\n     num_to_scroll = height - 3;\n \n-  do_scroll_vertical (BACKWARD_SCROLL, num_to_scroll);\n+  do_scroll_vertical (-num_to_scroll);\n }\n \n \n@@ -494,7 +494,7 @@ tui_win_info::left_scroll (int num_to_scroll)\n   if (num_to_scroll == 0)\n     num_to_scroll = 1;\n \n-  do_scroll_horizontal (LEFT_SCROLL, num_to_scroll);\n+  do_scroll_horizontal (num_to_scroll);\n }\n \n \n@@ -504,7 +504,7 @@ tui_win_info::right_scroll (int num_to_scroll)\n   if (num_to_scroll == 0)\n     num_to_scroll = 1;\n \n-  do_scroll_horizontal (RIGHT_SCROLL, num_to_scroll);\n+  do_scroll_horizontal (-num_to_scroll);\n }\n \n "
    },
    {
      "sha": "c5593454580a7f3630ce1321f69b27e4b8adc4a0",
      "filename": "gdb/tui/tui-windata.c",
      "status": "modified",
      "additions": 2,
      "deletions": 6,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-windata.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-windata.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-windata.c?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -243,8 +243,7 @@ tui_check_data_values (struct frame_info *frame)\n \n /* Scroll the data window vertically forward or backward.  */\n void\n-tui_data_window::do_scroll_vertical\n-  (enum tui_scroll_direction scroll_direction, int num_to_scroll)\n+tui_data_window::do_scroll_vertical (int num_to_scroll)\n {\n   int first_element_no;\n   int first_line = (-1);\n@@ -259,10 +258,7 @@ tui_data_window::do_scroll_vertical\n \n   if (first_line >= 0)\n     {\n-      if (scroll_direction == FORWARD_SCROLL)\n-\tfirst_line += num_to_scroll;\n-      else\n-\tfirst_line -= num_to_scroll;\n+      first_line += num_to_scroll;\n       tui_erase_data_content (NULL);\n       tui_delete_data_content_windows ();\n       tui_display_data_from_line (first_line);"
    },
    {
      "sha": "e56fbcb76d6df069598b22c38c5ce47277bec0ee",
      "filename": "gdb/tui/tui-winsource.c",
      "status": "modified",
      "additions": 4,
      "deletions": 12,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-winsource.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3bd716ffc20cada32e8a18a209638b578d47f5e/gdb/tui/tui-winsource.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-winsource.c?ref=c3bd716ffc20cada32e8a18a209638b578d47f5e",
      "patch": "@@ -332,21 +332,13 @@ tui_source_window_base::refill ()\n /* Scroll the source forward or backward horizontally.  */\n \n void\n-tui_source_window_base::do_scroll_horizontal\n-  (enum tui_scroll_direction direction, int num_to_scroll)\n+tui_source_window_base::do_scroll_horizontal (int num_to_scroll)\n {\n   if (content != NULL)\n     {\n-      int offset;\n-\n-      if (direction == LEFT_SCROLL)\n-\toffset = horizontal_offset + num_to_scroll;\n-      else\n-\t{\n-\t  offset = horizontal_offset - num_to_scroll;\n-\t  if (offset < 0)\n-\t    offset = 0;\n-\t}\n+      int offset = horizontal_offset + num_to_scroll;\n+      if (offset < 0)\n+\toffset = 0;\n       horizontal_offset = offset;\n       refill ();\n     }"
    }
  ]
}