{
  "sha": "b270168504d91292ec7089056ce32c68ad6c28a7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjI3MDE2ODUwNGQ5MTI5MmVjNzA4OTA1NmNlMzJjNjhhZDZjMjhhNw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-10-09T01:41:45Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-10-09T01:41:45Z"
    },
    "message": "Style more output of \"disassemble\" command\n\nI noticed a couple of spots where the \"disassemble\" could style its\noutput, but currently does not.  This patch adds styling to the\nfunction name at the start of the disassembly, and any addresses\nprinted there.\n\ngdb/ChangeLog\n2020-10-08  Tom Tromey  <tom@tromey.com>\n\n\t* cli/cli-cmds.c (print_disassembly): Style function name and\n\taddresses.  Add _() wrappers.\n\ngdb/testsuite/ChangeLog\n2020-10-08  Tom Tromey  <tom@tromey.com>\n\n\t* gdb.base/style.exp: Check that \"main\"'s name is styled.",
    "tree": {
      "sha": "636d9955d55eb696ce11f358a68764da88f884ab",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/636d9955d55eb696ce11f358a68764da88f884ab"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b270168504d91292ec7089056ce32c68ad6c28a7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b270168504d91292ec7089056ce32c68ad6c28a7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b270168504d91292ec7089056ce32c68ad6c28a7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b270168504d91292ec7089056ce32c68ad6c28a7/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b3d3944ee56d22337e30333ad1aa3864e38efa21",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b3d3944ee56d22337e30333ad1aa3864e38efa21",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b3d3944ee56d22337e30333ad1aa3864e38efa21"
    }
  ],
  "stats": {
    "total": 36,
    "additions": 27,
    "deletions": 9
  },
  "files": [
    {
      "sha": "cba2c27c0e176475aa0e8ff54d033df48bee3dfd",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=b270168504d91292ec7089056ce32c68ad6c28a7",
      "patch": "@@ -1,3 +1,8 @@\n+2020-10-08  Tom Tromey  <tom@tromey.com>\n+\n+\t* cli/cli-cmds.c (print_disassembly): Style function name and\n+\taddresses.  Add _() wrappers.\n+\n 2020-10-08  Shahab Vahedi  <shahab@synopsys.com>\n \n \t* NEWS: Mention ARC support in GDBserver."
    },
    {
      "sha": "352abd0a634a577abe51b5987599395cb4179b72",
      "filename": "gdb/cli/cli-cmds.c",
      "status": "modified",
      "additions": 14,
      "deletions": 8,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/cli/cli-cmds.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/cli/cli-cmds.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-cmds.c?ref=b270168504d91292ec7089056ce32c68ad6c28a7",
      "patch": "@@ -1395,14 +1395,18 @@ print_disassembly (struct gdbarch *gdbarch, const char *name,\n   else\n #endif\n     {\n-      printf_filtered (\"Dump of assembler code \");\n+      printf_filtered (_(\"Dump of assembler code \"));\n       if (name != NULL)\n-\tprintf_filtered (\"for function %s:\\n\", name);\n+\tprintf_filtered (_(\"for function %ps:\\n\"),\n+\t\t\t styled_string (function_name_style.style (), name));\n       if (block == nullptr || BLOCK_CONTIGUOUS_P (block))\n         {\n \t  if (name == NULL)\n-\t    printf_filtered (\"from %s to %s:\\n\",\n-\t\t\t     paddress (gdbarch, low), paddress (gdbarch, high));\n+\t    printf_filtered (_(\"from %ps to %ps:\\n\"),\n+\t\t\t     styled_string (address_style.style (),\n+\t\t\t\t\t    paddress (gdbarch, low)),\n+\t\t\t     styled_string (address_style.style (),\n+\t\t\t\t\t    paddress (gdbarch, high)));\n \n \t  /* Dump the specified range.  */\n \t  gdb_disassembly (gdbarch, current_uiout, flags, -1, low, high);\n@@ -1413,14 +1417,16 @@ print_disassembly (struct gdbarch *gdbarch, const char *name,\n \t    {\n \t      CORE_ADDR range_low = BLOCK_RANGE_START (block, i);\n \t      CORE_ADDR range_high = BLOCK_RANGE_END (block, i);\n-\t      printf_filtered (_(\"Address range %s to %s:\\n\"),\n-\t\t\t       paddress (gdbarch, range_low),\n-\t\t\t       paddress (gdbarch, range_high));\n+\t      printf_filtered (_(\"Address range %ps to %ps:\\n\"),\n+\t\t\t       styled_string (address_style.style (),\n+\t\t\t\t\t      paddress (gdbarch, range_low)),\n+\t\t\t       styled_string (address_style.style (),\n+\t\t\t\t\t      paddress (gdbarch, range_high)));\n \t      gdb_disassembly (gdbarch, current_uiout, flags, -1,\n \t\t\t       range_low, range_high);\n \t    }\n \t}\n-      printf_filtered (\"End of assembler dump.\\n\");\n+      printf_filtered (_(\"End of assembler dump.\\n\"));\n     }\n }\n "
    },
    {
      "sha": "075fe2ff5a3a5f2cc696b59d369b33869ea7d551",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=b270168504d91292ec7089056ce32c68ad6c28a7",
      "patch": "@@ -1,3 +1,7 @@\n+2020-10-08  Tom Tromey  <tom@tromey.com>\n+\n+\t* gdb.base/style.exp: Check that \"main\"'s name is styled.\n+\n 2020-10-07  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.base/find.exp: Rename some tests."
    },
    {
      "sha": "ef9f7c80a5ac0f8fcd624e5574422fdf321a094c",
      "filename": "gdb/testsuite/gdb.base/style.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/testsuite/gdb.base/style.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b270168504d91292ec7089056ce32c68ad6c28a7/gdb/testsuite/gdb.base/style.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style.exp?ref=b270168504d91292ec7089056ce32c68ad6c28a7",
      "patch": "@@ -91,9 +91,12 @@ save_vars { env(TERM) } {\n \t    \"Defined at $base_file_expr:$macro_line\\r\\n#define SOME_MACRO 23\"\n     }\n \n+    set main [style main function]\n     set func [style some_called_function function]\n     # Somewhere should see the call to the function.\n-    gdb_test \"disassemble main\" \"[style $hex address].*$func.*\"\n+    gdb_test \"disassemble main\" \\\n+\t[concat \"Dump of assembler code for function $main:.*\" \\\n+\t     \"[style $hex address].*$func.*\"]\n \n     set ifield [style int_field variable]\n     set sfield [style string_field variable]"
    }
  ]
}