{
  "sha": "8baf3d07567f886be683aa26e3fc92346b604a93",
  "node_id": "C_kwDOANOeidoAKDhiYWYzZDA3NTY3Zjg4NmJlNjgzYWEyNmUzZmM5MjM0NmI2MDRhOTM",
  "commit": {
    "author": {
      "name": "Philipp Tomsich",
      "email": "philipp.tomsich@vrull.eu",
      "date": "2021-10-06T20:26:47Z"
    },
    "committer": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-10-07T09:09:28Z"
    },
    "message": "RISC-V: Support aliases for Zbs instructions\n\nAdd aliases for the non-immediate mnemonics of b{set,clr,inv,ext} to\nyencode the respective immediate insn b{set,clr,inv,ext}i when the\nsecond source operand is an immediate.\n\n2021-01-11  Philipp Tomsich  <philipp.tomsich@vrull.eu>\n\n    gas/\n\t* testsuite/gas/riscv/b-ext.d: Add tests.\n\t* testsuite/gas/riscv/b-ext.s: Likewise.\n\t* testsuite/gas/riscv/b-ext-64.d: Likewise.\n\t* testsuite/gas/riscv/b-ext-64.s: Likewise.\n    opcodes/\n        * riscv-opc.c (riscv_opcodes): Add aliases for Zbs.\n\nSuggested-by: Jan Beulich <jbeulich@suse.com>\nSigned-off-by: Philipp Tomsich <philipp.tomsich@vrull.eu>",
    "tree": {
      "sha": "13aefc58587c50e5d144f8d06d6e68de7719b2eb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/13aefc58587c50e5d144f8d06d6e68de7719b2eb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8baf3d07567f886be683aa26e3fc92346b604a93",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8baf3d07567f886be683aa26e3fc92346b604a93",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8baf3d07567f886be683aa26e3fc92346b604a93",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8baf3d07567f886be683aa26e3fc92346b604a93/comments",
  "author": {
    "login": "ptomsich",
    "id": 14983582,
    "node_id": "MDQ6VXNlcjE0OTgzNTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/14983582?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ptomsich",
    "html_url": "https://github.com/ptomsich",
    "followers_url": "https://api.github.com/users/ptomsich/followers",
    "following_url": "https://api.github.com/users/ptomsich/following{/other_user}",
    "gists_url": "https://api.github.com/users/ptomsich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ptomsich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ptomsich/subscriptions",
    "organizations_url": "https://api.github.com/users/ptomsich/orgs",
    "repos_url": "https://api.github.com/users/ptomsich/repos",
    "events_url": "https://api.github.com/users/ptomsich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ptomsich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": null,
  "parents": [
    {
      "sha": "9455c91957590ca6d4520cfe0955f9f9f1349f82",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9455c91957590ca6d4520cfe0955f9f9f1349f82",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9455c91957590ca6d4520cfe0955f9f9f1349f82"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 30,
    "deletions": 0
  },
  "files": [
    {
      "sha": "9b6e6b7ab2a0585af6b038076398d726798cf6ec",
      "filename": "gas/testsuite/gas/riscv/b-ext-64.d",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext-64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext-64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/b-ext-64.d?ref=8baf3d07567f886be683aa26e3fc92346b604a93",
      "patch": "@@ -62,3 +62,11 @@ Disassembly of section .text:\n [ \t]+[0-9a-f]+:[ \t]+28c59533[ \t]+bset[ \t]+a0,a1,a2\n [ \t]+[0-9a-f]+:[ \t]+68c59533[ \t]+binv[ \t]+a0,a1,a2\n [ \t]+[0-9a-f]+:[ \t]+48c5d533[ \t]+bext[ \t]+a0,a1,a2\n+[ \t]+[0-9a-f]+:[ \t]+49f59513[ \t]+bclri[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+29f59513[ \t]+bseti[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+69f59513[ \t]+binvi[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+49f5d513[ \t]+bexti[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+4bf59513[ \t]+bclri[ \t]+a0,a1,0x3f\n+[ \t]+[0-9a-f]+:[ \t]+2bf59513[ \t]+bseti[ \t]+a0,a1,0x3f\n+[ \t]+[0-9a-f]+:[ \t]+6bf59513[ \t]+binvi[ \t]+a0,a1,0x3f\n+[ \t]+[0-9a-f]+:[ \t]+4bf5d513[ \t]+bexti[ \t]+a0,a1,0x3f"
    },
    {
      "sha": "57e501e9a41ff95e85c1bf2c3527985007d7634f",
      "filename": "gas/testsuite/gas/riscv/b-ext-64.s",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext-64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext-64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/b-ext-64.s?ref=8baf3d07567f886be683aa26e3fc92346b604a93",
      "patch": "@@ -53,3 +53,12 @@ target:\n \tbset    a0, a1, a2\n \tbinv    a0, a1, a2\n \tbext    a0, a1, a2\n+\t#aliases\n+\tbclr    a0, a1, 31\n+\tbset    a0, a1, 31\n+\tbinv    a0, a1, 31\n+\tbext    a0, a1, 31\n+\tbclr    a0, a1, 63\n+\tbset    a0, a1, 63\n+\tbinv    a0, a1, 63\n+\tbext    a0, a1, 63"
    },
    {
      "sha": "c1c5f918a841993292cdf9793025b1e0ff74dcf1",
      "filename": "gas/testsuite/gas/riscv/b-ext.d",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/b-ext.d?ref=8baf3d07567f886be683aa26e3fc92346b604a93",
      "patch": "@@ -45,3 +45,7 @@ Disassembly of section .text:\n [ \t]+[0-9a-f]+:[ \t]+28c59533[ \t]+bset[ \t]+a0,a1,a2\n [ \t]+[0-9a-f]+:[ \t]+68c59533[ \t]+binv[ \t]+a0,a1,a2\n [ \t]+[0-9a-f]+:[ \t]+48c5d533[ \t]+bext[ \t]+a0,a1,a2\n+[ \t]+[0-9a-f]+:[ \t]+49f59513[ \t]+bclri[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+29f59513[ \t]+bseti[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+69f59513[ \t]+binvi[ \t]+a0,a1,0x1f\n+[ \t]+[0-9a-f]+:[ \t]+49f5d513[ \t]+bexti[ \t]+a0,a1,0x1f"
    },
    {
      "sha": "9de3fc328064265e0435da17e5f27e0afb6b9b4a",
      "filename": "gas/testsuite/gas/riscv/b-ext.s",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8baf3d07567f886be683aa26e3fc92346b604a93/gas/testsuite/gas/riscv/b-ext.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/b-ext.s?ref=8baf3d07567f886be683aa26e3fc92346b604a93",
      "patch": "@@ -36,3 +36,8 @@ target:\n \tbset    a0, a1, a2\n \tbinv    a0, a1, a2\n \tbext    a0, a1, a2\n+\t#aliases\n+\tbclr    a0, a1, 31\n+\tbset    a0, a1, 31\n+\tbinv    a0, a1, 31\n+\tbext    a0, a1, 31"
    },
    {
      "sha": "b756bae64ab8687467604287c2c7a41e8df39b2c",
      "filename": "opcodes/riscv-opc.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8baf3d07567f886be683aa26e3fc92346b604a93/opcodes/riscv-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8baf3d07567f886be683aa26e3fc92346b604a93/opcodes/riscv-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/riscv-opc.c?ref=8baf3d07567f886be683aa26e3fc92346b604a93",
      "patch": "@@ -839,9 +839,13 @@ const struct riscv_opcode riscv_opcodes[] =\n {\"binvi\",     0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BINVI, MASK_BINVI, match_opcode, 0 },\n {\"bexti\",     0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BEXTI, MASK_BEXTI, match_opcode, 0 },\n {\"bclr\",      0, INSN_CLASS_ZBS,   \"d,s,t\",  MATCH_BCLR, MASK_BCLR, match_opcode, 0 },\n+{\"bclr\",      0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BCLRI, MASK_BCLRI, match_opcode, INSN_ALIAS },\n {\"bset\",      0, INSN_CLASS_ZBS,   \"d,s,t\",  MATCH_BSET, MASK_BSET, match_opcode, 0 },\n+{\"bset\",      0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BSETI, MASK_BSETI, match_opcode, INSN_ALIAS },\n {\"binv\",      0, INSN_CLASS_ZBS,   \"d,s,t\",  MATCH_BINV, MASK_BINV, match_opcode, 0 },\n+{\"binv\",      0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BINVI, MASK_BINVI, match_opcode, INSN_ALIAS },\n {\"bext\",      0, INSN_CLASS_ZBS,   \"d,s,t\",  MATCH_BEXT, MASK_BEXT, match_opcode, 0 },\n+{\"bext\",      0, INSN_CLASS_ZBS,   \"d,s,>\",  MATCH_BEXTI, MASK_BEXTI, match_opcode, INSN_ALIAS },\n \n /* Terminate the list.  */\n {0, 0, INSN_CLASS_NONE, 0, 0, 0, 0, 0}"
    }
  ]
}