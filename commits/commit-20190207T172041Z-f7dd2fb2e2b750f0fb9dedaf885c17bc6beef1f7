{
  "sha": "f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjdkZDJmYjJlMmI3NTBmMGZiOWRlZGFmODg1YzE3YmM2YmVlZjFmNw==",
  "commit": {
    "author": {
      "name": "Tamar Christina",
      "email": "tamar.christina@arm.com",
      "date": "2019-02-07T17:12:23Z"
    },
    "committer": {
      "name": "Tamar Christina",
      "email": "tamar.christina@arm.com",
      "date": "2019-02-07T17:20:41Z"
    },
    "message": "Arm: Backport hlt to all architectures.\n\nThe software trap instruction HLT that was introduced in Armv8-a is used\nas the semihosting trap instruction in AArch64.  In order to allow systems\nconfigured to run AArch64 code to also run AArch32 with semihosting it was\ndecided that AArch32 should also use HLT in the case of the \"mixed mode\"\nenvironment.  This requires that HLT also be backported to all earlier\narchitectures.  The instruction is in the undefined encoding space earlier\narchitectures but must trigger a semihosting trap [3].\n\nThe Arm Architectural Reference Manual [1] doesn't explicitly mention this\nhowever this is an explicit requirement in the Semihosting-v2 protocol [2].\n\n[1] https://developer.arm.com/docs/ddi0487/latest/arm-architecture-reference-manual-armv8-for-armv8-a-architecture-profile\n[2] https://developer.arm.com/docs/100863/latest/the-semihosting-interface\n[3] https://github.com/qemu/qemu/commit/19a6e31c9d2701ef648b70ddcfc3bf64cec8c37e\n\ngas/ChangeLog:\n\n\t* config/tc-arm.c (insns): Redefine THUMB_VARIANT and ARM_VARIANT for\n\thlt to armv1.\n\t* testsuite/gas/arm/armv8a-automatic-hlt.d: Update TAGs\n\t* testsuite/gas/arm/hlt.d: New test.\n\t* testsuite/gas/arm/hlt.s: New test.\n\nopcodes/ChangeLog:\n\n\t* arm-dis.c (arm_opcodes): Redefine hlt to armv1.",
    "tree": {
      "sha": "e94bcaf98363e67b9cf0785d0d96d7d6c9f41658",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e94bcaf98363e67b9cf0785d0d96d7d6c9f41658"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/comments",
  "author": {
    "login": "TamarChristinaArm",
    "id": 48126768,
    "node_id": "MDQ6VXNlcjQ4MTI2NzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TamarChristinaArm",
    "html_url": "https://github.com/TamarChristinaArm",
    "followers_url": "https://api.github.com/users/TamarChristinaArm/followers",
    "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}",
    "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions",
    "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs",
    "repos_url": "https://api.github.com/users/TamarChristinaArm/repos",
    "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "TamarChristinaArm",
    "id": 48126768,
    "node_id": "MDQ6VXNlcjQ4MTI2NzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TamarChristinaArm",
    "html_url": "https://github.com/TamarChristinaArm",
    "followers_url": "https://api.github.com/users/TamarChristinaArm/followers",
    "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}",
    "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions",
    "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs",
    "repos_url": "https://api.github.com/users/TamarChristinaArm/repos",
    "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bd756351a6d3dcff9915c88c26dc0a5811907f90",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bd756351a6d3dcff9915c88c26dc0a5811907f90",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bd756351a6d3dcff9915c88c26dc0a5811907f90"
    }
  ],
  "stats": {
    "total": 87,
    "additions": 85,
    "deletions": 2
  },
  "files": [
    {
      "sha": "53f4c68d12c8add84064d032fd6afc78894d1736",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -1,3 +1,11 @@\n+2019-02-07  Tamar Christina  <tamar.christina@arm.com>\n+\n+\t* config/tc-arm.c (insns): Redefine THUMB_VARIANT and ARM_VARIANT for\n+\thlt to armv1.\n+\t* testsuite/gas/arm/armv8a-automatic-hlt.d: Update TAGs\n+\t* testsuite/gas/arm/hlt.d: New test.\n+\t* testsuite/gas/arm/hlt.s: New test.\n+\n 2019-02-07  Tamar Christina  <tamar.christina@arm.com>\n \n \t* testsuite/gas/aarch64/undefined_advsimd_armv8_3.d: New test."
    },
    {
      "sha": "e6600f6b10e6edee7c28cbebffff540326071578",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 12,
      "deletions": 1,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -20187,11 +20187,22 @@ static const struct asm_opcode insns[] =\n #define THUMB_VARIANT & arm_ext_v8\n \n  tCE(\"sevl\",\t320f005, _sevl,    0, (),\t\tnoargs,\tt_hint),\n- TUE(\"hlt\",\t1000070, ba80,     1, (oIffffb),\tbkpt,\tt_hlt),\n  TCE(\"ldaexd\",\t1b00e9f, e8d000ff, 3, (RRnpc, oRRnpc, RRnpcb),\n \t\t\t\t\t\t\tldrexd, t_ldrexd),\n  TCE(\"stlexd\",\t1a00e90, e8c000f0, 4, (RRnpc, RRnpc, oRRnpc, RRnpcb),\n \t\t\t\t\t\t\tstrexd, t_strexd),\n+\n+/* Defined in V8 but is in undefined encoding space for earlier\n+   architectures.  However earlier architectures are required to treat\n+   this instuction as a semihosting trap as well.  Hence while not explicitly\n+   defined as such, it is in fact correct to define the instruction for all\n+   architectures.  */\n+#undef  THUMB_VARIANT\n+#define THUMB_VARIANT  & arm_ext_v1\n+#undef  ARM_VARIANT\n+#define ARM_VARIANT  & arm_ext_v1\n+ TUE(\"hlt\",\t1000070, ba80,     1, (oIffffb),\tbkpt,\tt_hlt),\n+\n  /* ARMv8 T32 only.  */\n #undef  ARM_VARIANT\n #define ARM_VARIANT  NULL"
    },
    {
      "sha": "9ce94d36c92d8cd1d9daa50088a1d9fb9f4ddccd",
      "filename": "gas/testsuite/gas/arm/armv8a-automatic-hlt.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/armv8a-automatic-hlt.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/armv8a-automatic-hlt.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8a-automatic-hlt.d?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -5,4 +5,6 @@ Attribute Section: aeabi\n File Attributes\n   Tag_CPU_arch: v8\n   Tag_CPU_arch_profile: Application\n+  Tag_ARM_ISA_use: Yes\n   Tag_THUMB_ISA_use: Thumb-2\n+"
    },
    {
      "sha": "b05c1fb8d64786f46a859304762f9aecf2ca702f",
      "filename": "gas/testsuite/gas/arm/hlt.d",
      "status": "added",
      "additions": 35,
      "deletions": 0,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/hlt.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/hlt.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/hlt.d?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -0,0 +1,35 @@\n+#objdump: -d\n+# This test is only valid on ELF based ports.\n+#notarget: *-*-pe *-*-wince\n+\n+.*:     file format .*\n+\n+Disassembly of section \\.text:\n+\n+0+ <.*>:\n+[^:]+:\\s+ba80      \thlt\t0x0000\n+[^:]+:\\s+ba8f      \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+ba80      \thlt\t0x0000\n+[^:]+:\\s+ba8f      \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+ba80      \thlt\t0x0000\n+[^:]+:\\s+ba8f      \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+ba80      \thlt\t0x0000\n+[^:]+:\\s+ba8f      \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+ba80      \thlt\t0x0000\n+[^:]+:\\s+ba8f      \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f\n+[^:]+:\\s+e1000070 \thlt\t0x0000\n+[^:]+:\\s+e100007f \thlt\t0x000f"
    },
    {
      "sha": "02d1316bcac85c83b436ba6ed0f89fd71291f581",
      "filename": "gas/testsuite/gas/arm/hlt.s",
      "status": "added",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/hlt.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/gas/testsuite/gas/arm/hlt.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/hlt.s?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -0,0 +1,22 @@\n+# Test that hlt is available for all architectures.\n+.macro gen_for_arch arch, has_thumb\n+\t.arch \\arch\n+\t.ifc \"yes\",\"\\has_thumb\"\n+\t.thumb\n+\thlt\n+\thlt 0xf\n+\t.endif\n+\t.arm\n+\thlt\n+\thlt 0xf\n+.endm\n+\n+gen_for_arch armv8-a, yes\n+gen_for_arch armv7-a, yes\n+gen_for_arch armv6, yes\n+gen_for_arch armv5t, yes\n+gen_for_arch armv4t, yes\n+gen_for_arch armv3, no\n+gen_for_arch armv2, no\n+gen_for_arch armv1, no\n+"
    },
    {
      "sha": "84271305bbacc7a6072ee2a2e1ebd86538bb8cec",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -1,3 +1,7 @@\n+2019-02-07  Tamar Christina  <tamar.christina@arm.com>\n+\n+\t* arm-dis.c (arm_opcodes): Redefine hlt to armv1.\n+\n 2019-02-07  Tamar Christina  <tamar.christina@arm.com>\n \n \tPR binutils/23212"
    },
    {
      "sha": "71d7c524a22b0d93e5b0dd1573abbe158cd636e8",
      "filename": "opcodes/arm-dis.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/opcodes/arm-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7/opcodes/arm-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/arm-dis.c?ref=f7dd2fb2e2b750f0fb9dedaf885c17bc6beef1f7",
      "patch": "@@ -1788,7 +1788,8 @@ static const struct opcode32 arm_opcodes[] =\n   /* V8 instructions.  */\n   {ARM_FEATURE_CORE_LOW (ARM_EXT_V8),\n     0x0320f005, 0x0fffffff, \"sevl\"},\n-  {ARM_FEATURE_CORE_LOW (ARM_EXT_V8),\n+  /* Defined in V8 but is in NOP space so available to all arch.  */\n+  {ARM_FEATURE_CORE_LOW (ARM_EXT_V1),\n     0xe1000070, 0xfff000f0, \"hlt\\t0x%16-19X%12-15X%8-11X%0-3X\"},\n   {ARM_FEATURE_CORE_HIGH (ARM_EXT2_ATOMICS),\n     0x01800e90, 0x0ff00ff0, \"stlex%c\\t%12-15r, %0-3r, [%16-19R]\"},"
    }
  ]
}