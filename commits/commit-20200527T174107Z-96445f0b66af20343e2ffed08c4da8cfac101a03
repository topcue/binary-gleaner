{
  "sha": "96445f0b66af20343e2ffed08c4da8cfac101a03",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTY0NDVmMGI2NmFmMjAzNDNlMmZmZWQwOGM0ZGE4Y2ZhYzEwMWEwMw==",
  "commit": {
    "author": {
      "name": "Hannes Domani",
      "email": "ssbssa@yahoo.de",
      "date": "2020-05-13T10:41:51Z"
    },
    "committer": {
      "name": "Hannes Domani",
      "email": "ssbssa@yahoo.de",
      "date": "2020-05-27T17:41:07Z"
    },
    "message": "Use errno value of first openp failure\n\nFixes this testsuite fail on Windows:\nFAIL: gdb.base/bad-file.exp: directory\n\nIf both tries to open the file fail (without and with \".exe\"), use the\nerrno value of the first try.\n\ngdb/ChangeLog:\n\n2020-05-27  Hannes Domani  <ssbssa@yahoo.de>\n\n\t* exec.c (exec_file_attach): Use errno value of first openp failure.",
    "tree": {
      "sha": "92fa1c9c93b5b931c3c96da1e93a6a54b4058c86",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/92fa1c9c93b5b931c3c96da1e93a6a54b4058c86"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/96445f0b66af20343e2ffed08c4da8cfac101a03",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/96445f0b66af20343e2ffed08c4da8cfac101a03",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/96445f0b66af20343e2ffed08c4da8cfac101a03",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/96445f0b66af20343e2ffed08c4da8cfac101a03/comments",
  "author": {
    "login": "ssbssa",
    "id": 40947,
    "node_id": "MDQ6VXNlcjQwOTQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/40947?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ssbssa",
    "html_url": "https://github.com/ssbssa",
    "followers_url": "https://api.github.com/users/ssbssa/followers",
    "following_url": "https://api.github.com/users/ssbssa/following{/other_user}",
    "gists_url": "https://api.github.com/users/ssbssa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ssbssa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ssbssa/subscriptions",
    "organizations_url": "https://api.github.com/users/ssbssa/orgs",
    "repos_url": "https://api.github.com/users/ssbssa/repos",
    "events_url": "https://api.github.com/users/ssbssa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ssbssa/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "ssbssa",
    "id": 40947,
    "node_id": "MDQ6VXNlcjQwOTQ3",
    "avatar_url": "https://avatars.githubusercontent.com/u/40947?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ssbssa",
    "html_url": "https://github.com/ssbssa",
    "followers_url": "https://api.github.com/users/ssbssa/followers",
    "following_url": "https://api.github.com/users/ssbssa/following{/other_user}",
    "gists_url": "https://api.github.com/users/ssbssa/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ssbssa/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ssbssa/subscriptions",
    "organizations_url": "https://api.github.com/users/ssbssa/orgs",
    "repos_url": "https://api.github.com/users/ssbssa/repos",
    "events_url": "https://api.github.com/users/ssbssa/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ssbssa/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6479bf854a468c0270bb0fcdc9d0271cca3eb5b5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6479bf854a468c0270bb0fcdc9d0271cca3eb5b5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6479bf854a468c0270bb0fcdc9d0271cca3eb5b5"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 7,
    "deletions": 0
  },
  "files": [
    {
      "sha": "2f2958c599bca904dc47e6e10e5982bdfa1c23b9",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/96445f0b66af20343e2ffed08c4da8cfac101a03/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/96445f0b66af20343e2ffed08c4da8cfac101a03/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=96445f0b66af20343e2ffed08c4da8cfac101a03",
      "patch": "@@ -1,3 +1,7 @@\n+2020-05-27  Hannes Domani  <ssbssa@yahoo.de>\n+\n+\t* exec.c (exec_file_attach): Use errno value of first openp failure.\n+\n 2020-05-27  Hannes Domani  <ssbssa@yahoo.de>\n \n \t* nat/windows-nat.c (windows_thread_info::~windows_thread_info):"
    },
    {
      "sha": "ee13c5e027efc29eb07843b8c5474e60fd6a043d",
      "filename": "gdb/exec.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/96445f0b66af20343e2ffed08c4da8cfac101a03/gdb/exec.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/96445f0b66af20343e2ffed08c4da8cfac101a03/gdb/exec.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/exec.c?ref=96445f0b66af20343e2ffed08c4da8cfac101a03",
      "patch": "@@ -435,6 +435,7 @@ exec_file_attach (const char *filename, int from_tty)\n #if defined(__GO32__) || defined(_WIN32) || defined(__CYGWIN__)\n \t  if (scratch_chan < 0)\n \t    {\n+\t      int first_errno = errno;\n \t      char *exename = (char *) alloca (strlen (filename) + 5);\n \n \t      strcat (strcpy (exename, filename), \".exe\");\n@@ -443,6 +444,8 @@ exec_file_attach (const char *filename, int from_tty)\n \t\t\t\t    O_RDWR | O_BINARY\n \t\t\t\t    : O_RDONLY | O_BINARY,\n \t\t\t\t    &scratch_storage);\n+\t      if (scratch_chan < 0)\n+\t\terrno = first_errno;\n \t    }\n #endif\n \t  if (scratch_chan < 0)"
    }
  ]
}