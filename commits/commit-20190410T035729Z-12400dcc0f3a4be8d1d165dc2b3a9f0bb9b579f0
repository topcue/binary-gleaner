{
  "sha": "12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTI0MDBkY2MwZjNhNGJlOGQxZDE2NWRjMmIzYTlmMGJiOWI1NzlmMA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-08T07:27:51Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-10T03:57:29Z"
    },
    "message": "te-cloudabi.h\n\nThis patch is aimed a fixing large numbers of x86_64-cloudabi failures\ncaused by gas selecting the wrong target name.\n\n\t* config/te-cloudabi.h: New file.\n\t* config/tc-aarch64.c (aarch64_after_parse_args): Use TE_CLOUDABI\n\trather than TARGET_OS to select cloudabi.\n\t* config/tc-i386.h (ELF_TARGET_FORMAT64): Define for TE_CLOUDABI.\n\t* configure.tgt (*-*-cloudabi*): Set em=cloudabi.",
    "tree": {
      "sha": "76e5bfaf40fc0f88664461409de69e04b018a0a5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/76e5bfaf40fc0f88664461409de69e04b018a0a5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "789ce185ac3353ed5bc21dd8ea70a8094e4876d5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/789ce185ac3353ed5bc21dd8ea70a8094e4876d5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/789ce185ac3353ed5bc21dd8ea70a8094e4876d5"
    }
  ],
  "stats": {
    "total": 47,
    "additions": 41,
    "deletions": 6
  },
  "files": [
    {
      "sha": "4ca3bae8c86df8424891a13122f1d2bb3a85b196",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
      "patch": "@@ -1,3 +1,11 @@\n+2019-04-10  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/te-cloudabi.h: New file.\n+\t* config/tc-aarch64.c (aarch64_after_parse_args): Use TE_CLOUDABI\n+\trather than TARGET_OS to select cloudabi.\n+\t* config/tc-i386.h (ELF_TARGET_FORMAT64): Define for TE_CLOUDABI.\n+\t* configure.tgt (*-*-cloudabi*): Set em=cloudabi.\n+\n 2019-04-09  Robert Suchanek  <robert.suchanek@mips.com>\n \n \t* testsuite/gas/mips/mips.exp: Run hwr-names test."
    },
    {
      "sha": "8008cd8294a39e2688976c884fdbc85c7edf4178",
      "filename": "gas/config/tc-aarch64.c",
      "status": "modified",
      "additions": 8,
      "deletions": 5,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/tc-aarch64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/tc-aarch64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-aarch64.c?ref=12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
      "patch": "@@ -8331,15 +8331,18 @@ aarch64_after_parse_args (void)\n const char *\n elf64_aarch64_target_format (void)\n {\n-  if (strcmp (TARGET_OS, \"cloudabi\") == 0)\n-    {\n-      /* FIXME: What to do for ilp32_p ?  */\n-      return target_big_endian ? \"elf64-bigaarch64-cloudabi\" : \"elf64-littleaarch64-cloudabi\";\n-    }\n+#ifdef TE_CLOUDABI\n+  /* FIXME: What to do for ilp32_p ?  */\n+  if (target_big_endian)\n+    return \"elf64-bigaarch64-cloudabi\";\n+  else\n+    return \"elf64-littleaarch64-cloudabi\";\n+#else\n   if (target_big_endian)\n     return ilp32_p ? \"elf32-bigaarch64\" : \"elf64-bigaarch64\";\n   else\n     return ilp32_p ? \"elf32-littleaarch64\" : \"elf64-littleaarch64\";\n+#endif\n }\n \n void"
    },
    {
      "sha": "b02a25671f5978546c5d7f6930ff09729796862e",
      "filename": "gas/config/tc-i386.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/tc-i386.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/tc-i386.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.h?ref=12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
      "patch": "@@ -63,6 +63,8 @@ extern unsigned long i386_mach (void);\n #define ELF_TARGET_FORMAT\t\"elf32-i386-nacl\"\n #define ELF_TARGET_FORMAT32\t\"elf32-x86-64-nacl\"\n #define ELF_TARGET_FORMAT64\t\"elf64-x86-64-nacl\"\n+#elif defined TE_CLOUDABI\n+#define ELF_TARGET_FORMAT64\t\"elf64-x86-64-cloudabi\"\n #endif\n \n #ifdef TE_SOLARIS"
    },
    {
      "sha": "6ddbbd6b436d19b68d5476bc0dd268bd0ae5d9f2",
      "filename": "gas/config/te-cloudabi.h",
      "status": "added",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/te-cloudabi.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/config/te-cloudabi.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/te-cloudabi.h?ref=12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
      "patch": "@@ -0,0 +1,22 @@\n+/* Copyright (C) 2019 Free Software Foundation, Inc.\n+\n+   This file is part of GAS, the GNU Assembler.\n+\n+   GAS is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as\n+   published by the Free Software Foundation; either version 3,\n+   or (at your option) any later version.\n+\n+   GAS is distributed in the hope that it will be useful, but\n+   WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See\n+   the GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GAS; see the file COPYING.  If not, write to the Free\n+   Software Foundation, 51 Franklin Street - Fifth Floor, Boston, MA\n+   02110-1301, USA.  */\n+\n+#define TE_CLOUDABI\n+\n+#include \"obj-format.h\""
    },
    {
      "sha": "2d08c09de91e503fb63f025264c7e3cce2f35545",
      "filename": "gas/configure.tgt",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/configure.tgt",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0/gas/configure.tgt",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/configure.tgt?ref=12400dcc0f3a4be8d1d165dc2b3a9f0bb9b579f0",
      "patch": "@@ -423,7 +423,7 @@ case ${generic_target} in\n   z8k-*-coff | z8k-*-sim)\t\tfmt=coff ;;\n \n   *-*-aout | *-*-scout)\t\t\tfmt=aout ;;\n-  *-*-cloudabi*)\t\t\tfmt=elf ;;\n+  *-*-cloudabi*)\t\t\tfmt=elf em=cloudabi ;;\n   *-*-dragonfly*)\t\t\tfmt=elf em=dragonfly ;;\n   *-*-freebsd* | *-*-kfreebsd*-gnu)\tfmt=elf em=freebsd ;;\n   *-*-generic)\t\t\t\tfmt=generic ;;"
    }
  ]
}