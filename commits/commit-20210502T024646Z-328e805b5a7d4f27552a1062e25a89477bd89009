{
  "sha": "328e805b5a7d4f27552a1062e25a89477bd89009",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzI4ZTgwNWI1YTdkNGYyNzU1MmExMDYyZTI1YTg5NDc3YmQ4OTAwOQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2016-01-02T15:53:03Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-05-02T02:46:46Z"
    },
    "message": "sim: dv-sockser: localize init callback\n\nNow that we don't need to hardcode the module init list in a single\nplace, move the dv-sockser logic to the place to the one file.",
    "tree": {
      "sha": "0532236be2a3d105034f3ed30e1e3b818fbc6b91",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0532236be2a3d105034f3ed30e1e3b818fbc6b91"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/328e805b5a7d4f27552a1062e25a89477bd89009",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/328e805b5a7d4f27552a1062e25a89477bd89009",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/328e805b5a7d4f27552a1062e25a89477bd89009",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/328e805b5a7d4f27552a1062e25a89477bd89009/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "adbaa7b838d3f6de95ca2ec15d9ca419a383d2d4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/adbaa7b838d3f6de95ca2ec15d9ca419a383d2d4",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/adbaa7b838d3f6de95ca2ec15d9ca419a383d2d4"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 12,
    "deletions": 12
  },
  "files": [
    {
      "sha": "55d684bfeab8a7efd195f0b4e88aa82289d38463",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=328e805b5a7d4f27552a1062e25a89477bd89009",
      "patch": "@@ -1,3 +1,11 @@\n+2021-05-01  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* dv-sockser.c (dv_sockser_install): Rename to ...\n+\t(sim_install_dv_sockser): ... this.\n+\t* dv-sockser.h (dv_sockser_install): Delete.\n+\t* sim-module.c: Delete dv-sockser.h include.\n+\t(early_modules): Delete dv_sockser_install.\n+\n 2021-05-01  Mike Frysinger  <vapier@gentoo.org>\n \n \t* Make-common.in (LIB_OBJS): Add modules.o."
    },
    {
      "sha": "73c473b15c01a52b550fd101cbbe0f3fdfcd9304",
      "filename": "sim/common/dv-sockser.c",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/dv-sockser.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/dv-sockser.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/dv-sockser.c?ref=328e805b5a7d4f27552a1062e25a89477bd89009",
      "patch": "@@ -222,8 +222,11 @@ dv_sockser_uninstall (SIM_DESC sd)\n     }\n }\n \n+/* Provide a prototype to silence -Wmissing-prototypes.  */\n+extern MODULE_INIT_FN sim_install_dv_sockser;\n+\n SIM_RC\n-dv_sockser_install (SIM_DESC sd)\n+sim_install_dv_sockser (SIM_DESC sd)\n {\n   SIM_ASSERT (STATE_MAGIC (sd) == SIM_MAGIC_NUMBER);\n   if (sim_add_option_table (sd, NULL, sockser_options) != SIM_RC_OK)"
    },
    {
      "sha": "36ec0a970b158c0d3718a802c3c912d187483e4d",
      "filename": "sim/common/dv-sockser.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/dv-sockser.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/dv-sockser.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/dv-sockser.h?ref=328e805b5a7d4f27552a1062e25a89477bd89009",
      "patch": "@@ -34,8 +34,6 @@ int dv_sockser_write (SIM_DESC, unsigned char);\n int dv_sockser_write_buffer (SIM_DESC, const unsigned char *, unsigned);\n int dv_sockser_read (SIM_DESC);\n \n-SIM_RC dv_sockser_install (SIM_DESC);\n-\n #else\n \n /* If dv-sockser isn't available, provide stub functions.  */"
    },
    {
      "sha": "2557697fff2bac881c21a9d0c70bda92830bf882",
      "filename": "sim/common/sim-module.c",
      "status": "modified",
      "additions": 0,
      "deletions": 9,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/sim-module.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/328e805b5a7d4f27552a1062e25a89477bd89009/sim/common/sim-module.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-module.c?ref=328e805b5a7d4f27552a1062e25a89477bd89009",
      "patch": "@@ -29,11 +29,6 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n #include \"sim-hw.h\"\n #endif\n \n-#ifdef HAVE_DV_SOCKSER\n-/* TODO: Shouldn't have device models here.  */\n-#include \"dv-sockser.h\"\n-#endif\n-\n #include \"libiberty.h\"\n \n #include <stdlib.h>\n@@ -60,10 +55,6 @@ static MODULE_INSTALL_FN * const early_modules[] = {\n #if WITH_HW\n   sim_hw_install,\n #endif\n-#ifdef HAVE_DV_SOCKSER\n-  /* TODO: Shouldn't have device models here.  */\n-  dv_sockser_install,\n-#endif\n };\n static int early_modules_len = ARRAY_SIZE (early_modules);\n "
    }
  ]
}