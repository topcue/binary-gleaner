{
  "sha": "e7e40cedbb0508aa788e509075b9ba50c3af07ba",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTdlNDBjZWRiYjA1MDhhYTc4OGU1MDkwNzViOWJhNTBjM2FmMDdiYQ==",
  "commit": {
    "author": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-05-10T19:06:50Z"
    },
    "committer": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-05-12T03:57:46Z"
    },
    "message": "Fix build failure in d10v sim\n\nWhile building all targets on Ubuntu 20.04/aarch64, I ran into the following\nbuild error:\n\nIn file included from /usr/include/string.h:495,\n                 from ../../bfd/bfd.h:48,\n                 from ../../../../repos/binutils-gdb/sim/d10v/interp.c:4:\nIn function memset,\n    inlined from sim_create_inferior at ../../../../repos/binutils-gdb/sim/d10v/interp.c:1146:3:\n/usr/include/aarch64-linux-gnu/bits/string_fortified.h:71:10: error: __builtin_memset offset [33, 616] from the object at State is out of the bounds of referenced subobject regs with type reg_t[16] {aka short unsigned int[16]} at offset 0 [-Werror=array-bounds]\n   71 |   return __builtin___memset_chk (__dest, __ch, __len, __bos0 (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ncc1: all warnings being treated as errors\nmake[3]: *** [Makefile:558: interp.o] Error 1\n\nThe following patch fixes this.\n\nsim/ChangeLog:\n\n2021-05-12  Luis Machado  <luis.machado@linaro.org>\n\n\t* d10v/interp.c (sim_create_inferior): Fix memset call.",
    "tree": {
      "sha": "07a8001801a9bb57527f4d685dc494366ee1e73f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/07a8001801a9bb57527f4d685dc494366ee1e73f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e7e40cedbb0508aa788e509075b9ba50c3af07ba",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e7e40cedbb0508aa788e509075b9ba50c3af07ba",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e7e40cedbb0508aa788e509075b9ba50c3af07ba",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e7e40cedbb0508aa788e509075b9ba50c3af07ba/comments",
  "author": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4a1ad5c9e439647917ebad6829b5965c13fc9aaa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4a1ad5c9e439647917ebad6829b5965c13fc9aaa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4a1ad5c9e439647917ebad6829b5965c13fc9aaa"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 11,
    "deletions": 2
  },
  "files": [
    {
      "sha": "96588c7a78057076e62e004fbc4cdf94ead9a253",
      "filename": "sim/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e7e40cedbb0508aa788e509075b9ba50c3af07ba/sim/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e7e40cedbb0508aa788e509075b9ba50c3af07ba/sim/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/ChangeLog?ref=e7e40cedbb0508aa788e509075b9ba50c3af07ba",
      "patch": "@@ -1,3 +1,7 @@\n+2021-05-12  Luis Machado  <luis.machado@linaro.org>\n+\n+\t* d10v/interp.c (sim_create_inferior): Fix memset call.\n+\n 2021-05-07  Dimitar Dimitrov  <dimitar@dinux.eu>\n \n \t* Makefile.in: Rebuild."
    },
    {
      "sha": "62507760af945bc9918811167085f676ab1a7a4b",
      "filename": "sim/d10v/interp.c",
      "status": "modified",
      "additions": 7,
      "deletions": 2,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e7e40cedbb0508aa788e509075b9ba50c3af07ba/sim/d10v/interp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e7e40cedbb0508aa788e509075b9ba50c3af07ba/sim/d10v/interp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/d10v/interp.c?ref=e7e40cedbb0508aa788e509075b9ba50c3af07ba",
      "patch": "@@ -13,6 +13,7 @@\n \n #include <string.h>\n #include <stdlib.h>\n+#include <assert.h>\n \n enum _leftright { LEFT_FIRST, RIGHT_FIRST };\n \n@@ -1142,8 +1143,12 @@ sim_create_inferior (SIM_DESC sd, struct bfd *abfd,\n {\n   bfd_vma start_address;\n \n-  /* reset all state information */\n-  memset (&State.regs, 0, (uintptr_t)&State.mem - (uintptr_t)&State.regs);\n+  /* Make sure we have the right structure for the following memset.  */\n+  static_assert ((uintptr_t) &State == (uintptr_t) &State.regs,\n+\t\t \"&State != &State.regs\");\n+\n+  /* Reset state from the regs field until the mem field.  */\n+  memset (&State, 0, (uintptr_t) &State.mem - (uintptr_t) &State.regs);\n \n   /* There was a hack here to copy the values of argc and argv into r0\n      and r1.  The values were also saved into some high memory that"
    }
  ]
}