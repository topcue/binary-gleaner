{
  "sha": "59d5613e42589c6515a0bfe9baae522f164d20fa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTlkNTYxM2U0MjU4OWM2NTE1YTBiZmU5YmFhZTUyMmYxNjRkMjBmYQ==",
  "commit": {
    "author": {
      "name": "Przemyslaw Wirkus",
      "email": "przemyslaw.wirkus@arm.com",
      "date": "2020-10-29T16:30:46Z"
    },
    "committer": {
      "name": "Przemyslaw Wirkus",
      "email": "przemyslaw.wirkus@arm.com",
      "date": "2020-10-29T16:33:00Z"
    },
    "message": "aarch64: Fix DSB instruction 'missing immediate expression' errors\n\nThis patch fixes errors with DSB instruction after introduction of DSB nXS\nvariant. That change would cause GAS to reject valid DSB immediate string\noperands.\n\ngas/ChangeLog:\n\n2020-10-28  Przemyslaw Wirkus  <przemyslaw.wirkus@arm.com>\n\n\t* config/tc-aarch64.c (parse_operands): Check for C0-C15 value of DSB\n\timmediate string operand.\n\t* testsuite/gas/aarch64/system-4.d: Update test.\n\t* testsuite/gas/aarch64/system-4.s: Update test.",
    "tree": {
      "sha": "150025b23981e09b19f099c8d8c38ea776d7aad4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/150025b23981e09b19f099c8d8c38ea776d7aad4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/59d5613e42589c6515a0bfe9baae522f164d20fa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/59d5613e42589c6515a0bfe9baae522f164d20fa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/59d5613e42589c6515a0bfe9baae522f164d20fa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/59d5613e42589c6515a0bfe9baae522f164d20fa/comments",
  "author": {
    "login": "PrzemekWirkus",
    "id": 6360720,
    "node_id": "MDQ6VXNlcjYzNjA3MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PrzemekWirkus",
    "html_url": "https://github.com/PrzemekWirkus",
    "followers_url": "https://api.github.com/users/PrzemekWirkus/followers",
    "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}",
    "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions",
    "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs",
    "repos_url": "https://api.github.com/users/PrzemekWirkus/repos",
    "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "PrzemekWirkus",
    "id": 6360720,
    "node_id": "MDQ6VXNlcjYzNjA3MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PrzemekWirkus",
    "html_url": "https://github.com/PrzemekWirkus",
    "followers_url": "https://api.github.com/users/PrzemekWirkus/followers",
    "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}",
    "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions",
    "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs",
    "repos_url": "https://api.github.com/users/PrzemekWirkus/repos",
    "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "76868f3606fb9de04f49c441c1e3cdd3e943a34d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/76868f3606fb9de04f49c441c1e3cdd3e943a34d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/76868f3606fb9de04f49c441c1e3cdd3e943a34d"
    }
  ],
  "stats": {
    "total": 35,
    "additions": 34,
    "deletions": 1
  },
  "files": [
    {
      "sha": "930a00c4c260738fc3dc7ee85306b848e4516d4f",
      "filename": "gas/config/tc-aarch64.c",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/config/tc-aarch64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/config/tc-aarch64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-aarch64.c?ref=59d5613e42589c6515a0bfe9baae522f164d20fa",
      "patch": "@@ -6714,7 +6714,11 @@ parse_operands (char *str, const aarch64_opcode *opcode)\n \t    {\n \t      /* Regular barriers accept options CRm (C0-C15).\n \t         DSB nXS barrier variant accepts values > 15.  */\n-\t      po_imm_or_fail (0, 15);\n+\t      if (val < 0 || val > 15)\n+\t      {\n+\t        set_syntax_error (_(\"the specified option is not accepted in DSB\"));\n+\t        goto failure;\n+\t      }\n \t    }\n \t  /* This is an extension to accept a 0..15 immediate.  */\n \t  if (val == PARSE_FAIL)"
    },
    {
      "sha": "ea6459f366209fe23877387773c8ff0aa0539155",
      "filename": "gas/testsuite/gas/aarch64/system.d",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/testsuite/gas/aarch64/system.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/testsuite/gas/aarch64/system.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/system.d?ref=59d5613e42589c6515a0bfe9baae522f164d20fa",
      "patch": "@@ -193,6 +193,20 @@ Disassembly of section \\.text:\n .*:\td5033fdf \tisb\n .*:\td503309f \tssbb\n .*:\td503349f \tpssbb\n+.*:\td503319f \tdsb\toshld\n+.*:\td503329f \tdsb\toshst\n+.*:\td503339f \tdsb\tosh\n+.*:\td503359f \tdsb\tnshld\n+.*:\td503369f \tdsb\tnshst\n+.*:\td503379f \tdsb\tnsh\n+.*:\td503389f \tdsb\t#0x08\n+.*:\td503399f \tdsb\tishld\n+.*:\td5033a9f \tdsb\tishst\n+.*:\td5033b9f \tdsb\tish\n+.*:\td5033c9f \tdsb\t#0x0c\n+.*:\td5033d9f \tdsb\tld\n+.*:\td5033e9f \tdsb\tst\n+.*:\td5033f9f \tdsb\tsy\n .*:\td8000000 \tprfm\tpldl1keep, 0 <LABEL1>\n .*: R_AARCH64_(P32_|)LD_PREL_LO19\tLABEL1\n .*:\tf8af6be0 \tprfm\tpldl1keep, \\[sp, x15\\]"
    },
    {
      "sha": "2cff6a2d1e64010b1fcdceb6ac270fef10343ee1",
      "filename": "gas/testsuite/gas/aarch64/system.s",
      "status": "modified",
      "additions": 15,
      "deletions": 0,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/testsuite/gas/aarch64/system.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/59d5613e42589c6515a0bfe9baae522f164d20fa/gas/testsuite/gas/aarch64/system.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/system.s?ref=59d5613e42589c6515a0bfe9baae522f164d20fa",
      "patch": "@@ -48,6 +48,21 @@\n \tssbb\n \tpssbb\n \n+\tdsb oshld\n+\tdsb oshst\n+\tdsb osh\n+\tdsb nshld\n+\tdsb nshst\n+\tdsb nsh\n+\tdsb #0x08\n+\tdsb ishld\n+\tdsb ishst\n+\tdsb ish\n+\tdsb #0x0c\n+\tdsb ld\n+\tdsb st\n+\tdsb sy\n+\n \t//\n \t// PREFETCHS\n \t//"
    }
  ]
}