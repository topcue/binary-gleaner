{
  "sha": "8f1bfdb44894423680a6d56a0994dafb4b82efca",
  "node_id": "C_kwDOANOeidoAKDhmMWJmZGI0NDg5NDQyMzY4MGE2ZDU2YTA5OTRkYWZiNGI4MmVmY2E",
  "commit": {
    "author": {
      "name": "Przemyslaw Wirkus",
      "email": "przemyslaw.wirkus@arm.com",
      "date": "2021-11-17T20:20:50Z"
    },
    "committer": {
      "name": "Przemyslaw Wirkus",
      "email": "przemyslaw.wirkus@arm.com",
      "date": "2021-11-17T20:20:50Z"
    },
    "message": "aarch64: [SME] Add new SME system registers\n\nThis patch is adding miscellaneous SME related system registers.\n\ngas/ChangeLog:\n\n\t* testsuite/gas/aarch64/sme-sysreg.d: New test.\n\t* testsuite/gas/aarch64/sme-sysreg.s: New test.\n\t* testsuite/gas/aarch64/sme-sysreg-illegal.d: New test.\n\t* testsuite/gas/aarch64/sme-sysreg-illegal.l: New test.\n\t* testsuite/gas/aarch64/sme-sysreg-illegal.s: New test.\n\nopcodes/ChangeLog:\n\n\t* aarch64-opc.c: New system registers id_aa64smfr0_el1,\n\tsmcr_el1, smcr_el12, smcr_el2, smcr_el3, smpri_el1,\n\tsmprimap_el2, smidr_el1, tpidr2_el0 and mpamsm_el1.",
    "tree": {
      "sha": "5bc29477c14c990a403f4711253df982b8315632",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5bc29477c14c990a403f4711253df982b8315632"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8f1bfdb44894423680a6d56a0994dafb4b82efca",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f1bfdb44894423680a6d56a0994dafb4b82efca",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8f1bfdb44894423680a6d56a0994dafb4b82efca",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f1bfdb44894423680a6d56a0994dafb4b82efca/comments",
  "author": {
    "login": "PrzemekWirkus",
    "id": 6360720,
    "node_id": "MDQ6VXNlcjYzNjA3MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PrzemekWirkus",
    "html_url": "https://github.com/PrzemekWirkus",
    "followers_url": "https://api.github.com/users/PrzemekWirkus/followers",
    "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}",
    "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions",
    "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs",
    "repos_url": "https://api.github.com/users/PrzemekWirkus/repos",
    "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "PrzemekWirkus",
    "id": 6360720,
    "node_id": "MDQ6VXNlcjYzNjA3MjA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6360720?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/PrzemekWirkus",
    "html_url": "https://github.com/PrzemekWirkus",
    "followers_url": "https://api.github.com/users/PrzemekWirkus/followers",
    "following_url": "https://api.github.com/users/PrzemekWirkus/following{/other_user}",
    "gists_url": "https://api.github.com/users/PrzemekWirkus/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/PrzemekWirkus/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/PrzemekWirkus/subscriptions",
    "organizations_url": "https://api.github.com/users/PrzemekWirkus/orgs",
    "repos_url": "https://api.github.com/users/PrzemekWirkus/repos",
    "events_url": "https://api.github.com/users/PrzemekWirkus/events{/privacy}",
    "received_events_url": "https://api.github.com/users/PrzemekWirkus/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3dd032c5fb4eb7fc6bc0341d348da5c75e2d8e38",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3dd032c5fb4eb7fc6bc0341d348da5c75e2d8e38",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3dd032c5fb4eb7fc6bc0341d348da5c75e2d8e38"
    }
  ],
  "stats": {
    "total": 73,
    "additions": 72,
    "deletions": 1
  },
  "files": [
    {
      "sha": "ff0e855ffff361cea49437080c1c607b5c650532",
      "filename": "gas/testsuite/gas/aarch64/sme-sysreg-illegal.d",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sme-sysreg-illegal.d?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -0,0 +1,3 @@\n+#as: -march=armv8-a+sme\n+#source: sme-sysreg-illegal.s\n+#warning_output: sme-sysreg-illegal.l"
    },
    {
      "sha": "6baad135ce6c731743e0ea5d11cfacc86b44f76d",
      "filename": "gas/testsuite/gas/aarch64/sme-sysreg-illegal.l",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sme-sysreg-illegal.l?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -0,0 +1,3 @@\n+[^:]*: Assembler messages:\n+[^:]*:[0-9]+: Warning: specified register cannot be written to at operand 1 -- `msr id_aa64smfr0_el1,x0'\n+[^:]*:[0-9]+: Warning: specified register cannot be written to at operand 1 -- `msr smidr_el1,x0'"
    },
    {
      "sha": "057a6bf0a7b42964b1230b122f9abac531c04260",
      "filename": "gas/testsuite/gas/aarch64/sme-sysreg-illegal.s",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg-illegal.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sme-sysreg-illegal.s?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -0,0 +1,3 @@\n+/* Write to r/o SME system registers.  */\n+msr id_aa64smfr0_el1, x0\n+msr smidr_el1, x0"
    },
    {
      "sha": "8eaf73ca82f1b17d3fd48ac67923edaab9e82fd4",
      "filename": "gas/testsuite/gas/aarch64/sme-sysreg.d",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sme-sysreg.d?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -0,0 +1,29 @@\n+#name: SME extension (system registers)\n+#as: -march=armv8-a+sme\n+#objdump: -dr\n+\n+.*:     file format .*\n+\n+Disassembly of section \\.text:\n+\n+0+ <.*>:\n+   0:\td53b4240 \tmrs\tx0, svcr\n+   4:\td53804a0 \tmrs\tx0, id_aa64smfr0_el1\n+   8:\td53812c0 \tmrs\tx0, smcr_el1\n+   c:\td53d12c0 \tmrs\tx0, smcr_el12\n+  10:\td53c12c0 \tmrs\tx0, smcr_el2\n+  14:\td53e12c0 \tmrs\tx0, smcr_el3\n+  18:\td5381280 \tmrs\tx0, smpri_el1\n+  1c:\td53c12a0 \tmrs\tx0, smprimap_el2\n+  20:\td53900c0 \tmrs\tx0, smidr_el1\n+  24:\td53bd0a0 \tmrs\tx0, tpidr2_el0\n+  28:\td538a560 \tmrs\tx0, mpamsm_el1\n+  2c:\td51b4240 \tmsr\tsvcr, x0\n+  30:\td51812c0 \tmsr\tsmcr_el1, x0\n+  34:\td51d12c0 \tmsr\tsmcr_el12, x0\n+  38:\td51c12c0 \tmsr\tsmcr_el2, x0\n+  3c:\td51e12c0 \tmsr\tsmcr_el3, x0\n+  40:\td5181280 \tmsr\tsmpri_el1, x0\n+  44:\td51c12a0 \tmsr\tsmprimap_el2, x0\n+  48:\td51bd0a0 \tmsr\ttpidr2_el0, x0\n+  4c:\td518a560 \tmsr\tmpamsm_el1, x0"
    },
    {
      "sha": "ce8a29420a2f020983e1c179960e672f912667e0",
      "filename": "gas/testsuite/gas/aarch64/sme-sysreg.s",
      "status": "added",
      "additions": 23,
      "deletions": 0,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/gas/testsuite/gas/aarch64/sme-sysreg.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sme-sysreg.s?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -0,0 +1,23 @@\n+/* Read SME system registers.  */\n+mrs x0, svcr\n+mrs x0, id_aa64smfr0_el1\n+mrs x0, smcr_el1\n+mrs x0, smcr_el12\n+mrs x0, smcr_el2\n+mrs x0, smcr_el3\n+mrs x0, smpri_el1\n+mrs x0, smprimap_el2\n+mrs x0, smidr_el1\n+mrs x0, tpidr2_el0\n+mrs x0, mpamsm_el1\n+\n+/* Write to SME system registers.  */\n+msr svcr, x0\n+msr smcr_el1, x0\n+msr smcr_el12, x0\n+msr smcr_el2, x0\n+msr smcr_el3, x0\n+msr smpri_el1, x0\n+msr smprimap_el2, x0\n+msr tpidr2_el0, x0\n+msr mpamsm_el1, x0"
    },
    {
      "sha": "923ddefe1f884243b80cc7993f2fded31cbd4d7c",
      "filename": "opcodes/aarch64-opc.c",
      "status": "modified",
      "additions": 11,
      "deletions": 1,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8f1bfdb44894423680a6d56a0994dafb4b82efca/opcodes/aarch64-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8f1bfdb44894423680a6d56a0994dafb4b82efca/opcodes/aarch64-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/aarch64-opc.c?ref=8f1bfdb44894423680a6d56a0994dafb4b82efca",
      "patch": "@@ -4826,7 +4826,17 @@ const aarch64_sys_reg aarch64_sys_regs [] =\n   SR_CORE (\"gpccr_el3\",     CPENC (3,6,C2,C1,6), 0),\n   SR_CORE (\"gptbr_el3\",     CPENC (3,6,C2,C1,4), 0),\n \n-  SR_SME (\"svcr\",           CPENC (3,3,C4,C2,2), 0),\n+  SR_SME (\"svcr\",             CPENC (3,3,C4,C2,2),  0),\n+  SR_SME (\"id_aa64smfr0_el1\", CPENC (3,0,C0,C4,5),  F_REG_READ),\n+  SR_SME (\"smcr_el1\",         CPENC (3,0,C1,C2,6),  0),\n+  SR_SME (\"smcr_el12\",        CPENC (3,5,C1,C2,6),  0),\n+  SR_SME (\"smcr_el2\",         CPENC (3,4,C1,C2,6),  0),\n+  SR_SME (\"smcr_el3\",         CPENC (3,6,C1,C2,6),  0),\n+  SR_SME (\"smpri_el1\",        CPENC (3,0,C1,C2,4),  0),\n+  SR_SME (\"smprimap_el2\",     CPENC (3,4,C1,C2,5),  0),\n+  SR_SME (\"smidr_el1\",        CPENC (3,1,C0,C0,6),  F_REG_READ),\n+  SR_SME (\"tpidr2_el0\",       CPENC (3,3,C13,C0,5), 0),\n+  SR_SME (\"mpamsm_el1\",       CPENC (3,0,C10,C5,3), 0),\n \n   { 0, CPENC (0,0,0,0,0), 0, 0 }\n };"
    }
  ]
}