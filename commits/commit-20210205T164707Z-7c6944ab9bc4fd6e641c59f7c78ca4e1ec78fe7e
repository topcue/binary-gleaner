{
  "sha": "7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6N2M2OTQ0YWI5YmM0ZmQ2ZTY0MWM1OWY3Yzc4Y2E0ZTFlYzc4ZmU3ZQ==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-05T16:47:07Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-02-05T16:47:07Z"
    },
    "message": "[gdb/breakpoints] Handle glibc with debuginfo in create_exception_master_breakpoint\n\nThe test-case nextoverthrow.exp is failing on targets with unstripped libc.\n\nThis is a regression since commit 1940319c0ef \"[gdb] Fix internal-error in\nprocess_event_stop_test\".\n\nThe problem is that this code in create_exception_master_breakpoint:\n...\n      for (objfile *sepdebug = obj->separate_debug_objfile;\n      \t   sepdebug != nullptr; sepdebug = sepdebug->separate_debug_objfile)\n        if (create_exception_master_breakpoint_hook (sepdebug))\n...\niterates over all the separate debug object files, but fails to handle the\ncase that obj itself has the debug info we're looking for.\n\nFix this by using the separate_debug_objfiles () range instead, which does\niterate both over obj and the obj->separate_debug_objfile chain.\n\nTested on x86_64-linux.\n\ngdb/ChangeLog:\n\n2021-02-05  Tom de Vries  <tdevries@suse.de>\n\n\tPR breakpoints/27330\n\t* breakpoint.c (create_exception_master_breakpoint): Handle case that\n\tglibc object file has debug info.",
    "tree": {
      "sha": "763a574f3d9807001063d180b6282de956f1900e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/763a574f3d9807001063d180b6282de956f1900e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e77b0004dd114d6ddf3bb92b521b2854341f3f85",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e77b0004dd114d6ddf3bb92b521b2854341f3f85",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e77b0004dd114d6ddf3bb92b521b2854341f3f85"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 10,
    "deletions": 5
  },
  "files": [
    {
      "sha": "1f5840e57017b53de59c7dfd535e27f604ce0775",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
      "patch": "@@ -1,3 +1,9 @@\n+2021-02-05  Tom de Vries  <tdevries@suse.de>\n+\n+\tPR breakpoints/27330\n+\t* breakpoint.c (create_exception_master_breakpoint): Handle case that\n+\tglibc object file has debug info.\n+\n 2021-02-05  Tom de Vries  <tdevries@suse.de>\n \n \tPR symtab/27333"
    },
    {
      "sha": "c20c0d7d6498104ce58c910979c8f75f52c54e0c",
      "filename": "gdb/breakpoint.c",
      "status": "modified",
      "additions": 4,
      "deletions": 5,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e/gdb/breakpoint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e/gdb/breakpoint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/breakpoint.c?ref=7c6944ab9bc4fd6e641c59f7c78ca4e1ec78fe7e",
      "patch": "@@ -3625,11 +3625,10 @@ create_exception_master_breakpoint (void)\n       if (create_exception_master_breakpoint_probe (obj))\n \tcontinue;\n \n-      /* Iterate over separate debug objects and try an _Unwind_DebugHook\n-\t kind breakpoint.  */\n-      for (objfile *sepdebug = obj->separate_debug_objfile;\n-\t   sepdebug != nullptr; sepdebug = sepdebug->separate_debug_objfile)\n-\tif (create_exception_master_breakpoint_hook (sepdebug))\n+      /* Iterate over main and separate debug objects and try an\n+\t _Unwind_DebugHook kind breakpoint.  */\n+      for (objfile *debug_objfile : obj->separate_debug_objfiles ())\n+\tif (create_exception_master_breakpoint_hook (debug_objfile))\n \t  break;\n     }\n }"
    }
  ]
}