{
  "sha": "770d8f6a51200bb4bf1228eba928e24e5d7fff86",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzcwZDhmNmE1MTIwMGJiNGJmMTIyOGViYTkyOGUyNGU1ZDdmZmY4Ng==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:59Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:13Z"
    },
    "message": "gdbserver: turn target ops 'read_pc' and 'write_pc' into methods\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's read_pc and write_pc ops into\n\tmethods of process_target.\n\n\t* target.h (struct process_stratum_target): Remove the target ops.\n\t(class process_target): Add the target ops.\n\t* target.cc (process_target::read_pc): Define.\n\t(process_target::write_pc): Define.\n\n\tUpdate the derived classes and callers below.\n\n\t* regcache.cc (regcache_read_pc): Update.\n\t(regcache_write_pc): Update.\n\t* linux-low.cc (linux_target_ops): Update.\n\t(linux_read_pc): Turn into ...\n\t(linux_process_target::read_pc): ... this.\n\t(linux_write_pc): Turn into ...\n\t(linux_process_target::write_pc): ... this.\n\t* linux-low.h (class linux_process_target): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t* win32-low.cc (win32_target_ops): Update.",
    "tree": {
      "sha": "2d1be67399c4a8f7a1dad98ac92a0c0d1a7c3b43",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2d1be67399c4a8f7a1dad98ac92a0c0d1a7c3b43"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/770d8f6a51200bb4bf1228eba928e24e5d7fff86",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/770d8f6a51200bb4bf1228eba928e24e5d7fff86",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/770d8f6a51200bb4bf1228eba928e24e5d7fff86",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/770d8f6a51200bb4bf1228eba928e24e5d7fff86/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "290732bfb3805dd31fa640d022481dbb5d436988",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/290732bfb3805dd31fa640d022481dbb5d436988",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/290732bfb3805dd31fa640d022481dbb5d436988"
    }
  ],
  "stats": {
    "total": 84,
    "additions": 52,
    "deletions": 32
  },
  "files": [
    {
      "sha": "871657780ba9b2a1f7e7f994df845fbd243978dc",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -1,3 +1,27 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's read_pc and write_pc ops into\n+\tmethods of process_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target ops.\n+\t(class process_target): Add the target ops.\n+\t* target.cc (process_target::read_pc): Define.\n+\t(process_target::write_pc): Define.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* regcache.cc (regcache_read_pc): Update.\n+\t(regcache_write_pc): Update.\n+\t* linux-low.cc (linux_target_ops): Update.\n+\t(linux_read_pc): Turn into ...\n+\t(linux_process_target::read_pc): ... this.\n+\t(linux_write_pc): Turn into ...\n+\t(linux_process_target::write_pc): ... this.\n+\t* linux-low.h (class linux_process_target): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's supports_tracepoints op into a"
    },
    {
      "sha": "90b5fcbcdcc18fbb47035c8aa8949ca2df42f09b",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -6555,17 +6555,17 @@ linux_process_target::supports_tracepoints ()\n   return (*the_low_target.supports_tracepoints) ();\n }\n \n-static CORE_ADDR\n-linux_read_pc (struct regcache *regcache)\n+CORE_ADDR\n+linux_process_target::read_pc (regcache *regcache)\n {\n   if (the_low_target.get_pc == NULL)\n     return 0;\n \n   return (*the_low_target.get_pc) (regcache);\n }\n \n-static void\n-linux_write_pc (struct regcache *regcache, CORE_ADDR pc)\n+void\n+linux_process_target::write_pc (regcache *regcache, CORE_ADDR pc)\n {\n   gdb_assert (the_low_target.set_pc != NULL);\n \n@@ -7449,8 +7449,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-  linux_read_pc,\n-  linux_write_pc,\n   linux_thread_stopped,\n   NULL,\n   linux_pause_all,"
    },
    {
      "sha": "67a36c8a67d2bdf540f365898a9d49ffd38daf04",
      "filename": "gdbserver/linux-low.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/linux-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/linux-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.h?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -388,6 +388,10 @@ class linux_process_target : public process_target\n   void process_qsupported (char **features, int count) override;\n \n   bool supports_tracepoints () override;\n+\n+  CORE_ADDR read_pc (regcache *regcache) override;\n+\n+  void write_pc (regcache *regcache, CORE_ADDR pc) override;\n };\n \n #define get_thread_lwp(thr) ((struct lwp_info *) (thread_target_data (thr)))"
    },
    {
      "sha": "2ac59c3c14a6f0912749645e8e8e53b67dd7a48a",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -735,8 +735,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  NULL,  /* read_pc */\n-  NULL,  /* write_pc */\n   NULL,  /* thread_stopped */\n   NULL,  /* get_tib_address */\n   NULL,  /* pause_all */"
    },
    {
      "sha": "2b5b02b69bda7d1d5ec26cc3d15c72286957df9b",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -947,8 +947,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  NULL, /* read_pc */\n-  NULL, /* write_pc */\n   NULL, /* thread_stopped */\n   NULL, /* get_tib_address */\n   NULL, /* pause_all */"
    },
    {
      "sha": "ec9d70d42fbc4e697c5ef6959446d481d28fcebf",
      "filename": "gdbserver/regcache.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 14,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/regcache.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/regcache.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/regcache.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -477,25 +477,13 @@ collect_register_by_name (struct regcache *regcache,\n CORE_ADDR\n regcache_read_pc (struct regcache *regcache)\n {\n-  CORE_ADDR pc_val;\n-\n-  if (the_target->read_pc)\n-    pc_val = the_target->read_pc (regcache);\n-  else\n-    internal_error (__FILE__, __LINE__,\n-\t\t    \"regcache_read_pc: Unable to find PC\");\n-\n-  return pc_val;\n+  return the_target->pt->read_pc (regcache);\n }\n \n void\n regcache_write_pc (struct regcache *regcache, CORE_ADDR pc)\n {\n-  if (the_target->write_pc)\n-    the_target->write_pc (regcache, pc);\n-  else\n-    internal_error (__FILE__, __LINE__,\n-\t\t    \"regcache_write_pc: Unable to update PC\");\n+  the_target->pt->write_pc (regcache, pc);\n }\n \n #endif"
    },
    {
      "sha": "4f8d91c171f30bf1d8f7096be06eebd2bbd6b0b8",
      "filename": "gdbserver/target.cc",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/target.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/target.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -614,3 +614,15 @@ process_target::supports_tracepoints ()\n {\n   return false;\n }\n+\n+CORE_ADDR\n+process_target::read_pc (regcache *regcache)\n+{\n+  gdb_assert_not_reached (\"process_target::read_pc: Unable to find PC\");\n+}\n+\n+void\n+process_target::write_pc (regcache *regcache, CORE_ADDR pc)\n+{\n+  gdb_assert_not_reached (\"process_target::write_pc: Unable to update PC\");\n+}"
    },
    {
      "sha": "2aef0208c11af0237acf8c4f6f4757c023e01846",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -70,12 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* Read PC from REGCACHE.  */\n-  CORE_ADDR (*read_pc) (struct regcache *regcache);\n-\n-  /* Write PC to REGCACHE.  */\n-  void (*write_pc) (struct regcache *regcache, CORE_ADDR pc);\n-\n   /* Return true if THREAD is known to be stopped now.  */\n   int (*thread_stopped) (struct thread_info *thread);\n \n@@ -488,6 +482,12 @@ class process_target\n \n   /* Return true if the target supports tracepoints, false otherwise.  */\n   virtual bool supports_tracepoints ();\n+\n+  /* Read PC from REGCACHE.  */\n+  virtual CORE_ADDR read_pc (regcache *regcache);\n+\n+  /* Write PC to REGCACHE.  */\n+  virtual void write_pc (regcache *regcache, CORE_ADDR pc);\n };\n \n extern process_stratum_target *the_target;"
    },
    {
      "sha": "a7329fe20cfafc6fcdc48399893349230c9fbbc9",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/770d8f6a51200bb4bf1228eba928e24e5d7fff86/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=770d8f6a51200bb4bf1228eba928e24e5d7fff86",
      "patch": "@@ -1852,8 +1852,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-  NULL, /* read_pc */\n-  NULL, /* write_pc */\n   NULL, /* thread_stopped */\n   win32_get_tib_address,\n   NULL, /* pause_all */"
    }
  ]
}