{
  "sha": "75f24e86bacd5b4832b8af12e2aef59c9f769335",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzVmMjRlODZiYWNkNWI0ODMyYjhhZjEyZTJhZWY1OWM5Zjc2OTMzNQ==",
  "commit": {
    "author": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-11-01T07:29:27Z"
    },
    "committer": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-11-01T07:29:27Z"
    },
    "message": "ada-lang.c: Renaming some fixed-point-related routines\n\nThis patch renames some of the fixed-point-related subprograms in ada-lang.c\nso as to make it obvious that those routines only handle the case where\nthe types are encoded using the GNAT encoding.\n\nNo function change; this patch is preparation work for adding support\nfor fixed-point types purely based on standard DWARF debug info.\n\ngdb/ChangeLog:\n\n        * ada-lang.c (cast_from_gnat_encoded_fixed_point_type): Renames\n        cast_from_fixed.  Update all callers.\n        (cast_to_gnat_encoded_fixed_point_type): Renames cast_to_fixed.\n        Update all callers.\n        (gnat_encoded_fixed_point_scaling_factor): Renames ada_scaling_factor.\n        Update all callers.\n        * ada-lang.h (gnat_encoded_fixed_point_scaling_factor): Renames\n        ada_scaling_factor.\n        * ada-typeprint.c: Replace call to ada_scaling_factor by call\n        to print_gnat_encoded_fixed_point_type.\n        * ada-valprint.c: Likewise.",
    "tree": {
      "sha": "99214130d9f1bbf6617f62335b1c6dba39824a00",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/99214130d9f1bbf6617f62335b1c6dba39824a00"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/75f24e86bacd5b4832b8af12e2aef59c9f769335",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/75f24e86bacd5b4832b8af12e2aef59c9f769335",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/75f24e86bacd5b4832b8af12e2aef59c9f769335",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/75f24e86bacd5b4832b8af12e2aef59c9f769335/comments",
  "author": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "80630624b4c224908b745b8a5396ff2e40896a30",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/80630624b4c224908b745b8a5396ff2e40896a30",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/80630624b4c224908b745b8a5396ff2e40896a30"
    }
  ],
  "stats": {
    "total": 42,
    "additions": 28,
    "deletions": 14
  },
  "files": [
    {
      "sha": "8e46763a5daddae6e602e26656ac27e2eee6aa1b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=75f24e86bacd5b4832b8af12e2aef59c9f769335",
      "patch": "@@ -1,3 +1,17 @@\n+2020-11-01  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* ada-lang.c (cast_from_gnat_encoded_fixed_point_type): Renames\n+\tcast_from_fixed.  Update all callers.\n+\t(cast_to_gnat_encoded_fixed_point_type): Renames cast_to_fixed.\n+\tUpdate all callers.\n+\t(gnat_encoded_fixed_point_scaling_factor): Renames ada_scaling_factor.\n+\tUpdate all callers.\n+\t* ada-lang.h (gnat_encoded_fixed_point_scaling_factor): Renames\n+\tada_scaling_factor.\n+\t* ada-typeprint.c: Replace call to ada_scaling_factor by call\n+\tto print_gnat_encoded_fixed_point_type.\n+\t* ada-valprint.c: Likewise.\n+\n 2020-10-31  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* infrun.h (infrun_debug_printf): Add check of debug_infrun flag."
    },
    {
      "sha": "c0c440ddc06ba0f7ee21a8b9e3aaf958888f7317",
      "filename": "gdb/ada-lang.c",
      "status": "modified",
      "additions": 11,
      "deletions": 11,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-lang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-lang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-lang.c?ref=75f24e86bacd5b4832b8af12e2aef59c9f769335",
      "patch": "@@ -9170,24 +9170,24 @@ unwrap_value (struct value *val)\n }\n \n static struct value *\n-cast_from_fixed (struct type *type, struct value *arg)\n+cast_from_gnat_encoded_fixed_point_type (struct type *type, struct value *arg)\n {\n-  struct value *scale = ada_scaling_factor (value_type (arg));\n+  struct value *scale = gnat_encoded_fixed_point_scaling_factor (value_type (arg));\n   arg = value_cast (value_type (scale), arg);\n \n   arg = value_binop (arg, scale, BINOP_MUL);\n   return value_cast (type, arg);\n }\n \n static struct value *\n-cast_to_fixed (struct type *type, struct value *arg)\n+cast_to_gnat_encoded_fixed_point_type (struct type *type, struct value *arg)\n {\n   if (type == value_type (arg))\n     return arg;\n \n-  struct value *scale = ada_scaling_factor (type);\n+  struct value *scale = gnat_encoded_fixed_point_scaling_factor (type);\n   if (ada_is_gnat_encoded_fixed_point_type (value_type (arg)))\n-    arg = cast_from_fixed (value_type (scale), arg);\n+    arg = cast_from_gnat_encoded_fixed_point_type (value_type (scale), arg);\n   else\n     arg = value_cast (value_type (scale), arg);\n \n@@ -9735,10 +9735,10 @@ ada_value_cast (struct type *type, struct value *arg2)\n     return arg2;\n \n   if (ada_is_gnat_encoded_fixed_point_type (type))\n-    return cast_to_fixed (type, arg2);\n+    return cast_to_gnat_encoded_fixed_point_type (type, arg2);\n \n   if (ada_is_gnat_encoded_fixed_point_type (value_type (arg2)))\n-    return cast_from_fixed (type, arg2);\n+    return cast_from_gnat_encoded_fixed_point_type (type, arg2);\n \n   return value_cast (type, arg2);\n }\n@@ -10138,7 +10138,7 @@ ada_evaluate_subexp (struct type *expect_type, struct expression *exp,\n \t  /* Nothing.  */\n \t}\n       else if (ada_is_gnat_encoded_fixed_point_type (value_type (arg1)))\n-        arg2 = cast_to_fixed (value_type (arg1), arg2);\n+        arg2 = cast_to_gnat_encoded_fixed_point_type (value_type (arg1), arg2);\n       else if (ada_is_gnat_encoded_fixed_point_type (value_type (arg2)))\n         error\n           (_(\"Fixed-point values must be assigned to fixed-point variables\"));\n@@ -10216,9 +10216,9 @@ ada_evaluate_subexp (struct type *expect_type, struct expression *exp,\n         {\n           type = builtin_type (exp->gdbarch)->builtin_double;\n           if (ada_is_gnat_encoded_fixed_point_type (value_type (arg1)))\n-            arg1 = cast_from_fixed (type, arg1);\n+            arg1 = cast_from_gnat_encoded_fixed_point_type (type, arg1);\n           if (ada_is_gnat_encoded_fixed_point_type (value_type (arg2)))\n-            arg2 = cast_from_fixed (type, arg2);\n+            arg2 = cast_from_gnat_encoded_fixed_point_type (type, arg2);\n           binop_promote (exp->language_defn, exp->gdbarch, &arg1, &arg2);\n           return ada_value_binop (arg1, arg2, op);\n         }\n@@ -11188,7 +11188,7 @@ gnat_encoded_fixed_point_delta (struct type *type)\n    the scaling factor ('SMALL value) associated with the type.  */\n \n struct value *\n-ada_scaling_factor (struct type *type)\n+gnat_encoded_fixed_point_scaling_factor (struct type *type)\n {\n   const char *encoding = gnat_encoded_fixed_type_info (type);\n   struct type *scale_type = ada_scaling_type (type);"
    },
    {
      "sha": "e65be4175a434bac7fef81717022814dd0e3bdd8",
      "filename": "gdb/ada-lang.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-lang.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-lang.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-lang.h?ref=75f24e86bacd5b4832b8af12e2aef59c9f769335",
      "patch": "@@ -287,7 +287,7 @@ extern int ada_is_system_address_type (struct type *);\n \n extern struct value *gnat_encoded_fixed_point_delta (struct type *);\n \n-extern struct value *ada_scaling_factor (struct type *);\n+extern struct value *gnat_encoded_fixed_point_scaling_factor (struct type *);\n \n extern int ada_which_variant_applies (struct type *, struct value *);\n "
    },
    {
      "sha": "a58eabab06612decefa42d12d0193faaf3f38f6d",
      "filename": "gdb/ada-typeprint.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-typeprint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-typeprint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-typeprint.c?ref=75f24e86bacd5b4832b8af12e2aef59c9f769335",
      "patch": "@@ -345,7 +345,7 @@ static void\n print_gnat_encoded_fixed_point_type (struct type *type, struct ui_file *stream)\n {\n   struct value *delta = gnat_encoded_fixed_point_delta (type);\n-  struct value *small = ada_scaling_factor (type);\n+  struct value *small = gnat_encoded_fixed_point_scaling_factor (type);\n \n   if (delta == nullptr)\n     fprintf_filtered (stream, \"delta ??\");"
    },
    {
      "sha": "67716f784327f5a6fc03e10371a730cd551f2684",
      "filename": "gdb/ada-valprint.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-valprint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/75f24e86bacd5b4832b8af12e2aef59c9f769335/gdb/ada-valprint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-valprint.c?ref=75f24e86bacd5b4832b8af12e2aef59c9f769335",
      "patch": "@@ -773,7 +773,7 @@ ada_value_print_num (struct value *val, struct ui_file *stream, int recurse,\n \n   if (ada_is_gnat_encoded_fixed_point_type (type))\n     {\n-      struct value *scale = ada_scaling_factor (type);\n+      struct value *scale = gnat_encoded_fixed_point_scaling_factor (type);\n       val = value_cast (value_type (scale), val);\n       val = value_binop (val, scale, BINOP_MUL);\n "
    }
  ]
}