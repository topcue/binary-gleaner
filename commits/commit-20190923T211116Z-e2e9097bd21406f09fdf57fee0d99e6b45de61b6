{
  "sha": "e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTJlOTA5N2JkMjE0MDZmMDlmZGY1N2ZlZTBkOTllNmI0NWRlNjFiNg==",
  "commit": {
    "author": {
      "name": "Dimitar Dimitrov",
      "email": "dimitar@dinux.eu",
      "date": "2019-09-23T16:55:43Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-09-23T21:11:16Z"
    },
    "message": "Add testsuite for the PRU simulator port\n\nsim/testsuite/ChangeLog:\n\n\t* configure: Regenerate.\n\nsim/testsuite/sim/pru/ChangeLog:\n\n\t* add.s: New test.\n\t* allinsn.exp: New file.\n\t* dmem-zero-pass.s: New test.\n\t* dmem-zero-trap.s: New test.\n\t* dram.s: New test.\n\t* jmp.s: New test.\n\t* loop-imm.s: New test.\n\t* loop-reg.s: New test.\n\t* mul.s: New test.\n\t* subreg.s: New test.\n\t* testutils.inc: New file.",
    "tree": {
      "sha": "75d59fd74ae9e08221b67696bda85829fad5d593",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/75d59fd74ae9e08221b67696bda85829fad5d593"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/comments",
  "author": null,
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ddd44b7053386b82769c27c871a08c72e589e93e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ddd44b7053386b82769c27c871a08c72e589e93e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ddd44b7053386b82769c27c871a08c72e589e93e"
    }
  ],
  "stats": {
    "total": 582,
    "additions": 582,
    "deletions": 0
  },
  "files": [
    {
      "sha": "89bd065751c29b089e2416832eaacbf0d27390ab",
      "filename": "sim/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/ChangeLog?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -1,3 +1,7 @@\n+2019-09-23  Dimitar Dimitrov  <dimitar@dinux.eu>\n+\n+\t* configure: Regenerate.\n+\n 2017-12-12  Stafford Horne  <shorne@gmail.com>\n \t    Peter Gavin  <pgavin@gmail.com>\n "
    },
    {
      "sha": "a3e7fa7131a63b36b8ef0ca3a92c14e1f7065326",
      "filename": "sim/testsuite/configure",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/configure?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -1946,6 +1946,9 @@ case \"${target}\" in\n    powerpc*-*-*)\n        sim_arch=ppc\n        ;;\n+   pru*-*-*)\n+       sim_arch=pru\n+       ;;\n    ft32-*-*)\n        sim_arch=ft32\n        ;;"
    },
    {
      "sha": "d8b438bb45fc76dc449cb061a3912a7386b597e0",
      "filename": "sim/testsuite/sim/pru/ChangeLog",
      "status": "added",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/ChangeLog?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,13 @@\n+2019-09-23  Dimitar Dimitrov  <dimitar@dinux.eu>\n+\n+\t* add.s: New test.\n+\t* allinsn.exp: New file.\n+\t* dmem-zero-pass.s: New test.\n+\t* dmem-zero-trap.s: New test.\n+\t* dram.s: New test.\n+\t* jmp.s: New test.\n+\t* loop-imm.s: New test.\n+\t* loop-reg.s: New test.\n+\t* mul.s: New test.\n+\t* subreg.s: New test.\n+\t* testutils.inc: New file."
    },
    {
      "sha": "bc8530d12511f58abdb594cb5ce8b10be48ecc5e",
      "filename": "sim/testsuite/sim/pru/add.s",
      "status": "added",
      "additions": 40,
      "deletions": 0,
      "changes": 40,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/add.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/add.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/add.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,40 @@\n+# Check that basic add insn works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r4, 10\n+\tadd r4, r4, 23\n+\tqbne 2f, r4, 33\n+\n+\tqblt 2f, r4, 33\n+\n+\tqbgt 2f, r4, 33\n+\n+\tjmp 1f\n+\n+\tfail\n+\n+1:\n+\tpass\n+2:\tfail"
    },
    {
      "sha": "aed804d8e087151fc7f3a650db46b1bbd3cb329d",
      "filename": "sim/testsuite/sim/pru/allinsn.exp",
      "status": "added",
      "additions": 33,
      "deletions": 0,
      "changes": 33,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/allinsn.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/allinsn.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/allinsn.exp?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,33 @@\n+# PRU simulator testsuite.\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+if [istarget pru-*] {\n+    # all machines\n+    set all_machs \"pru\"\n+\n+    foreach src [lsort [glob -nocomplain $srcdir/$subdir/*.s]] {\n+\t# If we're only testing specific files and this isn't one of them,\n+\t# skip it.\n+\tif ![runtest_file_p $runtests $src] {\n+\t    continue\n+\t}\n+\trun_sim_test $src $all_machs\n+    }\n+}"
    },
    {
      "sha": "2ec1687f072471daa5990442b6e5dac690c93071",
      "filename": "sim/testsuite/sim/pru/dmem-zero-pass.s",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dmem-zero-pass.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dmem-zero-pass.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/dmem-zero-pass.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,29 @@\n+# Check that DMEM zero address access works by default.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r1, 0\n+\tlbbo &r2, r1, 0, 4\n+\n+\tpass"
    },
    {
      "sha": "609c4f8459e8080346f25817b72ab4ea4384cf4e",
      "filename": "sim/testsuite/sim/pru/dmem-zero-trap.s",
      "status": "added",
      "additions": 32,
      "deletions": 0,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dmem-zero-trap.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dmem-zero-trap.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/dmem-zero-trap.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,32 @@\n+# Check that DMEM zero address access can be trapped.\n+# mach: pru\n+# sim: --error-null-deref\n+# xerror:\n+# output: core: 4 byte read to unmapped address 0x0 at *\\n\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r1, 0\n+\tlbbo &r2, r1, 0, 4\n+\n+\tpass"
    },
    {
      "sha": "fd79ba783ee9210103e8a4178e2023af9baf690f",
      "filename": "sim/testsuite/sim/pru/dram.s",
      "status": "added",
      "additions": 72,
      "deletions": 0,
      "changes": 72,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dram.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/dram.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/dram.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,72 @@\n+# Check that DRAM memory access works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tfill r20, 16\n+\tldi r10, 0\n+\tnot r10, r10\n+\tqbne F, r20, r10\n+\tqbne F, r21, r10\n+\tqbne F, r22, r10\n+\tqbne F, r23, r10\n+\n+\tzero r20, 16\n+\tqbne F, r20, 0\n+\tqbne F, r21, 0\n+\tqbne F, r22, 0\n+\tqbne F, r23, 0\n+\n+\tldi r0, testarray\n+\tlbbo &r20, r0, 0, 7\n+\tqbne F, r20.b0, 0x01\n+\tqbne F, r20.b1, 0x23\n+\tqbne F, r20.b2, 0x45\n+\tqbne F, r20.b3, 0x67\n+\tqbne F, r21.b0, 0x89\n+\tqbne F, r21.b1, 0xab\n+\tqbne F, r21.b2, 0xcd\n+\tqbne F, r21.b3, 0x00 ; Should not have been loaded!\n+\tqbne F, r22, 0\n+\tqbne F, r23, 0\n+\n+\tldi r1, 0x11\n+\tsbbo &r1, r0, 9, 1\n+\tldi r1, 0x11\n+\tsbbo &r1, r0, 12, 4\n+\n+\tlbbo &r20, r0, 0, 16\n+\tqbne F, r21.b3, 0xef\n+\tqbne F, r22.b0, 0xff\n+\tqbne F, r22.b1, 0x11\n+\tqbne F, r22.b2, 0xff\n+\tqbne F, r22.b3, 0xff\n+\tqbne F, r23, 0x11\n+\n+\tpass\n+F:\tfail\n+\n+\t.data\n+testarray:\n+\t.byte 0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef\n+\t.byte 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff"
    },
    {
      "sha": "14d749dcf2d661b8dcb9ed6ea35f03b9e8a6f7aa",
      "filename": "sim/testsuite/sim/pru/jmp.s",
      "status": "added",
      "additions": 40,
      "deletions": 0,
      "changes": 40,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/jmp.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/jmp.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/jmp.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,40 @@\n+# Check that jump and branch insns work.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r10, 10\n+\tcall func1\n+\tqbne F, r10, 11\n+\n+\tldi r0, %pmem(1f)\n+\tjmp r0\n+\tfail\n+1:\n+\tpass\n+F:\tfail\n+\n+\n+func1:\n+\tadd r10, r10, 1\n+\tret"
    },
    {
      "sha": "7e462fdcc7ecf7f4417ae684493806ffca075eac",
      "filename": "sim/testsuite/sim/pru/loop-imm.s",
      "status": "added",
      "additions": 43,
      "deletions": 0,
      "changes": 43,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/loop-imm.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/loop-imm.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/loop-imm.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,43 @@\n+# Check that loop insn works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r25, 0\n+\tldi r26, 0\n+\tldi r27, 0\n+\n+\tadd r27, r27, 1\n+\tloop 1f, 10\n+\tadd r25, r25, 1\n+\tadd r26, r26, 2\n+1:\n+\tadd r27, r27, 1\n+\n+\tqbne F, r25, 10\n+\tqbne F, r26, 20\n+\tqbne F, r27, 2\n+\n+\tpass\n+\n+F:\tfail"
    },
    {
      "sha": "6e4238cf29ccdcd2657667c48dc1120f0abba815",
      "filename": "sim/testsuite/sim/pru/loop-reg.s",
      "status": "added",
      "additions": 44,
      "deletions": 0,
      "changes": 44,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/loop-reg.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/loop-reg.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/loop-reg.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,44 @@\n+# Check that loop insn works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r25, 0\n+\tldi r26, 0\n+\tldi r27, 0\n+\tldi r28, 10\n+\n+\tadd r27, r27, 1\n+\tloop 1f, r28\n+\tadd r25, r25, 1\n+\tadd r26, r26, 2\n+1:\n+\tadd r27, r27, 1\n+\n+\tqbne F, r25, 10\n+\tqbne F, r26, 20\n+\tqbne F, r27, 2\n+\n+\tpass\n+\n+F:\tfail"
    },
    {
      "sha": "4a75baf85af52cabd522b562aec80245979bbc37",
      "filename": "sim/testsuite/sim/pru/mul.s",
      "status": "added",
      "additions": 89,
      "deletions": 0,
      "changes": 89,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/mul.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/mul.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/mul.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,89 @@\n+# Check that multiplication works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\t# MUL: Test regular case\n+\tldi r28, 1001\n+\tldi r29, 4567\n+\tnop\n+\txin 0, r26, 4\n+\tqbne32 2f, r26, 1001 * 4567\n+\n+\t# MUL: Test the pipeline emulation\n+\tldi r28, 1002\n+\tldi r29, 1003\n+\tldi r29, 4004\n+\txin 0, r26, 4\n+\tqbne32 2f, r26, 1002 * 1003\n+\txin 0, r26, 4\n+\tqbne32 2f, r26, 1002 * 4004\n+\n+\t# MUL: Test 64-bit result\n+\tldi32 r28, 0x12345678\n+\tldi32 r29, 0xaabbccdd\n+\tnop\n+\txin 0, r26, 8\n+\tqbne32 2f, r26, 0x45BE4598\n+\tqbne32 2f, r27, 0xC241C38\n+\n+\t# MAC: Test regular case\n+\tldi r25, 1\n+\txout 0, r25, 1\n+\tldi r25, 3\n+\txout 0, r25, 1\n+\n+\tldi r25, 1\n+\tldi r28, 1001\n+\tldi r29, 2002\n+\txout 0, r25, 1\n+\tldi r28, 3003\n+\tldi r29, 4004\n+\txout 0, r25, 1\n+\n+\txin 0, r26, 4\n+\tqbne32 2f, r26, (1001 * 2002) + (3003 * 4004)\n+\n+\t# MAC: Test 64-bit result\n+\tldi r25, 3\n+\txout 0, r25, 1\n+\n+\tldi r25, 1\n+\tldi32 r28, 0x10203040\n+\tldi32 r29, 0x50607080\n+\txout 0, r25, 1\n+\tldi32 r28, 0xa0b0c0d0\n+\tldi32 r29, 0x11223344\n+\txout 0, r25, 1\n+\n+\txin 0, r26, 8\n+\tqbne32 2f, r26, 0x8E30C740\n+\tqbne32 2f, r27, 0xFD156B1\n+\n+\tjmp 1f\n+\n+\tfail\n+\n+1:\n+\tpass\n+2:\tfail"
    },
    {
      "sha": "77dedd11ecfaf61021ed89ca2010a1b51d28afa5",
      "filename": "sim/testsuite/sim/pru/subreg.s",
      "status": "added",
      "additions": 40,
      "deletions": 0,
      "changes": 40,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/subreg.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/subreg.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/subreg.s?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,40 @@\n+# Check that subregister addressing works.\n+# mach: pru\n+\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+.include \"testutils.inc\"\n+\n+\tstart\n+\n+\tldi r0, 0x01ff\n+\tadd r0, r0.b0, r0.b1\n+\tqbne F, r0.b0, 0x00\n+\tqbne F, r0.b1, 0x01\n+\tqbne F, r0.w2, 0x00\n+\n+\tldi r0, 0x01ff\n+\tadd r0.b0, r0.b0, r0.b1\n+\tadc r0, r0.b1, r0.b3\n+\tqbne F, r0.b0, 0x02\n+\tqbne F, r0.b1, 0x00\n+\tqbne F, r0.w2, 0x00\n+\n+\tpass\n+F:\tfail"
    },
    {
      "sha": "753908447e9b4fe8c771378ec0dcae07758d8ac2",
      "filename": "sim/testsuite/sim/pru/testutils.inc",
      "status": "added",
      "additions": 100,
      "deletions": 0,
      "changes": 100,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/testutils.inc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e2e9097bd21406f09fdf57fee0d99e6b45de61b6/sim/testsuite/sim/pru/testutils.inc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/pru/testutils.inc?ref=e2e9097bd21406f09fdf57fee0d99e6b45de61b6",
      "patch": "@@ -0,0 +1,100 @@\n+# Copyright (C) 2016-2019 Free Software Foundation, Inc.\n+# Contributed by Dimitar Dimitrov <dimitar@dinux.eu>\n+#\n+# This file is part of the GNU simulators.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+# MACRO: start\n+# All assembler tests should start with a call to \"main_test\"\n+\t.macro start\n+\t.text\n+\n+\t.global _start\n+_start:\n+\n+\t# Skip over these inlined funcs.\n+\tjmp __main_test;\n+\n+\t.global __pass\n+\t.type __pass, function\n+__pass:\n+\t# Note - DRAM LMA and VMA are equal for PRU, so\n+\t# we can afford to pass DRAM pointer directly.\n+\twrite 1, _passmsg, 5\n+\texit 0\n+\n+\t.global __fail\n+\t.type __fail, function\n+__fail:\n+\twrite 1, _failmsg, 5\n+\texit 1\n+\n+\t.data\n+_passmsg:\n+\t.ascii \"pass\\n\"\n+\n+_failmsg:\n+\t.ascii \"fail\\n\"\n+\n+\t.text\n+\t.global __main_test\n+\t.type __main_test, function\n+__main_test:\n+\t.endm\n+\n+# MACRO: system_call\n+# Make a libgloss system call\n+\t.macro system_call nr:req, arg1=0, arg2=0, arg3=0\n+\tldi r1, \\nr\n+\tldi r14, \\arg1\n+\tldi r15, \\arg2\n+\tldi r16, \\arg3\n+\thalt\n+\t.endm\n+\n+# MACRO: exit\n+# Quit the current test\n+\t.macro exit rc:req\n+\tsystem_call 1, \\rc\n+\t.endm\n+\n+# MACRO: pass\n+# Write 'pass' to stdout via syscalls and quit;\n+# meant for non-OS operating environments\n+\t.macro pass\n+\tjmp __pass;\n+\t.endm\n+\n+# MACRO: fail\n+# Write 'fail' to stdout via syscalls and quit;\n+# meant for non-OS operating environments\n+\t.macro fail\n+\tjmp __fail;\n+\t.endm\n+\n+# MACRO: write\n+# Just like the write() C function; uses system calls\n+\t.macro write fd:req, str:req, len:req\n+\tsystem_call 5, \\fd, \\str, \\len\n+\t.endm\n+\n+# MACRO: qbne32\n+# Like qbne instruction, but check a 32-bit constant value.\n+\t.macro qbne32 label:req, op0:req, C0:req\n+\tqbne \\label, \\op0\\().b0, ((\\C0) >> 0) & 0xff\n+\tqbne \\label, \\op0\\().b1, ((\\C0) >> 8) & 0xff\n+\tqbne \\label, \\op0\\().b2, ((\\C0) >> 16) & 0xff\n+\tqbne \\label, \\op0\\().b3, ((\\C0) >> 24) & 0xff\n+\t.endm"
    }
  ]
}