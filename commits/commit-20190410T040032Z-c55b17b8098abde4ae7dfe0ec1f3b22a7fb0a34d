{
  "sha": "c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzU1YjE3YjgwOThhYmRlNGFlN2RmZTBlYzFmM2IyMmE3ZmIwYTM0ZA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-10T02:05:48Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-10T04:00:32Z"
    },
    "message": "Fix some ld dependencies\n\nIn looking at the csky-elf vs. csky-linux differences, the first thing\nI compared was csky_elf.sh and cskyelf_linux.sh.  Those files are\nmostly the same but besides the real differences, annoyingly have some\nlines ordered differently.  It's better in such cases to have one file\nsource the other, making differences plain.  This patch does that for\ncsky and microblaze, removes an unused variable defined in a few\nplaces, and fixes ld makefile dependencies.\n\n\t* Makefile.am (eskyelf.c, eskyelf_linux.c): Depend on cskyelf.em.\n\t(ecskyelf_linux.c): Depend on cskyelf.sh.\n\t(eelf32microblazeel.c): Depend on elf32microblaze.sh.\n\t* Makefile.in: Regenerate.\n\t* emulparams/cskyelf.sh: Comment regarding cskelf_linux.sh.\n\t(PAGE_SIZE): Don't define.\n\t* emulparams/cskyelf_linux.sh: Source sckyelf.sh, leaving just\n\tthe differing variable defs/undefs.\n\t* emulparams/elf32mcore.sh (PAGE_SIZE): Don't define.\n\t* emulparams/elf32microblaze.sh: Comment re. elf32microblazeel.sh.\n\t(OUTPUT_FORMAT): Use BIG_OUTPUT_FORMAT.\n\t(PAGE_SIZE): Don't define.\n\t* emulparams/elf32microblazeel.sh: Source elf32microblaze.sh,\n\tleaving just the differing OUTPUT_FORMAT.",
    "tree": {
      "sha": "5e31dbb3f0480cf49ae3084f3d3ff4dbd6357afd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5e31dbb3f0480cf49ae3084f3d3ff4dbd6357afd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6feda62721cd6e288f79b0ee5f1489fee8e570ab",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6feda62721cd6e288f79b0ee5f1489fee8e570ab",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6feda62721cd6e288f79b0ee5f1489fee8e570ab"
    }
  ],
  "stats": {
    "total": 92,
    "additions": 34,
    "deletions": 58
  },
  "files": [
    {
      "sha": "4df91b7a2056a9da34f401f035f2994b45ed7210",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 17,
      "deletions": 0,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -1,3 +1,20 @@\n+2019-04-10  Alan Modra  <amodra@gmail.com>\n+\n+\t* Makefile.am (eskyelf.c, eskyelf_linux.c): Depend on cskyelf.em.\n+\t(ecskyelf_linux.c): Depend on cskyelf.sh.\n+\t(eelf32microblazeel.c): Depend on elf32microblaze.sh.\n+\t* Makefile.in: Regenerate.\n+\t* emulparams/cskyelf.sh: Comment regarding cskelf_linux.sh.\n+\t(PAGE_SIZE): Don't define.\n+\t* emulparams/cskyelf_linux.sh: Source sckyelf.sh, leaving just\n+\tthe differing variable defs/undefs.\n+\t* emulparams/elf32mcore.sh (PAGE_SIZE): Don't define.\n+\t* emulparams/elf32microblaze.sh: Comment re. elf32microblazeel.sh.\n+\t(OUTPUT_FORMAT): Use BIG_OUTPUT_FORMAT.\n+\t(PAGE_SIZE): Don't define.\n+\t* emulparams/elf32microblazeel.sh: Source elf32microblaze.sh,\n+\tleaving just the differing OUTPUT_FORMAT.\n+\n 2019-04-10  Alan Modra  <amodra@gmail.com>\n \n \t* po/BLD-POTFILES.in: Regenerate."
    },
    {
      "sha": "0434a827b9cb44766e88c8aabf94c04d010ec035",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -879,9 +879,11 @@ ecrislinux.c: $(srcdir)/emulparams/crislinux.sh \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ecskyelf.c: $(srcdir)/emulparams/cskyelf.sh \\\n+  $(srcdir)/emultempl/cskyelf.em \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ecskyelf_linux.c: $(srcdir)/emulparams/cskyelf_linux.sh \\\n+  $(srcdir)/emulparams/cskyelf.sh $(srcdir)/emultempl/cskyelf.em \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ed10velf.c: $(srcdir)/emulparams/d10velf.sh \\\n@@ -1178,6 +1180,7 @@ eelf32metag.c: $(srcdir)/emulparams/elf32metag.sh \\\n   $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n eelf32microblazeel.c: $(srcdir)/emulparams/elf32microblazeel.sh \\\n+  $(srcdir)/emulparams/elf32microblaze.sh \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elfmicroblaze.sc ${GEN_DEPENDS}\n \n eelf32microblaze.c: $(srcdir)/emulparams/elf32microblaze.sh \\"
    },
    {
      "sha": "3aede6e79856503e88838719f50b693df91d1152",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -2482,9 +2482,11 @@ ecrislinux.c: $(srcdir)/emulparams/crislinux.sh \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ecskyelf.c: $(srcdir)/emulparams/cskyelf.sh \\\n+  $(srcdir)/emultempl/cskyelf.em \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ecskyelf_linux.c: $(srcdir)/emulparams/cskyelf_linux.sh \\\n+  $(srcdir)/emulparams/cskyelf.sh $(srcdir)/emultempl/cskyelf.em \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n ed10velf.c: $(srcdir)/emulparams/d10velf.sh \\\n@@ -2781,6 +2783,7 @@ eelf32metag.c: $(srcdir)/emulparams/elf32metag.sh \\\n   $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}\n \n eelf32microblazeel.c: $(srcdir)/emulparams/elf32microblazeel.sh \\\n+  $(srcdir)/emulparams/elf32microblaze.sh \\\n   $(ELF_DEPS) $(srcdir)/scripttempl/elfmicroblaze.sc ${GEN_DEPENDS}\n \n eelf32microblaze.c: $(srcdir)/emulparams/elf32microblaze.sh \\"
    },
    {
      "sha": "c9f7e3fa5cf06fdeab8ca3737dd758793057a148",
      "filename": "ld/emulparams/cskyelf.sh",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/cskyelf.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/cskyelf.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/cskyelf.sh?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -1,9 +1,10 @@\n+# If you change this file, please also look at files which source this one:\n+# cskyelf_linux.sh\n SCRIPT_NAME=elf\n OUTPUT_FORMAT=\"elf32-csky-little\"\n BIG_OUTPUT_FORMAT=\"elf32-csky-big\"\n LITTLE_OUTPUT_FORMAT=\"elf32-csky-little\"\n NO_REL_RELOCS=yes\n-PAGE_SIZE=0x1000\n TARGET_PAGE_SIZE=0x400\n MAXPAGESIZE=\"CONSTANT (MAXPAGESIZE)\"\n TEXT_START_ADDR=0x8000"
    },
    {
      "sha": "135ea1f9549ad35da880bb101fec13753130c30c",
      "filename": "ld/emulparams/cskyelf_linux.sh",
      "status": "modified",
      "additions": 4,
      "deletions": 31,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/cskyelf_linux.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/cskyelf_linux.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/cskyelf_linux.sh?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -1,36 +1,9 @@\n-SCRIPT_NAME=elf\n-OUTPUT_FORMAT=\"elf32-csky-little\"\n-BIG_OUTPUT_FORMAT=\"elf32-csky-big\"\n-LITTLE_OUTPUT_FORMAT=\"elf32-csky-little\"\n-NO_REL_RELOCS=yes\n-TARGET_PAGE_SIZE=0x400\n-MAXPAGESIZE=\"CONSTANT (MAXPAGESIZE)\"\n+. ${srcdir}/emulparams/cskyelf.sh\n+\n+unset EMBEDDED\n+unset ENTRY\n COMMONPAGESIZE=\"CONSTANT (COMMONPAGESIZE)\"\n-CHECK_RELOCS_AFTER_OPEN_INPUT=yes\n-TEXT_START_ADDR=0x8000\n-NONPAGED_TEXT_START_ADDR=0\n-ARCH=csky\n GENERATE_SHLIB_SCRIPT=yes\n GENERATE_PIE_SCRIPT=yes\n-\n-# There is a problem with the NOP value - it must work for both\n-# big endian and little endian systems.  Unfortunately there is\n-# no symmetrical mcore opcode that functions as a noop.  The\n-# chosen solution is to use \"tst r0, r14\".  This is a symmetrical\n-# value, and apart from the corruption of the C bit, it has no other\n-# side effects.  Since the carry bit is never tested without being\n-# explicitly set first, and since the NOP code is only used as a\n-# fill value between independently viable pieces of code, it should\n-# not matter.\n-NOP=0\n-\n-OTHER_BSS_SYMBOLS=\"__bss_start__ = . ;\"\n-OTHER_BSS_END_SYMBOLS=\"__bss_end__ = . ;\"\n-\n-# This sets the stack to the top of the simulator memory (2^19 bytes).\n-# STACK_ADDR=0x80000\n-\n-TEMPLATE_NAME=elf32\n GENERATE_SHLIB_SCRIPT=yes\n GENERATE_COMBRELOC_SCRIPT=yes\n-EXTRA_EM_FILE=cskyelf"
    },
    {
      "sha": "ee988129c46a1a0f34fee1259807862847781cba",
      "filename": "ld/emulparams/elf32mcore.sh",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32mcore.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32mcore.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/elf32mcore.sh?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -3,7 +3,6 @@ OUTPUT_FORMAT=\"elf32-mcore-little\"\n BIG_OUTPUT_FORMAT=\"elf32-mcore-big\"\n LITTLE_OUTPUT_FORMAT=\"elf32-mcore-little\"\n NO_REL_RELOCS=yes\n-PAGE_SIZE=0x1000\n TARGET_PAGE_SIZE=0x400\n MAXPAGESIZE=\"CONSTANT (MAXPAGESIZE)\"\n TEXT_START_ADDR=0"
    },
    {
      "sha": "116e37d0705eb3eed3283a3b7d722851e93cafa1",
      "filename": "ld/emulparams/elf32microblaze.sh",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32microblaze.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32microblaze.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/elf32microblaze.sh?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -1,7 +1,9 @@\n+# If you change this file, please also look at files which source this one:\n+# elf32microblazeel.sh\n SCRIPT_NAME=elfmicroblaze\n-OUTPUT_FORMAT=\"elf32-microblaze\"\n BIG_OUTPUT_FORMAT=\"elf32-microblaze\"\n LITTLE_OUTPUT_FORMAT=\"elf32-microblazeel\"\n+OUTPUT_FORMAT=$BIG_OUTPUT_FORMAT\n #TEXT_START_ADDR=0\n NONPAGED_TEXT_START_ADDR=0x28\n ALIGNMENT=4\n@@ -13,7 +15,6 @@ NOP=0x80000000\n \n # Hmmm, there's got to be a better way.  This sets the stack to the\n # top of the simulator memory (2^19 bytes).\n-#PAGE_SIZE=0x1000\n #DATA_ADDR=0x10000\n #OTHER_RELOCATING_SECTIONS='.stack 0x7000 : { _stack = .; *(.stack) }'\n #$@{RELOCATING+ PROVIDE (__stack = 0x7000);@}"
    },
    {
      "sha": "14f3b3bf562275137a15aea61526f06331a3e7ec",
      "filename": "ld/emulparams/elf32microblazeel.sh",
      "status": "modified",
      "additions": 2,
      "deletions": 23,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32microblazeel.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d/ld/emulparams/elf32microblazeel.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/emulparams/elf32microblazeel.sh?ref=c55b17b8098abde4ae7dfe0ec1f3b22a7fb0a34d",
      "patch": "@@ -1,23 +1,2 @@\n-SCRIPT_NAME=elfmicroblaze\n-OUTPUT_FORMAT=\"elf32-microblazeel\"\n-BIG_OUTPUT_FORMAT=\"elf32-microblaze\"\n-LITTLE_OUTPUT_FORMAT=\"elf32-microblazeel\"\n-#TEXT_START_ADDR=0\n-NONPAGED_TEXT_START_ADDR=0x28\n-ALIGNMENT=4\n-MAXPAGESIZE=4\n-ARCH=microblaze\n-EMBEDDED=yes\n-\n-NOP=0x80000000\n-\n-# Hmmm, there's got to be a better way.  This sets the stack to the\n-# top of the simulator memory (2^19 bytes).\n-#PAGE_SIZE=0x1000\n-#DATA_ADDR=0x10000\n-#OTHER_RELOCATING_SECTIONS='.stack 0x7000 : { _stack = .; *(.stack) }'\n-#$@{RELOCATING+ PROVIDE (__stack = 0x7000);@}\n-#OTHER_RELOCATING_SECTIONS='PROVIDE (_stack = _end + 0x1000);'\n-\n-TEMPLATE_NAME=elf32\n-#GENERATE_SHLIB_SCRIPT=yes\n+. ${srcdir}/emulparams/elf32microblaze.sh\n+OUTPUT_FORMAT=$LITTLE_OUTPUT_FORMAT"
    }
  ]
}