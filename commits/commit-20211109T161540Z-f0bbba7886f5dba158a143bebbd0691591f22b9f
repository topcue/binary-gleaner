{
  "sha": "f0bbba7886f5dba158a143bebbd0691591f22b9f",
  "node_id": "C_kwDOANOeidoAKGYwYmJiYTc4ODZmNWRiYTE1OGExNDNiZWJiZDA2OTE1OTFmMjJiOWY",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2021-11-02T19:05:39Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-11-09T16:15:40Z"
    },
    "message": "gdb.debuginfod/fetch_src_and_symbols.exp: fix when GDB is built with AddressSanitizer\n\nThis test fails for me, showing:\n\n    ERROR: tcl error sourcing /home/smarchi/src/binutils-gdb/gdb/testsuite/gdb.debuginfod/fetch_src_and_symbols.exp.\n    ERROR: This GDB was configured as follows:\n       configure --host=x86_64-pc-linux-gnu --target=x86_64-pc-linux-gnu\n                 --with-auto-load-dir=$debugdir:$datadir/auto-load\n                 --with-auto-load-safe-path=$debugdir:$datadir/auto-load\n    ... and much more ...\n\nThe problem is that TCL's exec throws an error as soon as the exec'ed\nprocess outputs on stderr.  When GDB is built with ASan, it prints some\nwarnings about pre-existing signal handlers:\n\n    warning: Found custom handler for signal 7 (Bus error) preinstalled.\n    warning: Found custom handler for signal 8 (Floating point exception) preinstalled.\n    warning: Found custom handler for signal 11 (Segmentation fault) preinstalled.\n\nPass --quiet to GDB to avoid these warnings.\n\nChange-Id: I3751d89b9b1df646da19149d7cb86775e2d3e80f",
    "tree": {
      "sha": "904ef6b41ed74b7c34f1987ff4c8fff5a67f5449",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/904ef6b41ed74b7c34f1987ff4c8fff5a67f5449"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f0bbba7886f5dba158a143bebbd0691591f22b9f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0bbba7886f5dba158a143bebbd0691591f22b9f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f0bbba7886f5dba158a143bebbd0691591f22b9f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0bbba7886f5dba158a143bebbd0691591f22b9f/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7b9f73fad09a5ec76002625d562e32c4debc2a5e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7b9f73fad09a5ec76002625d562e32c4debc2a5e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7b9f73fad09a5ec76002625d562e32c4debc2a5e"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "31e9e4a92f0c37039a62957162c74498443cf0c5",
      "filename": "gdb/testsuite/gdb.debuginfod/fetch_src_and_symbols.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f0bbba7886f5dba158a143bebbd0691591f22b9f/gdb/testsuite/gdb.debuginfod/fetch_src_and_symbols.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f0bbba7886f5dba158a143bebbd0691591f22b9f/gdb/testsuite/gdb.debuginfod/fetch_src_and_symbols.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.debuginfod/fetch_src_and_symbols.exp?ref=f0bbba7886f5dba158a143bebbd0691591f22b9f",
      "patch": "@@ -30,8 +30,13 @@ if { [which curl] == 0 } {\n }\n \n # Skip testing if gdb was not configured with debuginfod\n+#\n+# If GDB is built with ASan, it warns that some signal handlers (installed by\n+# ASan) exist on startup.  That makes TCL's exec throw an error.  Disable that\n+# by passing --quiet.\n+\n if { [string first \"with-debuginfod\" \\\n-\t [eval exec $GDB $INTERNAL_GDBFLAGS --configuration]] == -1 } {\n+\t [eval exec $GDB --quiet $INTERNAL_GDBFLAGS --configuration]] == -1 } {\n     untested \"gdb not configured with debuginfod\"\n     return -1\n }"
    }
  ]
}