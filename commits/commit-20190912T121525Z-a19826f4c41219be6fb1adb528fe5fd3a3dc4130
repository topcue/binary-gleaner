{
  "sha": "a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTE5ODI2ZjRjNDEyMTliZTZmYjFhZGI1MjhmZTVmZDNhM2RjNDEzMA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-09-12T07:55:46Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-09-12T12:15:25Z"
    },
    "message": "PR24981, Hit assertion failure in ld/ldlang.c:7504\n\nThis fixes a problem with commit 128bf1fe608, a patch I made\n2019-08-06.   Apparently it is possible to trigger the assertion I\nadded during an LTO bootstrap, something I haven't reproduced.\nHowever, I did find a case triggered by an odd linker script feature\nthat allows a file to be loaded from the script without specifying\nthat file on the command line.  Regarding input sections:\n  \"When you use a file name which is not an archive:file specifier\n   and does not contain any wild card characters, the linker will\n   first see if you also specified the file name on the linker command\n   line or in an INPUT command.  If you did not, the linker will\n   attempt to open the file as an input file, as though it appeared on\n   the command line.\"\n\nSo putting\n  .foo : { foo.a(*) }\ninto a script supposedly extracts foo.a into .foo.  Except it doesn't,\nsince this feature is meant for object files only.  Well anyway,\nassuming --whole-archive was given on the command line, foo.a contains\na -flto object and no other objects involved were -flto then we'll hit\nthe assert due to files added like foo.a here *not* having their input\nstatement put on the general statement list.  Why these are not put on\nthe statement list isn't obvious but it has been that way since commit\n193c5f93a17 in 1994.\n\n\tPR 24981\n\t* ldlang.c (lang_process): Remove assertion.  Comment.",
    "tree": {
      "sha": "54d271f0240e4e63ff52e57fa87dc8b12e5b0246",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/54d271f0240e4e63ff52e57fa87dc8b12e5b0246"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a19826f4c41219be6fb1adb528fe5fd3a3dc4130/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7a28970742a8a1509917d409af14c84e1f666baa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7a28970742a8a1509917d409af14c84e1f666baa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7a28970742a8a1509917d409af14c84e1f666baa"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 8,
    "deletions": 2
  },
  "files": [
    {
      "sha": "b3207cc6c6e5317a9a2014ed98c19c091dae1b76",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a19826f4c41219be6fb1adb528fe5fd3a3dc4130/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a19826f4c41219be6fb1adb528fe5fd3a3dc4130/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
      "patch": "@@ -1,3 +1,8 @@\n+2019-09-12  Alan Modra  <amodra@gmail.com>\n+\n+\tPR 24981\n+\t* ldlang.c (lang_process): Remove assertion.  Comment.\n+\n 2019-09-11  Alan Modra  <amodra@gmail.com>\n \n \t* emultempl/elf32.em: Remove \"misnamed\" comment.  Rename to.."
    },
    {
      "sha": "5a34e5cc230674fe640181f934741f9187969fba",
      "filename": "ld/ldlang.c",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a19826f4c41219be6fb1adb528fe5fd3a3dc4130/ld/ldlang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a19826f4c41219be6fb1adb528fe5fd3a3dc4130/ld/ldlang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ldlang.c?ref=a19826f4c41219be6fb1adb528fe5fd3a3dc4130",
      "patch": "@@ -7502,8 +7502,9 @@ lang_process (void)\n \t      prev = find_next_input_statement (prev);\n \t      if (*prev != (void *) plugin_insert->next_real_file)\n \t\t{\n-\t\t  /* Huh?  We didn't find the expected input statement.  */\n-\t\t  ASSERT (0);\n+\t\t  /* We didn't find the expected input statement.\n+\t\t     This can happen due to lookup_name creating input\n+\t\t     statements not linked into the statement list.  */\n \t\t  prev = &plugin_insert->header.next;\n \t\t}\n \t    }"
    }
  ]
}