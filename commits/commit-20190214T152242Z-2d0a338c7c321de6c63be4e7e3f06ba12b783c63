{
  "sha": "2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MmQwYTMzOGM3YzMyMWRlNmM2M2JlNGU3ZTNmMDZiYTEyYjc4M2M2Mw==",
  "commit": {
    "author": {
      "name": "Thomas Schwinge",
      "email": "thomas@codesourcery.com",
      "date": "2018-07-20T00:03:25Z"
    },
    "committer": {
      "name": "Thomas Schwinge",
      "email": "thomas@codesourcery.com",
      "date": "2019-02-14T15:22:42Z"
    },
    "message": "[gdb, hurd] Repair build after \"Convert struct target_ops to C++\" changes\n\n..., that is commit f6ac5f3d63e03a81c4ff3749aba234961cc9090e causing:\n\n    In file included from [...]/gdb/gnu-nat.c:24:0:\n    [...]/gdb/gnu-nat.h:123:1: error: expected class-name before '{' token\n     {\n     ^\n    [...]/gdb/gnu-nat.h:128:16: error: 'inferior' has not been declared\n       void detach (inferior *, int) override;\n                    ^~~~~~~~\n    [...]/gdb/gnu-nat.h:132:8: error: use of enum 'target_xfer_status' without previous declaration\n       enum target_xfer_status xfer_partial (enum target_object object,\n            ^~~~~~~~~~~~~~~~~~\n    [...]/gdb/gnu-nat.h:132:46: error: use of enum 'target_object' without previous declaration\n       enum target_xfer_status xfer_partial (enum target_object object,\n                                                  ^~~~~~~~~~~~~\n    [...]/gdb/gnu-nat.h:124:8: error: 'void gnu_nat_target::attach(const char*, int)' marked 'override', but does not override\n       void attach (const char *, int) override;\n            ^~~~~~\n    [...]\n\n    [...]/gdb/gnu-nat.c: In member function 'virtual void gnu_nat_target::detach(inferior*, int)':\n    [...]/gdb/gnu-nat.c:2286:34: error: 'ops' was not declared in this scope\n       inf_child_maybe_unpush_target (ops);\n                                      ^~~\n    [...]/gdb/gnu-nat.c:2286:34: note: suggested alternative: 'open'\n       inf_child_maybe_unpush_target (ops);\n                                      ^~~\n                                      open\n    [...]/gdb/gnu-nat.c:2286:3: error: 'inf_child_maybe_unpush_target' was not declared in this scope\n       inf_child_maybe_unpush_target (ops);\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n    [...]/gdb/gnu-nat.c:2286:3: note: suggested alternative: 'maybe_unpush_target'\n       inf_child_maybe_unpush_target (ops);\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n       maybe_unpush_target\n\n    [...]/gdb/i386-gnu-nat.c:200:1: warning: 'void gnu_store_registers(target_ops*, regcache*, int)' defined but not used [-Wunused-function]\n     gnu_store_registers (struct target_ops *ops,\n     ^~~~~~~~~~~~~~~~~~~\n    [...]/gdb/i386-gnu-nat.c:109:1: warning: 'void gnu_fetch_registers(target_ops*, regcache*, int)' defined but not used [-Wunused-function]\n     gnu_fetch_registers (struct target_ops *ops,\n     ^~~~~~~~~~~~~~~~~~~\n    [...]\n    /usr/bin/ld: i386-gnu-nat.o:(.data.rel+0x0): undefined reference to `vtable for i386_gnu_nat_target'\n    collect2: error: ld returned 1 exit status\n\n\tgdb/\n\t* gnu-nat.c (gnu_nat_target::detach): Instead of\n\t'inf_child_maybe_unpush_target (ops)' call 'maybe_unpush_target'.\n\t* gnu-nat.h: #include \"inf-child.h\".\n\t* i386-gnu-nat.c (gnu_fetch_registers): Rename/move to\n\t'i386_gnu_nat_target::fetch_registers'.\n\t(gnu_store_registers): Rename/move to\n\t'i386_gnu_nat_target::store_registers'.",
    "tree": {
      "sha": "0dc1515b3791684053f8ad10000fda0f8fcbc891",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0dc1515b3791684053f8ad10000fda0f8fcbc891"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/comments",
  "author": {
    "login": "tschwinge",
    "id": 21753,
    "node_id": "MDQ6VXNlcjIxNzUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tschwinge",
    "html_url": "https://github.com/tschwinge",
    "followers_url": "https://api.github.com/users/tschwinge/followers",
    "following_url": "https://api.github.com/users/tschwinge/following{/other_user}",
    "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions",
    "organizations_url": "https://api.github.com/users/tschwinge/orgs",
    "repos_url": "https://api.github.com/users/tschwinge/repos",
    "events_url": "https://api.github.com/users/tschwinge/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tschwinge/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tschwinge",
    "id": 21753,
    "node_id": "MDQ6VXNlcjIxNzUz",
    "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tschwinge",
    "html_url": "https://github.com/tschwinge",
    "followers_url": "https://api.github.com/users/tschwinge/followers",
    "following_url": "https://api.github.com/users/tschwinge/following{/other_user}",
    "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions",
    "organizations_url": "https://api.github.com/users/tschwinge/orgs",
    "repos_url": "https://api.github.com/users/tschwinge/repos",
    "events_url": "https://api.github.com/users/tschwinge/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tschwinge/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cabb5f067daa9227bf0323cbf64c6065d6e4796f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cabb5f067daa9227bf0323cbf64c6065d6e4796f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cabb5f067daa9227bf0323cbf64c6065d6e4796f"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 15,
    "deletions": 7
  },
  "files": [
    {
      "sha": "fcaae6125e38d1e8f978aa794ba7a2ae83b47e72",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
      "patch": "@@ -1,5 +1,13 @@\n 2019-02-14  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\t* gnu-nat.c (gnu_nat_target::detach): Instead of\n+\t'inf_child_maybe_unpush_target (ops)' call 'maybe_unpush_target'.\n+\t* gnu-nat.h: #include \"inf-child.h\".\n+\t* i386-gnu-nat.c (gnu_fetch_registers): Rename/move to\n+\t'i386_gnu_nat_target::fetch_registers'.\n+\t(gnu_store_registers): Rename/move to\n+\t'i386_gnu_nat_target::store_registers'.\n+\n \t* config/i386/nm-i386gnu.h: Don't \"#include\" any files.\n \t* gnu-nat.h (mach_thread_info): New function.\n \t* gnu-nat.c (thread_takeover_sc_cmd): Use it."
    },
    {
      "sha": "78966c805ddb2007d8f389a0eab248960fab5509",
      "filename": "gdb/gnu-nat.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/gnu-nat.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/gnu-nat.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gnu-nat.c?ref=2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
      "patch": "@@ -2280,7 +2280,7 @@ gnu_nat_target::detach (inferior *inf, int from_tty)\n   inferior_ptid = null_ptid;\n   detach_inferior (pid);\n \n-  inf_child_maybe_unpush_target (ops);\n+  maybe_unpush_target ();\n }\n \f\n "
    },
    {
      "sha": "4bd4176ead8882afad0192fc686321860e7caacb",
      "filename": "gdb/gnu-nat.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/gnu-nat.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/gnu-nat.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gnu-nat.h?ref=2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
      "patch": "@@ -35,6 +35,8 @@ extern __typeof__ (mach_thread_info) mach_thread_info asm (\"thread_info\");\n \n #include <unistd.h>\n \n+#include \"inf-child.h\"\n+\n struct inf;\n \n extern struct inf *gnu_current_inf;"
    },
    {
      "sha": "75ae641f8e06ca6c289c6eaa7a44629b893899ae",
      "filename": "gdb/i386-gnu-nat.c",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/i386-gnu-nat.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2d0a338c7c321de6c63be4e7e3f06ba12b783c63/gdb/i386-gnu-nat.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/i386-gnu-nat.c?ref=2d0a338c7c321de6c63be4e7e3f06ba12b783c63",
      "patch": "@@ -105,9 +105,8 @@ fetch_fpregs (struct regcache *regcache, struct proc *thread)\n }\n \n /* Fetch register REGNO, or all regs if REGNO is -1.  */\n-static void\n-gnu_fetch_registers (struct target_ops *ops,\n-\t\t     struct regcache *regcache, int regno)\n+void\n+i386_gnu_nat_target::fetch_registers (struct regcache *regcache, int regno)\n {\n   struct proc *thread;\n   ptid_t ptid = regcache->ptid ();\n@@ -196,9 +195,8 @@ store_fpregs (const struct regcache *regcache, struct proc *thread, int regno)\n }\n \n /* Store at least register REGNO, or all regs if REGNO == -1.  */\n-static void\n-gnu_store_registers (struct target_ops *ops,\n-\t\t     struct regcache *regcache, int regno)\n+void\n+i386_gnu_nat_target::store_registers (struct regcache *regcache, int regno)\n {\n   struct proc *thread;\n   struct gdbarch *gdbarch = regcache->arch ();"
    }
  ]
}