{
  "sha": "9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWEyZGUzZmM3ZjdjNDBkYTZlOGQ1NTUzYzI5ZTZjYjhhMjQzMGRjOA==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-03-12T10:34:45Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-03-12T10:34:45Z"
    },
    "message": "[gdb/testsuite] Fix gdb.linespec/explicit.exp FAIL with glibc debug info\n\nWhen running test-case gdb.linespec/explicit.exp with GLIBC debuginfo\ninstalled, I run into:\n...\n(gdb) break -source exp^GlFAIL: gdb.linespec/explicit.exp: complete \\\n  non-unique file name (timeout)\n...\n\nThe regexp that times out is:\n...\n           -re \"break -source exp\\\\\\x07licit\" {\n...\nand the reason it times out is that gdb only outputs an \"l\" after the tab, while\nthe regexp expect a futher \"icit\".\n\nThis is a regression since commit 507dd60e28 \"[gdb/testsuite, 1/2] Fix\ngdb.linespec/explicit.exp with check-read1\", where I merged the matching for\nthe two cases where GLIBC debuginfo is either installed or not, as it turns\nout incorrectly, presumably because even though I tested with GLIBC debuginfo\ninfo installed and deinstalled, that didn't make a difference because I didn't\nuse configure flag --with-separate-debug-dir=/usr/lib/debug.\n\nFix this by not explictly matching the \"icit\" part.\n\nTested on x86_64-linux, with and without GLIBC debuginfo installed, both with\nmake targets check and check-read1.\n\ngdb/testsuite/ChangeLog:\n\n2020-03-12  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.linespec/explicit.exp: Fix \"complete non-unique file name\" test\n\tin presence of GLIBC debuginfo.",
    "tree": {
      "sha": "158820210b67df56a6754567b75cf4cf16d90656",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/158820210b67df56a6754567b75cf4cf16d90656"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3217502e1ba7409676e192100a0147a49dd5ae7a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3217502e1ba7409676e192100a0147a49dd5ae7a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3217502e1ba7409676e192100a0147a49dd5ae7a"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 24,
    "deletions": 1
  },
  "files": [
    {
      "sha": "7e9e490c61ea96783c33e988199d2f258045da18",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
      "patch": "@@ -1,3 +1,8 @@\n+2020-03-12  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.linespec/explicit.exp: Fix \"complete non-unique file name\" test\n+\tin presence of GLIBC debuginfo.\n+\n 2020-03-12  Tom de Vries  <tdevries@suse.de>\n \n \t* lib/gdb.exp (gdb_core_cmd): Use string_to_regexp for regexp-matching"
    },
    {
      "sha": "4f457dc372fc4a9cc05cdbdb22cda83b09b6fd9a",
      "filename": "gdb/testsuite/gdb.linespec/explicit.exp",
      "status": "modified",
      "additions": 19,
      "deletions": 1,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8/gdb/testsuite/gdb.linespec/explicit.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8/gdb/testsuite/gdb.linespec/explicit.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.linespec/explicit.exp?ref=9a2de3fc7f7c40da6e8d5553c29e6cb8a2430dc8",
      "patch": "@@ -239,8 +239,26 @@ namespace eval $testfile {\n \n \tset tst \"complete non-unique file name\"\n \tsend_gdb \"break -source exp\\t\"\n+\t# We're matching two cases here:\n+\t# - without GLIBC debuginfo\n+\t#   (gdb) break -source exp^Glicit^G^M\n+\t#   explicit.c  explicit2.c  ^M\n+\t#   (gdb) break -source explicit^M\n+\t#   Source filename requires function, label, or line offset.^M\n+\t#   (gdb) PASS: gdb.linespec/explicit.exp: complete non-unique file name\n+\t# - with GLIBC debuginfo:\n+\t#   (gdb) break -source exp^Gl^G^M\n+\t#   explicit.c  explicit2.c  explicit_bzero.c  explicit_bzero_chk.c \\\n+\t#     explodename.c  ^M\n+\t#   (gdb) break -source expl^M\n+\t#   Source filename requires function, label, or line offset.^M\n+\t#   (gdb) PASS: gdb.linespec/explicit.exp: complete non-unique file name\n \tgdb_test_multiple \"\" $tst {\n-\t    -re \"break -source exp\\\\\\x07licit\" {\n+\t    -re \"break -source exp\\\\\\x07l\" {\n+\t\t# At this point, either output is done (first case), or a\n+\t\t# further \"icit\" is emitted (second case).  We have no reliable\n+\t\t# way to decide one way or another, so just send the tabs, even\n+\t\t# though that may be a little early in the second case.\n \t\tsend_gdb \"\\t\\t\"\n \t\tgdb_test_multiple \"\" $tst {\n \t\t    -re \"\\\\\\x07\\r\\nexplicit.c\\[ \\t\\]+explicit2.c\\[ \\t\\]+\\(expl.*\\)?\\r\\n$gdb_prompt\" {"
    }
  ]
}