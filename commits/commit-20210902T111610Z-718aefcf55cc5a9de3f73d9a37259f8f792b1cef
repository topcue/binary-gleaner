{
  "sha": "718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzE4YWVmY2Y1NWNjNWE5ZGUzZjczZDlhMzcyNTlmOGY3OTJiMWNlZg==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-09-02T11:16:10Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-09-02T11:16:10Z"
    },
    "message": "Fix the V850 assembler's generation of relocations for the st.b instruction.\n\n\tPR 28292\ngas\t* config/tc-v850.c (handle_lo16): Also accept\n\tBFD_RELOC_V850_LO16_SPLIT_OFFSET.\n\t* testsuite/gas/v850/split-lo16.s: Add extra line.\n\t* testsuite/gas/v850/split-lo16.d: Update expected disassembly.\n\nopcodes\t* v850-opc.c (D16): Use BFD_RELOC_V850_LO16_SPLIT_OFFSET in place\n\tof BFD_RELOC_16.",
    "tree": {
      "sha": "ad9614678c1ee7c55ffc1c57e146816471569d94",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ad9614678c1ee7c55ffc1c57e146816471569d94"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b03b65e2aa3243bc0224ba3f933a3e94f1eed8a1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b03b65e2aa3243bc0224ba3f933a3e94f1eed8a1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b03b65e2aa3243bc0224ba3f933a3e94f1eed8a1"
    }
  ],
  "stats": {
    "total": 66,
    "additions": 41,
    "deletions": 25
  },
  "files": [
    {
      "sha": "0eb90ac4aa480980f5460aa0431d71713a26148e",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -1,3 +1,11 @@\n+2021-09-02  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 28292\n+\t* config/tc-v850.c (handle_lo16): Also accept\n+\tBFD_RELOC_V850_LO16_SPLIT_OFFSET.\n+\t* testsuite/gas/v850/split-lo16.s: Add extra line.\n+\t* testsuite/gas/v850/split-lo16.d: Update expected disassembly.\n+\n 2021-08-11  Darius Galis  <darius.galis@cyberthorstudios.com>\n \n \t* config/rx-parse.y (DECNT): Fixed typo."
    },
    {
      "sha": "915881bd22ea25bc4b2b88581d163c15888d73f0",
      "filename": "gas/config/tc-v850.c",
      "status": "modified",
      "additions": 18,
      "deletions": 21,
      "changes": 39,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/config/tc-v850.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/config/tc-v850.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-v850.c?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -1713,7 +1713,7 @@ md_convert_frag (bfd *abfd ATTRIBUTE_UNUSED,\n       /* Now create the conditional branch + fixup to the final target.  */\n       /* 0x000107ea = bne LBL(disp17).  */\n       md_number_to_chars ((char *) buffer + 2, 0x000107ea, 4);\n-      fix_new (fragP, fragP->fr_fix+2, 4, fragP->fr_symbol,\n+      fix_new (fragP, fragP->fr_fix + 2, 4, fragP->fr_symbol,\n \t       fragP->fr_offset, 1,\n \t       BFD_RELOC_V850_17_PCREL);\n       fragP->fr_fix += 6;\n@@ -2020,22 +2020,19 @@ handle_lo16 (const struct v850_operand *operand, const char **errmsg)\n {\n   if (operand == NULL)\n     return BFD_RELOC_LO16;\n-\n-  if (operand->default_reloc == BFD_RELOC_LO16)\n-    return BFD_RELOC_LO16;\n-\n-  if (operand->default_reloc == BFD_RELOC_V850_16_SPLIT_OFFSET)\n-    return BFD_RELOC_V850_LO16_SPLIT_OFFSET;\n-\n-  if (operand->default_reloc == BFD_RELOC_V850_16_S1)\n-    return BFD_RELOC_V850_LO16_S1;\n-\n-  if (operand->default_reloc == BFD_RELOC_16)\n-    return BFD_RELOC_LO16;\n-\n-  *errmsg = _(\"lo() relocation used on an instruction which does \"\n-\t      \"not support it\");\n-  return BFD_RELOC_64;  /* Used to indicate an error condition.  */\n+  \n+  switch (operand->default_reloc)\n+    {\n+    case BFD_RELOC_LO16: return BFD_RELOC_LO16;\n+    case BFD_RELOC_V850_LO16_SPLIT_OFFSET: return BFD_RELOC_V850_LO16_SPLIT_OFFSET;\n+    case BFD_RELOC_V850_16_SPLIT_OFFSET: return BFD_RELOC_V850_LO16_SPLIT_OFFSET;\n+    case BFD_RELOC_V850_16_S1: return BFD_RELOC_V850_LO16_S1;\n+    case BFD_RELOC_16: return BFD_RELOC_LO16;\n+    default:\n+      *errmsg = _(\"lo() relocation used on an instruction which does \"\n+\t\t  \"not support it\");\n+      return BFD_RELOC_64;  /* Used to indicate an error condition.  */\n+    }\n }\n \n static bfd_reloc_code_real_type\n@@ -2157,15 +2154,15 @@ v850_reloc_prefix (const struct v850_operand *operand, const char **errmsg)\n       return reloc;\t\t\t\t\t\t\t\\\n     }\n \n-  CHECK_ (\"hi0\",    handle_hi016(operand, errmsg)  );\n-  CHECK_ (\"hi\",\t    handle_hi16(operand, errmsg)   );\n-  CHECK_ (\"lo\",\t    handle_lo16 (operand, errmsg)  );\n+  CHECK_ (\"hi0\",    handle_hi016 (operand, errmsg));\n+  CHECK_ (\"hi\",\t    handle_hi16 (operand, errmsg));\n+  CHECK_ (\"lo\",\t    handle_lo16 (operand, errmsg));\n   CHECK_ (\"sdaoff\", handle_sdaoff (operand, errmsg));\n   CHECK_ (\"zdaoff\", handle_zdaoff (operand, errmsg));\n   CHECK_ (\"tdaoff\", handle_tdaoff (operand, errmsg));\n   CHECK_ (\"hilo\",   BFD_RELOC_32);\n   CHECK_ (\"lo23\",   BFD_RELOC_V850_23);\n-  CHECK_ (\"ctoff\",  handle_ctoff (operand, errmsg) );\n+  CHECK_ (\"ctoff\",  handle_ctoff (operand, errmsg));\n \n   /* Restore skipped parenthesis.  */\n   if (paren_skipped)"
    },
    {
      "sha": "0108208bf7c84a97616c2bfb498978be55288d49",
      "filename": "gas/testsuite/gas/v850/split-lo16.d",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/testsuite/gas/v850/split-lo16.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/testsuite/gas/v850/split-lo16.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/v850/split-lo16.d?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -8,11 +8,13 @@\n    4:\t01 16 00 00 \taddi\t0, r1, r2\n \t\t\t6: R_V8.*\tfoo\n    8:\t01 17 00 00 \tld\\.b\t0\\[r1\\], r2\n-\t\t\ta: R_V8.*\tfoo\n+\t\t\t8: R_V8.*\tfoo\n    c:\t81 17 01 00 \tld\\.bu\t0\\[r1\\], r2\n \t\t\tc: R_V8.*\tfoo\n   10:\ta1 17 45 23 \tld\\.bu\t9029\\[r1\\], r2\n   14:\t81 17 57 34 \tld\\.bu\t13398\\[r1\\], r2\n   18:\t20 57 01 00 \tld.w\t0\\[r0\\], r10\n   1c:\t20 57 79 56 \tld.w\t22136\\[r0\\], r10\n+  20:\t40 57 00 00 \tst.b\tr10, 0\\[r0\\]\n+\t\t\t20: R_V8.*\tVSWC\n #pass"
    },
    {
      "sha": "7ca9cb3754af516fe172cad426de00d4ea26c9c2",
      "filename": "gas/testsuite/gas/v850/split-lo16.s",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/testsuite/gas/v850/split-lo16.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/gas/testsuite/gas/v850/split-lo16.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/v850/split-lo16.s?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -6,5 +6,8 @@\n \tld.bu\tlo(0x12345),r1,r2\n \tld.bu\tlo(0x123456),r1,r2\n \n-\tld.w lo(0)[r0], r10\n-\tld.w lo(0x12345678)[r0], r10\n+\tld.w    lo(0)[r0], r10\n+\tld.w    lo(0x12345678)[r0], r10\n+\n+\t# This is from PR 28292\n+\tst.b    r10, VSWC[r0]"
    },
    {
      "sha": "ca3206dda6d5cb7212ee8a29c1739a430f3fcb4d",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -1,3 +1,9 @@\n+2021-09-02  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 28292\n+\t* v850-opc.c (D16): Use BFD_RELOC_V850_LO16_SPLIT_OFFSET in place\n+\tof BFD_RELOC_16.\n+\n 2021-08-17  Shahab Vahedi <shahab@synopsys.com>\n \n \t* arc-regs.h (DEF): Fix the register numbers."
    },
    {
      "sha": "852fe61100887c79c89901cf8ee349c28050cb35",
      "filename": "opcodes/v850-opc.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/opcodes/v850-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/718aefcf55cc5a9de3f73d9a37259f8f792b1cef/opcodes/v850-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/v850-opc.c?ref=718aefcf55cc5a9de3f73d9a37259f8f792b1cef",
      "patch": "@@ -1190,7 +1190,7 @@ const struct v850_operand v850_operands[] =\n \n /* The disp16 field in a format 8 insn.  */\n #define D16\t(I16U + 1)\n-  { 16, 16, NULL, NULL, V850_OPERAND_SIGNED | V850_OPERAND_DISP, BFD_RELOC_16 },\n+  { 16, 16, NULL, NULL, V850_OPERAND_SIGNED | V850_OPERAND_DISP, BFD_RELOC_V850_LO16_SPLIT_OFFSET },\n \n /* The disp16 field in an format 7 unsigned byte load insn.  */\n #define D16_16\t(D16 + 1)"
    }
  ]
}