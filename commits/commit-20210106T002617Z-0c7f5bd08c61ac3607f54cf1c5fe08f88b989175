{
  "sha": "0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MGM3ZjViZDA4YzYxYWMzNjA3ZjU0Y2YxYzVmZTA4Zjg4Yjk4OTE3NQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-05T05:19:33Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-06T00:26:17Z"
    },
    "message": "sim: h8300: simplify testsuite runner\n\nWe don't need to manually enumerate every test.  Use a glob function\nlike every other port and rely on the (already existing) #mach headers\nin each file to filter out targets we don't care about.",
    "tree": {
      "sha": "de6dd1153ab41ab8dcbf7705c15858df98258933",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/de6dd1153ab41ab8dcbf7705c15858df98258933"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "85dd67bd6dcd9ae45208bb18bcb09d0e9fafdcde",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/85dd67bd6dcd9ae45208bb18bcb09d0e9fafdcde",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/85dd67bd6dcd9ae45208bb18bcb09d0e9fafdcde"
    }
  ],
  "stats": {
    "total": 76,
    "additions": 15,
    "deletions": 61
  },
  "files": [
    {
      "sha": "a4e7532352b1d927f13c5f6d2e9be5730a08afe0",
      "filename": "sim/testsuite/sim/h8300/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175/sim/testsuite/sim/h8300/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175/sim/testsuite/sim/h8300/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/h8300/ChangeLog?ref=0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-05  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* allinsn.exp: Rewrite file to use globs.\n+\n 2004-06-28  Alexandre Oliva  <aoliva@redhat.com>\n \n \t2003-07-22  Michael Snyder  <msnyder@redhat.com>"
    },
    {
      "sha": "68468f6bb10682f3f984dfe0373adac82c3fc6a4",
      "filename": "sim/testsuite/sim/h8300/allinsn.exp",
      "status": "modified",
      "additions": 11,
      "deletions": 61,
      "changes": 72,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175/sim/testsuite/sim/h8300/allinsn.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0c7f5bd08c61ac3607f54cf1c5fe08f88b989175/sim/testsuite/sim/h8300/allinsn.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sim/h8300/allinsn.exp?ref=0c7f5bd08c61ac3607f54cf1c5fe08f88b989175",
      "patch": "@@ -1,65 +1,15 @@\n # Hitachi H8/300 (h, s, sx) simulator testsuite\n \n-set all \"h8300 h8300h h8300s h8sx\"\n-\n if {[istarget h8300*-*-*] || [istarget h8sx*-*-*]} then {\n-    run_sim_test addb.s  $all\n-    run_sim_test addw.s  $all\n-    run_sim_test addl.s  $all\n-    run_sim_test adds.s  $all\n-    run_sim_test addx.s  $all\n-    run_sim_test andb.s  $all\n-    run_sim_test andw.s  $all\n-    run_sim_test andl.s  $all\n-    run_sim_test band.s  $all\n-    run_sim_test bfld.s  h8sx\n-    run_sim_test biand.s $all\n-    run_sim_test bra.s   $all\n-    run_sim_test bset.s  $all\n-    run_sim_test cmpb.s  $all\n-    run_sim_test cmpw.s  $all\n-    run_sim_test cmpl.s  $all\n-    run_sim_test daa.s   $all\n-    run_sim_test das.s   $all\n-    run_sim_test dec.s   $all\n-    run_sim_test div.s   $all\n-    run_sim_test extw.s  $all\n-    run_sim_test extl.s  $all\n-    run_sim_test inc.s   $all\n-    run_sim_test jmp.s   $all\n-    run_sim_test ldc.s   $all\n-    run_sim_test ldm.s   $all\n-    run_sim_test mac.s   $all\n-    run_sim_test movb.s  $all\n-    run_sim_test movw.s  $all\n-    run_sim_test movl.s  $all\n-    run_sim_test mova.s  h8sx\n-    run_sim_test movmd.s h8sx\n-    run_sim_test movsd.s h8sx\n-    run_sim_test mul.s   $all\n-    run_sim_test neg.s   $all\n-    run_sim_test nop.s   $all\n-    run_sim_test not.s   $all\n-    run_sim_test orb.s   $all\n-    run_sim_test orw.s   $all\n-    run_sim_test orl.s   $all\n-    run_sim_test rotl.s  $all\n-    run_sim_test rotr.s  $all\n-    run_sim_test rotxl.s $all\n-    run_sim_test rotxr.s $all\n-    run_sim_test shal.s  $all\n-    run_sim_test shar.s  $all\n-    run_sim_test shll.s  $all\n-    run_sim_test shlr.s  $all\n-    run_sim_test stack.s $all\n-    run_sim_test stc.s   $all\n-    run_sim_test subb.s  $all\n-    run_sim_test subw.s  $all\n-    run_sim_test subl.s  $all\n-    run_sim_test subs.s  $all\n-    run_sim_test subx.s  $all\n-    run_sim_test tas.s   $all\n-    run_sim_test xorb.s  $all\n-    run_sim_test xorw.s  $all\n-    run_sim_test xorl.s  $all\n+    set all_machs \"h8300 h8300h h8300s h8sx\"\n+\n+    foreach src [lsort [glob -nocomplain $srcdir/$subdir/*.s]] {\n+\t# If we're only testing specific files and this isn't one of them,\n+\t# skip it.\n+\tif ![runtest_file_p $runtests $src] {\n+\t    continue\n+\t}\n+\n+\trun_sim_test $src $all_machs\n+    }\n }"
    }
  ]
}