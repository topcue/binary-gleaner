{
  "sha": "1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MWY1ODNiYzJmY2IxYjVjNDEyNWZhZjhiOGU4MTUyNTViMmIyMWI2Mg==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-01-26T16:18:39Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2021-01-26T16:18:52Z"
    },
    "message": "nios2: Don't disable relaxation with --gdwarf-N\n\nGCC 11 passes --gdwarf-5 to assembler to enable DWARF5 debug info.  Don't\ndisable relaxation when --gdwarf-N is specified.  The assembler generated\ndebug information will treat the sequence of the relaxed instructions as\na single instruction.\n\n\tPR gas/27243\n\t* config/tc-nios2.c (md_begin): Don't disable relaxation with\n\t--gdwarf-N.\n\t* testsuite/gas/nios2/relax.d: New file.\n\t* testsuite/gas/nios2/relax.s: Likewise.",
    "tree": {
      "sha": "3edf29303405b2e9a25fc8766a08a2b68733705f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3edf29303405b2e9a25fc8766a08a2b68733705f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4ef367bffd73d50002339deba40983530ccb9d15",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4ef367bffd73d50002339deba40983530ccb9d15",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4ef367bffd73d50002339deba40983530ccb9d15"
    }
  ],
  "stats": {
    "total": 42,
    "additions": 38,
    "deletions": 4
  },
  "files": [
    {
      "sha": "b3eb7db8cf95ff8bcfbe343968113d5c9cec0267",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
      "patch": "@@ -1,3 +1,11 @@\n+2021-01-26  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR gas/27243\n+\t* config/tc-nios2.c (md_begin): Don't disable relaxation with\n+\t--gdwarf-N.\n+\t* testsuite/gas/nios2/relax.d: New file.\n+\t* testsuite/gas/nios2/relax.s: Likewise.\n+\n 2021-01-26  Alan Modra  <amodra@gmail.com>\n \n \t* testsuite/gas/all/local-label-overflow.d: Use xfail rather than"
    },
    {
      "sha": "be4536caa8a0d464788d7e25ed399a7d11a048bf",
      "filename": "gas/config/tc-nios2.c",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/config/tc-nios2.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/config/tc-nios2.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-nios2.c?ref=1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
      "patch": "@@ -3643,10 +3643,6 @@ md_begin (void)\n   nios2_as_options.noat = FALSE;\n   nios2_as_options.nobreak = FALSE;\n \n-  /* Debug information is incompatible with relaxation.  */\n-  if (debug_type != DEBUG_UNSPECIFIED)\n-    nios2_as_options.relax = relax_none;\n-\n   /* Initialize the alignment data.  */\n   nios2_current_align_seg = now_seg;\n   nios2_last_label = NULL;"
    },
    {
      "sha": "ca01a4f926a5793c0fce1c122204d524baef50bd",
      "filename": "gas/testsuite/gas/nios2/relax.d",
      "status": "added",
      "additions": 25,
      "deletions": 0,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/testsuite/gas/nios2/relax.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/testsuite/gas/nios2/relax.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/nios2/relax.d?ref=1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
      "patch": "@@ -0,0 +1,25 @@\n+#source: relax.s\n+#as: --gdwarf-5\n+#objdump: -w -WL -dr --prefix-addresses --show-raw-insn\n+#name: NIOS2 relax with --gdwarf-5\n+\n+# Test relaxation with assembler generated debug info.\n+.*:     file format elf32-littlenios2\n+\n+Contents of the .debug_line section:\n+\n+CU: ./relax.s:\n+File +name +Line +number +Starting +address +View +Stmt\n+relax.s +2 +0 +x\n+relax.s +5 +0x10018 +x\n+relax.s +- +0x1001c\n+\n+Disassembly of section .text:\n+0x00000000 21400526 \tbeq\tr4,r5,0x00000018\n+0x00000004 0002e03a \tnextpc\tat\n+0x00000008 085fffc4 \taddi\tat,at,32767\n+0x0000000c 085fffc4 \taddi\tat,at,32767\n+0x00000010 08400484 \taddi\tat,at,18\n+0x00000014 0800683a \tjmp\tat\n+\t...\n+0x00010018 f800283a \tret"
    },
    {
      "sha": "ef417fdc33b6303617f0d62d02927d0b5db643c6",
      "filename": "gas/testsuite/gas/nios2/relax.s",
      "status": "added",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/testsuite/gas/nios2/relax.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1f583bc2fcb1b5c4125faf8b8e815255b2b21b62/gas/testsuite/gas/nios2/relax.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/nios2/relax.s?ref=1f583bc2fcb1b5c4125faf8b8e815255b2b21b62",
      "patch": "@@ -0,0 +1,5 @@\n+\t.text\n+\tbne\tr4, r5, 1f\n+\t.zero 0x10000\n+1:\n+\tret"
    }
  ]
}