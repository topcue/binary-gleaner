{
  "sha": "bb8d126033bc7982808323da80ac8649e27bb3eb",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmI4ZDEyNjAzM2JjNzk4MjgwODMyM2RhODBhYzg2NDllMjdiYjNlYg==",
  "commit": {
    "author": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2020-06-23T16:33:31Z"
    },
    "committer": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2020-06-23T16:33:31Z"
    },
    "message": "Adjust command completion output when TUI is disabled\n\nThe history-scrolling commands \"+\", \"-\", \"<\" and \">\" are only known to\nGDB when TUI is enabled.  This means the \"complete pipe \" command\nproduces different output depending on whether TUI is present, which\nin turn caused\n\nFAIL: gdb.base/shell.exp: cmd complete \"pipe \"\n\nThis patch provides different patterns for that test depending on\nwhether or not TUI is available.\n\n2020-06-23  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgdb/testsuite/\n\t* lib/completion-support.exp (test_gdb_completion_offers_commands):\n\tAdjust for omitted commands when TUI is disabled.",
    "tree": {
      "sha": "030c1170a28ee778b642c96aa57b6561b403be8e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/030c1170a28ee778b642c96aa57b6561b403be8e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/bb8d126033bc7982808323da80ac8649e27bb3eb",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bb8d126033bc7982808323da80ac8649e27bb3eb",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/bb8d126033bc7982808323da80ac8649e27bb3eb",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bb8d126033bc7982808323da80ac8649e27bb3eb/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "d0dded5bc251e506ef65b13696c624ea8669ed6e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d0dded5bc251e506ef65b13696c624ea8669ed6e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d0dded5bc251e506ef65b13696c624ea8669ed6e"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 18,
    "deletions": 4
  },
  "files": [
    {
      "sha": "0864d7522a459f1e50b14f495edddf9cf8bdc370",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb8d126033bc7982808323da80ac8649e27bb3eb/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb8d126033bc7982808323da80ac8649e27bb3eb/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=bb8d126033bc7982808323da80ac8649e27bb3eb",
      "patch": "@@ -1,3 +1,8 @@\n+2020-06-23  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* lib/completion-support.exp (test_gdb_completion_offers_commands):\n+\tAdjust for omitted commands when TUI is disabled.\n+\n 2020-06-23  Gary Benson <gbenson@redhat.com>\n \t    Pedro Alves  <palves@redhat.com>\n "
    },
    {
      "sha": "51436cc6713caa307339d9a559a9029d55d71a5d",
      "filename": "gdb/testsuite/lib/completion-support.exp",
      "status": "modified",
      "additions": 13,
      "deletions": 4,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bb8d126033bc7982808323da80ac8649e27bb3eb/gdb/testsuite/lib/completion-support.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bb8d126033bc7982808323da80ac8649e27bb3eb/gdb/testsuite/lib/completion-support.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/completion-support.exp?ref=bb8d126033bc7982808323da80ac8649e27bb3eb",
      "patch": "@@ -555,10 +555,19 @@ proc test_gdb_completion_offers_commands {input_line} {\n     # Force showing two commands.\n     gdb_test_no_output \"set max-completions 2\" \"\"\n \n-    test_gdb_complete_multiple $input_line \"\" \"\" {\n-\t\"!\"\n-\t\"+\"\n-    } \"\" \"\" 1\n+    # TUI adds additional commands to the possible completions, so we\n+    # need different patterns depending on whether or not it is enabled.\n+    if { [skip_tui_tests] } {\n+\ttest_gdb_complete_multiple $input_line \"\" \"\" {\n+\t    \"!\"\n+\t    \"actions\"\n+\t} \"\" \"\" 1\n+    } else {\n+\ttest_gdb_complete_multiple $input_line \"\" \"\" {\n+\t    \"!\"\n+\t    \"+\"\n+\t} \"\" \"\" 1\n+    }\n \n     # Restore.\n     gdb_test_no_output \"set max-completions $max_completions\" \"\""
    }
  ]
}