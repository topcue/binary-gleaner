{
  "sha": "52b8387412e32380013a46dd00959e65ecef71fb",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTJiODM4NzQxMmUzMjM4MDAxM2E0NmRkMDA5NTllNjVlY2VmNzFmYg==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-27T05:55:50Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-07-01T21:55:26Z"
    },
    "message": "opcodes: constify & scope microblaze opcodes\n\nThis is exporting the variable \"opcodes\" as a large writable blob.\nThis is not a namespace friendly name, so add a \"microblaze\" prefix,\nand then sprinkle const over its definition & use.",
    "tree": {
      "sha": "58c187ee90d65e0ab2b3e055dec6f02cca0ae114",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/58c187ee90d65e0ab2b3e055dec6f02cca0ae114"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/52b8387412e32380013a46dd00959e65ecef71fb",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/52b8387412e32380013a46dd00959e65ecef71fb",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/52b8387412e32380013a46dd00959e65ecef71fb",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/52b8387412e32380013a46dd00959e65ecef71fb/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6c2ede018c51895a3ce7902c86698b90a086e6e0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6c2ede018c51895a3ce7902c86698b90a086e6e0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6c2ede018c51895a3ce7902c86698b90a086e6e0"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 30,
    "deletions": 13
  },
  "files": [
    {
      "sha": "0d830d62b520be62e5e6aaa750e6751925cab7b4",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/52b8387412e32380013a46dd00959e65ecef71fb/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/52b8387412e32380013a46dd00959e65ecef71fb/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=52b8387412e32380013a46dd00959e65ecef71fb",
      "patch": "@@ -1,3 +1,8 @@\n+2021-07-01  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* config/tc-microblaze.c (md_begin): Make opcode const.  Rename\n+\topcodes to microblaze_opcodes.\n+\n 2021-07-01  Mike Frysinger  <vapier@gentoo.org>\n \n \t* config/tc-aarch64.c (struct templates): Make opcode const."
    },
    {
      "sha": "881172d52748fbcc573eeb91913b3450afcd0bff",
      "filename": "gas/config/tc-microblaze.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/52b8387412e32380013a46dd00959e65ecef71fb/gas/config/tc-microblaze.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/52b8387412e32380013a46dd00959e65ecef71fb/gas/config/tc-microblaze.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-microblaze.c?ref=52b8387412e32380013a46dd00959e65ecef71fb",
      "patch": "@@ -411,12 +411,12 @@ const pseudo_typeS md_pseudo_table[] =\n void\n md_begin (void)\n {\n-  struct op_code_struct * opcode;\n+  const struct op_code_struct * opcode;\n \n   opcode_hash_control = str_htab_create ();\n \n   /* Insert unique names into hash table.  */\n-  for (opcode = opcodes; opcode->name; opcode ++)\n+  for (opcode = microblaze_opcodes; opcode->name; opcode ++)\n     str_hash_insert (opcode_hash_control, opcode->name, opcode, 0);\n }\n "
    },
    {
      "sha": "2b7022138102771f1a8fd4a74f7f5a46d0a2926c",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=52b8387412e32380013a46dd00959e65ecef71fb",
      "patch": "@@ -1,3 +1,15 @@\n+2021-07-01  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* microblaze-dis.c (get_field_special): Make op const.\n+\t(read_insn_microblaze): Make opr & op const.  Rename opcodes to\n+\tmicroblaze_opcodes.\n+\t(print_insn_microblaze): Make op & pop const.\n+\t(get_insn_microblaze): Make op const.  Rename opcodes to\n+\tmicroblaze_opcodes.\n+\t(microblaze_get_target_address): Likewise.\n+\t* microblaze-opc.h (struct op_code_struct): Make const.\n+\tRename opcodes to microblaze_opcodes.\n+\n 2021-07-01  Mike Frysinger  <vapier@gentoo.org>\n \n \t* aarch64-gen.c (aarch64_opcode_table): Add const."
    },
    {
      "sha": "1696f559a0b79ef25ef1d3a9678584da0a6ce201",
      "filename": "opcodes/microblaze-dis.c",
      "status": "modified",
      "additions": 9,
      "deletions": 9,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/microblaze-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/microblaze-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/microblaze-dis.c?ref=52b8387412e32380013a46dd00959e65ecef71fb",
      "patch": "@@ -111,7 +111,7 @@ get_field_imm15 (struct string_buf *buf, long instr)\n \n static char *\n get_field_special (struct string_buf *buf, long instr,\n-\t\t   struct op_code_struct *op)\n+\t\t   const struct op_code_struct *op)\n {\n   char *p = strbuf (buf);\n   char *spr;\n@@ -184,11 +184,11 @@ get_field_special (struct string_buf *buf, long instr,\n static unsigned long\n read_insn_microblaze (bfd_vma memaddr,\n \t\t      struct disassemble_info *info,\n-\t\t      struct op_code_struct **opr)\n+\t\t      const struct op_code_struct **opr)\n {\n   unsigned char       ibytes[4];\n   int                 status;\n-  struct op_code_struct * op;\n+  const struct op_code_struct *op;\n   unsigned long inst;\n \n   status = info->read_memory_func (memaddr, ibytes, 4, info);\n@@ -209,7 +209,7 @@ read_insn_microblaze (bfd_vma memaddr,\n     abort ();\n \n   /* Just a linear search of the table.  */\n-  for (op = opcodes; op->name != 0; op ++)\n+  for (op = microblaze_opcodes; op->name != 0; op ++)\n     if (op->bit_sequence == (inst & op->opcode_mask))\n       break;\n \n@@ -224,7 +224,7 @@ print_insn_microblaze (bfd_vma memaddr, struct disassemble_info * info)\n   fprintf_ftype print_func = info->fprintf_func;\n   void *stream = info->stream;\n   unsigned long inst, prev_inst;\n-  struct op_code_struct *op, *pop;\n+  const struct op_code_struct *op, *pop;\n   int immval = 0;\n   bool immfound = false;\n   static bfd_vma prev_insn_addr = -1;\t/* Init the prev insn addr.  */\n@@ -452,11 +452,11 @@ get_insn_microblaze (long inst,\n   \t\t     enum microblaze_instr_type *insn_type,\n   \t\t     short *delay_slots)\n {\n-  struct op_code_struct * op;\n+  const struct op_code_struct *op;\n   *isunsignedimm = false;\n \n   /* Just a linear search of the table.  */\n-  for (op = opcodes; op->name != 0; op ++)\n+  for (op = microblaze_opcodes; op->name != 0; op ++)\n     if (op->bit_sequence == (inst & op->opcode_mask))\n       break;\n \n@@ -494,12 +494,12 @@ microblaze_get_target_address (long inst, bool immfound, int immval,\n \t\t\t       bool *targetvalid,\n \t\t\t       bool *unconditionalbranch)\n {\n-  struct op_code_struct * op;\n+  const struct op_code_struct *op;\n   long targetaddr = 0;\n \n   *unconditionalbranch = false;\n   /* Just a linear search of the table.  */\n-  for (op = opcodes; op->name != 0; op ++)\n+  for (op = microblaze_opcodes; op->name != 0; op ++)\n     if (op->bit_sequence == (inst & op->opcode_mask))\n       break;\n "
    },
    {
      "sha": "080d238bd2b7382bcb8f90525700fb3f47152775",
      "filename": "opcodes/microblaze-opc.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/microblaze-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/52b8387412e32380013a46dd00959e65ecef71fb/opcodes/microblaze-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/microblaze-opc.h?ref=52b8387412e32380013a46dd00959e65ecef71fb",
      "patch": "@@ -103,7 +103,7 @@\n \n #define MAX_OPCODES 289\n \n-struct op_code_struct\n+const struct op_code_struct\n {\n   const char * name;\n   short inst_type;            /* Registers and immediate values involved.  */\n@@ -117,7 +117,7 @@ struct op_code_struct\n   enum microblaze_instr instr;\n   enum microblaze_instr_type instr_type;\n   /* More info about output format here.  */\n-} opcodes[MAX_OPCODES] =\n+} microblaze_opcodes[MAX_OPCODES] =\n {\n   {\"add\",   INST_TYPE_RD_R1_R2, INST_NO_OFFSET, NO_DELAY_SLOT, IMMVAL_MASK_NON_SPECIAL, 0x00000000, OPCODE_MASK_H4, add, arithmetic_inst },\n   {\"rsub\",  INST_TYPE_RD_R1_R2, INST_NO_OFFSET, NO_DELAY_SLOT, IMMVAL_MASK_NON_SPECIAL, 0x04000000, OPCODE_MASK_H4, rsub, arithmetic_inst },"
    }
  ]
}