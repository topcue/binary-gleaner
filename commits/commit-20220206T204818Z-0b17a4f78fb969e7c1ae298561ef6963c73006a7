{
  "sha": "0b17a4f78fb969e7c1ae298561ef6963c73006a7",
  "node_id": "C_kwDOANOeidoAKDBiMTdhNGY3OGZiOTY5ZTdjMWFlMjk4NTYxZWY2OTYzYzczMDA2YTc",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2021-11-20T01:50:59Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2022-02-06T20:48:18Z"
    },
    "message": "gdb: rename compunit_primary_filetab to compunit_symtab::primary_filetab\n\nMake compunit_primary_filetab a method of compunit_symtab.\n\nChange-Id: Iee3c4f7e36d579bf763c5bba146e5e10d6766768",
    "tree": {
      "sha": "d06819a30ab214273d28ec270d099e81630e96db",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d06819a30ab214273d28ec270d099e81630e96db"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0b17a4f78fb969e7c1ae298561ef6963c73006a7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0b17a4f78fb969e7c1ae298561ef6963c73006a7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0b17a4f78fb969e7c1ae298561ef6963c73006a7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0b17a4f78fb969e7c1ae298561ef6963c73006a7/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9821f3fa56de3e2c13c234357421ae1839ce27f7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9821f3fa56de3e2c13c234357421ae1839ce27f7",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9821f3fa56de3e2c13c234357421ae1839ce27f7"
    }
  ],
  "stats": {
    "total": 32,
    "additions": 15,
    "deletions": 17
  },
  "files": [
    {
      "sha": "84877e6c7fe0d39487a1d349f80a771f3e61b0d2",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -3113,7 +3113,7 @@ dwarf2_base_index_functions::find_last_source_symtab (struct objfile *objfile)\n   if (cust == NULL)\n     return NULL;\n \n-  return compunit_primary_filetab (cust);\n+  return cust->primary_filetab ();\n }\n \n /* See read.h.  */"
    },
    {
      "sha": "df0ef7f0b1f0ad41a5b1533d10dc7bd57322fb58",
      "filename": "gdb/guile/scm-block.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/guile/scm-block.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/guile/scm-block.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/guile/scm-block.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -554,7 +554,7 @@ bkscm_print_block_syms_progress_smob (SCM self, SCM port,\n \t\t    : i_smob->iter.d.compunit_symtab->includes[i_smob->iter.idx]);\n \t    gdbscm_printf (port, \" %s\",\n \t\t\t   symtab_to_filename_for_display\n-\t\t\t     (compunit_primary_filetab (cust)));\n+\t\t\t     (cust->primary_filetab ()));\n \t    break;\n \t  }\n \tcase FIRST_LOCAL_BLOCK:"
    },
    {
      "sha": "fcbf54ab2bdd9afd48ed6b71f8176f824006b7ad",
      "filename": "gdb/psymtab.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/psymtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/psymtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/psymtab.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -631,7 +631,7 @@ psymbol_functions::find_last_source_symtab (struct objfile *ofp)\n \n \t  if (cust == NULL)\n \t    return NULL;\n-\t  return compunit_primary_filetab (cust);\n+\t  return cust->primary_filetab ();\n \t}\n     }\n   return NULL;"
    },
    {
      "sha": "cd25789ba9b04532f26c568df83d5272586eb1c5",
      "filename": "gdb/symfile-debug.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symfile-debug.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symfile-debug.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symfile-debug.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -289,7 +289,7 @@ objfile::lookup_symbol (block_enum kind, const char *name, domain_enum domain)\n   if (debug_symfile)\n     fprintf_filtered (gdb_stdlog, \"qf->lookup_symbol (...) = %s\\n\",\n \t\t      retval\n-\t\t      ? debug_symtab_name (compunit_primary_filetab (retval))\n+\t\t      ? debug_symtab_name (retval->primary_filetab ())\n \t\t      : \"NULL\");\n \n   return retval;\n@@ -454,7 +454,7 @@ objfile::find_pc_sect_compunit_symtab (struct bound_minimal_symbol msymbol,\n     fprintf_filtered (gdb_stdlog,\n \t\t      \"qf->find_pc_sect_compunit_symtab (...) = %s\\n\",\n \t\t      retval\n-\t\t      ? debug_symtab_name (compunit_primary_filetab (retval))\n+\t\t      ? debug_symtab_name (retval->primary_filetab ())\n \t\t      : \"NULL\");\n \n   return retval;\n@@ -495,7 +495,7 @@ objfile::find_compunit_symtab_by_address (CORE_ADDR address)\n     fprintf_filtered (gdb_stdlog,\n \t\t      \"qf->find_compunit_symtab_by_address (...) = %s\\n\",\n \t\t      result\n-\t\t      ? debug_symtab_name (compunit_primary_filetab (result))\n+\t\t      ? debug_symtab_name (result->primary_filetab ())\n \t\t      : \"NULL\");\n \n   return result;"
    },
    {
      "sha": "8b57434e84fcaea1449713f72703c60028f8e8fe",
      "filename": "gdb/symmisc.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symmisc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symmisc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symmisc.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -860,7 +860,7 @@ maintenance_check_symtabs (const char *ignore, int from_tty)\n \tfor (compunit_symtab *cust : objfile->compunits ())\n \t  {\n \t    int found_something = 0;\n-\t    struct symtab *symtab = compunit_primary_filetab (cust);\n+\t    struct symtab *symtab = cust->primary_filetab ();\n \n \t    QUIT;\n "
    },
    {
      "sha": "2028e837f0f1b707ea1fc27c0d706d0468db61b1",
      "filename": "gdb/symtab.c",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symtab.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symtab.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symtab.c?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -362,20 +362,20 @@ compunit_symtab::set_call_site_htab (htab_t call_site_htab)\n /* See symtab.h.  */\n \n struct symtab *\n-compunit_primary_filetab (const struct compunit_symtab *cust)\n+compunit_symtab::primary_filetab () const\n {\n-  gdb_assert (COMPUNIT_FILETABS (cust) != NULL);\n+  gdb_assert (this->filetabs != nullptr);\n \n   /* The primary file symtab is the first one in the list.  */\n-  return COMPUNIT_FILETABS (cust);\n+  return this->filetabs;\n }\n \n /* See symtab.h.  */\n \n enum language\n compunit_language (const struct compunit_symtab *cust)\n {\n-  struct symtab *symtab = compunit_primary_filetab (cust);\n+  struct symtab *symtab = cust->primary_filetab ();\n \n /* The language of the compunit symtab is the language of its primary\n    source file.  */\n@@ -2376,7 +2376,7 @@ Internal: %s symbol `%s' found in %s psymtab but not in symtab.\\n\\\n (if a template, try specifying an instantiation: %s<type>).\"),\n \t block_index == GLOBAL_BLOCK ? \"global\" : \"static\",\n \t name,\n-\t symtab_to_filename_for_display (compunit_primary_filetab (cust)),\n+\t symtab_to_filename_for_display (cust->primary_filetab ()),\n \t name, name);\n }\n "
    },
    {
      "sha": "f6d787c45c84523bbcf4792db8b0c8fe499cbc5b",
      "filename": "gdb/symtab.h",
      "status": "modified",
      "additions": 3,
      "deletions": 5,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symtab.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0b17a4f78fb969e7c1ae298561ef6963c73006a7/gdb/symtab.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symtab.h?ref=0b17a4f78fb969e7c1ae298561ef6963c73006a7",
      "patch": "@@ -1459,6 +1459,9 @@ struct compunit_symtab\n     m_objfile = objfile;\n   }\n \n+  /* Return the primary filetab of the compunit.  */\n+  symtab *primary_filetab () const;\n+\n   /* Set m_call_site_htab.  */\n   void set_call_site_htab (htab_t call_site_htab);\n \n@@ -1566,11 +1569,6 @@ compunit_filetabs (compunit_symtab *cu)\n   return symtab_range (cu->filetabs);\n }\n \n-/* Return the primary symtab of CUST.  */\n-\n-extern struct symtab *\n-  compunit_primary_filetab (const struct compunit_symtab *cust);\n-\n /* Return the language of CUST.  */\n \n extern enum language compunit_language (const struct compunit_symtab *cust);"
    }
  ]
}