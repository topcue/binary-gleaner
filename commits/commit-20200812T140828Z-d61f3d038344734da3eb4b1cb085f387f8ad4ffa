{
  "sha": "d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDYxZjNkMDM4MzQ0NzM0ZGEzZWI0YjFjYjA4NWYzODdmOGFkNGZmYQ==",
  "commit": {
    "author": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-06-29T16:11:51Z"
    },
    "committer": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-08-12T14:08:28Z"
    },
    "message": "Add handling for 64-bit module addresses in Cygwin core dumps\n\nbfd/ChangeLog:\n\n2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* elf.c (elfcore_grok_win32pstatus): Handle NOTE_INFO_MODULE64.",
    "tree": {
      "sha": "773703be0178f939769721dd3ace44697194050c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/773703be0178f939769721dd3ace44697194050c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABAgAGBQJfM/fdAAoJEMfIbwNwKFyBhuAQAL2GAVz9PmSAgw/Yy2i3b4tB\n0/Dnt1Sqg861rGqM1ELnl6lrlY4a6x0+M9q0CVtNiEJh4N+1bCfrXHfqLEK4jT7c\nzk3bud4n6Og9H3WpO5HeX5ZaOeVcfeQ7nybjxvW/Y/C7aZDwvFCfKjcyfhvvVFyZ\nFxA2Xw1RP3qsJMVyVCVDvYS+uIuMan6eHue+JJ59q1jCy5WoPPl+ru1cawZDTx+X\nV/t3cwumvksqz6+pvpF5lO1G43H/RB6PCJfYnl5OJEGGbcT4XQPOk7YSaZi+7eha\ndecpRbQyIJYBx+16FGbwUBOnbVRbZbwtvkGw66CnVVh8mLJ8yxJmvwmMypLxwhce\n6IzQaOC88rsYWaWwYMcFHR1G5wsel4vJKukCsYIcvl8eLM0YcsZdjNKb6USK33jS\nLQonyN0OzzGqzUcVK8ihIVQCKFp5ABqoBDXMqUNh+K/DH5Q6mL/n7F80RKIxyKbA\nAFg/znfXH1iMF1lmiCMJuY7MZgQLl3OzAQ55J+Iu6JwTNgHAO8pLTJL03majMbGA\nRmKqQnwX6mFxhYVOdvwa978EQ7BLoCDnGhoYIrsCtqtFfUABLp8rNNKga98NuyYg\ndDbJp5fl48hy9U5uTWK0iS8vXPbb+Uvz5bix1GgNR8GOnnCKiIiC9fn8pWcoBJSJ\nnMDK2HyLta9Vz6XmS2ZU\n=qINt\n-----END PGP SIGNATURE-----",
      "payload": "tree 773703be0178f939769721dd3ace44697194050c\nparent 04ec0fa297637e6077cdbb735ce6d3c8fde3c9a5\nauthor Jon Turney <jon.turney@dronecode.org.uk> 1593447111 +0100\ncommitter Jon Turney <jon.turney@dronecode.org.uk> 1597241308 +0100\n\nAdd handling for 64-bit module addresses in Cygwin core dumps\n\nbfd/ChangeLog:\n\n2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* elf.c (elfcore_grok_win32pstatus): Handle NOTE_INFO_MODULE64.\n"
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d61f3d038344734da3eb4b1cb085f387f8ad4ffa/comments",
  "author": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "04ec0fa297637e6077cdbb735ce6d3c8fde3c9a5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/04ec0fa297637e6077cdbb735ce6d3c8fde3c9a5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/04ec0fa297637e6077cdbb735ce6d3c8fde3c9a5"
    }
  ],
  "stats": {
    "total": 36,
    "additions": 28,
    "deletions": 8
  },
  "files": [
    {
      "sha": "fe7fdbf6a25963797b5abdde49774bddae9739ed",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d61f3d038344734da3eb4b1cb085f387f8ad4ffa/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d61f3d038344734da3eb4b1cb085f387f8ad4ffa/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
      "patch": "@@ -1,3 +1,7 @@\n+2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n+\n+\t* elf.c (elfcore_grok_win32pstatus): Handle NOTE_INFO_MODULE64.\n+\n 2020-07-11  Jon Turney  <jon.turney@dronecode.org.uk>\n \n \t* elf.c (elfcore_grok_win32pstatus): Don't apply size constraint"
    },
    {
      "sha": "6fad516d4628c4051e7799c599d56af437e8dfef",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 24,
      "deletions": 8,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d61f3d038344734da3eb4b1cb085f387f8ad4ffa/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d61f3d038344734da3eb4b1cb085f387f8ad4ffa/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=d61f3d038344734da3eb4b1cb085f387f8ad4ffa",
      "patch": "@@ -10132,6 +10132,7 @@ elfcore_grok_lwpstatus (bfd *abfd, Elf_Internal_Note *note)\n #define NOTE_INFO_PROCESS  1\n #define NOTE_INFO_THREAD   2\n #define NOTE_INFO_MODULE   3\n+#define NOTE_INFO_MODULE64 4\n \n static bfd_boolean\n elfcore_grok_win32pstatus (bfd *abfd, Elf_Internal_Note *note)\n@@ -10199,13 +10200,30 @@ elfcore_grok_win32pstatus (bfd *abfd, Elf_Internal_Note *note)\n       break;\n \n     case NOTE_INFO_MODULE:\n-      if (note->descsz < 12)\n-        return FALSE;\n-\n+    case NOTE_INFO_MODULE64:\n       /* Make a \".module/xxxxxxxx\" section.  */\n-      /* module_info.base_address */\n-      base_addr = bfd_get_32 (abfd, note->descdata + 4);\n-      sprintf (buf, \".module/%08lx\", (unsigned long) base_addr);\n+      if (type == NOTE_INFO_MODULE)\n+        {\n+          if (note->descsz < 12)\n+            return FALSE;\n+\n+          /* module_info.base_address */\n+          base_addr = bfd_get_32 (abfd, note->descdata + 4);\n+          sprintf (buf, \".module/%08lx\", (unsigned long) base_addr);\n+          /* module_info.module_name_size */\n+          name_size = bfd_get_32 (abfd, note->descdata + 8);\n+        }\n+      else /* NOTE_INFO_MODULE64 */\n+        {\n+          if (note->descsz < 16)\n+            return FALSE;\n+\n+          /* module_info.base_address */\n+          base_addr = bfd_get_64 (abfd, note->descdata + 4);\n+          sprintf (buf, \".module/%016lx\", (unsigned long) base_addr);\n+          /* module_info.module_name_size */\n+          name_size = bfd_get_32 (abfd, note->descdata + 12);\n+        }\n \n       len = strlen (buf) + 1;\n       name = (char *) bfd_alloc (abfd, len);\n@@ -10219,8 +10237,6 @@ elfcore_grok_win32pstatus (bfd *abfd, Elf_Internal_Note *note)\n       if (sect == NULL)\n \treturn FALSE;\n \n-      /* module_info.module_name_size */\n-      name_size = bfd_get_32 (abfd, note->descdata + 8);\n       if (note->descsz < 12 + name_size)\n         return FALSE;\n "
    }
  ]
}