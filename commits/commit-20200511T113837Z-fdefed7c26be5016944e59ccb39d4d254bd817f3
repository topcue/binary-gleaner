{
  "sha": "fdefed7c26be5016944e59ccb39d4d254bd817f3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmRlZmVkN2MyNmJlNTAxNjk0NGU1OWNjYjM5ZDRkMjU0YmQ4MTdmMw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-05-11T00:11:57Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-05-11T11:38:37Z"
    },
    "message": "Power10 VSX Mask Manipulation Operations\n\nopcodes/\n\t* ppc-opc.c (MP, VXVAM_MASK): Define.\n\t(VXVAPS_MASK): Use VXVA_MASK.\n\t(powerpc_opcodes): Add mtvsrbmi, vexpandbm, vexpandhm, vexpandwm,\n\tvexpanddm, vexpandqm, vextractbm, vextracthm, vextractwm,\n\tvextractdm, vextractqm, mtvsrbm, mtvsrhm, mtvsrwm, mtvsrdm, mtvsrqm,\n\tvcntmbb, vcntmbh, vcntmbw, vcntmbd.\ngas/\n\t* testsuite/gas/ppc/maskmanip.d,\n\t* testsuite/gas/ppc/maskmanip.s: New test.\n\t* testsuite/gas/ppc/ppc.exp: Run it.",
    "tree": {
      "sha": "22bb6ef3145e0db95107fa483e987307e4c72df2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/22bb6ef3145e0db95107fa483e987307e4c72df2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fdefed7c26be5016944e59ccb39d4d254bd817f3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fdefed7c26be5016944e59ccb39d4d254bd817f3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fdefed7c26be5016944e59ccb39d4d254bd817f3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fdefed7c26be5016944e59ccb39d4d254bd817f3/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "aa3c112fab5db4a90703442f65b743857e50d2ac",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa3c112fab5db4a90703442f65b743857e50d2ac",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/aa3c112fab5db4a90703442f65b743857e50d2ac"
    }
  ],
  "stats": {
    "total": 96,
    "additions": 95,
    "deletions": 1
  },
  "files": [
    {
      "sha": "c0a072a17f17ed40fd633c0c2bb25f3579be1bb8",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -1,3 +1,9 @@\n+2020-05-11  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/gas/ppc/maskmanip.d,\n+\t* testsuite/gas/ppc/maskmanip.s: New test.\n+\t* testsuite/gas/ppc/ppc.exp: Run it.\n+\n 2020-05-11  Alan Modra  <amodra@gmail.com>\n \t    Peter Bergner  <bergner@linux.ibm.com>\n "
    },
    {
      "sha": "3cd2c4db5667003077d1cc58e89b2aa33d2d2228",
      "filename": "gas/testsuite/gas/ppc/maskmanip.d",
      "status": "added",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/maskmanip.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/maskmanip.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/maskmanip.d?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -0,0 +1,30 @@\n+#as: -mpower10\n+#objdump: -dr -Mpower10\n+#name: mask manipulation operations\n+\n+.*\n+\n+\n+Disassembly of section \\.text:\n+\n+0+0 <_start>:\n+.*:\t(10 10 0e 42|42 0e 10 10) \tmtvsrbm v0,r1\n+.*:\t(10 51 1e 42|42 1e 51 10) \tmtvsrhm v2,r3\n+.*:\t(10 92 2e 42|42 2e 92 10) \tmtvsrwm v4,r5\n+.*:\t(10 d3 3e 42|42 3e d3 10) \tmtvsrdm v6,r7\n+.*:\t(11 14 4e 42|42 4e 14 11) \tmtvsrqm v8,r9\n+.*:\t(11 5a 12 14|14 12 5a 11) \tmtvsrbmi v10,4660\n+.*:\t(11 60 66 42|42 66 60 11) \tvexpandbm v11,v12\n+.*:\t(11 a1 76 42|42 76 a1 11) \tvexpandhm v13,v14\n+.*:\t(11 e2 86 42|42 86 e2 11) \tvexpandwm v15,v16\n+.*:\t(12 23 96 42|42 96 23 12) \tvexpanddm v17,v18\n+.*:\t(12 64 a6 42|42 a6 64 12) \tvexpandqm v19,v20\n+.*:\t(12 a8 b6 42|42 b6 a8 12) \tvextractbm r21,v22\n+.*:\t(12 e9 c6 42|42 c6 e9 12) \tvextracthm r23,v24\n+.*:\t(13 2a d6 42|42 d6 2a 13) \tvextractwm r25,v26\n+.*:\t(13 6b e6 42|42 e6 6b 13) \tvextractdm r27,v28\n+.*:\t(13 ac f6 42|42 f6 ac 13) \tvextractqm r29,v30\n+.*:\t(13 f8 06 42|42 06 f8 13) \tvcntmbb r31,v0,0\n+.*:\t(13 db 0e 42|42 0e db 13) \tvcntmbh r30,v1,1\n+.*:\t(13 bd 16 42|42 16 bd 13) \tvcntmbw r29,v2,1\n+.*:\t(13 9e 1e 42|42 1e 9e 13) \tvcntmbd r28,v3,0"
    },
    {
      "sha": "6e3688b3879510e0fb83bc8836b87baf447d3ebd",
      "filename": "gas/testsuite/gas/ppc/maskmanip.s",
      "status": "added",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/maskmanip.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/maskmanip.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/maskmanip.s?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -0,0 +1,22 @@\n+\t.text\n+_start:\n+\tmtvsrbm 0,1\n+\tmtvsrhm 2,3\n+\tmtvsrwm 4,5\n+\tmtvsrdm 6,7\n+\tmtvsrqm 8,9\n+\tmtvsrbmi 10,0x1234\n+\tvexpandbm 11,12\n+\tvexpandhm 13,14\n+\tvexpandwm 15,16\n+\tvexpanddm 17,18\n+\tvexpandqm 19,20\n+\tvextractbm 21,22\n+\tvextracthm 23,24\n+\tvextractwm 25,26\n+\tvextractdm 27,28\n+\tvextractqm 29,30\n+\tvcntmbb 31,0,0\n+\tvcntmbh 30,1,1\n+\tvcntmbw 29,2,1\n+\tvcntmbd 28,3,0"
    },
    {
      "sha": "c250acfd3e3ce26357e773a4cc08f5057eb8eef7",
      "filename": "gas/testsuite/gas/ppc/ppc.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/ppc.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/gas/testsuite/gas/ppc/ppc.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/ppc/ppc.exp?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -138,3 +138,4 @@ run_dump_test \"vsx_32byte\"\n run_dump_test \"int128\"\n run_dump_test \"simd_perm\"\n run_dump_test \"outerprod\"\n+run_dump_test \"maskmanip\""
    },
    {
      "sha": "4336066d2e26d952e1452f50f86a308e91c8f0fc",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -1,3 +1,12 @@\n+2020-05-11  Alan Modra  <amodra@gmail.com>\n+\n+\t* ppc-opc.c (MP, VXVAM_MASK): Define.\n+\t(VXVAPS_MASK): Use VXVA_MASK.\n+\t(powerpc_opcodes): Add mtvsrbmi, vexpandbm, vexpandhm, vexpandwm,\n+\tvexpanddm, vexpandqm, vextractbm, vextracthm, vextractwm,\n+\tvextractdm, vextractqm, mtvsrbm, mtvsrhm, mtvsrwm, mtvsrdm, mtvsrqm,\n+\tvcntmbb, vcntmbh, vcntmbw, vcntmbd.\n+\n 2020-05-11  Alan Modra  <amodra@gmail.com>\n \t    Peter Bergner  <bergner@linux.ibm.com>\n "
    },
    {
      "sha": "4e207b488f3cf810efe67c1c9cd7b0a2c60b2444",
      "filename": "opcodes/ppc-opc.c",
      "status": "modified",
      "additions": 27,
      "deletions": 1,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fdefed7c26be5016944e59ccb39d4d254bd817f3/opcodes/ppc-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fdefed7c26be5016944e59ccb39d4d254bd817f3/opcodes/ppc-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ppc-opc.c?ref=fdefed7c26be5016944e59ccb39d4d254bd817f3",
      "patch": "@@ -2886,6 +2886,7 @@ const struct powerpc_operand powerpc_operands[] =\n   { 0x3, 9, NULL, NULL, 0 },\n \n #define R RMC + 1\n+#define MP R\n   { 0x1, 16, NULL, NULL, 0 },\n \n #define RIC R + 1\n@@ -3492,7 +3493,10 @@ const unsigned int num_powerpc_operands = (sizeof (powerpc_operands)\n #define VXPS_MASK (VX_MASK & ~(0x1 << 9))\n \n /* A VX_MASK with the VA field fixed with a PS field.  */\n-#define VXVAPS_MASK ((VX_MASK | (0x1f << 16)) & ~(0x1 << 9))\n+#define VXVAPS_MASK (VXVA_MASK & ~(0x1 << 9))\n+\n+/* A VX_MASK with the VA field fixed with a MP field.  */\n+#define VXVAM_MASK (VXVA_MASK & ~(0x1 << 16))\n \n /* A VX_MASK for instructions using a BF field.  */\n #define VXBF_MASK (VX_MASK | (3 << 21))\n@@ -4114,6 +4118,7 @@ const struct powerpc_opcode powerpc_opcodes[] = {\n {\"vinsbvlx\",\tVX (4,  15),\tVX_MASK,     POWER10,\t0,\t\t{VD, RA, VB}},\n {\"mulhhwu\",\tXRC(4,\t 8,0),\tX_MASK,\t     MULHW,\t0,\t\t{RT, RA, RB}},\n {\"mulhhwu.\",\tXRC(4,\t 8,1),\tX_MASK,\t     MULHW,\t0,\t\t{RT, RA, RB}},\n+{\"mtvsrbmi\",\tDX (4,10),\tDX_MASK,     POWER10,\t0,\t\t{VD, DXD}},\n {\"ps_sum0\",\tA  (4,\t10,0),\tA_MASK,\t     PPCPS,\t0,\t\t{FRT, FRA, FRC, FRB}},\n {\"ps_sum0.\",\tA  (4,\t10,1),\tA_MASK,\t     PPCPS,\t0,\t\t{FRT, FRA, FRC, FRB}},\n {\"vsldbi\",\tVX (4,  22),\tVXSH_MASK,   POWER10,\t0,\t\t{VD, VA, VB, SH3}},\n@@ -4898,6 +4903,27 @@ const struct powerpc_opcode powerpc_opcodes[] = {\n {\"vmoduq\",\tVX (4,1547),\tVX_MASK,     POWER10,\t0,\t\t{VD, VA, VB}},\n {\"vextublx\",\tVX (4,1549),\tVX_MASK,     PPCVEC3,\t0,\t\t{RT, RA, VB}},\n {\"vsubuhs\",\tVX (4,1600),\tVX_MASK,     PPCVEC,\t0,\t\t{VD, VA, VB}},\n+\n+{\"vexpandbm\",\tVXVA(4,1602,0),  VXVA_MASK,  POWER10,\t0,\t\t{VD, VB}},\n+{\"vexpandhm\",\tVXVA(4,1602,1),  VXVA_MASK,  POWER10,\t0,\t\t{VD, VB}},\n+{\"vexpandwm\",\tVXVA(4,1602,2),  VXVA_MASK,  POWER10,\t0,\t\t{VD, VB}},\n+{\"vexpanddm\",\tVXVA(4,1602,3),  VXVA_MASK,  POWER10,\t0,\t\t{VD, VB}},\n+{\"vexpandqm\",\tVXVA(4,1602,4),  VXVA_MASK,  POWER10,\t0,\t\t{VD, VB}},\n+{\"vextractbm\",\tVXVA(4,1602,8),  VXVA_MASK,  POWER10,\t0,\t\t{RT, VB}},\n+{\"vextracthm\",\tVXVA(4,1602,9),  VXVA_MASK,  POWER10,\t0,\t\t{RT, VB}},\n+{\"vextractwm\",\tVXVA(4,1602,10), VXVA_MASK,  POWER10,\t0,\t\t{RT, VB}},\n+{\"vextractdm\",\tVXVA(4,1602,11), VXVA_MASK,  POWER10,\t0,\t\t{RT, VB}},\n+{\"vextractqm\",\tVXVA(4,1602,12), VXVA_MASK,  POWER10,\t0,\t\t{RT, VB}},\n+{\"mtvsrbm\",\tVXVA(4,1602,16), VXVA_MASK,  POWER10,\t0,\t\t{VD, RB}},\n+{\"mtvsrhm\",\tVXVA(4,1602,17), VXVA_MASK,  POWER10,\t0,\t\t{VD, RB}},\n+{\"mtvsrwm\",\tVXVA(4,1602,18), VXVA_MASK,  POWER10,\t0,\t\t{VD, RB}},\n+{\"mtvsrdm\",\tVXVA(4,1602,19), VXVA_MASK,  POWER10,\t0,\t\t{VD, RB}},\n+{\"mtvsrqm\",\tVXVA(4,1602,20), VXVA_MASK,  POWER10,\t0,\t\t{VD, RB}},\n+{\"vcntmbb\",\tVXVA(4,1602,24), VXVAM_MASK, POWER10,\t0,\t\t{RT, VB, MP}},\n+{\"vcntmbh\",\tVXVA(4,1602,26), VXVAM_MASK, POWER10,\t0,\t\t{RT, VB, MP}},\n+{\"vcntmbw\",\tVXVA(4,1602,28), VXVAM_MASK, POWER10,\t0,\t\t{RT, VB, MP}},\n+{\"vcntmbd\",\tVXVA(4,1602,30), VXVAM_MASK, POWER10,\t0,\t\t{RT, VB, MP}},\n+\n {\"mtvscr\",\tVX (4,1604),\tVXVDVA_MASK, PPCVEC,\t0,\t\t{VB}},\n {\"vcmpgtuh.\",\tVXR(4, 582,1),\tVXR_MASK,    PPCVEC,\t0,\t\t{VD, VA, VB}},\n {\"vsum4shs\",\tVX (4,1608),\tVX_MASK,     PPCVEC,\t0,\t\t{VD, VA, VB}},"
    }
  ]
}