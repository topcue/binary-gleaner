{
  "sha": "9f27c36482d98a00d63fe76f7d740d5de4873ead",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWYyN2MzNjQ4MmQ5OGEwMGQ2M2ZlNzZmN2Q3NDBkNWRlNDg3M2VhZA==",
  "commit": {
    "author": {
      "name": "Hans-Peter Nilsson",
      "email": "hp@bitrange.com",
      "date": "2020-06-29T01:50:45Z"
    },
    "committer": {
      "name": "Hans-Peter Nilsson",
      "email": "hp@bitrange.com",
      "date": "2020-06-29T01:50:45Z"
    },
    "message": "binutils/dwarf.c: Correct an `index' global shadowing error for pre-4.8 GCC\n\nIn older gcc, shadowing a function name with a local variable name is\nflagged as an error, certainly a bug but which is usually worked\naround in binutils:\n\ngcc -DHAVE_CONFIG_H -I. -I$SRC/binutils  -I. -I$SRC/binutils -I../bfd -I$SRC/binutils/../bfd -I$SRC/binutils/../include -DLOCALEDIR=\"\\\"/usr/local/share/locale\\\"\" -Dbin_dummy_emulation=bin_vanilla_emulation  -W -Wall -Wstrict-prototypes -Wmissing-prototypes -Wshadow -Werror -I$SRC/binutils/../zlib -g -O2 -MT dwarf.o -MD -MP -MF $depbase.Tpo -c -o dwarf.o $SRC/binutils/dwarf.c &&\\\n\tmv -f $depbase.Tpo $depbase.Po\ncc1: warnings being treated as errors\n$SRC/binutils/dwarf.c: In function 'display_debug_str_offsets':\n$SRC/binutils/dwarf.c:6913: error: declaration of 'index' shadows a global declaration\n/usr/include/string.h:309: error: shadowed declaration is here\nmake[4]: *** [dwarf.o] Error 1\n\nSee also GCC PR c/53066.  This is just another one that crept in since\nI and others last had to use an old version.  The name \"idx\" was used\nin the preceding function, display_debug_addr.  Also, it was declared\nc99 style (after a statement in the block).  Committed as obvious.\n\nbinutils:\n\t* dwarf.c (display_debug_str_offsets): Rename local variable\n\tindex to idx.  Move to top of function.",
    "tree": {
      "sha": "be7aa89b55ef2125380dd0bf283ecaee6747ae14",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/be7aa89b55ef2125380dd0bf283ecaee6747ae14"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9f27c36482d98a00d63fe76f7d740d5de4873ead",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9f27c36482d98a00d63fe76f7d740d5de4873ead",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9f27c36482d98a00d63fe76f7d740d5de4873ead",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9f27c36482d98a00d63fe76f7d740d5de4873ead/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "07d22f648e56d7276fa7a4a73438005448c406fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/07d22f648e56d7276fa7a4a73438005448c406fb",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/07d22f648e56d7276fa7a4a73438005448c406fb"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 10,
    "deletions": 4
  },
  "files": [
    {
      "sha": "d5f9b217499512c1b6a8c53699ad9b4db1e4b960",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9f27c36482d98a00d63fe76f7d740d5de4873ead/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9f27c36482d98a00d63fe76f7d740d5de4873ead/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=9f27c36482d98a00d63fe76f7d740d5de4873ead",
      "patch": "@@ -1,3 +1,8 @@\n+2020-06-29  Hans-Peter Nilsson  <hp@bitrange.com>\n+\n+\t* dwarf.c (display_debug_str_offsets): Rename local variable\n+\tindex to idx.  Move to top of function.\n+\n 2020-06-29  Alan Modra  <amodra@gmail.com>\n \n \t* dwarf.c: Use C style comments."
    },
    {
      "sha": "34903bcf7781ef99769581b7316ab5df03a373b6",
      "filename": "binutils/dwarf.c",
      "status": "modified",
      "additions": 5,
      "deletions": 4,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9f27c36482d98a00d63fe76f7d740d5de4873ead/binutils/dwarf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9f27c36482d98a00d63fe76f7d740d5de4873ead/binutils/dwarf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/dwarf.c?ref=9f27c36482d98a00d63fe76f7d740d5de4873ead",
      "patch": "@@ -6848,6 +6848,8 @@ static int\n display_debug_str_offsets (struct dwarf_section *section,\n \t\t\t   void *file ATTRIBUTE_UNUSED)\n {\n+  unsigned long idx;\n+\n   if (section->size == 0)\n     {\n       printf (_(\"\\nThe %s section is empty.\\n\"), section->name);\n@@ -6910,20 +6912,19 @@ display_debug_str_offsets (struct dwarf_section *section,\n \t  printf (_(\"       Index   Offset [String]\\n\"));\n \t}\n \n-      unsigned long index;\n-      for (index = 0; length >= entry_length && curr < end; index ++)\n+      for (idx = 0; length >= entry_length && curr < end; idx++)\n \t{\n \t  dwarf_vma offset;\n \t  const unsigned char * string;\n \n \t  SAFE_BYTE_GET_AND_INC (offset, curr, entry_length, end);\n \t  if (dwo)\n \t    string = (const unsigned char *)\n-\t      fetch_indexed_string (index, NULL, entry_length, dwo);\n+\t      fetch_indexed_string (idx, NULL, entry_length, dwo);\n \t  else\n \t    string = fetch_indirect_string (offset);\n \n-\t  printf (\"    %8lu %8s %s\\n\", index, dwarf_vmatoa (\"x\", offset),\n+\t  printf (\"    %8lu %8s %s\\n\", idx, dwarf_vmatoa (\"x\", offset),\n \t\t  string);\n \t}\n     }"
    }
  ]
}