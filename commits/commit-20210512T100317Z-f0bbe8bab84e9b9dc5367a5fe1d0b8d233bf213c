{
  "sha": "f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjBiYmU4YmFiODRlOWI5ZGM1MzY3YTVmZTFkMGI4ZDIzM2JmMjEzYw==",
  "commit": {
    "author": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-05-12T10:03:17Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-05-12T10:03:17Z"
    },
    "message": "Add MTE register set support for core files\n\n\t* elf-bfd.h (elfcore_write_aarch_mte): New prototype.\n\t* elf.c (elfcore_grok_aarch_mte, elfcore_write_aarch_mte): New\n\tfunctions.\n\t(elfcore_grok_note): Handle notes of type NT_ARM_TAGGED_ADDR_CTRL.\n\t(elfcore_write_register_note): Handle MTE notes.",
    "tree": {
      "sha": "dcfeb37fbaf520b7460f9156e9fc2998f4c624d4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/dcfeb37fbaf520b7460f9156e9fc2998f4c624d4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/comments",
  "author": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d51344c909926db84227f54718271e77b4adb714",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d51344c909926db84227f54718271e77b4adb714",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d51344c909926db84227f54718271e77b4adb714"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 40,
    "deletions": 0
  },
  "files": [
    {
      "sha": "0e4ccd8d0a0b20a704d742b361f5db3dfb2e9524",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
      "patch": "@@ -1,3 +1,11 @@\n+2021-05-12  Luis Machado  <luis.machado@linaro.org>\n+\n+\t* elf-bfd.h (elfcore_write_aarch_mte): New prototype.\n+\t* elf.c (elfcore_grok_aarch_mte, elfcore_write_aarch_mte): New\n+\tfunctions.\n+\t(elfcore_grok_note): Handle notes of type NT_ARM_TAGGED_ADDR_CTRL.\n+\t(elfcore_write_register_note): Handle MTE notes.\n+\n 2021-05-11  Alan Modra  <amodra@gmail.com>\n \n \tPR 27844"
    },
    {
      "sha": "92b1722eacb5569dbf47c2eb855a795a5167d82f",
      "filename": "bfd/elf-bfd.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/elf-bfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/elf-bfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf-bfd.h?ref=f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
      "patch": "@@ -2828,6 +2828,8 @@ extern char *elfcore_write_aarch_sve\n   (bfd *, char *, int *, const void *, int);\n extern char *elfcore_write_aarch_pauth\n   (bfd *, char *, int *, const void *, int);\n+extern char *elfcore_write_aarch_mte\n+  (bfd *, char *, int *, const void *, int);\n extern char *elfcore_write_arc_v2\n   (bfd *, char *, int *, const void *, int);\n extern char *elfcore_write_riscv_csr"
    },
    {
      "sha": "8ed1623dfc1d38c88878167a5eab3c2c89416b4f",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=f0bbe8bab84e9b9dc5367a5fe1d0b8d233bf213c",
      "patch": "@@ -9925,6 +9925,13 @@ elfcore_grok_aarch_pauth (bfd *abfd, Elf_Internal_Note *note)\n   return elfcore_make_note_pseudosection (abfd, \".reg-aarch-pauth\", note);\n }\n \n+static bool\n+elfcore_grok_aarch_mte (bfd *abfd, Elf_Internal_Note *note)\n+{\n+  return elfcore_make_note_pseudosection (abfd, \".reg-aarch-mte\",\n+\t\t\t\t\t  note);\n+}\n+\n static bool\n elfcore_grok_arc_v2 (bfd *abfd, Elf_Internal_Note *note)\n {\n@@ -10607,6 +10614,13 @@ elfcore_grok_note (bfd *abfd, Elf_Internal_Note *note)\n       else\n \treturn true;\n \n+    case NT_ARM_TAGGED_ADDR_CTRL:\n+      if (note->namesz == 6\n+\t  && strcmp (note->namedata, \"LINUX\") == 0)\n+\treturn elfcore_grok_aarch_mte (abfd, note);\n+      else\n+\treturn true;\n+\n     case NT_GDB_TDESC:\n       if (note->namesz == 4\n           && strcmp (note->namedata, \"GDB\") == 0)\n@@ -11986,6 +12000,20 @@ elfcore_write_aarch_pauth (bfd *abfd,\n \t\t\t     note_name, NT_ARM_PAC_MASK, aarch_pauth, size);\n }\n \n+char *\n+elfcore_write_aarch_mte (bfd *abfd,\n+\t\t\t\t      char *buf,\n+\t\t\t\t      int *bufsiz,\n+\t\t\t\t      const void *aarch_mte,\n+\t\t\t\t      int size)\n+{\n+  char *note_name = \"LINUX\";\n+  return elfcore_write_note (abfd, buf, bufsiz,\n+\t\t\t     note_name, NT_ARM_TAGGED_ADDR_CTRL,\n+\t\t\t     aarch_mte,\n+\t\t\t     size);\n+}\n+\n char *\n elfcore_write_arc_v2 (bfd *abfd,\n \t\t      char *buf,\n@@ -12114,6 +12142,8 @@ elfcore_write_register_note (bfd *abfd,\n     return elfcore_write_aarch_sve (abfd, buf, bufsiz, data, size);\n   if (strcmp (section, \".reg-aarch-pauth\") == 0)\n     return elfcore_write_aarch_pauth (abfd, buf, bufsiz, data, size);\n+  if (strcmp (section, \".reg-aarch-mte\") == 0)\n+    return elfcore_write_aarch_mte (abfd, buf, bufsiz, data, size);\n   if (strcmp (section, \".reg-arc-v2\") == 0)\n     return elfcore_write_arc_v2 (abfd, buf, bufsiz, data, size);\n   if (strcmp (section, \".gdb-tdesc\") == 0)"
    }
  ]
}