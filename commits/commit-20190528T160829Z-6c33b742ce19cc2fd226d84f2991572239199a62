{
  "sha": "6c33b742ce19cc2fd226d84f2991572239199a62",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NmMzM2I3NDJjZTE5Y2MyZmQyMjZkODRmMjk5MTU3MjIzOTE5OWE2Mg==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-04-24T10:26:42Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2019-05-28T16:08:29Z"
    },
    "message": "libctf: library version enforcement\n\nThis old Solaris standard allows callers to specify that they are\nexpecting one particular API and/or CTF file format from the library.\n\nlibctf/\n\t* ctf-impl.h (_libctf_version): New declaration.\n\t* ctf-subr.c (_libctf_version): Define it.\n\t(ctf_version): New.\n\ninclude/\n\t* ctf-api.h (ctf_version): New.",
    "tree": {
      "sha": "b6ef5f9c4b2aa6d1c4a716a4e279c9d6a7222c1d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b6ef5f9c4b2aa6d1c4a716a4e279c9d6a7222c1d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6c33b742ce19cc2fd226d84f2991572239199a62",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6c33b742ce19cc2fd226d84f2991572239199a62",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6c33b742ce19cc2fd226d84f2991572239199a62",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6c33b742ce19cc2fd226d84f2991572239199a62/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c499eb6896cd803d26da8c719bfac9c03e596c08",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c499eb6896cd803d26da8c719bfac9c03e596c08",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c499eb6896cd803d26da8c719bfac9c03e596c08"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 39,
    "deletions": 0
  },
  "files": [
    {
      "sha": "56922add8a814caa57887c06d6a590ff488d181a",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c33b742ce19cc2fd226d84f2991572239199a62/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c33b742ce19cc2fd226d84f2991572239199a62/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=6c33b742ce19cc2fd226d84f2991572239199a62",
      "patch": "@@ -1,3 +1,7 @@\n+2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* ctf-api.h (ctf_version): New.\n+\n 2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-api.h (ctf_func_info): New."
    },
    {
      "sha": "6ab754a1840c09147fe2931705ba826149e194b1",
      "filename": "include/ctf-api.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c33b742ce19cc2fd226d84f2991572239199a62/include/ctf-api.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c33b742ce19cc2fd226d84f2991572239199a62/include/ctf-api.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ctf-api.h?ref=6c33b742ce19cc2fd226d84f2991572239199a62",
      "patch": "@@ -269,6 +269,7 @@ extern void *ctf_getspecific (ctf_file_t *);\n \n extern int ctf_errno (ctf_file_t *);\n extern const char *ctf_errmsg (int);\n+extern int ctf_version (int);\n \n extern int ctf_func_info (ctf_file_t *, unsigned long, ctf_funcinfo_t *);\n extern int ctf_func_args (ctf_file_t *, unsigned long, uint32_t, ctf_id_t *);"
    },
    {
      "sha": "a6eb11ee3094dc06c7f1a4ec267e61325bc7b5fd",
      "filename": "libctf/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ChangeLog?ref=6c33b742ce19cc2fd226d84f2991572239199a62",
      "patch": "@@ -1,3 +1,9 @@\n+2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* ctf-impl.h (_libctf_version): New declaration.\n+\t* ctf-subr.c (_libctf_version): Define it.\n+\t(ctf_version): New.\n+\n 2019-05-28  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-create.c (enumcmp): New."
    },
    {
      "sha": "363b62de7dba8426c80a9a26c7646d4a3c97f6fb",
      "filename": "libctf/ctf-impl.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ctf-impl.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ctf-impl.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-impl.h?ref=6c33b742ce19cc2fd226d84f2991572239199a62",
      "patch": "@@ -375,6 +375,7 @@ extern const char *ctf_lookup_symbol_name (ctf_file_t *fp, unsigned long symidx)\n extern const char _CTF_SECTION[];\t/* name of CTF ELF section */\n extern const char _CTF_NULLSTR[];\t/* empty string */\n \n+extern int _libctf_version;\t/* library client version */\n extern int _libctf_debug;\t/* debugging messages enabled */\n \n #ifdef\t__cplusplus"
    },
    {
      "sha": "09ec2951e5419d7ced577571a5107e6f6302542c",
      "filename": "libctf/ctf-subr.c",
      "status": "modified",
      "additions": 27,
      "deletions": 0,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ctf-subr.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6c33b742ce19cc2fd226d84f2991572239199a62/libctf/ctf-subr.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-subr.c?ref=6c33b742ce19cc2fd226d84f2991572239199a62",
      "patch": "@@ -27,6 +27,7 @@\n #include <unistd.h>\n \n static size_t _PAGESIZE _libctf_unused_;\n+int _libctf_version = CTF_VERSION;\t      /* Library client version.  */\n int _libctf_debug = 0;\t\t\t      /* Debugging messages enabled.  */\n \n _libctf_malloc_ void *\n@@ -190,6 +191,32 @@ ctf_strerror (int err)\n   return (const char *) (strerror (err));\n }\n \n+/* Set the CTF library client version to the specified version.  If version is\n+   zero, we just return the default library version number.  */\n+int\n+ctf_version (int version)\n+{\n+  if (version < 0)\n+    {\n+      errno = EINVAL;\n+      return -1;\n+    }\n+\n+  if (version > 0)\n+    {\n+      /*  Dynamic version switching is not presently supported. */\n+      if (version != CTF_VERSION)\n+\t{\n+\t  errno = ENOTSUP;\n+\t  return -1;\n+\t}\n+      ctf_dprintf (\"ctf_version: client using version %d\\n\", version);\n+      _libctf_version = version;\n+    }\n+\n+  return _libctf_version;\n+}\n+\n void\n libctf_init_debug (void)\n {"
    }
  ]
}