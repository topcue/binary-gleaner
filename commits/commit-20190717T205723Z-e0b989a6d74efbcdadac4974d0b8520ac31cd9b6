{
  "sha": "e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTBiOTg5YTZkNzRlZmJjZGFkYWM0OTc0ZDBiODUyMGFjMzFjZDliNg==",
  "commit": {
    "author": {
      "name": "Jose E. Marchesi",
      "email": "jose.marchesi@oracle.com",
      "date": "2019-07-17T20:57:23Z"
    },
    "committer": {
      "name": "Jose E. Marchesi",
      "email": "jose.marchesi@oracle.com",
      "date": "2019-07-17T20:57:23Z"
    },
    "message": "gas: support .half, .word and .dword directives in eBPF\n\nThis little patch adds support to the eBPF port of GAS for a few data\ndirectives.  The names for the directives have been chosen to be\ncoherent with the suffixes used in eBPF instructions: b, h, w and dw\nfor 8, 16, 32 and 64-bit values respectively.\n\nDocumentation and tests included.\nTested in a x86_64 host.\n\ngas/ChangeLog:\n\n2019-07-17  Jose E. Marchesi  <jose.marchesi@oracle.com>\n\n\t* config/tc-bpf.c (md_pseudo_table): .half, .word and .dword.\n\t* testsuite/gas/bpf/data.s: New file.\n\t* testsuite/gas/bpf/data.d: Likewise.\n\t* testsuite/gas/bpf/data-be.d: Likewise.\n\t* testsuite/gas/bpf/bpf.exp: Run data and data-be.\n\t* doc/c-bpf.texi (BPF Directives): New section.",
    "tree": {
      "sha": "5585c1fc5c6229a0c2415ea411cacb50349773c2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5585c1fc5c6229a0c2415ea411cacb50349773c2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/comments",
  "author": {
    "login": "jemarch",
    "id": 7061875,
    "node_id": "MDQ6VXNlcjcwNjE4NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7061875?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jemarch",
    "html_url": "https://github.com/jemarch",
    "followers_url": "https://api.github.com/users/jemarch/followers",
    "following_url": "https://api.github.com/users/jemarch/following{/other_user}",
    "gists_url": "https://api.github.com/users/jemarch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jemarch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jemarch/subscriptions",
    "organizations_url": "https://api.github.com/users/jemarch/orgs",
    "repos_url": "https://api.github.com/users/jemarch/repos",
    "events_url": "https://api.github.com/users/jemarch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jemarch/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jemarch",
    "id": 7061875,
    "node_id": "MDQ6VXNlcjcwNjE4NzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/7061875?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jemarch",
    "html_url": "https://github.com/jemarch",
    "followers_url": "https://api.github.com/users/jemarch/followers",
    "following_url": "https://api.github.com/users/jemarch/following{/other_user}",
    "gists_url": "https://api.github.com/users/jemarch/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jemarch/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jemarch/subscriptions",
    "organizations_url": "https://api.github.com/users/jemarch/orgs",
    "repos_url": "https://api.github.com/users/jemarch/repos",
    "events_url": "https://api.github.com/users/jemarch/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jemarch/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d8f68fcb9378b5ab1c945fa676e11da15be56dd6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d8f68fcb9378b5ab1c945fa676e11da15be56dd6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d8f68fcb9378b5ab1c945fa676e11da15be56dd6"
    }
  ],
  "stats": {
    "total": 58,
    "additions": 58,
    "deletions": 0
  },
  "files": [
    {
      "sha": "5d3bb61731c86bd4363e7bb8328ff756a0a9e353",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -1,3 +1,12 @@\n+2019-07-17  Jose E. Marchesi  <jose.marchesi@oracle.com>\n+\n+\t* config/tc-bpf.c (md_pseudo_table): .half, .word and .dword.\n+\t* testsuite/gas/bpf/data.s: New file.\n+\t* testsuite/gas/bpf/data.d: Likewise.\n+\t* testsuite/gas/bpf/data-be.d: Likewise.\n+\t* testsuite/gas/bpf/bpf.exp: Run data and data-be.\n+\t* doc/c-bpf.texi (BPF Directives): New section.\n+\n 2019-07-17  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (check_hle, md_assemble, check_VecOperands,"
    },
    {
      "sha": "3ebe81f3652f71b1cf5cd9b15c7822c6bf63ed58",
      "filename": "gas/config/tc-bpf.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/config/tc-bpf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/config/tc-bpf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-bpf.c?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -38,6 +38,9 @@ const char FLT_CHARS[]            = \"fFdD\";\n /* The target specific pseudo-ops which we support.  */\n const pseudo_typeS md_pseudo_table[] =\n {\n+    { \"half\",      cons,              2 },\n+    { \"word\",      cons,              4 },\n+    { \"dword\",     cons,              8 },\n     { NULL,         NULL,             0 }\n };\n "
    },
    {
      "sha": "9496359f242bb874dcf9987e767d8ab0ec9cfcba",
      "filename": "gas/doc/c-bpf.texi",
      "status": "modified",
      "additions": 23,
      "deletions": 0,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/doc/c-bpf.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/doc/c-bpf.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/c-bpf.texi?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -17,6 +17,7 @@\n @menu\n * BPF Options::                 Options\n * BPF Syntax::\t\t        Syntax\n+* BPF Directives::\t\tMachine Directives\n * BPF Opcodes::\t\t\tOpcodes\n @end menu\n \n@@ -104,6 +105,28 @@ descriptor @samp{2} in register @samp{r1} we would do:\n         lddw %r1, %map_fd(2)\n @end smallexample\n \n+@node BPF Directives\n+@section Machine Directives\n+\n+@cindex machine directives, BPF\n+\n+The BPF version of @code{@value{AS}} supports the following additional\n+machine directives:\n+\n+@table @code\n+@cindex @code{half} directive, BPF\n+@item .word\n+The @code{.half} directive produces a 16 bit value.\n+\n+@cindex @code{word} directive, BPF\n+@item .word\n+The @code{.word} directive produces a 32 bit value.\n+\n+@cindex @code{dword} directive, BPF\n+@item .dword\n+The @code{.dword} directive produces a 64 bit value.\n+@end table\n+\n @node BPF Opcodes\n @section Opcodes\n "
    },
    {
      "sha": "f0b24ea034abdccc071baf9ff33386de5e3700d8",
      "filename": "gas/testsuite/gas/bpf/bpf.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/bpf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/bpf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/bpf/bpf.exp?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -26,6 +26,7 @@ if {[istarget bpf*-*-*]} {\n     run_dump_test call\n     run_dump_test exit\n     run_dump_test atomic\n+    run_dump_test data\n \n     run_dump_test lddw-be\n     run_dump_test alu-be\n@@ -35,4 +36,5 @@ if {[istarget bpf*-*-*]} {\n     run_dump_test call-be\n     run_dump_test exit-be\n     run_dump_test atomic-be\n+    run_dump_test data-be\n }"
    },
    {
      "sha": "010f08f2508b98a598f8279f5c23b22bd422ce3f",
      "filename": "gas/testsuite/gas/bpf/data-be.d",
      "status": "added",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data-be.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data-be.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/bpf/data-be.d?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -0,0 +1,9 @@\n+#as: --EB\n+#source: data.s\n+#objdump: -s -j .data\n+#name: eBPF data directives, big endian\n+\n+.*: +file format .*bpf.*\n+\n+Contents of section \\.data:\n+ 0000 f00fdead beef1122 33445566 7788 .*"
    },
    {
      "sha": "6824e8b8b5a740258b6b92dce6049908b0be929a",
      "filename": "gas/testsuite/gas/bpf/data.d",
      "status": "added",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/bpf/data.d?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -0,0 +1,8 @@\n+#as: --EL\n+#objdump: -s -j .data\n+#name: eBPF data directives\n+\n+.*: +file format .*bpf.*\n+\n+Contents of section \\.data:\n+ 0000 0ff0efbe adde8877 66554433 2211 .*"
    },
    {
      "sha": "b6e552882eab66db20e3a0db580eea0e860de0ed",
      "filename": "gas/testsuite/gas/bpf/data.s",
      "status": "added",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e0b989a6d74efbcdadac4974d0b8520ac31cd9b6/gas/testsuite/gas/bpf/data.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/bpf/data.s?ref=e0b989a6d74efbcdadac4974d0b8520ac31cd9b6",
      "patch": "@@ -0,0 +1,4 @@\n+        .section .data\n+        .half 0xf00f\n+        .word 0xdeadbeef\n+        .dword 0x1122334455667788"
    }
  ]
}