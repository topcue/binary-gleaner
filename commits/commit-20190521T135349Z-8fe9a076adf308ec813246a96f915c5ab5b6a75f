{
  "sha": "8fe9a076adf308ec813246a96f915c5ab5b6a75f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OGZlOWEwNzZhZGYzMDhlYzgxMzI0NmE5NmY5MTVjNWFiNWI2YTc1Zg==",
  "commit": {
    "author": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-05-21T13:51:43Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-05-21T13:53:49Z"
    },
    "message": "[GAS, Arm] PR24559: Fix pseudo load-operations for Armv8-M Baseline\n\ngas/ChangeLog:\n2019-05-21  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\tPR 24559\n\t* config/tc-arm.c (move_or_literal_pool): Set size_req to 0\n\tfor MOVW replacement.\n\t* testsuite/gas/arm/load-pseudo.s: New test input.\n\t* testsuite/gas/arm/m0-load-pseudo.d: New test.\n\t* testsuite/gas/arm/m23-load-pseudo.d: New test.\n\t* testsuite/gas/arm/m33-load-pseudo.d: New test.",
    "tree": {
      "sha": "00f5b0affa26916e302aacf68080aedddf2acfd4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/00f5b0affa26916e302aacf68080aedddf2acfd4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8fe9a076adf308ec813246a96f915c5ab5b6a75f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8fe9a076adf308ec813246a96f915c5ab5b6a75f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8fe9a076adf308ec813246a96f915c5ab5b6a75f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8fe9a076adf308ec813246a96f915c5ab5b6a75f/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e6f65e7573a317ac4efff26fe0e49fe1b9e7a596",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e6f65e7573a317ac4efff26fe0e49fe1b9e7a596",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e6f65e7573a317ac4efff26fe0e49fe1b9e7a596"
    }
  ],
  "stats": {
    "total": 53,
    "additions": 53,
    "deletions": 0
  },
  "files": [
    {
      "sha": "dfd5d6f1b7030634792478aba252326a48c3b5bc",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -1,3 +1,13 @@\n+2019-05-21  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n+\n+\tPR 24559\n+\t* config/tc-arm.c (move_or_literal_pool): Set size_req to 0 for MOVW\n+\treplacement.\n+\t* testsuite/gas/arm/load-pseudo.s: New test input.\n+\t* testsuite/gas/arm/m0-load-pseudo.d: New test.\n+\t* testsuite/gas/arm/m23-load-pseudo.d: New test.\n+\t* testsuite/gas/arm/m33-load-pseudo.d: New test.\n+\n 2019-05-21  Andre Vieira  <andre.simoesdiasvieira@arm.com>\n \n \t* testsuite/gas/arm/armv8_1-m-bf.d: Allow different branch target naming"
    },
    {
      "sha": "136df3340d3a3272f349bc5f3f37a1d95afe5d73",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -8696,6 +8696,11 @@ move_or_literal_pool (int i, enum lit_type t, bfd_boolean mode_3)\n \t\t      inst.instruction |= (imm & 0x0800) << 15;\n \t\t      inst.instruction |= (imm & 0x0700) << 4;\n \t\t      inst.instruction |= (imm & 0x00ff);\n+\t\t      /*  In case this replacement is being done on Armv8-M\n+\t\t\t  Baseline we need to make sure to disable the\n+\t\t\t  instruction size check, as otherwise GAS will reject\n+\t\t\t  the use of this T32 instruction.  */\n+\t\t      inst.size_req = 0;\n \t\t      return TRUE;\n \t\t    }\n \t\t}"
    },
    {
      "sha": "2102522b718d940e666a24399818bf89281f34dc",
      "filename": "gas/testsuite/gas/arm/load-pseudo.s",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/load-pseudo.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/load-pseudo.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/load-pseudo.s?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -0,0 +1,3 @@\n+.syntax unified\n+ldr r0, =(0x30)\n+ldr r0, =(0x70000000)"
    },
    {
      "sha": "cc7e08518ff0889d0a46ce20572c341759f8795f",
      "filename": "gas/testsuite/gas/arm/m0-load-pseudo.d",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m0-load-pseudo.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m0-load-pseudo.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/m0-load-pseudo.d?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -0,0 +1,12 @@\n+# name: Load pseudo-operation for Cortex-M0\n+# as: -mcpu=cortex-m0\n+# objdump: -dr --prefix-addresses --show-raw-insn -M force-thumb\n+# source: load-pseudo.s\n+\n+.*: +file format .*arm.*\n+\n+\n+Disassembly of section .text:\n+[^>]*> 4800      \tldr\tr0, \\[pc, #0\\]\t; \\(00000004 [^>]*>\\)\n+[^>]*> 4801      \tldr\tr0, \\[pc, #4\\]\t; \\(00000008 [^>]*>\\)\n+#..."
    },
    {
      "sha": "2e0dbe5479b398a609da2fd153a25db2a7f88be2",
      "filename": "gas/testsuite/gas/arm/m23-load-pseudo.d",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m23-load-pseudo.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m23-load-pseudo.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/m23-load-pseudo.d?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -0,0 +1,12 @@\n+# name: Load pseudo-operation for Cortex-M23\n+# as: -mcpu=cortex-m23\n+# objdump: -dr --prefix-addresses --show-raw-insn -M force-thumb\n+# source: load-pseudo.s\n+\n+.*: +file format .*arm.*\n+\n+\n+Disassembly of section .text:\n+[^>]*> f240 0030 \tmovw\tr0, #48\t; 0x30\n+[^>]*> 4800      \tldr\tr0, \\[pc, #0\\]\t; \\(00000008 [^>]*>\\)\n+#..."
    },
    {
      "sha": "e77bffd0f4d9f1aa2c11e232f95ca422e7927391",
      "filename": "gas/testsuite/gas/arm/m33-load-pseudo.d",
      "status": "added",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m33-load-pseudo.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8fe9a076adf308ec813246a96f915c5ab5b6a75f/gas/testsuite/gas/arm/m33-load-pseudo.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/m33-load-pseudo.d?ref=8fe9a076adf308ec813246a96f915c5ab5b6a75f",
      "patch": "@@ -0,0 +1,11 @@\n+# name: Load pseudo-operation for Cortex-M33\n+# as: -mcpu=cortex-m33\n+# objdump: -dr --prefix-addresses --show-raw-insn -M force-thumb\n+# source: load-pseudo.s\n+\n+.*: +file format .*arm.*\n+\n+\n+Disassembly of section .text:\n+[^>]*> f04f 0030 \tmov.w\tr0, #48\t; 0x30\n+[^>]*> f04f 40e0 \tmov.w\tr0, #1879048192\t; 0x70000000"
    }
  ]
}