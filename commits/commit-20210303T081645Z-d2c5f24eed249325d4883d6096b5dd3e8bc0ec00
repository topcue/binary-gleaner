{
  "sha": "d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDJjNWYyNGVlZDI0OTMyNWQ0ODgzZDYwOTZiNWRkM2U4YmMwZWMwMA==",
  "commit": {
    "author": {
      "name": "Markus Metzger",
      "email": "markus.t.metzger@intel.com",
      "date": "2020-12-15T15:18:34Z"
    },
    "committer": {
      "name": "Markus Metzger",
      "email": "markus.t.metzger@intel.com",
      "date": "2021-03-03T08:16:45Z"
    },
    "message": "testsuite, gdb.btrace: adjust expected output to pass with clang\n\nClang generates slightly different debug information.  Adjust the expected\noutput of gdb.btrace/function_call_history.exp to work with both gcc and\nclang.\n\nAlso modify gdb.btrace/exception.cc to reliably trace into main and update\nthe corresponding patterns in gdb.btrace/exception.exp.",
    "tree": {
      "sha": "e533c12ab3eb51e28cca27e1c43e18b15a06ac64",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e533c12ab3eb51e28cca27e1c43e18b15a06ac64"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/comments",
  "author": {
    "login": "markus-metzger",
    "id": 5424725,
    "node_id": "MDQ6VXNlcjU0MjQ3MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5424725?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/markus-metzger",
    "html_url": "https://github.com/markus-metzger",
    "followers_url": "https://api.github.com/users/markus-metzger/followers",
    "following_url": "https://api.github.com/users/markus-metzger/following{/other_user}",
    "gists_url": "https://api.github.com/users/markus-metzger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/markus-metzger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/markus-metzger/subscriptions",
    "organizations_url": "https://api.github.com/users/markus-metzger/orgs",
    "repos_url": "https://api.github.com/users/markus-metzger/repos",
    "events_url": "https://api.github.com/users/markus-metzger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/markus-metzger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "markus-metzger",
    "id": 5424725,
    "node_id": "MDQ6VXNlcjU0MjQ3MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5424725?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/markus-metzger",
    "html_url": "https://github.com/markus-metzger",
    "followers_url": "https://api.github.com/users/markus-metzger/followers",
    "following_url": "https://api.github.com/users/markus-metzger/following{/other_user}",
    "gists_url": "https://api.github.com/users/markus-metzger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/markus-metzger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/markus-metzger/subscriptions",
    "organizations_url": "https://api.github.com/users/markus-metzger/orgs",
    "repos_url": "https://api.github.com/users/markus-metzger/repos",
    "events_url": "https://api.github.com/users/markus-metzger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/markus-metzger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c7c7253a47891ff052b85708080a12d86e1720bc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c7c7253a47891ff052b85708080a12d86e1720bc",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c7c7253a47891ff052b85708080a12d86e1720bc"
    }
  ],
  "stats": {
    "total": 58,
    "additions": 37,
    "deletions": 21
  },
  "files": [
    {
      "sha": "1e79a145cc182da82063fc3b2405a853fcf40f20",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
      "patch": "@@ -1,3 +1,9 @@\n+2021-03-03  Markus Metzger  <markus.t.metzger@intel.com>\n+\n+\t* gdb.btrace/exception.cc (main): Update test source.\n+\t* gdb.btrace/exception.exp: Update patterns.\n+\t* gdb.btrace/function_call_history.exp: Likewise.\n+\n 2021-03-03  Markus Metzger  <markus.t.metzger@intel.com>\n \n \t* gdb.btrace/unknown_functions.exp: Move -Wl,-x to ldflags."
    },
    {
      "sha": "0c660bb705182b2356ba1cd74f742d19ce031906",
      "filename": "gdb/testsuite/gdb.btrace/exception.cc",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/exception.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/exception.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.btrace/exception.cc?ref=d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
      "patch": "@@ -50,7 +50,11 @@ test (void)\n int\n main (void)\n {\n+  int ret;\n+\n   test ();\n   test (); /* bp.1  */\n-  return 0; /* bp.2  */\n+\n+  ret = 0;\n+  return ret; /* bp.2  */\n }"
    },
    {
      "sha": "7b840e41bfc03bf6085315e8137c00bf0da71e53",
      "filename": "gdb/testsuite/gdb.btrace/exception.exp",
      "status": "modified",
      "additions": 16,
      "deletions": 10,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/exception.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/exception.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.btrace/exception.exp?ref=d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
      "patch": "@@ -60,19 +60,25 @@ gdb_expect_list \"flat\" \"\\r\\n$gdb_prompt $\" [list \\\n     \"3\\tfoo\\\\(\\\\)\" \\\n     \"4\\tbar\\\\(\\\\)\" \\\n     \"5\\tbad\\\\(\\\\)\\r\" \\\n-  ] \\\n-  \"\" \\\n-  \"\\[0-9\\]*\\ttest\\\\(\\\\)\"]\n+  ] \"\" \\\n+  [multi_line \\\n+    \"\\[0-9\\]*\\ttest\\\\(\\\\)\" \\\n+    \"\\[0-9\\]*\\tmain\\\\(\\\\)\" \\\n+  ] \"\" \\\n+  ]\n \n # show the branch trace with calls indented\n send_gdb \"record function-call-history /c 1\\n\"\n gdb_expect_list \"indented\" \"\\r\\n$gdb_prompt $\" [list \\\n   [multi_line \\\n     \"1\\tmain\\\\(\\\\)\" \\\n-  \"2\\t  test\\\\(\\\\)\" \\\n-  \"3\\t    foo\\\\(\\\\)\" \\\n-  \"4\\t      bar\\\\(\\\\)\" \\\n-  \"5\\t        bad\\\\(\\\\)\\r\" \\\n-  ] \\\n-  \"\" \\\n-  \"\\[0-9\\]*\\t  test\\\\(\\\\)\"]\n+    \"2\\t  test\\\\(\\\\)\" \\\n+    \"3\\t    foo\\\\(\\\\)\" \\\n+    \"4\\t      bar\\\\(\\\\)\" \\\n+    \"5\\t        bad\\\\(\\\\)\\r\" \\\n+  ] \"\" \\\n+  [multi_line \\\n+    \"\\[0-9\\]*\\t  test\\\\(\\\\)\" \\\n+    \"\\[0-9\\]*\\tmain\\\\(\\\\)\" \\\n+  ] \"\" \\\n+  ]"
    },
    {
      "sha": "f995016fafa73febb3e0aaca17a2ca117dd1f4b0",
      "filename": "gdb/testsuite/gdb.btrace/function_call_history.exp",
      "status": "modified",
      "additions": 10,
      "deletions": 10,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/function_call_history.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d2c5f24eed249325d4883d6096b5dd3e8bc0ec00/gdb/testsuite/gdb.btrace/function_call_history.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.btrace/function_call_history.exp?ref=d2c5f24eed249325d4883d6096b5dd3e8bc0ec00",
      "patch": "@@ -148,29 +148,29 @@ gdb_test_no_output \"set filename-display basename\"\n # moving forward again, but this time with file and line number, expected to see the first 15 entries\n gdb_test \"record function-call-history /l +\" [multi_line \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n   ] \"forward /l - 1\"\n \n # moving forward and expect to see the latest 6 entries\n gdb_test \"record function-call-history /l +\" [multi_line \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,41\" \\\n-  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,24\" \\\n+  \"\\[0-9\\]*\\tinc\\tat $srcfile:22,2\\[34\\]\" \\\n   \"\\[0-9\\]*\\tmain\\tat $srcfile:40,43\" \\\n   ] \"forward /l - 2\"\n "
    }
  ]
}