{
  "sha": "c8c6ef3807554a17d4518e45f91c53d17a71c083",
  "node_id": "C_kwDOANOeidoAKGM4YzZlZjM4MDc1NTRhMTdkNDUxOGU0NWY5MWM1M2QxN2E3MWMwODM",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-28T05:23:16Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-28T18:23:58Z"
    },
    "message": "sim: riscv: switch to new target-newlib-syscall\n\nUse the new target-newlib-syscall module.  This is needed to merge all\nthe architectures into a single build, and riscv has a custom syscall\ntable for its newlib/libgloss port.",
    "tree": {
      "sha": "ad91bd4587ccf247736aae694accac89b6b10c06",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ad91bd4587ccf247736aae694accac89b6b10c06"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c8c6ef3807554a17d4518e45f91c53d17a71c083",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c8c6ef3807554a17d4518e45f91c53d17a71c083",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c8c6ef3807554a17d4518e45f91c53d17a71c083",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c8c6ef3807554a17d4518e45f91c53d17a71c083/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ab230d13fc81986c4a74688e35510a8985dff422",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ab230d13fc81986c4a74688e35510a8985dff422",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ab230d13fc81986c4a74688e35510a8985dff422"
    }
  ],
  "stats": {
    "total": 5,
    "additions": 2,
    "deletions": 3
  },
  "files": [
    {
      "sha": "b967654d7875dd1abf34aa48588a102b45d0fd6c",
      "filename": "sim/riscv/Makefile.in",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8c6ef3807554a17d4518e45f91c53d17a71c083/sim/riscv/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8c6ef3807554a17d4518e45f91c53d17a71c083/sim/riscv/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/riscv/Makefile.in?ref=c8c6ef3807554a17d4518e45f91c53d17a71c083",
      "patch": "@@ -15,9 +15,6 @@\n # You should have received a copy of the GNU General Public License\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n-# This selects the newlib/libgloss syscall definitions.\n-NL_TARGET = -DNL_TARGET_riscv\n-\n ## COMMON_PRE_CONFIG_FRAG\n \n SIM_OBJS = \\"
    },
    {
      "sha": "13fe6c7cae0d09732fbb8a29001fdc69c83703f0",
      "filename": "sim/riscv/interp.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8c6ef3807554a17d4518e45f91c53d17a71c083/sim/riscv/interp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8c6ef3807554a17d4518e45f91c53d17a71c083/sim/riscv/interp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/riscv/interp.c?ref=c8c6ef3807554a17d4518e45f91c53d17a71c083",
      "patch": "@@ -24,6 +24,7 @@\n #include \"sim/callback.h\"\n #include \"sim-main.h\"\n #include \"sim-options.h\"\n+#include \"target-newlib-syscall.h\"\n \f\n void\n sim_engine_run (SIM_DESC sd,\n@@ -69,6 +70,7 @@ sim_open (SIM_OPEN_KIND kind, host_callback *callback,\n   STATE_MACHS (sd) = riscv_sim_machs;\n   STATE_MODEL_NAME (sd) = WITH_TARGET_WORD_BITSIZE == 32 ? \"RV32G\" : \"RV64G\";\n   current_target_byte_order = BFD_ENDIAN_LITTLE;\n+  callback->syscall_map = cb_riscv_syscall_map;\n \n   /* The cpu data is kept in a separately allocated chunk of memory.  */\n   if (sim_cpu_alloc_all (sd, 1) != SIM_RC_OK)"
    }
  ]
}