{
  "sha": "213291361b4ddb2d05b8c89bf47d23ca4306912e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjEzMjkxMzYxYjRkZGIyZDA1YjhjODliZjQ3ZDIzY2E0MzA2OTEyZQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-03-12T19:32:15Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-03-12T19:32:16Z"
    },
    "message": "Change gdbsupport not to rely on BFD\n\nThis changes gdbsupport so that it no longer relies on BFD.  This is a\nprecursor to making gdbserver use the already-built gdbsupport,\nbecause building gdbserver should not require BFD to be built.\n\nThe most notable change here is that CORE_ADDR is always a 64-bit\ntype.  This makes it so that gdb acts as if it were always built in\n64-bit mode.\n\nChangeLog\n2020-03-12  Tom Tromey  <tom@tromey.com>\n\n\t* Makefile.in: Rebuild.\n\t* Makefile.def (gdbsupport): Don't depend on bfd.\n\ngdbsupport/ChangeLog\n2020-03-12  Tom Tromey  <tom@tromey.com>\n\n\t* common-types.h: Remove GDBSERVER code.\n\t(gdb_byte, CORE_ADDR, LONGEST, ULONGEST): Redefine.\n\t* common-defs.h: Remove GDBSERVER code.",
    "tree": {
      "sha": "fcaa9249f7fcbd146c5919dab00ec1677d9ed273",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fcaa9249f7fcbd146c5919dab00ec1677d9ed273"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/213291361b4ddb2d05b8c89bf47d23ca4306912e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/213291361b4ddb2d05b8c89bf47d23ca4306912e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/213291361b4ddb2d05b8c89bf47d23ca4306912e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/213291361b4ddb2d05b8c89bf47d23ca4306912e/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9a665d62266e75f0519f3a663784c458885b5c63",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a665d62266e75f0519f3a663784c458885b5c63",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9a665d62266e75f0519f3a663784c458885b5c63"
    }
  ],
  "stats": {
    "total": 63,
    "additions": 16,
    "deletions": 47
  },
  "files": [
    {
      "sha": "9fb604e3598a43647364df92bb8e10fcdd0da730",
      "filename": "ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ChangeLog?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -1,3 +1,8 @@\n+2020-03-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* Makefile.in: Rebuild.\n+\t* Makefile.def (gdbsupport): Don't depend on bfd.\n+\n 2020-03-12  Tom Tromey  <tom@tromey.com>\n \n \t* Makefile.in: Rebuild."
    },
    {
      "sha": "3162199ac7bf5d48f732952ae5b938d7841ecf81",
      "filename": "Makefile.def",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/Makefile.def",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/Makefile.def",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/Makefile.def?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -421,10 +421,8 @@ dependencies = { module=all-libgui; on=all-tcl; };\n dependencies = { module=all-libgui; on=all-tk; };\n dependencies = { module=all-libgui; on=all-itcl; };\n \n-dependencies = { module=configure-gdbsupport; on=configure-bfd; };\n dependencies = { module=configure-gdbsupport; on=configure-gnulib; };\n dependencies = { module=configure-gdbsupport; on=configure-intl; };\n-dependencies = { module=all-gdbsupport; on=all-bfd; };\n dependencies = { module=all-gdbsupport; on=all-gnulib; };\n dependencies = { module=all-gdbsupport; on=all-intl; };\n "
    },
    {
      "sha": "d24dfdfb860a8f67aa9a4d4cec40047e7d8f66b5",
      "filename": "Makefile.in",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/Makefile.in?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -52454,9 +52454,7 @@ all-gdb: maybe-all-opcodes\n all-gdb: maybe-all-libdecnumber\n all-gdb: maybe-all-libctf\n all-gdbserver: maybe-all-libiberty\n-configure-gdbsupport: maybe-configure-bfd\n configure-gdbsupport: maybe-configure-intl\n-all-gdbsupport: maybe-all-bfd\n all-gdbsupport: maybe-all-intl\n configure-gprof: maybe-configure-intl\n all-gprof: maybe-all-libiberty"
    },
    {
      "sha": "c471726af5eb4391508037a2c63113da822f54c3",
      "filename": "gdbsupport/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/ChangeLog?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -1,3 +1,9 @@\n+2020-03-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* common-types.h: Remove GDBSERVER code.\n+\t(gdb_byte, CORE_ADDR, LONGEST, ULONGEST): Redefine.\n+\t* common-defs.h: Remove GDBSERVER code.\n+\n 2020-03-12  Simon Marchi  <simon.marchi@efficios.com>\n \n \t* selftest.m4: Moved from gdb/."
    },
    {
      "sha": "65500ce76343ec8cc677526e50588bd78801dfa7",
      "filename": "gdbsupport/common-defs.h",
      "status": "modified",
      "additions": 0,
      "deletions": 16,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/common-defs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/common-defs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/common-defs.h?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -20,20 +20,6 @@\n #ifndef COMMON_COMMON_DEFS_H\n #define COMMON_COMMON_DEFS_H\n \n-#ifdef GDBSERVER\n-\n-#include <gnulib/config.h>\n-\n-#undef PACKAGE_NAME\n-#undef PACKAGE\n-#undef PACKAGE_VERSION\n-#undef PACKAGE_STRING\n-#undef PACKAGE_TARNAME\n-\n-#include <config.h>\n-\n-#else  /* GDBSERVER */\n-\n #include <gdbsupport/config.h>\n \n #undef PACKAGE_NAME\n@@ -44,8 +30,6 @@\n \n #include \"gnulib/config.h\"\n \n-#endif\t/* GDBSERVER */\n-\n /* From:\n     https://www.gnu.org/software/gnulib/manual/html_node/stdint_002eh.html\n "
    },
    {
      "sha": "f5b2f3d249177acea77231c21c5601f959c18d2f",
      "filename": "gdbsupport/common-types.h",
      "status": "modified",
      "additions": 5,
      "deletions": 27,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/common-types.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/213291361b4ddb2d05b8c89bf47d23ca4306912e/gdbsupport/common-types.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/common-types.h?ref=213291361b4ddb2d05b8c89bf47d23ca4306912e",
      "patch": "@@ -20,40 +20,18 @@\n #ifndef COMMON_COMMON_TYPES_H\n #define COMMON_COMMON_TYPES_H\n \n-#ifdef GDBSERVER\n+#include <inttypes.h>\n \n /* * A byte from the program being debugged.  */\n typedef unsigned char gdb_byte;\n \n-typedef unsigned long long CORE_ADDR;\n-\n-typedef long long LONGEST;\n-typedef unsigned long long ULONGEST;\n-\n-#else /* GDBSERVER */\n-\n-#include \"bfd.h\"\n-\n-/* * A byte from the program being debugged.  */\n-typedef bfd_byte gdb_byte;\n-\n /* * An address in the program being debugged.  Host byte order.  */\n-typedef bfd_vma CORE_ADDR;\n-\n-/* This is to make sure that LONGEST is at least as big as CORE_ADDR.  */\n-\n-#ifdef BFD64\n-\n-typedef BFD_HOST_64_BIT LONGEST;\n-typedef BFD_HOST_U_64_BIT ULONGEST;\n-\n-#else /* No BFD64 */\n+typedef uint64_t CORE_ADDR;\n \n-typedef long long LONGEST;\n-typedef unsigned long long ULONGEST;\n+/* LONGEST must be at least as big as CORE_ADDR.  */\n \n-#endif /* No BFD64 */\n-#endif /* GDBSERVER */\n+typedef int64_t LONGEST;\n+typedef uint64_t ULONGEST;\n \n /* * The largest CORE_ADDR value.  */\n #define CORE_ADDR_MAX (~(CORE_ADDR) 0)"
    }
  ]
}