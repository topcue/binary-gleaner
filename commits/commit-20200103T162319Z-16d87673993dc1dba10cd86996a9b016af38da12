{
  "sha": "16d87673993dc1dba10cd86996a9b016af38da12",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTZkODc2NzM5OTNkYzFkYmExMGNkODY5OTZhOWIwMTZhZjM4ZGExMg==",
  "commit": {
    "author": {
      "name": "Sergey Belyashov",
      "email": "sergey.belyashov@gmail.com",
      "date": "2020-01-03T16:23:19Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-01-03T16:23:19Z"
    },
    "message": "Allow individual targets to decide if string escapes should be allowed.  Disable for PPC and Z80.\n\n\tPR 25311\n\t* as.h (TC_STRING_ESCAPES): Provide a default definition.\n\t* app.c (do_scrub_chars): Use TC_STRING_ESCAPES instead of\n\tNO_STRING_ESCAPES.\n\t* read.c (next_char_of_string): Likewise.\n\t* config/tc-ppc.h (TC_STRING_ESCAPES): Define.\n\t* config/tc-z80.h (TC_STRING_ESCAPES): Define.",
    "tree": {
      "sha": "85dbb6aba85b82d6847e3092d95e4f4fb3e281d6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/85dbb6aba85b82d6847e3092d95e4f4fb3e281d6"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/16d87673993dc1dba10cd86996a9b016af38da12",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/16d87673993dc1dba10cd86996a9b016af38da12",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/16d87673993dc1dba10cd86996a9b016af38da12",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/16d87673993dc1dba10cd86996a9b016af38da12/comments",
  "author": {
    "login": "b-s-a",
    "id": 2833802,
    "node_id": "MDQ6VXNlcjI4MzM4MDI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2833802?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/b-s-a",
    "html_url": "https://github.com/b-s-a",
    "followers_url": "https://api.github.com/users/b-s-a/followers",
    "following_url": "https://api.github.com/users/b-s-a/following{/other_user}",
    "gists_url": "https://api.github.com/users/b-s-a/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/b-s-a/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/b-s-a/subscriptions",
    "organizations_url": "https://api.github.com/users/b-s-a/orgs",
    "repos_url": "https://api.github.com/users/b-s-a/repos",
    "events_url": "https://api.github.com/users/b-s-a/events{/privacy}",
    "received_events_url": "https://api.github.com/users/b-s-a/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f2a3559d54602cecfec6d90f792be4a70ad918ab",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f2a3559d54602cecfec6d90f792be4a70ad918ab",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f2a3559d54602cecfec6d90f792be4a70ad918ab"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 22,
    "deletions": 9
  },
  "files": [
    {
      "sha": "5a16b9144aaa2ec23f04b2aeaca3155ba1825946",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -1,3 +1,13 @@\n+2020-01-03  Sergey Belyashov  <sergey.belyashov@gmail.com>\n+\n+\tPR 25311\n+\t* as.h (TC_STRING_ESCAPES): Provide a default definition.\n+\t* app.c (do_scrub_chars): Use TC_STRING_ESCAPES instead of\n+\tNO_STRING_ESCAPES.\n+\t* read.c (next_char_of_string): Likewise.\n+\t* config/tc-ppc.h (TC_STRING_ESCAPES): Define.\n+\t* config/tc-z80.h (TC_STRING_ESCAPES): Define.\n+\n 2020-01-03  Nick Clifton  <nickc@redhat.com>\n \n \t* po/sv.po: Updated Swedish translation."
    },
    {
      "sha": "00c31bbf3906fe5ca85a191b9350cedf8a9072d9",
      "filename": "gas/app.c",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/app.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/app.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/app.c?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -602,13 +602,11 @@ do_scrub_chars (size_t (*get) (char *, size_t), char *tostart, size_t tolen)\n \t      state = old_state;\n \t      PUT (ch);\n \t    }\n-#ifndef NO_STRING_ESCAPES\n-\t  else if (ch == '\\\\')\n+\t  else if (TC_STRING_ESCAPES && ch == '\\\\')\n \t    {\n \t      state = 6;\n \t      PUT (ch);\n \t    }\n-#endif\n \t  else if (scrub_m68k_mri && ch == '\\n')\n \t    {\n \t      /* Just quietly terminate the string.  This permits lines like"
    },
    {
      "sha": "b8d3d74f737614c8d606d55939d439bd1e3aedb3",
      "filename": "gas/as.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/as.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/as.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/as.h?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -588,6 +588,10 @@ COMMON int flag_m68k_mri;\n #define flag_m68k_mri 0\n #endif\n \n+#ifndef TC_STRING_ESCAPES\n+#define TC_STRING_ESCAPES 1\n+#endif\n+\n #ifdef WARN_COMMENTS\n COMMON int           warn_comment;\n COMMON unsigned int  found_comment;"
    },
    {
      "sha": "4df7982fcf608816756efc21fc3d29200c079795",
      "filename": "gas/config/tc-ppc.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/config/tc-ppc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/config/tc-ppc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-ppc.h?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -61,7 +61,7 @@ extern const char *ppc_target_format (void);\n \n /* Strings do not use backslash escapes under COFF.  */\n #ifdef OBJ_COFF\n-#define NO_STRING_ESCAPES\n+#define TC_STRING_ESCAPES 0\n #endif\n \n #ifdef OBJ_ELF"
    },
    {
      "sha": "ae98d5d4d33d656aad79ccf3fa6304554032b443",
      "filename": "gas/config/tc-z80.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/config/tc-z80.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/config/tc-z80.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-z80.h?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -96,6 +96,7 @@ extern void z80_cons_fix_new (fragS *, int, int, expressionS *);\n /* We allow single quotes to delimit character constants as\n    well, but it is cleaner to handle that in tc-z80.c.  */\n #define SINGLE_QUOTE_STRINGS\n+#define TC_STRING_ESCAPES 0\n \n /* An `.lcomm' directive with no explicit alignment parameter will\n    use this macro to set P2VAR to the alignment that a request for"
    },
    {
      "sha": "bf594f12a2dd3341998f63ab1a8e1bfaeea9a542",
      "filename": "gas/read.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/read.c?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -5435,8 +5435,9 @@ next_char_of_string (void)\n       bump_line_counters ();\n       break;\n \n-#ifndef NO_STRING_ESCAPES\n     case '\\\\':\n+      if (!TC_STRING_ESCAPES)\n+\tbreak;\n       switch (c = *input_line_pointer++ & CHAR_MASK)\n \t{\n \tcase 'b':\n@@ -5538,7 +5539,6 @@ next_char_of_string (void)\n \t  break;\n \t}\n       break;\n-#endif /* ! defined (NO_STRING_ESCAPES) */\n \n     default:\n       break;"
    },
    {
      "sha": "6fe0594ab20741c3e7655e4902ab9646220e47a9",
      "filename": "gas/testsuite/gas/z80/strings.d",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/16d87673993dc1dba10cd86996a9b016af38da12/gas/testsuite/gas/z80/strings.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/16d87673993dc1dba10cd86996a9b016af38da12/gas/testsuite/gas/z80/strings.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/z80/strings.d?ref=16d87673993dc1dba10cd86996a9b016af38da12",
      "patch": "@@ -8,7 +8,7 @@ Contents of section \\.data:\n  0010 44454642 20746578 745c6e64 38373833.*\n  0020 4445464d 20746578 745c6e33 37383537.*\n  0030 44422074 6578745c 6e333837 39383337.*\n- 0040 2e617363 69692074 6578743a bf0c0a00.*\n- 0050 2e617363 697a2074 6578740a 39393900.*\n- 0060 2e737472 696e6720 74657874 0a090000.*\n+ 0040 2e617363 69692074 6578745c 37325c32.*\n+ 0050 37375c66 5c6e5c30 2e617363 697a2074.*\n+ 0060 6578745c 6e393939 002e7374 72696e67.*\n #pass"
    }
  ]
}