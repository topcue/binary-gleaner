{
  "sha": "31c89d6038f2658f5e06a762aa9e20e78e74651f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzFjODlkNjAzOGYyNjU4ZjVlMDZhNzYyYWE5ZTIwZTc4ZTc0NjUxZg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-04-22T02:22:13Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-04-22T12:54:03Z"
    },
    "message": ".symver fixes\n\n\t* config/obj-elf.c (elf_frob_symbol): Unconditionally remove\n\tsymbol for \".symver .. remove\".\n\t* doc/as.texi (.symver): Update.\n\t* testsuite/gas/symver/symver11.s: Make foo weak.\n\t* testsuite/gas/symver/symver11.d: Expect an error.\n\t* testsuite/gas/symver/symver7.d: Allow other random symbols.",
    "tree": {
      "sha": "1ae7e0154824b7aeaaa5b8e1a6a8c83228e779eb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1ae7e0154824b7aeaaa5b8e1a6a8c83228e779eb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/31c89d6038f2658f5e06a762aa9e20e78e74651f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/31c89d6038f2658f5e06a762aa9e20e78e74651f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/31c89d6038f2658f5e06a762aa9e20e78e74651f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/31c89d6038f2658f5e06a762aa9e20e78e74651f/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "54ac3df1adbf7b4b3470a8df08caa0aea4c89616",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/54ac3df1adbf7b4b3470a8df08caa0aea4c89616",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/54ac3df1adbf7b4b3470a8df08caa0aea4c89616"
    }
  ],
  "stats": {
    "total": 31,
    "additions": 16,
    "deletions": 15
  },
  "files": [
    {
      "sha": "3f59c81614545cc7952c55de8dabcf0b3cdb19bb",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -1,3 +1,12 @@\n+2020-04-22  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/obj-elf.c (elf_frob_symbol): Unconditionally remove\n+\tsymbol for \".symver .. remove\".\n+\t* doc/as.texi (.symver): Update.\n+\t* testsuite/gas/symver/symver11.s: Make foo weak.\n+\t* testsuite/gas/symver/symver11.d: Expect an error.\n+\t* testsuite/gas/symver/symver7.d: Allow other random symbols.\n+\n 2020-04-21  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* testsuite/gas/symver/symver11.s: Add \".balign 8\"."
    },
    {
      "sha": "4bdddc9056dc3aa65b980c1a6de620bfade0d6ef",
      "filename": "gas/config/obj-elf.c",
      "status": "modified",
      "additions": 1,
      "deletions": 3,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/config/obj-elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/config/obj-elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/obj-elf.c?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -2569,9 +2569,7 @@ elf_frob_symbol (symbolS *symp, int *puntp)\n \t      elfsym->internal_elf_sym.st_other |= STV_HIDDEN;\n \t      break;\n \t    case visibility_remove:\n-\t      /* Remove the symbol if it isn't used in relocation.  */\n-\t      if (!symbol_used_in_reloc_p (symp))\n-\t\tsymbol_remove (symp, &symbol_rootP, &symbol_lastP);\n+\t      symbol_remove (symp, &symbol_rootP, &symbol_lastP);\n \t      break;\n \t    case visibility_local:\n \t      S_CLEAR_EXTERNAL (symp);"
    },
    {
      "sha": "a65ddad5f507862d3e7b08870b97e62a2a47ee9f",
      "filename": "gas/doc/as.texi",
      "status": "modified",
      "additions": 3,
      "deletions": 4,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/doc/as.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/doc/as.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/as.texi?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -7129,13 +7129,12 @@ building a shared library.  If you are attempting to override a versioned\n symbol from a shared library, then @var{nodename} should correspond to the\n nodename of the symbol you are trying to override.  The optional argument\n @var{visibility} updates the visibility of the original symbol.  The valid\n-visibilities are @code{local}, @code {hidden}, and @code {remove}.  The\n+visibilities are @code{local}, @code{hidden}, and @code{remove}.  The\n @code{local} visibility makes the original symbol a local symbol\n (@pxref{Local}).  The @code{hidden} visibility sets the visibility of the\n original symbol to @code{hidden} (@pxref{Hidden}).  The @code{remove}\n-visibility removes the original symbol from the symbol table if it isn't\n-used in relocation.  If visibility isn't specified, the original symbol\n-is unchanged.\n+visibility removes the original symbol from the symbol table.  If visibility\n+isn't specified, the original symbol is unchanged.\n \n If the symbol @var{name} is not defined within the file being assembled, all\n references to @var{name} will be changed to @var{name2@@nodename}.  If no"
    },
    {
      "sha": "caa76e167da58735b8941e509374164be285b36e",
      "filename": "gas/testsuite/gas/symver/symver11.d",
      "status": "modified",
      "additions": 1,
      "deletions": 7,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver11.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver11.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/symver/symver11.d?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -1,8 +1,2 @@\n-#readelf: -rsW\n #name: symver symver11\n-\n-#...\n-[0-9a-f]+ +[0-9a-f]+ +R_.* +[0-9a-f]+ +foo *.*\n-#...\n- +[0-9]+: +0+ +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +foo\n-#pass\n+#error: .*symbol cannot be used on reloc"
    },
    {
      "sha": "2c7c6e7f6bdaf5fa5398b00e2168a6bfc3273b1b",
      "filename": "gas/testsuite/gas/symver/symver11.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver11.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver11.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/symver/symver11.s?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -1,5 +1,5 @@\n \t.data\n-\t.globl foo\n+\t.weak foo\n \t.type foo,%object\n foo:\n \t.byte 0"
    },
    {
      "sha": "2e956a6a1b6c12f35c7af684e799ac89d9dec06c",
      "filename": "gas/testsuite/gas/symver/symver7.d",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver7.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/31c89d6038f2658f5e06a762aa9e20e78e74651f/gas/testsuite/gas/symver/symver7.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/symver/symver7.d?ref=31c89d6038f2658f5e06a762aa9e20e78e74651f",
      "patch": "@@ -3,6 +3,7 @@\n \n #...\n  +[0-9]+: +0+ +1 +OBJECT +GLOBAL +HIDDEN +[0-9]+ +foo\n+#...\n  +[0-9]+: +0+ +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +foo@version1\n  +[0-9]+: +0+ +1 +OBJECT +GLOBAL +DEFAULT +[0-9]+ +foo@@version2\n #pass"
    }
  ]
}