{
  "sha": "15ccbdd717530f81f545a716f0df1de62aee1157",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTVjY2JkZDcxNzUzMGY4MWY1NDVhNzE2ZjBkZjFkZTYyYWVlMTE1Nw==",
  "commit": {
    "author": {
      "name": "Tamar Christina",
      "email": "tamar.christina@arm.com",
      "date": "2020-04-01T09:40:07Z"
    },
    "committer": {
      "name": "Tamar Christina",
      "email": "tamar.christina@arm.com",
      "date": "2020-04-01T09:52:32Z"
    },
    "message": "Arm: Fix thumb2 PLT branch offsets.\n\nWhen I previously changed these offsets I had incorrectly used an offset of -2\nfor this Thumb2 PLT.  Unfortunately because we had no tests for this PLT I had\nmissed that the result was incorrect.\n\nThis patch fixes the offset to PC .-4 so that it correctly addresses the\nprevious instruction and adds a test for this PLT stub.\n\nbfd/ChangeLog:\n\n\t* elf32-arm.c (elf32_thumb2_plt_entry): Fix PC-rel offset.\n\nld/ChangeLog:\n\n\t* testsuite/ld-arm/arm-elf.exp (thumb-plt): New.\n\t* testsuite/ld-arm/thumb-plt.d: New test.\n\t* testsuite/ld-arm/thumb-plt.s: New test.",
    "tree": {
      "sha": "b54513be2b1a192572032eb32a8c3a52aecaef51",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b54513be2b1a192572032eb32a8c3a52aecaef51"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/15ccbdd717530f81f545a716f0df1de62aee1157",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/15ccbdd717530f81f545a716f0df1de62aee1157",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/15ccbdd717530f81f545a716f0df1de62aee1157",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/15ccbdd717530f81f545a716f0df1de62aee1157/comments",
  "author": {
    "login": "TamarChristinaArm",
    "id": 48126768,
    "node_id": "MDQ6VXNlcjQ4MTI2NzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TamarChristinaArm",
    "html_url": "https://github.com/TamarChristinaArm",
    "followers_url": "https://api.github.com/users/TamarChristinaArm/followers",
    "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}",
    "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions",
    "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs",
    "repos_url": "https://api.github.com/users/TamarChristinaArm/repos",
    "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "TamarChristinaArm",
    "id": 48126768,
    "node_id": "MDQ6VXNlcjQ4MTI2NzY4",
    "avatar_url": "https://avatars.githubusercontent.com/u/48126768?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/TamarChristinaArm",
    "html_url": "https://github.com/TamarChristinaArm",
    "followers_url": "https://api.github.com/users/TamarChristinaArm/followers",
    "following_url": "https://api.github.com/users/TamarChristinaArm/following{/other_user}",
    "gists_url": "https://api.github.com/users/TamarChristinaArm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/TamarChristinaArm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/TamarChristinaArm/subscriptions",
    "organizations_url": "https://api.github.com/users/TamarChristinaArm/orgs",
    "repos_url": "https://api.github.com/users/TamarChristinaArm/repos",
    "events_url": "https://api.github.com/users/TamarChristinaArm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/TamarChristinaArm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "40bd13ced9c03c74af9d55a98d6e06ddcf11429c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/40bd13ced9c03c74af9d55a98d6e06ddcf11429c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/40bd13ced9c03c74af9d55a98d6e06ddcf11429c"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 66,
    "deletions": 2
  },
  "files": [
    {
      "sha": "1998e227d6da2cd9e1eb6210e029e42b839e711b",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -1,3 +1,7 @@\n+2020-04-01  Tamar Christina  <tamar.christina@arm.com>\n+\n+\t* elf32-arm.c (elf32_thumb2_plt_entry): Fix PC-rel offset.\n+\n 2020-04-01  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \t* mmo.c (mmo_scan): Create .text section only when needed, not"
    },
    {
      "sha": "0036ff96e593456e602c47775f1695fc0e629ea7",
      "filename": "bfd/elf32-arm.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/bfd/elf32-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/bfd/elf32-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-arm.c?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -2453,8 +2453,8 @@ static const bfd_vma elf32_thumb2_plt_entry [] =\n   0x0c00f240,\t\t/* movw\t   ip, #0xNNNN\t  */\n   0x0c00f2c0,\t\t/* movt\t   ip, #0xNNNN\t  */\n   0xf8dc44fc,\t\t/* add\t   ip, pc\t  */\n-  0xe7fdf000\t\t/* ldr.w   pc, [ip]\t  */\n-\t\t\t/* b      .-2\t\t  */\n+  0xe7fcf000\t\t/* ldr.w   pc, [ip]\t  */\n+\t\t\t/* b      .-4\t\t  */\n };\n \n /* The format of the first entry in the procedure linkage table"
    },
    {
      "sha": "ef4045aeea9916c103f8cd2fcd0f6bf4aa79393b",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -1,3 +1,9 @@\n+2020-04-01  Tamar Christina  <tamar.christina@arm.com>\n+\n+\t* testsuite/ld-arm/arm-elf.exp (thumb-plt): New.\n+\t* testsuite/ld-arm/thumb-plt.d: New test.\n+\t* testsuite/ld-arm/thumb-plt.s: New test.\n+\n 2020-04-01  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \t* testsuite/ld-scripts/defined4.d: Don't xfail mmix-*-*."
    },
    {
      "sha": "99a313999e7327fbeb0c344af4a66d2ee73771b6",
      "filename": "ld/testsuite/ld-arm/arm-elf.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/arm-elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/arm-elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/arm-elf.exp?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -1268,3 +1268,5 @@ run_dump_test \"non-contiguous-arm3\"\n run_dump_test \"non-contiguous-arm4\"\n run_dump_test \"non-contiguous-arm5\"\n run_dump_test \"non-contiguous-arm6\"\n+\n+run_dump_test \"thumb-plt\""
    },
    {
      "sha": "441325b21db33bb12dfb21ca1d19045b951ba9fd",
      "filename": "ld/testsuite/ld-arm/thumb-plt.d",
      "status": "added",
      "additions": 34,
      "deletions": 0,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/thumb-plt.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/thumb-plt.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/thumb-plt.d?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -0,0 +1,34 @@\n+#source: thumb-plt.s\n+#name: Thumb only PLT and GOT\n+#ld: -shared -e0\n+#objdump: -dr\n+#skip: *-*-pe *-*-wince *-*-vxworks armeb-*-* *-*-gnueabihf\n+\n+.*: +file format .*arm.*\n+\n+\n+Disassembly of section \\.plt:\n+\n+00000110 <\\.plt>:\n+ 110:\tb500      \tpush\t{lr}\n+ 112:\tf8df e008 \tldr.w\tlr, \\[pc, #8\\]\t; 11c <\\.plt\\+0xc>\n+ 116:\t44fe      \tadd\tlr, pc\n+ 118:\tf85e ff08 \tldr.w\tpc, \\[lr, #8\\]!\n+ 11c:\t0001009c \t\\.word\t0x0001009c\n+\n+00000120 <foo@plt>:\n+ 120:\tf240 0c98 \tmovw\tip, #152\t; 0x98\n+ 124:\tf2c0 0c01 \tmovt\tip, #1\n+ 128:\t44fc      \tadd\tip, pc\n+ 12a:\tf8dc f000 \tldr.w\tpc, \\[ip\\]\n+ 12e:\te7fc      \tb.n\t12a <foo@plt\\+0xa>\n+\n+Disassembly of section .text:\n+\n+00000130 <bar>:\n+ 130:\tb580      \tpush\t{r7, lr}\n+ 132:\taf00      \tadd\tr7, sp, #0\n+ 134:\tf7ff fff4 \tbl\t120 <foo@plt>\n+ 138:\t4603      \tmov\tr3, r0\n+ 13a:\t4618      \tmov\tr0, r3\n+ 13c:\tbd80      \tpop\t{r7, pc}"
    },
    {
      "sha": "e3fd80f0f1d34ac1cdc1c46752aa8786e09ed9e5",
      "filename": "ld/testsuite/ld-arm/thumb-plt.s",
      "status": "added",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/thumb-plt.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/15ccbdd717530f81f545a716f0df1de62aee1157/ld/testsuite/ld-arm/thumb-plt.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/thumb-plt.s?ref=15ccbdd717530f81f545a716f0df1de62aee1157",
      "patch": "@@ -0,0 +1,18 @@\n+\t.cpu cortex-m3\n+\t.text\n+\t.align\t1\n+\t.global\tbar\n+\t.arch armv7-m\n+\t.syntax unified\n+\t.thumb\n+\t.thumb_func\n+\t.fpu softvfp\n+\t.type\tbar, %function\n+bar:\n+\tpush\t{r7, lr}\n+\tadd\tr7, sp, #0\n+\tbl\tfoo(PLT)\n+\tmov\tr3, r0\n+\tmov\tr0, r3\n+\tpop\t{r7, pc}\n+\t.size\tbar, .-bar"
    }
  ]
}