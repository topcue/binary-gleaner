{
  "sha": "cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2VkZmM3NzQ4NWRiYjU2NjYxOWRjMWUyZDcyOWNlMGE3MGQxYTRhZA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-12-16T00:01:34Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-12-16T07:03:53Z"
    },
    "message": "ubsan: bfin: left shift of negative value\n\n\t* bfin-dis.c (fmtconst, fmtconst_val): Avoid signed overflow.",
    "tree": {
      "sha": "1831ca7e415295691de2a88b77c25a09e8f0cc85",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1831ca7e415295691de2a88b77c25a09e8f0cc85"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4bdb25fe6902963ca9cf91d6b2688cf888527bf8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4bdb25fe6902963ca9cf91d6b2688cf888527bf8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4bdb25fe6902963ca9cf91d6b2688cf888527bf8"
    }
  ],
  "stats": {
    "total": 21,
    "additions": 12,
    "deletions": 9
  },
  "files": [
    {
      "sha": "ca476060e93bc8a9122094a2dab2a2612bc857b5",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
      "patch": "@@ -1,3 +1,7 @@\n+2019-12-16  Alan Modra  <amodra@gmail.com>\n+\n+\t* bfin-dis.c (fmtconst, fmtconst_val): Avoid signed overflow.\n+\n 2019-12-16  Alan Modra  <amodra@gmail.com>\n \n \t* nds32-dis.c (print_insn16, print_insn32): Remove forward decls."
    },
    {
      "sha": "19ce42601453a092f6977fe359834c14a8066eec",
      "filename": "opcodes/bfin-dis.c",
      "status": "modified",
      "additions": 8,
      "deletions": 9,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad/opcodes/bfin-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cedfc77485dbb566619dc1e2d729ce0a70d1a4ad/opcodes/bfin-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/bfin-dis.c?ref=cedfc77485dbb566619dc1e2d729ce0a70d1a4ad",
      "patch": "@@ -128,7 +128,8 @@ fmtconst (const_forms_t cf, TIword x, bfd_vma pc, disassemble_info *outf)\n \n       if (constant_formats[cf].pcrel)\n \tx = SIGNEXTEND (x, constant_formats[cf].nbits);\n-      ea = (x + constant_formats[cf].offset) << constant_formats[cf].scale;\n+      ea = x + constant_formats[cf].offset;\n+      ea = ea << constant_formats[cf].scale;\n       if (constant_formats[cf].pcrel)\n \tea += pc;\n \n@@ -152,17 +153,14 @@ fmtconst (const_forms_t cf, TIword x, bfd_vma pc, disassemble_info *outf)\n     {\n       int nb = constant_formats[cf].nbits + 1;\n \n-      x = x | (1 << constant_formats[cf].nbits);\n+      x = x | (1ul << constant_formats[cf].nbits);\n       x = SIGNEXTEND (x, nb);\n     }\n   else if (constant_formats[cf].issigned)\n     x = SIGNEXTEND (x, constant_formats[cf].nbits);\n \n-  if (constant_formats[cf].offset)\n-    x += constant_formats[cf].offset;\n-\n-  if (constant_formats[cf].scale)\n-    x <<= constant_formats[cf].scale;\n+  x += constant_formats[cf].offset;\n+  x = (unsigned long) x << constant_formats[cf].scale;\n \n   if (constant_formats[cf].decimal)\n     sprintf (buf, \"%*li\", constant_formats[cf].leading, x);\n@@ -186,7 +184,8 @@ fmtconst_val (const_forms_t cf, unsigned int x, unsigned int pc)\n \n       if (constant_formats[cf].pcrel)\n \tx = SIGNEXTEND (x, constant_formats[cf].nbits);\n-      ea = (x + constant_formats[cf].offset) << constant_formats[cf].scale;\n+      ea = x + constant_formats[cf].offset;\n+      ea = ea << constant_formats[cf].scale;\n       if (constant_formats[cf].pcrel)\n \tea += pc;\n \n@@ -197,7 +196,7 @@ fmtconst_val (const_forms_t cf, unsigned int x, unsigned int pc)\n   if (constant_formats[cf].negative)\n     {\n       int nb = constant_formats[cf].nbits + 1;\n-      x = x | (1u << constant_formats[cf].nbits);\n+      x = x | (1ul << constant_formats[cf].nbits);\n       x = SIGNEXTEND (x, nb);\n     }\n   else if (constant_formats[cf].issigned)"
    }
  ]
}