{
  "sha": "115ac53b852ed91e23d97e8357f24216609fa86f",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTE1YWM1M2I4NTJlZDkxZTIzZDk3ZTgzNTdmMjQyMTY2MDlmYTg2Zg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-22T18:07:13Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-25T13:48:48Z"
    },
    "message": "Remove \"data_content\" and \"data_content_count\" from TUI data window\n\nThe TUI has some stub code for adding data other than registers to the\ndata window.  However, it doesn't do anything, and apparently never\nhas.  This removes the dead code.\n\ngdb/ChangeLog\n2019-06-25  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-data.c (tui_data_item_window): Update.\n\t* tui/tui-windata.h (tui_check_data_values): Don't declare.\n\t* tui/tui-windata.c (tui_display_all_data)\n\t(tui_display_data_from_line): Update.\n\t(tui_check_data_values): Remove.\n\t* tui/tui-regs.c (tui_show_register_group)\n\t(tui_display_reg_element_at_line): Update.\n\t* tui/tui-hooks.c (tui_register_changed)\n\t(tui_refresh_frame_and_register_information): Call\n\ttui_check_register_values.\n\t* tui/tui-data.h (struct tui_data_window) <data_content,\n\tdata_content_count, data_type>: Remove.\n\t(enum tui_data_type): Remove.",
    "tree": {
      "sha": "eafc89b461c1ea3fe593dc863c75eaa0468d930a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/eafc89b461c1ea3fe593dc863c75eaa0468d930a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/115ac53b852ed91e23d97e8357f24216609fa86f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/115ac53b852ed91e23d97e8357f24216609fa86f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/115ac53b852ed91e23d97e8357f24216609fa86f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/115ac53b852ed91e23d97e8357f24216609fa86f/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "eaf9738bedf8de68d4bf8eafd0689cf1973648aa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eaf9738bedf8de68d4bf8eafd0689cf1973648aa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/eaf9738bedf8de68d4bf8eafd0689cf1973648aa"
    }
  ],
  "stats": {
    "total": 120,
    "additions": 25,
    "deletions": 95
  },
  "files": [
    {
      "sha": "47972a69328a0abaaf399fbb360e887b3d83b3cb",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -1,3 +1,22 @@\n+2019-06-25  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-data.c (tui_data_item_window): Update.\n+\t* tui/tui-windata.h (tui_check_data_values): Don't declare.\n+\t* tui/tui-windata.c (tui_display_all_data)\n+\t(tui_display_data_from_line): Update.\n+\t(tui_check_data_values): Remove.\n+\t* tui/tui-regs.c (tui_show_register_group)\n+\t(tui_display_reg_element_at_line): Update.\n+\t* tui/tui-hooks.c (tui_register_changed)\n+\t(tui_refresh_frame_and_register_information): Call\n+\ttui_check_register_values.\n+\t* tui/tui-data.h (struct tui_data_window) <data_content,\n+\tdata_content_count, data_type>: Remove.\n+\t(enum tui_data_type): Remove.\n+\n+\t* tui/tui-data.c (tui_data_window::clear_detail)\n+\t(~tui_data_window): Update.\n+\n 2019-06-25  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-windata.h (tui_first_data_item_displayed): Don't"
    },
    {
      "sha": "5cf5433b191d19dfc5ff7c14dae83fbcd8a88313",
      "filename": "gdb/tui/tui-data.c",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-data.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-data.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.c?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -175,8 +175,6 @@ tui_cmd_window::clear_detail ()\n void\n tui_data_window::clear_detail ()\n {\n-  data_content = NULL;\n-  data_content_count = 0;\n   regs_content = NULL;\n   regs_content_count = 0;\n   regs_column_count = 1;\n@@ -485,9 +483,6 @@ tui_data_window::~tui_data_window ()\n       tui_free_data_content (regs_content, regs_content_count);\n       regs_content = NULL;\n       regs_content_count = 0;\n-      tui_free_data_content (data_content, data_content_count);\n-      data_content = NULL;\n-      data_content_count = 0;\n       regs_column_count = 1;\n       display_regs = false;\n       content = NULL;\n@@ -567,8 +562,6 @@ free_content (tui_win_content content,\n \n tui_data_item_window::~tui_data_item_window ()\n {\n-  if (data_type != TUI_REGISTER)\n-    xfree ((void *) name);\n   xfree (value);\n   xfree (content);\n }"
    },
    {
      "sha": "7cbe3761fc84c3130b573af05220a0afd5d00c35",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 0,
      "deletions": 13,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -146,15 +146,6 @@ enum tui_layout_type\n   UNDEFINED_LAYOUT\n };\n \n-/* Basic data types that can be displayed in the data window.  */\n-enum tui_data_type\n-{\n-  TUI_REGISTER,\n-  TUI_SCALAR,\n-  TUI_COMPLEX,\n-  TUI_STRUCT\n-};\n-\n enum tui_line_or_address_kind\n {\n   LOA_LINE,\n@@ -282,7 +273,6 @@ struct tui_data_item_window : public tui_gen_win_info\n   const char *name = nullptr;\n   /* The register number, or data display number.  */\n   int item_no = UNDEFINED_ITEM;\n-  enum tui_data_type data_type = TUI_REGISTER;\n   void *value = nullptr;\n   bool highlight = false;\n   char *content = nullptr;\n@@ -487,9 +477,6 @@ struct tui_data_window : public tui_win_info\n     return DATA_NAME;\n   }\n \n-  /* Start of data display content.  */\n-  tui_win_content data_content = NULL;\n-  int data_content_count = 0;\n   /* Start of regs display content.  */\n   tui_win_content regs_content = NULL;\n   int regs_content_count = 0;"
    },
    {
      "sha": "9bac4a883aa7975b09e52e1de00f6d2fc622dbea",
      "filename": "gdb/tui/tui-hooks.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-hooks.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-hooks.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-hooks.c?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -81,7 +81,7 @@ tui_register_changed (struct frame_info *frame, int regno)\n   if (tui_refreshing_registers == 0)\n     {\n       tui_refreshing_registers = 1;\n-      tui_check_data_values (fi);\n+      tui_check_register_values (fi);\n       tui_refreshing_registers = 0;\n     }\n }\n@@ -153,7 +153,7 @@ tui_refresh_frame_and_register_information (int registers_too_p)\n       && (frame_info_changed_p || registers_too_p))\n     {\n       tui_refreshing_registers = 1;\n-      tui_check_data_values (fi);\n+      tui_check_register_values (fi);\n       tui_refreshing_registers = 0;\n     }\n }"
    },
    {
      "sha": "c3970caa5a62356a1de94e220bd12cca9969a050",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 3,
      "deletions": 6,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -270,8 +270,7 @@ tui_show_register_group (struct reggroup *group,\n           pos++;\n \t}\n \n-      TUI_DATA_WIN->content_size =\n-\tTUI_DATA_WIN->regs_content_count + TUI_DATA_WIN->data_content_count;\n+      TUI_DATA_WIN->content_size = TUI_DATA_WIN->regs_content_count;\n       ret = TUI_SUCCESS;\n     }\n \n@@ -395,12 +394,10 @@ tui_display_reg_element_at_line (int start_element_no,\n \t  if (first_line_on_last_page < 0)\n \t    first_line_on_last_page = 0;\n \n-\t  /* If there is no other data displayed except registers, and\n-\t     the element_no causes us to scroll past the end of the\n+\t  /* If the element_no causes us to scroll past the end of the\n \t     registers, adjust what element to really start the\n \t     display at.  */\n-\t  if (TUI_DATA_WIN->data_content_count <= 0\n-\t      && start_line_no > first_line_on_last_page)\n+\t  if (start_line_no > first_line_on_last_page)\n \t    element_no\n \t      = tui_first_reg_element_no_inline (first_line_on_last_page);\n \t}"
    },
    {
      "sha": "23510f6da8494420bd621e4791df9b73779eb337",
      "filename": "gdb/tui/tui-windata.c",
      "status": "modified",
      "additions": 1,
      "deletions": 66,
      "changes": 67,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-windata.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-windata.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-windata.c?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -112,12 +112,6 @@ tui_display_all_data (void)\n       tui_delete_data_content_windows ();\n       tui_check_and_display_highlight_if_needed (TUI_DATA_WIN);\n       tui_display_registers_from (0);\n-\n-      /* Then display the other data.  */\n-      if (TUI_DATA_WIN->data_content != NULL\n-\t  && TUI_DATA_WIN->data_content_count > 0)\n-\t{\n-\t}\n     }\n }\n \n@@ -134,31 +128,7 @@ tui_display_data_from_line (int line_no)\n \n   tui_check_and_display_highlight_if_needed (TUI_DATA_WIN);\n \n-  /* There is no general data, force regs to display (if there are\n-     any).  */\n-  if (TUI_DATA_WIN->data_content_count <= 0)\n-    tui_display_registers_from_line (_line_no, TRUE);\n-  else\n-    {\n-      int regs_last_line = tui_last_regs_line_no ();\n-\n-\n-      /* Display regs if we can.  */\n-      if (tui_display_registers_from_line (_line_no, FALSE) < 0)\n-\t{ /* _line_no is past the regs display, so calc where the\n-\t     start data element is.  */\n-\t  if (regs_last_line < _line_no)\n-\t    { /* Figure out how many lines each element is to obtain\n-\t\t the start element_no.  */\n-\t    }\n-\t}\n-      else\n-\t{ /* Calculate the starting element of the data display, given\n-\t     regs_last_line and how many lines each element is, up to\n-\t     _line_no.  */\n-\t}\n-      /* Now display the data , starting at element_no.  */\n-    }\n+  tui_display_registers_from_line (_line_no, TRUE);\n }\n \n \n@@ -199,41 +169,6 @@ tui_data_window::refresh_all ()\n }\n \n \n-/* Function to check the data values and hilite any that have\n-   changed.  */\n-void\n-tui_check_data_values (struct frame_info *frame)\n-{\n-  tui_check_register_values (frame);\n-\n-  /* Now check any other data values that there are.  */\n-  if (TUI_DATA_WIN != NULL && TUI_DATA_WIN->is_visible)\n-    {\n-      int i;\n-\n-      for (i = 0; TUI_DATA_WIN->data_content_count; i++)\n-\t{\n-#ifdef LATER\n-\t  tui_data_element_ptr data_element_ptr;\n-\t  struct tui_gen_win_info *data_item_win_ptr;\n-\t  Opaque new_value;\n-\n-\t  data_item_ptr = &TUI_DATA_WIN->\n-\t    data_content[i]->which_element.data_window;\n-\t  data_element_ptr = &((tui_win_content)\n-\t\t\t       data_item_win_ptr->content)[0]->which_element.data;\n-\t  if value\n-\t    has changed (data_element_ptr, frame, &new_value)\n-\t    {\n-\t      data_element_ptr->value = new_value;\n-\t      update the display with the newobj value, hiliting it.\n-\t    }\n-#endif\n-\t}\n-    }\n-}\n-\n-\n /* Scroll the data window vertically forward or backward.  */\n void\n tui_data_window::do_scroll_vertical (int num_to_scroll)"
    },
    {
      "sha": "1aba67520ecd1d18dfe2606b5db48e9d6da21487",
      "filename": "gdb/tui/tui-windata.h",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-windata.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/115ac53b852ed91e23d97e8357f24216609fa86f/gdb/tui/tui-windata.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-windata.h?ref=115ac53b852ed91e23d97e8357f24216609fa86f",
      "patch": "@@ -26,7 +26,6 @@\n \n extern void tui_erase_data_content (const char *);\n extern void tui_display_all_data (void);\n-extern void tui_check_data_values (struct frame_info *);\n extern void tui_display_data_from_line (int);\n extern void tui_delete_data_content_windows (void);\n extern void tui_refresh_data_win (void);"
    }
  ]
}