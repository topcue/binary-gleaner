{
  "sha": "d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDZmZjA0YTM0M2Y5NzAyNmY3ZDIzYmIwMzZlMGY4NThiMjFmM2JmZA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-26T01:38:51Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-06-26T01:38:51Z"
    },
    "message": "gdb: add assert in cmd_list_element::set_context\n\nIf something tries to set a context pointer on a cmd_list_element and\nm_context is not nullptr, it's likely that two parts of the code are\ntrying to set different contexts, and one will overwrite the other.\nThis is almost guaranteed to lead to bad behavior or a crash, as one of\nthe spots will not be using the data it expects.  This happened to me\nduring development, so I think having this assert would be useful to\ncatch this problem earlier.\n\ngdb/ChangeLog:\n\n\t* cli/cli-decode.h (struct cmd_list_element) <set_context>: Add\n\tassert.\n\nChange-Id: I1f2e9fda1bf2bec1b732c9b90e7d7910a97f2ac6",
    "tree": {
      "sha": "fba88a27803f0729e6e5193e3a62eef51e5df8fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fba88a27803f0729e6e5193e3a62eef51e5df8fb"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d6ff04a343f97026f7d23bb036e0f858b21f3bfd/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0f8e2034128e4a73e02cb8311eeeea7e886a5985",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0f8e2034128e4a73e02cb8311eeeea7e886a5985",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0f8e2034128e4a73e02cb8311eeeea7e886a5985"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 9,
    "deletions": 1
  },
  "files": [
    {
      "sha": "6ba91d8ec6ef43c6ea495dfa6cb78f0332682537",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6ff04a343f97026f7d23bb036e0f858b21f3bfd/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6ff04a343f97026f7d23bb036e0f858b21f3bfd/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
      "patch": "@@ -1,3 +1,8 @@\n+2021-06-25  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* cli/cli-decode.h (struct cmd_list_element) <set_context>: Add\n+\tassert.\n+\n 2021-06-25  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* cli/cli-decode.h (struct cmd_list_element) <set_context,"
    },
    {
      "sha": "241535ae5b5003b5f73b7bc8660de4bec4e7a290",
      "filename": "gdb/cli/cli-decode.h",
      "status": "modified",
      "additions": 4,
      "deletions": 1,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6ff04a343f97026f7d23bb036e0f858b21f3bfd/gdb/cli/cli-decode.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6ff04a343f97026f7d23bb036e0f858b21f3bfd/gdb/cli/cli-decode.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-decode.h?ref=d6ff04a343f97026f7d23bb036e0f858b21f3bfd",
      "patch": "@@ -94,7 +94,10 @@ struct cmd_list_element\n   { return this->func == nullptr; }\n \n   void set_context (void *context)\n-  { m_context = context; }\n+  {\n+    gdb_assert (m_context == nullptr);\n+    m_context = context;\n+  }\n \n   void *context () const\n   { return m_context; }"
    }
  ]
}