{
  "sha": "e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZTE0OGI3MzAxMzEwOTUxN2M0ZDE3OWFhOWFlNWE1MGI2ZDFkZDViNQ==",
  "commit": {
    "author": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2020-06-04T17:07:38Z"
    },
    "committer": {
      "name": "Nick Alcock",
      "email": "nick.alcock@oracle.com",
      "date": "2020-07-22T17:02:18Z"
    },
    "message": "libctf: drop error-prone ctf_strerror\n\nThis utility function is almost useless (all it does is casts the result\nof a strerror) but has a seriously confusing name.  Over and over again\nI have accidentally called it instead of ctf_errmsg, and hidden a\ntime-bomb for myself in a hard-to-test error-handling path: since\nctf_strerror is just a strerror wrapper, it cannot handle CTF errnos,\nunlike ctf_errmsg.  It's astonishingly lucky that none of these errors\nhave crept into any commits to date.\n\nFuse it into ctf_errmsg and drop it.\n\nlibctf/\n\t* ctf-impl.h (ctf_strerror): Delete.\n\t* ctf-subr.c (ctf_strerror): Likewise.\n\t* ctf-error.c (ctf_errmsg): Stop using ctf_strerror: just use\n\tstrerror directly.",
    "tree": {
      "sha": "f35a67a172a16852efc56d6d1fdbb586cf307dcc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/f35a67a172a16852efc56d6d1fdbb586cf307dcc"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/comments",
  "author": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickalcock",
    "id": 6503005,
    "node_id": "MDQ6VXNlcjY1MDMwMDU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6503005?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickalcock",
    "html_url": "https://github.com/nickalcock",
    "followers_url": "https://api.github.com/users/nickalcock/followers",
    "following_url": "https://api.github.com/users/nickalcock/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickalcock/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickalcock/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickalcock/subscriptions",
    "organizations_url": "https://api.github.com/users/nickalcock/orgs",
    "repos_url": "https://api.github.com/users/nickalcock/repos",
    "events_url": "https://api.github.com/users/nickalcock/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickalcock/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1fa7a0c24e78e7f7995a3fa608c9f97a6ccbe1b6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1fa7a0c24e78e7f7995a3fa608c9f97a6ccbe1b6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1fa7a0c24e78e7f7995a3fa608c9f97a6ccbe1b6"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 9,
    "deletions": 8
  },
  "files": [
    {
      "sha": "d54af359ec5dd2cbd64570a7f6cfb1213a46cd30",
      "filename": "libctf/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ChangeLog?ref=e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
      "patch": "@@ -1,3 +1,10 @@\n+2020-07-22  Nick Alcock  <nick.alcock@oracle.com>\n+\n+\t* ctf-impl.h (ctf_strerror): Delete.\n+\t* ctf-subr.c (ctf_strerror): Likewise.\n+\t* ctf-error.c (ctf_errmsg): Stop using ctf_strerror: just use\n+\tstrerror directly.\n+\n 2020-07-22  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* ctf-impl.c (ctf_file_t) <ctf_parent_unreffed>: New."
    },
    {
      "sha": "20971f4275b2fdf76f228229c59ba5c7006bc0a6",
      "filename": "libctf/ctf-error.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-error.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-error.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-error.c?ref=e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
      "patch": "@@ -19,6 +19,7 @@\n \n #include <ctf-impl.h>\n #include <stddef.h>\n+#include <string.h>\n \n /* This construct is due to Bruno Haible: much thanks.  */\n \n@@ -67,7 +68,7 @@ ctf_errmsg (int error)\n   if (error >= ECTF_BASE && (error - ECTF_BASE) < ECTF_NERR)\n     str = _ctf_errlist.str + _ctf_erridx[error - ECTF_BASE];\n   else\n-    str = ctf_strerror (error);\n+    str = (const char *) strerror (error);\n \n   return (str ? str : \"Unknown error\");\n }"
    },
    {
      "sha": "71b732a2775866466e44cbc982e57e6d055b169a",
      "filename": "libctf/ctf-impl.h",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-impl.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-impl.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-impl.h?ref=e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
      "patch": "@@ -548,7 +548,6 @@ extern ssize_t ctf_pread (int fd, void *buf, ssize_t count, off_t offset);\n extern void *ctf_realloc (ctf_file_t *, void *, size_t);\n extern char *ctf_str_append (char *, const char *);\n extern char *ctf_str_append_noerr (char *, const char *);\n-extern const char *ctf_strerror (int);\n \n extern ctf_id_t ctf_type_resolve_unsliced (ctf_file_t *, ctf_id_t);\n extern int ctf_type_kind_unsliced (ctf_file_t *, ctf_id_t);"
    },
    {
      "sha": "455f18dcffbbd20e9f1b8f1da89177494997b40b",
      "filename": "libctf/ctf-subr.c",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-subr.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e148b73013109517c4d179aa9ae5a50b6d1dd5b5/libctf/ctf-subr.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-subr.c?ref=e148b73013109517c4d179aa9ae5a50b6d1dd5b5",
      "patch": "@@ -122,12 +122,6 @@ ctf_pread (int fd, void *buf, ssize_t count, off_t offset)\n   return acc;\n }\n \n-const char *\n-ctf_strerror (int err)\n-{\n-  return (const char *) (strerror (err));\n-}\n-\n /* Set the CTF library client version to the specified version.  If version is\n    zero, we just return the default library version number.  */\n int"
    }
  ]
}