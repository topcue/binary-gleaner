{
  "sha": "58349d00f461904f20dae88d48c1fda11cbb47bc",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTgzNDlkMDBmNDYxOTA0ZjIwZGFlODhkNDhjMWZkYTExY2JiNDdiYw==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-11-26T00:14:13Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2020-11-26T00:14:29Z"
    },
    "message": "elf: Get the real kept section\n\nWhen mixing linkonce and comdat sections, we need to keep searching to\nget the real kept section.\n\nbfd/\n\n\tPR ld/26936\n\t* elflink.c (_bfd_elf_check_kept_section): Get the real kept\n\tsection.\n\nld/\n\n\tPR ld/26936\n\t* testsuite/ld-elf/pr26936.d: New file.\n\t* testsuite/ld-elf/pr26936a.s: Likewise.\n\t* testsuite/ld-elf/pr26936b.s: Likewise.\n\t* testsuite/ld-elf/pr26936c.s: Likewise.",
    "tree": {
      "sha": "abac11dad512c2375cb95d025c470b7e2099f833",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/abac11dad512c2375cb95d025c470b7e2099f833"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/58349d00f461904f20dae88d48c1fda11cbb47bc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/58349d00f461904f20dae88d48c1fda11cbb47bc",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/58349d00f461904f20dae88d48c1fda11cbb47bc",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/58349d00f461904f20dae88d48c1fda11cbb47bc/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "93bbe484a4fd41832383d4d781140d8cb5b18e76",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/93bbe484a4fd41832383d4d781140d8cb5b18e76",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/93bbe484a4fd41832383d4d781140d8cb5b18e76"
    }
  ],
  "stats": {
    "total": 68,
    "additions": 64,
    "deletions": 4
  },
  "files": [
    {
      "sha": "eeb0b81f2e757a57211e35af42bcba3d31366bbb",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -1,3 +1,9 @@\n+2020-11-25  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/26936\n+\t* elflink.c (_bfd_elf_check_kept_section): Get the real kept\n+\tsection.\n+\n 2020-11-23  Nick Clifton  <nickc@redhat.com>\n \n \tPR 26931"
    },
    {
      "sha": "0fbebca372ffe3a9f1ad2d2d6a8ff47d9759cfd2",
      "filename": "bfd/elflink.c",
      "status": "modified",
      "additions": 15,
      "deletions": 4,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/bfd/elflink.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/bfd/elflink.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elflink.c?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -10698,10 +10698,21 @@ _bfd_elf_check_kept_section (asection *sec, struct bfd_link_info *info)\n     {\n       if ((kept->flags & SEC_GROUP) != 0)\n \tkept = match_group_member (sec, kept, info);\n-      if (kept != NULL\n-\t  && ((sec->rawsize != 0 ? sec->rawsize : sec->size)\n-\t      != (kept->rawsize != 0 ? kept->rawsize : kept->size)))\n-\tkept = NULL;\n+      if (kept != NULL)\n+\t{\n+\t  if ((sec->rawsize != 0 ? sec->rawsize : sec->size)\n+\t      != (kept->rawsize != 0 ? kept->rawsize : kept->size))\n+\t    kept = NULL;\n+\t  else\n+\t    {\n+\t      /* Get the real kept section.  */\n+\t      asection *next;\n+\t      for (next = kept->kept_section;\n+\t\t   next != NULL;\n+\t\t   next = next->kept_section)\n+\t\tkept = next;\n+\t    }\n+\t}\n       sec->kept_section = kept;\n     }\n   return kept;"
    },
    {
      "sha": "005d54e80da9a235ae7ad82d0d36ead1506264a8",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -1,3 +1,11 @@\n+2020-11-25  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/26936\n+\t* testsuite/ld-elf/pr26936.d: New file.\n+\t* testsuite/ld-elf/pr26936a.s: Likewise.\n+\t* testsuite/ld-elf/pr26936b.s: Likewise.\n+\t* testsuite/ld-elf/pr26936c.s: Likewise.\n+\n 2020-11-25  Alan Modra  <amodra@gmail.com>\n \n \t* ldlang.c (lang_output_section_statement_lookup): Change \"create\""
    },
    {
      "sha": "b007e83ff203a8d23e843c17142c05c16c3ba684",
      "filename": "ld/testsuite/ld-elf/pr26936.d",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/pr26936.d?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -0,0 +1,12 @@\n+#source: pr26936a.s\n+#source: pr26936b.s\n+#source: pr26936c.s\n+#as: -g\n+#ld: -z noseparate-code -Ttext-segment 0x10000 -z max-page-size=0x1000\n+#readelf: -wL\n+\n+#...\n+CU: .*/pr26936c.s:\n+File name +Line number +Starting address +View +Stmt\n+pr26936c.s +6 +0x10[0-9a-f][0-9a-f][0-9a-f] +x\n+#pass"
    },
    {
      "sha": "24b90daa20ba2c46efb621cc1dd4c94a501dad5d",
      "filename": "ld/testsuite/ld-elf/pr26936a.s",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936a.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936a.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/pr26936a.s?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -0,0 +1,6 @@\n+\t.section .gnu.linkonce.t.__x86.get_pc_thunk.bx,\"ax\",%progbits\n+\t.globl  __x86.get_pc_thunk.bx\n+\t.hidden __x86.get_pc_thunk.bx\n+\t.type   __x86.get_pc_thunk.bx, %function\n+__x86.get_pc_thunk.bx:\n+\t.nop"
    },
    {
      "sha": "433528c33e95bd220bd4816f12a261dd7b1d7cda",
      "filename": "ld/testsuite/ld-elf/pr26936b.s",
      "status": "added",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936b.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936b.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/pr26936b.s?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -0,0 +1,11 @@\n+\t.text\n+\t.globl _start\n+_start:\n+\t.type   _start, %function\n+\t.nop\n+\t.section .text.__x86.get_pc_thunk.bx,\"axG\",%progbits,__x86.get_pc_thunk.bx,comdat\n+\t.globl  __x86.get_pc_thunk.bx\n+\t.hidden __x86.get_pc_thunk.bx\n+\t.type   __x86.get_pc_thunk.bx, %function\n+__x86.get_pc_thunk.bx:\n+\t.nop"
    },
    {
      "sha": "379cb71d159fe4aee226b31f6cd4860f46c38cf9",
      "filename": "ld/testsuite/ld-elf/pr26936c.s",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936c.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/58349d00f461904f20dae88d48c1fda11cbb47bc/ld/testsuite/ld-elf/pr26936c.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-elf/pr26936c.s?ref=58349d00f461904f20dae88d48c1fda11cbb47bc",
      "patch": "@@ -0,0 +1,6 @@\n+\t.section .text.__x86.get_pc_thunk.bx,\"axG\",%progbits,__x86.get_pc_thunk.bx,comdat\n+\t.globl  __x86.get_pc_thunk.bx\n+\t.hidden __x86.get_pc_thunk.bx\n+\t.type   __x86.get_pc_thunk.bx, %function\n+__x86.get_pc_thunk.bx:\n+\t.nop"
    }
  ]
}