{
  "sha": "39c05d9435893ed0b51c4b5c8e95fe977b983921",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzljMDVkOTQzNTg5M2VkMGI1MWM0YjVjOGU5NWZlOTc3Yjk4MzkyMQ==",
  "commit": {
    "author": {
      "name": "Szabolcs Nagy",
      "email": "szabolcs.nagy@arm.com",
      "date": "2019-06-10T15:40:54Z"
    },
    "committer": {
      "name": "Szabolcs Nagy",
      "email": "szabolcs.nagy@arm.com",
      "date": "2019-06-17T16:58:53Z"
    },
    "message": "aarch64: remove unnecessary loc_hash_table traversal\n\nThe loc_hash_table should only contain local ifunc symbols. The current\ncode already aborts if there is anything else and for defined ifunc\nsymbols elfNN_aarch64_allocate_dynrelocs is a no-op.\n\nbfd/ChangeLog:\n\n\t* elfnn-aarch64.c (elfNN_aarch64_allocate_local_dynrelocs): Remove.\n\t(elfNN_aarch64_size_dynamic_sections): Remove loc_hash_table traversal\n\twith elfNN_aarch64_allocate_local_dynrelocs.",
    "tree": {
      "sha": "923c3b06075cead58e2e6d4078c40dd25c2683f1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/923c3b06075cead58e2e6d4078c40dd25c2683f1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/39c05d9435893ed0b51c4b5c8e95fe977b983921",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/39c05d9435893ed0b51c4b5c8e95fe977b983921",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/39c05d9435893ed0b51c4b5c8e95fe977b983921",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/39c05d9435893ed0b51c4b5c8e95fe977b983921/comments",
  "author": {
    "login": "nsz-arm",
    "id": 30925343,
    "node_id": "MDQ6VXNlcjMwOTI1MzQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nsz-arm",
    "html_url": "https://github.com/nsz-arm",
    "followers_url": "https://api.github.com/users/nsz-arm/followers",
    "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/nsz-arm/orgs",
    "repos_url": "https://api.github.com/users/nsz-arm/repos",
    "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nsz-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nsz-arm",
    "id": 30925343,
    "node_id": "MDQ6VXNlcjMwOTI1MzQz",
    "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nsz-arm",
    "html_url": "https://github.com/nsz-arm",
    "followers_url": "https://api.github.com/users/nsz-arm/followers",
    "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/nsz-arm/orgs",
    "repos_url": "https://api.github.com/users/nsz-arm/repos",
    "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nsz-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "08bb0061ba5c8826c1ec4d273d539cb32b5c217e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/08bb0061ba5c8826c1ec4d273d539cb32b5c217e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/08bb0061ba5c8826c1ec4d273d539cb32b5c217e"
    }
  ],
  "stats": {
    "total": 30,
    "additions": 6,
    "deletions": 24
  },
  "files": [
    {
      "sha": "e1767fe7949ca5632ecba5fe823a9ec5c5f8ece5",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/39c05d9435893ed0b51c4b5c8e95fe977b983921/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/39c05d9435893ed0b51c4b5c8e95fe977b983921/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=39c05d9435893ed0b51c4b5c8e95fe977b983921",
      "patch": "@@ -1,3 +1,9 @@\n+2019-06-17  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\t* elfnn-aarch64.c (elfNN_aarch64_allocate_local_dynrelocs): Remove.\n+\t(elfNN_aarch64_size_dynamic_sections): Remove loc_hash_table traversal\n+\twith elfNN_aarch64_allocate_local_dynrelocs.\n+\n 2019-06-14  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n \n \t* elfnn-aarch64.c: Enable MOVW_PREL relocs for ELF32."
    },
    {
      "sha": "ba9e97c1e9be74b7911da5af4620347a9f9cc1fc",
      "filename": "bfd/elfnn-aarch64.c",
      "status": "modified",
      "additions": 0,
      "deletions": 24,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/39c05d9435893ed0b51c4b5c8e95fe977b983921/bfd/elfnn-aarch64.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/39c05d9435893ed0b51c4b5c8e95fe977b983921/bfd/elfnn-aarch64.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfnn-aarch64.c?ref=39c05d9435893ed0b51c4b5c8e95fe977b983921",
      "patch": "@@ -8860,25 +8860,6 @@ elfNN_aarch64_allocate_ifunc_dynrelocs (struct elf_link_hash_entry *h,\n   return TRUE;\n }\n \n-/* Allocate space in .plt, .got and associated reloc sections for\n-   local dynamic relocs.  */\n-\n-static bfd_boolean\n-elfNN_aarch64_allocate_local_dynrelocs (void **slot, void *inf)\n-{\n-  struct elf_link_hash_entry *h\n-    = (struct elf_link_hash_entry *) *slot;\n-\n-  if (h->type != STT_GNU_IFUNC\n-      || !h->def_regular\n-      || !h->ref_regular\n-      || !h->forced_local\n-      || h->root.type != bfd_link_hash_defined)\n-    abort ();\n-\n-  return elfNN_aarch64_allocate_dynrelocs (h, inf);\n-}\n-\n /* Allocate space in .plt, .got and associated reloc sections for\n    local ifunc dynamic relocs.  */\n \n@@ -9066,11 +9047,6 @@ elfNN_aarch64_size_dynamic_sections (bfd *output_bfd ATTRIBUTE_UNUSED,\n   elf_link_hash_traverse (&htab->root, elfNN_aarch64_allocate_ifunc_dynrelocs,\n \t\t\t  info);\n \n-  /* Allocate .plt and .got entries, and space for local symbols.  */\n-  htab_traverse (htab->loc_hash_table,\n-\t\t elfNN_aarch64_allocate_local_dynrelocs,\n-\t\t info);\n-\n   /* Allocate .plt and .got entries, and space for local ifunc symbols.  */\n   htab_traverse (htab->loc_hash_table,\n \t\t elfNN_aarch64_allocate_local_ifunc_dynrelocs,"
    }
  ]
}