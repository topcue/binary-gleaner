{
  "sha": "3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6M2IyM2M1ZjI2NjJkMzI0MGNkYzU4NmQzZDJlNWZiNmViOGNiYTRjNw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-26T21:46:38Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-17T18:18:53Z"
    },
    "message": "Introduce tui_data_window::line_from_reg_element_no method\n\nThis changes tui_line_from_reg_element_no to be a method on\ntui_data_window, allowing for the removal of some uses of the\nTUI_DATA_WIN global.  (Actually, in this particular patch, the number\nof uses is not decreased, but rather the uses are moved to spots that\nare already using the global, i.e., increasing the clustering.)\n\ngdb/ChangeLog\n2019-07-17  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-windata.c (tui_display_data_from)\n\t(tui_data_window::do_scroll_vertical): Update.\n\t* tui/tui-regs.h (tui_line_from_reg_element_no): Don't declare.\n\t* tui/tui-regs.c (tui_data_window::line_from_reg_element_no):\n\tRename from tui_line_from_reg_element_no.\n\t(tui_display_registers_from_line): Update.\n\t* tui/tui-data.h (struct tui_data_window)\n\t<line_from_reg_element_no>: New method.",
    "tree": {
      "sha": "3181cb32b78e06f3b3fdbf8f0913261040739802",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3181cb32b78e06f3b3fdbf8f0913261040739802"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0b5ec21882bcc27e93144882b84935497da6e7fe",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0b5ec21882bcc27e93144882b84935497da6e7fe",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0b5ec21882bcc27e93144882b84935497da6e7fe"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 23,
    "deletions": 10
  },
  "files": [
    {
      "sha": "9177dfd425380671ffce509968d8169e4b550ba1",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
      "patch": "@@ -1,3 +1,14 @@\n+2019-07-17  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-windata.c (tui_display_data_from)\n+\t(tui_data_window::do_scroll_vertical): Update.\n+\t* tui/tui-regs.h (tui_line_from_reg_element_no): Don't declare.\n+\t* tui/tui-regs.c (tui_data_window::line_from_reg_element_no):\n+\tRename from tui_line_from_reg_element_no.\n+\t(tui_display_registers_from_line): Update.\n+\t* tui/tui-data.h (struct tui_data_window)\n+\t<line_from_reg_element_no>: New method.\n+\n 2019-07-17  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-regs.h (tui_last_regs_line_no): Don't declare."
    },
    {
      "sha": "081d0dfa449a6b835f20e3377694cd3bd155fa69",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
      "patch": "@@ -494,6 +494,11 @@ struct tui_data_window : public tui_win_info\n      are no registers (-1) is returned.  */\n   int last_regs_line_no () const;\n \n+  /* Answer the line number that the register element at element_no is\n+     on.  If element_no is greater than the number of register\n+     elements there are, -1 is returned.  */\n+  int line_from_reg_element_no (int element_no) const;\n+\n protected:\n \n   void do_scroll_vertical (int num_to_scroll) override;"
    },
    {
      "sha": "03e91496b0f0078405849184eb6db2395e503284",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
      "patch": "@@ -79,21 +79,19 @@ tui_data_window::last_regs_line_no () const\n   return num_lines;\n }\n \n+/* See tui-data.h.  */\n \n-/* Answer the line number that the register element at element_no is\n-   on.  If element_no is greater than the number of register elements\n-   there are, -1 is returned.  */\n int\n-tui_line_from_reg_element_no (int element_no)\n+tui_data_window::line_from_reg_element_no (int element_no) const\n {\n-  if (element_no < TUI_DATA_WIN->regs_content.size ())\n+  if (element_no < regs_content.size ())\n     {\n       int i, line = (-1);\n \n       i = 1;\n       while (line == (-1))\n \t{\n-\t  if (element_no < TUI_DATA_WIN->regs_column_count * i)\n+\t  if (element_no < regs_column_count * i)\n \t    line = i - 1;\n \t  else\n \t    i++;\n@@ -391,7 +389,7 @@ tui_display_registers_from_line (int line_no,\n \t     registers.  */\n \t  if (line_no >= TUI_DATA_WIN->last_regs_line_no ())\n \t    {\n-\t      if ((line = tui_line_from_reg_element_no (\n+\t      if ((line = TUI_DATA_WIN->line_from_reg_element_no (\n \t\t TUI_DATA_WIN->regs_content.size () - 1)) < 0)\n \t\tline = 0;\n \t    }"
    },
    {
      "sha": "f6ed8628f2a8e9fe65e6fbf5b3166472b2105d2c",
      "filename": "gdb/tui/tui-regs.h",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-regs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-regs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.h?ref=3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
      "patch": "@@ -29,7 +29,6 @@ extern void tui_show_registers (struct reggroup *group);\n extern void tui_display_registers_from (int);\n extern int tui_display_registers_from_line (int, int);\n extern int tui_first_reg_element_inline (int);\n-extern int tui_line_from_reg_element_no (int);\n extern int tui_first_reg_element_no_inline (int lineno);\n \n #endif /* TUI_TUI_REGS_H */"
    },
    {
      "sha": "ac3e6d6e097d14f30dd20f838bbfdf9f6729d99f",
      "filename": "gdb/tui/tui-windata.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-windata.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7/gdb/tui/tui-windata.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-windata.c?ref=3b23c5f2662d3240cdc586d3d2e5fb6eb8cba4c7",
      "patch": "@@ -134,7 +134,7 @@ tui_display_data_from (int element_no, int reuse_windows)\n   int first_line = (-1);\n \n   if (element_no < TUI_DATA_WIN->regs_content.size ())\n-    first_line = tui_line_from_reg_element_no (element_no);\n+    first_line = TUI_DATA_WIN->line_from_reg_element_no (element_no);\n   else\n     { /* Calculate the first_line from the element number.  */\n     }\n@@ -173,7 +173,7 @@ tui_data_window::do_scroll_vertical (int num_to_scroll)\n \n   first_element_no = first_data_item_displayed ();\n   if (first_element_no < regs_content.size ())\n-    first_line = tui_line_from_reg_element_no (first_element_no);\n+    first_line = line_from_reg_element_no (first_element_no);\n   else\n     { /* Calculate the first line from the element number which is in\n         the general data content.  */"
    }
  ]
}