{
  "sha": "931452b64424e41bb51e798a6d2f12265efe12cc",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTMxNDUyYjY0NDI0ZTQxYmI1MWU3OThhNmQyZjEyMjY1ZWZlMTJjYw==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2020-07-07T06:08:09Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2020-07-07T06:08:09Z"
    },
    "message": "x86: introduce %BW to avoid going through vex_w_table[]\n\nThis parallels %LW and %XW.",
    "tree": {
      "sha": "44e531abd86cb93cde65811cd017a868a62040e4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/44e531abd86cb93cde65811cd017a868a62040e4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/931452b64424e41bb51e798a6d2f12265efe12cc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/931452b64424e41bb51e798a6d2f12265efe12cc",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/931452b64424e41bb51e798a6d2f12265efe12cc",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/931452b64424e41bb51e798a6d2f12265efe12cc/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "3be5145ee658798ff5001a5875f503cbf749bcc0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3be5145ee658798ff5001a5875f503cbf749bcc0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/3be5145ee658798ff5001a5875f503cbf749bcc0"
    }
  ],
  "stats": {
    "total": 104,
    "additions": 27,
    "deletions": 77
  },
  "files": [
    {
      "sha": "32bc8e786aa8ffd61e4f44b198a89848c4b894a6",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=931452b64424e41bb51e798a6d2f12265efe12cc",
      "patch": "@@ -1,3 +1,16 @@\n+2020-07-07  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* i386-dis.c (EVEX_W_0F3826_P_1, EVEX_W_0F3826_P_2,\n+\tEVEX_W_0F3828_P_1, EVEX_W_0F3829_P_1, EVEX_W_0F3854_P_2,\n+\tEVEX_W_0F3866_P_2, EVEX_W_0F3875_P_2, EVEX_W_0F387D_P_2,\n+\tEVEX_W_0F388D_P_2, EVEX_W_0F3A3E_P_2, EVEX_W_0F3A3F_P_2):\n+\tDelete.\n+\t(putop): Handle \"BW\".\n+\t* i386-dis-evex-w.h: Move entries for opcodes 0F3826, 0F3826,\n+\t0F3828, 0F3829, 0F3854, 0F3866, 0F3875, 0F387D, 0F388D, 0F3A3E,\n+\tand 0F3A3F ...\n+\t* i386-dis-evex-prefix.h: ... here.\n+\n 2020-07-06  Jan Beulich  <jbeulich@suse.com>\n \n \t* i386-dis.c (VEX_LEN_0FXOP_09_80, VEX_LEN_0FXOP_09_81): Delete."
    },
    {
      "sha": "02dc75fd4e4ca0eb7b41393a0a615205e3f1af1d",
      "filename": "opcodes/i386-dis-evex-prefix.h",
      "status": "modified",
      "additions": 11,
      "deletions": 11,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis-evex-prefix.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis-evex-prefix.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-dis-evex-prefix.h?ref=931452b64424e41bb51e798a6d2f12265efe12cc",
      "patch": "@@ -474,8 +474,8 @@\n   /* PREFIX_EVEX_0F3826 */\n   {\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3826_P_1) },\n-    { VEX_W_TABLE (EVEX_W_0F3826_P_2) },\n+    { \"vptestnm%BW\",\t{ XMask, Vex, EXx }, 0 },\n+    { \"vptestm%BW\",\t{ XMask, Vex, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F3827 */\n   {\n@@ -486,13 +486,13 @@\n   /* PREFIX_EVEX_0F3828 */\n   {\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3828_P_1) },\n+    { \"vpmovm2%BW\",\t{ XM, MaskR }, 0 },\n     { VEX_W_TABLE (EVEX_W_0F3828_P_2) },\n   },\n   /* PREFIX_EVEX_0F3829 */\n   {\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3829_P_1) },\n+    { \"vpmov%BW2m\",\t{ XMask, EXx }, 0 },\n     { VEX_W_TABLE (EVEX_W_0F3829_P_2) },\n   },\n   /* PREFIX_EVEX_0F382A */\n@@ -693,7 +693,7 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3854_P_2) },\n+    { \"vpopcnt%BW\",\t{ XM, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F3855 */\n   {\n@@ -747,7 +747,7 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3866_P_2) },\n+    { \"vpblendm%BW\",\t{ XM, Vex, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F3868 */\n   {\n@@ -785,7 +785,7 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3875_P_2) },\n+    { \"vpermi2%BW\",\t{ XM, Vex, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F3876 */\n   {\n@@ -821,7 +821,7 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F387D_P_2) },\n+    { \"vpermt2%BW\",\t{ XM, Vex, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F387E */\n   {\n@@ -869,7 +869,7 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F388D_P_2) },\n+    { \"vperm%BW\",\t{ XM, Vex, EXx }, 0 },\n   },\n   /* PREFIX_EVEX_0F388F */\n   {\n@@ -1227,13 +1227,13 @@\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3A3E_P_2) },\n+    { \"vpcmpu%BW\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n   },\n   /* PREFIX_EVEX_0F3A3F */\n   {\n     { Bad_Opcode },\n     { Bad_Opcode },\n-    { VEX_W_TABLE (EVEX_W_0F3A3F_P_2) },\n+    { \"vpcmp%BW\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n   },\n   /* PREFIX_EVEX_0F3A42 */\n   {"
    },
    {
      "sha": "ac786fc7c175e19e747461b2703fc717b67aa808",
      "filename": "opcodes/i386-dis-evex-w.h",
      "status": "modified",
      "additions": 0,
      "deletions": 55,
      "changes": 55,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis-evex-w.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis-evex-w.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-dis-evex-w.h?ref=931452b64424e41bb51e798a6d2f12265efe12cc",
      "patch": "@@ -442,31 +442,11 @@\n   {\n     { \"vpmovsxdq\",\t{ XM, EXxmmq }, 0 },\n   },\n-  /* EVEX_W_0F3826_P_1 */\n-  {\n-    { \"vptestnmb\",\t{ XMask, Vex, EXx }, 0 },\n-    { \"vptestnmw\",\t{ XMask, Vex, EXx }, 0 },\n-  },\n-  /* EVEX_W_0F3826_P_2 */\n-  {\n-    { \"vptestmb\",\t{ XMask, Vex, EXx }, 0 },\n-    { \"vptestmw\",\t{ XMask, Vex, EXx }, 0 },\n-  },\n-  /* EVEX_W_0F3828_P_1 */\n-  {\n-    { \"vpmovm2b\",\t{ XM, MaskR }, 0 },\n-    { \"vpmovm2w\",\t{ XM, MaskR }, 0 },\n-  },\n   /* EVEX_W_0F3828_P_2 */\n   {\n     { Bad_Opcode },\n     { \"vpmuldq\",\t{ XM, Vex, EXx }, 0 },\n   },\n-  /* EVEX_W_0F3829_P_1 */\n-  {\n-    { \"vpmovb2m\",\t{ XMask, EXx }, 0 },\n-    { \"vpmovw2m\",\t{ XMask, EXx }, 0 },\n-  },\n   /* EVEX_W_0F3829_P_2 */\n   {\n     { Bad_Opcode },\n@@ -527,11 +507,6 @@\n     { \"vdpbf16ps\",\t{ XM, Vex, EXx }, 0 },\n     { Bad_Opcode },\n   },\n-  /* EVEX_W_0F3854_P_2 */\n-  {\n-    { \"vpopcntb\",\t{ XM, EXx }, 0 },\n-    { \"vpopcntw\",\t{ XM, EXx }, 0 },\n-  },\n   /* EVEX_W_0F3859_P_2 */\n   {\n     { \"vbroadcasti32x2\",\t{ XM, EXxmm_mq }, 0 },\n@@ -557,11 +532,6 @@\n     { \"vpcompressb\",   { EXbScalar, XM }, 0 },\n     { \"vpcompressw\",   { EXwScalar, XM }, 0 },\n   },\n-  /* EVEX_W_0F3866_P_2 */\n-  {\n-    { \"vpblendmb\",\t{ XM, Vex, EXx }, 0 },\n-    { \"vpblendmw\",\t{ XM, Vex, EXx }, 0 },\n-  },\n   /* EVEX_W_0F3870_P_2 */\n   {\n     { Bad_Opcode },\n@@ -582,11 +552,6 @@\n     { \"vcvtne2ps2bf16\", { XM, Vex, EXx}, 0 },\n     { Bad_Opcode },\n   },\n-  /* EVEX_W_0F3875_P_2 */\n-  {\n-    { \"vpermi2b\",\t{ XM, Vex, EXx }, 0 },\n-    { \"vpermi2w\",\t{ XM, Vex, EXx }, 0 },\n-  },\n   /* EVEX_W_0F387A_P_2 */\n   {\n     { \"vpbroadcastb\",\t{ XM, Rd }, 0 },\n@@ -595,21 +560,11 @@\n   {\n     { \"vpbroadcastw\",\t{ XM, Rd }, 0 },\n   },\n-  /* EVEX_W_0F387D_P_2 */\n-  {\n-    { \"vpermt2b\",\t{ XM, Vex, EXx }, 0 },\n-    { \"vpermt2w\",\t{ XM, Vex, EXx }, 0 },\n-  },\n   /* EVEX_W_0F3883_P_2 */\n   {\n     { Bad_Opcode },\n     { \"vpmultishiftqb\",\t{ XM, Vex, EXx }, 0 },\n   },\n-  /* EVEX_W_0F388D_P_2 */\n-  {\n-    { \"vpermb\",\t{ XM, Vex, EXx }, 0 },\n-    { \"vpermw\",\t{ XM, Vex, EXx }, 0 },\n-  },\n   /* EVEX_W_0F3891_P_2 */\n   {\n     { \"vpgatherqd\",\t{ XMxmmq, MVexVSIBQDWpX }, 0 },\n@@ -732,16 +687,6 @@\n     { EVEX_LEN_TABLE (EVEX_LEN_0F3A3B_P_2_W_0) },\n     { EVEX_LEN_TABLE (EVEX_LEN_0F3A3B_P_2_W_1) },\n   },\n-  /* EVEX_W_0F3A3E_P_2 */\n-  {\n-    { \"vpcmpub\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n-    { \"vpcmpuw\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n-  },\n-  /* EVEX_W_0F3A3F_P_2 */\n-  {\n-    { \"vpcmpb\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n-    { \"vpcmpw\",\t{ XMask, Vex, EXx, VPCMP }, 0 },\n-  },\n   /* EVEX_W_0F3A42_P_2 */\n   {\n     { \"vdbpsadbw\",\t{ XM, Vex, EXx, Ib }, 0 },"
    },
    {
      "sha": "956e2c353952c98615fca52a2fa06bb789c2eebc",
      "filename": "opcodes/i386-dis.c",
      "status": "modified",
      "additions": 3,
      "deletions": 11,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/931452b64424e41bb51e798a6d2f12265efe12cc/opcodes/i386-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-dis.c?ref=931452b64424e41bb51e798a6d2f12265efe12cc",
      "patch": "@@ -2059,11 +2059,7 @@ enum\n   EVEX_W_0F3824_P_1,\n   EVEX_W_0F3825_P_1,\n   EVEX_W_0F3825_P_2,\n-  EVEX_W_0F3826_P_1,\n-  EVEX_W_0F3826_P_2,\n-  EVEX_W_0F3828_P_1,\n   EVEX_W_0F3828_P_2,\n-  EVEX_W_0F3829_P_1,\n   EVEX_W_0F3829_P_2,\n   EVEX_W_0F382A_P_1,\n   EVEX_W_0F382A_P_2,\n@@ -2078,23 +2074,18 @@ enum\n   EVEX_W_0F3837_P_2,\n   EVEX_W_0F383A_P_1,\n   EVEX_W_0F3852_P_1,\n-  EVEX_W_0F3854_P_2,\n   EVEX_W_0F3859_P_2,\n   EVEX_W_0F385A_P_2,\n   EVEX_W_0F385B_P_2,\n   EVEX_W_0F3862_P_2,\n   EVEX_W_0F3863_P_2,\n-  EVEX_W_0F3866_P_2,\n   EVEX_W_0F3870_P_2,\n   EVEX_W_0F3872_P_1,\n   EVEX_W_0F3872_P_2,\n   EVEX_W_0F3872_P_3,\n-  EVEX_W_0F3875_P_2,\n   EVEX_W_0F387A_P_2,\n   EVEX_W_0F387B_P_2,\n-  EVEX_W_0F387D_P_2,\n   EVEX_W_0F3883_P_2,\n-  EVEX_W_0F388D_P_2,\n   EVEX_W_0F3891_P_2,\n   EVEX_W_0F3893_P_2,\n   EVEX_W_0F38A1_P_2,\n@@ -2121,8 +2112,6 @@ enum\n   EVEX_W_0F3A39_P_2,\n   EVEX_W_0F3A3A_P_2,\n   EVEX_W_0F3A3B_P_2,\n-  EVEX_W_0F3A3E_P_2,\n-  EVEX_W_0F3A3F_P_2,\n   EVEX_W_0F3A42_P_2,\n   EVEX_W_0F3A43_P_2,\n   EVEX_W_0F3A70_P_2,\n@@ -2198,6 +2187,7 @@ struct dis386 {\n    \"LS\" => print \"abs\" in 64bit mode and behave as 'S' otherwise\n    \"LV\" => print \"abs\" for 64bit operand and behave as 'S' otherwise\n    \"LW\" => print 'd', 'q' depending on the VEX.W bit\n+   \"BW\" => print 'b' or 'w' depending on the EVEX.W bit\n    \"LP\" => print 'w' or 'l' ('d' in Intel mode) if instruction has\n \t   an operand size prefix, or suffix_always is true.  print\n \t   'q' if rex prefix is present.\n@@ -13129,6 +13119,8 @@ putop (const char *in_template, int sizeflag)\n \t\t*obufp++ = vex.w ? 'd': 's';\n \t      else if (last[0] == 'L')\n \t\t*obufp++ = vex.w ? 'q': 'd';\n+\t      else if (last[0] == 'B')\n+\t\t*obufp++ = vex.w ? 'w': 'b';\n \t      else\n \t\tabort ();\n \t    }"
    }
  ]
}