{
  "sha": "c8693053f895626ae90b7856d3738de47d14d52c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Yzg2OTMwNTNmODk1NjI2YWU5MGI3ODU2ZDM3MzhkZTQ3ZDE0ZDUyYw==",
  "commit": {
    "author": {
      "name": "Rainer Orth",
      "email": "ro@CeBiTec.Uni-Bielefeld.DE",
      "date": "2020-07-30T13:41:50Z"
    },
    "committer": {
      "name": "Rainer Orth",
      "email": "ro@CeBiTec.Uni-Bielefeld.DE",
      "date": "2020-07-30T13:41:50Z"
    },
    "message": "Unify Solaris procfs and largefile handling\n\nGDB currently doesn't build on 32-bit Solaris:\n\n* On Solaris 11.4/x86:\n\nIn file included from /usr/include/sys/procfs.h:26,\n                 from /vol/src/gnu/gdb/hg/master/dist/gdb/i386-sol2-nat.c:24:\n/usr/include/sys/old_procfs.h:31:2: error: #error \"Cannot use procfs in the large file compilation environment\"\n #error \"Cannot use procfs in the large file compilation environment\"\n  ^~~~~\n\n* On Solaris 11.3/x86 there are several more instances of this.\n\nThe interaction between procfs and large-file support historically has\nbeen a royal mess on Solaris:\n\n* There are two versions of the procfs interface:\n\n** The old ioctl-based /proc, deprecated and not used any longer in\n   either gdb or binutils.\n\n** The `new' (introduced in Solaris 2.6, 1997) structured /proc.\n\n* There are two headers one can possibly include:\n\n** <procfs.h> which only provides the structured /proc, definining\n   _STRUCTURED_PROC=1 and then including ...\n\n** <sys/procfs.h> which defaults to _STRUCTURED_PROC=0, the ioctl-based\n   /proc, but provides structured /proc if _STRUCTURED_PROC == 1.\n\n* procfs and the large-file environment didn't go well together:\n\n** Until Solaris 11.3, <sys/procfs.h> would always #error in 32-bit\n   compilations when the large-file environment was active\n   (_FILE_OFFSET_BITS == 64).\n\n** In both Solaris 11.4 and Illumos, this restriction was lifted for\n   structured /proc.\n\nSo one has to be careful always to define _STRUCTURED_PROC=1 when\ntesting for or using <sys/procfs.h> on Solaris.  As the errors above\nshow, this isn't always the case in binutils-gdb right now.\n\nAlso one may need to disable large-file support for 32-bit compilations\non Solaris.  config/largefile.m4 meant to do this by wrapping the\nAC_SYS_LARGEFILE autoconf macro with appropriate checks, yielding\nACX_LARGEFILE.  Unfortunately the macro doesn't always succeed because\nit neglects the _STRUCTURED_PROC part.\n\nTo make things even worse, since GCC 9 g++ predefines\n_FILE_OFFSET_BITS=64 on Solaris.  So even if largefile.m4 deciced not to\nenable large-file support, this has no effect, breaking the gdb build.\n\nThis patch addresses all this as follows:\n\n* All tests for the <sys/procfs.h> header are made with\n  _STRUCTURED_PROC=1, the definition going into the various config.h\n  files instead of having to make them (and sometimes failing) in the\n  affected sources.\n\n* To cope with the g++ predefine of _FILE_OFFSET_BITS=64,\n  -U_FILE_OFFSET_BITS is added to various *_CPPFLAGS variables.  It had\n  been far easier to have just\n\n  #undef _FILE_OFFSET_BITS\n\n  in config.h, but unfortunately such a construct in config.in is\n  commented by config.status irrespective of indentation and whitespace\n  if large-file support is disabled.  I found no way around this and\n  putting the #undef in several global headers for bfd, binutils, ld,\n  and gdb seemed way more invasive.\n\n* Last, the applicability check in largefile.m4 was modified only to\n  disable largefile support if really needed.  To do so, it checks if\n  <sys/procfs.h> compiles with _FILE_OFFSET_BITS=64 defined.  If it\n  doesn't, the disabling only happens if gdb exists in-tree and isn't\n  disabled, otherwise (building binutils from a tarball), there's no\n  conflict.\n\n  What initially confused me was the check for $plugins here, which\n  originally caused the disabling not to take place.  Since AC_PLUGINGS\n  does enable plugin support if <dlfcn.h> exists (which it does on\n  Solaris), the disabling never happened.\n\n  I could find no explanation why the linker plugin needs large-file\n  support but thought it would be enough if gld and GCC's lto-plugin\n  agreed on the _FILE_OFFSET_BITS value.  Unfortunately, that's not\n  enough: lto-plugin uses the simple-object interface from libiberty,\n  which includes off_t arguments.  So to fully disable large-file\n  support would mean also disabling it in libiberty and its users: gcc\n  and libstdc++-v3.  This seems highly undesirable, so I decided to\n  disable the linker plugin instead if large-file support won't work.\n\nThe patch allows binutils+gdb to build on i386-pc-solaris2.11 (both\nSolaris 11.3 and 11.4, using GCC 9.3.0 which is the worst case due to\npredefined _FILE_OFFSET_BITS=64).  Also regtested on\namd64-pc-solaris2.11 (again on Solaris 11.3 and 11.4),\nx86_64-pc-linux-gnu and i686-pc-linux-gnu.\n\n\tconfig:\n\t* largefile.m4 (ACX_LARGEFILE) <sparc-*-solaris*|i?86-*-solaris*>:\n\tCheck for <sys/procfs.h> incompatilibity with large-file support\n\ton Solaris.\n\tOnly disable large-file support and perhaps plugins if needed.\n\tSet, substitute LARGEFILE_CPPFLAGS if so.\n\n\tbfd:\n\t* bfd.m4 (BFD_SYS_PROCFS_H): New macro.\n\t(BFD_HAVE_SYS_PROCFS_TYPE): Require BFD_SYS_PROCFS_H.\n\tDon't define _STRUCTURED_PROC.\n\t(BFD_HAVE_SYS_PROCFS_TYPE_MEMBER): Likewise.\n\t* elf.c [HAVE_SYS_PROCFS_H] (_STRUCTURED_PROC): Don't define.\n\t* configure.ac: Use BFD_SYS_PROCFS_H to check for <sys/procfs.h>.\n\t* configure, config.in: Regenerate.\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* Makefile.in, doc/Makefile.in: Regenerate.\n\n\tbinutils:\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* Makefile.in, doc/Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\n\tgas:\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* Makefile.in, doc/Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\n\tgdb:\n\t* proc-api.c (_STRUCTURED_PROC): Don't define.\n\t* proc-events.c: Likewise.\n\t* proc-flags.c: Likewise.\n\t* proc-why.c: Likewise.\n\t* procfs.c: Likewise.\n\n\t* Makefile.in (INTERNAL_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* configure, config.in: Regenerate.\n\n\tgdbserver:\n\t* configure, config.in: Regenerate.\n\n\tgdbsupport:\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* common.m4 (GDB_AC_COMMON): Use BFD_SYS_PROCFS_H to check for\n\t<sys/procfs.h>.\n\t* Makefile.in: Regenerate.\n\t* configure, config.in: Regenerate.\n\n\tgnulib:\n\t* configure.ac: Run ACX_LARGEFILE before gl_EARLY.\n\t* configure: Regenerate.\n\n\tgprof:\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.\n\n\tld:\n\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n\t* Makefile.in: Regenerate.\n\t* configure: Regenerate.",
    "tree": {
      "sha": "5ad144e00bc7869c46be99285cf8eda128f7d111",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5ad144e00bc7869c46be99285cf8eda128f7d111"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c8693053f895626ae90b7856d3738de47d14d52c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c8693053f895626ae90b7856d3738de47d14d52c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c8693053f895626ae90b7856d3738de47d14d52c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c8693053f895626ae90b7856d3738de47d14d52c/comments",
  "author": {
    "login": "rorth",
    "id": 3930951,
    "node_id": "MDQ6VXNlcjM5MzA5NTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rorth",
    "html_url": "https://github.com/rorth",
    "followers_url": "https://api.github.com/users/rorth/followers",
    "following_url": "https://api.github.com/users/rorth/following{/other_user}",
    "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rorth/subscriptions",
    "organizations_url": "https://api.github.com/users/rorth/orgs",
    "repos_url": "https://api.github.com/users/rorth/repos",
    "events_url": "https://api.github.com/users/rorth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rorth/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "rorth",
    "id": 3930951,
    "node_id": "MDQ6VXNlcjM5MzA5NTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rorth",
    "html_url": "https://github.com/rorth",
    "followers_url": "https://api.github.com/users/rorth/followers",
    "following_url": "https://api.github.com/users/rorth/following{/other_user}",
    "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rorth/subscriptions",
    "organizations_url": "https://api.github.com/users/rorth/orgs",
    "repos_url": "https://api.github.com/users/rorth/repos",
    "events_url": "https://api.github.com/users/rorth/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rorth/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ac2599c44788ae34a6b26b5dc42848d176f99a5d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ac2599c44788ae34a6b26b5dc42848d176f99a5d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ac2599c44788ae34a6b26b5dc42848d176f99a5d"
    }
  ],
  "stats": {
    "total": 2405,
    "additions": 1329,
    "deletions": 1076
  },
  "files": [
    {
      "sha": "264e15a1fe5e2be9d7face0414554e28f0796381",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,15 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* bfd.m4 (BFD_SYS_PROCFS_H): New macro.\n+\t(BFD_HAVE_SYS_PROCFS_TYPE): Require BFD_SYS_PROCFS_H.\n+\tDon't define _STRUCTURED_PROC.\n+\t(BFD_HAVE_SYS_PROCFS_TYPE_MEMBER): Likewise.\n+\t* elf.c [HAVE_SYS_PROCFS_H] (_STRUCTURED_PROC): Don't define.\n+\t* configure.ac: Use BFD_SYS_PROCFS_H to check for <sys/procfs.h>.\n+\t* configure, config.in: Regenerate.\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* Makefile.in, doc/Makefile.in: Regenerate.\n+\n 2020-07-30  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* elf-bfd.h (sym_cache): Moved before elf_link_hash_table."
    },
    {
      "sha": "d07c9605b6fe78efe708feaea240104252cb166b",
      "filename": "bfd/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -53,7 +53,7 @@ ZLIBINC = @zlibinc@\n WARN_CFLAGS = @WARN_CFLAGS@\n NO_WERROR = @NO_WERROR@\n AM_CFLAGS = $(WARN_CFLAGS) $(ZLIBINC)\n-AM_CPPFLAGS = -DBINDIR='\"$(bindir)\"' -DLIBDIR='\"$(libdir)\"'\n+AM_CPPFLAGS = -DBINDIR='\"$(bindir)\"' -DLIBDIR='\"$(libdir)\"' @LARGEFILE_CPPFLAGS@\n if PLUGINS\n bfdinclude_HEADERS += $(INCDIR)/plugin-api.h\n LIBDL = @lt_cv_dlopen_libs@"
    },
    {
      "sha": "9cad4da6f8f461d3ad2fd9a53262040d5ec1877c",
      "filename": "bfd/Makefile.in",
      "status": "modified",
      "additions": 4,
      "deletions": 3,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -330,6 +330,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LIBINTL = @LIBINTL@\n@@ -479,9 +480,9 @@ libbfd_la_LDFLAGS = $(am__append_1) -release `cat libtool-soversion` \\\n ZLIB = @zlibdir@ -lz\n ZLIBINC = @zlibinc@\n AM_CFLAGS = $(WARN_CFLAGS) $(ZLIBINC)\n-AM_CPPFLAGS = -DBINDIR='\"$(bindir)\"' -DLIBDIR='\"$(libdir)\"' @HDEFINES@ \\\n-\t@COREFLAG@ @TDEFINES@ $(CSEARCH) $(CSWITCHES) $(HAVEVECS) \\\n-\t@INCINTL@ $(am__empty)\n+AM_CPPFLAGS = -DBINDIR='\"$(bindir)\"' -DLIBDIR='\"$(libdir)\"' \\\n+\t@LARGEFILE_CPPFLAGS@ @HDEFINES@ @COREFLAG@ @TDEFINES@ \\\n+\t$(CSEARCH) $(CSWITCHES) $(HAVEVECS) @INCINTL@\n @PLUGINS_TRUE@LIBDL = @lt_cv_dlopen_libs@\n \n # bfd.h goes here, for now"
    },
    {
      "sha": "21c55903aba2efa2d7f2ae0093f40386b036a0f9",
      "filename": "bfd/bfd.m4",
      "status": "modified",
      "additions": 10,
      "deletions": 6,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/bfd.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/bfd.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/bfd.m4?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -17,15 +17,20 @@ dnl along with this program; see the file COPYING3.  If not see\n dnl <http://www.gnu.org/licenses/>.\n dnl\n \n+dnl Check for sys/procfs.h, enforcing structured /proc on Solaris.\n+\n+AC_DEFUN([BFD_SYS_PROCFS_H],\n+[AC_DEFINE(_STRUCTURED_PROC, 1, [Use structured /proc on Solaris.])\n+ AC_CHECK_HEADERS(sys/procfs.h)])\n+\n dnl Check for existence of a type $1 in sys/procfs.h\n \n AC_DEFUN([BFD_HAVE_SYS_PROCFS_TYPE],\n-[AC_MSG_CHECKING([for $1 in sys/procfs.h])\n+[AC_REQUIRE([BFD_SYS_PROCFS_H])\n+ AC_MSG_CHECKING([for $1 in sys/procfs.h])\n  AC_CACHE_VAL(bfd_cv_have_sys_procfs_type_$1,\n    [AC_TRY_COMPILE([\n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>],\n       [$1 avar],\n       bfd_cv_have_sys_procfs_type_$1=yes,\n@@ -41,12 +46,11 @@ AC_DEFUN([BFD_HAVE_SYS_PROCFS_TYPE],\n dnl Check for existence of member $2 in type $1 in sys/procfs.h\n \n AC_DEFUN([BFD_HAVE_SYS_PROCFS_TYPE_MEMBER],\n-[AC_MSG_CHECKING([for $1.$2 in sys/procfs.h])\n+[AC_REQUIRE([BFD_SYS_PROCFS_H])\n+ AC_MSG_CHECKING([for $1.$2 in sys/procfs.h])\n  AC_CACHE_VAL(bfd_cv_have_sys_procfs_type_member_$1_$2,\n    [AC_TRY_COMPILE([\n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>],\n       [$1 avar; void* aref = (void*) &avar.$2],\n       bfd_cv_have_sys_procfs_type_member_$1_$2=yes,"
    },
    {
      "sha": "c7be6c5176499a16dc9ba37d3b4ee6bf8d5afaf5",
      "filename": "bfd/config.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/config.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -416,3 +416,6 @@\n \n /* Define to 1 if you need to in order for `stat' and other things to work. */\n #undef _POSIX_SOURCE\n+\n+/* Use structured /proc on Solaris. */\n+#undef _STRUCTURED_PROC"
    },
    {
      "sha": "1b983aaa35c9e3cab790bd530f556a203b66fd7e",
      "filename": "bfd/configure",
      "status": "modified",
      "additions": 99,
      "deletions": 75,
      "changes": 174,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -699,6 +699,7 @@ PKGVERSION\n DEBUGDIR\n PLUGINS_FALSE\n PLUGINS_TRUE\n+LARGEFILE_CPPFLAGS\n OTOOL64\n OTOOL\n LIPO\n@@ -11728,7 +11729,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11731 \"configure\"\n+#line 11732 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11834,7 +11835,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11837 \"configure\"\n+#line 11838 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12186,15 +12187,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n \n@@ -15310,7 +15352,10 @@ rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n \n   # ELF corefile support has several flavors, but all of\n   # them use something called <sys/procfs.h>\n-  for ac_header in sys/procfs.h\n+\n+$as_echo \"#define _STRUCTURED_PROC 1\" >>confdefs.h\n+\n+ for ac_header in sys/procfs.h\n do :\n   ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/procfs.h\" \"ac_cv_header_sys_procfs_h\" \"$ac_includes_default\"\n if test \"x$ac_cv_header_sys_procfs_h\" = xyes; then :\n@@ -15323,7 +15368,8 @@ fi\n done\n \n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15332,8 +15378,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15360,7 +15404,8 @@ $as_echo \"#define HAVE_PRSTATUS_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prstatus_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prstatus_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prstatus32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prstatus32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15369,8 +15414,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15397,7 +15440,8 @@ $as_echo \"#define HAVE_PRSTATUS32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prstatus32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prstatus32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus_t.pr_who in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus_t.pr_who in sys/procfs.h\" >&5\n $as_echo_n \"checking for prstatus_t.pr_who in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_prstatus_t_pr_who+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15406,8 +15450,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15434,7 +15476,8 @@ $as_echo \"#define HAVE_PRSTATUS_T_PR_WHO 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_prstatus_t_pr_who\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_prstatus_t_pr_who\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus32_t.pr_who in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prstatus32_t.pr_who in sys/procfs.h\" >&5\n $as_echo_n \"checking for prstatus32_t.pr_who in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_prstatus32_t_pr_who+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15443,8 +15486,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15471,7 +15512,8 @@ $as_echo \"#define HAVE_PRSTATUS32_T_PR_WHO 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_prstatus32_t_pr_who\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_prstatus32_t_pr_who\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for pstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_pstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15480,8 +15522,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15508,7 +15548,8 @@ $as_echo \"#define HAVE_PSTATUS_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_pstatus_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_pstatus_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pxstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pxstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for pxstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_pxstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15517,8 +15558,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15545,7 +15584,8 @@ $as_echo \"#define HAVE_PXSTATUS_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_pxstatus_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_pxstatus_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pstatus32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for pstatus32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for pstatus32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_pstatus32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15554,8 +15594,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15582,7 +15620,8 @@ $as_echo \"#define HAVE_PSTATUS32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_pstatus32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_pstatus32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prpsinfo_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prpsinfo_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15591,8 +15630,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15619,7 +15656,8 @@ $as_echo \"#define HAVE_PRPSINFO_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prpsinfo_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prpsinfo_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo_t.pr_pid in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo_t.pr_pid in sys/procfs.h\" >&5\n $as_echo_n \"checking for prpsinfo_t.pr_pid in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_prpsinfo_t_pr_pid+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15628,8 +15666,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15656,7 +15692,8 @@ $as_echo \"#define HAVE_PRPSINFO_T_PR_PID 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_prpsinfo_t_pr_pid\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_prpsinfo_t_pr_pid\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prpsinfo32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prpsinfo32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15665,8 +15702,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15693,7 +15728,8 @@ $as_echo \"#define HAVE_PRPSINFO32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prpsinfo32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prpsinfo32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo32_t.pr_pid in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prpsinfo32_t.pr_pid in sys/procfs.h\" >&5\n $as_echo_n \"checking for prpsinfo32_t.pr_pid in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_prpsinfo32_t_pr_pid+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15702,8 +15738,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15730,7 +15764,8 @@ $as_echo \"#define HAVE_PRPSINFO32_T_PR_PID 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_prpsinfo32_t_pr_pid\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_prpsinfo32_t_pr_pid\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for psinfo_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_psinfo_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15739,8 +15774,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15767,7 +15800,8 @@ $as_echo \"#define HAVE_PSINFO_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_psinfo_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_psinfo_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo_t.pr_pid in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo_t.pr_pid in sys/procfs.h\" >&5\n $as_echo_n \"checking for psinfo_t.pr_pid in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_psinfo_t_pr_pid+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15776,8 +15810,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15804,7 +15836,8 @@ $as_echo \"#define HAVE_PSINFO_T_PR_PID 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_psinfo_t_pr_pid\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_psinfo_t_pr_pid\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for psinfo32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_psinfo32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15813,8 +15846,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15841,7 +15872,8 @@ $as_echo \"#define HAVE_PSINFO32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_psinfo32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_psinfo32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo32_t.pr_pid in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psinfo32_t.pr_pid in sys/procfs.h\" >&5\n $as_echo_n \"checking for psinfo32_t.pr_pid in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_psinfo32_t_pr_pid+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15850,8 +15882,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15878,7 +15908,8 @@ $as_echo \"#define HAVE_PSINFO32_T_PR_PID 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_psinfo32_t_pr_pid\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_psinfo32_t_pr_pid\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_lwpstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15887,8 +15918,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15915,7 +15944,8 @@ $as_echo \"#define HAVE_LWPSTATUS_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_lwpstatus_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_lwpstatus_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpxstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpxstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpxstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_lwpxstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15924,8 +15954,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15952,7 +15980,8 @@ $as_echo \"#define HAVE_LWPXSTATUS_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_lwpxstatus_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_lwpxstatus_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_context in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_context in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpstatus_t.pr_context in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_context+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15961,8 +15990,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15989,7 +16016,8 @@ $as_echo \"#define HAVE_LWPSTATUS_T_PR_CONTEXT 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_context\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_context\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_reg in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_reg in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpstatus_t.pr_reg in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_reg+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15998,8 +16026,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -16026,7 +16052,8 @@ $as_echo \"#define HAVE_LWPSTATUS_T_PR_REG 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_reg\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_reg\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_fpreg in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpstatus_t.pr_fpreg in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpstatus_t.pr_fpreg in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_fpreg+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -16035,8 +16062,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -16063,7 +16088,8 @@ $as_echo \"#define HAVE_LWPSTATUS_T_PR_FPREG 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_fpreg\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_member_lwpstatus_t_pr_fpreg\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for win32_pstatus_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for win32_pstatus_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for win32_pstatus_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_win32_pstatus_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -16072,8 +16098,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()"
    },
    {
      "sha": "769aa87fe64ba2c66ed377feaa5ddc1d5195fd33",
      "filename": "bfd/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/configure.ac?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1039,7 +1039,7 @@ changequote([,])dnl\n \n   # ELF corefile support has several flavors, but all of\n   # them use something called <sys/procfs.h>\n-  AC_CHECK_HEADERS(sys/procfs.h)\n+  BFD_SYS_PROCFS_H\n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n     BFD_HAVE_SYS_PROCFS_TYPE(prstatus_t)\n     BFD_HAVE_SYS_PROCFS_TYPE(prstatus32_t)"
    },
    {
      "sha": "7e29b4852f0bcc11f4e63c89661242cea1a1f971",
      "filename": "bfd/doc/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/doc/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/doc/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/doc/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -272,6 +272,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LIBINTL = @LIBINTL@"
    },
    {
      "sha": "5fb1995bad2b267026fd4a14d97ef26e25daaaff",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -9453,8 +9453,6 @@ _bfd_elf_rel_vtable_reloc_fn\n    out details about the corefile.  */\n \n #ifdef HAVE_SYS_PROCFS_H\n-/* Needed for new procfs interface on sparc-solaris.  */\n-# define _STRUCTURED_PROC 1\n # include <sys/procfs.h>\n #endif\n "
    },
    {
      "sha": "acd04df6860649e252260e463a94be1b357a9df0",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* Makefile.in, doc/Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\n 2020-07-30  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* testsuite/binutils-all/i386/compressed-1a.d: Pass --gdwarf-3"
    },
    {
      "sha": "94d7616c2e35f197415a9dc636ccfc26f5590a73",
      "filename": "binutils/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/binutils/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/binutils/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -116,6 +116,7 @@ INCDIR\t= $(BASEDIR)/include\n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \\\n \t @HDEFINES@ \\\n \t @INCINTL@ \\\n+\t @LARGEFILE_CPPFLAGS@ \\\n \t -DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\" \\\n \t -Dbin_dummy_emulation=$(EMULATION_VECTOR)\n "
    },
    {
      "sha": "5ddae25558d0baf1555ee24aa3d7f21d7825dde1",
      "filename": "binutils/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/binutils/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/binutils/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -451,6 +451,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LEX = `if [ -f ../flex/flex ]; then echo ../flex/flex; else echo @LEX@; fi`\n@@ -624,6 +625,7 @@ INCDIR = $(BASEDIR)/include\n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) \\\n \t @HDEFINES@ \\\n \t @INCINTL@ \\\n+\t @LARGEFILE_CPPFLAGS@ \\\n \t -DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\" \\\n \t -Dbin_dummy_emulation=$(EMULATION_VECTOR)\n "
    },
    {
      "sha": "6dde3053a35973fd7acca35a2d2fe68089f2daad",
      "filename": "binutils/configure",
      "status": "modified",
      "additions": 53,
      "deletions": 11,
      "changes": 64,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/binutils/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/binutils/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -691,6 +691,7 @@ DEBUGINFOD_CFLAGS\n PKG_CONFIG_LIBDIR\n PKG_CONFIG_PATH\n PKG_CONFIG\n+LARGEFILE_CPPFLAGS\n OTOOL64\n OTOOL\n LIPO\n@@ -11551,7 +11552,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11554 \"configure\"\n+#line 11555 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11657,7 +11658,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11660 \"configure\"\n+#line 11661 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12007,15 +12008,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n "
    },
    {
      "sha": "04576ab9b319ef8209086bbf5b0a6b813b599934",
      "filename": "binutils/doc/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/binutils/doc/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/binutils/doc/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/doc/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -284,6 +284,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LEX = @LEX@"
    },
    {
      "sha": "ba1fc7f2ab245b6a04d2f7b7712ac97f25ba26d1",
      "filename": "config/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/config/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/config/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/config/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,11 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* largefile.m4 (ACX_LARGEFILE) <sparc-*-solaris*|i?86-*-solaris*>:\n+\tCheck for <sys/procfs.h> incompatilibity with large-file support\n+\ton Solaris.\n+\tOnly disable large-file support and perhaps plugins if needed.\n+\tSet, substitute LARGEFILE_CPPFLAGS if so.\n+\n 2020-07-28  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR binutils/26301"
    },
    {
      "sha": "937596334cdf4e02fc20891b4d32a542bde07ea1",
      "filename": "config/largefile.m4",
      "status": "modified",
      "additions": 33,
      "deletions": 12,
      "changes": 45,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/config/largefile.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/config/largefile.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/config/largefile.m4?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,5 +1,5 @@\n # This macro wraps AC_SYS_LARGEFILE with one exception for Solaris.\n-# PR 9992/binutils: We have to replicate everywhere the behaviour of\n+# PR binutils/9992: We have to replicate everywhere the behaviour of\n # bfd's configure script so that all the directories agree on the size\n # of structures used to describe files.\n \n@@ -16,17 +16,38 @@ AC_REQUIRE([AC_CANONICAL_TARGET])\n AC_PLUGINS\n \n case \"${host}\" in\n-changequote(,)dnl\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-changequote([,])dnl\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    AC_TRY_COMPILE([#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>], , acx_cv_procfs_lfs=yes, acx_cv_procfs_lfs=no)\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\tAC_MSG_WARN([\n+plugin support disabled; require large-file support which is incompatible with GDB.])\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+      AC_SUBST(LARGEFILE_CPPFLAGS)\n+    fi\n     ;;\n esac\n "
    },
    {
      "sha": "2e52252db90e423cf3668ff04faac8a6a48d6073",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* Makefile.in, doc/Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\n 2020-07-30  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* testsuite/gas/elf/dwarf2-3.d:Pass --gdwarf-3 to assembler."
    },
    {
      "sha": "4ff0c4f02767fac54c743b56ce811112b4e620c1",
      "filename": "gas/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gas/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gas/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -389,7 +389,7 @@ INCDIR = $(BASEDIR)/include\n # so that tm.h and config.h will be found in the compilation\n # subdirectory rather than in the source directory.\n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(srcdir)/config \\\n-\t-I$(INCDIR) -I$(srcdir)/.. -I$(BFDDIR) @INCINTL@ \\\n+\t-I$(INCDIR) -I$(srcdir)/.. -I$(BFDDIR) @INCINTL@ @LARGEFILE_CPPFLAGS@ \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n # How to link with both our special library facilities"
    },
    {
      "sha": "5d241e2df848089973d0480f2a9bea356649281f",
      "filename": "gas/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gas/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gas/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -303,6 +303,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LEX = `if [ -f ../flex/flex ] ; then echo ../flex/flex ; else echo @LEX@ ; fi`\n@@ -768,7 +769,7 @@ INCDIR = $(BASEDIR)/include\n # so that tm.h and config.h will be found in the compilation\n # subdirectory rather than in the source directory.\n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(srcdir)/config \\\n-\t-I$(INCDIR) -I$(srcdir)/.. -I$(BFDDIR) @INCINTL@ \\\n+\t-I$(INCDIR) -I$(srcdir)/.. -I$(BFDDIR) @INCINTL@ @LARGEFILE_CPPFLAGS@ \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n "
    },
    {
      "sha": "813ed93f14cbe7668aab11de5bd2481a1adde3c7",
      "filename": "gas/configure",
      "status": "modified",
      "additions": 53,
      "deletions": 11,
      "changes": 64,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gas/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gas/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -676,6 +676,7 @@ NO_WERROR\n WARN_CFLAGS_FOR_BUILD\n WARN_CFLAGS\n do_compare\n+LARGEFILE_CPPFLAGS\n OTOOL64\n OTOOL\n LIPO\n@@ -11343,7 +11344,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11346 \"configure\"\n+#line 11347 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11449,7 +11450,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11452 \"configure\"\n+#line 11453 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11799,15 +11800,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n "
    },
    {
      "sha": "27fd053972763efd389b906947cdea431d6bd51c",
      "filename": "gas/doc/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gas/doc/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gas/doc/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -265,6 +265,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LEX = @LEX@"
    },
    {
      "sha": "7e1d5b9befd22ea57caeaf2b64cd8f6b39406b7e",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,14 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* proc-api.c (_STRUCTURED_PROC): Don't define.\n+\t* proc-events.c: Likewise.\n+\t* proc-flags.c: Likewise.\n+\t* proc-why.c: Likewise.\n+\t* procfs.c: Likewise.\n+\n+\t* Makefile.in (INTERNAL_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* configure, config.in: Regenerate.\n+\n 2020-07-30  Tom de Vries  <tdevries@suse.de>\n \n \tPR build/26320"
    },
    {
      "sha": "0d6d8137b59e5a18f68cd88c2df9e6bf4f14d13d",
      "filename": "gdb/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -589,7 +589,8 @@ CPPFLAGS = @CPPFLAGS@\n # are sometimes a little generic, we think that the risk of collision\n # with other header files is high.  If that happens, we try to mitigate\n # a bit the consequences by putting the Python includes last in the list.\n-INTERNAL_CPPFLAGS = $(CPPFLAGS) @GUILE_CPPFLAGS@ @PYTHON_CPPFLAGS@\n+INTERNAL_CPPFLAGS = $(CPPFLAGS) @GUILE_CPPFLAGS@ @PYTHON_CPPFLAGS@ \\\n+\t@LARGEFILE_CPPFLAGS@\n \n # INTERNAL_CFLAGS is the aggregate of all other *CFLAGS macros.\n INTERNAL_CFLAGS_BASE = \\"
    },
    {
      "sha": "9755458f9c67dc5d81824a1b7bba7e3f6cbee66f",
      "filename": "gdb/config.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/config.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -799,6 +799,9 @@\n /* Define to 1 if you need to in order for `stat' and other things to work. */\n #undef _POSIX_SOURCE\n \n+/* Use structured /proc on Solaris. */\n+#undef _STRUCTURED_PROC\n+\n /* Define to empty if `const' does not conform to ANSI C. */\n #undef const\n "
    },
    {
      "sha": "e7811e807a6b42db1b28f46bdf43afb321f0ae05",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 83,
      "deletions": 34,
      "changes": 117,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -795,6 +795,7 @@ HAVE_CXX11\n INSTALL_STRIP_PROGRAM\n STRIP\n install_sh\n+LARGEFILE_CPPFLAGS\n target_os\n target_vendor\n target_cpu\n@@ -4769,15 +4770,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n \n@@ -12995,7 +13037,7 @@ $as_echo \"#define HAVE_LANGINFO_CODESET 1\" >>confdefs.h\n   fi\n \n \n-  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h sys/procfs.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n+  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n@@ -14891,8 +14933,24 @@ fi\n     fi\n   fi\n \n+\n+$as_echo \"#define _STRUCTURED_PROC 1\" >>confdefs.h\n+\n+ for ac_header in sys/procfs.h\n+do :\n+  ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/procfs.h\" \"ac_cv_header_sys_procfs_h\" \"$ac_includes_default\"\n+if test \"x$ac_cv_header_sys_procfs_h\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_SYS_PROCFS_H 1\n+_ACEOF\n+\n+fi\n+\n+done\n+\n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for gregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_gregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -14901,8 +14959,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -14929,7 +14985,8 @@ $as_echo \"#define HAVE_GREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_gregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_gregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -14938,8 +14995,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -14966,7 +15021,8 @@ $as_echo \"#define HAVE_FPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_fpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_fpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -14975,8 +15031,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15003,7 +15057,8 @@ $as_echo \"#define HAVE_PRGREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prfpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prfpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15012,8 +15067,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15040,7 +15093,8 @@ $as_echo \"#define HAVE_PRFPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prfpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prfpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15049,8 +15103,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15077,7 +15129,8 @@ $as_echo \"#define HAVE_PRGREGSET32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpid_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_lwpid_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15086,8 +15139,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15114,7 +15165,8 @@ $as_echo \"#define HAVE_LWPID_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_lwpid_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_lwpid_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for psaddr_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_psaddr_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15123,8 +15175,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -15151,7 +15201,8 @@ $as_echo \"#define HAVE_PSADDR_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_psaddr_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_psaddr_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for elf_fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_elf_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -15160,8 +15211,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()"
    },
    {
      "sha": "2db4a19d1a6f11f239ff85ee67b109ae3401a84d",
      "filename": "gdb/proc-api.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-api.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-api.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/proc-api.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -28,8 +28,6 @@\n #include \"gdbcmd.h\"\n #include \"completer.h\"\n \n-#define _STRUCTURED_PROC 1\n-\n #include <sys/types.h>\n #include <sys/procfs.h>\n #include <sys/proc.h>\t/* for struct proc */"
    },
    {
      "sha": "1f970b8f5c84decb853a5e9dae722d915195c97f",
      "filename": "gdb/proc-events.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-events.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-events.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/proc-events.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -30,8 +30,6 @@\n \n #include \"defs.h\"\n \n-#define _STRUCTURED_PROC 1\n-\n #include <sys/types.h>\n #include <sys/procfs.h>\n #include <sys/syscall.h>"
    },
    {
      "sha": "e51ae089ba927cf48c8b6edc5c0d124e5a0ad191",
      "filename": "gdb/proc-flags.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-flags.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-flags.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/proc-flags.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -27,8 +27,6 @@\n \n #include \"defs.h\"\n \n-#define _STRUCTURED_PROC 1\n-\n #include <sys/types.h>\n #include <sys/procfs.h>\n "
    },
    {
      "sha": "88bed16061cb9a7404da8ce7e17576311f6ee47f",
      "filename": "gdb/proc-why.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-why.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/proc-why.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/proc-why.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -20,8 +20,6 @@\n \n #include \"defs.h\"\n \n-#define _STRUCTURED_PROC 1\n-\n #include <sys/types.h>\n #include <sys/procfs.h>\n "
    },
    {
      "sha": "b628c2d035545d15afa00dbdc133b0d6a639da48",
      "filename": "gdb/procfs.c",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdb/procfs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdb/procfs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/procfs.c?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -33,8 +33,6 @@\n #include \"nat/fork-inferior.h\"\n #include \"gdbarch.h\"\n \n-#define _STRUCTURED_PROC 1\t/* Should be done by configure script.  */\n-\n #include <sys/procfs.h>\n #include <sys/fault.h>\n #include <sys/syscall.h>"
    },
    {
      "sha": "743aa139c1764f70755170b142222468607ee747",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,7 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* configure, config.in: Regenerate.\n+\n 2020-07-26  Eli Zaretskii  <eliz@gnu.org>\n \n \t* configure.ac (AC_CHECK_HEADERS): Add ws2tcpip.h."
    },
    {
      "sha": "63853b6189c9f66fa3d71dc8169fafa41b972007",
      "filename": "gdbserver/config.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/config.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -495,6 +495,9 @@\n /* Define to 1 if you need to in order for `stat' and other things to work. */\n #undef _POSIX_SOURCE\n \n+/* Use structured /proc on Solaris. */\n+#undef _STRUCTURED_PROC\n+\n /* Define to `int' if <sys/types.h> does not define. */\n #undef pid_t\n "
    },
    {
      "sha": "6e24cc4e156f42f5c866a9fe9faa769f360e3fd8",
      "filename": "gdbserver/configure",
      "status": "modified",
      "additions": 32,
      "deletions": 25,
      "changes": 57,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbserver/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -6706,7 +6706,7 @@ $as_echo \"#define HAVE_LANGINFO_CODESET 1\" >>confdefs.h\n   fi\n \n \n-  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h sys/procfs.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n+  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n@@ -8602,8 +8602,24 @@ fi\n     fi\n   fi\n \n+\n+$as_echo \"#define _STRUCTURED_PROC 1\" >>confdefs.h\n+\n+ for ac_header in sys/procfs.h\n+do :\n+  ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/procfs.h\" \"ac_cv_header_sys_procfs_h\" \"$ac_includes_default\"\n+if test \"x$ac_cv_header_sys_procfs_h\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_SYS_PROCFS_H 1\n+_ACEOF\n+\n+fi\n+\n+done\n+\n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for gregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_gregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8612,8 +8628,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8640,7 +8654,8 @@ $as_echo \"#define HAVE_GREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_gregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_gregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8649,8 +8664,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8677,7 +8690,8 @@ $as_echo \"#define HAVE_FPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_fpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_fpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8686,8 +8700,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8714,7 +8726,8 @@ $as_echo \"#define HAVE_PRGREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prfpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prfpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8723,8 +8736,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8751,7 +8762,8 @@ $as_echo \"#define HAVE_PRFPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prfpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prfpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8760,8 +8772,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8788,7 +8798,8 @@ $as_echo \"#define HAVE_PRGREGSET32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpid_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_lwpid_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8797,8 +8808,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8825,7 +8834,8 @@ $as_echo \"#define HAVE_LWPID_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_lwpid_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_lwpid_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for psaddr_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_psaddr_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8834,8 +8844,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -8862,7 +8870,8 @@ $as_echo \"#define HAVE_PSADDR_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_psaddr_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_psaddr_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for elf_fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_elf_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -8871,8 +8880,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()"
    },
    {
      "sha": "27132444cc35698d3c52c5b5fe7eb452342e53bb",
      "filename": "gdbsupport/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,11 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* common.m4 (GDB_AC_COMMON): Use BFD_SYS_PROCFS_H to check for\n+\t<sys/procfs.h>.\n+\t* Makefile.in: Regenerate.\n+\t* configure, config.in: Regenerate.\n+\n 2020-07-28  Tom de Vries  <tdevries@suse.de>\n \n \tPR build/26281"
    },
    {
      "sha": "9763c96cd3d6bffcdaa04223d685d49f9947ce73",
      "filename": "gdbsupport/Makefile.am",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -22,7 +22,8 @@ ACLOCAL_AMFLAGS = -I . -I ../config\n \n AM_CPPFLAGS = -I$(srcdir)/../include -I$(srcdir)/../gdb \\\n     -I../gnulib/import -I$(srcdir)/../gnulib/import \\\n-    -I.. -I$(srcdir)/.. $(INCINTL) -I../bfd -I$(srcdir)/../bfd\n+    -I.. -I$(srcdir)/.. $(INCINTL) -I../bfd -I$(srcdir)/../bfd \\\n+    @LARGEFILE_CPPFLAGS@\n \n override CXX += $(CXX_DIALECT)\n "
    },
    {
      "sha": "0223f6d6b3521335b5c6bf91d88a0c36033b8af9",
      "filename": "gdbsupport/Makefile.in",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -257,6 +257,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LDFLAGS = @LDFLAGS@\n LIBINTL = @LIBINTL@\n LIBINTL_DEP = @LIBINTL_DEP@\n@@ -351,7 +352,8 @@ AUTOMAKE_OPTIONS = no-dist foreign\n ACLOCAL_AMFLAGS = -I . -I ../config\n AM_CPPFLAGS = -I$(srcdir)/../include -I$(srcdir)/../gdb \\\n     -I../gnulib/import -I$(srcdir)/../gnulib/import \\\n-    -I.. -I$(srcdir)/.. $(INCINTL) -I../bfd -I$(srcdir)/../bfd\n+    -I.. -I$(srcdir)/.. $(INCINTL) -I../bfd -I$(srcdir)/../bfd \\\n+    @LARGEFILE_CPPFLAGS@\n \n AM_CXXFLAGS = $(WARN_CFLAGS) $(WERROR_CFLAGS)\n noinst_LIBRARIES = libgdbsupport.a"
    },
    {
      "sha": "e8fd64c7a8e18a9f85ea6a111b9177b0257476f2",
      "filename": "gdbsupport/common.m4",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/common.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/common.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/common.m4?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -46,7 +46,7 @@ AC_DEFUN([GDB_AC_COMMON], [\n \t\t   thread_db.h wait.h dnl\n \t\t   termios.h dnl\n \t\t   dlfcn.h dnl\n-\t\t   linux/elf.h sys/procfs.h proc_service.h dnl\n+\t\t   linux/elf.h proc_service.h dnl\n \t\t   poll.h sys/poll.h sys/select.h)\n \n   AC_FUNC_MMAP\n@@ -173,6 +173,7 @@ AC_DEFUN([GDB_AC_COMMON], [\n     fi\n   fi\n \n+  BFD_SYS_PROCFS_H\n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n     BFD_HAVE_SYS_PROCFS_TYPE(gregset_t)\n     BFD_HAVE_SYS_PROCFS_TYPE(fpregset_t)"
    },
    {
      "sha": "973561b117045d301112dab081839b955501f532",
      "filename": "gdbsupport/config.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/config.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -412,6 +412,9 @@\n /* Define to 1 if you need to in order for `stat' and other things to work. */\n #undef _POSIX_SOURCE\n \n+/* Use structured /proc on Solaris. */\n+#undef _STRUCTURED_PROC\n+\n /* Define to `int' if <sys/types.h> does not define. */\n #undef pid_t\n "
    },
    {
      "sha": "bd95b6d7f490797fcb8a7305a60cfcdf6d27fc5f",
      "filename": "gdbsupport/configure",
      "status": "modified",
      "additions": 83,
      "deletions": 34,
      "changes": 117,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gdbsupport/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -651,6 +651,7 @@ LIBINTL\n USE_NLS\n CXX_DIALECT\n HAVE_CXX11\n+LARGEFILE_CPPFLAGS\n EGREP\n GREP\n CPP\n@@ -5627,15 +5628,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n \n@@ -8404,7 +8446,7 @@ $as_echo \"#define HAVE_LANGINFO_CODESET 1\" >>confdefs.h\n   fi\n \n \n-  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h sys/procfs.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n+  for ac_header in linux/perf_event.h locale.h memory.h signal.h \t\t   sys/resource.h sys/socket.h \t\t   sys/un.h sys/wait.h \t\t   thread_db.h wait.h \t\t   termios.h \t\t   dlfcn.h \t\t   linux/elf.h proc_service.h \t\t   poll.h sys/poll.h sys/select.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n@@ -10300,8 +10342,24 @@ fi\n     fi\n   fi\n \n+\n+$as_echo \"#define _STRUCTURED_PROC 1\" >>confdefs.h\n+\n+ for ac_header in sys/procfs.h\n+do :\n+  ac_fn_c_check_header_mongrel \"$LINENO\" \"sys/procfs.h\" \"ac_cv_header_sys_procfs_h\" \"$ac_includes_default\"\n+if test \"x$ac_cv_header_sys_procfs_h\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_SYS_PROCFS_H 1\n+_ACEOF\n+\n+fi\n+\n+done\n+\n   if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for gregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for gregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_gregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10310,8 +10368,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10338,7 +10394,8 @@ $as_echo \"#define HAVE_GREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_gregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_gregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10347,8 +10404,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10375,7 +10430,8 @@ $as_echo \"#define HAVE_FPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_fpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_fpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10384,8 +10440,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10412,7 +10466,8 @@ $as_echo \"#define HAVE_PRGREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prfpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prfpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prfpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10421,8 +10476,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10449,7 +10502,8 @@ $as_echo \"#define HAVE_PRFPREGSET_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prfpregset_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prfpregset_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for prgregset32_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for prgregset32_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_prgregset32_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10458,8 +10512,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10486,7 +10538,8 @@ $as_echo \"#define HAVE_PRGREGSET32_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_prgregset32_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_prgregset32_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lwpid_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for lwpid_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_lwpid_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10495,8 +10548,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10523,7 +10574,8 @@ $as_echo \"#define HAVE_LWPID_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_lwpid_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_lwpid_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for psaddr_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for psaddr_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_psaddr_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10532,8 +10584,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()\n@@ -10560,7 +10610,8 @@ $as_echo \"#define HAVE_PSADDR_T 1\" >>confdefs.h\n  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $bfd_cv_have_sys_procfs_type_psaddr_t\" >&5\n $as_echo \"$bfd_cv_have_sys_procfs_type_psaddr_t\" >&6; }\n \n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n+\n+ { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for elf_fpregset_t in sys/procfs.h\" >&5\n $as_echo_n \"checking for elf_fpregset_t in sys/procfs.h... \" >&6; }\n  if ${bfd_cv_have_sys_procfs_type_elf_fpregset_t+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n@@ -10569,8 +10620,6 @@ else\n /* end confdefs.h.  */\n \n #define _SYSCALL32\n-/* Needed for new procfs interface on sparc-solaris.  */\n-#define _STRUCTURED_PROC 1\n #include <sys/procfs.h>\n int\n main ()"
    },
    {
      "sha": "eb84213a155ba2d0eec79193f887d55b10dd2e87",
      "filename": "gnulib/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,8 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* configure.ac: Run ACX_LARGEFILE before gl_EARLY.\n+\t* configure: Regenerate.\n+\n 2020-02-22  Simon Marchi  <simon.marchi@efficios.com>\n \n \t* update-gnulib.sh (GNULIB_COMMIT_SHA1): Bump to"
    },
    {
      "sha": "2ffbf0d54bd1f4e03f7179292fa6f367cb4223ff",
      "filename": "gnulib/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1122,6 +1122,7 @@ INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INT32_MAX_LT_INTMAX_MAX = @INT32_MAX_LT_INTMAX_MAX@\n INT64_MAX_EQ_LONG_MAX = @INT64_MAX_EQ_LONG_MAX@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LDFLAGS = @LDFLAGS@\n LIBGNU_LIBDEPS = @LIBGNU_LIBDEPS@\n LIBGNU_LTLIBDEPS = @LIBGNU_LTLIBDEPS@"
    },
    {
      "sha": "87c16ace66bc7d74196c8db45730b9728a002285",
      "filename": "gnulib/configure",
      "status": "modified",
      "additions": 658,
      "deletions": 817,
      "changes": 1475,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1814,6 +1814,10 @@ ALLOCA_H\n ALLOCA\n GL_COND_LIBTOOL_FALSE\n GL_COND_LIBTOOL_TRUE\n+RANLIB\n+ARFLAGS\n+AR\n+LARGEFILE_CPPFLAGS\n target_os\n target_vendor\n target_cpu\n@@ -1826,9 +1830,6 @@ build_os\n build_vendor\n build_cpu\n build\n-RANLIB\n-ARFLAGS\n-AR\n EGREP\n GREP\n CPP\n@@ -1884,9 +1885,9 @@ ac_subst_files=''\n ac_user_opts='\n enable_option_checking\n enable_maintainer_mode\n+enable_plugins\n enable_largefile\n enable_threads\n-enable_plugins\n enable_cross_guesses\n enable_dependency_tracking\n enable_silent_rules\n@@ -2522,11 +2523,11 @@ Optional Features:\n   --enable-maintainer-mode\n                           enable make rules and dependencies not useful (and\n                           sometimes confusing) to the casual installer\n+  --enable-plugins        Enable support for plugins\n   --disable-largefile     omit support for large files\n   --enable-threads={isoc|posix|isoc+posix|windows}\n                           specify multithreading API\n   --disable-threads       build without multithread safety\n-  --enable-plugins        Enable support for plugins\n   --enable-cross-guesses={conservative|risky}\n                           specify policy for cross-compilation guesses\n   --enable-dependency-tracking\n@@ -5680,252 +5681,8 @@ $as_echo \"$ac_cv_should_define__xopen_source\" >&6; }\n   $as_echo \"#define _HPUX_ALT_XOPEN_SOCKET_API 1\" >>confdefs.h\n \n \n-\n-\n-\n-\n-\n-\n-\n-\n-\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for Minix Amsterdam compiler\" >&5\n-$as_echo_n \"checking for Minix Amsterdam compiler... \" >&6; }\n-if ${gl_cv_c_amsterdam_compiler+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-\n-      cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-#ifdef __ACK__\n-Amsterdam\n-#endif\n-\n-_ACEOF\n-if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n-  $EGREP \"Amsterdam\" >/dev/null 2>&1; then :\n-  gl_cv_c_amsterdam_compiler=yes\n-else\n-  gl_cv_c_amsterdam_compiler=no\n-fi\n-rm -f conftest*\n-\n-\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gl_cv_c_amsterdam_compiler\" >&5\n-$as_echo \"$gl_cv_c_amsterdam_compiler\" >&6; }\n-\n-      if test $gl_cv_c_amsterdam_compiler = yes; then\n-    if test -z \"$AR\"; then\n-      AR='cc -c.a'\n-    fi\n-    if test -z \"$ARFLAGS\"; then\n-      ARFLAGS='-o'\n-    fi\n-  else\n-                                                :\n-  fi\n-\n-        if test -n \"$ac_tool_prefix\"; then\n-  # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}ar; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_AR+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$AR\"; then\n-  ac_cv_prog_AR=\"$AR\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_AR=\"${ac_tool_prefix}ar\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-AR=$ac_cv_prog_AR\n-if test -n \"$AR\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $AR\" >&5\n-$as_echo \"$AR\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-\n-fi\n-if test -z \"$ac_cv_prog_AR\"; then\n-  ac_ct_AR=$AR\n-  # Extract the first word of \"ar\", so it can be a program name with args.\n-set dummy ar; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_ac_ct_AR+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$ac_ct_AR\"; then\n-  ac_cv_prog_ac_ct_AR=\"$ac_ct_AR\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_ac_ct_AR=\"ar\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-ac_ct_AR=$ac_cv_prog_ac_ct_AR\n-if test -n \"$ac_ct_AR\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR\" >&5\n-$as_echo \"$ac_ct_AR\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-  if test \"x$ac_ct_AR\" = x; then\n-    AR=\"ar\"\n-  else\n-    case $cross_compiling:$ac_tool_warned in\n-yes:)\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n-$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n-ac_tool_warned=yes ;;\n-esac\n-    AR=$ac_ct_AR\n-  fi\n-else\n-  AR=\"$ac_cv_prog_AR\"\n-fi\n-\n-  if test -z \"$ARFLAGS\"; then\n-    ARFLAGS='cr'\n-  fi\n-\n-\n-\n-  if test -z \"$RANLIB\"; then\n-    if test $gl_cv_c_amsterdam_compiler = yes; then\n-      RANLIB=':'\n-    else\n-            if test -n \"$ac_tool_prefix\"; then\n-  # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n-set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_RANLIB+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$RANLIB\"; then\n-  ac_cv_prog_RANLIB=\"$RANLIB\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_RANLIB=\"${ac_tool_prefix}ranlib\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-RANLIB=$ac_cv_prog_RANLIB\n-if test -n \"$RANLIB\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $RANLIB\" >&5\n-$as_echo \"$RANLIB\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-\n-fi\n-if test -z \"$ac_cv_prog_RANLIB\"; then\n-  ac_ct_RANLIB=$RANLIB\n-  # Extract the first word of \"ranlib\", so it can be a program name with args.\n-set dummy ranlib; ac_word=$2\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n-$as_echo_n \"checking for $ac_word... \" >&6; }\n-if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  if test -n \"$ac_ct_RANLIB\"; then\n-  ac_cv_prog_ac_ct_RANLIB=\"$ac_ct_RANLIB\" # Let the user override the test.\n-else\n-as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n-for as_dir in $PATH\n-do\n-  IFS=$as_save_IFS\n-  test -z \"$as_dir\" && as_dir=.\n-    for ac_exec_ext in '' $ac_executable_extensions; do\n-  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n-    ac_cv_prog_ac_ct_RANLIB=\"ranlib\"\n-    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n-    break 2\n-  fi\n-done\n-  done\n-IFS=$as_save_IFS\n-\n-fi\n-fi\n-ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB\n-if test -n \"$ac_ct_RANLIB\"; then\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB\" >&5\n-$as_echo \"$ac_ct_RANLIB\" >&6; }\n-else\n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n-$as_echo \"no\" >&6; }\n-fi\n-\n-  if test \"x$ac_ct_RANLIB\" = x; then\n-    RANLIB=\":\"\n-  else\n-    case $cross_compiling:$ac_tool_warned in\n-yes:)\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n-$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n-ac_tool_warned=yes ;;\n-esac\n-    RANLIB=$ac_ct_RANLIB\n-  fi\n-else\n-  RANLIB=\"$ac_cv_prog_RANLIB\"\n-fi\n-\n-    fi\n-  fi\n-\n-\n-\n+# Needs to run before gl_EARLY so it can override AC_SYS_LARGEFILE included\n+# there.\n ac_aux_dir=\n for ac_dir in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"; do\n   if test -f \"$ac_dir/install-sh\"; then\n@@ -6026,34 +5783,210 @@ IFS=$ac_save_IFS\n case $host_os in *\\ *) host_os=`echo \"$host_os\" | sed 's/ /-/g'`;; esac\n \n \n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking target system type\" >&5\n+$as_echo_n \"checking target system type... \" >&6; }\n+if ${ac_cv_target+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test \"x$target_alias\" = x; then\n+  ac_cv_target=$ac_cv_host\n+else\n+  ac_cv_target=`$SHELL \"$ac_aux_dir/config.sub\" $target_alias` ||\n+    as_fn_error $? \"$SHELL $ac_aux_dir/config.sub $target_alias failed\" \"$LINENO\" 5\n+fi\n \n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_target\" >&5\n+$as_echo \"$ac_cv_target\" >&6; }\n+case $ac_cv_target in\n+*-*-*) ;;\n+*) as_fn_error $? \"invalid value of canonical target\" \"$LINENO\" 5;;\n+esac\n+target=$ac_cv_target\n+ac_save_IFS=$IFS; IFS='-'\n+set x $ac_cv_target\n+shift\n+target_cpu=$1\n+target_vendor=$2\n+shift; shift\n+# Remember, the first character of IFS is used to create $*,\n+# except with old shells:\n+target_os=$*\n+IFS=$ac_save_IFS\n+case $target_os in *\\ *) target_os=`echo \"$target_os\" | sed 's/ /-/g'`;; esac\n \n \n-  # IEEE behaviour is the default on all CPUs except Alpha and SH\n-  # (according to the test results of Bruno Haible's ieeefp/fenv_default.m4\n-  # and the GCC 4.1.2 manual).\n-  case \"$host_cpu\" in\n-    alpha*)\n-      # On Alpha systems, a compiler option provides the behaviour.\n-      # See the ieee(3) manual page, also available at\n-      # <https://backdrift.org/man/tru64/man3/ieee.3.html>\n-      if test -n \"$GCC\"; then\n-        # GCC has the option -mieee.\n-        # For full IEEE compliance (rarely needed), use option -mieee-with-inexact.\n-        CPPFLAGS=\"$CPPFLAGS -mieee\"\n-      else\n-        # Compaq (ex-DEC) C has the option -ieee, equivalent to -ieee_with_no_inexact.\n-        # For full IEEE compliance (rarely needed), use option -ieee_with_inexact.\n-        CPPFLAGS=\"$CPPFLAGS -ieee\"\n-      fi\n-      ;;\n-    sh*)\n-      if test -n \"$GCC\"; then\n-        # GCC has the option -mieee.\n-        CPPFLAGS=\"$CPPFLAGS -mieee\"\n+# The aliases save the names the user supplied, while $host etc.\n+# will get canonicalized.\n+test -n \"$target_alias\" &&\n+  test \"$program_prefix$program_suffix$program_transform_name\" = \\\n+    NONENONEs,x,x, &&\n+  program_prefix=${target_alias}-\n+\n+# The tests for host and target for $enable_largefile require\n+# canonical names.\n+\n+\n+\n+# As the $enable_largefile decision depends on --enable-plugins we must set it\n+# even in directories otherwise not depending on the $plugins option.\n+\n+\n+  maybe_plugins=no\n+  for ac_header in dlfcn.h\n+do :\n+  ac_fn_c_check_header_compile \"$LINENO\" \"dlfcn.h\" \"ac_cv_header_dlfcn_h\" \"$ac_includes_default\n+\"\n+if test \"x$ac_cv_header_dlfcn_h\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_DLFCN_H 1\n+_ACEOF\n+ maybe_plugins=yes\n+fi\n+\n+done\n+\n+  for ac_header in windows.h\n+do :\n+  ac_fn_c_check_header_compile \"$LINENO\" \"windows.h\" \"ac_cv_header_windows_h\" \"$ac_includes_default\n+\"\n+if test \"x$ac_cv_header_windows_h\" = xyes; then :\n+  cat >>confdefs.h <<_ACEOF\n+#define HAVE_WINDOWS_H 1\n+_ACEOF\n+ maybe_plugins=yes\n+fi\n+\n+done\n+\n+\n+  # Check whether --enable-plugins was given.\n+if test \"${enable_plugins+set}\" = set; then :\n+  enableval=$enable_plugins; case \"${enableval}\" in\n+      no) plugins=no ;;\n+      *) plugins=yes\n+         if test \"$maybe_plugins\" != \"yes\" ; then\n+\t   as_fn_error $? \"Building with plugin support requires a host that supports dlopen.\" \"$LINENO\" 5\n+\t fi ;;\n+     esac\n+else\n+  plugins=$maybe_plugins\n+\n+fi\n+\n+  if test \"$plugins\" = \"yes\"; then\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for library containing dlsym\" >&5\n+$as_echo_n \"checking for library containing dlsym... \" >&6; }\n+if ${ac_cv_search_dlsym+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  ac_func_search_save_LIBS=$LIBS\n+cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+\n+/* Override any GCC internal prototype to avoid an error.\n+   Use char because int might match the return type of a GCC\n+   builtin and then its argument prototype would still apply.  */\n+#ifdef __cplusplus\n+extern \"C\"\n+#endif\n+char dlsym ();\n+int\n+main ()\n+{\n+return dlsym ();\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+for ac_lib in '' dl; do\n+  if test -z \"$ac_lib\"; then\n+    ac_res=\"none required\"\n+  else\n+    ac_res=-l$ac_lib\n+    LIBS=\"-l$ac_lib  $ac_func_search_save_LIBS\"\n+  fi\n+  if ac_fn_c_try_link \"$LINENO\"; then :\n+  ac_cv_search_dlsym=$ac_res\n+fi\n+rm -f core conftest.err conftest.$ac_objext \\\n+    conftest$ac_exeext\n+  if ${ac_cv_search_dlsym+:} false; then :\n+  break\n+fi\n+done\n+if ${ac_cv_search_dlsym+:} false; then :\n+\n+else\n+  ac_cv_search_dlsym=no\n+fi\n+rm conftest.$ac_ext\n+LIBS=$ac_func_search_save_LIBS\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_dlsym\" >&5\n+$as_echo \"$ac_cv_search_dlsym\" >&6; }\n+ac_res=$ac_cv_search_dlsym\n+if test \"$ac_res\" != no; then :\n+  test \"$ac_res\" = \"none required\" || LIBS=\"$ac_res $LIBS\"\n+\n+fi\n+\n+  fi\n+\n+\n+case \"${host}\" in\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n       fi\n-      ;;\n-  esac\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n+    ;;\n+esac\n \n # Check whether --enable-largefile was given.\n if test \"${enable_largefile+set}\" = set; then :\n@@ -6263,607 +6196,515 @@ fi\n \n \n \n-  # Check whether --enable-threads was given.\n-if test \"${enable_threads+set}\" = set; then :\n-  enableval=$enable_threads; gl_use_threads=$enableval\n-else\n-  if test -n \"$gl_use_threads_default\"; then\n-       gl_use_threads=\"$gl_use_threads_default\"\n-     else\n-       case \"$host_os\" in\n-                                    osf*) gl_use_threads=no ;;\n-                                    cygwin*)\n-               case `uname -r` in\n-                 1.[0-5].*) gl_use_threads=no ;;\n-                 *)         gl_use_threads=yes ;;\n-               esac\n-               ;;\n-                  mingw*)\n-               case \"$gl_use_winpthreads_default\" in\n-                 yes) gl_use_threads=posix ;;\n-                 no)  gl_use_threads=windows ;;\n-                 *)   gl_use_threads=yes ;;\n-               esac\n-               ;;\n-         *)    gl_use_threads=yes ;;\n-       esac\n-     fi\n \n-fi\n \n-  if test \"$gl_use_threads\" = yes \\\n-     || test \"$gl_use_threads\" = isoc \\\n-     || test \"$gl_use_threads\" = posix \\\n-     || test \"$gl_use_threads\" = isoc+posix; then\n-    # For using <threads.h> or <pthread.h>:\n \n \n-  if test -z \"$gl_anythreadlib_early_done\"; then\n-    case \"$host_os\" in\n-      osf*)\n-        # On OSF/1, the compiler needs the flag -D_REENTRANT so that it\n-        # groks <pthread.h>. cc also understands the flag -pthread, but\n-        # we don't use it because 1. gcc-2.95 doesn't understand -pthread,\n-        # 2. putting a flag into CPPFLAGS that has an effect on the linker\n-        # causes the AC_LINK_IFELSE test below to succeed unexpectedly,\n-        # leading to wrong values of LIBTHREAD and LTLIBTHREAD.\n-        CPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n-        ;;\n-    esac\n-    # Some systems optimize for single-threaded programs by default, and\n-    # need special flags to disable these optimizations. For example, the\n-    # definition of 'errno' in <errno.h>.\n-    case \"$host_os\" in\n-      aix* | freebsd*) CPPFLAGS=\"$CPPFLAGS -D_THREAD_SAFE\" ;;\n-      solaris*) CPPFLAGS=\"$CPPFLAGS -D_REENTRANT\" ;;\n-    esac\n-    gl_anythreadlib_early_done=done\n-  fi\n-\n-  fi\n-\n-\n-\n-  # Pre-early section.\n-\n-\n-\n-\n-  # Code from module absolute-header:\n-  # Code from module alloca:\n-  # Code from module alloca-opt:\n-  # Code from module arpa_inet:\n-  # Code from module assure:\n-  # Code from module at-internal:\n-  # Code from module builtin-expect:\n-  # Code from module c99:\n-  # Code from module canonicalize-lgpl:\n-  # Code from module chdir:\n-  # Code from module chdir-long:\n-  # Code from module cloexec:\n-  # Code from module close:\n-  # Code from module closedir:\n-  # Code from module count-one-bits:\n-  # Code from module d-ino:\n-  # Code from module d-type:\n-  # Code from module dirent:\n-  # Code from module dirfd:\n-  # Code from module dirname-lgpl:\n-  # Code from module dosname:\n-  # Code from module double-slash-root:\n-  # Code from module dup:\n-  # Code from module dup2:\n-  # Code from module environ:\n-  # Code from module errno:\n-  # Code from module error:\n-  # Code from module exitfail:\n-  # Code from module extensions:\n-  # Code from module extern-inline:\n-  # Code from module fchdir:\n-  # Code from module fcntl:\n-  # Code from module fcntl-h:\n-  # Code from module fd-hook:\n-  # Code from module fd-safer-flag:\n-  # Code from module fdopendir:\n-  # Code from module filename:\n-  # Code from module filenamecat-lgpl:\n-  # Code from module flexmember:\n-  # Code from module float:\n-  # Code from module fnmatch:\n-  # Code from module fnmatch-gnu:\n-  # Code from module fnmatch-h:\n-  # Code from module fpieee:\n-\n-  # Code from module fpucw:\n-  # Code from module frexp:\n-  # Code from module frexpl:\n-  # Code from module fstat:\n-  # Code from module fstatat:\n-  # Code from module getcwd:\n-  # Code from module getcwd-lgpl:\n-  # Code from module getdtablesize:\n-  # Code from module getlogin_r:\n-  # Code from module getprogname:\n-  # Code from module gettext-h:\n-  # Code from module gettimeofday:\n-  # Code from module glob:\n-  # Code from module glob-h:\n-  # Code from module hard-locale:\n-  # Code from module include_next:\n-  # Code from module inet_ntop:\n-  # Code from module intprops:\n-  # Code from module inttypes:\n-  # Code from module inttypes-incomplete:\n-  # Code from module isnand-nolibm:\n-  # Code from module isnanl-nolibm:\n-  # Code from module largefile:\n-\n-  # Code from module libc-config:\n-  # Code from module limits-h:\n-  # Code from module localcharset:\n-  # Code from module locale:\n-  # Code from module localtime-buffer:\n-  # Code from module lock:\n-  # Code from module lstat:\n-  # Code from module malloc-posix:\n-  # Code from module malloca:\n-  # Code from module math:\n-  # Code from module mbrtowc:\n-  # Code from module mbsinit:\n-  # Code from module mbsrtowcs:\n-  # Code from module memchr:\n-  # Code from module memmem:\n-  # Code from module memmem-simple:\n-  # Code from module mempcpy:\n-  # Code from module memrchr:\n-  # Code from module mkdir:\n-  # Code from module mkdtemp:\n-  # Code from module mkostemp:\n-  # Code from module msvc-inval:\n-  # Code from module msvc-nothrow:\n-  # Code from module multiarch:\n-  # Code from module netinet_in:\n-  # Code from module nocrash:\n-  # Code from module open:\n-  # Code from module openat:\n-  # Code from module openat-die:\n-  # Code from module openat-h:\n-  # Code from module opendir:\n-  # Code from module pathmax:\n-  # Code from module rawmemchr:\n-  # Code from module readdir:\n-  # Code from module readlink:\n-  # Code from module realloc-posix:\n-  # Code from module rename:\n-  # Code from module rewinddir:\n-  # Code from module rmdir:\n-  # Code from module same-inode:\n-  # Code from module save-cwd:\n-  # Code from module scratch_buffer:\n-  # Code from module setenv:\n-  # Code from module setlocale-null:\n-  # Code from module signal-h:\n-  # Code from module snippet/_Noreturn:\n-  # Code from module snippet/arg-nonnull:\n-  # Code from module snippet/c++defs:\n-  # Code from module snippet/warn-on-use:\n-  # Code from module socklen:\n-  # Code from module ssize_t:\n-  # Code from module stat:\n-  # Code from module stat-time:\n-  # Code from module std-gnu11:\n-  # Code from module stdalign:\n-  # Code from module stdbool:\n-  # Code from module stddef:\n-  # Code from module stdint:\n-  # Code from module stdio:\n-  # Code from module stdlib:\n-  # Code from module strchrnul:\n-  # Code from module strdup-posix:\n-  # Code from module streq:\n-  # Code from module strerror:\n-  # Code from module strerror-override:\n-  # Code from module strerror_r-posix:\n-  # Code from module string:\n-  # Code from module strnlen1:\n-  # Code from module strstr:\n-  # Code from module strstr-simple:\n-  # Code from module strtok_r:\n-  # Code from module sys_socket:\n-  # Code from module sys_stat:\n-  # Code from module sys_time:\n-  # Code from module sys_types:\n-  # Code from module sys_uio:\n-  # Code from module tempname:\n-  # Code from module threadlib:\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for Minix Amsterdam compiler\" >&5\n+$as_echo_n \"checking for Minix Amsterdam compiler... \" >&6; }\n+if ${gl_cv_c_amsterdam_compiler+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n \n+      cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n \n+#ifdef __ACK__\n+Amsterdam\n+#endif\n \n-  # Code from module time:\n-  # Code from module time_r:\n-  # Code from module unistd:\n-  # Code from module unistd-safer:\n-  # Code from module unsetenv:\n-  # Code from module update-copyright:\n-  # Code from module verify:\n-  # Code from module wchar:\n-  # Code from module wctype-h:\n-  # Code from module windows-mutex:\n-  # Code from module windows-once:\n-  # Code from module windows-recmutex:\n-  # Code from module windows-rwlock:\n-  # Code from module xalloc-oversized:\n+_ACEOF\n+if (eval \"$ac_cpp conftest.$ac_ext\") 2>&5 |\n+  $EGREP \"Amsterdam\" >/dev/null 2>&1; then :\n+  gl_cv_c_amsterdam_compiler=yes\n+else\n+  gl_cv_c_amsterdam_compiler=no\n+fi\n+rm -f conftest*\n \n \n-am_cv_prog_cc_stdc=$ac_cv_prog_cc_stdc\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gl_cv_c_amsterdam_compiler\" >&5\n+$as_echo \"$gl_cv_c_amsterdam_compiler\" >&6; }\n \n+      if test $gl_cv_c_amsterdam_compiler = yes; then\n+    if test -z \"$AR\"; then\n+      AR='cc -c.a'\n+    fi\n+    if test -z \"$ARFLAGS\"; then\n+      ARFLAGS='-o'\n+    fi\n+  else\n+                                                :\n+  fi\n \n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking target system type\" >&5\n-$as_echo_n \"checking target system type... \" >&6; }\n-if ${ac_cv_target+:} false; then :\n+        if test -n \"$ac_tool_prefix\"; then\n+  # Extract the first word of \"${ac_tool_prefix}ar\", so it can be a program name with args.\n+set dummy ${ac_tool_prefix}ar; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_AR+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-  if test \"x$target_alias\" = x; then\n-  ac_cv_target=$ac_cv_host\n+  if test -n \"$AR\"; then\n+  ac_cv_prog_AR=\"$AR\" # Let the user override the test.\n else\n-  ac_cv_target=`$SHELL \"$ac_aux_dir/config.sub\" $target_alias` ||\n-    as_fn_error $? \"$SHELL $ac_aux_dir/config.sub $target_alias failed\" \"$LINENO\" 5\n-fi\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_AR=\"${ac_tool_prefix}ar\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+  done\n+IFS=$as_save_IFS\n \n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_target\" >&5\n-$as_echo \"$ac_cv_target\" >&6; }\n-case $ac_cv_target in\n-*-*-*) ;;\n-*) as_fn_error $? \"invalid value of canonical target\" \"$LINENO\" 5;;\n-esac\n-target=$ac_cv_target\n-ac_save_IFS=$IFS; IFS='-'\n-set x $ac_cv_target\n-shift\n-target_cpu=$1\n-target_vendor=$2\n-shift; shift\n-# Remember, the first character of IFS is used to create $*,\n-# except with old shells:\n-target_os=$*\n-IFS=$ac_save_IFS\n-case $target_os in *\\ *) target_os=`echo \"$target_os\" | sed 's/ /-/g'`;; esac\n+fi\n+AR=$ac_cv_prog_AR\n+if test -n \"$AR\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $AR\" >&5\n+$as_echo \"$AR\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n \n \n-# The aliases save the names the user supplied, while $host etc.\n-# will get canonicalized.\n-test -n \"$target_alias\" &&\n-  test \"$program_prefix$program_suffix$program_transform_name\" = \\\n-    NONENONEs,x,x, &&\n-  program_prefix=${target_alias}-\n-\n-# The tests for host and target for $enable_largefile require\n-# canonical names.\n+fi\n+if test -z \"$ac_cv_prog_AR\"; then\n+  ac_ct_AR=$AR\n+  # Extract the first word of \"ar\", so it can be a program name with args.\n+set dummy ar; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_ac_ct_AR+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -n \"$ac_ct_AR\"; then\n+  ac_cv_prog_ac_ct_AR=\"$ac_ct_AR\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_AR=\"ar\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n+done\n+  done\n+IFS=$as_save_IFS\n \n+fi\n+fi\n+ac_ct_AR=$ac_cv_prog_ac_ct_AR\n+if test -n \"$ac_ct_AR\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_AR\" >&5\n+$as_echo \"$ac_ct_AR\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n \n+  if test \"x$ac_ct_AR\" = x; then\n+    AR=\"ar\"\n+  else\n+    case $cross_compiling:$ac_tool_warned in\n+yes:)\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n+$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n+ac_tool_warned=yes ;;\n+esac\n+    AR=$ac_ct_AR\n+  fi\n+else\n+  AR=\"$ac_cv_prog_AR\"\n+fi\n \n-# As the $enable_largefile decision depends on --enable-plugins we must set it\n-# even in directories otherwise not depending on the $plugins option.\n+  if test -z \"$ARFLAGS\"; then\n+    ARFLAGS='cr'\n+  fi\n \n \n-  maybe_plugins=no\n-  for ac_header in dlfcn.h\n-do :\n-  ac_fn_c_check_header_compile \"$LINENO\" \"dlfcn.h\" \"ac_cv_header_dlfcn_h\" \"$ac_includes_default\n-\"\n-if test \"x$ac_cv_header_dlfcn_h\" = xyes; then :\n-  cat >>confdefs.h <<_ACEOF\n-#define HAVE_DLFCN_H 1\n-_ACEOF\n- maybe_plugins=yes\n-fi\n \n+  if test -z \"$RANLIB\"; then\n+    if test $gl_cv_c_amsterdam_compiler = yes; then\n+      RANLIB=':'\n+    else\n+            if test -n \"$ac_tool_prefix\"; then\n+  # Extract the first word of \"${ac_tool_prefix}ranlib\", so it can be a program name with args.\n+set dummy ${ac_tool_prefix}ranlib; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_RANLIB+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  if test -n \"$RANLIB\"; then\n+  ac_cv_prog_RANLIB=\"$RANLIB\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_RANLIB=\"${ac_tool_prefix}ranlib\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n+  fi\n done\n+  done\n+IFS=$as_save_IFS\n \n-  for ac_header in windows.h\n-do :\n-  ac_fn_c_check_header_compile \"$LINENO\" \"windows.h\" \"ac_cv_header_windows_h\" \"$ac_includes_default\n-\"\n-if test \"x$ac_cv_header_windows_h\" = xyes; then :\n-  cat >>confdefs.h <<_ACEOF\n-#define HAVE_WINDOWS_H 1\n-_ACEOF\n- maybe_plugins=yes\n fi\n-\n-done\n-\n-\n-  # Check whether --enable-plugins was given.\n-if test \"${enable_plugins+set}\" = set; then :\n-  enableval=$enable_plugins; case \"${enableval}\" in\n-      no) plugins=no ;;\n-      *) plugins=yes\n-         if test \"$maybe_plugins\" != \"yes\" ; then\n-\t   as_fn_error $? \"Building with plugin support requires a host that supports dlopen.\" \"$LINENO\" 5\n-\t fi ;;\n-     esac\n+fi\n+RANLIB=$ac_cv_prog_RANLIB\n+if test -n \"$RANLIB\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $RANLIB\" >&5\n+$as_echo \"$RANLIB\" >&6; }\n else\n-  plugins=$maybe_plugins\n-\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n fi\n \n-  if test \"$plugins\" = \"yes\"; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for library containing dlsym\" >&5\n-$as_echo_n \"checking for library containing dlsym... \" >&6; }\n-if ${ac_cv_search_dlsym+:} false; then :\n+\n+fi\n+if test -z \"$ac_cv_prog_RANLIB\"; then\n+  ac_ct_RANLIB=$RANLIB\n+  # Extract the first word of \"ranlib\", so it can be a program name with args.\n+set dummy ranlib; ac_word=$2\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for $ac_word\" >&5\n+$as_echo_n \"checking for $ac_word... \" >&6; }\n+if ${ac_cv_prog_ac_ct_RANLIB+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-  ac_func_search_save_LIBS=$LIBS\n-cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-\n-/* Override any GCC internal prototype to avoid an error.\n-   Use char because int might match the return type of a GCC\n-   builtin and then its argument prototype would still apply.  */\n-#ifdef __cplusplus\n-extern \"C\"\n-#endif\n-char dlsym ();\n-int\n-main ()\n-{\n-return dlsym ();\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-for ac_lib in '' dl; do\n-  if test -z \"$ac_lib\"; then\n-    ac_res=\"none required\"\n-  else\n-    ac_res=-l$ac_lib\n-    LIBS=\"-l$ac_lib  $ac_func_search_save_LIBS\"\n+  if test -n \"$ac_ct_RANLIB\"; then\n+  ac_cv_prog_ac_ct_RANLIB=\"$ac_ct_RANLIB\" # Let the user override the test.\n+else\n+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR\n+for as_dir in $PATH\n+do\n+  IFS=$as_save_IFS\n+  test -z \"$as_dir\" && as_dir=.\n+    for ac_exec_ext in '' $ac_executable_extensions; do\n+  if as_fn_executable_p \"$as_dir/$ac_word$ac_exec_ext\"; then\n+    ac_cv_prog_ac_ct_RANLIB=\"ranlib\"\n+    $as_echo \"$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext\" >&5\n+    break 2\n   fi\n-  if ac_fn_c_try_link \"$LINENO\"; then :\n-  ac_cv_search_dlsym=$ac_res\n-fi\n-rm -f core conftest.err conftest.$ac_objext \\\n-    conftest$ac_exeext\n-  if ${ac_cv_search_dlsym+:} false; then :\n-  break\n-fi\n done\n-if ${ac_cv_search_dlsym+:} false; then :\n+  done\n+IFS=$as_save_IFS\n \n-else\n-  ac_cv_search_dlsym=no\n fi\n-rm conftest.$ac_ext\n-LIBS=$ac_func_search_save_LIBS\n fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_search_dlsym\" >&5\n-$as_echo \"$ac_cv_search_dlsym\" >&6; }\n-ac_res=$ac_cv_search_dlsym\n-if test \"$ac_res\" != no; then :\n-  test \"$ac_res\" = \"none required\" || LIBS=\"$ac_res $LIBS\"\n+ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB\n+if test -n \"$ac_ct_RANLIB\"; then\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_ct_RANLIB\" >&5\n+$as_echo \"$ac_ct_RANLIB\" >&6; }\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no\" >&5\n+$as_echo \"no\" >&6; }\n+fi\n \n+  if test \"x$ac_ct_RANLIB\" = x; then\n+    RANLIB=\":\"\n+  else\n+    case $cross_compiling:$ac_tool_warned in\n+yes:)\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet\" >&5\n+$as_echo \"$as_me: WARNING: using cross tools not prefixed with host triplet\" >&2;}\n+ac_tool_warned=yes ;;\n+esac\n+    RANLIB=$ac_ct_RANLIB\n+  fi\n+else\n+  RANLIB=\"$ac_cv_prog_RANLIB\"\n fi\n \n+    fi\n   fi\n \n \n-case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n-    ;;\n-esac\n \n-# Check whether --enable-largefile was given.\n-if test \"${enable_largefile+set}\" = set; then :\n-  enableval=$enable_largefile;\n-fi\n \n-if test \"$enable_largefile\" != no; then\n \n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for special C compiler options needed for large files\" >&5\n-$as_echo_n \"checking for special C compiler options needed for large files... \" >&6; }\n-if ${ac_cv_sys_largefile_CC+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  ac_cv_sys_largefile_CC=no\n-     if test \"$GCC\" != yes; then\n-       ac_save_CC=$CC\n-       while :; do\n-         # IRIX 6.2 and later do not support large files by default,\n-         # so use the C compiler's -n32 option if that helps.\n-         cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <sys/types.h>\n- /* Check that off_t can represent 2**63 - 1 correctly.\n-    We can't simply define LARGE_OFF_T to be 9223372036854775807,\n-    since some C++ compilers masquerading as C compilers\n-    incorrectly reject 9223372036854775807.  */\n-#define LARGE_OFF_T (((off_t) 1 << 62) - 1 + ((off_t) 1 << 62))\n-  int off_t_is_large[(LARGE_OFF_T % 2147483629 == 721\n-                       && LARGE_OFF_T % 2147483647 == 1)\n-                      ? 1 : -1];\n-int\n-main ()\n-{\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-         if ac_fn_c_try_compile \"$LINENO\"; then :\n-  break\n-fi\n-rm -f core conftest.err conftest.$ac_objext\n-         CC=\"$CC -n32\"\n-         if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_sys_largefile_CC=' -n32'; break\n-fi\n-rm -f core conftest.err conftest.$ac_objext\n-         break\n-       done\n-       CC=$ac_save_CC\n-       rm -f conftest.$ac_ext\n-    fi\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_largefile_CC\" >&5\n-$as_echo \"$ac_cv_sys_largefile_CC\" >&6; }\n-  if test \"$ac_cv_sys_largefile_CC\" != no; then\n-    CC=$CC$ac_cv_sys_largefile_CC\n-  fi\n+  # IEEE behaviour is the default on all CPUs except Alpha and SH\n+  # (according to the test results of Bruno Haible's ieeefp/fenv_default.m4\n+  # and the GCC 4.1.2 manual).\n+  case \"$host_cpu\" in\n+    alpha*)\n+      # On Alpha systems, a compiler option provides the behaviour.\n+      # See the ieee(3) manual page, also available at\n+      # <https://backdrift.org/man/tru64/man3/ieee.3.html>\n+      if test -n \"$GCC\"; then\n+        # GCC has the option -mieee.\n+        # For full IEEE compliance (rarely needed), use option -mieee-with-inexact.\n+        CPPFLAGS=\"$CPPFLAGS -mieee\"\n+      else\n+        # Compaq (ex-DEC) C has the option -ieee, equivalent to -ieee_with_no_inexact.\n+        # For full IEEE compliance (rarely needed), use option -ieee_with_inexact.\n+        CPPFLAGS=\"$CPPFLAGS -ieee\"\n+      fi\n+      ;;\n+    sh*)\n+      if test -n \"$GCC\"; then\n+        # GCC has the option -mieee.\n+        CPPFLAGS=\"$CPPFLAGS -mieee\"\n+      fi\n+      ;;\n+  esac\n \n-  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for _FILE_OFFSET_BITS value needed for large files\" >&5\n-$as_echo_n \"checking for _FILE_OFFSET_BITS value needed for large files... \" >&6; }\n-if ${ac_cv_sys_file_offset_bits+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n-else\n-  while :; do\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <sys/types.h>\n- /* Check that off_t can represent 2**63 - 1 correctly.\n-    We can't simply define LARGE_OFF_T to be 9223372036854775807,\n-    since some C++ compilers masquerading as C compilers\n-    incorrectly reject 9223372036854775807.  */\n-#define LARGE_OFF_T (((off_t) 1 << 62) - 1 + ((off_t) 1 << 62))\n-  int off_t_is_large[(LARGE_OFF_T % 2147483629 == 721\n-                       && LARGE_OFF_T % 2147483647 == 1)\n-                      ? 1 : -1];\n-int\n-main ()\n-{\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_sys_file_offset_bits=no; break\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#define _FILE_OFFSET_BITS 64\n-#include <sys/types.h>\n- /* Check that off_t can represent 2**63 - 1 correctly.\n-    We can't simply define LARGE_OFF_T to be 9223372036854775807,\n-    since some C++ compilers masquerading as C compilers\n-    incorrectly reject 9223372036854775807.  */\n-#define LARGE_OFF_T (((off_t) 1 << 62) - 1 + ((off_t) 1 << 62))\n-  int off_t_is_large[(LARGE_OFF_T % 2147483629 == 721\n-                       && LARGE_OFF_T % 2147483647 == 1)\n-                      ? 1 : -1];\n-int\n-main ()\n-{\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_sys_file_offset_bits=64; break\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-  ac_cv_sys_file_offset_bits=unknown\n-  break\n-done\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_file_offset_bits\" >&5\n-$as_echo \"$ac_cv_sys_file_offset_bits\" >&6; }\n-case $ac_cv_sys_file_offset_bits in #(\n-  no | unknown) ;;\n-  *)\n-cat >>confdefs.h <<_ACEOF\n-#define _FILE_OFFSET_BITS $ac_cv_sys_file_offset_bits\n-_ACEOF\n-;;\n-esac\n-rm -rf conftest*\n-  if test $ac_cv_sys_file_offset_bits = unknown; then\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for _LARGE_FILES value needed for large files\" >&5\n-$as_echo_n \"checking for _LARGE_FILES value needed for large files... \" >&6; }\n-if ${ac_cv_sys_large_files+:} false; then :\n-  $as_echo_n \"(cached) \" >&6\n+\n+\n+\n+\n+  # Check whether --enable-threads was given.\n+if test \"${enable_threads+set}\" = set; then :\n+  enableval=$enable_threads; gl_use_threads=$enableval\n else\n-  while :; do\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#include <sys/types.h>\n- /* Check that off_t can represent 2**63 - 1 correctly.\n-    We can't simply define LARGE_OFF_T to be 9223372036854775807,\n-    since some C++ compilers masquerading as C compilers\n-    incorrectly reject 9223372036854775807.  */\n-#define LARGE_OFF_T (((off_t) 1 << 62) - 1 + ((off_t) 1 << 62))\n-  int off_t_is_large[(LARGE_OFF_T % 2147483629 == 721\n-                       && LARGE_OFF_T % 2147483647 == 1)\n-                      ? 1 : -1];\n-int\n-main ()\n-{\n+  if test -n \"$gl_use_threads_default\"; then\n+       gl_use_threads=\"$gl_use_threads_default\"\n+     else\n+       case \"$host_os\" in\n+                                    osf*) gl_use_threads=no ;;\n+                                    cygwin*)\n+               case `uname -r` in\n+                 1.[0-5].*) gl_use_threads=no ;;\n+                 *)         gl_use_threads=yes ;;\n+               esac\n+               ;;\n+                  mingw*)\n+               case \"$gl_use_winpthreads_default\" in\n+                 yes) gl_use_threads=posix ;;\n+                 no)  gl_use_threads=windows ;;\n+                 *)   gl_use_threads=yes ;;\n+               esac\n+               ;;\n+         *)    gl_use_threads=yes ;;\n+       esac\n+     fi\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_sys_large_files=no; break\n fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n-/* end confdefs.h.  */\n-#define _LARGE_FILES 1\n-#include <sys/types.h>\n- /* Check that off_t can represent 2**63 - 1 correctly.\n-    We can't simply define LARGE_OFF_T to be 9223372036854775807,\n-    since some C++ compilers masquerading as C compilers\n-    incorrectly reject 9223372036854775807.  */\n-#define LARGE_OFF_T (((off_t) 1 << 62) - 1 + ((off_t) 1 << 62))\n-  int off_t_is_large[(LARGE_OFF_T % 2147483629 == 721\n-                       && LARGE_OFF_T % 2147483647 == 1)\n-                      ? 1 : -1];\n-int\n-main ()\n-{\n \n-  ;\n-  return 0;\n-}\n-_ACEOF\n-if ac_fn_c_try_compile \"$LINENO\"; then :\n-  ac_cv_sys_large_files=1; break\n-fi\n-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n-  ac_cv_sys_large_files=unknown\n-  break\n-done\n-fi\n-{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_cv_sys_large_files\" >&5\n-$as_echo \"$ac_cv_sys_large_files\" >&6; }\n-case $ac_cv_sys_large_files in #(\n-  no | unknown) ;;\n-  *)\n-cat >>confdefs.h <<_ACEOF\n-#define _LARGE_FILES $ac_cv_sys_large_files\n-_ACEOF\n-;;\n-esac\n-rm -rf conftest*\n+  if test \"$gl_use_threads\" = yes \\\n+     || test \"$gl_use_threads\" = isoc \\\n+     || test \"$gl_use_threads\" = posix \\\n+     || test \"$gl_use_threads\" = isoc+posix; then\n+    # For using <threads.h> or <pthread.h>:\n+\n+\n+  if test -z \"$gl_anythreadlib_early_done\"; then\n+    case \"$host_os\" in\n+      osf*)\n+        # On OSF/1, the compiler needs the flag -D_REENTRANT so that it\n+        # groks <pthread.h>. cc also understands the flag -pthread, but\n+        # we don't use it because 1. gcc-2.95 doesn't understand -pthread,\n+        # 2. putting a flag into CPPFLAGS that has an effect on the linker\n+        # causes the AC_LINK_IFELSE test below to succeed unexpectedly,\n+        # leading to wrong values of LIBTHREAD and LTLIBTHREAD.\n+        CPPFLAGS=\"$CPPFLAGS -D_REENTRANT\"\n+        ;;\n+    esac\n+    # Some systems optimize for single-threaded programs by default, and\n+    # need special flags to disable these optimizations. For example, the\n+    # definition of 'errno' in <errno.h>.\n+    case \"$host_os\" in\n+      aix* | freebsd*) CPPFLAGS=\"$CPPFLAGS -D_THREAD_SAFE\" ;;\n+      solaris*) CPPFLAGS=\"$CPPFLAGS -D_REENTRANT\" ;;\n+    esac\n+    gl_anythreadlib_early_done=done\n   fi\n \n+  fi\n \n-$as_echo \"#define _DARWIN_USE_64_BIT_INODE 1\" >>confdefs.h\n \n-fi\n \n+  # Pre-early section.\n+\n+\n+\n+\n+  # Code from module absolute-header:\n+  # Code from module alloca:\n+  # Code from module alloca-opt:\n+  # Code from module arpa_inet:\n+  # Code from module assure:\n+  # Code from module at-internal:\n+  # Code from module builtin-expect:\n+  # Code from module c99:\n+  # Code from module canonicalize-lgpl:\n+  # Code from module chdir:\n+  # Code from module chdir-long:\n+  # Code from module cloexec:\n+  # Code from module close:\n+  # Code from module closedir:\n+  # Code from module count-one-bits:\n+  # Code from module d-ino:\n+  # Code from module d-type:\n+  # Code from module dirent:\n+  # Code from module dirfd:\n+  # Code from module dirname-lgpl:\n+  # Code from module dosname:\n+  # Code from module double-slash-root:\n+  # Code from module dup:\n+  # Code from module dup2:\n+  # Code from module environ:\n+  # Code from module errno:\n+  # Code from module error:\n+  # Code from module exitfail:\n+  # Code from module extensions:\n+  # Code from module extern-inline:\n+  # Code from module fchdir:\n+  # Code from module fcntl:\n+  # Code from module fcntl-h:\n+  # Code from module fd-hook:\n+  # Code from module fd-safer-flag:\n+  # Code from module fdopendir:\n+  # Code from module filename:\n+  # Code from module filenamecat-lgpl:\n+  # Code from module flexmember:\n+  # Code from module float:\n+  # Code from module fnmatch:\n+  # Code from module fnmatch-gnu:\n+  # Code from module fnmatch-h:\n+  # Code from module fpieee:\n+\n+  # Code from module fpucw:\n+  # Code from module frexp:\n+  # Code from module frexpl:\n+  # Code from module fstat:\n+  # Code from module fstatat:\n+  # Code from module getcwd:\n+  # Code from module getcwd-lgpl:\n+  # Code from module getdtablesize:\n+  # Code from module getlogin_r:\n+  # Code from module getprogname:\n+  # Code from module gettext-h:\n+  # Code from module gettimeofday:\n+  # Code from module glob:\n+  # Code from module glob-h:\n+  # Code from module hard-locale:\n+  # Code from module include_next:\n+  # Code from module inet_ntop:\n+  # Code from module intprops:\n+  # Code from module inttypes:\n+  # Code from module inttypes-incomplete:\n+  # Code from module isnand-nolibm:\n+  # Code from module isnanl-nolibm:\n+  # Code from module largefile:\n+\n+  # Code from module libc-config:\n+  # Code from module limits-h:\n+  # Code from module localcharset:\n+  # Code from module locale:\n+  # Code from module localtime-buffer:\n+  # Code from module lock:\n+  # Code from module lstat:\n+  # Code from module malloc-posix:\n+  # Code from module malloca:\n+  # Code from module math:\n+  # Code from module mbrtowc:\n+  # Code from module mbsinit:\n+  # Code from module mbsrtowcs:\n+  # Code from module memchr:\n+  # Code from module memmem:\n+  # Code from module memmem-simple:\n+  # Code from module mempcpy:\n+  # Code from module memrchr:\n+  # Code from module mkdir:\n+  # Code from module mkdtemp:\n+  # Code from module mkostemp:\n+  # Code from module msvc-inval:\n+  # Code from module msvc-nothrow:\n+  # Code from module multiarch:\n+  # Code from module netinet_in:\n+  # Code from module nocrash:\n+  # Code from module open:\n+  # Code from module openat:\n+  # Code from module openat-die:\n+  # Code from module openat-h:\n+  # Code from module opendir:\n+  # Code from module pathmax:\n+  # Code from module rawmemchr:\n+  # Code from module readdir:\n+  # Code from module readlink:\n+  # Code from module realloc-posix:\n+  # Code from module rename:\n+  # Code from module rewinddir:\n+  # Code from module rmdir:\n+  # Code from module same-inode:\n+  # Code from module save-cwd:\n+  # Code from module scratch_buffer:\n+  # Code from module setenv:\n+  # Code from module setlocale-null:\n+  # Code from module signal-h:\n+  # Code from module snippet/_Noreturn:\n+  # Code from module snippet/arg-nonnull:\n+  # Code from module snippet/c++defs:\n+  # Code from module snippet/warn-on-use:\n+  # Code from module socklen:\n+  # Code from module ssize_t:\n+  # Code from module stat:\n+  # Code from module stat-time:\n+  # Code from module std-gnu11:\n+  # Code from module stdalign:\n+  # Code from module stdbool:\n+  # Code from module stddef:\n+  # Code from module stdint:\n+  # Code from module stdio:\n+  # Code from module stdlib:\n+  # Code from module strchrnul:\n+  # Code from module strdup-posix:\n+  # Code from module streq:\n+  # Code from module strerror:\n+  # Code from module strerror-override:\n+  # Code from module strerror_r-posix:\n+  # Code from module string:\n+  # Code from module strnlen1:\n+  # Code from module strstr:\n+  # Code from module strstr-simple:\n+  # Code from module strtok_r:\n+  # Code from module sys_socket:\n+  # Code from module sys_stat:\n+  # Code from module sys_time:\n+  # Code from module sys_types:\n+  # Code from module sys_uio:\n+  # Code from module tempname:\n+  # Code from module threadlib:\n+\n+\n+\n+  # Code from module time:\n+  # Code from module time_r:\n+  # Code from module unistd:\n+  # Code from module unistd-safer:\n+  # Code from module unsetenv:\n+  # Code from module update-copyright:\n+  # Code from module verify:\n+  # Code from module wchar:\n+  # Code from module wctype-h:\n+  # Code from module windows-mutex:\n+  # Code from module windows-once:\n+  # Code from module windows-recmutex:\n+  # Code from module windows-rwlock:\n+  # Code from module xalloc-oversized:\n+\n+\n+am_cv_prog_cc_stdc=$ac_cv_prog_cc_stdc\n \n \n ac_aux_dir="
    },
    {
      "sha": "acc1b1a322e1342d254be2a83b84354f812fd48f",
      "filename": "gnulib/configure.ac",
      "status": "modified",
      "additions": 3,
      "deletions": 2,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/configure.ac?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -27,11 +27,12 @@ AM_MAINTAINER_MODE\n \n AC_PROG_CC\n AC_USE_SYSTEM_EXTENSIONS\n+# Needs to run before gl_EARLY so it can override AC_SYS_LARGEFILE included\n+# there.\n+ACX_LARGEFILE\n gl_EARLY\n AM_PROG_CC_STDC\n \n-ACX_LARGEFILE\n-\n AC_CONFIG_AUX_DIR(..)\n AC_CANONICAL_SYSTEM\n "
    },
    {
      "sha": "9316e8d40ff7b7b9fc276931c7ea3eaca0d525dd",
      "filename": "gnulib/import/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/import/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gnulib/import/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1215,6 +1215,7 @@ INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INT32_MAX_LT_INTMAX_MAX = @INT32_MAX_LT_INTMAX_MAX@\n INT64_MAX_EQ_LONG_MAX = @INT64_MAX_EQ_LONG_MAX@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LDFLAGS = @LDFLAGS@\n LIBGNU_LIBDEPS = @LIBGNU_LIBDEPS@\n LIBGNU_LTLIBDEPS = @LIBGNU_LTLIBDEPS@"
    },
    {
      "sha": "316d71d5635fa9637c2967d378edaeb3c2a106a3",
      "filename": "gprof/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gprof/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gprof/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gprof/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\n 2020-07-09  Nick Clifton  <nickc@redhat.com>\n \n \t* po/tr.po: Updated Turkish translation."
    },
    {
      "sha": "5dfd0bb4e17c12aeae81093e949e4e0abf03f78e",
      "filename": "gprof/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gprof/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gprof/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gprof/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -34,7 +34,7 @@ NO_WERROR = @NO_WERROR@\n AM_CFLAGS = $(WARN_CFLAGS)\n \n AM_CPPFLAGS = -DDEBUG -I../bfd -I$(srcdir)/../include \\\n-\t-I$(srcdir)/../bfd @INCINTL@ -I. \\\n+\t-I$(srcdir)/../bfd @INCINTL@ @LARGEFILE_CPPFLAGS@ -I. \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n bin_PROGRAMS = gprof"
    },
    {
      "sha": "6c5190a71b91ddd77fe03d50fac384ac57f1ef2e",
      "filename": "gprof/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gprof/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gprof/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gprof/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -338,6 +338,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LIBINTL = @LIBINTL@\n@@ -446,7 +447,7 @@ BFDDIR = $(BASEDIR)/bfd\n INCDIR = $(BASEDIR)/include\n AM_CFLAGS = $(WARN_CFLAGS)\n AM_CPPFLAGS = -DDEBUG -I../bfd -I$(srcdir)/../include \\\n-\t-I$(srcdir)/../bfd @INCINTL@ -I. \\\n+\t-I$(srcdir)/../bfd @INCINTL@ @LARGEFILE_CPPFLAGS@ -I. \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n sources = basic_blocks.c call_graph.c cg_arcs.c cg_dfn.c \\"
    },
    {
      "sha": "74d22db79b652398114d2fc897ddb8a90cb631e3",
      "filename": "gprof/configure",
      "status": "modified",
      "additions": 53,
      "deletions": 11,
      "changes": 64,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/gprof/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/gprof/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gprof/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -657,6 +657,7 @@ INCINTL\n LIBINTL_DEP\n LIBINTL\n USE_NLS\n+LARGEFILE_CPPFLAGS\n OTOOL64\n OTOOL\n LIPO\n@@ -11190,7 +11191,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11193 \"configure\"\n+#line 11194 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11296,7 +11297,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11299 \"configure\"\n+#line 11300 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11646,15 +11647,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n "
    },
    {
      "sha": "0e03aa1ed1a193a5ef0e067c4b7e7715fd0dfa34",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* Makefile.am (AM_CPPFLAGS): Add LARGEFILE_CPPFLAGS.\n+\t* Makefile.in: Regenerate.\n+\t* configure: Regenerate.\n+\n 2020-07-29  Maciej W. Rozycki  <macro@linux-mips.org>\n \n \t* testsuite/ld-elf/sec64k.exp: Also accept a section symbol with"
    },
    {
      "sha": "e5b19203d14bf3a9c98c74812d5dd39cc6d8cfc6",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -139,7 +139,7 @@ TEXI2DVI = texi2dvi -I $(srcdir) -I $(BFDDIR)/doc -I ../bfd/doc \\\n \t\t    -I $(top_srcdir)/../libiberty\n \n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) @zlibinc@ \\\n-\t@INCINTL@ $(HDEFINES) $(CFLAGS) \\\n+\t@INCINTL@ $(HDEFINES) $(CFLAGS) @LARGEFILE_CPPFLAGS@ \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n BFDLIB = ../bfd/libbfd.la"
    },
    {
      "sha": "48ecc756906563a8070b6c6a8a6c28652da8a137",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -399,6 +399,7 @@ INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n INSTOBJEXT = @INSTOBJEXT@\n+LARGEFILE_CPPFLAGS = @LARGEFILE_CPPFLAGS@\n LD = @LD@\n LDFLAGS = @LDFLAGS@\n LEX = `if [ -f ../flex/flex ]; then echo ../flex/flex; else echo @LEX@; fi`\n@@ -626,7 +627,7 @@ TEXI2DVI = texi2dvi -I $(srcdir) -I $(BFDDIR)/doc -I ../bfd/doc \\\n \t\t    -I $(top_srcdir)/../libiberty\n \n AM_CPPFLAGS = -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) @zlibinc@ \\\n-\t@INCINTL@ $(HDEFINES) $(CFLAGS) \\\n+\t@INCINTL@ $(HDEFINES) $(CFLAGS) @LARGEFILE_CPPFLAGS@ \\\n \t-DLOCALEDIR=\"\\\"$(datadir)/locale\\\"\"\n \n BFDLIB = ../bfd/libbfd.la"
    },
    {
      "sha": "d2df419414e24bfb8918a14ad67c2418a783bfb5",
      "filename": "ld/configure",
      "status": "modified",
      "additions": 53,
      "deletions": 11,
      "changes": 64,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c8693053f895626ae90b7856d3738de47d14d52c/ld/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c8693053f895626ae90b7856d3738de47d14d52c/ld/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/configure?ref=c8693053f895626ae90b7856d3738de47d14d52c",
      "patch": "@@ -686,6 +686,7 @@ install_as_default\n TARGET_SYSTEM_ROOT_DEFINE\n TARGET_SYSTEM_ROOT\n use_sysroot\n+LARGEFILE_CPPFLAGS\n CXXCPP\n OTOOL64\n OTOOL\n@@ -12038,7 +12039,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12041 \"configure\"\n+#line 12042 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12144,7 +12145,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12147 \"configure\"\n+#line 12148 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15510,15 +15511,56 @@ fi\n \n \n case \"${host}\" in\n-  sparc-*-solaris*|i[3-7]86-*-solaris*)\n-    # On native 32bit sparc and ia32 solaris, large-file and procfs support\n-    # are mutually exclusive; and without procfs support, the bfd/ elf module\n-    # cannot provide certain routines such as elfcore_write_prpsinfo\n-    # or elfcore_write_prstatus.  So unless the user explicitly requested\n-    # large-file support through the --enable-largefile switch, disable\n-    # large-file support in favor of procfs support.\n-    test \"${target}\" = \"${host}\" -a \"x$plugins\" = xno \\\n-      && : ${enable_largefile=\"no\"}\n+  sparc-*-solaris*|i?86-*-solaris*)\n+    # On native 32-bit Solaris/SPARC and x86, large-file and procfs support\n+    # were mutually exclusive until Solaris 11.3.  Without procfs support,\n+    # the bfd/ elf module cannot provide certain routines such as\n+    # elfcore_write_prpsinfo or elfcore_write_prstatus.  So unless the user\n+    # explicitly requested large-file support through the\n+    # --enable-largefile switch, disable large-file support in favor of\n+    # procfs support.\n+    #\n+    # Check if <sys/procfs.h> is incompatible with large-file support.\n+    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#define _FILE_OFFSET_BITS 64\n+#define _STRUCTURED_PROC 1\n+#include <sys/procfs.h>\n+int\n+main ()\n+{\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  acx_cv_procfs_lfs=yes\n+else\n+  acx_cv_procfs_lfs=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+    #\n+    # Forcefully disable large-file support only if necessary, gdb is in\n+    # tree and enabled.\n+    if test \"${target}\" = \"${host}\" -a \"$acx_cv_procfs_lfs\" = no \\\n+         -a -d $srcdir/../gdb -a \"$enable_gdb\" != no; then\n+      : ${enable_largefile=\"no\"}\n+      if test \"$plugins\" = yes; then\n+\t{ $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&5\n+$as_echo \"$as_me: WARNING:\n+plugin support disabled; require large-file support which is incompatible with GDB.\" >&2;}\n+\tplugins=no\n+      fi\n+    fi\n+    #\n+    # Explicitly undef _FILE_OFFSET_BITS if enable_largefile=no for the\n+    # benefit of g++ 9+ which predefines it on Solaris.\n+    if test \"$enable_largefile\" = no; then\n+      LARGEFILE_CPPFLAGS=\"-U_FILE_OFFSET_BITS\"\n+\n+    fi\n     ;;\n esac\n "
    }
  ]
}