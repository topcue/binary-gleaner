{
  "sha": "a280ab8e81498c6049dca79f64bd0cc02ead01ab",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTI4MGFiOGU4MTQ5OGM2MDQ5ZGNhNzlmNjRiZDBjYzAyZWFkMDFhYg==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@novell.com",
      "date": "2019-06-25T07:27:05Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2019-06-25T07:35:17Z"
    },
    "message": "x86: simplify OP_I64()\n\nThe only meaningful difference from OP_I() is the handling of the\nVEX.W=1 case in 64-bit mode for bytemode being v_mode. Funnel\neverything else into OP_I(), and drop no longer needed local\nvariables.",
    "tree": {
      "sha": "267b67b4cc5219cf4486772142cd79b2c5f9de4e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/267b67b4cc5219cf4486772142cd79b2c5f9de4e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a280ab8e81498c6049dca79f64bd0cc02ead01ab",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a280ab8e81498c6049dca79f64bd0cc02ead01ab",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a280ab8e81498c6049dca79f64bd0cc02ead01ab",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a280ab8e81498c6049dca79f64bd0cc02ead01ab/comments",
  "author": null,
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e1a1babdad9d14b935cbddc7d63fb76a580a16c5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e1a1babdad9d14b935cbddc7d63fb76a580a16c5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e1a1babdad9d14b935cbddc7d63fb76a580a16c5"
    }
  ],
  "stats": {
    "total": 48,
    "additions": 8,
    "deletions": 40
  },
  "files": [
    {
      "sha": "78a8792a9e2662efcf078f093993fe8d81198872",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a280ab8e81498c6049dca79f64bd0cc02ead01ab/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a280ab8e81498c6049dca79f64bd0cc02ead01ab/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=a280ab8e81498c6049dca79f64bd0cc02ead01ab",
      "patch": "@@ -1,3 +1,8 @@\n+2019-06-25  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* i386-dis.c (OP_I64): Forword more cases to OP_I(). Drop local\n+\tvariables.\n+\n 2019-06-25  Jan Beulich  <jbeulich@suse.com>\n \n \t* i386-dis.c (prefix_table): Use Edq for cvtsi2ss and cvtsi2sd."
    },
    {
      "sha": "b9527ae84fef20b28d113d419e308154f8a650a8",
      "filename": "opcodes/i386-dis.c",
      "status": "modified",
      "additions": 3,
      "deletions": 40,
      "changes": 43,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a280ab8e81498c6049dca79f64bd0cc02ead01ab/opcodes/i386-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a280ab8e81498c6049dca79f64bd0cc02ead01ab/opcodes/i386-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/i386-dis.c?ref=a280ab8e81498c6049dca79f64bd0cc02ead01ab",
      "patch": "@@ -14788,53 +14788,16 @@ OP_I (int bytemode, int sizeflag)\n static void\n OP_I64 (int bytemode, int sizeflag)\n {\n-  bfd_signed_vma op;\n-  bfd_signed_vma mask = -1;\n-\n-  if (address_mode != mode_64bit)\n+  if (bytemode != v_mode || address_mode != mode_64bit || !(rex & REX_W))\n     {\n       OP_I (bytemode, sizeflag);\n       return;\n     }\n \n-  switch (bytemode)\n-    {\n-    case b_mode:\n-      FETCH_DATA (the_info, codep + 1);\n-      op = *codep++;\n-      mask = 0xff;\n-      break;\n-    case v_mode:\n-      USED_REX (REX_W);\n-      if (rex & REX_W)\n-\top = get64 ();\n-      else\n-\t{\n-\t  if (sizeflag & DFLAG)\n-\t    {\n-\t      op = get32 ();\n-\t      mask = 0xffffffff;\n-\t    }\n-\t  else\n-\t    {\n-\t      op = get16 ();\n-\t      mask = 0xfffff;\n-\t    }\n-\t  used_prefixes |= (prefixes & PREFIX_DATA);\n-\t}\n-      break;\n-    case w_mode:\n-      mask = 0xfffff;\n-      op = get16 ();\n-      break;\n-    default:\n-      oappend (INTERNAL_DISASSEMBLER_ERROR);\n-      return;\n-    }\n+  USED_REX (REX_W);\n \n-  op &= mask;\n   scratchbuf[0] = '$';\n-  print_operand_value (scratchbuf + 1, 1, op);\n+  print_operand_value (scratchbuf + 1, 1, get64 ());\n   oappend_maybe_intel (scratchbuf);\n   scratchbuf[0] = '\\0';\n }"
    }
  ]
}