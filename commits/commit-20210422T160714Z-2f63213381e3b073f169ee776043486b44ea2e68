{
  "sha": "2f63213381e3b073f169ee776043486b44ea2e68",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MmY2MzIxMzM4MWUzYjA3M2YxNjllZTc3NjA0MzQ4NmI0NGVhMmU2OA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-04-22T16:07:14Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-04-22T16:07:14Z"
    },
    "message": "sim: sprinkle some ATTRIBUTE_PRINTF\n\nAdd some ATTRIBUTE_PRINTF attributes to functions that take a format\nstring, to fix a few -Wformat-nonliteral warnings.  Use the\nATTRIBUTE_PRINTF macro like we use in GDB, instead of spelling out\n__attribute__((format...)).  Use ATTRIBUTE_NULL_PRINTF at one place,\nbecause callers expect to be able to pass NULL.\n\nsim/common/ChangeLog:\n\n\t* callback.c (os_printf_filtered, os_vprintf_filtered,\n\tos_evprintf_filtered, os_error): Use ATTRIBUTE_PRINTF.\n\t* sim-engine.h (sim_engine_abort, sim_engine_vabort): Likewise.\n\t* sim-events.h (sim_events_schedule_tracef,\n\tsim_events_schedule_vtracef): Use ATTRIBUTE_NULL_PRINTF.\n\nChange-Id: Icd206f7b2c325e8b144f72eb129fb2a6b5af2fa3",
    "tree": {
      "sha": "55947613d8a4dc4a2262758c5ae053b950e7f0e1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/55947613d8a4dc4a2262758c5ae053b950e7f0e1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2f63213381e3b073f169ee776043486b44ea2e68",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2f63213381e3b073f169ee776043486b44ea2e68",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2f63213381e3b073f169ee776043486b44ea2e68",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2f63213381e3b073f169ee776043486b44ea2e68/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4efeb0d3e8ee210cd61b15355cca39b16b66004d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4efeb0d3e8ee210cd61b15355cca39b16b66004d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4efeb0d3e8ee210cd61b15355cca39b16b66004d"
    }
  ],
  "stats": {
    "total": 24,
    "additions": 16,
    "deletions": 8
  },
  "files": [
    {
      "sha": "c6a0b83d01185d5a96bcfd505ba80a85709af114",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=2f63213381e3b073f169ee776043486b44ea2e68",
      "patch": "@@ -1,3 +1,11 @@\n+2021-04-22  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* callback.c (os_printf_filtered, os_vprintf_filtered,\n+\tos_evprintf_filtered, os_error): Use ATTRIBUTE_PRINTF.\n+\t* sim-engine.h (sim_engine_abort, sim_engine_vabort): Likewise.\n+\t* sim-events.h (sim_events_schedule_tracef,\n+\tsim_events_schedule_vtracef): Use ATTRIBUTE_NULL_PRINTF.\n+\n 2021-04-18  Mike Frysinger  <vapier@gentoo.org>\n \n \t* gennltvals.py (TARGETS): Add moxie."
    },
    {
      "sha": "2fec2704f3e023d19b61cbb3244880af8245082a",
      "filename": "sim/common/callback.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/callback.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/callback.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/callback.c?ref=2f63213381e3b073f169ee776043486b44ea2e68",
      "patch": "@@ -639,7 +639,7 @@ os_init (host_callback *p)\n /* DEPRECATED */\n \n /* VARARGS */\n-static void\n+static void ATTRIBUTE_PRINTF (2, 3)\n os_printf_filtered (host_callback *p ATTRIBUTE_UNUSED, const char *format, ...)\n {\n   va_list args;\n@@ -650,14 +650,14 @@ os_printf_filtered (host_callback *p ATTRIBUTE_UNUSED, const char *format, ...)\n }\n \n /* VARARGS */\n-static void\n+static void ATTRIBUTE_PRINTF (2, 0)\n os_vprintf_filtered (host_callback *p ATTRIBUTE_UNUSED, const char *format, va_list args)\n {\n   vprintf (format, args);\n }\n \n /* VARARGS */\n-static void\n+static void ATTRIBUTE_PRINTF (2, 0)\n os_evprintf_filtered (host_callback *p ATTRIBUTE_UNUSED, const char *format, va_list args)\n {\n   vfprintf (stderr, format, args);\n@@ -667,7 +667,7 @@ os_evprintf_filtered (host_callback *p ATTRIBUTE_UNUSED, const char *format, va_\n #ifdef __GNUC__\n __attribute__ ((__noreturn__))\n #endif\n-static void\n+static void ATTRIBUTE_PRINTF (2, 3)\n os_error (host_callback *p ATTRIBUTE_UNUSED, const char *format, ...)\n {\n   va_list args;"
    },
    {
      "sha": "5adce8deedbc03e9967192151b4becfa210c731b",
      "filename": "sim/common/sim-engine.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/sim-engine.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/sim-engine.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-engine.h?ref=2f63213381e3b073f169ee776043486b44ea2e68",
      "patch": "@@ -115,14 +115,14 @@ extern void sim_engine_abort\n  sim_cpu *cpu,\n  sim_cia cia,\n  const char *fmt,\n- ...) __attribute__ ((format (printf, 4, 5))) __attribute__ ((noreturn));\n+ ...) ATTRIBUTE_PRINTF (4, 5) __attribute__ ((noreturn));\n \n extern void sim_engine_vabort\n (SIM_DESC sd,\n  sim_cpu *cpu,\n  sim_cia cia,\n  const char *fmt,\n- va_list ap) __attribute__ ((noreturn));\n+ va_list ap) ATTRIBUTE_PRINTF (4, 0) __attribute__ ((noreturn));\n \n /* No abort hook - when possible this function exits using the\n    engine_halt function (and SIM_ENGINE_HALT_HOOK). */"
    },
    {
      "sha": "3f1501ea67cd96534f8b4e1c30d6350cfd0cb61d",
      "filename": "sim/common/sim-events.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/sim-events.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2f63213381e3b073f169ee776043486b44ea2e68/sim/common/sim-events.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-events.h?ref=2f63213381e3b073f169ee776043486b44ea2e68",
      "patch": "@@ -117,15 +117,15 @@ extern sim_event *sim_events_schedule_tracef\n  sim_event_handler *handler,\n  void *data,\n  const char *fmt,\n- ...) __attribute__ ((format (printf, 5, 6)));\n+ ...) ATTRIBUTE_NULL_PRINTF (5, 6);\n \n extern sim_event *sim_events_schedule_vtracef\n (SIM_DESC sd,\n  signed64 delta_time,\n  sim_event_handler *handler,\n  void *data,\n  const char *fmt,\n- va_list ap);\n+ va_list ap) ATTRIBUTE_NULL_PRINTF (5, 0);\n \n \n extern void sim_events_schedule_after_signal"
    }
  ]
}