{
  "sha": "9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTQ3NmI1ODNjYjNlNzJlNTczNTVmNWE2YmZjZDViYTY5ZTcxZWEzMQ==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-10-23T12:55:04Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-10-23T12:55:04Z"
    },
    "message": "[gdb/testsuite] Use $srcfile in DW_AT_name for CU\n\nIn dwarf assembly test-case ada-linkage-name.exp, we have:\n...\nstandard_testfile .c -debug.S\n  ...\n  cu {} {\n    DW_TAG_compile_unit {\n      {DW_AT_name     ada-linkage-name.c}\n...\nUse $srcfile instead of ada-linkage-name.c.\n\nIn dwarf assembly test-case atomic-type.exp, we have:\n...\nstandard_testfile .c -dw.S\n  ...\n  cu {} {\n    DW_TAG_compile_unit {\n      {DW_AT_name     atomic-type-dw.c}\n...\nThe dwarf generated into atomic-type-dw.S is meant to represent the code in\natomic-type.c, not atomic-type-dw.c, so use $srcfile instead of\natomic-type-dw.c.\n\nFix these and similar.\n\nTested on x86_64-linux.\n\ngdb/testsuite/ChangeLog:\n\n2020-10-23  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.dwarf2/ada-linkage-name.exp: Use $srcfile for DW_AT_name of CU.\n\t* gdb.dwarf2/atomic-type.exp: Same.\n\t* gdb.dwarf2/bad-regnum.exp: Same.\n\t* gdb.dwarf2/cpp-linkage-name.exp: Same.\n\t* gdb.dwarf2/dw2-align.exp: Same.\n\t* gdb.dwarf2/dw2-bad-elf.exp: Same.\n\t* gdb.dwarf2/dw2-bad-mips-linkage-name.exp: Same.\n\t* gdb.dwarf2/dw2-bad-unresolved.exp: Same.\n\t* gdb.dwarf2/dw2-namespaceless-anonymous.exp: Same.\n\t* gdb.dwarf2/dw2-opt-structptr.exp: Same.\n\t* gdb.dwarf2/dw2-unusual-field-names.exp: Same.\n\t* gdb.dwarf2/enum-type.exp: Same.\n\t* gdb.dwarf2/frame-inlined-in-outer-frame.exp: Same.\n\t* gdb.dwarf2/info-locals-optimized-out.exp: Same.\n\t* gdb.dwarf2/main-subprogram.exp: Same.\n\t* gdb.dwarf2/missing-type-name.exp: Same.\n\t* gdb.dwarf2/nonvar-access.exp: Same.\n\t* gdb.dwarf2/typedef-void-finish.exp: Same.\n\t* gdb.dwarf2/var-access.exp: Same.\n\t* gdb.dwarf2/void-type.exp: Same.",
    "tree": {
      "sha": "9874c8d4c6330dc9b78881baa90383704622d6a0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9874c8d4c6330dc9b78881baa90383704622d6a0"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8747316ecf9ecf5aaf885b973b0c056fa4c3a2ee",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8747316ecf9ecf5aaf885b973b0c056fa4c3a2ee",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8747316ecf9ecf5aaf885b973b0c056fa4c3a2ee"
    }
  ],
  "stats": {
    "total": 96,
    "additions": 72,
    "deletions": 24
  },
  "files": [
    {
      "sha": "2683237a34f832da2b2c56bf83565841ca106a85",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 23,
      "deletions": 0,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -1,3 +1,26 @@\n+2020-10-23  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.dwarf2/ada-linkage-name.exp: Use $srcfile for DW_AT_name of CU.\n+\t* gdb.dwarf2/atomic-type.exp: Same.\n+\t* gdb.dwarf2/bad-regnum.exp: Same.\n+\t* gdb.dwarf2/cpp-linkage-name.exp: Same.\n+\t* gdb.dwarf2/dw2-align.exp: Same.\n+\t* gdb.dwarf2/dw2-bad-elf.exp: Same.\n+\t* gdb.dwarf2/dw2-bad-mips-linkage-name.exp: Same.\n+\t* gdb.dwarf2/dw2-bad-unresolved.exp: Same.\n+\t* gdb.dwarf2/dw2-namespaceless-anonymous.exp: Same.\n+\t* gdb.dwarf2/dw2-opt-structptr.exp: Same.\n+\t* gdb.dwarf2/dw2-unusual-field-names.exp: Same.\n+\t* gdb.dwarf2/enum-type.exp: Same.\n+\t* gdb.dwarf2/frame-inlined-in-outer-frame.exp: Same.\n+\t* gdb.dwarf2/info-locals-optimized-out.exp: Same.\n+\t* gdb.dwarf2/main-subprogram.exp: Same.\n+\t* gdb.dwarf2/missing-type-name.exp: Same.\n+\t* gdb.dwarf2/nonvar-access.exp: Same.\n+\t* gdb.dwarf2/typedef-void-finish.exp: Same.\n+\t* gdb.dwarf2/var-access.exp: Same.\n+\t* gdb.dwarf2/void-type.exp: Same.\n+\n 2020-10-22  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \tPR gdb/26693"
    },
    {
      "sha": "870a7550f0824972f1c8c982cae7df76eba7be9a",
      "filename": "gdb/testsuite/gdb.dwarf2/ada-linkage-name.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/ada-linkage-name.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/ada-linkage-name.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/ada-linkage-name.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -34,7 +34,7 @@ Dwarf::assemble $asm_file {\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_Ada95}\n-                {DW_AT_name     ada-linkage-name.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n \n         } {"
    },
    {
      "sha": "1058d2db9ced3413fd6b6dfcd66648652a6be7c7",
      "filename": "gdb/testsuite/gdb.dwarf2/atomic-type.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/atomic-type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/atomic-type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/atomic-type.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -25,10 +25,12 @@ standard_testfile .c -dw.S\n \n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C11}\n-                {DW_AT_name     atomic-type-dw.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels i_l c_l c_c_l ac_c_l pac_c_l vpac_c_l avpac_c_l"
    },
    {
      "sha": "600ec56a720af406956d954715b7241286313a47",
      "filename": "gdb/testsuite/gdb.dwarf2/bad-regnum.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/bad-regnum.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/bad-regnum.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/bad-regnum.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -25,10 +25,12 @@ standard_testfile main.c -dw.S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C}\n-\t    {DW_AT_name     bad-regnum-dw.c}\n+\t    {DW_AT_name     $srcfile}\n \t    {DW_AT_comp_dir /tmp}\n \t} {\n \t    declare_labels integer_label"
    },
    {
      "sha": "a1077b5a8259e0e1e6d312e1d7ef309095810701",
      "filename": "gdb/testsuite/gdb.dwarf2/cpp-linkage-name.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/cpp-linkage-name.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/cpp-linkage-name.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/cpp-linkage-name.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -30,10 +30,12 @@ standard_testfile .c -debug.S\n # Set up the DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C_plus_plus}\n-\t    {DW_AT_name     ada-linkage-name.c}\n+\t    {DW_AT_name     $srcfile}\n \t    {DW_AT_comp_dir /tmp}\n \n \t} {"
    },
    {
      "sha": "4ad4fe811cf7195b59b5a067f1e2a28a15081283",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-align.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-align.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-align.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-align.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -30,7 +30,7 @@ Dwarf::assemble $asm_file {\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C_plus_plus}\n-                {DW_AT_name     dw2-align.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels itype ptype"
    },
    {
      "sha": "e939046e9613e95b45e4fc3e92f11cfb0e5bea3c",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-bad-elf.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-bad-elf.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -39,7 +39,7 @@ standard_testfile main.c -other.S -dwarf.S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile3]\n Dwarf::assemble $asm_file {\n-    global srcdir subdir srcfile\n+    global srcdir subdir srcfile srcfile2\n \n     declare_labels ranges_label_1 ranges_label_2 L1 L2\n \n@@ -52,7 +52,7 @@ Dwarf::assemble $asm_file {\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C}\n-\t    {DW_AT_name     dw2-bad-elf.c}\n+\t    {DW_AT_name     $srcfile}\n \t    {DW_AT_comp_dir ${srcdir}/${subdir}}\n \t    {stmt_list $L1 DW_FORM_sec_offset}\n \t    {ranges ${ranges_label_1} DW_FORM_sec_offset}\n@@ -80,7 +80,7 @@ Dwarf::assemble $asm_file {\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C}\n-\t    {DW_AT_name     dw2-bad-elf-other.c}\n+\t    {DW_AT_name     $srcfile2}\n \t    {DW_AT_comp_dir ${srcdir}/${subdir}}\n \t    {stmt_list $L2 DW_FORM_sec_offset}\n \t    {ranges ${ranges_label_2} DW_FORM_sec_offset}"
    },
    {
      "sha": "bfb95215eb845c965d4cebfd12224da95783ac95",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-bad-mips-linkage-name.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-mips-linkage-name.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-mips-linkage-name.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-bad-mips-linkage-name.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -26,10 +26,12 @@ standard_testfile .c .S\n \n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C_plus_plus}\n-                {DW_AT_name     dw2-bad-mips-linkage-name.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n \n         } {"
    },
    {
      "sha": "e93f2ce938d0d9881c519622dd5da83251282c15",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-bad-unresolved.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-unresolved.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-bad-unresolved.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-bad-unresolved.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -28,10 +28,12 @@ standard_testfile .c -2.S\n \n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C}\n-\t    {DW_AT_name     dw2-bad-unresolved-2.c}\n+\t    {DW_AT_name     $srcfile}\n \t    {DW_AT_comp_dir /tmp}\n \t} {\n \t    declare_labels b_l"
    },
    {
      "sha": "bba05e4d5c3aeff026d9d374a11fb35a00d02662",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-namespaceless-anonymous.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-namespaceless-anonymous.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-namespaceless-anonymous.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-namespaceless-anonymous.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -30,7 +30,7 @@ Dwarf::assemble $asm_file {\n     cu {} {\n \tDW_TAG_compile_unit {\n \t    {DW_AT_language @DW_LANG_C_plus_plus}\n-\t    {DW_AT_name     dw2-namespaceless-anonymous.c}\n+\t    {DW_AT_name     $srcfile}\n \t    {DW_AT_comp_dir /tmp}\n \t} {\n \t    declare_labels myint"
    },
    {
      "sha": "332e8439eb08f932969364ad63bcac7be200cd2f",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-opt-structptr.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-opt-structptr.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-opt-structptr.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-opt-structptr.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -41,14 +41,15 @@ proc build_test_program {} {\n     # Make some DWARF for the test.\n     set asm_file [standard_output_file $srcfile2]\n     Dwarf::assemble $asm_file {\n+\tglobal srcfile\n \n \t# Creating a CU with 4-byte addresses lets this test link on\n \t# both 32- and 64-bit machines.\n \tcu { addr_size 4 } {\n     \n \t    DW_TAG_compile_unit {\n \t\t{DW_AT_language @DW_LANG_C99}\n-\t\t{DW_AT_name     dw2-opt-structptr.c}\n+\t\t{DW_AT_name     $srcfile}\n \t\t{DW_AT_comp_dir /tmp}\n \t    } {\n \t\tdeclare_labels int_label struct_label pointer_label \\"
    },
    {
      "sha": "8b984c31506e5c16f810152d673dcefbdfe17d67",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-unusual-field-names.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-unusual-field-names.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/dw2-unusual-field-names.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-unusual-field-names.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -62,7 +62,7 @@ proc run_test { field_name } {\n \tcu {} {\n \t    DW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     dw2-unusual-field-names.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n \t    } {\n \t\tdeclare_labels itype ptype stype"
    },
    {
      "sha": "dbb74467170f7e47d8f42b5af45aaefd1175a14e",
      "filename": "gdb/testsuite/gdb.dwarf2/enum-type.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/enum-type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/enum-type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/enum-type.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -24,10 +24,12 @@ standard_testfile main.c -dw.S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     enum-type-dw.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels integer_label uinteger_label"
    },
    {
      "sha": "82d508a7d8360fd2381f486b0edc1a565e72828d",
      "filename": "gdb/testsuite/gdb.dwarf2/frame-inlined-in-outer-frame.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/frame-inlined-in-outer-frame.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/frame-inlined-in-outer-frame.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/frame-inlined-in-outer-frame.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -35,6 +35,8 @@ standard_testfile .S\n \n set dwarf_asm [standard_output_file dwarf-asm.S]\n Dwarf::assemble $dwarf_asm {\n+    global srcfile\n+\n     declare_labels foo_subprogram bar_subprogram\n     declare_labels stmt_list\n \n@@ -43,7 +45,7 @@ Dwarf::assemble $dwarf_asm {\n \n     cu { addr_size 4 } {\n \tDW_TAG_compile_unit {\n-\t    {DW_AT_name file1.txt}\n+\t    {DW_AT_name $srcfile}\n \t    {DW_AT_stmt_list $stmt_list DW_FORM_sec_offset}\n \t    {DW_AT_language @DW_LANG_C99}\n \t    {DW_AT_low_pc __cu_low_pc DW_FORM_addr}"
    },
    {
      "sha": "56fe9d6a67a434ff37a1a64cccabd715caa638a1",
      "filename": "gdb/testsuite/gdb.dwarf2/info-locals-optimized-out.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/info-locals-optimized-out.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/info-locals-optimized-out.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/info-locals-optimized-out.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -28,13 +28,13 @@ standard_testfile main.c -dw.S\n \n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n-    global dwarf_regnum regname\n+    global dwarf_regnum regname srcfile\n \n     set buf_var [gdb_target_symbol buf]\n \n     cu {} {\n \tDW_TAG_compile_unit {\n-\t\t{DW_AT_name info-locals-optimized-out.c}\n+\t\t{DW_AT_name $srcfile}\n \t\t{DW_AT_comp_dir /tmp}\n \t} {\n \t    declare_labels int_type_label"
    },
    {
      "sha": "ff08c0af5a2734c664069bd79164fb14bc246d2e",
      "filename": "gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/main-subprogram.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/main-subprogram.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -24,10 +24,12 @@ standard_testfile .c -dw.S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     main-subprogram.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels type"
    },
    {
      "sha": "06cabc9be7fea40b158720a0c19f0dbfbfb1aa54",
      "filename": "gdb/testsuite/gdb.dwarf2/missing-type-name.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/missing-type-name.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/missing-type-name.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/missing-type-name.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -42,11 +42,13 @@ standard_testfile void-type.c void-type.S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t        {DW_AT_producer \"GNU C 8.1\"}\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     void-type.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels main_type int_type ptr_type"
    },
    {
      "sha": "20c2daf883fae4930aad3b9362584baa9747ce9b",
      "filename": "gdb/testsuite/gdb.dwarf2/nonvar-access.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/nonvar-access.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/nonvar-access.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/nonvar-access.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -27,9 +27,11 @@ standard_testfile main.c -dw.S\n set asm_file [standard_output_file $srcfile2]\n \n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tcompile_unit {\n-\t    {DW_AT_name main.c}\n+\t    {DW_AT_name $srcfile}\n \t} {\n \t    declare_labels int_type_label char_type_label \\\n \t\tstruct_s_label struct_t_label array_a9_label \\"
    },
    {
      "sha": "dc91c2f7f3990b565b2c3f3ce3af7b48c92f3f7b",
      "filename": "gdb/testsuite/gdb.dwarf2/typedef-void-finish.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/typedef-void-finish.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/typedef-void-finish.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/typedef-void-finish.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -29,11 +29,13 @@ standard_testfile void-type.c .S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t        {DW_AT_producer \"GNU C 8.1\"}\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     void-type.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels main_type void_typedef"
    },
    {
      "sha": "82fd5fd4a68f8457cf5491fa03853d76bda22c4b",
      "filename": "gdb/testsuite/gdb.dwarf2/var-access.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/var-access.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/var-access.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/var-access.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -50,13 +50,13 @@ standard_testfile .c -dw.S\n \n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n-    global dwarf_regnum regname\n+    global dwarf_regnum regname srcfile\n \n     set buf_var [gdb_target_symbol buf]\n \n     cu {} {\n \tDW_TAG_compile_unit {\n-\t\t{DW_AT_name var-pieces-dw.c}\n+\t\t{DW_AT_name $srcfile}\n \t\t{DW_AT_comp_dir /tmp}\n \t} {\n \t    declare_labels char_type_label"
    },
    {
      "sha": "eb8db2c921b35e5c86392a37c90d7793248b3294",
      "filename": "gdb/testsuite/gdb.dwarf2/void-type.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/void-type.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9476b583cb3e72e57355f5a6bfcd5ba69e71ea31/gdb/testsuite/gdb.dwarf2/void-type.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/void-type.exp?ref=9476b583cb3e72e57355f5a6bfcd5ba69e71ea31",
      "patch": "@@ -36,11 +36,13 @@ standard_testfile .c .S\n # Make some DWARF for the test.\n set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n+    global srcfile\n+\n     cu {} {\n \tDW_TAG_compile_unit {\n \t        {DW_AT_producer \"Intel(R) C Intel(R) 64 Compiler XE for applications running on Intel(R) 64, Version 14.0.5.212 Build 20150212\"}\n                 {DW_AT_language @DW_LANG_C}\n-                {DW_AT_name     void-type.c}\n+                {DW_AT_name     $srcfile}\n                 {DW_AT_comp_dir /tmp}\n         } {\n \t    declare_labels int_type void_type ptr_type"
    }
  ]
}