{
  "sha": "a09f656b267b9a684f038fba7cadfe98e2f18892",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTA5ZjY1NmIyNjdiOWE2ODRmMDM4ZmJhN2NhZGZlOThlMmYxODg5Mg==",
  "commit": {
    "author": {
      "name": "liuhongt",
      "email": "hongtao.liu@intel.com",
      "date": "2020-03-16T03:03:12Z"
    },
    "committer": {
      "name": "liuhongt",
      "email": "hongtao.liu@intel.com",
      "date": "2020-04-26T06:26:24Z"
    },
    "message": "Improve -mlfence-after-load\n\n  1.Implict load for POP/POPF/POPA/XLATB, no load for Anysize insns\n  2. Add -mlfence-before-ret=shl/yes, adjust operand size of\n  or/not/shl according to ret's.\n  3. Issue warning for REP CMPS/SCAS since they would affect control\n  flow behavior.\n  4. Adjust testcases and documents.\n\ngas/Changelog:\n\t* config/tc-i386.c (lfence_before_ret_shl): New member.\n\t(load_insn_p): implict load for POP/POPA/POPF/XLATB, no load\n\tfor Anysize insns.\n\t(insert_after_load): Issue warning for REP CMPS/SCAS.\n\t(insert_before_before): Handle iret, Handle\n\t-mlfence-before-ret=shl, Adjust operand size of or/not/shl to ret's,\n\t(md_parse_option): Change -mlfence-before-ret=[none|not|or] to\n\t-mlfence-before-ret=[none/not/or/shl/yes].\n\tEnable -mlfence-before-ret=shl when\n\t-mlfence-beofre-indirect-branch=all and no explict -mlfence-before-ret option.\n\t(md_show_usage): Ditto.\n\t* doc/c-i386.texi: Ditto.\n\t* testsuite/gas/i386/i386.exp: Add new testcases.\n\t* testsuite/gas/i386/lfence-load-b.d: New.\n\t* testsuite/gas/i386/lfence-load-b.e: New.\n\t* testsuite/gas/i386/lfence-load.d: Modified.\n\t* testsuite/gas/i386/lfence-load.e: New.\n\t* testsuite/gas/i386/lfence-load.s: Modified.\n\t* testsuite/gas/i386/lfence-ret-a.d: Modified.\n\t* testsuite/gas/i386/lfence-ret-b.d: Modified.\n\t* testsuite/gas/i386/lfence-ret-c.d: New.\n\t* testsuite/gas/i386/lfence-ret-d.d: New.\n\t* testsuite/gas/i386/lfence-ret.s: Modified.\n\t* testsuite/gas/i386/x86-64-lfence-load-b.d: New.\n\t* testsuite/gas/i386/x86-64-lfence-load.d: Modified.\n\t* testsuite/gas/i386/x86-64-lfence-load.s: Modified.\n\t* testsuite/gas/i386/x86-64-lfence-ret-a.d: Modified.\n\t* testsuite/gas/i386/x86-64-lfence-ret-b.d: Modified.\n\t* testsuite/gas/i386/x86-64-lfence-ret-c.d: New.\n\t* testsuite/gas/i386/x86-64-lfence-ret-d.d: New\n\t* testsuite/gas/i386/x86-64-lfence-ret-e.d: New.\n\t* testsuite/gas/i386/x86-64-lfence-ret.e: New.\n\t* testsuite/gas/i386/x86-64-lfence-ret.s: New.",
    "tree": {
      "sha": "875224c50cb561179eb700b3a751a787ad9b87f8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/875224c50cb561179eb700b3a751a787ad9b87f8"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a09f656b267b9a684f038fba7cadfe98e2f18892",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a09f656b267b9a684f038fba7cadfe98e2f18892",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a09f656b267b9a684f038fba7cadfe98e2f18892",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a09f656b267b9a684f038fba7cadfe98e2f18892/comments",
  "author": {
    "login": "algebra84",
    "id": 22926165,
    "node_id": "MDQ6VXNlcjIyOTI2MTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/algebra84",
    "html_url": "https://github.com/algebra84",
    "followers_url": "https://api.github.com/users/algebra84/followers",
    "following_url": "https://api.github.com/users/algebra84/following{/other_user}",
    "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions",
    "organizations_url": "https://api.github.com/users/algebra84/orgs",
    "repos_url": "https://api.github.com/users/algebra84/repos",
    "events_url": "https://api.github.com/users/algebra84/events{/privacy}",
    "received_events_url": "https://api.github.com/users/algebra84/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "algebra84",
    "id": 22926165,
    "node_id": "MDQ6VXNlcjIyOTI2MTY1",
    "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/algebra84",
    "html_url": "https://github.com/algebra84",
    "followers_url": "https://api.github.com/users/algebra84/followers",
    "following_url": "https://api.github.com/users/algebra84/following{/other_user}",
    "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions",
    "organizations_url": "https://api.github.com/users/algebra84/orgs",
    "repos_url": "https://api.github.com/users/algebra84/repos",
    "events_url": "https://api.github.com/users/algebra84/events{/privacy}",
    "received_events_url": "https://api.github.com/users/algebra84/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ec9c4d83220d0991c07a37116e27d4449061f2b8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ec9c4d83220d0991c07a37116e27d4449061f2b8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ec9c4d83220d0991c07a37116e27d4449061f2b8"
    }
  ],
  "stats": {
    "total": 627,
    "additions": 587,
    "deletions": 40
  },
  "files": [
    {
      "sha": "c4df0e12b666ed014fdc7db21f4981aaa041b289",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 36,
      "deletions": 0,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,3 +1,39 @@\n+2020-04-26  Hongtao Liu  <hongtao.liu@intel.com\n+\n+\t* config/tc-i386.c (lfence_before_ret_shl): New member.\n+\t(load_insn_p): implict load for POP/POPA/POPF/XLATB, no load\n+\tfor Anysize insns.\n+\t(insert_after_load): Issue warning for REP CMPS/SCAS.\n+\t(insert_before_before): Handle iret, Handle\n+\t-mlfence-before-ret=shl, Adjust operand size of or/not/shl to ret's,\n+\t(md_parse_option): Change -mlfence-before-ret=[none|not|or] to\n+\t-mlfence-before-ret=[none/not/or/shl/yes].\n+\tEnable -mlfence-before-ret=shl when\n+\t-mlfence-beofre-indirect-branch=all and no explict -mlfence-before-ret option.\n+\t(md_show_usage): Ditto.\n+\t* doc/c-i386.texi: Ditto.\n+\t* testsuite/gas/i386/i386.exp: Add new testcases.\n+\t* testsuite/gas/i386/lfence-load-b.d: New.\n+\t* testsuite/gas/i386/lfence-load-b.e: New.\n+\t* testsuite/gas/i386/lfence-load.d: Modified.\n+\t* testsuite/gas/i386/lfence-load.e: New.\n+\t* testsuite/gas/i386/lfence-load.s: Modified.\n+\t* testsuite/gas/i386/lfence-ret-a.d: Modified.\n+\t* testsuite/gas/i386/lfence-ret-b.d: Modified.\n+\t* testsuite/gas/i386/lfence-ret-c.d: New.\n+\t* testsuite/gas/i386/lfence-ret-d.d: New.\n+\t* testsuite/gas/i386/lfence-ret.s: Modified.\n+\t* testsuite/gas/i386/x86-64-lfence-load-b.d: New.\n+\t* testsuite/gas/i386/x86-64-lfence-load.d: Modified.\n+\t* testsuite/gas/i386/x86-64-lfence-load.s: Modified.\n+\t* testsuite/gas/i386/x86-64-lfence-ret-a.d: Modified.\n+\t* testsuite/gas/i386/x86-64-lfence-ret-b.d: Modified.\n+\t* testsuite/gas/i386/x86-64-lfence-ret-c.d: New.\n+\t* testsuite/gas/i386/x86-64-lfence-ret-d.d: New\n+\t* testsuite/gas/i386/x86-64-lfence-ret-e.d: New.\n+\t* testsuite/gas/i386/x86-64-lfence-ret.e: New.\n+\t* testsuite/gas/i386/x86-64-lfence-ret.s: New.\n+\n 2020-04-22  Max Filippov  <jcmvbkbc@gmail.com>\n \n \tPR ld/25861"
    },
    {
      "sha": "a692c457a5c3662d3b573e568834f525bcecb4ee",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 88,
      "deletions": 32,
      "changes": 120,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -647,7 +647,8 @@ static enum lfence_before_ret_kind\n   {\n     lfence_before_ret_none = 0,\n     lfence_before_ret_not,\n-    lfence_before_ret_or\n+    lfence_before_ret_or,\n+    lfence_before_ret_shl\n   }\n lfence_before_ret;\n \n@@ -4350,22 +4351,28 @@ load_insn_p (void)\n \n   if (!any_vex_p)\n     {\n-      /* lea  */\n-      if (i.tm.base_opcode == 0x8d)\n+      /* Anysize insns: lea, invlpg, clflush, prefetchnta, prefetcht0,\n+\t prefetcht1, prefetcht2, prefetchtw, bndmk, bndcl, bndcu, bndcn,\n+\t bndstx, bndldx, prefetchwt1, clflushopt, clwb, cldemote.  */\n+      if (i.tm.opcode_modifier.anysize)\n \treturn 0;\n \n-      /* pop  */\n-      if ((i.tm.base_opcode & ~7) == 0x58\n-\t  || (i.tm.base_opcode == 0x8f && i.tm.extension_opcode == 0))\n+      /* pop, popf, popa.   */\n+      if (strcmp (i.tm.name, \"pop\") == 0\n+\t  || i.tm.base_opcode == 0x9d\n+\t  || i.tm.base_opcode == 0x61)\n \treturn 1;\n \n       /* movs, cmps, lods, scas.  */\n       if ((i.tm.base_opcode | 0xb) == 0xaf)\n \treturn 1;\n \n-      /* outs */\n-      if (base_opcode == 0x6f)\n+      /* outs, xlatb.  */\n+      if (base_opcode == 0x6f\n+\t  || i.tm.base_opcode == 0xd7)\n \treturn 1;\n+      /* NB: For AMD-specific insns with implicit memory operands,\n+\t they're intentionally not covered.  */\n     }\n \n   /* No memory operand.  */\n@@ -4506,6 +4513,22 @@ insert_lfence_after (void)\n {\n   if (lfence_after_load && load_insn_p ())\n     {\n+      /* There are also two REP string instructions that require\n+\t special treatment. Specifically, the compare string (CMPS)\n+\t and scan string (SCAS) instructions set EFLAGS in a manner\n+\t that depends on the data being compared/scanned. When used\n+\t with a REP prefix, the number of iterations may therefore\n+\t vary depending on this data. If the data is a program secret\n+\t chosen by the adversary using an LVI method,\n+\t then this data-dependent behavior may leak some aspect\n+\t of the secret.  */\n+      if (((i.tm.base_opcode | 0x1) == 0xa7\n+\t   || (i.tm.base_opcode | 0x1) == 0xaf)\n+\t  && i.prefix[REP_PREFIX])\n+\t{\n+\t    as_warn (_(\"`%s` changes flags which would affect control flow behavior\"),\n+\t\t     i.tm.name);\n+\t}\n       char *p = frag_more (3);\n       *p++ = 0xf;\n       *p++ = 0xae;\n@@ -4568,12 +4591,13 @@ insert_lfence_before (void)\n       return;\n     }\n \n-  /* Output or/not and lfence before ret.  */\n+  /* Output or/not/shl and lfence before ret/lret/iret.  */\n   if (lfence_before_ret != lfence_before_ret_none\n       && (i.tm.base_opcode == 0xc2\n \t  || i.tm.base_opcode == 0xc3\n \t  || i.tm.base_opcode == 0xca\n-\t  || i.tm.base_opcode == 0xcb))\n+\t  || i.tm.base_opcode == 0xcb\n+\t  || i.tm.base_opcode == 0xcf))\n     {\n       if (last_insn.kind != last_insn_other\n \t  && last_insn.seg == now_seg)\n@@ -4583,33 +4607,59 @@ insert_lfence_before (void)\n \t\t\t last_insn.name, i.tm.name);\n \t  return;\n \t}\n-      if (lfence_before_ret == lfence_before_ret_or)\n-\t{\n-\t  /* orl: 0x830c2400.  */\n-\t  p = frag_more ((flag_code == CODE_64BIT ? 1 : 0) + 4 + 3);\n-\t  if (flag_code == CODE_64BIT)\n-\t    *p++ = 0x48;\n-\t  *p++ = 0x83;\n-\t  *p++ = 0xc;\n-\t  *p++ = 0x24;\n-\t  *p++ = 0x0;\n-\t}\n-      else\n-\t{\n-\t  p = frag_more ((flag_code == CODE_64BIT ? 2 : 0) + 6 + 3);\n-\t  /* notl: 0xf71424.  */\n-\t  if (flag_code == CODE_64BIT)\n-\t    *p++ = 0x48;\n+\n+      /* lret or iret.  */\n+      bfd_boolean lret = (i.tm.base_opcode | 0x5) == 0xcf;\n+      bfd_boolean has_rexw = i.prefix[REX_PREFIX] & REX_W;\n+      char prefix = 0x0;\n+      /* Default operand size for far return is 32 bits,\n+\t 64 bits for near return.  */\n+      /* Near ret ingore operand size override under CPU64.  */\n+      if ((!lret && flag_code == CODE_64BIT) || has_rexw)\n+\tprefix = 0x48;\n+      else if (i.prefix[DATA_PREFIX])\n+\tprefix = 0x66;\n+\n+      if (lfence_before_ret == lfence_before_ret_not)\n+\t{\n+\t  /* not: 0xf71424, may add prefix\n+\t     for operand size override or 64-bit code.  */\n+\t  p = frag_more ((prefix ? 2 : 0) + 6 + 3);\n+\t  if (prefix)\n+\t    *p++ = prefix;\n \t  *p++ = 0xf7;\n \t  *p++ = 0x14;\n \t  *p++ = 0x24;\n-\t  /* notl: 0xf71424.  */\n-\t  if (flag_code == CODE_64BIT)\n-\t    *p++ = 0x48;\n+\t  if (prefix)\n+\t    *p++ = prefix;\n \t  *p++ = 0xf7;\n \t  *p++ = 0x14;\n \t  *p++ = 0x24;\n \t}\n+      else\n+\t{\n+\t  p = frag_more ((prefix ? 1 : 0) + 4 + 3);\n+\t  if (prefix)\n+\t    *p++ = prefix;\n+\t  if (lfence_before_ret == lfence_before_ret_or)\n+\t    {\n+\t      /* or: 0x830c2400, may add prefix\n+\t\t for operand size override or 64-bit code.  */\n+\t      *p++ = 0x83;\n+\t      *p++ = 0x0c;\n+\t    }\n+\t  else\n+\t    {\n+\t      /* shl: 0xc1242400, may add prefix\n+\t\t for operand size override or 64-bit code.  */\n+\t      *p++ = 0xc1;\n+\t      *p++ = 0x24;\n+\t    }\n+\n+\t  *p++ = 0x24;\n+\t  *p++ = 0x0;\n+\t}\n+\n       *p++ = 0xf;\n       *p++ = 0xae;\n       *p = 0xe8;\n@@ -12995,7 +13045,11 @@ md_parse_option (int c, const char *arg)\n \n     case OPTION_MLFENCE_BEFORE_INDIRECT_BRANCH:\n       if (strcasecmp (arg, \"all\") == 0)\n-\tlfence_before_indirect_branch = lfence_branch_all;\n+\t{\n+\t  lfence_before_indirect_branch = lfence_branch_all;\n+\t  if (lfence_before_ret == lfence_before_ret_none)\n+\t    lfence_before_ret = lfence_before_ret_shl;\n+\t}\n       else if (strcasecmp (arg, \"memory\") == 0)\n \tlfence_before_indirect_branch = lfence_branch_memory;\n       else if (strcasecmp (arg, \"register\") == 0)\n@@ -13012,6 +13066,8 @@ md_parse_option (int c, const char *arg)\n \tlfence_before_ret = lfence_before_ret_or;\n       else if (strcasecmp (arg, \"not\") == 0)\n \tlfence_before_ret = lfence_before_ret_not;\n+      else if (strcasecmp (arg, \"shl\") == 0 || strcasecmp (arg, \"yes\") == 0)\n+\tlfence_before_ret = lfence_before_ret_shl;\n       else if (strcasecmp (arg, \"none\") == 0)\n \tlfence_before_ret = lfence_before_ret_none;\n       else\n@@ -13382,7 +13438,7 @@ md_show_usage (FILE *stream)\n   -mlfence-before-indirect-branch=[none|all|register|memory] (default: none)\\n\\\n                           generate lfence before indirect near branch\\n\"));\n   fprintf (stream, _(\"\\\n-  -mlfence-before-ret=[none|or|not] (default: none)\\n\\\n+  -mlfence-before-ret=[none|or|not|shl|yes] (default: none)\\n\\\n                           generate lfence before ret\\n\"));\n   fprintf (stream, _(\"\\\n   -mamd64                 accept only AMD64 ISA [default]\\n\"));"
    },
    {
      "sha": "4acece439473f8369f4012567b0ce5b538022031",
      "filename": "gas/doc/c-i386.texi",
      "status": "modified",
      "additions": 8,
      "deletions": 4,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/doc/c-i386.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/doc/c-i386.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/c-i386.texi?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -488,6 +488,8 @@ before indirect near branch instructions.\n @option{-mlfence-before-indirect-branch=@var{all}} will generate lfence\n before indirect near branch via register and issue a warning before\n indirect near branch via memory.\n+It also implicitly sets @option{-mlfence-before-ret=@var{shl}} when\n+there's no explict @option{-mlfence-before-ret=}.\n @option{-mlfence-before-indirect-branch=@var{register}} will generate\n lfence before indirect near branch via register.\n @option{-mlfence-before-indirect-branch=@var{memory}} will issue a\n@@ -501,15 +503,17 @@ after loading branch target register.\n @cindex @samp{-mlfence-before-ret=} option, i386\n @cindex @samp{-mlfence-before-ret=} option, x86-64\n @item -mlfence-before-ret=@var{none}\n+@item -mlfence-before-ret=@var{shl}\n @item -mlfence-before-ret=@var{or}\n+@item -mlfence-before-ret=@var{yes}\n @itemx -mlfence-before-ret=@var{not}\n These options control whether the assembler should generate lfence\n before ret.  @option{-mlfence-before-ret=@var{or}} will generate\n generate or instruction with lfence.\n-@option{-mlfence-before-ret=@var{not}} will generate not instruction\n-with lfence.\n-@option{-mlfence-before-ret=@var{none}} will not generate lfence,\n-which is the default.\n+@option{-mlfence-before-ret=@var{shl/yes}} will generate shl instruction\n+with lfence. @option{-mlfence-before-ret=@var{not}} will generate not\n+instruction with lfence. @option{-mlfence-before-ret=@var{none}} will not\n+generate lfence, which is the default.\n \n @cindex @samp{-mx86-used-note=} option, i386\n @cindex @samp{-mx86-used-note=} option, x86-64"
    },
    {
      "sha": "3bacb80178ab32a1872399cebf988b574f8390f5",
      "filename": "gas/testsuite/gas/i386/i386.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/i386.exp?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -535,6 +535,8 @@ if [expr ([istarget \"i*86-*-*\"] ||  [istarget \"x86_64-*-*\"]) && [gas_32_check]]\n     run_dump_test \"lfence-indbr-c\"\n     run_dump_test \"lfence-ret-a\"\n     run_dump_test \"lfence-ret-b\"\n+    run_dump_test \"lfence-ret-c\"\n+    run_dump_test \"lfence-ret-d\"\n     run_dump_test \"lfence-byte\"\n \n     # These tests require support for 8 and 16 bit relocs,\n@@ -1122,6 +1124,9 @@ if [expr ([istarget \"i*86-*-*\"] || [istarget \"x86_64-*-*\"]) && [gas_64_check]] t\n     run_dump_test \"x86-64-lfence-indbr-c\"\n     run_dump_test \"x86-64-lfence-ret-a\"\n     run_dump_test \"x86-64-lfence-ret-b\"\n+    run_dump_test \"x86-64-lfence-ret-c\"\n+    run_dump_test \"x86-64-lfence-ret-d\"\n+    run_dump_test \"x86-64-lfence-ret-e\"\n     run_dump_test \"x86-64-lfence-byte\"\n \n     if { ![istarget \"*-*-aix*\"]"
    },
    {
      "sha": "0d355df5561c6fc231e2a8f0f9ac180213f2f47a",
      "filename": "gas/testsuite/gas/i386/lfence-load.d",
      "status": "modified",
      "additions": 26,
      "deletions": 0,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-load.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,5 +1,6 @@\n #as: -mlfence-after-load=yes\n #objdump: -dw\n+#warning_output: lfence-load.e\n #name: -mlfence-after-load=yes\n \n .*: +file format .*\n@@ -15,6 +16,31 @@ Disassembly of section .text:\n  +[a-f0-9]+:\t0f c7 75 00          \tvmptrld 0x0\\(%ebp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\t66 0f c7 75 00       \tvmclear 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t66 0f 38 82 55 00    \tinvpcid 0x0\\(%ebp\\),%edx\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t0f 01 7d 00          \tinvlpg 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f ae 7d 00          \tclflush 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t66 0f ae 7d 00       \tclflushopt 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t66 0f ae 75 00       \tclwb   0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f 1c 45 00          \tcldemote 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\tf3 0f 1b 4d 00       \tbndmk  0x0\\(%ebp\\),%bnd1\n+ +[a-f0-9]+:\tf3 0f 1a 4d 00       \tbndcl  0x0\\(%ebp\\),%bnd1\n+ +[a-f0-9]+:\tf2 0f 1a 4d 00       \tbndcu  0x0\\(%ebp\\),%bnd1\n+ +[a-f0-9]+:\tf2 0f 1b 4d 00       \tbndcn  0x0\\(%ebp\\),%bnd1\n+ +[a-f0-9]+:\t0f 1b 4d 00          \tbndstx %bnd1,0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f 1a 4d 00          \tbndldx 0x0\\(%ebp\\),%bnd1\n+ +[a-f0-9]+:\t0f 18 4d 00          \tprefetcht0 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f 18 55 00          \tprefetcht1 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f 18 5d 00          \tprefetcht2 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t0f 0d 4d 00          \tprefetchw 0x0\\(%ebp\\)\n+ +[a-f0-9]+:\t1f                   \tpop    %ds\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t9d                   \tpopf   \n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t61                   \tpopa   \n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\td7                   \txlat   %ds:\\(%ebx\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\td9 55 00             \tfsts   0x0\\(%ebp\\)\n  +[a-f0-9]+:\td9 45 00             \tflds   0x0\\(%ebp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence "
    },
    {
      "sha": "1ee49da7fd1dd7c57ac9d7ff54abafec147b77b6",
      "filename": "gas/testsuite/gas/i386/lfence-load.e",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.e",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.e",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-load.e?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,3 @@\n+.*: Assembler messages:\n+.*:??: Warning: `scas` changes flags which would affect control flow behavior\n+.*:??: Warning: `cmps` changes flags which would affect control flow behavior"
    },
    {
      "sha": "4b4aa1610b3ef198ddfc9af8a66a1b8cb426509c",
      "filename": "gas/testsuite/gas/i386/lfence-load.s",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-load.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-load.s?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -4,6 +4,26 @@ _start:\n \tlgdt (%ebp)\n \tvmptrld (%ebp)\n \tvmclear (%ebp)\n+\tinvpcid (%ebp), %edx\n+\tinvlpg (%ebp)\n+\tclflush (%ebp)\n+\tclflushopt (%ebp)\n+\tclwb (%ebp)\n+\tcldemote (%ebp)\n+\tbndmk (%ebp), %bnd1\n+\tbndcl (%ebp), %bnd1\n+\tbndcu (%ebp), %bnd1\n+\tbndcn (%ebp), %bnd1\n+\tbndstx %bnd1, (%ebp)\n+\tbndldx (%ebp), %bnd1\n+\tprefetcht0 (%ebp)\n+\tprefetcht1 (%ebp)\n+\tprefetcht2 (%ebp)\n+\tprefetchw (%ebp)\n+\tpop %ds\n+\tpopf\n+\tpopa\n+\txlatb (%ebx)\n \tfsts (%ebp)\n \tflds (%ebp)\n \tfistl (%ebp)"
    },
    {
      "sha": "aa358576647d1f5a0c26ce850126914527583931",
      "filename": "gas/testsuite/gas/i386/lfence-ret-a.d",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-ret-a.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -9,10 +9,28 @@\n Disassembly of section .text:\n \n 0+ <_start>:\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tretw   \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tretw   \\$0x14\n  +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc3                   \tret    \n  +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc2 1e 00             \tret    \\$0x1e\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n #pass"
    },
    {
      "sha": "77001c425eff86a7ad435468fc1d20a325cce1ff",
      "filename": "gas/testsuite/gas/i386/lfence-ret-b.d",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-ret-b.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -9,6 +9,14 @@\n Disassembly of section .text:\n \n 0+ <_start>:\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tretw   \n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tretw   \\$0x14\n  +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n  +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n@@ -17,4 +25,20 @@ Disassembly of section .text:\n  +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc2 1e 00             \tret    \\$0x1e\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n #pass"
    },
    {
      "sha": "fceb0eb182a36d7580cec303e9910d3e03ab72ec",
      "filename": "gas/testsuite/gas/i386/lfence-ret-c.d",
      "status": "added",
      "additions": 35,
      "deletions": 0,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-c.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-c.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-ret-c.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,35 @@\n+#source: lfence-ret.s\n+#as: -mlfence-before-ret=or -mlfence-before-indirect-branch=all\n+#objdump: -dw\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tretw   \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tretw   \\$0x14\n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc3                   \tret    \n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc2 1e 00             \tret    \\$0x1e\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+#pass"
    },
    {
      "sha": "03f8f88fd7bdfbfa807c8df83250a916f4dab06c",
      "filename": "gas/testsuite/gas/i386/lfence-ret-d.d",
      "status": "added",
      "additions": 36,
      "deletions": 0,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-d.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret-d.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-ret-d.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,36 @@\n+#source: lfence-ret.s\n+#as: -mlfence-before-ret=shl\n+#objdump: -dw\n+#name: -mlfence-before-ret=shl\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tretw   \n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tretw   \\$0x14\n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc3                   \tret    \n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc2 1e 00             \tret    \\$0x1e\n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%esp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+#pass"
    },
    {
      "sha": "f27fa5839e5db685f008092a4ab01193958698a4",
      "filename": "gas/testsuite/gas/i386/lfence-ret.s",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/lfence-ret.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/lfence-ret.s?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,4 +1,10 @@\n \t.text\n _start:\n+\tretw\n+\tretw\t$20\n \tret\n \tret\t$30\n+\tlretw\n+\tlretw\t$40\n+\tlret\n+\tlret\t$40\t"
    },
    {
      "sha": "5cd764391d1e7423f94a9ad719c742837c4035d5",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-load.d",
      "status": "modified",
      "additions": 24,
      "deletions": 0,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-load.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-load.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-load.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,5 +1,6 @@\n #as: -mlfence-after-load=yes\n #objdump: -dw\n+#warning_output: lfence-load.e\n #name: x86-64 -mlfence-after-load=yes\n \n .*: +file format .*\n@@ -15,6 +16,29 @@ Disassembly of section .text:\n  +[a-f0-9]+:\t0f c7 75 00          \tvmptrld 0x0\\(%rbp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\t66 0f c7 75 00       \tvmclear 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t66 0f 38 82 55 00    \tinvpcid 0x0\\(%rbp\\),%rdx\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t67 0f 01 38          \tinvlpg \\(%eax\\)\n+ +[a-f0-9]+:\t0f ae 7d 00          \tclflush 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t66 0f ae 7d 00       \tclflushopt 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t66 0f ae 75 00       \tclwb   0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f 1c 45 00          \tcldemote 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\tf3 0f 1b 4d 00       \tbndmk  0x0\\(%rbp\\),%bnd1\n+ +[a-f0-9]+:\tf3 0f 1a 4d 00       \tbndcl  0x0\\(%rbp\\),%bnd1\n+ +[a-f0-9]+:\tf2 0f 1a 4d 00       \tbndcu  0x0\\(%rbp\\),%bnd1\n+ +[a-f0-9]+:\tf2 0f 1b 4d 00       \tbndcn  0x0\\(%rbp\\),%bnd1\n+ +[a-f0-9]+:\t0f 1b 4d 00          \tbndstx %bnd1,0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f 1a 4d 00          \tbndldx 0x0\\(%rbp\\),%bnd1\n+ +[a-f0-9]+:\t0f 18 4d 00          \tprefetcht0 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f 18 55 00          \tprefetcht1 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f 18 5d 00          \tprefetcht2 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f 0d 4d 00          \tprefetchw 0x0\\(%rbp\\)\n+ +[a-f0-9]+:\t0f a1                \tpopq   %fs\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t9d                   \tpopfq  \n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\td7                   \txlat   %ds:\\(%rbx\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\td9 55 00             \tfsts   0x0\\(%rbp\\)\n  +[a-f0-9]+:\td9 45 00             \tflds   0x0\\(%rbp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence "
    },
    {
      "sha": "2a3ac6b7d2db3c3182ea219d84484dba330696fe",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-load.s",
      "status": "modified",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-load.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-load.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-load.s?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -4,6 +4,25 @@ _start:\n \tlgdt (%rbp)\n \tvmptrld (%rbp)\n \tvmclear (%rbp)\n+\tinvpcid (%rbp), %rdx\n+\tinvlpg (%eax)\n+\tclflush (%rbp)\n+\tclflushopt (%rbp)\n+\tclwb (%rbp)\n+\tcldemote (%rbp)\n+\tbndmk (%rbp), %bnd1\n+\tbndcl (%rbp), %bnd1\n+\tbndcu (%rbp), %bnd1\n+\tbndcn (%rbp), %bnd1\n+\tbndstx %bnd1, (%rbp)\n+\tbndldx (%rbp), %bnd1\n+\tprefetcht0 (%rbp)\n+\tprefetcht1 (%rbp)\n+\tprefetcht2 (%rbp)\n+\tprefetchw (%rbp)\n+\tpop %fs\n+\tpopf\n+\txlatb (%rbx)\n \tfsts (%rbp)\n \tflds (%rbp)\n \tfistl (%rbp)"
    },
    {
      "sha": "345217b17c725358b2f98265a22551c3db52a4ba",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret-a.d",
      "status": "modified",
      "additions": 33,
      "deletions": 2,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-a.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-a.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret-a.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,6 +1,7 @@\n-#source: lfence-ret.s\n+#source: x86-64-lfence-ret.s\n #as: -mlfence-before-ret=or\n-#objdump: -dw\n+#warning_output: x86-64-lfence-ret.e\n+#objdump: -dw -Mintel64\n #name: x86-64 -mlfence-before-ret=or\n \n .*: +file format .*\n@@ -9,10 +10,40 @@\n Disassembly of section .text:\n \n 0+ <_start>:\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tdata16 retq \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tdata16 retq \\$0x14\n  +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc3                   \tretq   \n  +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc2 1e 00             \tretq   \\$0x1e\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c3             \tdata16 rex.W retq \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c2 28 00       \tdata16 rex.W retq \\$0x28\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 cb                \tlretq  \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 ca 28 00          \tlretq  \\$0x28\n #pass"
    },
    {
      "sha": "3947660fea8aed4a9f3704af8e3dc92f7e3e59e7",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret-b.d",
      "status": "modified",
      "additions": 43,
      "deletions": 2,
      "changes": 45,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-b.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-b.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret-b.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -1,6 +1,7 @@\n-#source: lfence-ret.s\n+#source: x86-64-lfence-ret.s\n #as: -mlfence-before-ret=not\n-#objdump: -dw\n+#warning_output: x86-64-lfence-ret.e\n+#objdump: -dw -Mintel64\n #name: x86-64 -mlfence-before-ret=not\n \n .*: +file format .*\n@@ -9,6 +10,14 @@\n Disassembly of section .text:\n \n 0+ <_start>:\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tdata16 retq \n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tdata16 retq \\$0x14\n  +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n  +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n@@ -17,4 +26,36 @@ Disassembly of section .text:\n  +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n  +[a-f0-9]+:\t0f ae e8             \tlfence \n  +[a-f0-9]+:\tc2 1e 00             \tretq   \\$0x1e\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c3             \tdata16 rex.W retq \n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c2 28 00       \tdata16 rex.W retq \\$0x28\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%rsp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%rsp\\)\n+ +[a-f0-9]+:\t66 f7 14 24          \tnotw   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%rsp\\)\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%rsp\\)\n+ +[a-f0-9]+:\tf7 14 24             \tnotl   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 cb                \tlretq  \n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t48 f7 14 24          \tnotq   \\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 ca 28 00          \tlretq  \\$0x28\n #pass"
    },
    {
      "sha": "cd89a95bc439c5f1c1618a0fd40f1ba00ad37f4d",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret-c.d",
      "status": "added",
      "additions": 48,
      "deletions": 0,
      "changes": 48,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-c.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-c.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret-c.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,48 @@\n+#source: x86-64-lfence-ret.s\n+#as: -mlfence-before-ret=or -mlfence-before-indirect-branch=all\n+#warning_output: x86-64-lfence-ret.e\n+#objdump: -dw -Mintel64\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tdata16 retq \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tdata16 retq \\$0x14\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc3                   \tretq   \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc2 1e 00             \tretq   \\$0x1e\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c3             \tdata16 rex.W retq \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c2 28 00       \tdata16 rex.W retq \\$0x28\n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 83 0c 24 00       \torw    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\t83 0c 24 00          \torl    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 cb                \tlretq  \n+ +[a-f0-9]+:\t48 83 0c 24 00       \torq    \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 ca 28 00          \tlretq  \\$0x28\n+#pass"
    },
    {
      "sha": "593b88943596a517f55c7842aa66b60fc3575ba5",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret-d.d",
      "status": "added",
      "additions": 49,
      "deletions": 0,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-d.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-d.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret-d.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,49 @@\n+#source: x86-64-lfence-ret.s\n+#as: -mlfence-before-ret=shl\n+#warning_output: x86-64-lfence-ret.e\n+#objdump: -dw -Mintel64\n+#name: x86-64 -mlfence-before-ret=shl\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tdata16 retq \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tdata16 retq \\$0x14\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc3                   \tretq   \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc2 1e 00             \tretq   \\$0x1e\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c3             \tdata16 rex.W retq \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c2 28 00       \tdata16 rex.W retq \\$0x28\n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 cb                \tlretq  \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 ca 28 00          \tlretq  \\$0x28\n+#pass"
    },
    {
      "sha": "b4d229654cda45e10e98690e69feeb035b75ff8f",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret-e.d",
      "status": "added",
      "additions": 49,
      "deletions": 0,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-e.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret-e.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret-e.d?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,49 @@\n+#source: x86-64-lfence-ret.s\n+#as: -mlfence-before-ret=shl\n+#warning_output: x86-64-lfence-ret.e\n+#objdump: -dw -Mintel64\n+#name: x86-64 -mlfence-before-ret=yes\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c3                \tdata16 retq \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 c2 14 00          \tdata16 retq \\$0x14\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc3                   \tretq   \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tc2 1e 00             \tretq   \\$0x1e\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c3             \tdata16 rex.W retq \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 48 c2 28 00       \tdata16 rex.W retq \\$0x28\n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 cb                \tlretw  \n+ +[a-f0-9]+:\t66 c1 24 24 00       \tshlw   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t66 ca 28 00          \tlretw  \\$0x28\n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tcb                   \tlret   \n+ +[a-f0-9]+:\tc1 24 24 00          \tshll   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\tca 28 00             \tlret   \\$0x28\n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 cb                \tlretq  \n+ +[a-f0-9]+:\t48 c1 24 24 00       \tshlq   \\$0x0,\\(%rsp\\)\n+ +[a-f0-9]+:\t0f ae e8             \tlfence \n+ +[a-f0-9]+:\t48 ca 28 00          \tlretq  \\$0x28\n+#pass"
    },
    {
      "sha": "13730e50e6feb309f12d95b84ff1101681d02269",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret.e",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret.e",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret.e",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret.e?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,3 @@\n+.*: Assembler messages:\n+.*:??: Warning: no instruction mnemonic suffix given and no register operands; using default for `lret'\n+.*:??: Warning: no instruction mnemonic suffix given and no register operands; using default for `lret'"
    },
    {
      "sha": "986239c222e914f27296d2db1924b61ebeeb783b",
      "filename": "gas/testsuite/gas/i386/x86-64-lfence-ret.s",
      "status": "added",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a09f656b267b9a684f038fba7cadfe98e2f18892/gas/testsuite/gas/i386/x86-64-lfence-ret.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-lfence-ret.s?ref=a09f656b267b9a684f038fba7cadfe98e2f18892",
      "patch": "@@ -0,0 +1,14 @@\n+\t.text\n+_start:\n+\tretw\n+\tretw\t$20\n+\tret\n+\tret\t$30\n+\tdata16 rex.w ret\n+\tdata16 rex.w ret\t$40\n+\tlretw\n+\tlretw\t$40\n+\tlret\n+\tlret\t$40\n+\tlretq\n+\tlretq\t$40"
    }
  ]
}