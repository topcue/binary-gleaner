{
  "sha": "9d299bea8cca3bfd91a3c7a47510c52a9e829858",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OWQyOTliZWE4Y2NhM2JmZDkxYTNjN2E0NzUxMGM1MmE5ZTgyOTg1OA==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-06-07T10:03:32Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-06-07T10:03:32Z"
    },
    "message": "x86: make symbol quotation check consistent in i386_att_operand()\n\nWhen d02603dc201f (\"Allow symbol and label names to be enclosed in\ndouble quotes\") added the check for a leading double quote to\ni386_att_operand(), it missed a second similar check after having found\na segment override. To avoid the two checks going out of sync again,\nintroduce an inline helper.",
    "tree": {
      "sha": "69ea736234165bda8e0922c83669213a7dabbc36",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/69ea736234165bda8e0922c83669213a7dabbc36"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9d299bea8cca3bfd91a3c7a47510c52a9e829858",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9d299bea8cca3bfd91a3c7a47510c52a9e829858",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9d299bea8cca3bfd91a3c7a47510c52a9e829858",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9d299bea8cca3bfd91a3c7a47510c52a9e829858/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c8d541e2e73493228f332f4bdc9ecc8164d3744f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c8d541e2e73493228f332f4bdc9ecc8164d3744f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c8d541e2e73493228f332f4bdc9ecc8164d3744f"
    }
  ],
  "stats": {
    "total": 51,
    "additions": 44,
    "deletions": 7
  },
  "files": [
    {
      "sha": "b5686eed778dda6ea734b0753546d7477bfdf903",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=9d299bea8cca3bfd91a3c7a47510c52a9e829858",
      "patch": "@@ -1,3 +1,10 @@\n+2021-06-07  Jan Beulich  <jbeulich@suse.com>\n+\n+\t* config/tc-i386.c (starts_memory_operand): New.\n+\t(i386_att_operand): Use it.\n+\t* testsuite/gas/i386/quoted.s, testsuite/gas/i386/quoted.d: New.\n+\t* testsuite/gas/i386/i386.exp: Run new test.\n+\n 2021-06-07  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (i386_att_operand): Flip checking for '*' and"
    },
    {
      "sha": "063383c8dcdb2ed88c86bbc9e84eef326ecd608d",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 10,
      "deletions": 7,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=9d299bea8cca3bfd91a3c7a47510c52a9e829858",
      "patch": "@@ -11368,6 +11368,14 @@ maybe_adjust_templates (void)\n   return 1;\n }\n \n+static INLINE bool starts_memory_operand (char c)\n+{\n+  return is_digit_char (c)\n+\t || is_identifier_char (c)\n+\t || c == '\"'\n+\t || c == '(';\n+}\n+\n /* Parse OPERAND_STRING into the i386_insn structure I.  Returns zero\n    on error.  */\n \n@@ -11422,9 +11430,7 @@ i386_att_operand (char *operand_string)\n \t      i.jumpabsolute = true;\n \t    }\n \n-\t  if (!is_digit_char (*op_string)\n-\t      && !is_identifier_char (*op_string)\n-\t      && *op_string != '(')\n+\t  if (!starts_memory_operand (*op_string))\n \t    {\n \t      as_bad (_(\"bad memory operand `%s'\"), op_string);\n \t      return 0;\n@@ -11474,10 +11480,7 @@ i386_att_operand (char *operand_string)\n       /* If it is a RC or SAE immediate, do nothing.  */\n       ;\n     }\n-  else if (is_digit_char (*op_string)\n-\t   || is_identifier_char (*op_string)\n-\t   || *op_string == '\"'\n-\t   || *op_string == '(')\n+  else if (starts_memory_operand (*op_string))\n     {\n       /* This is a memory reference of some sort.  */\n       char *base_string;"
    },
    {
      "sha": "001c5f90adbaad8467849a8c9535634ad868aef2",
      "filename": "gas/testsuite/gas/i386/i386.exp",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/i386.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/i386.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/i386.exp?ref=9d299bea8cca3bfd91a3c7a47510c52a9e829858",
      "patch": "@@ -96,6 +96,7 @@ if [gas_32_check] then {\n     run_dump_test \"equ\"\n     run_list_test \"equ-bad\"\n     run_dump_test \"divide\"\n+    run_dump_test \"quoted\"\n     run_dump_test \"padlock\"\n     run_dump_test \"crx\"\n     run_list_test \"cr-err\" \"\""
    },
    {
      "sha": "704329db1f9b8c7dd6b6636d9a144d1ed93ce17c",
      "filename": "gas/testsuite/gas/i386/quoted.d",
      "status": "added",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/quoted.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/quoted.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/quoted.d?ref=9d299bea8cca3bfd91a3c7a47510c52a9e829858",
      "patch": "@@ -0,0 +1,16 @@\n+#objdump: -drw\n+#name: i386 quoted symbols\n+\n+.*: +file format .*\n+\n+Disassembly of section .text:\n+\n+0+ <quoted>:\n+[ \t]*[a-f0-9]+:[ \t]*a1 00 00 00 00[\t ]+mov    0x0,%eax\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*8b 80 00 00 00 00[\t ]+mov    0x0\\(%eax\\),%eax\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*26 a1 00 00 00 00[\t ]+mov    %es:0x0,%eax\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*26 8b 80 00 00 00 00[\t ]+mov    %es:0x0\\(%eax\\),%eax\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*ff 15 00 00 00 00[\t ]+call   \\*0x0\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*26 ff 15 00 00 00 00[\t ]+call   \\*%es:0x0\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+[ \t]*[a-f0-9]+:[ \t]*26 ff 15 00 00 00 00[\t ]+call   \\*%es:0x0\t[a-f0-9]+: (R_386_|dir)32\tx\\(y\\)\n+#pass"
    },
    {
      "sha": "3bbeedfa0bc0ce719e4c3a7726310edc799fbf93",
      "filename": "gas/testsuite/gas/i386/quoted.s",
      "status": "added",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/quoted.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9d299bea8cca3bfd91a3c7a47510c52a9e829858/gas/testsuite/gas/i386/quoted.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/quoted.s?ref=9d299bea8cca3bfd91a3c7a47510c52a9e829858",
      "patch": "@@ -0,0 +1,10 @@\n+\t.text\n+quoted:\n+\tmov\t\"x(y)\", %eax\n+\tmov\t\"x(y)\"(%eax), %eax\n+\tmov\t%es:\"x(y)\", %eax\n+\tmov\t%es:\"x(y)\"(%eax), %eax\n+\n+\tcall\t*\"x(y)\"\n+\tcall\t*%es:\"x(y)\"\n+\tcall\t%es:*\"x(y)\""
    }
  ]
}