{
  "sha": "c3036ed0633483325bf37e5cf70d44c7b66bfc61",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YzMwMzZlZDA2MzM0ODMzMjViZjM3ZTVjZjcwZDQ0YzdiNjZiZmM2MQ==",
  "commit": {
    "author": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2020-01-31T08:03:56Z"
    },
    "committer": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2020-01-31T13:22:46Z"
    },
    "message": "aarch64: Fix MOVPRFX markup for bf16 conversions\n\nbfcvt converts a .S input to a .H output, so any predicated movprfx\nneeds to operate on .S rather than .H.  In common with SVE2 narrowing\ntop operations, bfcvtnt doesn't accept movprfx.\n\n2020-01-31  Richard Sandiford  <richard.sandiford@arm.com>\n\nopcodes/\n\t* aarch64-tbl.h (aarch64_opcode): Set C_MAX_ELEM for SVE bfcvt.\n\tRemove C_SCAN_MOVPRFX for SVE bfcvtnt.\n\ngas/\n\t* testsuite/gas/aarch64/sve-bfloat-movprfx.s: Use .h rather than\n\t.s for the movprfx.\n\t* testsuite/gas/aarch64/sve-bfloat-movprfx.d: Update accordingly.\n\t* testsuite/gas/aarch64/sve-movprfx_28.d,\n\t* testsuite/gas/aarch64/sve-movprfx_28.l,\n\t* testsuite/gas/aarch64/sve-movprfx_28.s: New test.",
    "tree": {
      "sha": "7b044d63ba6107cadea6dbcacc0b7a1b01aed12e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7b044d63ba6107cadea6dbcacc0b7a1b01aed12e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/c3036ed0633483325bf37e5cf70d44c7b66bfc61",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3036ed0633483325bf37e5cf70d44c7b66bfc61",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/c3036ed0633483325bf37e5cf70d44c7b66bfc61",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c3036ed0633483325bf37e5cf70d44c7b66bfc61/comments",
  "author": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "fd9faca826e6ee9178cf0b1c2486e3c662d6375a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fd9faca826e6ee9178cf0b1c2486e3c662d6375a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/fd9faca826e6ee9178cf0b1c2486e3c662d6375a"
    }
  ],
  "stats": {
    "total": 106,
    "additions": 102,
    "deletions": 4
  },
  "files": [
    {
      "sha": "cff57b095aaa1f271a2833083d111117298476e6",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -1,3 +1,12 @@\n+2020-01-31  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* testsuite/gas/aarch64/sve-bfloat-movprfx.s: Use .h rather than\n+\t.s for the movprfx.\n+\t* testsuite/gas/aarch64/sve-bfloat-movprfx.d: Update accordingly.\n+\t* testsuite/gas/aarch64/sve-movprfx_28.d,\n+\t* testsuite/gas/aarch64/sve-movprfx_28.l,\n+\t* testsuite/gas/aarch64/sve-movprfx_28.s: New test.\n+\n 2020-01-30  Jan Beulich  <jbeulich@suse.com>\n \n \t* config/tc-i386.c (output_disp): Tighten base_opcode check."
    },
    {
      "sha": "e51bd11427d597b59addec8e0474cb0e4605b925",
      "filename": "gas/testsuite/gas/aarch64/sve-bfloat-movprfx.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.d?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -23,5 +23,5 @@ Disassembly of section \\.text:\n  *[0-9a-f]+:\t64e34440 \tbfmlalt\tz0\\.s, z2\\.h, z3\\.h\\[0\\]\n  *[0-9a-f]+:\t0420bc20 \tmovprfx\tz0, z1\n  *[0-9a-f]+:\t658aa040 \tbfcvt\tz0\\.h, p0/m, z2\\.s\n- *[0-9a-f]+:\t04512020 \tmovprfx\tz0\\.h, p0/m, z1\\.h\n+ *[0-9a-f]+:\t04912020 \tmovprfx\tz0\\.s, p0/m, z1\\.s\n  *[0-9a-f]+:\t658aa040 \tbfcvt\tz0\\.h, p0/m, z2\\.s"
    },
    {
      "sha": "d46da21aac6a59b9073e6118b0eb81bb8738862e",
      "filename": "gas/testsuite/gas/aarch64/sve-bfloat-movprfx.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sve-bfloat-movprfx.s?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -27,5 +27,5 @@ movprfx z0, z1\n bfcvt z0.h, p0/m, z2.s\n \n # Predicated movprfx + bfcvt\n-movprfx z0.h, p0/m, z1.h\n+movprfx z0.s, p0/m, z1.s\n bfcvt z0.h, p0/m, z2.s"
    },
    {
      "sha": "808d07da892539f97fcadc343a5d7c7e2b40ac95",
      "filename": "gas/testsuite/gas/aarch64/sve-movprfx_28.d",
      "status": "added",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sve-movprfx_28.d?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -0,0 +1,31 @@\n+#source: sve-movprfx_28.s\n+#warning_output: sve-movprfx_28.l\n+#as: -I$srcdir/$subdir --generate-missing-build-notes=no\n+#objdump: -Dr -M notes\n+\n+.* file format .*\n+\n+Disassembly of section .*:\n+\n+0+ <.*>:\n+[^:]+:\t04912420 \tmovprfx\tz0\\.s, p1/m, z1\\.s\n+[^:]+:\t658aa440 \tbfcvt\tz0\\.h, p1/m, z2\\.s\n+[^:]+:\t04902420 \tmovprfx\tz0\\.s, p1/z, z1\\.s\n+[^:]+:\t658aa440 \tbfcvt\tz0\\.h, p1/m, z2\\.s\n+[^:]+:\t04512420 \tmovprfx\tz0\\.h, p1/m, z1\\.h\n+[^:]+:\t658aa440 \tbfcvt\tz0\\.h, p1/m, z2\\.s  // note: register size not compatible with previous `movprfx' at operand 1\n+[^:]+:\t04502420 \tmovprfx\tz0\\.h, p1/z, z1\\.h\n+[^:]+:\t658aa440 \tbfcvt\tz0\\.h, p1/m, z2\\.s  // note: register size not compatible with previous `movprfx' at operand 1\n+[^:]+:\t0420bc20 \tmovprfx\tz0, z1\n+[^:]+:\t658aa440 \tbfcvt\tz0\\.h, p1/m, z2\\.s\n+[^:]+:\t0420bc20 \tmovprfx\tz0, z1\n+[^:]+:\t648aa440 \tbfcvtnt\tz0\\.h, p1/m, z2\\.s  // note: SVE `movprfx' compatible instruction expected\n+[^:]+:\t04912420 \tmovprfx\tz0\\.s, p1/m, z1\\.s\n+[^:]+:\t648aa440 \tbfcvtnt\tz0\\.h, p1/m, z2\\.s  // note: SVE `movprfx' compatible instruction expected\n+[^:]+:\t04902420 \tmovprfx\tz0\\.s, p1/z, z1\\.s\n+[^:]+:\t648aa440 \tbfcvtnt\tz0\\.h, p1/m, z2\\.s  // note: SVE `movprfx' compatible instruction expected\n+[^:]+:\t04512420 \tmovprfx\tz0\\.h, p1/m, z1\\.h\n+[^:]+:\t648aa440 \tbfcvtnt\tz0\\.h, p1/m, z2\\.s  // note: SVE `movprfx' compatible instruction expected\n+[^:]+:\t04502420 \tmovprfx\tz0\\.h, p1/z, z1\\.h\n+[^:]+:\t648aa440 \tbfcvtnt\tz0\\.h, p1/m, z2\\.s  // note: SVE `movprfx' compatible instruction expected\n+[^:]+:\td65f03c0 \tret"
    },
    {
      "sha": "a75289ca2a48c9de4382349b1dc225c3349c90af",
      "filename": "gas/testsuite/gas/aarch64/sve-movprfx_28.l",
      "status": "added",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sve-movprfx_28.l?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -0,0 +1,8 @@\n+[^:]*: Assembler messages:\n+.*:15: Warning: register size not compatible with previous `movprfx' at operand 1 -- `bfcvt z0.h,p1/m,z2.s'\n+.*:19: Warning: register size not compatible with previous `movprfx' at operand 1 -- `bfcvt z0.h,p1/m,z2.s'\n+.*:27: Warning: SVE `movprfx' compatible instruction expected -- `bfcvtnt z0.h,p1/m,z2.s'\n+.*:31: Warning: SVE `movprfx' compatible instruction expected -- `bfcvtnt z0.h,p1/m,z2.s'\n+.*:35: Warning: SVE `movprfx' compatible instruction expected -- `bfcvtnt z0.h,p1/m,z2.s'\n+.*:39: Warning: SVE `movprfx' compatible instruction expected -- `bfcvtnt z0.h,p1/m,z2.s'\n+.*:43: Warning: SVE `movprfx' compatible instruction expected -- `bfcvtnt z0.h,p1/m,z2.s'"
    },
    {
      "sha": "9ef0ad532f2f1772010546e3f4e470f64ca5b1bc",
      "filename": "gas/testsuite/gas/aarch64/sve-movprfx_28.s",
      "status": "added",
      "additions": 45,
      "deletions": 0,
      "changes": 45,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/gas/testsuite/gas/aarch64/sve-movprfx_28.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/sve-movprfx_28.s?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -0,0 +1,45 @@\n+\t.text\n+\t.arch armv8-a+sve+bf16\n+\n+f:\n+\t// OK\n+\tmovprfx z0.s, p1/m, z1.s\n+\tbfcvt z0.h, p1/m, z2.s\n+\n+\t// OK\n+\tmovprfx z0.s, p1/z, z1.s\n+\tbfcvt z0.h, p1/m, z2.s\n+\n+\t// Wrong size\n+\tmovprfx z0.h, p1/m, z1.h\n+\tbfcvt z0.h, p1/m, z2.s\n+\n+\t// Wrong size\n+\tmovprfx z0.h, p1/z, z1.h\n+\tbfcvt z0.h, p1/m, z2.s\n+\n+\t// OK\n+\tmovprfx z0, z1\n+\tbfcvt z0.h, p1/m, z2.s\n+\n+\t// Not prefixable\n+\tmovprfx z0, z1\n+\tbfcvtnt z0.h, p1/m, z2.s\n+\n+\t// Not prefixable\n+\tmovprfx z0.s, p1/m, z1.s\n+\tbfcvtnt z0.h, p1/m, z2.s\n+\n+\t// Not prefixable\n+\tmovprfx z0.s, p1/z, z1.s\n+\tbfcvtnt z0.h, p1/m, z2.s\n+\n+\t// Not prefixable\n+\tmovprfx z0.h, p1/m, z1.h\n+\tbfcvtnt z0.h, p1/m, z2.s\n+\n+\t// Not prefixable\n+\tmovprfx z0.h, p1/z, z1.h\n+\tbfcvtnt z0.h, p1/m, z2.s\n+\n+\tret"
    },
    {
      "sha": "dd41d8850032f4c571f836af7775bfe7ca44999f",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -1,3 +1,8 @@\n+2020-01-31  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* aarch64-tbl.h (aarch64_opcode): Set C_MAX_ELEM for SVE bfcvt.\n+\tRemove C_SCAN_MOVPRFX for SVE bfcvtnt.\n+\n 2020-01-30  Alan Modra  <amodra@gmail.com>\n \n \t* m32c-ibld.c: Regenerate."
    },
    {
      "sha": "2bc69a38ee0ddad72a4a97cd40c1d4235a6621d1",
      "filename": "opcodes/aarch64-tbl.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/c3036ed0633483325bf37e5cf70d44c7b66bfc61/opcodes/aarch64-tbl.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/c3036ed0633483325bf37e5cf70d44c7b66bfc61/opcodes/aarch64-tbl.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/aarch64-tbl.h?ref=c3036ed0633483325bf37e5cf70d44c7b66bfc61",
      "patch": "@@ -5107,8 +5107,8 @@ struct aarch64_opcode aarch64_opcode_table[] =\n   BFLOAT16_SVE_INSNC (\"bfdot\",  0x64608000, 0xffe0fc00, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm_16), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),\n   BFLOAT16_SVE_INSNC (\"bfdot\",  0x64604000, 0xffe0fc00, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm3_INDEX), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),\n   BFLOAT16_SVE_INSNC (\"bfmmla\",  0x6460e400, 0xffe0fc00, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm_16), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),\n-  BFLOAT16_SVE_INSNC (\"bfcvt\",  0x658aa000, 0xffffe000, sve_misc, OP3 (SVE_Zd, SVE_Pg3, SVE_Zn), OP_SVE_HMS, 0, C_SCAN_MOVPRFX, 0),\n-  BFLOAT16_SVE_INSNC (\"bfcvtnt\",  0x648aa000, 0xffffe000, sve_misc, OP3 (SVE_Zd, SVE_Pg3, SVE_Zn), OP_SVE_HMS, 0, C_SCAN_MOVPRFX, 0),\n+  BFLOAT16_SVE_INSNC (\"bfcvt\",  0x658aa000, 0xffffe000, sve_misc, OP3 (SVE_Zd, SVE_Pg3, SVE_Zn), OP_SVE_HMS, 0, C_SCAN_MOVPRFX | C_MAX_ELEM, 0),\n+  BFLOAT16_SVE_INSNC (\"bfcvtnt\",  0x648aa000, 0xffffe000, sve_misc, OP3 (SVE_Zd, SVE_Pg3, SVE_Zn), OP_SVE_HMS, 0, 0, 0),\n   BFLOAT16_SVE_INSNC (\"bfmlalt\",  0x64e08400, 0xffe0fc00, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm_16), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),\n   BFLOAT16_SVE_INSNC (\"bfmlalb\",  0x64e08000, 0xffe0fc00, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm_16), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),\n   BFLOAT16_SVE_INSNC (\"bfmlalt\",  0x64e04400, 0xffe0f400, sve_misc, OP3 (SVE_Zd, SVE_Zn, SVE_Zm3_11_INDEX), OP_SVE_SHH, 0, C_SCAN_MOVPRFX, 0),"
    }
  ]
}