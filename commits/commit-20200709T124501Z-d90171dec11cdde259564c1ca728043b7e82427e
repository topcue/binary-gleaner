{
  "sha": "d90171dec11cdde259564c1ca728043b7e82427e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDkwMTcxZGVjMTFjZGRlMjU5NTY0YzFjYTcyODA0M2I3ZTgyNDI3ZQ==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-07-09T12:45:01Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-07-09T12:45:01Z"
    },
    "message": "Update the Windows Resource compiler (windres) to support the OWNERDRAW and BITMAP menuitem flags.\n\nbinutils* rclex.c: Add OWNERDRAW keyword.\n\t* rcparse.y: Add OWNERDRAW token.\n\t(menuitem_flag) Add BITMAP and OWNERDRAW entries.\n\t* resrc.c (write_rc_menuitems): Add support for OWNERDRAW and\n\tBITMAP flags.\n\t* windres.c (extended_menuitems): Likewise.\n\t* testsuite/binutils-all/windres/menuitem_flags.rc: New test.",
    "tree": {
      "sha": "b5522fea01f73a63eb4209a628548caf29a1aa75",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/b5522fea01f73a63eb4209a628548caf29a1aa75"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d90171dec11cdde259564c1ca728043b7e82427e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d90171dec11cdde259564c1ca728043b7e82427e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d90171dec11cdde259564c1ca728043b7e82427e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d90171dec11cdde259564c1ca728043b7e82427e/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e3fdc001d359d6bcd033c1276c772e72d3f49078",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e3fdc001d359d6bcd033c1276c772e72d3f49078",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e3fdc001d359d6bcd033c1276c772e72d3f49078"
    }
  ],
  "stats": {
    "total": 44,
    "additions": 42,
    "deletions": 2
  },
  "files": [
    {
      "sha": "9f6be43f0cfaa5e56a5e8fd6be911cd17c13b1d8",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -1,3 +1,13 @@\n+2020-07-09  Nick Clifton  <nickc@redhat.com>\n+\n+\t* rclex.c: Add OWNERDRAW keyword.\n+\t* rcparse.y: Add OWNERDRAW token.\n+\t(menuitem_flag) Add BITMAP and OWNERDRAW entries.\n+\t* resrc.c (write_rc_menuitems): Add support for OWNERDRAW and\n+\tBITMAP flags.\n+\t* windres.c (extended_menuitems): Likewise.\n+\t* testsuite/binutils-all/windres/menuitem_flags.rc: New test.\n+\n 2020-07-09  Alan Modra  <amodra@gmail.com>\n \n \t* readelf (slurp_hppa_unwind_table): Set table_len before use"
    },
    {
      "sha": "fac74b0491bd0e7135d34b8ae1ed19c6436814fd",
      "filename": "binutils/rclex.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/rclex.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/rclex.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/rclex.c?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -94,7 +94,7 @@ static const struct rclex_keywords keywds[] =\n   K(LANGUAGE), K(LISTBOX), K(LOADONCALL), K(LTEXT),\n   K(MANIFEST), K(MENU), K(MENUBARBREAK), K(MENUBREAK),\n   K(MENUEX), K(MENUITEM), K(MESSAGETABLE), K(MOVEABLE),\n-  K(NOINVERT), K(NOT),\n+  K(NOINVERT), K(NOT), K(OWNERDRAW),\n   K(PLUGPLAY), K(POPUP), K(PRELOAD), K(PRODUCTVERSION),\n   K(PURE), K(PUSHBOX), K(PUSHBUTTON),\n   K(RADIOBUTTON), K(RCDATA), K(RTEXT),"
    },
    {
      "sha": "c0ed338ed0a2acfd7f3eae538e3bbc81a993ece0",
      "filename": "binutils/rcparse.y",
      "status": "modified",
      "additions": 9,
      "deletions": 1,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/rcparse.y",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/rcparse.y",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/rcparse.y?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -124,7 +124,7 @@ static const rc_res_id res_null_text = { 1, {{0, &null_unichar}}};\n %token ICON\n %token ANICURSOR ANIICON DLGINCLUDE DLGINIT FONTDIR HTML MANIFEST PLUGPLAY VXD TOOLBAR BUTTON\n %token LANGUAGE CHARACTERISTICS VERSIONK\n-%token MENU MENUEX MENUITEM SEPARATOR POPUP CHECKED GRAYED HELP INACTIVE\n+%token MENU MENUEX MENUITEM SEPARATOR POPUP CHECKED GRAYED HELP INACTIVE OWNERDRAW\n %token MENUBARBREAK MENUBREAK\n %token MESSAGETABLE\n %token RCDATA\n@@ -1088,6 +1088,14 @@ menuitem_flag:\n \t  {\n \t    $$ = MENUITEM_MENUBREAK;\n \t  }\n+\t| BITMAP\n+\t  {\n+\t    $$ = MENUITEM_BITMAP;\n+\t  }\n+\t| OWNERDRAW\n+\t  {\n+\t    $$ = MENUITEM_OWNERDRAW;\n+\t  }\n \t;\n \n /* Menuex resources.  */"
    },
    {
      "sha": "5a6336ee6c0f8cf366c85b6fdd1f08cccd911ff2",
      "filename": "binutils/resrc.c",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/resrc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/resrc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/resrc.c?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -2841,6 +2841,10 @@ write_rc_menuitems (FILE *e, const rc_menuitem *menuitems, int menuex,\n \t    fprintf (e, \", MENUBARBREAK\");\n \t  if ((mi->type & MENUITEM_MENUBREAK) != 0)\n \t    fprintf (e, \", MENUBREAK\");\n+\t  if ((mi->type & MENUITEM_OWNERDRAW) != 0)\n+\t    fprintf (e, \", OWNERDRAW\");\n+\t  if ((mi->type & MENUITEM_BITMAP) != 0)\n+\t    fprintf (e, \", BITMAP\");\n \t}\n       else\n \t{"
    },
    {
      "sha": "cbd59e47d31945a5ac8a002f9d385564cca003f5",
      "filename": "binutils/testsuite/binutils-all/windres/menuitem_flags.rc",
      "status": "added",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/testsuite/binutils-all/windres/menuitem_flags.rc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/testsuite/binutils-all/windres/menuitem_flags.rc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/windres/menuitem_flags.rc?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -0,0 +1,16 @@\n+// parse-only\n+\n+1 MENU\n+{\n+    POPUP \"&File\"\n+    {\n+        MENUITEM \"This is a test #1\", 100, BITMAP\n+        MENUITEM \"This is a test #2\", 101, OWNERDRAW\n+        MENUITEM \"This is a test #3\", 102, CHECKED\n+        MENUITEM \"This is a test #4\", 103, GRAYED\n+        MENUITEM \"This is a test #5\", 104, HELP\n+        MENUITEM \"This is a test #6\", 105, INACTIVE\n+        MENUITEM \"This is a test #7\", 106, MENUBARBREAK\n+        MENUITEM \"This is a test #8\", 107, MENUBREAK\n+    }\n+}"
    },
    {
      "sha": "5c83dab8fc0dd5ba3a085b87aa9f5139a8a54a4b",
      "filename": "binutils/windres.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d90171dec11cdde259564c1ca728043b7e82427e/binutils/windres.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d90171dec11cdde259564c1ca728043b7e82427e/binutils/windres.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/windres.c?ref=d90171dec11cdde259564c1ca728043b7e82427e",
      "patch": "@@ -527,6 +527,8 @@ extended_menuitems (const rc_menuitem *menuitems)\n \t\t| MENUITEM_HELP\n \t\t| MENUITEM_INACTIVE\n \t\t| MENUITEM_MENUBARBREAK\n+\t\t| MENUITEM_BITMAP\n+\t\t| MENUITEM_OWNERDRAW\n \t\t| MENUITEM_MENUBREAK))\n \t  != 0)\n \treturn 1;"
    }
  ]
}