{
  "sha": "a05cf17ab92357449ed62fa0d1bac7389ee2de09",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTA1Y2YxN2FiOTIzNTc0NDllZDYyZmEwZDFiYWM3Mzg5ZWUyZGUwOQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-11-25T20:04:52Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2019-12-04T16:31:18Z"
    },
    "message": "Propagate endianity to subrange types\n\nA subrange type should inherit its endianity from its base type.\n\ngdb/ChangeLog\n2019-12-04  Tom Tromey  <tromey@adacore.com>\n\n\t* gdbtypes.c (create_range_type): Inherit endianity\n\tfrom base type.\n\ngdb/testsuite/ChangeLog\n2019-12-04  Tom Tromey  <tromey@adacore.com>\n\n\t* gdb.ada/scalar_storage/storage.adb: New file.\n\t* gdb.ada/scalar_storage/pck.adb: New file.\n\t* gdb.ada/scalar_storage/pck.ads: New file.\n\t* gdb.ada/scalar_storage.exp: New file.\n\nChange-Id: I2998ab919dc28aeff097763c4242f9bfb90823a3",
    "tree": {
      "sha": "54ad7a79a294e521fd7987a0ff7e4ca0041acf04",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/54ad7a79a294e521fd7987a0ff7e4ca0041acf04"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a05cf17ab92357449ed62fa0d1bac7389ee2de09",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a05cf17ab92357449ed62fa0d1bac7389ee2de09",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a05cf17ab92357449ed62fa0d1bac7389ee2de09",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a05cf17ab92357449ed62fa0d1bac7389ee2de09/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d5a22e77b56529eade787419ea80a7e9e7d2aa6f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d5a22e77b56529eade787419ea80a7e9e7d2aa6f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d5a22e77b56529eade787419ea80a7e9e7d2aa6f"
    }
  ],
  "stats": {
    "total": 138,
    "additions": 138,
    "deletions": 0
  },
  "files": [
    {
      "sha": "f06f73903a602274a04ddb123bbfe2ec28313191",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -1,3 +1,8 @@\n+2019-12-04  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gdbtypes.c (create_range_type): Inherit endianity\n+\tfrom base type.\n+\n 2019-12-04  Tom Tromey  <tromey@adacore.com>\n \n \t* ada-lang.c (decode_constrained_packed_array)"
    },
    {
      "sha": "775e8c18f91158bbff6d3fec3335b25cce0d6d82",
      "filename": "gdb/gdbtypes.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/gdbtypes.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/gdbtypes.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbtypes.c?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -949,6 +949,9 @@ create_range_type (struct type *result_type, struct type *index_type,\n   if (high_bound->kind == PROP_CONST && high_bound->data.const_val < 0)\n     TYPE_UNSIGNED (result_type) = 0;\n \n+  TYPE_ENDIANITY_NOT_DEFAULT (result_type)\n+    = TYPE_ENDIANITY_NOT_DEFAULT (index_type);\n+\n   return result_type;\n }\n "
    },
    {
      "sha": "3ba369245c0442a403948bbf204ec8ec0e08b9dc",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -1,3 +1,10 @@\n+2019-12-04  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gdb.ada/scalar_storage/storage.adb: New file.\n+\t* gdb.ada/scalar_storage/pck.adb: New file.\n+\t* gdb.ada/scalar_storage/pck.ads: New file.\n+\t* gdb.ada/scalar_storage.exp: New file.\n+\n 2019-12-04  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.base/endianity.c (struct otherendian) <f>: New field."
    },
    {
      "sha": "92ad4edf99e928b26be0d978a5775eb489595593",
      "filename": "gdb/testsuite/gdb.ada/scalar_storage.exp",
      "status": "added",
      "additions": 36,
      "deletions": 0,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/scalar_storage.exp?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -0,0 +1,36 @@\n+# Copyright 2019 Free Software Foundation, Inc.\n+#\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+#\n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+# Test that range types with scalar storage order are handled\n+# properly.\n+\n+load_lib \"ada.exp\"\n+\n+standard_ada_testfile storage\n+\n+if {[gdb_compile_ada \"${srcfile}\" \"${binfile}\" executable [list debug ]] != \"\" } {\n+  return -1\n+}\n+\n+clean_restart ${testfile}\n+\n+set bp_location [gdb_get_line_number \"START\" ${testdir}/storage.adb]\n+if ![runto \"storage.adb:$bp_location\" ] then {\n+  perror \"Couldn't run ${testfile}\"\n+  return\n+}\n+\n+gdb_test \"print V_LE\" \"= \\\\(value => 126\\\\)\"\n+gdb_test \"print V_BE\" \"= \\\\(value => 126\\\\)\""
    },
    {
      "sha": "6535991a193f9b91bc6faf6d79b4f530d9bf87a0",
      "filename": "gdb/testsuite/gdb.ada/scalar_storage/pck.adb",
      "status": "added",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/pck.adb",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/pck.adb",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/scalar_storage/pck.adb?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -0,0 +1,21 @@\n+--  Copyright 2019 Free Software Foundation, Inc.\n+--\n+--  This program is free software; you can redistribute it and/or modify\n+--  it under the terms of the GNU General Public License as published by\n+--  the Free Software Foundation; either version 3 of the License, or\n+--  (at your option) any later version.\n+--\n+--  This program is distributed in the hope that it will be useful,\n+--  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+--  GNU General Public License for more details.\n+--\n+--  You should have received a copy of the GNU General Public License\n+--  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+package body Pck is\n+   procedure Do_Nothing (A : System.Address) is\n+   begin\n+      null;\n+   end Do_Nothing;\n+end Pck;"
    },
    {
      "sha": "b8d00101753ce26cf0b86249a79e937b6fee4480",
      "filename": "gdb/testsuite/gdb.ada/scalar_storage/pck.ads",
      "status": "added",
      "additions": 19,
      "deletions": 0,
      "changes": 19,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/pck.ads",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/pck.ads",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/scalar_storage/pck.ads?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -0,0 +1,19 @@\n+--  Copyright 2019 Free Software Foundation, Inc.\n+--\n+--  This program is free software; you can redistribute it and/or modify\n+--  it under the terms of the GNU General Public License as published by\n+--  the Free Software Foundation; either version 3 of the License, or\n+--  (at your option) any later version.\n+--\n+--  This program is distributed in the hope that it will be useful,\n+--  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+--  GNU General Public License for more details.\n+--\n+--  You should have received a copy of the GNU General Public License\n+--  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+with System;\n+package Pck is\n+   procedure Do_Nothing (A : System.Address);\n+end Pck;"
    },
    {
      "sha": "abc1a83860e0fa1f3d6ce0ac4373f0eb82727f92",
      "filename": "gdb/testsuite/gdb.ada/scalar_storage/storage.adb",
      "status": "added",
      "additions": 47,
      "deletions": 0,
      "changes": 47,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/storage.adb",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a05cf17ab92357449ed62fa0d1bac7389ee2de09/gdb/testsuite/gdb.ada/scalar_storage/storage.adb",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/scalar_storage/storage.adb?ref=a05cf17ab92357449ed62fa0d1bac7389ee2de09",
      "patch": "@@ -0,0 +1,47 @@\n+--  Copyright 2019 Free Software Foundation, Inc.\n+--\n+--  This program is free software; you can redistribute it and/or modify\n+--  it under the terms of the GNU General Public License as published by\n+--  the Free Software Foundation; either version 3 of the License, or\n+--  (at your option) any later version.\n+--\n+--  This program is distributed in the hope that it will be useful,\n+--  but WITHOUT ANY WARRANTY; without even the implied warranty of\n+--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+--  GNU General Public License for more details.\n+--\n+--  You should have received a copy of the GNU General Public License\n+--  along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+\n+with Pck; use Pck;\n+with System.Storage_Elements; use System.Storage_Elements;\n+\n+procedure Storage is\n+   subtype Some_Range is Natural range 0..127;\n+\n+   type Rec is record\n+      Value : Some_Range;\n+   end record;\n+   \n+   for Rec use record\n+      Value at 0 range 0..127;\n+   end record;\n+\n+   type Rec_LE is new Rec;\n+   for Rec_LE'Bit_Order use System.Low_Order_First;\n+   for Rec_LE'Scalar_Storage_Order use System.Low_Order_First;\n+\n+   type Rec_BE is new Rec;\n+   for Rec_BE'Bit_Order use System.High_Order_First;\n+   for Rec_BE'Scalar_Storage_Order use System.High_Order_First;\n+\n+   V_LE : Rec_LE;\n+   V_BE : Rec_BE;\n+\n+begin\n+   V_LE.Value := 126;\n+   V_BE.Value := 126;\n+\n+   Do_Nothing (V_LE'Address);  --  START\n+   Do_Nothing (V_BE'Address);\n+end Storage;"
    }
  ]
}