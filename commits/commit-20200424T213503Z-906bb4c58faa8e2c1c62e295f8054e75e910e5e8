{
  "sha": "906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTA2YmI0YzU4ZmFhOGUyYzFjNjJlMjk1ZjgwNTRlNzVlOTEwZTVlOA==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-04-24T21:35:01Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tromey@adacore.com",
      "date": "2020-04-24T21:35:03Z"
    },
    "message": "Fix Rust test cases\n\nPR rust/25025 notes that some Rust test cases fail.\n\nDebugging gdb revealed that the Rust compiler emits different linkage\nnames that demangle to the same result.  Enabling complaints when\nreading the test case is enough to show it:\n\n    During symbol reading: Computed physname <generics::identity<f64>> does not match demangled <generics::identity> (from linkage <_ZN8generics8identity17h8540b320af6656d6E>) - DIE at 0x424 [in module /home/tromey/gdb/build/gdb/testsuite/outputs/gdb.rust/generics/generics]\n    During symbol reading: Computed physname <generics::identity<u32>> does not match demangled <generics::identity> (from linkage <_ZN8generics8identity17hae302fad0c33bd7dE>) - DIE at 0x459 [in module /home/tromey/gdb/build/gdb/testsuite/outputs/gdb.rust/generics/generics]\n    ...\n\nThis patch changes the DWARF reader to prefer the computed physname,\nrather than the output of the demangler, for Rust.  This fixes the\nbug.\n\ngdb/ChangeLog\n2020-04-24  Tom Tromey  <tom@tromey.com>\n\n\tPR rust/25025:\n\t* dwarf2/read.c (dwarf2_physname): Do not demangle for Rust.",
    "tree": {
      "sha": "955841ac70ccb81d1a7515bb1e5d715589ccaf6a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/955841ac70ccb81d1a7515bb1e5d715589ccaf6a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/906bb4c58faa8e2c1c62e295f8054e75e910e5e8/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bcfe6157ca288efed127c5efe21ad7924e0d98cf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bcfe6157ca288efed127c5efe21ad7924e0d98cf",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bcfe6157ca288efed127c5efe21ad7924e0d98cf"
    }
  ],
  "stats": {
    "total": 8,
    "additions": 7,
    "deletions": 1
  },
  "files": [
    {
      "sha": "e1c64ab77068dad0b694cd7736a9ca08d6bbd1cb",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/906bb4c58faa8e2c1c62e295f8054e75e910e5e8/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/906bb4c58faa8e2c1c62e295f8054e75e910e5e8/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
      "patch": "@@ -1,3 +1,8 @@\n+2020-04-24  Tom Tromey  <tom@tromey.com>\n+\n+\tPR rust/25025:\n+\t* dwarf2/read.c (dwarf2_physname): Do not demangle for Rust.\n+\n 2020-04-24  Tom Tromey  <tom@tromey.com>\n \n \tPR symtab/12707:"
    },
    {
      "sha": "976261372bc536d8c17870a3f19b9d3bffc0d2ce",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/906bb4c58faa8e2c1c62e295f8054e75e910e5e8/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/906bb4c58faa8e2c1c62e295f8054e75e910e5e8/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=906bb4c58faa8e2c1c62e295f8054e75e910e5e8",
      "patch": "@@ -10318,7 +10318,8 @@ dwarf2_physname (const char *name, struct die_info *die, struct dwarf2_cu *cu)\n   if (!die_needs_namespace (die, cu))\n     return dwarf2_compute_name (name, die, cu, 1);\n \n-  mangled = dw2_linkage_name (die, cu);\n+  if (cu->language != language_rust)\n+    mangled = dw2_linkage_name (die, cu);\n \n   /* DW_AT_linkage_name is missing in some cases - depend on what GDB\n      has computed.  */"
    }
  ]
}