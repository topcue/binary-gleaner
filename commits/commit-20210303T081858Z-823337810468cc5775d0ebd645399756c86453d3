{
  "sha": "823337810468cc5775d0ebd645399756c86453d3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODIzMzM3ODEwNDY4Y2M1Nzc1ZDBlYmQ2NDUzOTk3NTZjODY0NTNkMw==",
  "commit": {
    "author": {
      "name": "Markus Metzger",
      "email": "markus.t.metzger@intel.com",
      "date": "2021-01-13T15:41:43Z"
    },
    "committer": {
      "name": "Markus Metzger",
      "email": "markus.t.metzger@intel.com",
      "date": "2021-03-03T08:18:58Z"
    },
    "message": "gdb, testsuite: enforce lazy binding for gdb.btrace/rn-dl-bind.exp\n\nIn gdb.btrace/rn-dl-bind.exp we test that we can reverse-step over\nrecorded dynamic linking.  The test covers specific behaviour to support\n_dl_runtime_resolve calling the resolved function by returning to it.\nThis would normally mess up stepping as we'd end up with backtraces that\ncontain the same functions but different frame ids.\n\nSince GDB needs to recognize a return from _dl_runtime_resolve, the test\nonly passes when debug information for _dl_runtime_resolve is available.\n\nThe test requires that symbols are bound lazily.  Otherwise, we won't\nrecord dynamic linking and the test will be fairly pointless.\n\nRecent GCC pass -z now by default to bind symbols eagerly.  Add -z lazy to\nthe test's ldflags to enforce lazy binding.",
    "tree": {
      "sha": "072afd01c4f758c4f6cf1bb40a89f0bde1d7e08b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/072afd01c4f758c4f6cf1bb40a89f0bde1d7e08b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/823337810468cc5775d0ebd645399756c86453d3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/823337810468cc5775d0ebd645399756c86453d3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/823337810468cc5775d0ebd645399756c86453d3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/823337810468cc5775d0ebd645399756c86453d3/comments",
  "author": {
    "login": "markus-metzger",
    "id": 5424725,
    "node_id": "MDQ6VXNlcjU0MjQ3MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5424725?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/markus-metzger",
    "html_url": "https://github.com/markus-metzger",
    "followers_url": "https://api.github.com/users/markus-metzger/followers",
    "following_url": "https://api.github.com/users/markus-metzger/following{/other_user}",
    "gists_url": "https://api.github.com/users/markus-metzger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/markus-metzger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/markus-metzger/subscriptions",
    "organizations_url": "https://api.github.com/users/markus-metzger/orgs",
    "repos_url": "https://api.github.com/users/markus-metzger/repos",
    "events_url": "https://api.github.com/users/markus-metzger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/markus-metzger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "markus-metzger",
    "id": 5424725,
    "node_id": "MDQ6VXNlcjU0MjQ3MjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5424725?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/markus-metzger",
    "html_url": "https://github.com/markus-metzger",
    "followers_url": "https://api.github.com/users/markus-metzger/followers",
    "following_url": "https://api.github.com/users/markus-metzger/following{/other_user}",
    "gists_url": "https://api.github.com/users/markus-metzger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/markus-metzger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/markus-metzger/subscriptions",
    "organizations_url": "https://api.github.com/users/markus-metzger/orgs",
    "repos_url": "https://api.github.com/users/markus-metzger/repos",
    "events_url": "https://api.github.com/users/markus-metzger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/markus-metzger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "32c5299909162c116728eff2580fc5c3e707af6d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/32c5299909162c116728eff2580fc5c3e707af6d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/32c5299909162c116728eff2580fc5c3e707af6d"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "e861ec1129ddae61e4d4998d3dab9a2c5f88205c",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/823337810468cc5775d0ebd645399756c86453d3/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/823337810468cc5775d0ebd645399756c86453d3/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=823337810468cc5775d0ebd645399756c86453d3",
      "patch": "@@ -1,3 +1,7 @@\n+2021-03-03  Markus Metzger  <markus.t.metzger@intel.com>\n+\n+\t* gdb.btrace/rn-dl-bind.exp: Add ldflags=-Wl,-z,lazy.\n+\n 2021-03-03  Markus Metzger  <markus.t.metzger@intel.com>\n \n \t* gdb.btrace/non-stop.exp: Adjust expected source lines."
    },
    {
      "sha": "204e88093a44171774c5f1f3ed3c98d80c49fdd4",
      "filename": "gdb/testsuite/gdb.btrace/rn-dl-bind.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/823337810468cc5775d0ebd645399756c86453d3/gdb/testsuite/gdb.btrace/rn-dl-bind.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/823337810468cc5775d0ebd645399756c86453d3/gdb/testsuite/gdb.btrace/rn-dl-bind.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.btrace/rn-dl-bind.exp?ref=823337810468cc5775d0ebd645399756c86453d3",
      "patch": "@@ -27,7 +27,8 @@ if { [skip_btrace_tests] } {\n }\n \n standard_testfile\n-if [prepare_for_testing \"failed to prepare\" $testfile $srcfile {c++ debug}] {\n+if [prepare_for_testing \"failed to prepare\" $testfile $srcfile \\\n+\t{c++ debug ldflags=-Wl,-z,lazy}] {\n     return -1\n }\n "
    }
  ]
}