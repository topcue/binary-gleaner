{
  "sha": "f5f20315116c43110c058ec9d787e20f901309f2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjVmMjAzMTUxMTZjNDMxMTBjMDU4ZWM5ZDc4N2UyMGY5MDEzMDlmMg==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2019-03-04T13:11:08Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2019-03-04T13:11:08Z"
    },
    "message": "Stop objcopy from attempting to copy thin archives.\n\n\tPR 24281\n\t* objcopy.c (copy_archive): Do not copy thin  archives.",
    "tree": {
      "sha": "ce5d79e6cfe93a08f394f5ee617e315445144afc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ce5d79e6cfe93a08f394f5ee617e315445144afc"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f5f20315116c43110c058ec9d787e20f901309f2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f5f20315116c43110c058ec9d787e20f901309f2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f5f20315116c43110c058ec9d787e20f901309f2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f5f20315116c43110c058ec9d787e20f901309f2/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "67490c6bad8c8d3fcbcbd5a3012ab5d189fd3981",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/67490c6bad8c8d3fcbcbd5a3012ab5d189fd3981",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/67490c6bad8c8d3fcbcbd5a3012ab5d189fd3981"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 26,
    "deletions": 0
  },
  "files": [
    {
      "sha": "aa33e52ae066e13b060477e80bf6542fc5f81ed6",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5f20315116c43110c058ec9d787e20f901309f2/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5f20315116c43110c058ec9d787e20f901309f2/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=f5f20315116c43110c058ec9d787e20f901309f2",
      "patch": "@@ -1,3 +1,8 @@\n+2019-03-04  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 24281\n+\t* objcopy.c (copy_archive): Do not copy thin  archives.\n+\n 2019-02-27  Matthew Malcomson  <matthew.malcomson@arm.com>\n \n \t* testsuite/lib/binutils-common.exp: Allow multiple \"as\" lines."
    },
    {
      "sha": "330b93c1ad3f87a0f5777ac88dc4af1398959bbe",
      "filename": "binutils/objcopy.c",
      "status": "modified",
      "additions": 21,
      "deletions": 0,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f5f20315116c43110c058ec9d787e20f901309f2/binutils/objcopy.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f5f20315116c43110c058ec9d787e20f901309f2/binutils/objcopy.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/objcopy.c?ref=f5f20315116c43110c058ec9d787e20f901309f2",
      "patch": "@@ -3276,6 +3276,27 @@ copy_archive (bfd *ibfd, bfd *obfd, const char *output_target,\n   char *dir;\n   const char *filename;\n \n+  /* PR 24281: It is not clear what should happen when copying a thin archive.\n+     One part is straight forward - if the output archive is in a different\n+     directory from the input archive then any relative paths in the library\n+     should be adjusted to the new location.  But if any transformation\n+     options are active (eg strip, rename, add, etc) then the implication is\n+     that these should be applied to the files pointed to by the archive.\n+     But since objcopy is not destructive, this means that new files must be\n+     created, and there is no guidance for the names of the new files.  (Plus\n+     this conflicts with one of the goals of thin libraries - only taking up\n+     a  minimal amount of space in the file system).\n+\n+     So for now we fail if an attempt is made to copy such libraries.  */\n+  if (ibfd->is_thin_archive)\n+    {\n+      status = 1;\n+      bfd_set_error (bfd_error_invalid_operation);\n+      bfd_nonfatal_message (NULL, ibfd, NULL,\n+\t\t\t    _(\"sorry: copying thin archives is not currently supported\"));\n+      return;\n+    }\n+\n   /* Make a temp directory to hold the contents.  */\n   dir = make_tempdir (bfd_get_filename (obfd));\n   if (dir == NULL)"
    }
  ]
}