{
  "sha": "596179f77c803d3fc5586465f4ece6503055d035",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTk2MTc5Zjc3YzgwM2QzZmM1NTg2NDY1ZjRlY2U2NTAzMDU1ZDAzNQ==",
  "commit": {
    "author": {
      "name": "Sergio Durigan Junior",
      "email": "sergiodj@redhat.com",
      "date": "2019-04-24T18:53:59Z"
    },
    "committer": {
      "name": "Sergio Durigan Junior",
      "email": "sergiodj@redhat.com",
      "date": "2019-04-24T18:58:27Z"
    },
    "message": "Use \"pulongest\" on aarch64-tdep.c:aarch64_gdbarch_init\n\nWhile trying to build GDB on i686, I found the following error:\n\n In file included from ../../gdb/common/common-defs.h:105,\n                  from ../../gdb/defs.h:28,\n                  from ../../gdb/aarch64-tdep.c:21:\n ../../gdb/aarch64-tdep.c: In function 'gdbarch* aarch64_gdbarch_init(gdbarch_info, gdbarch_list*)':\n ../../gdb/aarch64-tdep.c:3176:43: error: format '%ld' expects argument of type 'long int', but argument 4 has type 'uint64_t' {aka 'long long unsigned int'} [-Werror=format=]\n  3176 |     internal_error (__FILE__, __LINE__, _(\"VQ out of bounds: %ld (max %d)\"),\n       |                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n ../../gdb/common/gdb_locale.h:28:29: note: in definition of macro '_'\n    28 | # define _(String) gettext (String)\n       |                             ^~~~~~\n ../../gdb/aarch64-tdep.c:3176:64: note: format string is defined here\n  3176 |     internal_error (__FILE__, __LINE__, _(\"VQ out of bounds: %ld (max %d)\"),\n       |                                                              ~~^\n       |                                                                |\n       |                                                                long int\n       |                                                              %lld\n\nThis happens because aarch64-tdep.c:aarch64_gdbarch_init prints a\n\"uint64_t\" variable using \"%ld\".  This patch fixes the build by using\n\"pulongest\" instead.  As explained in a similar fix (commit\n495143533ad95369811391c6e3c6dadd69d7dd67), this should be safe because\nif aarch64-tdep.c is included in the build, then ULONGEST must be a\n64-bit type.\n\ngdb/ChangeLog:\n2019-04-24  Sergio Durigan Junior  <sergiodj@redhat.com>\n\n\t* aarch64-tdep.c (aarch64_gdbarch_init): Use \"pulongest\" to print\n\t\"vq\".",
    "tree": {
      "sha": "fdfcfa7d2b519ba6a39ddb38527b7d79de523cfe",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fdfcfa7d2b519ba6a39ddb38527b7d79de523cfe"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/596179f77c803d3fc5586465f4ece6503055d035",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/596179f77c803d3fc5586465f4ece6503055d035",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/596179f77c803d3fc5586465f4ece6503055d035",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/596179f77c803d3fc5586465f4ece6503055d035/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "a59240a41ac34d91e4ef5dd8b484763639388364",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a59240a41ac34d91e4ef5dd8b484763639388364",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a59240a41ac34d91e4ef5dd8b484763639388364"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 7,
    "deletions": 2
  },
  "files": [
    {
      "sha": "21358ff31184a7562df66967ac5c5e1aa0e731a9",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/596179f77c803d3fc5586465f4ece6503055d035/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/596179f77c803d3fc5586465f4ece6503055d035/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=596179f77c803d3fc5586465f4ece6503055d035",
      "patch": "@@ -1,3 +1,8 @@\n+2019-04-24  Sergio Durigan Junior  <sergiodj@redhat.com>\n+\n+\t* aarch64-tdep.c (aarch64_gdbarch_init): Use \"pulongest\" to print\n+\t\"vq\".\n+\n 2019-04-24  Tom Tromey  <tromey@adacore.com>\n \n \t* amd64-tdep.c (amd64_has_unaligned_fields): Ignore bitfields."
    },
    {
      "sha": "f8b4fa4c9743eda7a19e0e6b7dfb0090deb15e7a",
      "filename": "gdb/aarch64-tdep.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/596179f77c803d3fc5586465f4ece6503055d035/gdb/aarch64-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/596179f77c803d3fc5586465f4ece6503055d035/gdb/aarch64-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/aarch64-tdep.c?ref=596179f77c803d3fc5586465f4ece6503055d035",
      "patch": "@@ -3173,8 +3173,8 @@ aarch64_gdbarch_init (struct gdbarch_info info, struct gdbarch_list *arches)\n     vq = aarch64_get_tdesc_vq (info.target_desc);\n \n   if (vq > AARCH64_MAX_SVE_VQ)\n-    internal_error (__FILE__, __LINE__, _(\"VQ out of bounds: %ld (max %d)\"),\n-\t\t    vq, AARCH64_MAX_SVE_VQ);\n+    internal_error (__FILE__, __LINE__, _(\"VQ out of bounds: %s (max %d)\"),\n+\t\t    pulongest (vq), AARCH64_MAX_SVE_VQ);\n \n   /* If there is already a candidate, use it.  */\n   for (gdbarch_list *best_arch = gdbarch_list_lookup_by_info (arches, &info);"
    }
  ]
}