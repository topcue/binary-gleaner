{
  "sha": "9923f347c4e4b9ed710de3404444cf46b04135a0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OTkyM2YzNDdjNGU0YjllZDcxMGRlMzQwNDQ0NGNmNDZiMDQxMzVhMA==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-09-01T14:13:24Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-09-20T19:49:10Z"
    },
    "message": "Change members of tui_locator_window to std::string\n\nThis changes two members of tui_locator_window to have type\nstd::string.  This removes a static limit.\n\ngdb/ChangeLog\n2019-09-20  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-stack.h (MAX_LOCATOR_ELEMENT_LEN): Remove define.\n\t(struct tui_locator_window) <full_name, proc_name>: Now\n\tstd::string.\n\t* tui/tui-stack.c (tui_locator_window::make_status_line)\n\t(tui_locator_window::set_locator_fullname)\n\t(tui_locator_window::set_locator_info): Update.\n\t* tui/tui-source.c (tui_source_window::set_contents)\n\t(tui_source_window::showing_source_p): Update.",
    "tree": {
      "sha": "de2f72d590b7b6636aca60b859a6166b61efbb5d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/de2f72d590b7b6636aca60b859a6166b61efbb5d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/9923f347c4e4b9ed710de3404444cf46b04135a0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9923f347c4e4b9ed710de3404444cf46b04135a0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/9923f347c4e4b9ed710de3404444cf46b04135a0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9923f347c4e4b9ed710de3404444cf46b04135a0/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b76251abaf279603367ae730b9194fb20861fdb9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b76251abaf279603367ae730b9194fb20861fdb9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b76251abaf279603367ae730b9194fb20861fdb9"
    }
  ],
  "stats": {
    "total": 43,
    "additions": 22,
    "deletions": 21
  },
  "files": [
    {
      "sha": "8d586e72f0fc5ff651b4fe47f0e70da012ea6c47",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=9923f347c4e4b9ed710de3404444cf46b04135a0",
      "patch": "@@ -1,3 +1,14 @@\n+2019-09-20  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-stack.h (MAX_LOCATOR_ELEMENT_LEN): Remove define.\n+\t(struct tui_locator_window) <full_name, proc_name>: Now\n+\tstd::string.\n+\t* tui/tui-stack.c (tui_locator_window::make_status_line)\n+\t(tui_locator_window::set_locator_fullname)\n+\t(tui_locator_window::set_locator_info): Update.\n+\t* tui/tui-source.c (tui_source_window::set_contents)\n+\t(tui_source_window::showing_source_p): Update.\n+\n 2019-09-20  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-stack.c (tui_locator_window::set_locator_fullname):"
    },
    {
      "sha": "e6cc0dbc1a3dcf6ec08a0e5b4d7c10d9d31f8f4f",
      "filename": "gdb/tui/tui-source.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-source.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-source.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-source.c?ref=9923f347c4e4b9ed710de3404444cf46b04135a0",
      "patch": "@@ -179,7 +179,7 @@ tui_source_window::set_contents (struct gdbarch *arch,\n \t      element->line_or_addr.loa = LOA_LINE;\n \t      element->line_or_addr.u.line_no = cur_line_no;\n \t      element->is_exec_point\n-\t\t= (filename_cmp (locator->full_name,\n+\t\t= (filename_cmp (locator->full_name.c_str (),\n \t\t\t\t symtab_to_fullname (s)) == 0\n \t\t   && cur_line_no == locator->line_no);\n \n@@ -213,7 +213,7 @@ bool\n tui_source_window::showing_source_p (const char *fullname) const\n {\n   return (!content.empty ()\n-\t  && (filename_cmp (tui_locator_win_info_ptr ()->full_name,\n+\t  && (filename_cmp (tui_locator_win_info_ptr ()->full_name.c_str (),\n \t\t\t    fullname) == 0));\n }\n "
    },
    {
      "sha": "d66e3589e4276fe36dd3d5c6c55d80ac66dbba8d",
      "filename": "gdb/tui/tui-stack.c",
      "status": "modified",
      "additions": 7,
      "deletions": 11,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-stack.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-stack.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-stack.c?ref=9923f347c4e4b9ed710de3404444cf46b04135a0",
      "patch": "@@ -166,12 +166,12 @@ tui_locator_window::make_status_line () const\n   /* Procedure/class name.  */\n   if (proc_width > 0)\n     {\n-      if (strlen (proc_name) > proc_width)\n+      if (proc_name.size () > proc_width)\n         string.printf (\"%s%*.*s* \", PROC_PREFIX,\n-\t\t       1 - proc_width, proc_width - 1, proc_name);\n+\t\t       1 - proc_width, proc_width - 1, proc_name.c_str ());\n       else\n         string.printf (\"%s%*.*s \", PROC_PREFIX,\n-\t\t       -proc_width, proc_width, proc_name);\n+\t\t       -proc_width, proc_width, proc_name.c_str ());\n     }\n \n   if (line_width > 0)\n@@ -250,8 +250,7 @@ tui_locator_window::rerender ()\n void\n tui_locator_window::set_locator_fullname (const char *fullname)\n {\n-  full_name[0] = 0;\n-  strcat_to_buf (full_name, MAX_LOCATOR_ELEMENT_LEN, fullname);\n+  full_name = fullname;\n   rerender ();\n }\n \n@@ -272,16 +271,13 @@ tui_locator_window::set_locator_info (struct gdbarch *gdbarch_in,\n   if (fullname == NULL)\n     fullname = \"\";\n \n-  locator_changed_p |= strncmp (proc_name, procname,\n-\t\t\t\tMAX_LOCATOR_ELEMENT_LEN) != 0;\n+  locator_changed_p |= proc_name != procname;\n   locator_changed_p |= lineno != line_no;\n   locator_changed_p |= addr_in != addr;\n   locator_changed_p |= gdbarch_in != gdbarch;\n-  locator_changed_p |= strncmp (full_name, fullname,\n-\t\t\t\tMAX_LOCATOR_ELEMENT_LEN) != 0;\n+  locator_changed_p |= full_name != fullname;\n \n-  proc_name[0] = (char) 0;\n-  strcat_to_buf (proc_name, MAX_LOCATOR_ELEMENT_LEN, procname);\n+  proc_name = procname;\n   line_no = lineno;\n   addr = addr_in;\n   gdbarch = gdbarch_in;"
    },
    {
      "sha": "93a79fbd799c72d0a6986ab8dc9369e2d3c64fec",
      "filename": "gdb/tui/tui-stack.h",
      "status": "modified",
      "additions": 2,
      "deletions": 8,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-stack.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/9923f347c4e4b9ed710de3404444cf46b04135a0/gdb/tui/tui-stack.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-stack.h?ref=9923f347c4e4b9ed710de3404444cf46b04135a0",
      "patch": "@@ -26,12 +26,6 @@\n \n struct frame_info;\n \n-#ifdef PATH_MAX\n-# define MAX_LOCATOR_ELEMENT_LEN        PATH_MAX\n-#else\n-# define MAX_LOCATOR_ELEMENT_LEN        1024\n-#endif\n-\n /* Locator window class.  */\n \n struct tui_locator_window : public tui_gen_win_info\n@@ -57,8 +51,8 @@ struct tui_locator_window : public tui_gen_win_info\n   /* Set the full_name portion of the locator.  */\n   void set_locator_fullname (const char *fullname);\n \n-  char full_name[MAX_LOCATOR_ELEMENT_LEN];\n-  char proc_name[MAX_LOCATOR_ELEMENT_LEN];\n+  std::string full_name;\n+  std::string proc_name;\n   int line_no = 0;\n   CORE_ADDR addr = 0;\n   /* Architecture associated with code at this location.  */"
    }
  ]
}