{
  "sha": "271bea6acd3759db96b33a30f110ee5e1f8146fc",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjcxYmVhNmFjZDM3NTlkYjk2YjMzYTMwZjExMGVlNWUxZjgxNDZmYw==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2010-12-09T17:06:34Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-14T06:09:48Z"
    },
    "message": "ld: tests: add -msim when testing bfin targets\n\nThe Blackfin ELF compiler requires the user to explicitly select a CPU\ntarget else it will fail:\nbfin-elf-gcc: error: no processor type specified for linking\n\nSelect the sim target for these tests since we should (hopefully) have\naccess to the simulator.  At least, it's more likely than having access\nto a real development board.\n\nThis makes the pass/fail numbers increase by a lot:\n-# of expected passes        398\n-# of unexpected failures    6\n+# of expected passes        587\n+# of unexpected failures    109\n\nIt looks like the vast majority of new failures are due to our omission\nof COPY relocations:\n  /* Bfin does not currently have a COPY reloc.  */\n  if ((h->root.u.def.section->flags & SEC_ALLOC) != 0)\n    {\n      _bfd_error_handler (_(\"the bfin target does not currently support the generation of copy relocations\"));\n      return FALSE;\n    }\n\nThere doesn't seem to be a way to easily disable tests that cause copy\nrelocations though, lets just take the hit for now.\n\n\t* testsuite/config/default.exp [bfin*-elf*] (gcc_B_opt): Append -msim.",
    "tree": {
      "sha": "246596bfc0aba4aa1d4516a5cedb74079b18671e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/246596bfc0aba4aa1d4516a5cedb74079b18671e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/271bea6acd3759db96b33a30f110ee5e1f8146fc",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/271bea6acd3759db96b33a30f110ee5e1f8146fc",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/271bea6acd3759db96b33a30f110ee5e1f8146fc",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/271bea6acd3759db96b33a30f110ee5e1f8146fc/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "abad28152eb82fb4dc84ed3f0bc35e685d7772d7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/abad28152eb82fb4dc84ed3f0bc35e685d7772d7",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/abad28152eb82fb4dc84ed3f0bc35e685d7772d7"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 9,
    "deletions": 0
  },
  "files": [
    {
      "sha": "cbcda0a4112b44e04ab6178a36b66c1766a49fb2",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/271bea6acd3759db96b33a30f110ee5e1f8146fc/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/271bea6acd3759db96b33a30f110ee5e1f8146fc/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=271bea6acd3759db96b33a30f110ee5e1f8146fc",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-14  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* testsuite/config/default.exp [bfin*-elf*] (gcc_B_opt): Add -msim.\n+\n 2021-01-14  Alan Modra  <amodra@gmail.com>\n \n \tPR 27160"
    },
    {
      "sha": "4090f1287c468b2f105e5cd374c4cc5f8c5b0d3b",
      "filename": "ld/testsuite/config/default.exp",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/271bea6acd3759db96b33a30f110ee5e1f8146fc/ld/testsuite/config/default.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/271bea6acd3759db96b33a30f110ee5e1f8146fc/ld/testsuite/config/default.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/config/default.exp?ref=271bea6acd3759db96b33a30f110ee5e1f8146fc",
      "patch": "@@ -157,6 +157,11 @@ if { [istarget rx-*-*] } {\n     set ASFLAGS \"-muse-conventional-section-names\"\n }\n \n+# Blackfin ELF targets require selection of an explicit CPU.  Use the sim.\n+if {[istarget bfin*-elf*]} {\n+    append gcc_B_opt \" -msim\"\n+}\n+\n # load the utility procedures\n load_lib ld-lib.exp\n "
    }
  ]
}