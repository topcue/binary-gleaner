{
  "sha": "1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MWVlN2I4MTJlNzc4ZTRmZGRjZmFhNWYwYmUwMjNkZmRmYjVhNGQ2ZQ==",
  "commit": {
    "author": {
      "name": "Bernd Edlinger",
      "email": "bernd.edlinger@hotmail.de",
      "date": "2019-12-13T16:21:21Z"
    },
    "committer": {
      "name": "Bernd Edlinger",
      "email": "bernd.edlinger@hotmail.de",
      "date": "2019-12-19T19:18:32Z"
    },
    "message": "Fix build with GNU Make 3.81\n\nGNU Make 3.81 is apparently confused when the same\nsource file is processed by a pattern rule and an\nexplicit rule at the same time with different output file.\nThe pattern %.o: ../%.c and alloc-ipa.o: ../alloc.c\nboth have the source ../alloc.c but two independent\nobject files alloc.o and alloc-ipa.o, so\nwhile building gdbserver I see the following message:\n\nmake[4]: Circular alloc-ipa.o <- ../alloc.c dependency dropped.\n  CXX    alloc-ipa.o\ng++: warning: '-x c++' after last input file has no effect\ng++: fatal error: no input files\ncompilation terminated.\n\nIn the make debug output I see the pattern is first correct:\n\nalloc-ipa.o: ../alloc.c | config.h build-gnulib-gdbserver/import/string.h\n        $(IPAGENT_COMPILE) $(WARN_CFLAGS_NO_FORMAT) $<\n        $(POSTCOMPILE)\n\nBut after the \"Circular\" dependency is dropped, the pattern\nis changed to:\n\nalloc-ipa.o: | config.h build-gnulib-gdbserver/import/string.h\n        $(IPAGENT_COMPILE) $(WARN_CFLAGS_NO_FORMAT) $<\n        $(POSTCOMPILE)\n\nSo indeed now $< is empty, and the build step fails.\n\nThis happens only when alloc.o needs to be built, when alloc.o\nwas already built, the build succeeds, but it takes often\nseveral attempts until the build succeeds.\nBy rewriting the alloc-ipa.c: ../alloc.c rule into a pattern\nrule, the problem goes away.\n\nWhile already at it, this patch removes also the\n$(WARN_CFLAGS_NO_FORMAT) from the build rule, which is just a\ncopy/paste thing that is not necessary for alloc.c at all.",
    "tree": {
      "sha": "fb53d8e746f0f9b7177c7ab4e9e34f6510d7bdc9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/fb53d8e746f0f9b7177c7ab4e9e34f6510d7bdc9"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e/comments",
  "author": {
    "login": "bernd-edlinger",
    "id": 17638929,
    "node_id": "MDQ6VXNlcjE3NjM4OTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernd-edlinger",
    "html_url": "https://github.com/bernd-edlinger",
    "followers_url": "https://api.github.com/users/bernd-edlinger/followers",
    "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions",
    "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs",
    "repos_url": "https://api.github.com/users/bernd-edlinger/repos",
    "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "bernd-edlinger",
    "id": 17638929,
    "node_id": "MDQ6VXNlcjE3NjM4OTI5",
    "avatar_url": "https://avatars.githubusercontent.com/u/17638929?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bernd-edlinger",
    "html_url": "https://github.com/bernd-edlinger",
    "followers_url": "https://api.github.com/users/bernd-edlinger/followers",
    "following_url": "https://api.github.com/users/bernd-edlinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/bernd-edlinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bernd-edlinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bernd-edlinger/subscriptions",
    "organizations_url": "https://api.github.com/users/bernd-edlinger/orgs",
    "repos_url": "https://api.github.com/users/bernd-edlinger/repos",
    "events_url": "https://api.github.com/users/bernd-edlinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bernd-edlinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d411762c45d66b64c5cbfc8a9f004b1f2e1fba4b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d411762c45d66b64c5cbfc8a9f004b1f2e1fba4b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d411762c45d66b64c5cbfc8a9f004b1f2e1fba4b"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 8,
    "deletions": 4
  },
  "files": [
    {
      "sha": "8ab1f07b870d2925ff9babdff5c899c91b06e202",
      "filename": "gdb/gdbserver/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e/gdb/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e/gdb/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/ChangeLog?ref=1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
      "patch": "@@ -1,3 +1,7 @@\n+2019-12-16  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n+\n+\t* Makefile.in: Fix build with GNU Make 3.81\n+\n 2019-12-16  Tom Tromey  <tromey@adacore.com>\n \n \t* server.c (get_exec_file): Constify result."
    },
    {
      "sha": "9e8c21347263155e889c87df926b3d92d81a5c44",
      "filename": "gdb/gdbserver/Makefile.in",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e/gdb/gdbserver/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e/gdb/gdbserver/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/Makefile.in?ref=1ee7b812e778e4fddcfaa5f0be023dfdfb5a4d6e",
      "patch": "@@ -580,10 +580,6 @@ ax.o: ax.c\n \t$(COMPILE) $(WARN_CFLAGS_NO_FORMAT) $<\n \t$(POSTCOMPILE)\n \n-alloc-ipa.o: ../alloc.c\n-\t$(IPAGENT_COMPILE) $(WARN_CFLAGS_NO_FORMAT) $<\n-\t$(POSTCOMPILE)\n-\n # Rules for objects that go in the in-process agent.\n \n arch/%-ipa.o: ../arch/%.c\n@@ -602,6 +598,10 @@ gdbsupport/%-ipa.o: ../gdbsupport/%.c\n \t$(IPAGENT_COMPILE) $<\n \t$(POSTCOMPILE)\n \n+%-ipa.o: ../%.c\n+\t$(IPAGENT_COMPILE) $<\n+\t$(POSTCOMPILE)\n+\n # Note: Between two matching pattern rules, GNU Make 3.81 chooses the first one.\n # Therefore, this one needs to be before \"%.o: %.c\" for it to be considered for\n # files such as linux-amd64-ipa.o generated from linux-amd64-ipa.c."
    }
  ]
}