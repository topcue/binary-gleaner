{
  "sha": "05ea2a051030a452bb1f4710dafeb1054cf38c17",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MDVlYTJhMDUxMDMwYTQ1MmJiMWY0NzEwZGFmZWIxMDU0Y2YzOGMxNw==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-12-19T23:40:15Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-01-14T23:25:03Z"
    },
    "message": "Move many configure checks to common.m4\n\nThis moves many needed configure checks from gdb and gdbserver into\ncommon.m4.  This helps gdbsupport, nat, and target be self-contained.\n\nThe result is a bit spaghetti-ish, because gdbsupport uses another m4\nfile from gdb/.  The resulting code is somewhat non-obvious.  However,\nthese problems already exist, so it's not really that much worse than\nwhat is already done.\n\ngdb/ChangeLog\n2020-01-14  Tom Tromey  <tom@tromey.com>\n\n\t* configure: Rebuild.\n\t* configure.ac: Move many checks to ../gdbsupport/common.m4.\n\ngdb/gdbserver/ChangeLog\n2020-01-14  Tom Tromey  <tom@tromey.com>\n\n\t* configure: Rebuild.\n\t* configure.ac: Remove any checks that were added to common.m4.\n\t* acinclude.m4: Include lib-ld.m4, lib-prefix.m4, and\n\tlib-link.m4.\n\ngdbsupport/ChangeLog\n2020-01-14  Tom Tromey  <tom@tromey.com>\n\n\t* configure, Makefile.in, aclocal.m4, common.m4, config.in:\n\tRebuild.\n\t* common.m4 (GDB_AC_COMMON): Move many checks from\n\tgdb/configure.ac.\n\t* acinclude.m4: Include bfd.m4, ptrace.m4.\n\nChange-Id: I931eaa94065df268b30a2f1354390710df89c7f8",
    "tree": {
      "sha": "9d7ecb70ce4edf11c66c3a329344c4aed4fd48e6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9d7ecb70ce4edf11c66c3a329344c4aed4fd48e6"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/05ea2a051030a452bb1f4710dafeb1054cf38c17",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/05ea2a051030a452bb1f4710dafeb1054cf38c17",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/05ea2a051030a452bb1f4710dafeb1054cf38c17",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/05ea2a051030a452bb1f4710dafeb1054cf38c17/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "01027315f54048dbaf03ac37455c2528c72a6d9b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/01027315f54048dbaf03ac37455c2528c72a6d9b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/01027315f54048dbaf03ac37455c2528c72a6d9b"
    }
  ],
  "stats": {
    "total": 12002,
    "additions": 7691,
    "deletions": 4311
  },
  "files": [
    {
      "sha": "318ca51c5236861e1123bbb2077bce7a6583362b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -1,3 +1,8 @@\n+2020-01-14  Tom Tromey  <tom@tromey.com>\n+\n+\t* configure: Rebuild.\n+\t* configure.ac: Move many checks to ../gdbsupport/common.m4.\n+\n 2020-01-14  Tom Tromey  <tom@tromey.com>\n \n \t* nat/x86-linux-dregs.c: Include configh.h."
    },
    {
      "sha": "72ffad8d37bc41be8f122c47e2349cc258dc4e65",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 2756,
      "deletions": 2756,
      "changes": 5512,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17"
    },
    {
      "sha": "0ca169101b3f0ad34b044c6b147c3557d1616fd0",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 6,
      "deletions": 94,
      "changes": 100,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -480,11 +480,6 @@ AC_SEARCH_LIBS(kinfo_getvmmap, util util-freebsd,\n   [AC_DEFINE(HAVE_KINFO_GETVMMAP, 1,\n             [Define to 1 if your system has the kinfo_getvmmap function. ])])\n \n-# fbsd-nat.c can also use kinfo_getfile.\n-AC_SEARCH_LIBS(kinfo_getfile, util util-freebsd,\n-  [AC_DEFINE(HAVE_KINFO_GETFILE, 1,\n-            [Define to 1 if your system has the kinfo_getfile function. ])])\n-\n AM_ICONV\n \n # GDB may fork/exec the iconv program to get the list of supported character\n@@ -1204,57 +1199,16 @@ fi\n AC_SUBST(SRCHIGH_LIBS)\n AC_SUBST(SRCHIGH_CFLAGS)\n \n-AC_ARG_WITH(intel_pt,\n-  AS_HELP_STRING([--with-intel-pt], [include Intel Processor Trace support (auto/yes/no)]),\n-  [], [with_intel_pt=auto])\n-AC_MSG_CHECKING([whether to use intel pt])\n-AC_MSG_RESULT([$with_intel_pt])\n-\n-if test \"${with_intel_pt}\" = no; then\n-  AC_MSG_WARN([Intel Processor Trace support disabled; some features may be unavailable.])\n-  HAVE_LIBIPT=no\n-else\n-  AC_PREPROC_IFELSE([AC_LANG_SOURCE([[\n-#include <linux/perf_event.h>\n-#ifndef PERF_ATTR_SIZE_VER5\n-# error\n-#endif\n-  ]])], [perf_event=yes], [perf_event=no])\n-  if test \"$perf_event\" != yes; then\n-    if test \"$with_intel_pt\" = yes; then\n-      AC_MSG_ERROR([linux/perf_event.h missing or too old])\n-    else\n-      AC_MSG_WARN([linux/perf_event.h missing or too old; some features may be unavailable.])\n-    fi\n-  fi\n-\n-  AC_LIB_HAVE_LINKFLAGS([ipt], [], [#include \"intel-pt.h\"], [pt_insn_alloc_decoder (0);])\n-  if test \"$HAVE_LIBIPT\" != yes; then\n-    if test \"$with_intel_pt\" = yes; then\n-      AC_MSG_ERROR([libipt is missing or unusable])\n-    else\n-      AC_MSG_WARN([libipt is missing or unusable; some features may be unavailable.])\n-    fi\n-  else\n-    save_LIBS=$LIBS\n-    LIBS=\"$LIBS $LIBIPT\"\n-    AC_CHECK_FUNCS(pt_insn_event)\n-    AC_CHECK_MEMBERS([struct pt_insn.enabled, struct pt_insn.resynced], [], [],\n-                     [#include <intel-pt.h>])\n-    LIBS=$save_LIBS\n-  fi\n-fi\n-\n # ------------------------- #\n # Checks for header files.  #\n # ------------------------- #\n \n AC_HEADER_STDC\n # elf_hp.h is for HP/UX 64-bit shared library support.\n-AC_CHECK_HEADERS([nlist.h machine/reg.h poll.h sys/poll.h proc_service.h \\\n-                  thread_db.h linux/elf.h \\\n+AC_CHECK_HEADERS([nlist.h machine/reg.h poll.h sys/poll.h \\\n+                  thread_db.h \\\n \t\t  sys/file.h sys/filio.h sys/ioctl.h sys/param.h \\\n-\t\t  sys/resource.h sys/procfs.h sys/ptrace.h ptrace.h \\\n+\t\t  sys/resource.h sys/ptrace.h ptrace.h \\\n \t\t  sys/reg.h sys/debugreg.h sys/select.h \\\n \t\t  termios.h elf_hp.h])\n AC_CHECK_HEADERS(sys/user.h, [], [],\n@@ -1279,12 +1233,6 @@ libiberty_INIT\n AC_CHECK_DECLS([snprintf])\n AM_LC_MESSAGES\n \n-# ----------------------- #\n-# Checks for structures.  #\n-# ----------------------- #\n-\n-AC_CHECK_MEMBERS([struct stat.st_blocks, struct stat.st_blksize])\n-\n # ------------------ #\n # Checks for types.  #\n # ------------------ #\n@@ -1306,15 +1254,13 @@ AC_C_BIGENDIAN\n # Checks for library functions.  #\n # ------------------------------ #\n \n-AC_FUNC_MMAP\n-AC_FUNC_VFORK\n-AC_CHECK_FUNCS([getauxval getrusage getuid getgid \\\n+AC_CHECK_FUNCS([getuid getgid \\\n \t\tpipe poll pread pread64 pwrite resize_term \\\n-\t\tsbrk getpgid setpgid setpgrp setsid \\\n+\t\tgetpgid setsid \\\n \t\tsigaction sigsetmask socketpair \\\n \t\tttrace wborder wresize setlocale iconvlist libiconvlist btowc \\\n \t\tsetrlimit getrlimit posix_madvise waitpid \\\n-\t\tptrace64 sigaltstack setns use_default_colors])\n+\t\tuse_default_colors])\n AM_LANGINFO_CODESET\n GDB_AC_COMMON\n \n@@ -1475,17 +1421,6 @@ AC_CHECK_MEMBERS([struct ptrace_lwpinfo.pl_tdname], [], [],\n AC_CHECK_MEMBERS([struct ptrace_lwpinfo.pl_syscall_code], [], [],\n                  [#include <sys/ptrace.h>])\n \n-if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-  BFD_HAVE_SYS_PROCFS_TYPE(gregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(fpregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(prgregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(prfpregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(prgregset32_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(lwpid_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(psaddr_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(elf_fpregset_t)\n-fi\n-\n # Check if the compiler supports the `long long' type.\n \n AC_CACHE_CHECK([for long long support in compiler], gdb_cv_c_long_long,\n@@ -1737,29 +1672,6 @@ if test \"x$gdb_cv_thread_db_h_has_td_notls\" = \"xyes\"; then\n             [Define if <thread_db.h> has the TD_NOTLS error code.])\n fi\n \n-dnl Check if we can disable the virtual address space randomization.\n-dnl The functionality of setarch -R.\n-AC_CHECK_DECLS([ADDR_NO_RANDOMIZE],,, [#include <sys/personality.h>])\n-define([PERSONALITY_TEST], [AC_LANG_PROGRAM([#include <sys/personality.h>], [\n-#      if !HAVE_DECL_ADDR_NO_RANDOMIZE\n-#       define ADDR_NO_RANDOMIZE 0x0040000\n-#      endif\n-       /* Test the flag could be set and stays set.  */\n-       personality (personality (0xffffffff) | ADDR_NO_RANDOMIZE);\n-       if (!(personality (personality (0xffffffff)) & ADDR_NO_RANDOMIZE))\n-\t   return 1])])\n-AC_RUN_IFELSE([PERSONALITY_TEST],\n-\t      [have_personality=true],\n-\t      [have_personality=false],\n-\t      [AC_LINK_IFELSE([PERSONALITY_TEST],\n-\t\t\t      [have_personality=true],\n-\t\t\t      [have_personality=false])])\n-if $have_personality\n-then\n-    AC_DEFINE([HAVE_PERSONALITY], 1,\n-\t      [Define if you support the personality syscall.])\n-fi\n-\n dnl Set the host's .gdbinit filename.\n case $host_os in\n   go32* | *djgpp*)"
    },
    {
      "sha": "e5c05fa4ee31d9aacdbc2480d314e2f98a36c76d",
      "filename": "gdb/gdbserver/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/ChangeLog?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -1,3 +1,10 @@\n+2020-01-14  Tom Tromey  <tom@tromey.com>\n+\n+\t* configure: Rebuild.\n+\t* configure.ac: Remove any checks that were added to common.m4.\n+\t* acinclude.m4: Include lib-ld.m4, lib-prefix.m4, and\n+\tlib-link.m4.\n+\n 2020-01-14  Tom Tromey  <tom@tromey.com>\n \n \t* server.h: Include config.h."
    },
    {
      "sha": "eba3a131315f39ed14a88d811ee54f0b22b0c1ed",
      "filename": "gdb/gdbserver/acinclude.m4",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/acinclude.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/acinclude.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/acinclude.m4?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -15,6 +15,11 @@ m4_include(../../config/acx.m4)\n m4_include(../../config/depstand.m4)\n m4_include(../../config/lead-dot.m4)\n \n+dnl Needed for common.m4\n+dnl For AC_LIB_HAVE_LINKFLAGS.\n+m4_include(../../config/lib-ld.m4)\n+m4_include(../../config/lib-prefix.m4)\n+m4_include(../../config/lib-link.m4)\n dnl codeset.m4 is needed for common.m4, but not for\n dnl anything else in gdbserver.\n m4_include(../../config/codeset.m4)"
    },
    {
      "sha": "da8c313c360171264fee94124c3f757d27987995",
      "filename": "gdb/gdbserver/config.in",
      "status": "modified",
      "additions": 51,
      "deletions": 0,
      "changes": 51,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/config.in?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -110,21 +110,39 @@\n /* Define to 1 if you have the `fork' function. */\n #undef HAVE_FORK\n \n+/* Define if <sys/procfs.h> has fpregset_t. */\n+#undef HAVE_FPREGSET_T\n+\n /* Define to 1 if you have the `getauxval' function. */\n #undef HAVE_GETAUXVAL\n \n+/* Define to 1 if you have the `getpagesize' function. */\n+#undef HAVE_GETPAGESIZE\n+\n /* Define to 1 if you have the `getrlimit' function. */\n #undef HAVE_GETRLIMIT\n \n+/* Define to 1 if you have the `getrusage' function. */\n+#undef HAVE_GETRUSAGE\n+\n+/* Define if <sys/procfs.h> has gregset_t. */\n+#undef HAVE_GREGSET_T\n+\n /* Define to 1 if you have the <inttypes.h> header file. */\n #undef HAVE_INTTYPES_H\n \n+/* Define to 1 if your system has the kinfo_getfile function. */\n+#undef HAVE_KINFO_GETFILE\n+\n /* Define if you have <langinfo.h> and nl_langinfo(CODESET). */\n #undef HAVE_LANGINFO_CODESET\n \n /* Define to 1 if you have the `dl' library (-ldl). */\n #undef HAVE_LIBDL\n \n+/* Define if you have the ipt library. */\n+#undef HAVE_LIBIPT\n+\n /* Define if the target supports branch tracing. */\n #undef HAVE_LINUX_BTRACE\n \n@@ -152,6 +170,9 @@\n /* Define to 1 if you have the <memory.h> header file. */\n #undef HAVE_MEMORY_H\n \n+/* Define to 1 if you have a working `mmap' system call. */\n+#undef HAVE_MMAP\n+\n /* Define to 1 if you have the <netdb.h> header file. */\n #undef HAVE_NETDB_H\n \n@@ -179,6 +200,9 @@\n /* Define if <sys/procfs.h> has prfpregset_t. */\n #undef HAVE_PRFPREGSET_T\n \n+/* Define if <sys/procfs.h> has prgregset32_t. */\n+#undef HAVE_PRGREGSET32_T\n+\n /* Define if <sys/procfs.h> has prgregset_t. */\n #undef HAVE_PRGREGSET_T\n \n@@ -197,6 +221,9 @@\n /* Define to 1 if you have the `pthread_sigmask' function. */\n #undef HAVE_PTHREAD_SIGMASK\n \n+/* Define to 1 if you have the `ptrace64' function. */\n+#undef HAVE_PTRACE64\n+\n /* Define if the target supports PTRACE_GETFPXREGS for extended register\n    access. */\n #undef HAVE_PTRACE_GETFPXREGS\n@@ -207,15 +234,30 @@\n /* Define to 1 if you have the <ptrace.h> header file. */\n #undef HAVE_PTRACE_H\n \n+/* Define to 1 if you have the `pt_insn_event' function. */\n+#undef HAVE_PT_INSN_EVENT\n+\n /* Define to 1 if you have the `pwrite' function. */\n #undef HAVE_PWRITE\n \n+/* Define to 1 if you have the `sbrk' function. */\n+#undef HAVE_SBRK\n+\n /* Define to 1 if you have the `setns' function. */\n #undef HAVE_SETNS\n \n+/* Define to 1 if you have the `setpgid' function. */\n+#undef HAVE_SETPGID\n+\n+/* Define to 1 if you have the `setpgrp' function. */\n+#undef HAVE_SETPGRP\n+\n /* Define to 1 if you have the `sigaction' function. */\n #undef HAVE_SIGACTION\n \n+/* Define to 1 if you have the `sigaltstack' function. */\n+#undef HAVE_SIGALTSTACK\n+\n /* Define to 1 if you have the <signal.h> header file. */\n #undef HAVE_SIGNAL_H\n \n@@ -243,6 +285,12 @@\n /* Define to 1 if you have the <string.h> header file. */\n #undef HAVE_STRING_H\n \n+/* Define to 1 if `enabled' is a member of `struct pt_insn'. */\n+#undef HAVE_STRUCT_PT_INSN_ENABLED\n+\n+/* Define to 1 if `resynced' is a member of `struct pt_insn'. */\n+#undef HAVE_STRUCT_PT_INSN_RESYNCED\n+\n /* Define to 1 if `st_blksize' is a member of `struct stat'. */\n #undef HAVE_STRUCT_STAT_ST_BLKSIZE\n \n@@ -264,6 +312,9 @@\n /* Define to 1 if you have the <sys/ioctl.h> header file. */\n #undef HAVE_SYS_IOCTL_H\n \n+/* Define to 1 if you have the <sys/param.h> header file. */\n+#undef HAVE_SYS_PARAM_H\n+\n /* Define to 1 if you have the <sys/procfs.h> header file. */\n #undef HAVE_SYS_PROCFS_H\n "
    },
    {
      "sha": "0bdc2145098ee5d57a42f96f2e9703f110295dd6",
      "filename": "gdb/gdbserver/configure",
      "status": "modified",
      "additions": 2217,
      "deletions": 905,
      "changes": 3122,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/configure?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17"
    },
    {
      "sha": "969354308c7372270cbb7f45c448934aa6640a55",
      "filename": "gdb/gdbserver/configure.ac",
      "status": "modified",
      "additions": 2,
      "deletions": 36,
      "changes": 38,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdb/gdbserver/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/configure.ac?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -85,12 +85,12 @@ ACX_CONFIGURE_DIR([\"../../gnulib\"], [\"build-gnulib-gdbserver\"],\n ACX_CONFIGURE_DIR([\"../../libiberty\"], [\"build-libiberty-gdbserver\"])\n \n AC_CHECK_HEADERS(termios.h sys/reg.h string.h dnl\n-\t\t proc_service.h sys/procfs.h linux/elf.h dnl\n+\t\t sys/procfs.h linux/elf.h dnl\n \t\t fcntl.h signal.h sys/file.h dnl\n \t\t sys/ioctl.h netinet/in.h sys/socket.h netdb.h dnl\n \t\t netinet/tcp.h arpa/inet.h)\n AC_FUNC_FORK\n-AC_CHECK_FUNCS(getauxval pread pwrite pread64 setns)\n+AC_CHECK_FUNCS(pread pwrite pread64)\n \n GDB_AC_COMMON\n \n@@ -160,8 +160,6 @@ libiberty_INIT\n \n AC_CHECK_DECLS([perror, vasprintf, vsnprintf])\n \n-AC_CHECK_MEMBERS([struct stat.st_blocks, struct stat.st_blksize])\n-\n # See if <sys/user.h> supports the %fs_base and %gs_bas amd64 segment registers.\n # Older amd64 Linux's don't have the fs_base and gs_base members of\n # `struct user_regs_struct'.\n@@ -298,14 +296,6 @@ if test \"${srv_linux_btrace}\" = \"yes\"; then\n \t    [Define if the target supports branch tracing.])\n fi\n \n-if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n-  BFD_HAVE_SYS_PROCFS_TYPE(lwpid_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(psaddr_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(prgregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(prfpregset_t)\n-  BFD_HAVE_SYS_PROCFS_TYPE(elf_fpregset_t)\n-fi\n-\n dnl Some systems (e.g., Android) have lwpid_t defined in libthread_db.h.\n if test \"$bfd_cv_have_sys_procfs_type_lwpid_t\" != yes; then\n   GDBSERVER_HAVE_THREAD_DB_TYPE(lwpid_t)\n@@ -404,30 +394,6 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([])],\n \t        \t[gdbsrv_cv_have_visibility_hidden=no])\n CFLAGS=\"$saved_cflags\"\n \n-dnl Check if we can disable the virtual address space randomization.\n-dnl The functionality of setarch -R.\n-AC_CHECK_DECLS([ADDR_NO_RANDOMIZE],,, [#include <sys/personality.h>])\n-define([PERSONALITY_TEST], [AC_LANG_PROGRAM([#include <sys/personality.h>], [\n-#      if !HAVE_DECL_ADDR_NO_RANDOMIZE\n-#       define ADDR_NO_RANDOMIZE 0x0040000\n-#      endif\n-       /* Test the flag could be set and stays set.  */\n-       personality (personality (0xffffffff) | ADDR_NO_RANDOMIZE);\n-       if (!(personality (personality (0xffffffff)) & ADDR_NO_RANDOMIZE))\n-           return 1])])\n-AC_RUN_IFELSE([PERSONALITY_TEST],\n-              [gdbsrv_cv_have_personality=true],\n-              [gdbsrv_cv_have_personality=false],\n-              [AC_LINK_IFELSE([PERSONALITY_TEST],\n-                              [gdbsrv_cv_have_personality=true],\n-                              [gdbsrv_cv_have_personality=false])])\n-if $gdbsrv_cv_have_personality\n-then\n-    AC_DEFINE([HAVE_PERSONALITY], 1,\n-              [Define if you support the personality syscall.])\n-fi\n-\n-\n IPA_DEPFILES=\"\"\n extra_libraries=\"\"\n "
    },
    {
      "sha": "96a458d96cce53dcecf0bafe5d750f07f01e3b13",
      "filename": "gdbsupport/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/ChangeLog?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -1,3 +1,11 @@\n+2020-01-14  Tom Tromey  <tom@tromey.com>\n+\n+\t* configure, Makefile.in, aclocal.m4, common.m4, config.in:\n+\tRebuild.\n+\t* common.m4 (GDB_AC_COMMON): Move many checks from\n+\tgdb/configure.ac.\n+\t* acinclude.m4: Include bfd.m4, ptrace.m4.\n+\n 2020-01-14  Tom Tromey  <tom@tromey.com>\n \n \t* common-defs.h: Add GDBSERVER case.  Update includes."
    },
    {
      "sha": "a2e174d8fc4f75a753e4ec1f765fca0de9f7b82b",
      "filename": "gdbsupport/Makefile.in",
      "status": "modified",
      "additions": 10,
      "deletions": 2,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/Makefile.in?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -114,12 +114,17 @@ am__aclocal_m4_deps = $(top_srcdir)/../config/codeset.m4 \\\n \t$(top_srcdir)/../config/gettext-sister.m4 \\\n \t$(top_srcdir)/../config/largefile.m4 \\\n \t$(top_srcdir)/../config/lead-dot.m4 \\\n+\t$(top_srcdir)/../config/lib-ld.m4 \\\n+\t$(top_srcdir)/../config/lib-link.m4 \\\n+\t$(top_srcdir)/../config/lib-prefix.m4 \\\n \t$(top_srcdir)/../config/override.m4 \\\n \t$(top_srcdir)/../config/plugins.m4 $(top_srcdir)/acinclude.m4 \\\n-\t$(top_srcdir)/common.m4 $(top_srcdir)/../config/ax_pthread.m4 \\\n+\t$(top_srcdir)/../bfd/bfd.m4 $(top_srcdir)/common.m4 \\\n+\t$(top_srcdir)/../config/ax_pthread.m4 \\\n \t$(top_srcdir)/../gdb/ax_cxx_compile_stdcxx.m4 \\\n \t$(top_srcdir)/../gdb/libiberty.m4 \\\n-\t$(top_srcdir)/../gdb/selftest.m4 $(top_srcdir)/configure.ac\n+\t$(top_srcdir)/../gdb/selftest.m4 \\\n+\t$(top_srcdir)/../gdb/ptrace.m4 $(top_srcdir)/configure.ac\n am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n \t$(ACLOCAL_M4)\n DIST_COMMON = $(srcdir)/Makefile.am $(top_srcdir)/configure \\\n@@ -243,6 +248,7 @@ GENCAT = @GENCAT@\n GMSGFMT = @GMSGFMT@\n GREP = @GREP@\n HAVE_CXX11 = @HAVE_CXX11@\n+HAVE_LIBIPT = @HAVE_LIBIPT@\n INCINTL = @INCINTL@\n INSTALL = @INSTALL@\n INSTALL_DATA = @INSTALL_DATA@\n@@ -253,8 +259,10 @@ INSTOBJEXT = @INSTOBJEXT@\n LDFLAGS = @LDFLAGS@\n LIBINTL = @LIBINTL@\n LIBINTL_DEP = @LIBINTL_DEP@\n+LIBIPT = @LIBIPT@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@\n+LTLIBIPT = @LTLIBIPT@\n LTLIBOBJS = @LTLIBOBJS@\n MAINT = @MAINT@\n MAKEINFO = @MAKEINFO@"
    },
    {
      "sha": "fe08bb36fe0b1d2559b1e0b306034b1c72194461",
      "filename": "gdbsupport/acinclude.m4",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/acinclude.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/acinclude.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/acinclude.m4?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -1,5 +1,7 @@\n+m4_include([../bfd/bfd.m4])\n m4_include([common.m4])\n m4_include([../config/ax_pthread.m4])\n m4_include([../gdb/ax_cxx_compile_stdcxx.m4])\n m4_include([../gdb/libiberty.m4])\n m4_include([../gdb/selftest.m4])\n+m4_include([../gdb/ptrace.m4])"
    },
    {
      "sha": "57bf21a3d331a9f790bceedc17a57bfccd026db0",
      "filename": "gdbsupport/aclocal.m4",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/aclocal.m4?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -1201,6 +1201,9 @@ m4_include([../config/depstand.m4])\n m4_include([../config/gettext-sister.m4])\n m4_include([../config/largefile.m4])\n m4_include([../config/lead-dot.m4])\n+m4_include([../config/lib-ld.m4])\n+m4_include([../config/lib-link.m4])\n+m4_include([../config/lib-prefix.m4])\n m4_include([../config/override.m4])\n m4_include([../config/plugins.m4])\n m4_include([acinclude.m4])"
    },
    {
      "sha": "68a354551a2ba6cad76bfabeb217a3d798aff309",
      "filename": "gdbsupport/common.m4",
      "status": "modified",
      "additions": 91,
      "deletions": 2,
      "changes": 93,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/common.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/common.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/common.m4?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -42,13 +42,50 @@ AC_DEFUN([GDB_AC_COMMON], [\n \t\t   sys/un.h sys/wait.h dnl\n \t\t   thread_db.h wait.h dnl\n \t\t   termios.h dnl\n-\t\t   dlfcn.h)\n+\t\t   dlfcn.h dnl\n+\t\t   linux/elf.h sys/procfs.h proc_service.h)\n \n+  AC_FUNC_MMAP\n+  AC_FUNC_VFORK\n   AC_CHECK_FUNCS([fdwalk getrlimit pipe pipe2 socketpair sigaction \\\n-\t\t  sigprocmask])\n+\t\t  ptrace64 sbrk setns sigaltstack sigprocmask \\\n+\t\t  setpgid setpgrp getrusage getauxval])\n+\n+  dnl Check if we can disable the virtual address space randomization.\n+  dnl The functionality of setarch -R.\n+  AC_CHECK_DECLS([ADDR_NO_RANDOMIZE],,, [#include <sys/personality.h>])\n+  define([PERSONALITY_TEST], [AC_LANG_PROGRAM([#include <sys/personality.h>], [\n+  #      if !HAVE_DECL_ADDR_NO_RANDOMIZE\n+  #       define ADDR_NO_RANDOMIZE 0x0040000\n+  #      endif\n+\t /* Test the flag could be set and stays set.  */\n+\t personality (personality (0xffffffff) | ADDR_NO_RANDOMIZE);\n+\t if (!(personality (personality (0xffffffff)) & ADDR_NO_RANDOMIZE))\n+\t     return 1])])\n+  AC_RUN_IFELSE([PERSONALITY_TEST],\n+\t\t[have_personality=true],\n+\t\t[have_personality=false],\n+\t\t[AC_LINK_IFELSE([PERSONALITY_TEST],\n+\t\t\t\t[have_personality=true],\n+\t\t\t\t[have_personality=false])])\n+  if $have_personality\n+  then\n+      AC_DEFINE([HAVE_PERSONALITY], 1,\n+\t\t[Define if you support the personality syscall.])\n+  fi\n \n   AC_CHECK_DECLS([strstr])\n \n+  # ----------------------- #\n+  # Checks for structures.  #\n+  # ----------------------- #\n+\n+  AC_CHECK_MEMBERS([struct stat.st_blocks, struct stat.st_blksize])\n+\n+  AC_SEARCH_LIBS(kinfo_getfile, util util-freebsd,\n+    [AC_DEFINE(HAVE_KINFO_GETFILE, 1,\n+\t      [Define to 1 if your system has the kinfo_getfile function. ])])\n+\n   # Check for std::thread.  This does not work on some platforms, like\n   # mingw and DJGPP.\n   AC_LANG_PUSH([C++])\n@@ -90,4 +127,56 @@ AC_DEFUN([GDB_AC_COMMON], [\n   if test \"$gdb_cv_func_sigsetjmp\" = \"yes\"; then\n     AC_DEFINE(HAVE_SIGSETJMP, 1, [Define if sigsetjmp is available. ])\n   fi\n+\n+  AC_ARG_WITH(intel_pt,\n+    AS_HELP_STRING([--with-intel-pt], [include Intel Processor Trace support (auto/yes/no)]),\n+    [], [with_intel_pt=auto])\n+  AC_MSG_CHECKING([whether to use intel pt])\n+  AC_MSG_RESULT([$with_intel_pt])\n+\n+  if test \"${with_intel_pt}\" = no; then\n+    AC_MSG_WARN([Intel Processor Trace support disabled; some features may be unavailable.])\n+    HAVE_LIBIPT=no\n+  else\n+    AC_PREPROC_IFELSE([AC_LANG_SOURCE([[\n+  #include <linux/perf_event.h>\n+  #ifndef PERF_ATTR_SIZE_VER5\n+  # error\n+  #endif\n+    ]])], [perf_event=yes], [perf_event=no])\n+    if test \"$perf_event\" != yes; then\n+      if test \"$with_intel_pt\" = yes; then\n+\tAC_MSG_ERROR([linux/perf_event.h missing or too old])\n+      else\n+\tAC_MSG_WARN([linux/perf_event.h missing or too old; some features may be unavailable.])\n+      fi\n+    fi\n+\n+    AC_LIB_HAVE_LINKFLAGS([ipt], [], [#include \"intel-pt.h\"], [pt_insn_alloc_decoder (0);])\n+    if test \"$HAVE_LIBIPT\" != yes; then\n+      if test \"$with_intel_pt\" = yes; then\n+\tAC_MSG_ERROR([libipt is missing or unusable])\n+      else\n+\tAC_MSG_WARN([libipt is missing or unusable; some features may be unavailable.])\n+      fi\n+    else\n+      save_LIBS=$LIBS\n+      LIBS=\"$LIBS $LIBIPT\"\n+      AC_CHECK_FUNCS(pt_insn_event)\n+      AC_CHECK_MEMBERS([struct pt_insn.enabled, struct pt_insn.resynced], [], [],\n+\t\t       [#include <intel-pt.h>])\n+      LIBS=$save_LIBS\n+    fi\n+  fi\n+\n+  if test \"$ac_cv_header_sys_procfs_h\" = yes; then\n+    BFD_HAVE_SYS_PROCFS_TYPE(gregset_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(fpregset_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(prgregset_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(prfpregset_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(prgregset32_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(lwpid_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(psaddr_t)\n+    BFD_HAVE_SYS_PROCFS_TYPE(elf_fpregset_t)\n+  fi\n ])"
    },
    {
      "sha": "6a6b0bc74f09f2916d7191111bca1420b3213d5a",
      "filename": "gdbsupport/config.in",
      "status": "modified",
      "additions": 140,
      "deletions": 0,
      "changes": 140,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/config.in?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -28,6 +28,10 @@\n /* define if the compiler supports basic C++11 syntax */\n #undef HAVE_CXX11\n \n+/* Define to 1 if you have the declaration of `ADDR_NO_RANDOMIZE', and to 0 if\n+   you don't. */\n+#undef HAVE_DECL_ADDR_NO_RANDOMIZE\n+\n /* Define to 1 if you have the declaration of `asprintf', and to 0 if you\n    don't. */\n #undef HAVE_DECL_ASPRINTF\n@@ -39,6 +43,10 @@\n /* Define to 1 if you have the declaration of `ffs', and to 0 if you don't. */\n #undef HAVE_DECL_FFS\n \n+/* Define to 1 if you have the declaration of `ptrace', and to 0 if you don't.\n+   */\n+#undef HAVE_DECL_PTRACE\n+\n /* Define to 1 if you have the declaration of `snprintf', and to 0 if you\n    don't. */\n #undef HAVE_DECL_SNPRINTF\n@@ -78,18 +86,48 @@\n /* Define to 1 if you have the <dlfcn.h> header file. */\n #undef HAVE_DLFCN_H\n \n+/* Define if <sys/procfs.h> has elf_fpregset_t. */\n+#undef HAVE_ELF_FPREGSET_T\n+\n /* Define to 1 if you have the `fdwalk' function. */\n #undef HAVE_FDWALK\n \n+/* Define to 1 if you have the `fork' function. */\n+#undef HAVE_FORK\n+\n+/* Define if <sys/procfs.h> has fpregset_t. */\n+#undef HAVE_FPREGSET_T\n+\n+/* Define to 1 if you have the `getauxval' function. */\n+#undef HAVE_GETAUXVAL\n+\n+/* Define to 1 if you have the `getpagesize' function. */\n+#undef HAVE_GETPAGESIZE\n+\n /* Define to 1 if you have the `getrlimit' function. */\n #undef HAVE_GETRLIMIT\n \n+/* Define to 1 if you have the `getrusage' function. */\n+#undef HAVE_GETRUSAGE\n+\n+/* Define if <sys/procfs.h> has gregset_t. */\n+#undef HAVE_GREGSET_T\n+\n /* Define to 1 if you have the <inttypes.h> header file. */\n #undef HAVE_INTTYPES_H\n \n+/* Define to 1 if your system has the kinfo_getfile function. */\n+#undef HAVE_KINFO_GETFILE\n+\n /* Define if you have <langinfo.h> and nl_langinfo(CODESET). */\n #undef HAVE_LANGINFO_CODESET\n \n+/* Define if you have the ipt library. */\n+#undef HAVE_LIBIPT\n+\n+/* Define to 1 if you have the <linux/elf.h> header file. */\n+#undef HAVE_LINUX_ELF_H\n+\n /* Define to 1 if you have the <linux/perf_event.h> header file. */\n #undef HAVE_LINUX_PERF_EVENT_H\n \n@@ -99,15 +137,39 @@\n /* Define to 1 if the system has the type `long long'. */\n #undef HAVE_LONG_LONG\n \n+/* Define if <sys/procfs.h> has lwpid_t. */\n+#undef HAVE_LWPID_T\n+\n /* Define to 1 if you have the <memory.h> header file. */\n #undef HAVE_MEMORY_H\n \n+/* Define to 1 if you have a working `mmap' system call. */\n+#undef HAVE_MMAP\n+\n+/* Define if you support the personality syscall. */\n+#undef HAVE_PERSONALITY\n+\n /* Define to 1 if you have the `pipe' function. */\n #undef HAVE_PIPE\n \n /* Define to 1 if you have the `pipe2' function. */\n #undef HAVE_PIPE2\n \n+/* Define if <sys/procfs.h> has prfpregset_t. */\n+#undef HAVE_PRFPREGSET_T\n+\n+/* Define if <sys/procfs.h> has prgregset32_t. */\n+#undef HAVE_PRGREGSET32_T\n+\n+/* Define if <sys/procfs.h> has prgregset_t. */\n+#undef HAVE_PRGREGSET_T\n+\n+/* Define to 1 if you have the <proc_service.h> header file. */\n+#undef HAVE_PROC_SERVICE_H\n+\n+/* Define if <sys/procfs.h> has psaddr_t. */\n+#undef HAVE_PSADDR_T\n+\n /* Have PTHREAD_PRIO_INHERIT. */\n #undef HAVE_PTHREAD_PRIO_INHERIT\n \n@@ -117,9 +179,33 @@\n /* Define to 1 if you have the `pthread_sigmask' function. */\n #undef HAVE_PTHREAD_SIGMASK\n \n+/* Define to 1 if you have the `ptrace64' function. */\n+#undef HAVE_PTRACE64\n+\n+/* Define to 1 if you have the <ptrace.h> header file. */\n+#undef HAVE_PTRACE_H\n+\n+/* Define to 1 if you have the `pt_insn_event' function. */\n+#undef HAVE_PT_INSN_EVENT\n+\n+/* Define to 1 if you have the `sbrk' function. */\n+#undef HAVE_SBRK\n+\n+/* Define to 1 if you have the `setns' function. */\n+#undef HAVE_SETNS\n+\n+/* Define to 1 if you have the `setpgid' function. */\n+#undef HAVE_SETPGID\n+\n+/* Define to 1 if you have the `setpgrp' function. */\n+#undef HAVE_SETPGRP\n+\n /* Define to 1 if you have the `sigaction' function. */\n #undef HAVE_SIGACTION\n \n+/* Define to 1 if you have the `sigaltstack' function. */\n+#undef HAVE_SIGALTSTACK\n+\n /* Define to 1 if you have the <signal.h> header file. */\n #undef HAVE_SIGNAL_H\n \n@@ -144,6 +230,27 @@\n /* Define to 1 if you have the <string.h> header file. */\n #undef HAVE_STRING_H\n \n+/* Define to 1 if `enabled' is a member of `struct pt_insn'. */\n+#undef HAVE_STRUCT_PT_INSN_ENABLED\n+\n+/* Define to 1 if `resynced' is a member of `struct pt_insn'. */\n+#undef HAVE_STRUCT_PT_INSN_RESYNCED\n+\n+/* Define to 1 if `st_blksize' is a member of `struct stat'. */\n+#undef HAVE_STRUCT_STAT_ST_BLKSIZE\n+\n+/* Define to 1 if `st_blocks' is a member of `struct stat'. */\n+#undef HAVE_STRUCT_STAT_ST_BLOCKS\n+\n+/* Define to 1 if you have the <sys/param.h> header file. */\n+#undef HAVE_SYS_PARAM_H\n+\n+/* Define to 1 if you have the <sys/procfs.h> header file. */\n+#undef HAVE_SYS_PROCFS_H\n+\n+/* Define to 1 if you have the <sys/ptrace.h> header file. */\n+#undef HAVE_SYS_PTRACE_H\n+\n /* Define to 1 if you have the <sys/resource.h> header file. */\n #undef HAVE_SYS_RESOURCE_H\n \n@@ -171,12 +278,24 @@\n /* Define to 1 if you have the <unistd.h> header file. */\n #undef HAVE_UNISTD_H\n \n+/* Define to 1 if you have the `vfork' function. */\n+#undef HAVE_VFORK\n+\n+/* Define to 1 if you have the <vfork.h> header file. */\n+#undef HAVE_VFORK_H\n+\n /* Define to 1 if you have the <wait.h> header file. */\n #undef HAVE_WAIT_H\n \n /* Define to 1 if you have the <windows.h> header file. */\n #undef HAVE_WINDOWS_H\n \n+/* Define to 1 if `fork' works. */\n+#undef HAVE_WORKING_FORK\n+\n+/* Define to 1 if `vfork' works. */\n+#undef HAVE_WORKING_VFORK\n+\n /* Name of package */\n #undef PACKAGE\n \n@@ -202,6 +321,21 @@\n    your system. */\n #undef PTHREAD_CREATE_JOINABLE\n \n+/* Define to the type of arg 1 for ptrace. */\n+#undef PTRACE_TYPE_ARG1\n+\n+/* Define to the type of arg 3 for ptrace. */\n+#undef PTRACE_TYPE_ARG3\n+\n+/* Define to the type of arg 4 for ptrace. */\n+#undef PTRACE_TYPE_ARG4\n+\n+/* Define to the type of arg 5 for ptrace. */\n+#undef PTRACE_TYPE_ARG5\n+\n+/* Define as the return type of ptrace. */\n+#undef PTRACE_TYPE_RET\n+\n /* The size of `long long', as computed by sizeof. */\n #undef SIZEOF_LONG_LONG\n \n@@ -270,5 +404,11 @@\n /* Define to 1 if you need to in order for `stat' and other things to work. */\n #undef _POSIX_SOURCE\n \n+/* Define to `int' if <sys/types.h> does not define. */\n+#undef pid_t\n+\n /* Define to `unsigned int' if <sys/types.h> does not define. */\n #undef size_t\n+\n+/* Define as `fork' if `vfork' does not work. */\n+#undef vfork"
    },
    {
      "sha": "a0df06bbd533902ec057c40ddd7b53a7225053a5",
      "filename": "gdbsupport/configure",
      "status": "modified",
      "additions": 2385,
      "deletions": 516,
      "changes": 2901,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/configure?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17"
    },
    {
      "sha": "af14d7bb92d29c7df2960e76c1eb096eafdf127e",
      "filename": "gdbsupport/configure.ac",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/05ea2a051030a452bb1f4710dafeb1054cf38c17/gdbsupport/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/configure.ac?ref=05ea2a051030a452bb1f4710dafeb1054cf38c17",
      "patch": "@@ -45,6 +45,9 @@ GDB_AC_COMMON\n GDB_AC_SELFTEST\n AM_CONDITIONAL(SELFTEST, $enable_unittests)\n \n+# Check the return and argument types of ptrace.\n+GDB_AC_PTRACE\n+\n TARGET_WORD_SIZE=`sed -n 's,#define BFD_ARCH_SIZE \\(.*\\)$,\\1,p' ../bfd/bfd-in3.h`\n AC_DEFINE_UNQUOTED(TARGET_WORD_SIZE, $TARGET_WORD_SIZE,\n    [Define to the word size for the target.])"
    }
  ]
}