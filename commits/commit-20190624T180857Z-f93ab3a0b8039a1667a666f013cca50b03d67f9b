{
  "sha": "f93ab3a0b8039a1667a666f013cca50b03d67f9b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjkzYWIzYTBiODAzOWExNjY3YTY2NmYwMTNjY2E1MGIwM2Q2N2Y5Yg==",
  "commit": {
    "author": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2019-06-24T18:08:40Z"
    },
    "committer": {
      "name": "H.J. Lu",
      "email": "hjl.tools@gmail.com",
      "date": "2019-06-24T18:08:57Z"
    },
    "message": "elf: Remove the property after reporting its removal\n\ncommit d2ef37ebd9f771d06edf1fdea37970f60b242b2d\nAuthor: H.J. Lu <hjl.tools@gmail.com>\nDate:   Fri Dec 7 08:30:30 2018 -0800\n\n    elf: Report property change when merging properties\n\nfailed to remove the property after reporting it has been removed.  This\npatch corrects it.\n\nbfd/\n\n\tPR ld/24721\n\t* elf-properties.c (elf_merge_gnu_property_list): Remove the\n\tproperty after reporting property removal.\n\nld/\n\n\tPR ld/24721\n\t* testsuite/ld-x86-64/x86-64.exp: Run PR ld/24721 tests.\n\t* testsuite/ld-x86-64/pr24721-x32.d: New file.\n\t* testsuite/ld-x86-64/pr24721.d: Likewise.\n\t* testsuite/ld-x86-64/pr24721.map: Likewise.\n\t* testsuite/ld-x86-64/pr24721a.s: Likewise.\n\t* testsuite/ld-x86-64/pr24721b.s: Likewise.",
    "tree": {
      "sha": "21a6d5b3201ec8ac98a911549a7da13fa960115b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/21a6d5b3201ec8ac98a911549a7da13fa960115b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f93ab3a0b8039a1667a666f013cca50b03d67f9b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f93ab3a0b8039a1667a666f013cca50b03d67f9b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f93ab3a0b8039a1667a666f013cca50b03d67f9b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f93ab3a0b8039a1667a666f013cca50b03d67f9b/comments",
  "author": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "hjl-tools",
    "id": 1072356,
    "node_id": "MDQ6VXNlcjEwNzIzNTY=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/hjl-tools",
    "html_url": "https://github.com/hjl-tools",
    "followers_url": "https://api.github.com/users/hjl-tools/followers",
    "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}",
    "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions",
    "organizations_url": "https://api.github.com/users/hjl-tools/orgs",
    "repos_url": "https://api.github.com/users/hjl-tools/repos",
    "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}",
    "received_events_url": "https://api.github.com/users/hjl-tools/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "164e3873cf41d01a9a67396575dceef7489cee64",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/164e3873cf41d01a9a67396575dceef7489cee64",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/164e3873cf41d01a9a67396575dceef7489cee64"
    }
  ],
  "stats": {
    "total": 83,
    "additions": 77,
    "deletions": 6
  },
  "files": [
    {
      "sha": "ec272a873131f95f79b1527a316691496bba3dbc",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -1,3 +1,9 @@\n+2019-06-24  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/24721\n+\t* elf-properties.c (elf_merge_gnu_property_list): Remove the\n+\tproperty after reporting property removal.\n+\n 2019-06-23  Alan Modra  <amodra@gmail.com>\n \n \tPR 24704"
    },
    {
      "sha": "a297c9c5c24f291e1f0259551149f99eb08d9a59",
      "filename": "bfd/elf-properties.c",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/bfd/elf-properties.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/bfd/elf-properties.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf-properties.c?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -322,12 +322,10 @@ elf_merge_gnu_property_list (struct bfd_link_info *info, bfd *first_pbfd,\n \t\t\t (bfd_vma) p->property.pr_type, first_pbfd, abfd);\n \t\t  }\n \t      }\n-\t    else\n-\t      {\n-\t\t/* Remove this property.  */\n-\t\t*lastp = p->next;\n-\t\tcontinue;\n-\t      }\n+\n+\t    /* Remove this property.  */\n+\t    *lastp = p->next;\n+\t    continue;\n \t  }\n \telse if (number_p)\n \t  {"
    },
    {
      "sha": "2c11a66c5c5af52cf65254ae53674d0f752ca49d",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -1,3 +1,13 @@\n+2019-06-24  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR ld/24721\n+\t* testsuite/ld-x86-64/x86-64.exp: Run PR ld/24721 tests.\n+\t* testsuite/ld-x86-64/pr24721-x32.d: New file.\n+\t* testsuite/ld-x86-64/pr24721.d: Likewise.\n+\t* testsuite/ld-x86-64/pr24721.map: Likewise.\n+\t* testsuite/ld-x86-64/pr24721a.s: Likewise.\n+\t* testsuite/ld-x86-64/pr24721b.s: Likewise.\n+\n 2019-06-23  Alan Modra  <amodra@gmail.com>\n \n \tPR 24704"
    },
    {
      "sha": "9b067efdc11a4824282155fb30df39531761e48a",
      "filename": "ld/testsuite/ld-x86-64/pr24721-x32.d",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721-x32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721-x32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24721-x32.d?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -0,0 +1,6 @@\n+#source: pr24721a.s\n+#source: pr24721b.s\n+#as: --x32 -mx86-used-note=no\n+#ld: -r -m elf32_x86_64 -Map tmpdir/pr24721.map\n+#readelf: -n\n+#map: pr24721.map"
    },
    {
      "sha": "efa88db2b3c7e9c5a6482282f260fde046552246",
      "filename": "ld/testsuite/ld-x86-64/pr24721.d",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24721.d?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -0,0 +1,6 @@\n+#source: pr24721a.s\n+#source: pr24721b.s\n+#as: --64 -defsym __64_bit__=1 -mx86-used-note=no\n+#ld: -r -melf_x86_64 -Map tmpdir/pr24721.map\n+#readelf: -n\n+#map: pr24721.map"
    },
    {
      "sha": "9e63fff27557b983d80612665412d8ca15fc33a1",
      "filename": "ld/testsuite/ld-x86-64/pr24721.map",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721.map",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721.map",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24721.map?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -0,0 +1,3 @@\n+#...\n+Removed property 0xc0000002 to merge tmpdir/pr24721a.o \\(0x1\\) and tmpdir/pr24721b.o \\(not found\\)\n+#pass"
    },
    {
      "sha": "b229d19b02dc9809c083f7da01800de6419a4b5a",
      "filename": "ld/testsuite/ld-x86-64/pr24721a.s",
      "status": "added",
      "additions": 34,
      "deletions": 0,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721a.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721a.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24721a.s?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -0,0 +1,34 @@\n+\t.text\n+\t.globl foo\n+\t.type foo,@function\n+\t.p2align 4\n+foo:\n+\tret\n+\n+\t.section \".note.gnu.property\", \"a\"\n+.ifdef __64_bit__\n+\t.p2align 3\n+.else\n+\t.p2align 2\n+.endif\n+\t.long 1f - 0f\t\t/* name length */\n+\t.long 5f - 2f\t\t/* data length */\n+\t.long 5\t\t\t/* note type */\n+0:\t.asciz \"GNU\"\t\t/* vendor name */\n+1:\n+.ifdef __64_bit__\n+\t.p2align 3\n+.else\n+\t.p2align 2\n+.endif\n+2:\t.long 0xc0000002\t/* pr_type.  */\n+\t.long 4f - 3f\t\t/* pr_datasz.  */\n+3:\n+\t.long 0x1\n+4:\n+.ifdef __64_bit__\n+\t.p2align 3\n+.else\n+\t.p2align 2\n+.endif\n+5:"
    },
    {
      "sha": "3d11691166751bfa4892709a718a713167f98988",
      "filename": "ld/testsuite/ld-x86-64/pr24721b.s",
      "status": "added",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721b.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/pr24721b.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/pr24721b.s?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -0,0 +1,6 @@\n+\t.text\n+\t.globl bar\n+\t.type bar,@function\n+\t.p2align 4\n+bar:\n+\tret"
    },
    {
      "sha": "d815e5d633cc1b8f95336d8f3b89d487a8405ec7",
      "filename": "ld/testsuite/ld-x86-64/x86-64.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/x86-64.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f93ab3a0b8039a1667a666f013cca50b03d67f9b/ld/testsuite/ld-x86-64/x86-64.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-x86-64/x86-64.exp?ref=f93ab3a0b8039a1667a666f013cca50b03d67f9b",
      "patch": "@@ -456,6 +456,8 @@ run_dump_test \"pr24458b\"\n run_dump_test \"pr24458b-x32\"\n run_dump_test \"pr24458c\"\n run_dump_test \"pr24458c-x32\"\n+run_dump_test \"pr24721\"\n+run_dump_test \"pr24721-x32\"\n \n if { ![istarget \"x86_64-*-linux*\"] && ![istarget \"x86_64-*-nacl*\"]} {\n     return"
    }
  ]
}