{
  "sha": "aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWE4ODFlY2RlNDhjN2EwMjI0YjkyZTJjZmE0M2IzN2VlOWVjOWZhMg==",
  "commit": {
    "author": {
      "name": "Philipp Tomsich",
      "email": "prt@gnu.org",
      "date": "2021-01-07T07:53:25Z"
    },
    "committer": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-01-07T08:45:43Z"
    },
    "message": "RISC-V: Add pause hint instruction.\n\nAdd support for the pause hint instruction, as specified in the\nZihintpause extension.  The pause instruction is encoded as a\nspecial form of a memory fence (which is available as part of the\nbase instruction set).  The chosen encoding does not mandate any\nparticular memory ordering and therefore is a true hint.\n\nbfd/\n    * elfxx-riscv.c (riscv_std_z_ext_strtab): Added zihintpause.\ngas/\n    * config/tc-riscv.c (riscv_multi_subset_supports): Added\n    INSN_CLASS_ZIHINTPAUSE.\n    * testsuite/gas/riscv/pause.d: New testcase.  Adding coverage for\n    the pause hint instruction.\n    * testsuite/gas/riscv/pause.s: Likewise.\ninclude/\n    * opcode/riscv-opc.h: Added MATCH_PAUSE, MASK_PAUSE and DECLARE_INSN\n    for pause hint instruction.\n    * opcode/riscv.h (enum riscv_insn_class): Added INSN_CLASS_ZIHINTPAUSE.\nopcodes/\n    * riscv-opc.c (riscv_opcodes): Add pause hint instruction.",
    "tree": {
      "sha": "1b0e0814c4a7ed9567d8d49aad19de327ea78682",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1b0e0814c4a7ed9567d8d49aad19de327ea78682"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/comments",
  "author": {
    "login": "ptomsich",
    "id": 14983582,
    "node_id": "MDQ6VXNlcjE0OTgzNTgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/14983582?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/ptomsich",
    "html_url": "https://github.com/ptomsich",
    "followers_url": "https://api.github.com/users/ptomsich/followers",
    "following_url": "https://api.github.com/users/ptomsich/following{/other_user}",
    "gists_url": "https://api.github.com/users/ptomsich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/ptomsich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/ptomsich/subscriptions",
    "organizations_url": "https://api.github.com/users/ptomsich/orgs",
    "repos_url": "https://api.github.com/users/ptomsich/repos",
    "events_url": "https://api.github.com/users/ptomsich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/ptomsich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": null,
  "parents": [
    {
      "sha": "4d4490b8d772321e9634541b81be25095a5a06ef",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4d4490b8d772321e9634541b81be25095a5a06ef",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4d4490b8d772321e9634541b81be25095a5a06ef"
    }
  ],
  "stats": {
    "total": 45,
    "additions": 44,
    "deletions": 1
  },
  "files": [
    {
      "sha": "75fb3a5f5a1427a5864c89964bf2ab13fab09048",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-07  Philipp Tomsich  <prt@gnu.org>\n+\n+\t* elfxx-riscv.c (riscv_std_z_ext_strtab): Added zihintpause.\n+\n 2021-01-07  Claire Xenia Wolf  <claire@symbioticeda.com>\n \t    Jim Wilson  <jimw@sifive.com>\n \t    Andrew Waterman  <andrew@sifive.com>"
    },
    {
      "sha": "42aeed767fe96a1e6e3b4fa3d41b8098ba1ff308",
      "filename": "bfd/elfxx-riscv.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/bfd/elfxx-riscv.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/bfd/elfxx-riscv.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elfxx-riscv.c?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -1597,7 +1597,7 @@ riscv_parse_prefixed_ext (riscv_parse_subset_t *rps,\n \n static const char * const riscv_std_z_ext_strtab[] =\n {\n-  \"zicsr\", \"zifencei\", \"zba\", \"zbb\", \"zbc\", NULL\n+  \"zicsr\", \"zifencei\", \"zihintpause\", \"zba\", \"zbb\", \"zbc\", NULL\n };\n \n static const char * const riscv_std_s_ext_strtab[] ="
    },
    {
      "sha": "48c21f71292b809682d9ab026a761ecba68ed00b",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -1,3 +1,11 @@\n+2021-01-07  Philipp Tomsich  <prt@gnu.org>\n+\n+\t* config/tc-riscv.c (riscv_multi_subset_supports): Added\n+\tINSN_CLASS_ZIHINTPAUSE.\n+\t* testsuite/gas/riscv/pause.d: New testcase.  Adding coverage for\n+\tthe pause hint instruction.\n+\t* testsuite/gas/riscv/pause.s: Likewise.\n+\n 2021-01-07  Claire Xenia Wolf  <claire@symbioticeda.com>\n \t    Jim Wilson  <jimw@sifive.com>\n \t    Andrew Waterman  <andrew@sifive.com>"
    },
    {
      "sha": "8dc84cbe3dfb4b9928b26e1682229165919b741e",
      "filename": "gas/config/tc-riscv.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/config/tc-riscv.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/config/tc-riscv.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-riscv.c?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -250,6 +250,8 @@ riscv_multi_subset_supports (enum riscv_insn_class insn_class)\n       return riscv_subset_supports (\"zicsr\");\n     case INSN_CLASS_ZIFENCEI:\n       return riscv_subset_supports (\"zifencei\");\n+    case INSN_CLASS_ZIHINTPAUSE:\n+      return riscv_subset_supports (\"zihintpause\");\n \n     case INSN_CLASS_ZBA:\n       return riscv_subset_supports (\"zba\");"
    },
    {
      "sha": "13e581d177641ec2f772a0cab6f3200d1125fd04",
      "filename": "gas/testsuite/gas/riscv/pause.d",
      "status": "added",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/testsuite/gas/riscv/pause.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/testsuite/gas/riscv/pause.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/pause.d?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -0,0 +1,10 @@\n+#as: -march=rv32i_zihintpause\n+#objdump: -dr\n+\n+.*:[ \t]+file format .*\n+\n+\n+Disassembly of section .text:\n+\n+0+000 <target>:\n+[ \t]+0:[ \t]+0100000f[ \t]+pause"
    },
    {
      "sha": "4cdf35777640afa6fcda2767752214fda01d1676",
      "filename": "gas/testsuite/gas/riscv/pause.s",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/testsuite/gas/riscv/pause.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/gas/testsuite/gas/riscv/pause.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/riscv/pause.s?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -0,0 +1,2 @@\n+target:\n+\tpause"
    },
    {
      "sha": "6345fc51818b0875660fb9dc4cc66efd0d6733e6",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -1,3 +1,9 @@\n+2021-01-07  Philipp Tomsich  <prt@gnu.org>\n+\n+\t* opcode/riscv-opc.h: Added MATCH_PAUSE, MASK_PAUSE and DECLARE_INSN\n+\tfor pause hint instruction.\n+\t* opcode/riscv.h (enum riscv_insn_class): Added INSN_CLASS_ZIHINTPAUSE.\n+\n 2021-01-07  Claire Xenia Wolf  <claire@symbioticeda.com>\n \t    Jim Wilson  <jimw@sifive.com>\n \t    Andrew Waterman  <andrew@sifive.com>"
    },
    {
      "sha": "38ce41d8430d18815af52366a8172bd3c0298dad",
      "filename": "include/opcode/riscv-opc.h",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/opcode/riscv-opc.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/opcode/riscv-opc.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/riscv-opc.h?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -157,6 +157,8 @@\n #define MASK_SW  0x707f\n #define MATCH_SD 0x3023\n #define MASK_SD  0x707f\n+#define MATCH_PAUSE 0x0100000f\n+#define MASK_PAUSE  0xffffffff\n #define MATCH_FENCE 0xf\n #define MASK_FENCE  0x707f\n #define MATCH_FENCE_I 0x100f\n@@ -984,6 +986,7 @@ DECLARE_INSN(sb, MATCH_SB, MASK_SB)\n DECLARE_INSN(sh, MATCH_SH, MASK_SH)\n DECLARE_INSN(sw, MATCH_SW, MASK_SW)\n DECLARE_INSN(sd, MATCH_SD, MASK_SD)\n+DECLARE_INSN(pause, MATCH_PAUSE, MASK_PAUSE)\n DECLARE_INSN(fence, MATCH_FENCE, MASK_FENCE)\n DECLARE_INSN(fence_i, MATCH_FENCE_I, MASK_FENCE_I)\n DECLARE_INSN(mul, MATCH_MUL, MASK_MUL)"
    },
    {
      "sha": "33ef290bb27e60843d9eb98569ab803c35a81adc",
      "filename": "include/opcode/riscv.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/opcode/riscv.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/include/opcode/riscv.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/riscv.h?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -311,6 +311,7 @@ enum riscv_insn_class\n    INSN_CLASS_D_AND_C,\n    INSN_CLASS_ZICSR,\n    INSN_CLASS_ZIFENCEI,\n+   INSN_CLASS_ZIHINTPAUSE,\n    INSN_CLASS_ZBA,\n    INSN_CLASS_ZBB,\n    INSN_CLASS_ZBC,"
    },
    {
      "sha": "2add0e75d058b76b863902a99e8b3c871930ba5f",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -1,3 +1,7 @@\n+2021-01-07  Philipp Tomsich  <prt@gnu.org>\n+\n+\t* riscv-opc.c (riscv_opcodes): Add pause hint instruction.\n+\n 2021-01-07  Claire Xenia Wolf  <claire@symbioticeda.com>\n \t    Jim Wilson  <jimw@sifive.com>\n \t    Andrew Waterman  <andrew@sifive.com>"
    },
    {
      "sha": "7c262ddf53182d4506ad5ec8ca1afbf0a99cb0ce",
      "filename": "opcodes/riscv-opc.c",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/opcodes/riscv-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2/opcodes/riscv-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/riscv-opc.c?ref=aa881ecde48c7a0224b92e2cfa43b37ee9ec9fa2",
      "patch": "@@ -345,6 +345,7 @@ const struct riscv_opcode riscv_opcodes[] =\n {\"sw\",          0, INSN_CLASS_C,   \"Ct,Ck(Cs)\",  MATCH_C_SW, MASK_C_SW, match_opcode, INSN_ALIAS|INSN_DREF|INSN_4_BYTE },\n {\"sw\",          0, INSN_CLASS_I,   \"t,q(s)\",  MATCH_SW, MASK_SW, match_opcode, INSN_DREF|INSN_4_BYTE },\n {\"sw\",          0, INSN_CLASS_I,   \"t,A,s\",  0, (int) M_SW, match_never, INSN_MACRO },\n+{\"pause\",       0, INSN_CLASS_ZIHINTPAUSE,   \"\",  MATCH_PAUSE, MASK_PAUSE, match_opcode, 0 },\n {\"fence\",       0, INSN_CLASS_I,   \"\",  MATCH_FENCE | MASK_PRED | MASK_SUCC, MASK_FENCE | MASK_RD | MASK_RS1 | MASK_IMM, match_opcode, INSN_ALIAS },\n {\"fence\",       0, INSN_CLASS_I,   \"P,Q\",  MATCH_FENCE, MASK_FENCE | MASK_RD | MASK_RS1 | (MASK_IMM & ~MASK_PRED & ~MASK_SUCC), match_opcode, 0 },\n {\"fence.i\",     0, INSN_CLASS_ZIFENCEI,   \"\",  MATCH_FENCE_I, MASK_FENCE | MASK_RD | MASK_RS1 | MASK_IMM, match_opcode, 0 },\n@@ -977,6 +978,8 @@ const struct riscv_ext_version riscv_ext_version_table[] =\n {\"zifencei\", ISA_SPEC_CLASS_20191213, 2, 0},\n {\"zifencei\", ISA_SPEC_CLASS_20190608, 2, 0},\n \n+{\"zihintpause\", ISA_SPEC_CLASS_DRAFT, 1, 0},\n+\n {\"zba\", ISA_SPEC_CLASS_DRAFT, 0, 93},\n {\"zbb\", ISA_SPEC_CLASS_DRAFT, 0, 93},\n {\"zbc\", ISA_SPEC_CLASS_DRAFT, 0, 93},"
    }
  ]
}