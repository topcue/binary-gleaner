{
  "sha": "287fbf951acc76f21d5ec6ab515d6080571aa7ee",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Mjg3ZmJmOTUxYWNjNzZmMjFkNWVjNmFiNTE1ZDYwODA1NzFhYTdlZQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-09-09T04:46:11Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-09-09T05:04:08Z"
    },
    "message": "sim: dv-sockser: move sim-main.h include after system includes\n\nThe sim-main.h header is a bit of a dumping ground.  Every arch can\n(and many do) define all sorts of weird & common names that end up\nconflicting with system headers.  So including it before the system\nheaders sets us up for pain.  v850 is a good example of this -- when\nbuilding for mingw, we see weird failures:\n\n$ i686-w64-mingw32-gcc ... -c -o dv-sockser.o ../../../../sim/v850/../common/dv-sockser.c\nIn file included from ../../../../sim/v850/sim-main.h:11,\n                 from ../../../../sim/v850/../common/dv-sockser.c:24:\n../../../../sim/v850/../common/sim-base.h:97:32: error: expected ')' before '->' token\n  97 | # define STATE_CPU(sd, n) ((sd)->cpu[0])\n     |                                ^~\n\nWhile gcc is unhelpful at first, running it through the preprocessor\nby hand shows more details:\n\n$ i686-w64-mingw32-gcc ... -E -dD -o dv-sockser.i ../../../../sim/v850/../common/dv-sockser.c\n$ i686-w64-mingw32-gcc -c dv-sockser.i\nIn file included from /usr/i686-w64-mingw32/usr/include/minwindef.h:163,\n                 from /usr/i686-w64-mingw32/usr/include/windef.h:9,\n                 from /usr/i686-w64-mingw32/usr/include/windows.h:69,\n                 from /usr/i686-w64-mingw32/usr/include/winsock2.h:23,\n                 from ../../gnulib/import/sys/socket.h:684,\n                 from ../../gnulib/import/netinet/in.h:43,\n                 from ../../../../sim/v850/../common/dv-sockser.c:39:\n/usr/i686-w64-mingw32/usr/include/winnt.h:4803:25: error: expected ')' before '->' token\n 4803 |       DWORD State;\n      |                         ^\n      |                         )\n\nThis is because v850 sets up this common name:\n\nAll of this needs cleaning up someday, but since the dv-sockser code\ndefinitely should be fixed in this way, lets do that now and unblock\nthe v850 code.",
    "tree": {
      "sha": "a934b677af24293407c7d0682debc9469989ae21",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a934b677af24293407c7d0682debc9469989ae21"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/287fbf951acc76f21d5ec6ab515d6080571aa7ee",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/287fbf951acc76f21d5ec6ab515d6080571aa7ee",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/287fbf951acc76f21d5ec6ab515d6080571aa7ee",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/287fbf951acc76f21d5ec6ab515d6080571aa7ee/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7eb2a68f2854ff1b53f84346b4c19450fba21e9f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7eb2a68f2854ff1b53f84346b4c19450fba21e9f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7eb2a68f2854ff1b53f84346b4c19450fba21e9f"
    }
  ],
  "stats": {
    "total": 3,
    "additions": 1,
    "deletions": 2
  },
  "files": [
    {
      "sha": "99f280cd1a72b90236f3e3e532736df51b6f6da2",
      "filename": "sim/common/dv-sockser.c",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/287fbf951acc76f21d5ec6ab515d6080571aa7ee/sim/common/dv-sockser.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/287fbf951acc76f21d5ec6ab515d6080571aa7ee/sim/common/dv-sockser.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/dv-sockser.c?ref=287fbf951acc76f21d5ec6ab515d6080571aa7ee",
      "patch": "@@ -21,8 +21,6 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n /* This must come before any other includes.  */\n #include \"defs.h\"\n \n-#include \"sim-main.h\"\n-\n #include <string.h>\n #include <signal.h>\n #include <stdlib.h>\n@@ -46,6 +44,7 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n #include <netinet/tcp.h>\n #endif\n \n+#include \"sim-main.h\"\n #include \"sim-assert.h\"\n #include \"sim-options.h\"\n "
    }
  ]
}