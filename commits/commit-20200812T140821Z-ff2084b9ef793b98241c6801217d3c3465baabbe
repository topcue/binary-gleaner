{
  "sha": "ff2084b9ef793b98241c6801217d3c3465baabbe",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmYyMDg0YjllZjc5M2I5ODI0MWM2ODAxMjE3ZDNjMzQ2NWJhYWJiZQ==",
  "commit": {
    "author": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-06-29T14:54:41Z"
    },
    "committer": {
      "name": "Jon Turney",
      "email": "jon.turney@dronecode.org.uk",
      "date": "2020-08-12T14:08:21Z"
    },
    "message": "Read tid from correct offset in win32pstatus NOTE_INFO_THREAD\n\nFix the offset used to read the tid from a win32pstatus ELF note.\n\nThis probably meant that registers were only being correctly recovered\nfrom the core dump for the current thread.\n\nIt looks like this has beeen incorrect since 4a6636fb.\n\nAlso fix offsets used in NOTE_INFO_PROCESS (which is not actually\ngenerated by the Cygwin dumper tool).\n\nAlso improve comment.\n\nbfd/ChangeLog:\n\n2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* elf.c (elfcore_grok_win32pstatus): Fix the offset used to read\n\tthe tid from a win32pstatus NOTE_INFO_THREAD ELF note.  Fix\n\toffsets used to read NOTE_INFO_PROCESS.",
    "tree": {
      "sha": "e52692e6c70e8e3d3977009a36791bad49ef6049",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/e52692e6c70e8e3d3977009a36791bad49ef6049"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ff2084b9ef793b98241c6801217d3c3465baabbe",
    "comment_count": 0,
    "verification": {
      "verified": true,
      "reason": "valid",
      "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABAgAGBQJfM/fWAAoJEMfIbwNwKFyBa4sQAK1lVz3WVdSqmOYvC+J2iEe0\ncdfSX66eyex7SooixVeGxKbUYiHiJY7gMRwIu4iqCZIEr6Kq7yBukMZBNJ+gEBPe\nEOVjukm0BZ+4kzKP8OVuOF1EXbqgjUwSgJ/4Pa3n2aL+N+mlNYOWjGuji4+azNAR\nzx9h8EraiuHWH6LY8h5oD9eElHD+dLDTjHD3iH5Lt7NgTMhZGlDbvIFuFQ8nZkCY\n0GTnY2nzLwANjzoAK4p8WiiHr09YANrE1acAJ92jlyi74U6z5eLDNsfQ8vp1A/CS\ns4zCFdoW2lORvYMH1ZgIFNIpBO+xvwBxcwudyiH4kCW37LwT6PKxHejReRH2vURL\nKrQhP3DQ7pXRNAr1CQoxW8LCZ0ftitfUh6/ioWLM+E0eX6He8UCfTwWrA63zZw9i\nkSWOZjVz6qteeGfN+F09dcSj7SZGMpdWx09T3vlRWFfv7ee0lac8AGFO8nEDsNJi\n7zeSP49xg70p6I7HWaMyReJatqeLRPHVgiZIJntmRpy1OB3hooB3Q1ZWWSoYQCqr\n5yZpg1OOQgZnd+bpXySzxI1kG0nAnhlNP24F1vo+Hhd5tNcSznXG5R8HvcH3Po7d\nfSuYdyn+p0WC6awJzgvR7sjVcEFr89WzS59daD8bBLLJBrGqSbWwtlhG/jNVic5p\nl08e5eO9swKPVGWYLtr9\n=UHgx\n-----END PGP SIGNATURE-----",
      "payload": "tree e52692e6c70e8e3d3977009a36791bad49ef6049\nparent c0ab14ae2a448941bc3bdc4266795e6ef2c38d85\nauthor Jon Turney <jon.turney@dronecode.org.uk> 1593442481 +0100\ncommitter Jon Turney <jon.turney@dronecode.org.uk> 1597241301 +0100\n\nRead tid from correct offset in win32pstatus NOTE_INFO_THREAD\n\nFix the offset used to read the tid from a win32pstatus ELF note.\n\nThis probably meant that registers were only being correctly recovered\nfrom the core dump for the current thread.\n\nIt looks like this has beeen incorrect since 4a6636fb.\n\nAlso fix offsets used in NOTE_INFO_PROCESS (which is not actually\ngenerated by the Cygwin dumper tool).\n\nAlso improve comment.\n\nbfd/ChangeLog:\n\n2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n\n\t* elf.c (elfcore_grok_win32pstatus): Fix the offset used to read\n\tthe tid from a win32pstatus NOTE_INFO_THREAD ELF note.  Fix\n\toffsets used to read NOTE_INFO_PROCESS.\n"
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ff2084b9ef793b98241c6801217d3c3465baabbe",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ff2084b9ef793b98241c6801217d3c3465baabbe",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ff2084b9ef793b98241c6801217d3c3465baabbe/comments",
  "author": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jon-turney",
    "id": 3497232,
    "node_id": "MDQ6VXNlcjM0OTcyMzI=",
    "avatar_url": "https://avatars.githubusercontent.com/u/3497232?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jon-turney",
    "html_url": "https://github.com/jon-turney",
    "followers_url": "https://api.github.com/users/jon-turney/followers",
    "following_url": "https://api.github.com/users/jon-turney/following{/other_user}",
    "gists_url": "https://api.github.com/users/jon-turney/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jon-turney/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jon-turney/subscriptions",
    "organizations_url": "https://api.github.com/users/jon-turney/orgs",
    "repos_url": "https://api.github.com/users/jon-turney/repos",
    "events_url": "https://api.github.com/users/jon-turney/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jon-turney/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c0ab14ae2a448941bc3bdc4266795e6ef2c38d85",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c0ab14ae2a448941bc3bdc4266795e6ef2c38d85",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c0ab14ae2a448941bc3bdc4266795e6ef2c38d85"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 11,
    "deletions": 4
  },
  "files": [
    {
      "sha": "f6ded673a20e37220c574d856cd1b012c21d7cae",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ff2084b9ef793b98241c6801217d3c3465baabbe/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ff2084b9ef793b98241c6801217d3c3465baabbe/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=ff2084b9ef793b98241c6801217d3c3465baabbe",
      "patch": "@@ -1,3 +1,9 @@\n+2020-07-01  Jon Turney  <jon.turney@dronecode.org.uk>\n+\n+\t* elf.c (elfcore_grok_win32pstatus): Fix the offset used to read\n+\tthe tid from a win32pstatus NOTE_INFO_THREAD ELF note.  Fix\n+\toffsets used to read NOTE_INFO_PROCESS.\n+\n 2020-08-12  Nick Clifton  <nickc@redhat.com>\n \n \t* po/ru.po: Updated Russian translation."
    },
    {
      "sha": "0bae0aacdb60f2bec13df896978bd2491536ec83",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 5,
      "deletions": 4,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ff2084b9ef793b98241c6801217d3c3465baabbe/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ff2084b9ef793b98241c6801217d3c3465baabbe/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=ff2084b9ef793b98241c6801217d3c3465baabbe",
      "patch": "@@ -10151,15 +10151,16 @@ elfcore_grok_win32pstatus (bfd *abfd, Elf_Internal_Note *note)\n     case 1 /* NOTE_INFO_PROCESS */:\n       /* FIXME: need to add ->core->command.  */\n       /* process_info.pid */\n-      elf_tdata (abfd)->core->pid = bfd_get_32 (abfd, note->descdata + 8);\n+      elf_tdata (abfd)->core->pid = bfd_get_32 (abfd, note->descdata + 4);\n       /* process_info.signal */\n-      elf_tdata (abfd)->core->signal = bfd_get_32 (abfd, note->descdata + 12);\n+      elf_tdata (abfd)->core->signal = bfd_get_32 (abfd, note->descdata + 8);\n       break;\n \n     case 2 /* NOTE_INFO_THREAD */:\n-      /* Make a \".reg/999\" section.  */\n+      /* Make a \".reg/<tid>\" section containing the Win32 API thread CONTEXT\n+         structure. */\n       /* thread_info.tid */\n-      sprintf (buf, \".reg/%ld\", (long) bfd_get_32 (abfd, note->descdata + 8));\n+      sprintf (buf, \".reg/%ld\", (long) bfd_get_32 (abfd, note->descdata + 4));\n \n       len = strlen (buf) + 1;\n       name = (char *) bfd_alloc (abfd, len);"
    }
  ]
}