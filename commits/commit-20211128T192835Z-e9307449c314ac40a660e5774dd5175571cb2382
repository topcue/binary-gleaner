{
  "sha": "e9307449c314ac40a660e5774dd5175571cb2382",
  "node_id": "C_kwDOANOeidoAKGU5MzA3NDQ5YzMxNGFjNDBhNjYwZTU3NzRkZDUxNzU1NzFjYjIzODI",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-28T19:25:36Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-28T19:28:35Z"
    },
    "message": "sim: add checks to core headers to prevent incorrect common building\n\nSome of the core sim headers rely on the SIM_AC_OPTION_BITSIZE macro\nwhich can change the size of core types.  Since these haven't been\nunified across ports, add checks to make sure they aren't accidentally\nincluded when building for all ports.  This caught the sim-load file\nusing poisoned headers that it didn't actually need.",
    "tree": {
      "sha": "4aa831cd894eedcfc058b890a4f4859ae200bb43",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4aa831cd894eedcfc058b890a4f4859ae200bb43"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/e9307449c314ac40a660e5774dd5175571cb2382",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e9307449c314ac40a660e5774dd5175571cb2382",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/e9307449c314ac40a660e5774dd5175571cb2382",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e9307449c314ac40a660e5774dd5175571cb2382/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6688220490d7d315b6489fb0de12062f7ecd3e33",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6688220490d7d315b6489fb0de12062f7ecd3e33",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6688220490d7d315b6489fb0de12062f7ecd3e33"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 8,
    "deletions": 2
  },
  "files": [
    {
      "sha": "88bdedf687dce4c3b2ab4446e866b307ce0d5782",
      "filename": "sim/common/sim-config.h",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-config.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-config.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-config.h?ref=e9307449c314ac40a660e5774dd5175571cb2382",
      "patch": "@@ -23,6 +23,9 @@\n #ifndef SIM_CONFIG_H\n #define SIM_CONFIG_H\n \n+#ifdef SIM_COMMON_BUILD\n+#error \"This header is unusable in common builds due to reliance on SIM_AC_OPTION_BITSIZE\"\n+#endif\n \n /* Host dependant:\n "
    },
    {
      "sha": "ec5df418d9de6c4b203fdfc7666926445519e732",
      "filename": "sim/common/sim-load.c",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-load.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-load.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-load.c?ref=e9307449c314ac40a660e5774dd5175571cb2382",
      "patch": "@@ -27,12 +27,11 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n #include <stdlib.h>\n #include <time.h>\n \n-#include \"sim-basics.h\"\n #include \"bfd.h\"\n-#include \"sim-utils.h\"\n \n #include \"sim/callback.h\"\n #include \"sim/sim.h\"\n+#include \"sim-utils.h\"\n \n static void eprintf (host_callback *, const char *, ...);\n static void xprintf (host_callback *, const char *, ...);"
    },
    {
      "sha": "5fd0a1dcff224694b74e0bd07d5100f93a1372a6",
      "filename": "sim/common/sim-types.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-types.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/e9307449c314ac40a660e5774dd5175571cb2382/sim/common/sim-types.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-types.h?ref=e9307449c314ac40a660e5774dd5175571cb2382",
      "patch": "@@ -23,6 +23,10 @@\n #ifndef SIM_TYPES_H\n #define SIM_TYPES_H\n \n+#ifdef SIM_COMMON_BUILD\n+#error \"This header is unusable in common builds due to reliance on SIM_AC_OPTION_BITSIZE\"\n+#endif\n+\n #include <stdint.h>\n \n /* INTEGER QUANTITIES:"
    }
  ]
}