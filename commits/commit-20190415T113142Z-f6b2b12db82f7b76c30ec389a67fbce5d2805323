{
  "sha": "f6b2b12db82f7b76c30ec389a67fbce5d2805323",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjZiMmIxMmRiODJmN2I3NmMzMGVjMzg5YTY3ZmJjZTVkMjgwNTMyMw==",
  "commit": {
    "author": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-04-15T10:53:25Z"
    },
    "committer": {
      "name": "Andre Vieira",
      "email": "andre.simoesdiasvieira@arm.com",
      "date": "2019-04-15T11:31:42Z"
    },
    "message": "[binutils, ARM, 11/16] New BFCSEL instruction for Armv8.1-M Mainline\n\ns patch is part of a series of patches to add support for Armv8.1-M Mainline instructions to binutils.\n\nThis patch adds the BFCSEL instruction. It also adds a local relocation with a new bfd_reloc_code_real enum.\n\nChangeLog entries are as follows:\n\n2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n\n\t* reloc.c (BFD_RELOC_THUMB_PCREL_BFCSEL): New relocation.\n\t* bfd-in2.h: Regenerated.\n\t* libbfd.h: Likewise.\n\n*** gas/ChangeLog ***\n\n2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n             Andre Vieira  <andre.simoesdiasvieira@arm.com>\n\n\t* config/tc-arm.c (T16_32_TAB): New entriy for bfcsel.\n\t(do_t_v8_1_branch): New switch case for bfcsel.\n\t(toU): Define.\n\t(insns): New instruction for bfcsel.\n\t(md_pcrel_from_section): New switch case\n\tfor BFD_RELOC_THUMB_PCREL_BFCSEL.\n\t(md_appdy_fix): Likewise\n\t(tc_gen_reloc): Likewise.\n\t* testsuite/gas/arm/armv8_1-m-bfcsel.d: New.\n\t* testsuite/gas/arm/armv8_1-m-bfcsel.s: New.\n\n*** ld/ChangeLog ***\n\n2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n\n\t* testsuite/ld-arm/bfcsel.s: New.\n\t* testsuite/ld-arm/bfcsel.d: New.\n\t* testsuite/ld-arm/arm-elf.exp: Add above test.\n\n*** opcodes/ChangeLog ***\n\n2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n\n\t* arm-dis.c (thumb32_opcodes): New instruction bfcsel.\n\t(print_insn_thumb32): Edit the switch case for %Z.",
    "tree": {
      "sha": "4a484080a464cb8286cf428719a427a7d0f60c8d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4a484080a464cb8286cf428719a427a7d0f60c8d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f6b2b12db82f7b76c30ec389a67fbce5d2805323",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f6b2b12db82f7b76c30ec389a67fbce5d2805323",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f6b2b12db82f7b76c30ec389a67fbce5d2805323",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f6b2b12db82f7b76c30ec389a67fbce5d2805323/comments",
  "author": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "avieira-arm",
    "id": 68072104,
    "node_id": "MDQ6VXNlcjY4MDcyMTA0",
    "avatar_url": "https://avatars.githubusercontent.com/u/68072104?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/avieira-arm",
    "html_url": "https://github.com/avieira-arm",
    "followers_url": "https://api.github.com/users/avieira-arm/followers",
    "following_url": "https://api.github.com/users/avieira-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/avieira-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/avieira-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/avieira-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/avieira-arm/orgs",
    "repos_url": "https://api.github.com/users/avieira-arm/repos",
    "events_url": "https://api.github.com/users/avieira-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/avieira-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "1889da7048b310151d142b100678b6bd6053b548",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1889da7048b310151d142b100678b6bd6053b548",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/1889da7048b310151d142b100678b6bd6053b548"
    }
  ],
  "stats": {
    "total": 201,
    "additions": 201,
    "deletions": 0
  },
  "files": [
    {
      "sha": "01539647b669c0a5443b6a4e908c08b24161a840",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -1,3 +1,9 @@\n+2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n+\n+\t* reloc.c (BFD_RELOC_THUMB_PCREL_BFCSEL): New relocation.\n+\t* bfd-in2.h: Regenerated.\n+\t* libbfd.h: Likewise.\n+\n 2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n \n \t* reloc.c (BFD_RELOC_ARM_THUMB_BF13): New."
    },
    {
      "sha": "4a3fa75867c814f082ba3ab3079cf60c30ad2b62",
      "filename": "bfd/bfd-in2.h",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/bfd-in2.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/bfd-in2.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/bfd-in2.h?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -3567,6 +3567,9 @@ field in the instruction.  */\n /* ARM 5-bit pc-relative branch for Branch Future instructions.  */\n   BFD_RELOC_THUMB_PCREL_BRANCH5,\n \n+/* ARM 6-bit pc-relative branch for BFCSEL instruction.  */\n+  BFD_RELOC_THUMB_PCREL_BFCSEL,\n+\n /* ARM 17-bit pc-relative branch for Branch Future instructions.  */\n   BFD_RELOC_ARM_THUMB_BF17,\n "
    },
    {
      "sha": "32080db8c3f6141ae9aa9674c8776694db29905a",
      "filename": "bfd/libbfd.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/libbfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/libbfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/libbfd.h?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -1530,6 +1530,7 @@ static const char *const bfd_reloc_code_real_names[] = { \"@@uninitialized@@\",\n   \"BFD_RELOC_ARM_PCREL_CALL\",\n   \"BFD_RELOC_ARM_PCREL_JUMP\",\n   \"BFD_RELOC_THUMB_PCREL_BRANCH5\",\n+  \"BFD_RELOC_THUMB_PCREL_BFCSEL\",\n   \"BFD_RELOC_ARM_THUMB_BF17\",\n   \"BFD_RELOC_ARM_THUMB_BF13\",\n   \"BFD_RELOC_ARM_THUMB_BF19\","
    },
    {
      "sha": "c0e413cd19dbfaf5100143c8879d84cb63ba4a17",
      "filename": "bfd/reloc.c",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/reloc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/bfd/reloc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/reloc.c?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -3019,6 +3019,11 @@ ENUM\n ENUMDOC\n   ARM 5-bit pc-relative branch for Branch Future instructions.\n \n+ENUM\n+  BFD_RELOC_THUMB_PCREL_BFCSEL\n+ENUMDOC\n+  ARM 6-bit pc-relative branch for BFCSEL instruction.\n+\n ENUM\n   BFD_RELOC_ARM_THUMB_BF17\n ENUMDOC"
    },
    {
      "sha": "fe9856ad97f8afac93dc4eed06499bbb9bc94754",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -1,3 +1,17 @@\n+2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n+            Andre Vieira  <andre.simoesdiasvieira@arm.com>\n+\n+\t* config/tc-arm.c (T16_32_TAB): New entriy for bfcsel.\n+\t(do_t_v8_1_branch): New switch case for bfcsel.\n+\t(toU): Define.\n+\t(insns): New instruction for bfcsel.\n+\t(md_pcrel_from_section): New switch case\n+\tfor BFD_RELOC_THUMB_PCREL_BFCSEL.\n+\t(md_appdy_fix): Likewise\n+\t(tc_gen_reloc): Likewise.\n+\t* testsuite/gas/arm/armv8_1-m-bfcsel.d: New.\n+\t* testsuite/gas/arm/armv8_1-m-bfcsel.s: New.\n+\n 2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n \n \t* config/tc-arm.c (md_pcrel_from_section): New switch case for"
    },
    {
      "sha": "5e59078890752b0580ae443c7b330e32baecccf6",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 83,
      "deletions": 0,
      "changes": 83,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -10506,6 +10506,7 @@ encode_thumb32_addr_mode (int i, bfd_boolean is_t, bfd_boolean is_d)\n   X(_b,     e000, f000b000),\t\t\t\\\n   X(_bcond, d000, f0008000),\t\t\t\\\n   X(_bf,    0000, f040e001),\t\t\t\\\n+  X(_bfcsel,0000, f000e001),\t\t\t\\\n   X(_bfx,   0000, f060e001),\t\t\t\\\n   X(_bfl,   0000, f000c001),\t\t\t\\\n   X(_bflx,  0000, f070e001),\t\t\t\\\n@@ -13384,6 +13385,46 @@ do_t_branch_future (void)\n \t  }\n \tbreak;\n \n+      case T_MNEM_bfcsel:\n+\t/* Operand 1.  */\n+\tif (inst.operands[1].hasreloc == 0)\n+\t  {\n+\t    int val = inst.operands[1].imm;\n+\t    int immA = (val & 0x00001000) >> 12;\n+\t    int immB = (val & 0x00000ffc) >> 2;\n+\t    int immC = (val & 0x00000002) >> 1;\n+\t    inst.instruction |= (immA << 16) | (immB << 1) | (immC << 11);\n+\t  }\n+\t  else\n+\t  {\n+\t    inst.relocs[1].type = BFD_RELOC_ARM_THUMB_BF13;\n+\t    inst.relocs[1].pc_rel = 1;\n+\t  }\n+\n+\t/* Operand 2.  */\n+\tif (inst.operands[2].hasreloc == 0)\n+\t  {\n+\t      constraint ((inst.operands[0].hasreloc != 0), BAD_ARGS);\n+\t      int val2 = inst.operands[2].imm;\n+\t      int val0 = inst.operands[0].imm & 0x1f;\n+\t      int diff = val2 - val0;\n+\t      if (diff == 4)\n+\t\tinst.instruction |= 1 << 17; /* T bit.  */\n+\t      else if (diff != 2)\n+\t\tas_bad (_(\"out of range label-relative fixup value\"));\n+\t  }\n+\telse\n+\t  {\n+\t      constraint ((inst.operands[0].hasreloc == 0), BAD_ARGS);\n+\t      inst.relocs[2].type = BFD_RELOC_THUMB_PCREL_BFCSEL;\n+\t      inst.relocs[2].pc_rel = 1;\n+\t  }\n+\n+\t/* Operand 3.  */\n+\tconstraint (inst.cond != COND_ALWAYS, BAD_COND);\n+\tinst.instruction |= (inst.operands[3].imm & 0xf) << 18;\n+\tbreak;\n+\n       case T_MNEM_bfx:\n       case T_MNEM_bflx:\n \tinst.instruction |= inst.operands[1].reg << 16;\n@@ -19616,6 +19657,11 @@ static struct asm_barrier_opt barrier_opt_names[] =\n   { mnem, OPS##nops ops, OT_csuffix, 0x0, T_MNEM##top, 0, THUMB_VARIANT, NULL, \\\n     do_##te }\n \n+/* T_MNEM_xyz enumerator variants of ToU.  */\n+#define toU(mnem, top, nops, ops, te) \\\n+  { mnem, OPS##nops ops, OT_unconditional, 0x0, T_MNEM##top, 0, THUMB_VARIANT, \\\n+    NULL, do_##te }\n+\n /* Legacy mnemonics that always have conditional infix after the third\n    character.  */\n #define CL(mnem, op, nops, ops, ae)\t\\\n@@ -21706,6 +21752,7 @@ static const struct asm_opcode insns[] =\n #undef  THUMB_VARIANT\n #define THUMB_VARIANT & arm_ext_v8_1m_main\n  toC(\"bf\",     _bf,\t2, (EXPs, EXPs),\t     t_branch_future),\n+ toU(\"bfcsel\", _bfcsel,\t4, (EXPs, EXPs, EXPs, COND), t_branch_future),\n  toC(\"bfx\",    _bfx,\t2, (EXPs, RRnpcsp),\t     t_branch_future),\n  toC(\"bfl\",    _bfl,\t2, (EXPs, EXPs),\t     t_branch_future),\n  toC(\"bflx\",   _bflx,\t2, (EXPs, RRnpcsp),\t     t_branch_future),\n@@ -21741,6 +21788,7 @@ static const struct asm_opcode insns[] =\n #undef ToC\n #undef toC\n #undef ToU\n+#undef toU\n \f\n /* MD interface: bits in the object file.  */\n \n@@ -22944,6 +22992,7 @@ md_pcrel_from_section (fixS * fixP, segT seg)\n     case BFD_RELOC_THUMB_PCREL_BRANCH12:\n     case BFD_RELOC_THUMB_PCREL_BRANCH20:\n     case BFD_RELOC_THUMB_PCREL_BRANCH25:\n+    case BFD_RELOC_THUMB_PCREL_BFCSEL:\n     case BFD_RELOC_ARM_THUMB_BF17:\n     case BFD_RELOC_ARM_THUMB_BF19:\n     case BFD_RELOC_ARM_THUMB_BF13:\n@@ -24844,6 +24893,39 @@ md_apply_fix (fixS *\tfixP,\n \t}\n       break;\n \n+    case BFD_RELOC_THUMB_PCREL_BFCSEL:\n+      if (fixP->fx_addsy\n+\t  && (S_GET_SEGMENT (fixP->fx_addsy) == seg)\n+\t  && !S_FORCE_RELOC (fixP->fx_addsy, TRUE)\n+\t  && ARM_IS_FUNC (fixP->fx_addsy)\n+\t  && ARM_CPU_HAS_FEATURE (selected_cpu, arm_ext_v8_1m_main))\n+\t{\n+\t  fixP->fx_done = 0;\n+\t}\n+      if ((value & ~0x7f) && ((value & ~0x3f) != ~0x3f))\n+\tas_bad_where (fixP->fx_file, fixP->fx_line,\n+\t\t      _(\"branch out of range\"));\n+\n+      if (fixP->fx_done || !seg->use_rela_p)\n+\t{\n+\t  newval  = md_chars_to_number (buf, THUMB_SIZE);\n+\n+\t  addressT boff = ((newval & 0x0780) >> 7) << 1;\n+\t  addressT diff = value - boff;\n+\n+\t  if (diff == 4)\n+\t    {\n+\t      newval |= 1 << 1; /* T bit.  */\n+\t    }\n+\t  else if (diff != 2)\n+\t    {\n+\t      as_bad_where (fixP->fx_file, fixP->fx_line,\n+\t\t\t    _(\"out of range label-relative fixup value\"));\n+\t    }\n+\t  md_number_to_chars (buf, newval, THUMB_SIZE);\n+\t}\n+      break;\n+\n     case BFD_RELOC_ARM_THUMB_BF17:\n       if (fixP->fx_addsy\n \t  && (S_GET_SEGMENT (fixP->fx_addsy) == seg)\n@@ -25158,6 +25240,7 @@ tc_gen_reloc (asection *section, fixS *fixp)\n       return NULL;\n \n     case BFD_RELOC_THUMB_PCREL_BRANCH5:\n+    case BFD_RELOC_THUMB_PCREL_BFCSEL:\n       as_bad_where (fixp->fx_file, fixp->fx_line,\n \t\t    _(\"%s used for a symbol not defined in the same file\"),\n \t\t    bfd_get_reloc_code_name (fixp->fx_r_type));"
    },
    {
      "sha": "a498f06cd3e68370b737976ac3453855852f5b58",
      "filename": "gas/testsuite/gas/arm/armv8_1-m-bfcsel.d",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/testsuite/gas/arm/armv8_1-m-bfcsel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/testsuite/gas/arm/armv8_1-m-bfcsel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8_1-m-bfcsel.d?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -0,0 +1,12 @@\n+#name: Valid Armv8.1-M Mainline BFCSEL instruction\n+#as: -march=armv8.1-m.main\n+#objdump: -dr --prefix-addresses --show-raw-insn\n+\n+.*: +file format .*arm.*\n+\n+Disassembly of section .text:\n+0[0-9a-f]+ <[^>]+> f080 e803 \tbfcsel\t2, 0000000a <foo\\+0xa>, 4, eq\n+0[0-9a-f]+ <[^>]+> 4609      \tmov\tr1, r1\n+0[0-9a-f]+ <[^>]+> d000      \tbeq.n\t0000000a <foo\\+0xa>\n+0[0-9a-f]+ <[^>]+> 4613      \tmov\tr3, r2\n+0[0-9a-f]+ <[^>]+> 4614      \tmov\tr4, r2"
    },
    {
      "sha": "07903ba5f0d282e865e383b32982ca178e1daa2b",
      "filename": "gas/testsuite/gas/arm/armv8_1-m-bfcsel.s",
      "status": "added",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/testsuite/gas/arm/armv8_1-m-bfcsel.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/gas/testsuite/gas/arm/armv8_1-m-bfcsel.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/armv8_1-m-bfcsel.s?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -0,0 +1,12 @@\n+\t.syntax unified\n+\t.text\n+\t.thumb\n+foo:\n+\tbfcsel .LB1, .LBranch, .LB2, eq\n+\tmov r1, r1\n+.LB1:\n+\tbeq .LBranch\n+.LB2:\n+\tmov r3, r2\n+.LBranch:\n+\tmov r4, r2"
    },
    {
      "sha": "869d8e352cc1b79a5dddfc5c17ff0303479e67aa",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -1,3 +1,9 @@\n+2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n+\n+\t* testsuite/ld-arm/bfcsel.s: New.\n+\t* testsuite/ld-arm/bfcsel.d: New.\n+\t* testsuite/ld-arm/arm-elf.exp: Add above test.\n+\n 2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n \n \t* testsuite/ld-arm/bfl.s: New."
    },
    {
      "sha": "5471895e63a68c0ee5e9c9644564e7b9235a4184",
      "filename": "ld/testsuite/ld-arm/arm-elf.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/arm-elf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/arm-elf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/arm-elf.exp?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -673,6 +673,9 @@ set armeabitests_nonacl {\n      {\"Armv8.1-M Mainline BFL\" \"-r -Ttext 0x1000 --section-start .foo=0x1001000\" \"\" \"-march=armv8.1-m.main\" {bfl.s}\n       {{objdump -dr bfl.d}}\n      \"bfl\"}\n+     {\"Armv8.1-M Mainline BFCSEL\" \"-r -Ttext 0x1000 --section-start .foo=0x1001000\" \"\" \"-march=armv8.1-m.main\" {bfcsel.s}\n+      {{objdump -dr bfcsel.d}}\n+     \"bfcsel\"}\n \n     {\"R_ARM_THM_JUMP24 Relocation veneers: Short 1\"\n      \"--no-fix-arm1176 --section-start destsect=0x00009000 --section-start .text=0x8000\" \"\""
    },
    {
      "sha": "914ea93cec431126613bf6326f1446482fba95e0",
      "filename": "ld/testsuite/ld-arm/bfcsel.d",
      "status": "added",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/bfcsel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/bfcsel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/bfcsel.d?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -0,0 +1,18 @@\n+\n+.*:     file format elf32-.*arm\n+\n+\n+Disassembly of section .text:\n+\n+00001000 <_start>:\n+    1000:\tf101 e7ff \tbfcsel\t4, 1001000 <bar>, 6, eq\n+\t\t\t1000: R_ARM_THM_BF12\tbar\n+    1004:\t4623      \tmov\tr3, r4\n+    1006:\t4611      \tmov\tr1, r2\n+    1008:\td0ff      \tbeq.n\t100a <_start\\+0xa>\n+    100a:\t4613      \tmov\tr3, r2\n+\n+Disassembly of section .foo:\n+\n+01001000 <bar>:\n+ 1001000:\t4770      \tbx\tlr"
    },
    {
      "sha": "675e2ea1ae28b64663cd02411550670112dd91a2",
      "filename": "ld/testsuite/ld-arm/bfcsel.s",
      "status": "added",
      "additions": 25,
      "deletions": 0,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/bfcsel.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/ld/testsuite/ld-arm/bfcsel.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/testsuite/ld-arm/bfcsel.s?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -0,0 +1,25 @@\n+\t.global _start\n+\t.syntax unified\n+\n+@ We will place the section .text at 0x1000.\n+\n+\t.text\n+\t.thumb_func\n+\n+_start:\n+\tbfcsel .LB1, bar, .LB2, eq\n+\tmov r3, r4\n+\tmov r1, r2\n+.LB1:\n+\tbeq .LB2\n+.LB2:\n+\tmov r3, r2\n+\n+@ We will place the section .foo at 0x1001000.\n+\n+\t.section .foo, \"xa\"\n+\t.thumb_func\n+\n+bar:\n+\tbx lr\n+"
    },
    {
      "sha": "594e7aeab54241b510c3d1f9c8b2f09b5b37111f",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -1,3 +1,8 @@\n+2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n+\n+\t* arm-dis.c (thumb32_opcodes): New instruction bfcsel.\n+\t(print_insn_thumb32): Edit the switch case for %Z.\n+\n 2019-04-15  Sudakshina Das  <sudi.das@arm.com>\n \n \t* arm-dis.c (print_insn_thumb32): Updated to accept new %Z pattern."
    },
    {
      "sha": "988699668dd1cf885b9e51d63bf85b582dce4477",
      "filename": "opcodes/arm-dis.c",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f6b2b12db82f7b76c30ec389a67fbce5d2805323/opcodes/arm-dis.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f6b2b12db82f7b76c30ec389a67fbce5d2805323/opcodes/arm-dis.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/arm-dis.c?ref=f6b2b12db82f7b76c30ec389a67fbce5d2805323",
      "patch": "@@ -2758,6 +2758,8 @@ static const struct opcode32 thumb32_opcodes[] =\n     0xf000c001, 0xf800f001, \"bfl%c\\t%G, %Y\"},\n   {ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8_1M_MAIN),\n     0xf070e001, 0xf8f0f001, \"bflx%c\\t%G, %16-19S\"},\n+  {ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8_1M_MAIN),\n+    0xf000e001, 0xf840f001, \"bfcsel\\t%G, %Z, %18-21c\"},\n \n \n   /* ARMv8-M and ARMv8-M Security Extensions instructions.  */\n@@ -5933,6 +5935,12 @@ print_insn_thumb32 (bfd_vma pc, struct disassemble_info *info, long given)\n \t\t  offset = (offset & 0x1000) ? offset - (1 << 13) : offset;\n \n \t\t  info->print_address_func (pc + 4 + offset, info);\n+\n+\t\t  unsigned int T    = (given & 0x00020000u) >> 17;\n+\t\t  unsigned int endoffset = (((given & 0x07800000) >> 23) << 1);\n+\t\t  unsigned int boffset   = (T == 1) ? 4 : 2;\n+\t\t  func (stream, \", \");\n+\t\t  func (stream, \"%x\", endoffset + boffset);\n \t\t}\n \t\tbreak;\n "
    }
  ]
}