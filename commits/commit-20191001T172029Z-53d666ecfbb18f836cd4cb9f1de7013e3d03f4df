{
  "sha": "53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTNkNjY2ZWNmYmIxOGY4MzZjZDRjYjlmMWRlNzAxM2UzZDAzZjRkZg==",
  "commit": {
    "author": {
      "name": "Andreas Arnez",
      "email": "arnez@linux.ibm.com",
      "date": "2019-10-01T17:20:29Z"
    },
    "committer": {
      "name": "Andreas Arnez",
      "email": "arnez@linux.ibm.com",
      "date": "2019-10-01T17:20:29Z"
    },
    "message": "gdb/testsuite: Fix pretty-print.exp on big-endian platforms\n\nThe pretty-print test case fails on s390/s390x because it relies on a\nlittle-endian representation of bit fields.  Little-endian architectures\ntypically allocate bit fields from least to most significant bit, but\nbig-endian architectures typically use the reverse order, allocating the\nmost significant bit first.  Thus the two bit fields in each of the test\ncase's unions overlap either in their lower or in their higher bits,\ndepending on the target's endianness:\n\n    union {\n      int three : 3;\n      int four : 4;\n    };\n\nNow, when initializing 'three' with 3, 'four' will become 3 on little\nendian targets, but 6 on big-endian targets, making it FAIL there.\n\nFix this by initializing the longer bit field instead and using an\nall-ones bit pattern.  In this way the result does not depend on\nendianness.  Use 'unsigned' instead of int for one of the bit fields in\neach of the unions, to increase the variety of resulting values.\n\ngdb/testsuite/ChangeLog:\n\n\t* gdb.base/pretty-print.c (struct s1_t): Change fields 'three' and\n\t'six' to unsigned.\n\t(s1): Initialize fields 'four' and 'six' instead of 'three' and\n\t'five'.  Use an all-ones bit pattern for each.\n\t* gdb.base/pretty-print.exp: Adjust expected output of \"print s1\"\n\tto its changed values.",
    "tree": {
      "sha": "ae21c076815689fb97ed05c7d6db2b69e2a97fad",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/ae21c076815689fb97ed05c7d6db2b69e2a97fad"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/comments",
  "author": {
    "login": "aarnez",
    "id": 32961398,
    "node_id": "MDQ6VXNlcjMyOTYxMzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/32961398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aarnez",
    "html_url": "https://github.com/aarnez",
    "followers_url": "https://api.github.com/users/aarnez/followers",
    "following_url": "https://api.github.com/users/aarnez/following{/other_user}",
    "gists_url": "https://api.github.com/users/aarnez/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aarnez/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aarnez/subscriptions",
    "organizations_url": "https://api.github.com/users/aarnez/orgs",
    "repos_url": "https://api.github.com/users/aarnez/repos",
    "events_url": "https://api.github.com/users/aarnez/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aarnez/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "aarnez",
    "id": 32961398,
    "node_id": "MDQ6VXNlcjMyOTYxMzk4",
    "avatar_url": "https://avatars.githubusercontent.com/u/32961398?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/aarnez",
    "html_url": "https://github.com/aarnez",
    "followers_url": "https://api.github.com/users/aarnez/followers",
    "following_url": "https://api.github.com/users/aarnez/following{/other_user}",
    "gists_url": "https://api.github.com/users/aarnez/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/aarnez/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/aarnez/subscriptions",
    "organizations_url": "https://api.github.com/users/aarnez/orgs",
    "repos_url": "https://api.github.com/users/aarnez/repos",
    "events_url": "https://api.github.com/users/aarnez/events{/privacy}",
    "received_events_url": "https://api.github.com/users/aarnez/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cd7c32c36ae53c00e9b0731c58de37dc28b88fb6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cd7c32c36ae53c00e9b0731c58de37dc28b88fb6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cd7c32c36ae53c00e9b0731c58de37dc28b88fb6"
    }
  ],
  "stats": {
    "total": 25,
    "additions": 18,
    "deletions": 7
  },
  "files": [
    {
      "sha": "1a20cdaa29511c51408c25865ab294ee927dff60",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
      "patch": "@@ -1,3 +1,12 @@\n+2019-10-01  Andreas Arnez  <arnez@linux.ibm.com>\n+\n+\t* gdb.base/pretty-print.c (struct s1_t): Change fields 'three' and\n+\t'six' to unsigned.\n+\t(s1): Initialize fields 'four' and 'six' instead of 'three' and\n+\t'five'.  Use an all-ones bit pattern for each.\n+\t* gdb.base/pretty-print.exp: Adjust expected output of \"print s1\"\n+\tto its changed values.\n+\n 2019-09-30  Tom Tromey  <tromey@adacore.com>\n \n \t* gdb.rust/traits.rs: Disable all warnings."
    },
    {
      "sha": "fe15b85464a816928ca177311cf0f18c49909407",
      "filename": "gdb/testsuite/gdb.base/pretty-print.c",
      "status": "modified",
      "additions": 5,
      "deletions": 3,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/gdb.base/pretty-print.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/gdb.base/pretty-print.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/pretty-print.c?ref=53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
      "patch": "@@ -23,16 +23,18 @@ struct s1_t\n   struct\n   {\n     union {\n-      int three : 3;\n+      unsigned three : 3;\n       int four : 4;\n     };\n \n     union {\n       int five : 3;\n-      int six : 4;\n+      unsigned six : 4;\n     };\n   } data;\n-} s1 = { .one = 1, .two = 2, .data = { .three = 3, .five = 5 } };\n+} s1 = { .one = 1, .two = 2,\n+\t /* Use all-ones bit patterns for endianness independence.  */\n+\t .data = { .four = -1, .six = 15 } };\n \n struct s2_t\n {"
    },
    {
      "sha": "02400e7615058ab24a055bc32536e4cfee41e3ea",
      "filename": "gdb/testsuite/gdb.base/pretty-print.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/gdb.base/pretty-print.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/53d666ecfbb18f836cd4cb9f1de7013e3d03f4df/gdb/testsuite/gdb.base/pretty-print.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/pretty-print.exp?ref=53d666ecfbb18f836cd4cb9f1de7013e3d03f4df",
      "patch": "@@ -36,12 +36,12 @@ gdb_test \"print s1\" \\\n \t \"  two = 2,\" \\\n \t \"  data = {\" \\\n \t \"    {\" \\\n-\t \"      three = 3,\" \\\n-\t \"      four = 3\" \\\n+\t \"      three = 7,\" \\\n+\t \"      four = -1\" \\\n \t \"    },\" \\\n \t \"    {\" \\\n-\t \"      five = -3,\" \\\n-\t \"      six = 5\" \\\n+\t \"      five = -1,\" \\\n+\t \"      six = 15\" \\\n \t \"    }\" \\\n \t \"  }\" \\\n \t \"}\" ]"
    }
  ]
}