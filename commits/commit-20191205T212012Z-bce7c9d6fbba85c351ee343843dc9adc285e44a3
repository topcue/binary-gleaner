{
  "sha": "bce7c9d6fbba85c351ee343843dc9adc285e44a3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YmNlN2M5ZDZmYmJhODVjMzUxZWUzNDM4NDNkYzlhZGMyODVlNDRhMw==",
  "commit": {
    "author": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2019-12-05T21:20:12Z"
    },
    "committer": {
      "name": "Sandra Loosemore",
      "email": "sandra@codesourcery.com",
      "date": "2019-12-05T21:20:12Z"
    },
    "message": "Only give FDE encoding warnings if --eh-frame-hdr was specified.\n\nThis bug was observed on nios2-linux-gnu with some C++ programs\nlinked with -pie or -shared.  The nios2 ABI doesn't include appropriate\nrelocations in this instance and GCC is also being patched not to pass\n--eh-frame-hdr to the linker in those cases.\n\n2019-12-05  Sandra Loosemore  <sandra@codesourcery.com>\n\n        bfd/\n        * elf-eh-frame.c (_bfd_elf_discard_section_eh_frame): Make\n        FDE encoding warning conditional.",
    "tree": {
      "sha": "04523c95a4a8546bbd9896dd64351b72ef79c792",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/04523c95a4a8546bbd9896dd64351b72ef79c792"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/bce7c9d6fbba85c351ee343843dc9adc285e44a3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bce7c9d6fbba85c351ee343843dc9adc285e44a3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/bce7c9d6fbba85c351ee343843dc9adc285e44a3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bce7c9d6fbba85c351ee343843dc9adc285e44a3/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "b858499daf0a824a518bac8bc13495ad856ab10d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b858499daf0a824a518bac8bc13495ad856ab10d",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b858499daf0a824a518bac8bc13495ad856ab10d"
    }
  ],
  "stats": {
    "total": 35,
    "additions": 23,
    "deletions": 12
  },
  "files": [
    {
      "sha": "c1bba0cac160406d9bd5300d64995ccbb42afe68",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bce7c9d6fbba85c351ee343843dc9adc285e44a3/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bce7c9d6fbba85c351ee343843dc9adc285e44a3/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=bce7c9d6fbba85c351ee343843dc9adc285e44a3",
      "patch": "@@ -1,3 +1,10 @@\n+2019-12-05  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\tOnly give FDE encoding warnings if --eh-frame-hdr was specified.\n+\n+\t* elf-eh-frame.c (_bfd_elf_discard_section_eh_frame): Make\n+\tFDE encoding warning conditional.\n+\n 2019-12-05  Nick Clifton  <nickc@redhat.com>\n \n \tPR 25029"
    },
    {
      "sha": "b622ffcee2aa1dbd8b875b7122d3f307eb118c13",
      "filename": "bfd/elf-eh-frame.c",
      "status": "modified",
      "additions": 16,
      "deletions": 12,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/bce7c9d6fbba85c351ee343843dc9adc285e44a3/bfd/elf-eh-frame.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/bce7c9d6fbba85c351ee343843dc9adc285e44a3/bfd/elf-eh-frame.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf-eh-frame.c?ref=bce7c9d6fbba85c351ee343843dc9adc285e44a3",
      "patch": "@@ -1532,19 +1532,23 @@ _bfd_elf_discard_section_eh_frame\n \t\t   don't create the binary search table,\n \t\t   since it is affected by runtime relocations.  */\n \t\thdr_info->u.dwarf.table = FALSE;\n-\t\tif (num_warnings_issued < 10)\n+\t\t/* Only warn if --eh-frame-hdr was specified.  */\n+\t\tif (info->eh_frame_hdr_type != 0)\n \t\t  {\n-\t\t    _bfd_error_handler\n-\t\t      /* xgettext:c-format */\n-\t\t      (_(\"FDE encoding in %pB(%pA) prevents .eh_frame_hdr\"\n-\t\t\t \" table being created\"), abfd, sec);\n-\t\t    num_warnings_issued ++;\n-\t\t  }\n-\t\telse if (num_warnings_issued == 10)\n-\t\t  {\n-\t\t    _bfd_error_handler\n-\t\t      (_(\"further warnings about FDE encoding preventing .eh_frame_hdr generation dropped\"));\n-\t\t    num_warnings_issued ++;\n+\t\t    if (num_warnings_issued < 10)\n+\t\t      {\n+\t\t\t_bfd_error_handler\n+\t\t\t  /* xgettext:c-format */\n+\t\t\t  (_(\"FDE encoding in %pB(%pA) prevents .eh_frame_hdr\"\n+\t\t\t     \" table being created\"), abfd, sec);\n+\t\t\tnum_warnings_issued ++;\n+\t\t      }\n+\t\t    else if (num_warnings_issued == 10)\n+\t\t      {\n+\t\t\t_bfd_error_handler\n+\t\t\t  (_(\"further warnings about FDE encoding preventing .eh_frame_hdr generation dropped\"));\n+\t\t\tnum_warnings_issued ++;\n+\t\t      }\n \t\t  }\n \t      }\n \t    ent->removed = 0;"
    }
  ]
}