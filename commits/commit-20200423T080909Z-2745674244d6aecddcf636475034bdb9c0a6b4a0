{
  "sha": "2745674244d6aecddcf636475034bdb9c0a6b4a0",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Mjc0NTY3NDI0NGQ2YWVjZGRjZjYzNjQ3NTAzNGJkYjljMGE2YjRhMA==",
  "commit": {
    "author": {
      "name": "Anton Kolesov",
      "email": "Anton.Kolesov@synopsys.com",
      "date": "2017-05-15T13:17:29Z"
    },
    "committer": {
      "name": "Claudiu Zissulescu",
      "email": "claziss@gmail.com",
      "date": "2020-04-23T08:09:09Z"
    },
    "message": "arc: Add support for ARC HS extra registers in core files\n\nWhen a coredump is generated, there are a few registers in\nARC HS that are put under a special section, namely \".reg-v2\".\nIt is for backward compatibility reasons with older tools that\nwe have decided not to extend the generic \".reg\" section.\n\nThis patch makes it possible to display the information better\nregarding that section.  Compare the output of \"readelf\" without\nand with these changes:\n\n$ readelf -n core     # without the patch\n  ...\n  LINUX    0x0000000c  Unknown note type: (0x00000600)\n   description data: 78 08 00 00 2f 6c 64 2d 75 43 6c 69\n\n$ readelf -n core     # with the patch\n  ...\n  LINUX    0x0000000c  NT_ARC_V2 (ARC HS accumulator/extra registers)\n   description data: 78 08 00 00 2f 6c 64 2d 75 43 6c 69\n\nIn another commit (soon to be submitted), GDB will makes use of these\nchanges to parse the extra section and its registers.\n\nbfd/ChangeLog\n2020-03-26  Anton Kolesov  <anton.kolesov@synopsys.com>\n\n\t* elf-bfd.h (elfcore_write_arc_v2): Add prototype.\n\t* elf.c (elfcore_grok_arc_v2): New function.\n\t(elfcore_grok_note): Call the new function to handle the corresponding\n\tnote.\n\t(elfcore_write_arc_v2): New function.\n\t(elfcore_write_register_note): Call the new function to handle the\n\tcorresponding pseudo-sections.\n\nbinutils/ChangeLog\n2020-03-26  Anton Kolesov  <anton.kolesov@synopsys.com>\n\n\t* readelf.c (get_note_type): Handle NT_ARC_V2.\n\ninclude/elf/ChangeLog\n2020-03-26  Anton Kolesov  <anton.kolesov@synopsys.com>\n\n\t* common.h (NT_ARC_V2): New macro definitions.",
    "tree": {
      "sha": "9dccc5b7f4444f1971361691119062f69c24c57c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9dccc5b7f4444f1971361691119062f69c24c57c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2745674244d6aecddcf636475034bdb9c0a6b4a0",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2745674244d6aecddcf636475034bdb9c0a6b4a0",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2745674244d6aecddcf636475034bdb9c0a6b4a0",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2745674244d6aecddcf636475034bdb9c0a6b4a0/comments",
  "author": {
    "login": "anthony-kolesov",
    "id": 602123,
    "node_id": "MDQ6VXNlcjYwMjEyMw==",
    "avatar_url": "https://avatars.githubusercontent.com/u/602123?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/anthony-kolesov",
    "html_url": "https://github.com/anthony-kolesov",
    "followers_url": "https://api.github.com/users/anthony-kolesov/followers",
    "following_url": "https://api.github.com/users/anthony-kolesov/following{/other_user}",
    "gists_url": "https://api.github.com/users/anthony-kolesov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/anthony-kolesov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/anthony-kolesov/subscriptions",
    "organizations_url": "https://api.github.com/users/anthony-kolesov/orgs",
    "repos_url": "https://api.github.com/users/anthony-kolesov/repos",
    "events_url": "https://api.github.com/users/anthony-kolesov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/anthony-kolesov/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "claziss",
    "id": 2761368,
    "node_id": "MDQ6VXNlcjI3NjEzNjg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/2761368?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/claziss",
    "html_url": "https://github.com/claziss",
    "followers_url": "https://api.github.com/users/claziss/followers",
    "following_url": "https://api.github.com/users/claziss/following{/other_user}",
    "gists_url": "https://api.github.com/users/claziss/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/claziss/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/claziss/subscriptions",
    "organizations_url": "https://api.github.com/users/claziss/orgs",
    "repos_url": "https://api.github.com/users/claziss/repos",
    "events_url": "https://api.github.com/users/claziss/events{/privacy}",
    "received_events_url": "https://api.github.com/users/claziss/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "96038148d0e9f7dc89284310d065e27a3fa375f2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/96038148d0e9f7dc89284310d065e27a3fa375f2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/96038148d0e9f7dc89284310d065e27a3fa375f2"
    }
  ],
  "stats": {
    "total": 57,
    "additions": 57,
    "deletions": 0
  },
  "files": [
    {
      "sha": "c81b97b11e074960ed4528e15be3989a4cb316f9",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -1,3 +1,13 @@\n+2020-04-23  Anton Kolesov  <anton.kolesov@synopsys.com>\n+\n+\t* elf-bfd.h (elfcore_write_arc_v2): Add prototype.\n+\t* elf.c (elfcore_grok_arc_v2): New function.\n+\t(elfcore_grok_note): Call the new function to handle the corresponding\n+\tnote.\n+\t(elfcore_write_arc_v2): New function.\n+\t(elfcore_write_register_note): Call the new function to handle the\n+\tcorresponding pseudo-sections.\n+\n 2020-04-22  Max Filippov  <jcmvbkbc@gmail.com>\n \n \tPR ld/25861"
    },
    {
      "sha": "e69234d2ddec521cbcac925fb2690a908893a3b1",
      "filename": "bfd/elf-bfd.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/elf-bfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/elf-bfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf-bfd.h?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -2738,6 +2738,8 @@ extern char *elfcore_write_aarch_sve\n   (bfd *, char *, int *, const void *, int);\n extern char *elfcore_write_aarch_pauth\n   (bfd *, char *, int *, const void *, int);\n+extern char *elfcore_write_arc_v2\n+  (bfd *, char *, int *, const void *, int);\n extern char *elfcore_write_lwpstatus\n   (bfd *, char *, int *, long, int, const void *);\n extern char *elfcore_write_register_note"
    },
    {
      "sha": "e9c525974bbf9c347f6544bb41111e894e1c5fe1",
      "filename": "bfd/elf.c",
      "status": "modified",
      "additions": 27,
      "deletions": 0,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/bfd/elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf.c?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -9865,6 +9865,12 @@ elfcore_grok_aarch_pauth (bfd *abfd, Elf_Internal_Note *note)\n   return elfcore_make_note_pseudosection (abfd, \".reg-aarch-pauth\", note);\n }\n \n+static bfd_boolean\n+elfcore_grok_arc_v2 (bfd *abfd, Elf_Internal_Note *note)\n+{\n+  return elfcore_make_note_pseudosection (abfd, \".reg-arc-v2\", note);\n+}\n+\n #if defined (HAVE_PRPSINFO_T)\n typedef prpsinfo_t   elfcore_psinfo_t;\n #if defined (HAVE_PRPSINFO32_T)\t\t/* Sparc64 cross Sparc32 */\n@@ -10424,6 +10430,13 @@ elfcore_grok_note (bfd *abfd, Elf_Internal_Note *note)\n       else\n \treturn TRUE;\n \n+    case NT_ARC_V2:\n+      if (note->namesz == 6\n+\t  && strcmp (note->namedata, \"LINUX\") == 0)\n+\treturn elfcore_grok_arc_v2 (abfd, note);\n+      else\n+\treturn TRUE;\n+\n     case NT_ARM_VFP:\n       if (note->namesz == 6\n \t  && strcmp (note->namedata, \"LINUX\") == 0)\n@@ -11835,6 +11848,18 @@ elfcore_write_aarch_pauth (bfd *abfd,\n \t\t\t     note_name, NT_ARM_PAC_MASK, aarch_pauth, size);\n }\n \n+char *\n+elfcore_write_arc_v2 (bfd *abfd,\n+\t\t      char *buf,\n+\t\t      int *bufsiz,\n+\t\t      const void *arc_v2,\n+\t\t      int size)\n+{\n+  char *note_name = \"LINUX\";\n+  return elfcore_write_note (abfd, buf, bufsiz,\n+\t\t\t     note_name, NT_ARC_V2, arc_v2, size);\n+}\n+\n char *\n elfcore_write_register_note (bfd *abfd,\n \t\t\t     char *buf,\n@@ -11917,6 +11942,8 @@ elfcore_write_register_note (bfd *abfd,\n     return elfcore_write_aarch_sve (abfd, buf, bufsiz, data, size);\n   if (strcmp (section, \".reg-aarch-pauth\") == 0)\n     return elfcore_write_aarch_pauth (abfd, buf, bufsiz, data, size);\n+  if (strcmp (section, \".reg-arc-v2\") == 0)\n+    return elfcore_write_arc_v2 (abfd, buf, bufsiz, data, size);\n   return NULL;\n }\n "
    },
    {
      "sha": "7f7e34020df8dd9c782ba0cde2224fc6fbfd64af",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -1,3 +1,13 @@\n+2020-04-23  Anton Kolesov  <anton.kolesov@synopsys.com>\n+\n+\t* elf-bfd.h (elfcore_write_arc_v2): Add prototype.\n+\t* elf.c (elfcore_grok_arc_v2): New function.\n+\t(elfcore_grok_note): Call the new function to handle the corresponding\n+\tnote.\n+\t(elfcore_write_arc_v2): New function.\n+\t(elfcore_write_register_note): Call the new function to handle the\n+\tcorresponding pseudo-sections.\n+\n 2020-04-22  Max Filippov  <jcmvbkbc@gmail.com>\n \n \tPR ld/25861"
    },
    {
      "sha": "f3e374dc549a6e18669ac21209c09358a5b4c21d",
      "filename": "binutils/readelf.c",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/binutils/readelf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/binutils/readelf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/readelf.c?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -17642,6 +17642,8 @@ get_note_type (Filedata * filedata, unsigned e_type)\n \treturn _(\"NT_ARM_HW_BREAK (AArch hardware breakpoint registers)\");\n       case NT_ARM_HW_WATCH:\n \treturn _(\"NT_ARM_HW_WATCH (AArch hardware watchpoint registers)\");\n+      case NT_ARC_V2:\n+\treturn _(\"NT_ARC_V2 (ARC HS accumulator/extra registers)\");\n       case NT_PSTATUS:\n \treturn _(\"NT_PSTATUS (pstatus structure)\");\n       case NT_FPREGS:"
    },
    {
      "sha": "eea127a3c85b200de11d845b99f96f69aedc6591",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -1,3 +1,7 @@\n+2020-04-23  Anton Kolesov  <anton.kolesov@synopsys.com>\n+\n+\t* elf/common.h (NT_ARC_V2): New macro definitions.\n+\n 2020-04-22  Max Filippov  <jcmvbkbc@gmail.com>\n \n \tPR ld/25861"
    },
    {
      "sha": "26e6fbc8e6882c26d90a7186c7f5c22de6d8456d",
      "filename": "include/elf/common.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2745674244d6aecddcf636475034bdb9c0a6b4a0/include/elf/common.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2745674244d6aecddcf636475034bdb9c0a6b4a0/include/elf/common.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/elf/common.h?ref=2745674244d6aecddcf636475034bdb9c0a6b4a0",
      "patch": "@@ -652,6 +652,8 @@\n \t\t\t\t\t/*   note name must be \"LINUX\".  */\n #define NT_ARM_PAC_MASK\t0x406\t\t/* AArch pointer authentication code masks */\n \t\t\t\t\t/*   note name must be \"LINUX\".  */\n+#define NT_ARC_V2\t0x600\t\t/* ARC HS accumulator/extra registers.  */\n+\t\t\t\t\t/*   note name must be \"LINUX\".  */\n #define NT_SIGINFO\t0x53494749\t/* Fields of siginfo_t.  */\n #define NT_FILE\t\t0x46494c45\t/* Description of mapped files.  */\n "
    }
  ]
}