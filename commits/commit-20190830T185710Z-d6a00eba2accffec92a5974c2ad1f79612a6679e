{
  "sha": "d6a00eba2accffec92a5974c2ad1f79612a6679e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZDZhMDBlYmEyYWNjZmZlYzkyYTU5NzRjMmFkMWY3OTYxMmE2Njc5ZQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-07-18T20:38:39Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-30T18:57:10Z"
    },
    "message": "Remove tui_win_info::refresh_all\n\nThe TUI has two duplicate \"re-render this window\" methods, \"rerender\"\nand \"refresh_all\".  They differ only slightly in semantics, so I\nwanted to see if they could be unified.\n\nAfter looking into this, I decided that refresh_all was not needed.\nThere are 4 calls to tui_refresh_all_win (the only caller of this\nmethod):\n\n1. tui_enable.  This sets the layout, which renders the windows.\n\n2. tui_cont_sig.  Here, I think it's sufficient to simply redraw the\n   current window contents from the curses backing store, because gdb\n   state didn't change while it was suspended\n\n3. tui_dispatch_ctrl_char.  This is the C-l handler, and here it's\n   explicitly enough to just refresh the screen (as above).\n\n4. tui_refresh_all_command.  This is the command equivalent of C-l.\n\nSo, this patch removes this method entirely and simplifies\ntui_refresh_all_win.\n\ngdb/ChangeLog\n2019-08-30  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-winsource.h (struct tui_source_window_base)\n\t<refresh_all>: Don't declare.\n\t* tui/tui-winsource.c (tui_source_window_base::refresh_all):\n\tRemove.\n\t* tui/tui-win.c (tui_refresh_all_win): Don't call refresh_all or\n\ttui_show_locator_content.\n\t* tui/tui-regs.h (struct tui_data_window) <refresh_all>: Don't\n\tdeclare.\n\t* tui/tui-regs.c (tui_data_window::refresh_all): Remove.\n\t* tui/tui-data.h (struct tui_win_info) <refresh_all>: Don't\n\tdeclare.",
    "tree": {
      "sha": "2319ac6eea7c7d8adc469d7f2ada9ea0abc2b17e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2319ac6eea7c7d8adc469d7f2ada9ea0abc2b17e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/d6a00eba2accffec92a5974c2ad1f79612a6679e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d6a00eba2accffec92a5974c2ad1f79612a6679e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/d6a00eba2accffec92a5974c2ad1f79612a6679e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d6a00eba2accffec92a5974c2ad1f79612a6679e/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "55b2657bdc4f9494c13f5b6f69dd7f67d72275c0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55b2657bdc4f9494c13f5b6f69dd7f67d72275c0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/55b2657bdc4f9494c13f5b6f69dd7f67d72275c0"
    }
  ],
  "stats": {
    "total": 63,
    "additions": 14,
    "deletions": 49
  },
  "files": [
    {
      "sha": "2cc7b5809e23b7a2f17027d0f74e45dbcdaf8602",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -1,3 +1,17 @@\n+2019-08-30  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-winsource.h (struct tui_source_window_base)\n+\t<refresh_all>: Don't declare.\n+\t* tui/tui-winsource.c (tui_source_window_base::refresh_all):\n+\tRemove.\n+\t* tui/tui-win.c (tui_refresh_all_win): Don't call refresh_all or\n+\ttui_show_locator_content.\n+\t* tui/tui-regs.h (struct tui_data_window) <refresh_all>: Don't\n+\tdeclare.\n+\t* tui/tui-regs.c (tui_data_window::refresh_all): Remove.\n+\t* tui/tui-data.h (struct tui_win_info) <refresh_all>: Don't\n+\tdeclare.\n+\n 2019-08-30  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-io.c (tui_cont_sig): Don't call wrefresh."
    },
    {
      "sha": "23f769f6ba578e64c82a506784b3d9b6b0aad046",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -162,12 +162,6 @@ struct tui_win_info : public tui_gen_win_info\n   {\n   }\n \n-  /* Called after all the TUI windows are refreshed, to let this\n-     window have a chance to update itself further.  */\n-  virtual void refresh_all ()\n-  {\n-  }\n-\n   /* Compute the maximum height of this window.  */\n   virtual int max_height () const;\n "
    },
    {
      "sha": "48e78fc9dbc14755ee85e551fd299e7d64b0d56f",
      "filename": "gdb/tui/tui-regs.c",
      "status": "modified",
      "additions": 0,
      "deletions": 23,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-regs.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-regs.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.c?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -403,29 +403,6 @@ tui_data_window::rerender ()\n }\n \n \n-/* Function to redisplay the contents of the data window.  */\n-void\n-tui_data_window::refresh_all ()\n-{\n-  erase_data_content (NULL);\n-  if (!regs_content.empty ())\n-    {\n-      int first_element = first_data_item_displayed ();\n-\n-      if (first_element >= 0)\t/* Re-use existing windows.  */\n-\t{\n-\t  int first_line = (-1);\n-\n-\t  if (first_element < regs_content.size ())\n-\t    first_line = line_from_reg_element_no (first_element);\n-\n-\t  if (first_line >= 0)\n-\t    display_registers_from_line (first_line);\n-\t}\n-    }\n-}\n-\n-\n /* Scroll the data window vertically forward or backward.  */\n void\n tui_data_window::do_scroll_vertical (int num_to_scroll)"
    },
    {
      "sha": "abf44c88b68ce67f6bc7673b6ce2bb26600f52eb",
      "filename": "gdb/tui/tui-regs.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-regs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-regs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-regs.h?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -58,8 +58,6 @@ struct tui_data_window : public tui_win_info\n \n   DISABLE_COPY_AND_ASSIGN (tui_data_window);\n \n-  void refresh_all () override;\n-\n   void refresh_window () override;\n \n   const char *name () const override"
    },
    {
      "sha": "8d41372cf901c20c82fe0c5aeb49fcd8b9474ec1",
      "filename": "gdb/tui/tui-win.c",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-win.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-win.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-win.c?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -504,12 +504,6 @@ tui_refresh_all_win (void)\n {\n   clearok (curscr, TRUE);\n   tui_refresh_all ();\n-  for (tui_win_info *win_info : all_tui_windows ())\n-    {\n-      if (win_info->is_visible ())\n-\twin_info->refresh_all ();\n-    }\n-  tui_show_locator_content ();\n }\n \n void"
    },
    {
      "sha": "7a4821dc52c7495f94b0d54bd150dba65f00a998",
      "filename": "gdb/tui/tui-winsource.c",
      "status": "modified",
      "additions": 0,
      "deletions": 10,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-winsource.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-winsource.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-winsource.c?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -280,16 +280,6 @@ tui_source_window_base::~tui_source_window_base ()\n \n /* See tui-data.h.  */\n \n-void\n-tui_source_window_base::refresh_all ()\n-{\n-  show_source_content ();\n-  check_and_display_highlight_if_needed ();\n-  update_exec_info ();\n-}\n-\n-/* See tui-data.h.  */\n-\n void\n tui_source_window_base::update_tab_width ()\n {"
    },
    {
      "sha": "4c98ca3ceb29cf0d6136e59c3fbdf4e335683cad",
      "filename": "gdb/tui/tui-winsource.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-winsource.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/d6a00eba2accffec92a5974c2ad1f79612a6679e/gdb/tui/tui-winsource.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-winsource.h?ref=d6a00eba2accffec92a5974c2ad1f79612a6679e",
      "patch": "@@ -103,8 +103,6 @@ struct tui_source_window_base : public tui_win_info\n \n   void clear_detail ();\n \n-  void refresh_all () override;\n-\n   /* Refill the source window's source cache and update it.  If this\n      is a disassembly window, then just update it.  */\n   void refill ();"
    }
  ]
}