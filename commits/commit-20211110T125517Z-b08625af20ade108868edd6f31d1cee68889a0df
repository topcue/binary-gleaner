{
  "sha": "b08625af20ade108868edd6f31d1cee68889a0df",
  "node_id": "C_kwDOANOeidoAKGIwODYyNWFmMjBhZGUxMDg4NjhlZGQ2ZjMxZDFjZWU2ODg4OWEwZGY",
  "commit": {
    "author": {
      "name": "Cl\u00e9ment Chigot",
      "email": "clement.chigot@atos.net",
      "date": "2021-11-10T12:35:07Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-11-10T12:55:17Z"
    },
    "message": "gdb: adjust x_file fields on COFF readers\n\nCommit e86fc4a5bc37 (\"PR 28447: implement multiple parameters for .file\non XCOFF\") changes the structure associated to the internal\nrepresentation of files in COFF formats.  However, gdb directory update\nhas been forgotten, leading to compilation errors of this kind:\n\n      CXX    coffread.o\n    /home/simark/src/binutils-gdb/gdb/coffread.c: In function 'const char* coff_getfilename(internal_auxent*)':\n    /home/simark/src/binutils-gdb/gdb/coffread.c:1343:29: error: 'union internal_auxent::<unnamed struct>::<unnamed>' has no member named 'x_zeroes'\n     1343 |   if (aux_entry->x_file.x_n.x_zeroes == 0)\n          |                             ^~~~~~~~\n\nFix it by adjusting the COFF code in GDB.\n\nChange-Id: I703fa134bc722d47515efbd72b88fa5650af6c3c",
    "tree": {
      "sha": "2a74a23fbe6f8f6015cdbe16c8cc8a6d677feab3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2a74a23fbe6f8f6015cdbe16c8cc8a6d677feab3"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b08625af20ade108868edd6f31d1cee68889a0df",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b08625af20ade108868edd6f31d1cee68889a0df",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b08625af20ade108868edd6f31d1cee68889a0df",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b08625af20ade108868edd6f31d1cee68889a0df/comments",
  "author": {
    "login": "Helflym",
    "id": 23002587,
    "node_id": "MDQ6VXNlcjIzMDAyNTg3",
    "avatar_url": "https://avatars.githubusercontent.com/u/23002587?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Helflym",
    "html_url": "https://github.com/Helflym",
    "followers_url": "https://api.github.com/users/Helflym/followers",
    "following_url": "https://api.github.com/users/Helflym/following{/other_user}",
    "gists_url": "https://api.github.com/users/Helflym/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Helflym/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Helflym/subscriptions",
    "organizations_url": "https://api.github.com/users/Helflym/orgs",
    "repos_url": "https://api.github.com/users/Helflym/repos",
    "events_url": "https://api.github.com/users/Helflym/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Helflym/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7cfa8d93cbbe16424fe2190cb3d27fc94c59f39b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7cfa8d93cbbe16424fe2190cb3d27fc94c59f39b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7cfa8d93cbbe16424fe2190cb3d27fc94c59f39b"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 7,
    "deletions": 7
  },
  "files": [
    {
      "sha": "4723662f14088d80a313e85cb12c6032f0303123",
      "filename": "gdb/coffread.c",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b08625af20ade108868edd6f31d1cee68889a0df/gdb/coffread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b08625af20ade108868edd6f31d1cee68889a0df/gdb/coffread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/coffread.c?ref=b08625af20ade108868edd6f31d1cee68889a0df",
      "patch": "@@ -1340,15 +1340,15 @@ coff_getfilename (union internal_auxent *aux_entry)\n   static char buffer[BUFSIZ];\n   const char *result;\n \n-  if (aux_entry->x_file.x_n.x_zeroes == 0)\n+  if (aux_entry->x_file.x_n.x_n.x_zeroes == 0)\n     {\n-      if (strlen (stringtab + aux_entry->x_file.x_n.x_offset) >= BUFSIZ)\n+      if (strlen (stringtab + aux_entry->x_file.x_n.x_n.x_offset) >= BUFSIZ)\n \tinternal_error (__FILE__, __LINE__, _(\"coff file name too long\"));\n-      strcpy (buffer, stringtab + aux_entry->x_file.x_n.x_offset);\n+      strcpy (buffer, stringtab + aux_entry->x_file.x_n.x_n.x_offset);\n     }\n   else\n     {\n-      strncpy (buffer, aux_entry->x_file.x_fname, FILNMLEN);\n+      strncpy (buffer, aux_entry->x_file.x_n.x_fname, FILNMLEN);\n       buffer[FILNMLEN] = '\\0';\n     }\n   result = buffer;"
    },
    {
      "sha": "067f6fecdb8f0f3c00b923c5bb5836b974aef922",
      "filename": "gdb/xcoffread.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b08625af20ade108868edd6f31d1cee68889a0df/gdb/xcoffread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b08625af20ade108868edd6f31d1cee68889a0df/gdb/xcoffread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xcoffread.c?ref=b08625af20ade108868edd6f31d1cee68889a0df",
      "patch": "@@ -1678,12 +1678,12 @@ coff_getfilename (union internal_auxent *aux_entry, struct objfile *objfile)\n {\n   static char buffer[BUFSIZ];\n \n-  if (aux_entry->x_file.x_n.x_zeroes == 0)\n+  if (aux_entry->x_file.x_n.x_n.x_zeroes == 0)\n     strcpy (buffer, (XCOFF_DATA (objfile)->strtbl\n-\t\t     + aux_entry->x_file.x_n.x_offset));\n+\t\t     + aux_entry->x_file.x_n.x_n.x_offset));\n   else\n     {\n-      strncpy (buffer, aux_entry->x_file.x_fname, FILNMLEN);\n+      strncpy (buffer, aux_entry->x_file.x_n.x_fname, FILNMLEN);\n       buffer[FILNMLEN] = '\\0';\n     }\n   return (buffer);"
    }
  ]
}