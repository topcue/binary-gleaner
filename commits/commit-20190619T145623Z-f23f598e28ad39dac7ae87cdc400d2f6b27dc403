{
  "sha": "f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjIzZjU5OGUyOGFkMzlkYWM3YWU4N2NkYzQwMGQyZjZiMjdkYzQwMw==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-06-19T14:56:23Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-06-19T14:56:23Z"
    },
    "message": "[gdb] Fix build breaker with gcc 4.8\n\nWhen compiling with gcc 4.8, we run into:\n...\n/usr/include/c++/4.8/bits/unordered_map.h:100:18: required from \\\n  \u2018class std::unordered_map<sect_offset, std::vector<sect_offset> >\u2019\nsrc/gdb/dwarf2read.h:260:5:   required from here\n/usr/include/c++/4.8/bits/hashtable_policy.h:1070:12: error: invalid use of \\\n  incomplete type \u2018struct std::hash<sect_offset>\u2019\n...\n\nFix this by setting the Hash template parameter of the unordered_map to\ngdb::hash_enum<sect_offset>, rather than using the default\nstd::hash<sect_offset>.\n\nBuild and reg-tested on x86_64-linux with gcc 4.8.\n\ngdb/ChangeLog:\n\n2019-06-19  Tom de Vries  <tdevries@suse.de>\n\n\t* dwarf2read.h (abstract_to_concrete): Change type to\n\tstd::unordered_map<sect_offset, std::vector<sect_offset>,\n\tgdb::hash_enum<sect_offset>>.",
    "tree": {
      "sha": "165982abd499ac693d17328fd8293f5a01f3e569",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/165982abd499ac693d17328fd8293f5a01f3e569"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f23f598e28ad39dac7ae87cdc400d2f6b27dc403/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "899277ae529c2b743d22093fcc1a9e46aff4422a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/899277ae529c2b743d22093fcc1a9e46aff4422a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/899277ae529c2b743d22093fcc1a9e46aff4422a"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 9,
    "deletions": 1
  },
  "files": [
    {
      "sha": "0937823a3298db23fe50f97c6821c59a4235f5bb",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f23f598e28ad39dac7ae87cdc400d2f6b27dc403/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f23f598e28ad39dac7ae87cdc400d2f6b27dc403/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
      "patch": "@@ -1,3 +1,9 @@\n+2019-06-19  Tom de Vries  <tdevries@suse.de>\n+\n+\t* dwarf2read.h (abstract_to_concrete): Change type to\n+\tstd::unordered_map<sect_offset, std::vector<sect_offset>,\n+\tgdb::hash_enum<sect_offset>>.\n+\n 2019-06-19  Tom Tromey  <tromey@adacore.com>\n \n \t* ada-lang.c (ada_evaluate_subexp) <case OP_ATR_FIRST>: Handle"
    },
    {
      "sha": "7113cfd3848252e12dac0ac6fb40b05016c3fa8d",
      "filename": "gdb/dwarf2read.h",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f23f598e28ad39dac7ae87cdc400d2f6b27dc403/gdb/dwarf2read.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f23f598e28ad39dac7ae87cdc400d2f6b27dc403/gdb/dwarf2read.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2read.h?ref=f23f598e28ad39dac7ae87cdc400d2f6b27dc403",
      "patch": "@@ -24,6 +24,7 @@\n #include \"dwarf-index-cache.h\"\n #include \"filename-seen-cache.h\"\n #include \"gdb_obstack.h\"\n+#include \"common/hash_enum.h\"\n \n /* Hold 'maintenance (set|show) dwarf' commands.  */\n extern struct cmd_list_element *set_dwarf_cmdlist;\n@@ -256,7 +257,8 @@ struct dwarf2_per_objfile\n \n   /* Mapping from abstract origin DIE to concrete DIEs that reference it as\n      DW_AT_abstract_origin.  */\n-  std::unordered_map<sect_offset, std::vector<sect_offset>>\n+  std::unordered_map<sect_offset, std::vector<sect_offset>, \\\n+\t\t     gdb::hash_enum<sect_offset>> \\\n     abstract_to_concrete;\n };\n "
    }
  ]
}