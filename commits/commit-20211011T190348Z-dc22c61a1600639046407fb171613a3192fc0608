{
  "sha": "dc22c61a1600639046407fb171613a3192fc0608",
  "node_id": "C_kwDOANOeidoAKGRjMjJjNjFhMTYwMDYzOTA0NjQwN2ZiMTcxNjEzYTMxOTJmYzA2MDg",
  "commit": {
    "author": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-10-04T12:34:50Z"
    },
    "committer": {
      "name": "Luis Machado",
      "email": "luis.machado@linaro.org",
      "date": "2021-10-11T19:03:48Z"
    },
    "message": "[ARM] Small refactoring of arm gdbarch initialization\n\nThis is in preparation to MVE support, where we will define another\npseudo register. We need to define the pseudo register numbers *after*\naccounting for all the registers in the XML description, so move\nthe call to tdesc_use_registers up.\n\nIf we don't do it, GDB's register count won't consider registers contained\nin the XML but ignored by GDB, throwing the register numbering off.",
    "tree": {
      "sha": "3d11e6fa9e78419f380360dc47a1b7044bda26b1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3d11e6fa9e78419f380360dc47a1b7044bda26b1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/dc22c61a1600639046407fb171613a3192fc0608",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dc22c61a1600639046407fb171613a3192fc0608",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/dc22c61a1600639046407fb171613a3192fc0608",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dc22c61a1600639046407fb171613a3192fc0608/comments",
  "author": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "luislinaro",
    "id": 53092780,
    "node_id": "MDQ6VXNlcjUzMDkyNzgw",
    "avatar_url": "https://avatars.githubusercontent.com/u/53092780?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luislinaro",
    "html_url": "https://github.com/luislinaro",
    "followers_url": "https://api.github.com/users/luislinaro/followers",
    "following_url": "https://api.github.com/users/luislinaro/following{/other_user}",
    "gists_url": "https://api.github.com/users/luislinaro/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luislinaro/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luislinaro/subscriptions",
    "organizations_url": "https://api.github.com/users/luislinaro/orgs",
    "repos_url": "https://api.github.com/users/luislinaro/repos",
    "events_url": "https://api.github.com/users/luislinaro/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luislinaro/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4d224f4a589689449677e9c500cf12bee8283a3b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4d224f4a589689449677e9c500cf12bee8283a3b",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4d224f4a589689449677e9c500cf12bee8283a3b"
    }
  ],
  "stats": {
    "total": 22,
    "additions": 11,
    "deletions": 11
  },
  "files": [
    {
      "sha": "2a6bfb1b3f770ae743e1124e14be0491f25cecac",
      "filename": "gdb/arm-tdep.c",
      "status": "modified",
      "additions": 11,
      "deletions": 11,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/dc22c61a1600639046407fb171613a3192fc0608/gdb/arm-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/dc22c61a1600639046407fb171613a3192fc0608/gdb/arm-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arm-tdep.c?ref=dc22c61a1600639046407fb171613a3192fc0608",
      "patch": "@@ -9470,6 +9470,17 @@ arm_gdbarch_init (struct gdbarch_info info, struct gdbarch_list *arches)\n       set_gdbarch_long_double_format (gdbarch, floatformats_ieee_double);\n     }\n \n+  if (tdesc_data != nullptr)\n+    {\n+      set_tdesc_pseudo_register_name (gdbarch, arm_register_name);\n+\n+      tdesc_use_registers (gdbarch, tdesc, std::move (tdesc_data));\n+\n+      /* Override tdesc_register_type to adjust the types of VFP\n+\t registers for NEON.  */\n+      set_gdbarch_register_type (gdbarch, arm_register_type);\n+    }\n+\n   if (have_vfp_pseudos)\n     {\n       /* NOTE: These are the only pseudo registers used by\n@@ -9484,17 +9495,6 @@ arm_gdbarch_init (struct gdbarch_info info, struct gdbarch_list *arches)\n       set_gdbarch_pseudo_register_write (gdbarch, arm_pseudo_write);\n     }\n \n-  if (tdesc_data != nullptr)\n-    {\n-      set_tdesc_pseudo_register_name (gdbarch, arm_register_name);\n-\n-      tdesc_use_registers (gdbarch, tdesc, std::move (tdesc_data));\n-\n-      /* Override tdesc_register_type to adjust the types of VFP\n-\t registers for NEON.  */\n-      set_gdbarch_register_type (gdbarch, arm_register_type);\n-    }\n-\n   /* Add standard register aliases.  We add aliases even for those\n      names which are used by the current architecture - it's simpler,\n      and does no harm, since nothing ever lists user registers.  */"
    }
  ]
}