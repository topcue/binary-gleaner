{
  "sha": "6ff9675421809af862db5b86d3756ddf4aef568f",
  "node_id": "C_kwDOANOeidoAKDZmZjk2NzU0MjE4MDlhZjg2MmRiNWI4NmQzNzU2ZGRmNGFlZjU2OGY",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-11-25T06:49:16Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2021-11-25T06:49:16Z"
    },
    "message": "[gdb/cli] Add \"set logging enabled\", deprecate \"set logging on/off\"\n\nBefore commit 3b6acaee895 \"Update more calls to add_prefix_cmd\" we had the\nfollowing output for \"show logging file\":\n...\n$ gdb -q -batch -ex \"set trace-commands on\" \\\n    -ex \"set logging off\" \\\n    -ex \"show logging file\" \\\n    -ex \"set logging on\" \\\n    -ex \"show logging file\"\n+set logging off\n+show logging file\nFuture logs will be written to gdb.txt.\n+set logging on\n+show logging file\nCurrently logging to \"gdb.txt\".\n...\n\nAfter that commit we have instead:\n...\n+set logging off\n+show logging file\nThe current logfile is \"gdb.txt\".\n+set logging on\n+show logging file\nThe current logfile is \"gdb.txt\".\n...\n\nBefore the commit, whether logging is enabled or not can be deduced from the\noutput of the command.  After the commit, the message is unified and it's no\nlonger clear whether logging is enabled or not.\n\nFix this by:\n- adding a new command \"show logging enabled\"\n- adding a corresponding new command \"set logging enabled on/off\"\n- making the commands \"set logging on/off\" deprecated aliases of the\n  \"set logging enabled on/off\" command.\n\nUpdate the docs and testsuite to use \"set logging enabled\".  Mention the new\nand deprecated commands in NEWS.\n\nTested on x86_64-linux.",
    "tree": {
      "sha": "bde802e8c32117bb05e220012683003dd473fca9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bde802e8c32117bb05e220012683003dd473fca9"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6ff9675421809af862db5b86d3756ddf4aef568f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6ff9675421809af862db5b86d3756ddf4aef568f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6ff9675421809af862db5b86d3756ddf4aef568f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6ff9675421809af862db5b86d3756ddf4aef568f/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0a4a1c6a3b46731c228431d5bd29181e0d2107c2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0a4a1c6a3b46731c228431d5bd29181e0d2107c2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0a4a1c6a3b46731c228431d5bd29181e0d2107c2"
    }
  ],
  "stats": {
    "total": 123,
    "additions": 89,
    "deletions": 34
  },
  "files": [
    {
      "sha": "b0e4cce72ee6ba25139bad5cd714341961527324",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -32,6 +32,13 @@ maint show internal-warning backtrace\n   internal-error, or an internal-warning.  This is on by default for\n   internal-error and off by default for internal-warning.\n \n+set logging on|off\n+  Deprecated and replaced by \"set logging enabled on|off\".\n+\n+set logging enabled on|off\n+show logging enabled\n+  These commands set or show whether logging is enabled or disabled.\n+\n * Python API\n \n   ** New function gdb.add_history(), which takes a gdb.Value object"
    },
    {
      "sha": "82be849b086ddfa6e570da7fdf97a4b922fc653a",
      "filename": "gdb/cli/cli-logging.c",
      "status": "modified",
      "additions": 54,
      "deletions": 4,
      "changes": 58,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/cli/cli-logging.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/cli/cli-logging.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-logging.c?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -22,6 +22,7 @@\n #include \"ui-out.h\"\n #include \"interps.h\"\n #include \"cli/cli-style.h\"\n+#include \"cli/cli-decode.h\"\n \n static char *saved_filename;\n \n@@ -163,25 +164,51 @@ set_logging_off (const char *args, int from_tty)\n   saved_filename = NULL;\n }\n \n+static bool logging_enabled;\n+\n+static void\n+set_logging_enabled (const char *args,\n+\t\t     int from_tty, struct cmd_list_element *c)\n+{\n+  if (logging_enabled)\n+    set_logging_on (args, from_tty);\n+  else\n+    set_logging_off (args, from_tty);\n+}\n+\n+static void\n+show_logging_enabled (struct ui_file *file, int from_tty,\n+\t\t       struct cmd_list_element *c, const char *value)\n+{\n+  if (logging_enabled)\n+    printf_unfiltered (_(\"Logging is enabled.\\n\"));\n+  else\n+    printf_unfiltered (_(\"Logging is disabled.\\n\"));\n+}\n+\n void _initialize_cli_logging ();\n void\n _initialize_cli_logging ()\n {\n   static struct cmd_list_element *set_logging_cmdlist, *show_logging_cmdlist;\n \n+  /* Set/show logging.  */\n   add_setshow_prefix_cmd (\"logging\", class_support,\n \t\t\t  _(\"Set logging options.\"),\n \t\t\t  _(\"Show logging options.\"),\n \t\t\t  &set_logging_cmdlist, &show_logging_cmdlist,\n \t\t\t  &setlist, &showlist);\n \n+  /* Set/show logging overwrite.  */\n   add_setshow_boolean_cmd (\"overwrite\", class_support, &logging_overwrite, _(\"\\\n Set whether logging overwrites or appends to the log file.\"), _(\"\\\n Show whether logging overwrites or appends to the log file.\"), _(\"\\\n If set, logging overwrites the log file.\"),\n \t\t\t   set_logging_overwrite,\n \t\t\t   show_logging_overwrite,\n \t\t\t   &set_logging_cmdlist, &show_logging_cmdlist);\n+\n+  /* Set/show logging redirect.  */\n   add_setshow_boolean_cmd (\"redirect\", class_support, &logging_redirect, _(\"\\\n Set the logging output mode.\"), _(\"\\\n Show the logging output mode.\"), _(\"\\\n@@ -190,6 +217,8 @@ If redirect is on, output will go only to the log file.\"),\n \t\t\t   set_logging_redirect,\n \t\t\t   show_logging_redirect,\n \t\t\t   &set_logging_cmdlist, &show_logging_cmdlist);\n+\n+  /* Set/show logging debugredirect.  */\n   add_setshow_boolean_cmd (\"debugredirect\", class_support,\n \t\t\t   &debug_redirect, _(\"\\\n Set the logging debug output mode.\"), _(\"\\\n@@ -200,15 +229,36 @@ If debug redirect is on, debug will go only to the log file.\"),\n \t\t\t   show_logging_redirect,\n \t\t\t   &set_logging_cmdlist, &show_logging_cmdlist);\n \n+  /* Set/show logging file.  */\n   add_setshow_filename_cmd (\"file\", class_support, &logging_filename, _(\"\\\n Set the current logfile.\"), _(\"\\\n Show the current logfile.\"), _(\"\\\n The logfile is used when directing GDB's output.\"),\n \t\t\t    NULL,\n \t\t\t    show_logging_filename,\n \t\t\t    &set_logging_cmdlist, &show_logging_cmdlist);\n-  add_cmd (\"on\", class_support, set_logging_on,\n-\t   _(\"Enable logging.\"), &set_logging_cmdlist);\n-  add_cmd (\"off\", class_support, set_logging_off,\n-\t   _(\"Disable logging.\"), &set_logging_cmdlist);\n+\n+  /* Set/show logging enabled.  */\n+  set_show_commands setshow_logging_enabled_cmds\n+    = add_setshow_boolean_cmd (\"enabled\", class_support, &logging_enabled,\n+\t\t\t       _(\"Enable logging.\"),\n+\t\t\t       _(\"Show whether logging is enabled.\"),\n+\t\t\t       _(\"When on, enable logging.\"),\n+\t\t\t       set_logging_enabled,\n+\t\t\t       show_logging_enabled,\n+\t\t\t       &set_logging_cmdlist, &show_logging_cmdlist);\n+\n+  /* Set logging on, deprecated alias.  */\n+  cmd_list_element *set_logging_on_cmd\n+    = add_alias_cmd (\"on\", setshow_logging_enabled_cmds.set, class_support,\n+\t\t     false, &set_logging_cmdlist);\n+  deprecate_cmd (set_logging_on_cmd, \"set logging enabled on\");\n+  set_logging_on_cmd->default_args = \"on\";\n+\n+  /* Set logging off, deprecated alias.  */\n+  cmd_list_element *set_logging_off_cmd\n+    = add_alias_cmd (\"off\", setshow_logging_enabled_cmds.set, class_support,\n+\t\t     false, &set_logging_cmdlist);\n+  deprecate_cmd (set_logging_off_cmd, \"set logging enabled off\");\n+  set_logging_off_cmd->default_args = \"off\";\n }"
    },
    {
      "sha": "1a944b10ae52752fc720fbea138d7897a53131a7",
      "filename": "gdb/doc/gdb.texinfo",
      "status": "modified",
      "additions": 4,
      "deletions": 6,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/doc/gdb.texinfo",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/doc/gdb.texinfo",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/gdb.texinfo?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -1705,17 +1705,15 @@ You may want to save the output of @value{GDBN} commands to a file.\n There are several commands to control @value{GDBN}'s logging.\n \n @table @code\n-@kindex set logging\n-@item set logging on\n-Enable logging.\n-@item set logging off\n-Disable logging.\n+@kindex set logging enabled\n+@item set logging enabled [on|off]\n+Enable or disable logging.\n @cindex logging file name\n @item set logging file @var{file}\n Change the name of the current logfile.  The default logfile is @file{gdb.txt}.\n @item set logging overwrite [on|off]\n By default, @value{GDBN} will append to the logfile.  Set @code{overwrite} if\n-you want @code{set logging on} to overwrite the logfile instead.\n+you want @code{set logging enabled on} to overwrite the logfile instead.\n @item set logging redirect [on|off]\n By default, @value{GDBN} output will go to both the terminal and the logfile.\n Set @code{redirect} if you want output to go only to the log file."
    },
    {
      "sha": "d6e7fc734a99367b90e3b3bf3af6be828a9f273f",
      "filename": "gdb/testsuite/gdb.ada/access_to_packed_array.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.ada/access_to_packed_array.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.ada/access_to_packed_array.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.ada/access_to_packed_array.exp?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -30,9 +30,9 @@ gdb_test_no_output \"maint expand-symtabs\"\n set file [standard_output_file gdb.txt]\n gdb_test_no_output \"set logging file $file\" \"set logging file\"\n gdb_test_no_output \"set logging redirect on\"\n-gdb_test \"set logging on\"\n+gdb_test \"set logging enabled on\"\n gdb_test_no_output \"maint print symbols\"\n-gdb_test \"set logging off\"\n+gdb_test \"set logging enabled off\"\n file delete $file\n \n set bp_location [gdb_get_line_number \"BREAK\" ${testdir}/foo.adb]"
    },
    {
      "sha": "626b2f0e0bbeadbfed74764dac994592ddd29585",
      "filename": "gdb/testsuite/gdb.base/style-logging.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.base/style-logging.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.base/style-logging.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style-logging.exp?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -46,7 +46,7 @@ save_vars { env(TERM) } {\n     gdb_test_no_output \"set logging file $log_name\" \\\n \t\"set logging filename\"\n     gdb_test_no_output \"set logging overwrite on\"\n-    gdb_test \"set logging on\" \"Copying output to .*\"\n+    gdb_test \"set logging enabled on\" \"Copying output to .*\"\n \n     set main_expr [style main function]\n     set base_file_expr [style \".*style\\\\.c\" file]\n@@ -55,7 +55,7 @@ save_vars { env(TERM) } {\n     gdb_test \"frame\" \\\n \t\"$main_expr.*$arg_expr.*$arg_expr.*$file_expr.*\"\n \n-    gdb_test \"set logging off\" \"Done logging to .*\"\n+    gdb_test \"set logging enabled off\" \"Done logging to .*\"\n \n     set fd [open $log_name]\n     set data [read -nonewline $fd]"
    },
    {
      "sha": "de4d9fe886b4925495a1a8df37a903112dbaef63",
      "filename": "gdb/testsuite/gdb.base/ui-redirect.exp",
      "status": "modified",
      "additions": 12,
      "deletions": 12,
      "changes": 24,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.base/ui-redirect.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.base/ui-redirect.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/ui-redirect.exp?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -76,45 +76,45 @@ with_test_prefix \"userdefined\" {\n \n with_test_prefix \"logging\" {\n     gdb_test_no_output \"set logging file /dev/null\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Copying output to /dev/null.*Copying debug output to /dev/null\\\\.\"\n     gdb_test \"save breakpoints $cmds_file\" \"Saved to file '$cmds_file'\\\\.\" \\\n \t\"save breakpoints cmds.txt\"\n     cmp_file_string \"$cmds_file\" \"$cmds\" \"cmds.txt\"\n     gdb_test \"userdefined\" \"#0  main ().*\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n     gdb_test \"help\" \"List of classes of commands:.*\"\n }\n \n with_test_prefix \"redirect\" {\n     gdb_test \"set logging redirect on\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Redirecting output to /dev/null.*Copying debug output to /dev/null\\\\.\"\n     gdb_test_no_output \"save breakpoints $cmds_file\" \"save breakpoints cmds.txt\"\n     cmp_file_string \"$cmds_file\" \"$cmds\" \"cmds.txt\"\n     gdb_test_no_output \"userdefined\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n     gdb_test \"help\" \"List of classes of commands:.*\"\n }\n \n with_test_prefix \"redirect while already logging\" {\n     gdb_test_no_output \"set logging redirect off\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Copying output to /dev/null.*Copying debug output to /dev/null\\\\.\"\n     gdb_test \"set logging redirect on\" \\\n     \".*warning: Currently logging .*Turn the logging off and on to make the new setting effective.*\"\n     gdb_test \"save breakpoints $cmds_file\" \"Saved to file '$cmds_file'\\\\.\" \\\n \t\"save breakpoints cmds.txt\"\n     cmp_file_string \"$cmds_file\" \"$cmds\" \"cmds.txt\"\n     gdb_test \"userdefined\" \"#0  main ().*\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n     gdb_test \"help\" \"List of classes of commands:.*\"\n     gdb_test_no_output \"set logging redirect off\"\n }\n \n with_test_prefix \"debugging\" {\n     gdb_test \"set debug infrun 1\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Copying output to /dev/null.*Copying debug output to /dev/null\\\\.\"\n \n     set prompt \"$gdb_prompt \\\\\\[infrun\\\\\\] fetch_inferior_event: exit\\r\\n$\"\n@@ -125,25 +125,25 @@ with_test_prefix \"debugging\" {\n     }\n \n     gdb_test \"set debug infrun 0\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n     gdb_test \"help\" \"List of classes of commands:.*\"\n }\n \n with_test_prefix \"redirect debugging\" {\n     gdb_test_no_output \"set logging debugredirect on\"\n     gdb_test \"set debug infrun 1\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Copying output to /dev/null.*Redirecting debug output to /dev/null\\\\.\"\n     gdb_test \"continue\" \"Continuing.*((?!infrun).).*Breakpoint \\[0-9\\]+, bar.*\"\n     gdb_test \"set debug infrun 0\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n     gdb_test \"help\" \"List of classes of commands:.*\"\n }\n \n with_test_prefix \"redirect logging and debuging\" {\n     gdb_test_no_output \"set logging redirect on\"\n     gdb_test_no_output \"set logging debugredirect on\"\n-    gdb_test \"set logging on\" \\\n+    gdb_test \"set logging enabled on\" \\\n     \"Redirecting output to /dev/null.*Redirecting debug output to /dev/null\\\\.\"\n-    gdb_test \"set logging off\" \"Done logging to /dev/null\\\\.\"\n+    gdb_test \"set logging enabled off\" \"Done logging to /dev/null\\\\.\"\n }"
    },
    {
      "sha": "8672bcbdb9d9cd33c6254183406f7e3bc7cc7be5",
      "filename": "gdb/testsuite/gdb.mi/mi-logging.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.mi/mi-logging.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/gdb.mi/mi-logging.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.mi/mi-logging.exp?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -37,13 +37,13 @@ mi_gdb_test \"-gdb-set logging file $milogfile\" \"\\\\^done\" \\\n \n mi_gdb_test \"-gdb-set logging overwrite on\" \".*\"\n \n-mi_gdb_test \"-gdb-set logging on\" \".*\" \"logging on\"\n+mi_gdb_test \"-gdb-set logging enabled on\" \".*\" \"logging on\"\n \n mi_step \"logged step\"\n \n mi_next \"logged next\"\n \n-mi_gdb_test \"-gdb-set logging off\" \".*\" \"logging off\"\n+mi_gdb_test \"-gdb-set logging enabled off\" \".*\" \"logging off\"\n \n set chan [open $milogfile]\n set logcontent [read $chan]\n@@ -64,11 +64,11 @@ mi_gdb_test \"-gdb-set logging redirect on\" \".*\" \"redirect logging on\"\n # Since all output will be going into the file, just keep sending commands\n # and don't expect anything to appear until logging is turned off.\n \n-send_gdb \"1001-gdb-set logging on\\n\"\n+send_gdb \"1001-gdb-set logging enabled on\\n\"\n send_gdb \"1002-exec-step\\n\"\n send_gdb \"1003-exec-next\\n\"\n \n-mi_gdb_test \"1004-gdb-set logging off\" \".*\" \"redirect logging off\"\n+mi_gdb_test \"1004-gdb-set logging enabled off\" \".*\" \"redirect logging off\"\n \n set chan [open $milogfile]\n set logcontent [read $chan]\n@@ -85,12 +85,12 @@ if [regexp \"1001\\\\^done\\[\\r\\n\\]+$mi_log_prompt.*1002\\\\^running\\[\\r\\n\\]+\\\\*runnin\n with_test_prefix \"redirect while already logging\" {\n     mi_gdb_test \"-gdb-set logging redirect off\" \".*\" \\\n \t\"logging redirect off\"\n-    mi_gdb_test \"-gdb-set logging on\" \".*\" \\\n+    mi_gdb_test \"-gdb-set logging enabled on\" \".*\" \\\n \t\"logging on\"\n     mi_gdb_test \"-gdb-set logging redirect on\" \\\n \t\".*warning: Currently logging .*Turn the logging off and on to make the new setting effective.*\" \\\n \t\"logging redirect on\"\n-    mi_gdb_test \"-gdb-set logging off\" \".*\" \\\n+    mi_gdb_test \"-gdb-set logging enabled off\" \".*\" \\\n \t\"logging off\"\n }\n "
    },
    {
      "sha": "77f889e7404441bca37d0737871262f482aff3c3",
      "filename": "gdb/testsuite/lib/gdb.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/lib/gdb.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6ff9675421809af862db5b86d3756ddf4aef568f/gdb/testsuite/lib/gdb.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/gdb.exp?ref=6ff9675421809af862db5b86d3756ddf4aef568f",
      "patch": "@@ -7661,7 +7661,7 @@ proc gdb_debug_init { } {\n     }\n \n     # First ensure logging is off.\n-    send_gdb \"set logging off\\n\"\n+    send_gdb \"set logging enabled off\\n\"\n \n     set debugfile [standard_output_file gdb.debug]\n     send_gdb \"set logging file $debugfile\\n\"\n@@ -7674,7 +7674,7 @@ proc gdb_debug_init { } {\n     }\n \n     # Now that everything is set, enable logging.\n-    send_gdb \"set logging on\\n\"\n+    send_gdb \"set logging enabled on\\n\"\n     gdb_expect 10 {\n \t-re \"Copying output to $debugfile.*Redirecting debug output to $debugfile.*$gdb_prompt $\" {}\n \ttimeout { warning \"Couldn't set logging file\" }"
    }
  ]
}