{
  "sha": "b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjJjYWVlNmFhYTc4MTA2ZDdhZTNjNDZkZGEzYTg0YTMyNWU0M2ExZA==",
  "commit": {
    "author": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-10-07T11:34:51Z"
    },
    "committer": {
      "name": "Andrew Burgess",
      "email": "andrew.burgess@embecosm.com",
      "date": "2019-10-07T12:03:52Z"
    },
    "message": "gdb: Rename structures within ctfread.c\n\nCommit:\n\n  commit 30d1f0184953478d14641c495261afd06ebfabac\n  Date:   Mon Oct 7 00:46:52 2019 +0000\n\n      gdb: CTF support\n\nIntroduces some structures with names that are already in use within\nGBB, this violates C++'s one-definition rule.  Specifically the\nstructures 'nextfield' and 'field_info' are now defined in\ndwarf2read.c and ctfread.c.\n\nThis commit renames the new structures (in ctfread.c), adding a 'ctf_'\nprefix.  Maybe we should consider renaming the DWARF versions too in\nthe future to avoid accidental conflicts.\n\ngdb/ChangeLog:\n\n\t* ctfread.c (struct nextfield): Renamed to ...\n\t(struct ctf_nextfield): ... this.\n\t(struct field_info): Renamed to ...\n\t(strut ctf_field_info): ... this.\n\t(attach_fields_to_type): Update for renamed structures.\n\t(ctf_add_member_cb): Likewise.\n\t(ctf_add_enum_member_cb): Likewise.\n\t(process_struct_members): Likewise.\n\t(process_enum_type): Likewise.",
    "tree": {
      "sha": "4c5c0e17a8277bc9301972e37bbf9c7906372ce1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4c5c0e17a8277bc9301972e37bbf9c7906372ce1"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d/comments",
  "author": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "T-J-Teru",
    "id": 475372,
    "node_id": "MDQ6VXNlcjQ3NTM3Mg==",
    "avatar_url": "https://avatars.githubusercontent.com/u/475372?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/T-J-Teru",
    "html_url": "https://github.com/T-J-Teru",
    "followers_url": "https://api.github.com/users/T-J-Teru/followers",
    "following_url": "https://api.github.com/users/T-J-Teru/following{/other_user}",
    "gists_url": "https://api.github.com/users/T-J-Teru/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/T-J-Teru/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/T-J-Teru/subscriptions",
    "organizations_url": "https://api.github.com/users/T-J-Teru/orgs",
    "repos_url": "https://api.github.com/users/T-J-Teru/repos",
    "events_url": "https://api.github.com/users/T-J-Teru/events{/privacy}",
    "received_events_url": "https://api.github.com/users/T-J-Teru/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "dfee856674428aa0137efc3051eac170955f9532",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dfee856674428aa0137efc3051eac170955f9532",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/dfee856674428aa0137efc3051eac170955f9532"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 26,
    "deletions": 14
  },
  "files": [
    {
      "sha": "8d114c27635e0585348ada30d4537d3e9590b97c",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 12,
      "deletions": 0,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
      "patch": "@@ -1,3 +1,15 @@\n+2019-10-07  Andrew Burgess  <andrew.burgess@embecosm.com>\n+\n+\t* ctfread.c (struct nextfield): Renamed to ...\n+\t(struct ctf_nextfield): ... this.\n+\t(struct field_info): Renamed to ...\n+\t(strut ctf_field_info): ... this.\n+\t(attach_fields_to_type): Update for renamed structures.\n+\t(ctf_add_member_cb): Likewise.\n+\t(ctf_add_enum_member_cb): Likewise.\n+\t(process_struct_members): Likewise.\n+\t(process_enum_type): Likewise.\n+\n 2019-10-07  Weimin Pan  <weimin.pan@oracle.com>\n \n \t* ctfread.c: New file."
    },
    {
      "sha": "44ccff62ae392ca13780cc48dc9ea17fd22a6ef4",
      "filename": "gdb/ctfread.c",
      "status": "modified",
      "additions": 14,
      "deletions": 14,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d/gdb/ctfread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b2caee6aaa78106d7ae3c46dda3a84a325e43a1d/gdb/ctfread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ctfread.c?ref=b2caee6aaa78106d7ae3c46dda3a84a325e43a1d",
      "patch": "@@ -98,17 +98,17 @@ typedef struct ctf_context\n \n /* The routines that read and process fields/members of a C struct, union,\n    or enumeration, pass lists of data member fields in an instance of a\n-   field_info structure. It is derived from dwarf2read.c.  */\n+   ctf_field_info structure. It is derived from dwarf2read.c.  */\n \n-struct nextfield\n+struct ctf_nextfield\n {\n   struct field field {};\n };\n \n-struct field_info\n+struct ctf_field_info\n {\n   /* List of data member fields.  */\n-  std::vector<struct nextfield> fields;\n+  std::vector<struct ctf_nextfield> fields;\n \n   /* Context.  */\n   ctf_context_t *cur_context;\n@@ -269,7 +269,7 @@ set_symbol_address (struct objfile *of, struct symbol *sym, const char *name)\n /* Create the vector of fields, and attach it to TYPE.  */\n \n static void\n-attach_fields_to_type (struct field_info *fip, struct type *type)\n+attach_fields_to_type (struct ctf_field_info *fip, struct type *type)\n {\n   int nfields = fip->fields.size ();\n \n@@ -284,7 +284,7 @@ attach_fields_to_type (struct field_info *fip, struct type *type)\n   /* Copy the saved-up fields into the field vector.  */\n   for (int i = 0; i < nfields; ++i)\n     {\n-      struct nextfield &field = fip->fields[i];\n+      struct ctf_nextfield &field = fip->fields[i];\n       TYPE_FIELD (type, i) = field.field;\n     }\n }\n@@ -314,17 +314,17 @@ ctf_init_float_type (struct objfile *objfile,\n \n /* Callback to add member NAME to a struct/union type. TID is the type\n    of struct/union member, OFFSET is the offset of member in bits,\n-   and ARG contains the field_info.  */\n+   and ARG contains the ctf_field_info.  */\n \n static int\n ctf_add_member_cb (const char *name,\n \t\t   ctf_id_t tid,\n \t\t   unsigned long offset,\n \t\t   void *arg)\n {\n-  struct field_info *fip = (struct field_info *) arg;\n+  struct ctf_field_info *fip = (struct ctf_field_info *) arg;\n   ctf_context_t *ccp = fip->cur_context;\n-  struct nextfield new_field;\n+  struct ctf_nextfield new_field;\n   struct field *fp;\n   struct type *t;\n   uint32_t kind;\n@@ -358,13 +358,13 @@ ctf_add_member_cb (const char *name,\n }\n \n /* Callback to add member NAME of EVAL to an enumeration type.\n-   ARG contains the field_info.  */\n+   ARG contains the ctf_field_info.  */\n \n static int\n ctf_add_enum_member_cb (const char *name, int enum_value, void *arg)\n {\n-  struct field_info *fip = (struct field_info *) arg;\n-  struct nextfield new_field;\n+  struct ctf_field_info *fip = (struct ctf_field_info *) arg;\n+  struct ctf_nextfield new_field;\n   struct field *fp;\n   ctf_context_t *ccp = fip->cur_context;\n \n@@ -587,7 +587,7 @@ process_struct_members (ctf_context_t *ccp,\n \t\t\tctf_id_t tid,\n \t\t\tstruct type *type)\n {\n-  struct field_info fi;\n+  struct ctf_field_info fi;\n \n   fi.cur_context = ccp;\n   if (ctf_member_iter (ccp->fp, tid, ctf_add_member_cb, &fi) == CTF_ERR)\n@@ -665,7 +665,7 @@ static void\n process_enum_type (ctf_context_t *ccp, ctf_id_t tid)\n {\n   struct type *type;\n-  struct field_info fi;\n+  struct ctf_field_info fi;\n \n   type = read_enum_type (ccp, tid);\n "
    }
  ]
}