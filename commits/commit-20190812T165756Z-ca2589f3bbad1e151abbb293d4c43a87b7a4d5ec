{
  "sha": "ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2EyNTg5ZjNiYmFkMWUxNTFhYmJiMjkzZDRjNDNhODdiN2E0ZDVlYw==",
  "commit": {
    "author": {
      "name": "Patrick Palka",
      "email": "patrick@parcs.ath.cx",
      "date": "2019-03-17T14:32:16Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-12T16:57:56Z"
    },
    "message": "Fix gdb's selftest.exp after readline import\n\nAfter the sync there is one testsuite regression, the test\n\"signal SIGINT\" in gdb.gdb/selftest.exp which now FAILs.  Previously,\nthe readline 6.2 SIGINT handler would temporarily reinstall the\nunderlying application's SIGINT handler and immediately re-raise SIGINT\nso that the orginal handler gets invoked.  But now (since readline 6.3)\nits SIGINT handler does not re-raise SIGINT or directly invoke the\noriginal handler; it now sets a flag marking that SIGINT was raised, and\nwaits until readline explicitly has control to call the application's\nSIGINT handler.  Anyway, because SIGINT is no longer re-raised from\nwithin readline's SIGINT handler, doing \"signal SIGINT\" with a stopped\ninferior gdb process will no longer resume and then immediately stop the\nprocess (since there is no 2nd SIGINT to immediately catch).  Instead,\nthe inferior gdb process will now just print \"Quit\" and continue to run.\nSo with this commit, this particular test case is adjusted to reflect\nthis change in behavior (we now have to send a 2nd SIGINT manually to\nstop it).\n\ngdb/testsuite/ChangeLog\n2019-08-12  Patrick Palka  <patrick@parcs.ath.cx>\n\n\t* gdb.gdb/selftest.exp (test_with_self): Update test to now\n\texpect the GDB inferior to no longer immediately stop after\n\tbeing resumed with \"signal SIGINT\".",
    "tree": {
      "sha": "287c25a9bd478d471fd720f5e1a7b2f755b73b0e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/287c25a9bd478d471fd720f5e1a7b2f755b73b0e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec/comments",
  "author": null,
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "c15a79c78cc0111296b487de3fa59365f13df3bc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/c15a79c78cc0111296b487de3fa59365f13df3bc",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/c15a79c78cc0111296b487de3fa59365f13df3bc"
    }
  ],
  "stats": {
    "total": 29,
    "additions": 26,
    "deletions": 3
  },
  "files": [
    {
      "sha": "fb19b9d7ca12a19135333f748880ab9e39ac877d",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
      "patch": "@@ -1,3 +1,9 @@\n+2019-08-12  Patrick Palka  <patrick@parcs.ath.cx>\n+\n+\t* gdb.gdb/selftest.exp (test_with_self): Update test to now\n+\texpect the GDB inferior to no longer immediately stop after\n+\tbeing resumed with \"signal SIGINT\".\n+\n 2019-08-09  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* gdb.linespec/break-ask.exp: Generalize regexps to match"
    },
    {
      "sha": "9651561fafe080ebe789f7aeb6f6f04c2dd4d7ab",
      "filename": "gdb/testsuite/gdb.gdb/selftest.exp",
      "status": "modified",
      "additions": 20,
      "deletions": 3,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec/gdb/testsuite/gdb.gdb/selftest.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec/gdb/testsuite/gdb.gdb/selftest.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.gdb/selftest.exp?ref=ca2589f3bbad1e151abbb293d4c43a87b7a4d5ec",
      "patch": "@@ -110,9 +110,26 @@ proc test_with_self { } {\n     }\n     \n     set description \"send SIGINT signal to child process\"\n-    gdb_test \"signal SIGINT\" \\\n-\t\"Continuing with signal SIGINT.*\" \\\n-\t\"$description\"\n+    gdb_test_multiple \"signal SIGINT\" \"$description\" {\n+\t-re \"^signal SIGINT\\r\\nContinuing with signal SIGINT.\\r\\nQuit\\r\\n.* $\" {\n+\t    pass \"$description\"\n+\t}\n+    }\n+\n+    set description \"send ^C to child process again\"\n+    send_gdb \"\\003\"\n+    gdb_expect {\n+\t-re \"Program received signal SIGINT.*$gdb_prompt $\" {\n+\t    pass \"$description\"\n+\t}\n+\t-re \".*$gdb_prompt $\" {\n+\t    fail \"$description\"\n+\t}\n+\ttimeout {\n+\t    fail \"$description (timeout)\"\n+\t}\n+    }\n+\n \n     # Switch back to the GDB thread if Guile support is linked in.\n     # \"signal SIGINT\" could also switch the current thread."
    }
  ]
}