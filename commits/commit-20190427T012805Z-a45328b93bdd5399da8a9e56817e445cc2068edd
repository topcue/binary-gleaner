{
  "sha": "a45328b93bdd5399da8a9e56817e445cc2068edd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTQ1MzI4YjkzYmRkNTM5OWRhOGE5ZTU2ODE3ZTQ0NWNjMjA2OGVkZA==",
  "commit": {
    "author": {
      "name": "Andrew Bennett",
      "email": "andrew.bennett@imgtec.com",
      "date": "2019-04-22T22:12:09Z"
    },
    "committer": {
      "name": "Faraz Shahbazker",
      "email": "fshahbazker@wavecomp.com",
      "date": "2019-04-27T01:28:05Z"
    },
    "message": "[MIPS] Add load-link, store-conditional paired instructions\n\nAdd several baseline MIPS32R6[1] and MIPS64R6[2] instructions\nthat were omitted from the initial spec.  These instructions\nare optional in implementations but not associated with any\nASE or pseudo-ASE.  Their presence is indicated by the XNP bit\nin the Config5 register.\n\n[1] \"MIPS Architecture for Programmers Volume II-A: The MIPS32\n     Instruction Set Manual\", Imagination Technologies Ltd., Document\n     Number: MD00086, Revision 6.06, December 15, 2016, Section 3.2\n     \"Alphabetical List of Instructions\", pp. 228-229, pp. 354-357.\n\n[2] \"MIPS Architecture for Programmers Volume II-A: The MIPS64\n     Instruction Set Manual\", Imagination Technologies Ltd., Document\n     Number: MD00087, Revision 6.06, December 15, 2016, Section 3.2\n     \"Alphabetical List of Instructions\", pp. 289-290 and pp. 458-460.\n\ngas/\n\t* config/tc-mips.c (macro) <M_LLWP_AB, M_LLDP_AB, M_SCWP_AB,\n\tM_SCDP_AB>: New cases and expansions for paired instructions.\n\t* testsuite/gas/mips/llpscp-32.s: New test source.\n\t* testsuite/gas/mips/llpscp-64.s: Likewise.\n\t* testsuite/gas/mips/llpscp-32.d: New test.\n\t* testsuite/gas/mips/llpscp-64.d: Likewise.\n\t* testsuite/gas/mips/mips.exp: Run the new tests.\n\t* testsuite/gas/mips/r6.s: Add new instructions to test source.\n\t* testsuite/gas/mips/r6-64.s: Likewise.\n\t* testsuite/gas/mips/r6-64-n32.d: Check new instructions.\n\t* testsuite/gas/mips/r6-64-n64.d: Likewise.\n\t* testsuite/gas/mips/r6-n32.d: Likewise.\n\t* testsuite/gas/mips/r6-n64.d: Likwwise.\n\t* testsuite/gas/mips/r6.d: Likewise.\n\ninclude/\n\t* opcode/mips.h (M_LLWP_AB, M_LLDP_AB): New enum values.\n\t(M_SCWP_AB, M_SCDP_AB): Likewise.\n\nopcodes/\n\t* mips-opc.c (mips_builtin_opcodes): Add llwp, lldp, scwp, scdp.",
    "tree": {
      "sha": "d611c35292391d313d6d99f80aa1495fdbdef046",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/d611c35292391d313d6d99f80aa1495fdbdef046"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a45328b93bdd5399da8a9e56817e445cc2068edd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a45328b93bdd5399da8a9e56817e445cc2068edd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a45328b93bdd5399da8a9e56817e445cc2068edd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a45328b93bdd5399da8a9e56817e445cc2068edd/comments",
  "author": {
    "login": "andrewb-IMG",
    "id": 12913579,
    "node_id": "MDQ6VXNlcjEyOTEzNTc5",
    "avatar_url": "https://avatars.githubusercontent.com/u/12913579?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/andrewb-IMG",
    "html_url": "https://github.com/andrewb-IMG",
    "followers_url": "https://api.github.com/users/andrewb-IMG/followers",
    "following_url": "https://api.github.com/users/andrewb-IMG/following{/other_user}",
    "gists_url": "https://api.github.com/users/andrewb-IMG/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/andrewb-IMG/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/andrewb-IMG/subscriptions",
    "organizations_url": "https://api.github.com/users/andrewb-IMG/orgs",
    "repos_url": "https://api.github.com/users/andrewb-IMG/repos",
    "events_url": "https://api.github.com/users/andrewb-IMG/events{/privacy}",
    "received_events_url": "https://api.github.com/users/andrewb-IMG/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "farazs-github",
    "id": 57776434,
    "node_id": "MDQ6VXNlcjU3Nzc2NDM0",
    "avatar_url": "https://avatars.githubusercontent.com/u/57776434?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/farazs-github",
    "html_url": "https://github.com/farazs-github",
    "followers_url": "https://api.github.com/users/farazs-github/followers",
    "following_url": "https://api.github.com/users/farazs-github/following{/other_user}",
    "gists_url": "https://api.github.com/users/farazs-github/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/farazs-github/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/farazs-github/subscriptions",
    "organizations_url": "https://api.github.com/users/farazs-github/orgs",
    "repos_url": "https://api.github.com/users/farazs-github/repos",
    "events_url": "https://api.github.com/users/farazs-github/events{/privacy}",
    "received_events_url": "https://api.github.com/users/farazs-github/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "45f0ab12d463cb3999a4286e679bdef05884b3a3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/45f0ab12d463cb3999a4286e679bdef05884b3a3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/45f0ab12d463cb3999a4286e679bdef05884b3a3"
    }
  ],
  "stats": {
    "total": 261,
    "additions": 251,
    "deletions": 10
  },
  "files": [
    {
      "sha": "81fcdcc46655efbfd410d9d4544cea946358adf8",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 18,
      "deletions": 0,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -1,3 +1,21 @@\n+2019-04-26  Andrew Bennett  <andrew.bennett@imgtec.com>\n+\t    Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\t* config/tc-mips.c (macro) <M_LLWP_AB, M_LLDP_AB, M_SCWP_AB,\n+\tM_SCDP_AB>: New cases and expansions for paired instructions.\n+\t* testsuite/gas/mips/llpscp-32.s: New test source.\n+\t* testsuite/gas/mips/llpscp-64.s: Likewise.\n+\t* testsuite/gas/mips/llpscp-32.d: New test.\n+\t* testsuite/gas/mips/llpscp-64.d: Likewise.\n+\t* testsuite/gas/mips/mips.exp: Run the new tests.\n+\t* testsuite/gas/mips/r6.s: Add new instructions to test source.\n+\t* testsuite/gas/mips/r6-64.s: Likewise.\n+\t* testsuite/gas/mips/r6-64-n32.d: Check new instructions.\n+\t* testsuite/gas/mips/r6-64-n64.d: Likewise.\n+\t* testsuite/gas/mips/r6-n32.d: Likewise.\n+\t* testsuite/gas/mips/r6-n64.d: Likwwise.\n+\t* testsuite/gas/mips/r6.d: Likewise.\n+\n 2019-04-26  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR gas/24485"
    },
    {
      "sha": "091ea7bbfe416e8d410c908d4ad8e4ae9ccde2dc",
      "filename": "gas/config/tc-mips.c",
      "status": "modified",
      "additions": 57,
      "deletions": 9,
      "changes": 66,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/config/tc-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/config/tc-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-mips.c?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -10279,6 +10279,7 @@ macro (struct mips_cl_insn *ip, char *str)\n   int imm = 0;\n   int ust = 0;\n   int lp = 0;\n+  int ll_sc_paired = 0;\n   bfd_boolean large_offset;\n   int off;\n   int hold_mips_optimize;\n@@ -12014,6 +12015,13 @@ macro (struct mips_cl_insn *ip, char *str)\n       offbits = 12;\n       lp = 1;\n       goto ld;\n+    case M_LLDP_AB:\n+    case M_LLWP_AB:\n+      s = ip->insn_mo->name;\n+      fmt = \"t,d,s\";\n+      ll_sc_paired = 1;\n+      offbits = 0;\n+      goto ld;\n     case M_LWM_AB:\n       gas_assert (mips_opts.micromips);\n       s = \"lwm\";\n@@ -12028,11 +12036,26 @@ macro (struct mips_cl_insn *ip, char *str)\n       goto ld_st;\n \n     ld:\n-      /* We don't want to use $0 as tempreg.  */\n-      if (op[2] == op[0] + lp || op[0] + lp == ZERO)\n-\tgoto ld_st;\n+      /* Try to use one the the load registers to compute the base address.\n+\t We don't want to use $0 as tempreg.  */\n+      if (ll_sc_paired)\n+\t{\n+\t  if ((op[0] == ZERO && op[3] == op[1])\n+\t      || (op[1] == ZERO && op[3] == op[0])\n+\t      || (op[0] == ZERO && op[1] == ZERO))\n+\t    goto ld_st;\n+\t  else if (op[0] != op[3] && op[0] != ZERO)\n+\t    tempreg = op[0];\n+\t  else\n+\t    tempreg = op[1];\n+\t}\n       else\n-\ttempreg = op[0] + lp;\n+        {\n+\t  if (op[2] == op[0] + lp || op[0] + lp == ZERO)\n+\t    goto ld_st;\n+\t  else\n+\t    tempreg = op[0] + lp;\n+\t}\n       goto ld_noat;\n \n     case M_SB_AB:\n@@ -12100,6 +12123,13 @@ macro (struct mips_cl_insn *ip, char *str)\n \t\t : ISA_IS_R6 (mips_opts.isa) ? 9\n \t\t : 16);\n       goto ld_st;\n+    case M_SCDP_AB:\n+    case M_SCWP_AB:\n+      s = ip->insn_mo->name;\n+      fmt = \"t,d,s\";\n+      ll_sc_paired = 1;\n+      offbits = 0;\n+      goto ld_st;\n     case M_CACHE_AB:\n       s = \"cache\";\n       fmt = (mips_opts.micromips ? \"k,~(b)\"\n@@ -12193,7 +12223,7 @@ macro (struct mips_cl_insn *ip, char *str)\n     ld_st:\n       tempreg = AT;\n     ld_noat:\n-      breg = op[2];\n+      breg = ll_sc_paired ? op[3] : op[2];\n       if (small_offset_p (0, align, 16))\n \t{\n \t  /* The first case exists for M_LD_AB and M_SD_AB, which are\n@@ -12205,7 +12235,12 @@ macro (struct mips_cl_insn *ip, char *str)\n \t  else if (small_offset_p (0, align, offbits))\n \t    {\n \t      if (offbits == 0)\n-\t\tmacro_build (NULL, s, fmt, op[0], breg);\n+\t\t{\n+\t\t  if (ll_sc_paired)\n+\t\t   macro_build (NULL, s, fmt, op[0], op[1], breg);\n+\t\t  else\n+\t\t   macro_build (NULL, s, fmt, op[0], breg);\n+\t\t}\n \t      else\n \t\tmacro_build (NULL, s, fmt, op[0],\n \t\t\t     (int) offset_expr.X_add_number, breg);\n@@ -12218,7 +12253,12 @@ macro (struct mips_cl_insn *ip, char *str)\n \t\t\t   tempreg, breg, -1, offset_reloc[0],\n \t\t\t   offset_reloc[1], offset_reloc[2]);\n \t      if (offbits == 0)\n-\t\tmacro_build (NULL, s, fmt, op[0], tempreg);\n+\t\t{\n+\t\t  if (ll_sc_paired)\n+\t\t    macro_build (NULL, s, fmt, op[0], op[1], tempreg);\n+\t\t  else\n+\t\t    macro_build (NULL, s, fmt, op[0], tempreg);\n+\t\t}\n \t      else\n \t\tmacro_build (NULL, s, fmt, op[0], 0, tempreg);\n \t    }\n@@ -12261,7 +12301,10 @@ macro (struct mips_cl_insn *ip, char *str)\n \t      if (offset_expr.X_add_number != 0)\n \t\tmacro_build (&offset_expr, ADDRESS_ADDI_INSN,\n \t\t\t     \"t,r,j\", tempreg, tempreg, BFD_RELOC_LO16);\n-\t      macro_build (NULL, s, fmt, op[0], tempreg);\n+\t      if (ll_sc_paired)\n+\t\tmacro_build (NULL, s, fmt, op[0], op[1], tempreg);\n+\t      else\n+\t\tmacro_build (NULL, s, fmt, op[0], tempreg);\n \t    }\n \t  else if (offbits == 16)\n \t    macro_build (&offset_expr, s, fmt, op[0], BFD_RELOC_LO16, tempreg);\n@@ -12279,7 +12322,12 @@ macro (struct mips_cl_insn *ip, char *str)\n \t    macro_build (NULL, ADDRESS_ADD_INSN, \"d,v,t\",\n \t\t\t tempreg, tempreg, breg);\n \t  if (offbits == 0)\n-\t    macro_build (NULL, s, fmt, op[0], tempreg);\n+\t    {\n+\t      if (ll_sc_paired)\n+\t\tmacro_build (NULL, s, fmt, op[0], op[1], tempreg);\n+\t      else\n+\t\tmacro_build (NULL, s, fmt, op[0], tempreg);\n+\t    }\n \t  else\n \t    macro_build (NULL, s, fmt, op[0], 0, tempreg);\n \t}"
    },
    {
      "sha": "70e1e154758965fe481e7da891ff41ee5e8a2307",
      "filename": "gas/testsuite/gas/mips/llpscp-32.d",
      "status": "added",
      "additions": 44,
      "deletions": 0,
      "changes": 44,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/llpscp-32.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -0,0 +1,44 @@\n+#objdump: -dr\n+#name: Paired LL/SC for mips32r6\n+#as: -32\n+\n+.*: +file format .*\n+\n+Disassembly of section \\.text:\n+\n+00000000 <test>:\n+   0:\t7c821876 \tllwp\tv0,v1,a0\n+   4:\t7c821876 \tllwp\tv0,v1,a0\n+   8:\t24821234 \taddiu\tv0,a0,4660\n+   c:\t7c420076 \tllwp\tv0,zero,v0\n+  10:\t24430000 \taddiu\tv1,v0,0\n+\t\t\t10: R_MIPS_LO16\t.data\n+  14:\t7c621876 \tllwp\tv0,v1,v1\n+  18:\t3c020123 \tlui\tv0,0x123\n+  1c:\t00431021 \taddu\tv0,v0,v1\n+  20:\t24424567 \taddiu\tv0,v0,17767\n+  24:\t7c421876 \tllwp\tv0,v1,v0\n+  28:\t3c010000 \tlui\tat,0x0\n+\t\t\t28: R_MIPS_HI16\t.data\n+  2c:\t24210000 \taddiu\tat,at,0\n+\t\t\t2c: R_MIPS_LO16\t.data\n+  30:\t00240821 \taddu\tat,at,a0\n+  34:\t7c200076 \tllwp\tzero,zero,at\n+  38:\t7c821866 \tscwp\tv0,v1,a0\n+  3c:\t7c821866 \tscwp\tv0,v1,a0\n+  40:\t24811234 \taddiu\tat,a0,4660\n+  44:\t7c220066 \tscwp\tv0,zero,at\n+  48:\t24410000 \taddiu\tat,v0,0\n+\t\t\t48: R_MIPS_LO16\t.data\n+  4c:\t7c221866 \tscwp\tv0,v1,at\n+  50:\t3c010123 \tlui\tat,0x123\n+  54:\t00230821 \taddu\tat,at,v1\n+  58:\t24214567 \taddiu\tat,at,17767\n+  5c:\t7c221866 \tscwp\tv0,v1,at\n+  60:\t3c010000 \tlui\tat,0x0\n+\t\t\t60: R_MIPS_HI16\t.data\n+  64:\t24210000 \taddiu\tat,at,0\n+\t\t\t64: R_MIPS_LO16\t.data\n+  68:\t00240821 \taddu\tat,at,a0\n+  6c:\t7c200066 \tscwp\tzero,zero,at\n+\t..."
    },
    {
      "sha": "89d38f531d8465f78b8ebb8959b9ba583f387714",
      "filename": "gas/testsuite/gas/mips/llpscp-32.s",
      "status": "added",
      "additions": 23,
      "deletions": 0,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-32.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-32.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/llpscp-32.s?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -0,0 +1,23 @@\n+\t.text\n+test:\n+\tllwp $2, $3, $4  /* No macro expansion needed */\n+\tllwp $2, $3, 0($4)\n+\tllwp $2, $0, 0x1234($4)\n+\tllwp $2, $3, %lo(sync_mem)($2)\n+\tllwp $2, $3, 0xffffffff01234567($3)\n+\tllwp $0, $0, sync_mem($4)\n+\n+\tscwp $2, $3, $4  /* No macro expansion needed */\n+\tscwp $2, $3, 0($4)\n+\tscwp $2, $0, 0x1234($4)\n+\tscwp $2, $3, %lo(sync_mem)($2)\n+\tscwp $2, $3, 0xffffffff01234567($3)\n+\tscwp $0, $0, sync_mem($4)\n+\t.space 8\n+\n+\t.data\n+sync_mem:\n+\t.word\n+\t.word\n+\n+\t.space 8"
    },
    {
      "sha": "bbf1efb062f0f190ea09e06f78cb3ca1dbad213c",
      "filename": "gas/testsuite/gas/mips/llpscp-64.d",
      "status": "added",
      "additions": 43,
      "deletions": 0,
      "changes": 43,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/llpscp-64.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -0,0 +1,43 @@\n+#objdump: -dr\n+#name: Paired LL/SC for mips64r6\n+\n+.*: +file format .*\n+\n+Disassembly of section \\.text:\n+\n+00000000 <test>:\n+   0:\t7c821877 \tlldp\tv0,v1,a0\n+   4:\t7c821877 \tlldp\tv0,v1,a0\n+   8:\t24821234 \taddiu\tv0,a0,4660\n+   c:\t7c420077 \tlldp\tv0,zero,v0\n+  10:\t24430000 \taddiu\tv1,v0,0\n+\t\t\t10: R_MIPS_LO16\t.data\n+  14:\t7c621877 \tlldp\tv0,v1,v1\n+  18:\t3c020123 \tlui\tv0,0x123\n+  1c:\t00431021 \taddu\tv0,v0,v1\n+  20:\t24424567 \taddiu\tv0,v0,17767\n+  24:\t7c421877 \tlldp\tv0,v1,v0\n+  28:\t3c010000 \tlui\tat,0x0\n+\t\t\t28: R_MIPS_HI16\t.data\n+  2c:\t24210000 \taddiu\tat,at,0\n+\t\t\t2c: R_MIPS_LO16\t.data\n+  30:\t00240821 \taddu\tat,at,a0\n+  34:\t7c200077 \tlldp\tzero,zero,at\n+  38:\t7c821867 \tscdp\tv0,v1,a0\n+  3c:\t7c821867 \tscdp\tv0,v1,a0\n+  40:\t24811234 \taddiu\tat,a0,4660\n+  44:\t7c220067 \tscdp\tv0,zero,at\n+  48:\t24410000 \taddiu\tat,v0,0\n+\t\t\t48: R_MIPS_LO16\t.data\n+  4c:\t7c221867 \tscdp\tv0,v1,at\n+  50:\t3c010123 \tlui\tat,0x123\n+  54:\t00230821 \taddu\tat,at,v1\n+  58:\t24214567 \taddiu\tat,at,17767\n+  5c:\t7c221867 \tscdp\tv0,v1,at\n+  60:\t3c010000 \tlui\tat,0x0\n+\t\t\t60: R_MIPS_HI16\t.data\n+  64:\t24210000 \taddiu\tat,at,0\n+\t\t\t64: R_MIPS_LO16\t.data\n+  68:\t00240821 \taddu\tat,at,a0\n+  6c:\t7c200067 \tscdp\tzero,zero,at\n+\t..."
    },
    {
      "sha": "bec6e19d84ea5fd905cb9e887e3d030a352a2ab0",
      "filename": "gas/testsuite/gas/mips/llpscp-64.s",
      "status": "added",
      "additions": 23,
      "deletions": 0,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/llpscp-64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/llpscp-64.s?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -0,0 +1,23 @@\n+\t.text\n+test:\n+\tlldp $2, $3, $4  /* No macro expansion needed */\n+\tlldp $2, $3, 0($4)\n+\tlldp $2, $0, 0x1234($4)\n+\tlldp $2, $3, %lo(sync_mem)($2)\n+\tlldp $2, $3, 0xffffffff01234567($3)\n+\tlldp $0, $0, sync_mem($4)\n+\n+\tscdp $2, $3, $4  /* No macro expansion needed */\n+\tscdp $2, $3, 0($4)\n+\tscdp $2, $0, 0x1234($4)\n+\tscdp $2, $3, %lo(sync_mem)($2)\n+\tscdp $2, $3, 0xffffffff01234567($3)\n+\tscdp $0, $0, sync_mem($4)\n+\n+\t.space 8\n+\n+\t.data\n+sync_mem:\n+\t.word\n+\t.word\n+\t.space 8"
    },
    {
      "sha": "3e66fcf323e0eee5725d55eda8e468e1db894394",
      "filename": "gas/testsuite/gas/mips/mips.exp",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/mips.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/mips.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/mips.exp?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -2083,4 +2083,7 @@ if { [istarget mips*-*-vxworks*] } {\n \n     run_dump_test_arches \"ginv\"\t[mips_arch_list_matching mips32r6]\n     run_dump_test_arches \"ginv-err\"\t[mips_arch_list_matching mips32r6]\n+\n+    run_dump_test_arches \"llpscp-32\" [mips_arch_list_matching mips32r6]\n+    run_dump_test_arch \"llpscp-64\" \"\" mips64r6\n }"
    },
    {
      "sha": "0b281972211f15639b8869ac92e15e941abfc216",
      "filename": "gas/testsuite/gas/mips/r6-64-n32.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64-n32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64-n32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6-64-n32.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -61,4 +61,6 @@ Disassembly of section .text:\n 0+00a4 <[^>]*> ec9a0000 \tldpc\ta0,fff000a0 <[^>]*>\n 0+00a8 <[^>]*> ec99ffff \tldpc\ta0,001000a0 <[^>]*>\n 0+00ac <[^>]*> ec99ffff \tldpc\ta0,001000a0 <[^>]*>\n+0+00b0 <[^>]*> 7cc52077 \tlldp\ta1,a0,a2\n+0+00b4 <[^>]*> 7cc52067 \tscdp\ta1,a0,a2\n \t\\.\\.\\."
    },
    {
      "sha": "e6a34784735f38070c8a3a14e87783cc7dca3b6a",
      "filename": "gas/testsuite/gas/mips/r6-64-n64.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64-n64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64-n64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6-64-n64.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -79,4 +79,6 @@ Disassembly of section .text:\n 0+00a4 <[^>]*> ec9a0000 \tldpc\ta0,f+ff000a0 <[^>]*>\n 0+00a8 <[^>]*> ec99ffff \tldpc\ta0,0+01000a0 <[^>]*>\n 0+00ac <[^>]*> ec99ffff \tldpc\ta0,0+01000a0 <[^>]*>\n+0+00b0 <[^>]*> 7cc52077 \tlldp\ta1,a0,a2\n+0+00b4 <[^>]*> 7cc52067 \tscdp\ta1,a0,a2\n \t\\.\\.\\."
    },
    {
      "sha": "0d61922a26a92ea27a6c43a13fc201bb0becd968",
      "filename": "gas/testsuite/gas/mips/r6-64.s",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-64.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6-64.s?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -56,7 +56,9 @@\n         ld     $4, (131071 << 3)($pc)\n         .align 3\n 1:\n-        nop\n+\tlldp\t$5, $4, $6\n+\tscdp\t$5, $4, $6\n+\tnop\n \tnop\n \n # Force at least 8 (non-delay-slot) zero bytes, to make 'objdump' print ..."
    },
    {
      "sha": "bef7c44a7c80ba343c6d40c702f7b104ab2c60a1",
      "filename": "gas/testsuite/gas/mips/r6-n32.d",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-n32.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-n32.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6-n32.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -499,4 +499,7 @@ Disassembly of section .text:\n 0+05a0 <[^>]*> 41620024 \tdvp\tv0\n 0+05a4 <[^>]*> 04170000 \tsigrie\t0x0\n 0+05a8 <[^>]*> 0417ffff \tsigrie\t0xffff\n+0+05ac <[^>]*> 7cc52076 \tllwp\ta1,a0,a2\n+0+05b0 <[^>]*> 7cc52066 \tscwp\ta1,a0,a2\n+\n \t\\.\\.\\."
    },
    {
      "sha": "e4d2a28013a24f9a2075640bf4d9bf1f454ac361",
      "filename": "gas/testsuite/gas/mips/r6-n64.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-n64.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6-n64.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6-n64.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -755,4 +755,6 @@ Disassembly of section .text:\n 0+05a0 <[^>]*> 41620024 \tdvp\tv0\n 0+05a4 <[^>]*> 04170000 \tsigrie\t0x0\n 0+05a8 <[^>]*> 0417ffff \tsigrie\t0xffff\n+0+05ac <[^>]*> 7cc52076 \tllwp\ta1,a0,a2\n+0+05b0 <[^>]*> 7cc52066 \tscwp\ta1,a0,a2\n \t\\.\\.\\."
    },
    {
      "sha": "0cbcd1a70029952e89d66b1a945e652963431570",
      "filename": "gas/testsuite/gas/mips/r6.d",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6.d?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -498,4 +498,6 @@ Disassembly of section .text:\n 0+05a0 <[^>]*> 41620024 \tdvp\tv0\n 0+05a4 <[^>]*> 04170000 \tsigrie\t0x0\n 0+05a8 <[^>]*> 0417ffff \tsigrie\t0xffff\n+0+05ac <[^>]*> 7cc52076 \tllwp\ta1,a0,a2\n+0+05b0 <[^>]*> 7cc52066 \tscwp\ta1,a0,a2\n \t\\.\\.\\."
    },
    {
      "sha": "9b7041d718f24f101cc7b8f52ba65087feba09d6",
      "filename": "gas/testsuite/gas/mips/r6.s",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/gas/testsuite/gas/mips/r6.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/mips/r6.s?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -269,6 +269,9 @@ new:\tmaddf.s\t$f0,$f1,$f2\n \tsigrie\t0\n \tsigrie\t0xffff\n \n+\tllwp\t$5, $4, $6\n+\tscwp\t$5, $4, $6\n+\n # Force at least 8 (non-delay-slot) zero bytes, to make 'objdump' print ...\n \t.align  2\n \t.space  8"
    },
    {
      "sha": "1f225b8c8500eb76edff142a93dd169ae2089ae1",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -1,3 +1,9 @@\n+2019-04-26  Andrew Bennett  <andrew.bennett@imgtec.com>\n+\t    Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\t* opcode/mips.h (M_LLWP_AB, M_LLDP_AB): New enum values.\n+\t(M_SCWP_AB, M_SCDP_AB): Likewise.\n+\n 2019-04-25  Maciej W. Rozycki  <macro@linux-mips.org>\n \n \t* opcode/mips.h: Update comment for MIPS32 CODE20 operand."
    },
    {
      "sha": "bc7deecf0be1f810b4b6baa3c39b2c6d01672930",
      "filename": "include/opcode/mips.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/include/opcode/mips.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/include/opcode/mips.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/mips.h?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -1628,7 +1628,9 @@ enum\n   M_LI_SS,\n   M_LL_AB,\n   M_LLD_AB,\n+  M_LLDP_AB,\n   M_LLE_AB,\n+  M_LLWP_AB,\n   M_LQ_AB,\n   M_LW_AB,\n   M_LWE_AB,\n@@ -1679,7 +1681,9 @@ enum\n   M_SAAD_AB,\n   M_SC_AB,\n   M_SCD_AB,\n+  M_SCDP_AB,\n   M_SCE_AB,\n+  M_SCWP_AB,\n   M_SD_AB,\n   M_SDC1_AB,\n   M_SDC2_AB,"
    },
    {
      "sha": "0c2980f5ac73d391c70d126c092a382b60d56f23",
      "filename": "opcodes/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/opcodes/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/opcodes/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/ChangeLog?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -1,3 +1,8 @@\n+2019-04-26  Andrew Bennett  <andrew.bennett@imgtec.com>\n+\t    Faraz Shahbazker  <fshahbazker@wavecomp.com>\n+\n+\t* mips-opc.c (mips_builtin_opcodes): Add llwp, lldp, scwp, scdp.\n+\n 2019-04-24  John Darrington  <john@darrington.wattle.id.au>\n \n         * s12z-opc.h: Add extern \"C\" bracketing to help"
    },
    {
      "sha": "8db29522aa6e981276e7d5dd4ede6e2ff247fa01",
      "filename": "opcodes/mips-opc.c",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a45328b93bdd5399da8a9e56817e445cc2068edd/opcodes/mips-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a45328b93bdd5399da8a9e56817e445cc2068edd/opcodes/mips-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/mips-opc.c?ref=a45328b93bdd5399da8a9e56817e445cc2068edd",
      "patch": "@@ -1300,6 +1300,10 @@ const struct mips_opcode mips_builtin_opcodes[] =\n {\"lld\",\t\t\t\"t,+j(b)\",\t0x7c000037, 0xfc00007f, WR_1|RD_3|LM,\t\t0,\t\tI69,\t\t0,\t0 },\n {\"lld\",\t\t\t\"t,o(b)\",\t0xd0000000, 0xfc000000, WR_1|RD_3|LM,\t\t0,\t\tI3,\t\t0,\tEE|I69 },\n {\"lld\",\t\t\t\"t,A(b)\",\t0,    (int) M_LLD_AB,\tINSN_MACRO,\t\t0,\t\tI3,\t\t0,\tEE },\n+{\"lldp\",\t\t\"t,d,s\",\t0x7c000077, 0xfc0007ff, WR_1|WR_2|RD_3|LM,\t0,\t\tI69,\t\t0,\t0 },\n+{\"lldp\",\t\t\"t,d,A(b)\",\t0,    (int) M_LLDP_AB,\tINSN_MACRO,\t\t0,\t\tI69,\t\t0,\t0 },\n+{\"llwp\",\t\t\"t,d,s\",\t0x7c000076, 0xfc0007ff, WR_1|WR_2|RD_3|LM,\t0,\t\tI37,\t\t0,\t0 },\n+{\"llwp\",\t\t\"t,d,A(b)\",\t0,    (int) M_LLWP_AB,\tINSN_MACRO,\t\t0,\t\tI37,\t\t0,\t0 },\n {\"lq\",\t\t\t\"t,o(b)\",\t0x78000000, 0xfc000000, WR_1|RD_3|LM,\t\t0,\t\tMMI,\t\t0,\t0 },\n {\"lq\",\t\t\t\"t,A(b)\",\t0,    (int) M_LQ_AB,\tINSN_MACRO,\t\t0,\t\tMMI,\t\t0,\t0 },\n {\"lqc2\",\t\t\"+7,o(b)\",\t0xd8000000, 0xfc000000,\tRD_3|WR_C2|LM,\t\t0,\t\tEE,\t\t0,\t0 },\n@@ -1831,6 +1835,10 @@ const struct mips_opcode mips_builtin_opcodes[] =\n {\"scd\",\t\t\t\"t,+j(b)\",\t0x7c000027, 0xfc00007f, MOD_1|RD_3|SM,\t\t0,\t\tI69,\t\t0,\t0 },\n {\"scd\",\t\t\t\"t,o(b)\",\t0xf0000000, 0xfc000000, MOD_1|RD_3|SM,\t\t0,\t\tI3,\t\t0,\tEE|I69 },\n {\"scd\",\t\t\t\"t,A(b)\",\t0,    (int) M_SCD_AB,\tINSN_MACRO,\t\t0,\t\tI3,\t\t0,\tEE },\n+{\"scdp\",\t\t\"t,d,s\",\t0x7c000067, 0xfc0007ff, MOD_1|RD_2|RD_3|SM,\t0,\t\tI69,\t\t0,\t0 },\n+{\"scdp\",\t\t\"t,d,A(b)\",\t0,    (int) M_SCDP_AB,\tINSN_MACRO,\t\t0,\t\tI69,\t\t0,\t0 },\n+{\"scwp\",\t\t\"t,d,s\",\t0x7c000066, 0xfc0007ff, MOD_1|RD_2|RD_3|SM,\t0,\t\tI37,\t\t0,\t0 },\n+{\"scwp\",\t\t\"t,d,A(b)\",\t0,    (int) M_SCWP_AB,\tINSN_MACRO,\t\t0,\t\tI37,\t\t0,\t0 },\n /* The macro has to be first to handle o32 correctly.  */\n {\"sd\",\t\t\t\"t,A(b)\",\t0,    (int) M_SD_AB,\tINSN_MACRO,\t\t0,\t\tI1,\t\t0,\t0 },\n {\"sd\",\t\t\t\"t,o(b)\",\t0xfc000000, 0xfc000000,\tRD_1|RD_3|SM,\t\t0,\t\tI3,\t\t0,\t0 },"
    }
  ]
}