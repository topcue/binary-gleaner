{
  "sha": "50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTBmZjY3ZTZjZjY1ZGJlMWI4ZmJiZGI3YTZjMmU0MzkxOWFmOTVmNA==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-12T09:32:44Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-04-13T02:42:43Z"
    },
    "message": "ld TDIRS substitution\n\nIt is no longer true that autoconf/automake cannot substitute vars\nwith embedded new-lines.\n\n\t* configure.ac (TDIRS): Build up tdirs in this variable and\n\tAC_SUBST, also using AM_SUBST_NOTMAKE.\n\t* configure: Regenerate.\n\t* Makefile.am (DISTCLEANFILES): Remove tdirs.\n\t* Makefile.in: Regenerate.",
    "tree": {
      "sha": "5da1073c6f1f1a089bef93c79f842c3b54bb08d8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5da1073c6f1f1a089bef93c79f842c3b54bb08d8"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "35add35e85c21f02e3e5808273cb77b24069b0aa",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/35add35e85c21f02e3e5808273cb77b24069b0aa",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/35add35e85c21f02e3e5808273cb77b24069b0aa"
    }
  ],
  "stats": {
    "total": 90,
    "additions": 28,
    "deletions": 62
  },
  "files": [
    {
      "sha": "9b5e3a3cb1c1a6a7108a7dbbd9bbb45904e4f3e4",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
      "patch": "@@ -1,3 +1,11 @@\n+2019-04-13  Alan Modra  <amodra@gmail.com>\n+\n+\t* configure.ac (TDIRS): Build up tdirs in this variable and\n+\tAC_SUBST, also using AM_SUBST_NOTMAKE.\n+\t* configure: Regenerate.\n+\t* Makefile.am (DISTCLEANFILES): Remove tdirs.\n+\t* Makefile.in: Regenerate.\n+\n 2019-04-12  Nick Clifton  <nickc@redhat.com>\n \n \tPR 24450"
    },
    {
      "sha": "7f8722dc2d07af61ca8eedf47bb18c33529f88ff",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
      "patch": "@@ -2013,7 +2013,7 @@ diststuff: info $(EXTRA_DIST)\n # ld.1 to support parallel build.\n info-recursive: ld.1\n \n-DISTCLEANFILES = tdirs site.exp development.exp site.bak stringify.sed\n+DISTCLEANFILES = site.exp development.exp site.bak stringify.sed\n distclean-local:\n \trm -rf ldscripts\n "
    },
    {
      "sha": "1a5da09d3d19bbb4f8c0c1182984697e97960e15",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
      "patch": "@@ -1045,7 +1045,7 @@ CLEANFILES = dep.sed DEP DEPA DEP1 DEP2 spu_ovl.s spu_ovl.@OBJEXT@ spu_icache.s\n EXTRA_DIST = ldgram.c ldgram.h ldlex.c emultempl/spu_ovl.@OBJEXT@_c \\\n \t     emultempl/spu_icache.@OBJEXT@_c deffilep.c deffilep.h $(man_MANS)\n \n-DISTCLEANFILES = tdirs site.exp development.exp site.bak stringify.sed\n+DISTCLEANFILES = site.exp development.exp site.bak stringify.sed\n all: $(BUILT_SOURCES) config.h\n \t$(MAKE) $(AM_MAKEFLAGS) all-recursive\n "
    },
    {
      "sha": "6cedd332172d68faaaae360f00b117cf6318acb0",
      "filename": "ld/configure",
      "status": "modified",
      "additions": 13,
      "deletions": 51,
      "changes": 64,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/configure?ref=50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
      "patch": "@@ -639,6 +639,7 @@ EMULATION_LIBPATH\n LIB_PATH\n EMUL_EXTRA_OFILES\n EMULATION_OFILES\n+TDIRS\n EMUL\n elf_plt_unwind_list_options\n elf_shlib_list_options\n@@ -804,7 +805,7 @@ PACKAGE_TARNAME\n PACKAGE_NAME\n PATH_SEPARATOR\n SHELL'\n-ac_subst_files='TDIRS'\n+ac_subst_files=''\n ac_user_opts='\n enable_option_checking\n enable_dependency_tracking\n@@ -12026,7 +12027,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12029 \"configure\"\n+#line 12030 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12132,7 +12133,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12135 \"configure\"\n+#line 12136 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -17430,8 +17431,7 @@ EMUL=\n all_emuls=\n all_emul_extras=\n all_libpath=\n-\n-rm -f tdirs\n+TDIRS=\n \n # If the host is 64-bit, then we enable 64-bit targets by default.\n # This is consistent with what ../bfd/configure.ac does.\n@@ -17515,7 +17515,8 @@ do\n \t  all_emuls=\"$all_emuls e${i}.o\"\n \t  eval result=\\$tdir_$i\n \t  test -z \"$result\" && result=$targ_alias\n-\t  echo tdir_$i=$result >> tdirs\n+\t  TDIRS=\"$TDIRS\n+tdir_$i=$result\"\n \t  case \"${i}\" in\n \t  *elf*)\n \t    elf_list_options=TRUE\n@@ -17614,7 +17615,7 @@ _ACEOF\n \n \n \n-TDIRS=tdirs\n+\n \n \n if test x${all_targets} = xtrue; then\n@@ -18839,24 +18840,7 @@ ac_tmp=$tmp\n # This happens for instance with `./config.status config.h'.\n if test -n \"$CONFIG_FILES\"; then\n \n-if $AWK 'BEGIN { getline <\"/dev/null\" }' </dev/null 2>/dev/null; then\n-  ac_cs_awk_getline=:\n-  ac_cs_awk_pipe_init=\n-  ac_cs_awk_read_file='\n-      while ((getline aline < (F[key])) > 0)\n-\tprint(aline)\n-      close(F[key])'\n-  ac_cs_awk_pipe_fini=\n-else\n-  ac_cs_awk_getline=false\n-  ac_cs_awk_pipe_init=\"print \\\"cat <<'|#_!!_#|' &&\\\"\"\n-  ac_cs_awk_read_file='\n-      print \"|#_!!_#|\"\n-      print \"cat \" F[key] \" &&\"\n-      '$ac_cs_awk_pipe_init\n-  # The final `:' finishes the AND list.\n-  ac_cs_awk_pipe_fini='END { print \"|#_!!_#|\"; print \":\" }'\n-fi\n+\n ac_cr=`echo X | tr X '\\015'`\n # On cygwin, bash can eat \\r inside `` if the user requested igncr.\n # But we know of no other shell where ac_cr would be empty at this\n@@ -18874,17 +18858,6 @@ fi\n echo 'BEGIN {' >\"$ac_tmp/subs1.awk\" &&\n _ACEOF\n \n-# Create commands to substitute file output variables.\n-{\n-  echo \"cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1\" &&\n-  echo 'cat >>\"\\$ac_tmp/subs1.awk\" <<\\\\_ACAWK &&' &&\n-  echo \"$ac_subst_files\" | sed 's/.*/F[\"&\"]=\"$&\"/' &&\n-  echo \"_ACAWK\" &&\n-  echo \"_ACEOF\"\n-} >conf$$files.sh &&\n-. ./conf$$files.sh ||\n-  as_fn_error $? \"could not make $CONFIG_STATUS\" \"$LINENO\" 5\n-rm -f conf$$files.sh\n \n {\n   echo \"cat >conf$$subs.awk <<_ACEOF\" &&\n@@ -18961,7 +18934,7 @@ _ACAWK\n cat >>\"\\$ac_tmp/subs1.awk\" <<_ACAWK &&\n   for (key in S) S_is_set[key] = 1\n   FS = \"\u0007\"\n-  \\$ac_cs_awk_pipe_init\n+\n }\n {\n   line = $ 0\n@@ -18979,16 +18952,10 @@ cat >>\"\\$ac_tmp/subs1.awk\" <<_ACAWK &&\n     } else\n       len += 1 + keylen\n   }\n-  if (nfields == 3 && !substed) {\n-    key = field[2]\n-    if (F[key] != \"\" && line ~ /^[\t ]*@.*@[\t ]*$/) {\n-      \\$ac_cs_awk_read_file\n-      next\n-    }\n-  }\n+\n   print line\n }\n-\\$ac_cs_awk_pipe_fini\n+\n _ACAWK\n _ACEOF\n cat >>$CONFIG_STATUS <<\\_ACEOF || ac_write_fail=1\n@@ -19335,12 +19302,7 @@ s&@INSTALL@&$ac_INSTALL&;t t\n s&@MKDIR_P@&$ac_MKDIR_P&;t t\n $ac_datarootdir_hack\n \"\n-eval sed \\\"\\$ac_sed_extra\\\" \"$ac_file_inputs\" |\n-if $ac_cs_awk_getline; then\n-  $AWK -f \"$ac_tmp/subs.awk\"\n-else\n-  $AWK -f \"$ac_tmp/subs.awk\" | $SHELL\n-fi \\\n+eval sed \\\"\\$ac_sed_extra\\\" \"$ac_file_inputs\" | $AWK -f \"$ac_tmp/subs.awk\" \\\n   >$ac_tmp/out || as_fn_error $? \"could not create $ac_file\" \"$LINENO\" 5\n \n test -z \"$ac_datarootdir_hack$ac_datarootdir_seen\" &&"
    },
    {
      "sha": "ec434066afdcec88f376f0134ba6140832af1286",
      "filename": "ld/configure.ac",
      "status": "modified",
      "additions": 5,
      "deletions": 9,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4/ld/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/configure.ac?ref=50ff67e6cf65dbe1b8fbbdb7a6c2e43919af95f4",
      "patch": "@@ -319,12 +319,7 @@ EMUL=\n all_emuls=\n all_emul_extras=\n all_libpath=\n-\n-dnl We need to get an arbitrary number of tdir definitions into\n-dnl Makefile.  We can't do it using AC_SUBST, because autoconf does\n-dnl not permit literal newlines in an AC_SUBST variables.  So we use a\n-dnl file.\n-rm -f tdirs\n+TDIRS=\n \n # If the host is 64-bit, then we enable 64-bit targets by default.\n # This is consistent with what ../bfd/configure.ac does.\n@@ -376,7 +371,8 @@ do\n \t  all_emuls=\"$all_emuls e${i}.o\"\n \t  eval result=\\$tdir_$i\n \t  test -z \"$result\" && result=$targ_alias\n-\t  echo tdir_$i=$result >> tdirs\n+\t  TDIRS=\"$TDIRS\n+tdir_$i=$result\"\n \t  case \"${i}\" in\n \t  *elf*)\n \t    elf_list_options=TRUE\n@@ -463,8 +459,8 @@ AC_SUBST(elf_shlib_list_options)\n AC_SUBST(elf_plt_unwind_list_options)\n AC_SUBST(EMUL)\n \n-TDIRS=tdirs\n-AC_SUBST_FILE(TDIRS)\n+AC_SUBST(TDIRS)\n+AM_SUBST_NOTMAKE(TDIRS)\n \n if test x${all_targets} = xtrue; then\n   if test x${want64} = xtrue; then"
    }
  ]
}