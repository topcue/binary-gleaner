{
  "sha": "88f68ee277e3f3dd5b94360e797f06e6378ea844",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODhmNjhlZTI3N2UzZjNkZDViOTQzNjBlNzk3ZjA2ZTYzNzhlYTg0NA==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-16T06:46:11Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-30T06:09:38Z"
    },
    "message": "sim: m68hc11: stop making hardware conditional\n\nThis port doesn't build if these hardware modules are omitted, and\nthere's no reason we need to make it conditional at build time, so\nalways enable it.  The hardware devices only get turned on if the\nuser requests it at runtime via hardware settings.",
    "tree": {
      "sha": "175dd0389d1b325fe8417d734c696b71cef29763",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/175dd0389d1b325fe8417d734c696b71cef29763"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/88f68ee277e3f3dd5b94360e797f06e6378ea844",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/88f68ee277e3f3dd5b94360e797f06e6378ea844",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/88f68ee277e3f3dd5b94360e797f06e6378ea844",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/88f68ee277e3f3dd5b94360e797f06e6378ea844/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "f4dd74915b2139dbc64eecc38a0acda40408c3b2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f4dd74915b2139dbc64eecc38a0acda40408c3b2",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f4dd74915b2139dbc64eecc38a0acda40408c3b2"
    }
  ],
  "stats": {
    "total": 54,
    "additions": 22,
    "deletions": 32
  },
  "files": [
    {
      "sha": "eb1dea331798fe8db6a20b9f97ad640134fe0545",
      "filename": "sim/m68hc11/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m68hc11/ChangeLog?ref=88f68ee277e3f3dd5b94360e797f06e6378ea844",
      "patch": "@@ -1,3 +1,8 @@\n+2021-01-30  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* configure.ac (SIM_AC_OPTION_HARDWARE): Inline variables.\n+\t* configure: Regenerate.\n+\n 2021-01-11  Mike Frysinger  <vapier@gentoo.org>\n \n \t* config.in, configure: Regenerate."
    },
    {
      "sha": "8b6ba08c21e0e1fe00b903e3b9ee94f51db63149",
      "filename": "sim/m68hc11/configure",
      "status": "modified",
      "additions": 15,
      "deletions": 19,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m68hc11/configure?ref=88f68ee277e3f3dd5b94360e797f06e6378ea844",
      "patch": "@@ -6908,7 +6908,15 @@ fi\n test -z \"$AR\" && AR=ar\n if test -n \"$plugin_option\"; then\n   if $AR --help 2>&1 | grep -q \"\\--plugin\"; then\n-    AR=\"$AR $plugin_option\"\n+    touch conftest.c\n+    $AR $plugin_option rc conftest.a conftest.c\n+    if test \"$?\" != 0; then\n+      { $as_echo \"$as_me:${as_lineno-$LINENO}: WARNING: Failed: $AR $plugin_option rc\" >&5\n+$as_echo \"$as_me: WARNING: Failed: $AR $plugin_option rc\" >&2;}\n+    else\n+      AR=\"$AR $plugin_option\"\n+    fi\n+    rm -f conftest.*\n   fi\n fi\n test -z \"$AR_FLAGS\" && AR_FLAGS=cru\n@@ -12932,7 +12940,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12935 \"configure\"\n+#line 12943 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13038,7 +13046,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 13041 \"configure\"\n+#line 13049 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13778,24 +13786,12 @@ $as_echo \"${WARN_CFLAGS} ${WERROR_CFLAGS}\" >&6; }\n fi\n \n \n-#\n-# Add simulated hardware devices\n-#\n-hw_enabled=no\n-case \"${target}\" in\n-  m68hc11-*-*|m6811-*-*)\n-\thw_enabled=yes\n-\thw_extra_devices=\"m68hc11 m68hc11sio m68hc11eepr m68hc11tim m68hc11spi nvram\"\n-\tSIM_SUBTARGET=\"$SIM_SUBTARGET -DTARGET_M68HC11=1\"\n-\t;;\n-esac\n-\n-if test \"$hw_devices\"; then\n-  hardware=\"$hw_devices\"\n+if test \"\"; then\n+  hardware=\"\"\n else\n   hardware=\"cfi core pal glue\"\n fi\n-hardware=\"$hardware $hw_extra_devices\"\n+hardware=\"$hardware m68hc11 m68hc11sio m68hc11eepr m68hc11tim m68hc11spi nvram\"\n \n sim_hw_cflags=\"-DWITH_HW=1\"\n sim_hw=\"$hardware\"\n@@ -13805,7 +13801,7 @@ sim_hw_objs=\"\\$(SIM_COMMON_HW_OBJS) `echo $sim_hw | sed -e 's/\\([^ ][^ ]*\\)/dv-\\\n if test \"${enable_sim_hardware+set}\" = set; then :\n   enableval=$enable_sim_hardware;\n else\n-  enable_sim_hardware=\"$hw_enabled\"\n+  enable_sim_hardware=\"yes\"\n fi\n \n case ${enable_sim_hardware} in"
    },
    {
      "sha": "e1c758a6e23f03a1c1e48d61208e2af5a2fb1f33",
      "filename": "sim/m68hc11/configure.ac",
      "status": "modified",
      "additions": 2,
      "deletions": 13,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/88f68ee277e3f3dd5b94360e797f06e6378ea844/sim/m68hc11/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/m68hc11/configure.ac?ref=88f68ee277e3f3dd5b94360e797f06e6378ea844",
      "patch": "@@ -8,18 +8,7 @@ dnl Options available in this module\n SIM_AC_OPTION_ENDIAN(BIG)\n SIM_AC_OPTION_ALIGNMENT(NONSTRICT_ALIGNMENT)\n SIM_AC_OPTION_WARNINGS(no)\n-\n-#\n-# Add simulated hardware devices\n-#\n-hw_enabled=no\n-case \"${target}\" in\n-  m68hc11-*-*|m6811-*-*)\n-\thw_enabled=yes\n-\thw_extra_devices=\"m68hc11 m68hc11sio m68hc11eepr m68hc11tim m68hc11spi nvram\"\n-\tSIM_SUBTARGET=\"$SIM_SUBTARGET -DTARGET_M68HC11=1\"\n-\t;;\n-esac\n-SIM_AC_OPTION_HARDWARE($hw_enabled,$hw_devices,$hw_extra_devices)\n+SIM_AC_OPTION_HARDWARE(yes,,\n+  m68hc11 m68hc11sio m68hc11eepr m68hc11tim m68hc11spi nvram)\n \n SIM_AC_OUTPUT"
    }
  ]
}