{
  "sha": "55cf302157892947a18d1ecd0cdc89a49119b46b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTVjZjMwMjE1Nzg5Mjk0N2ExOGQxZWNkMGNkYzg5YTQ5MTE5YjQ2Yg==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:58Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:12Z"
    },
    "message": "gdbserver: turn target op 'handle_monitor_command' into a method\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's handle_monitor_command op into a\n\tmethod of process_target.\n\n\t* target.h (struct process_stratum_target): Remove the target op.\n\t(class process_target): Add the target op.\n\t(target_handle_monitor_command): Update the macro.\n\t* target.cc (process_target::handle_monitor_command): Define.\n\n\tUpdate the derived classes and callers below.\n\n\t* server.cc (handle_query): Update.\n\t* linux-low.cc (linux_target_ops): Update.\n\t(linux_process_target::handle_monitor_command): Define.\n\t* linux-low.h (class linux_process_target): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t* win32-low.cc (win32_target_ops): Update.",
    "tree": {
      "sha": "072a2017c93e464f0f4f3e03e23ccb66389c98b5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/072a2017c93e464f0f4f3e03e23ccb66389c98b5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/55cf302157892947a18d1ecd0cdc89a49119b46b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55cf302157892947a18d1ecd0cdc89a49119b46b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/55cf302157892947a18d1ecd0cdc89a49119b46b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55cf302157892947a18d1ecd0cdc89a49119b46b/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "fb00dfcef00f12501e52d2259464ee85d81334c5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fb00dfcef00f12501e52d2259464ee85d81334c5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/fb00dfcef00f12501e52d2259464ee85d81334c5"
    }
  ],
  "stats": {
    "total": 57,
    "additions": 43,
    "deletions": 14
  },
  "files": [
    {
      "sha": "e9cda50689640b5643100ee16a59a0cd59ddfbb5",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -1,3 +1,23 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's handle_monitor_command op into a\n+\tmethod of process_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target op.\n+\t(class process_target): Add the target op.\n+\t(target_handle_monitor_command): Update the macro.\n+\t* target.cc (process_target::handle_monitor_command): Define.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* server.cc (handle_query): Update.\n+\t* linux-low.cc (linux_target_ops): Update.\n+\t(linux_process_target::handle_monitor_command): Define.\n+\t* linux-low.h (class linux_process_target): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's handle_new_gdb_connection op into a"
    },
    {
      "sha": "19d84c2d042d853b951f5baa709d97aa5eec8beb",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 10,
      "deletions": 5,
      "changes": 15,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -6398,6 +6398,16 @@ linux_process_target::handle_new_gdb_connection ()\n     });\n }\n \n+int\n+linux_process_target::handle_monitor_command (char *mon)\n+{\n+#ifdef USE_THREAD_DB\n+  return thread_db_handle_monitor_command (mon);\n+#else\n+  return 0;\n+#endif\n+}\n+\n static int\n linux_supports_disable_randomization (void)\n {\n@@ -7429,11 +7439,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-#ifdef USE_THREAD_DB\n-  thread_db_handle_monitor_command,\n-#else\n-  NULL,\n-#endif\n   linux_common_core_of_thread,\n   linux_read_loadmap,\n   linux_process_qsupported,"
    },
    {
      "sha": "d3157220730bbd4c5944638cbc46b0537e7e0d52",
      "filename": "gdbserver/linux-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/linux-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/linux-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.h?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -373,6 +373,8 @@ class linux_process_target : public process_target\n   bool supports_exec_events () override;\n \n   void handle_new_gdb_connection () override;\n+\n+  int handle_monitor_command (char *mon) override;\n };\n \n #define get_thread_lwp(thr) ((struct lwp_info *) (thread_target_data (thr)))"
    },
    {
      "sha": "d489886755ef694dfcaff4d6dec09a5f092966c6",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -735,7 +735,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  NULL,  /* handle_monitor_command */\n   NULL,  /* core_of_thread */\n   NULL,  /* read_loadmap */\n   NULL,  /* process_qsupported */"
    },
    {
      "sha": "9cd30da32e63acc69e5b2fbae3cc93116a9365cd",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -947,7 +947,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  NULL, /* handle_monitor_command */\n   NULL, /* core_of_thread */\n   NULL, /* read_loadmap */\n   NULL, /* process_qsupported */"
    },
    {
      "sha": "f9817881d77312116e04cbbbb3245250b1bd33bd",
      "filename": "gdbserver/server.cc",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/server.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/server.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/server.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -2577,8 +2577,7 @@ handle_query (char *own_buf, int packet_len, int *new_packet_len_p)\n \n       write_ok (own_buf);\n \n-      if (the_target->handle_monitor_command == NULL\n-\t  || (*the_target->handle_monitor_command) (mon) == 0)\n+      if (the_target->pt->handle_monitor_command (mon) == 0)\n \t/* Default processing.  */\n \thandle_monitor_command (mon, own_buf);\n "
    },
    {
      "sha": "74cd90a48a4bd6c1d8fe7a281b3b8200315805ab",
      "filename": "gdbserver/target.cc",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/target.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/target.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -577,3 +577,9 @@ process_target::handle_new_gdb_connection ()\n {\n   /* Nop.  */\n }\n+\n+int\n+process_target::handle_monitor_command (char *mon)\n+{\n+  return 0;\n+}"
    },
    {
      "sha": "b607ca62540450f428305e217f4de1749c41c63e",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 4,
      "deletions": 4,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -70,10 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* If not NULL, target-specific routine to process monitor command.\n-     Returns 1 if handled, or 0 to perform default processing.  */\n-  int (*handle_monitor_command) (char *);\n-\n   /* Returns the core given a thread, or -1 if not known.  */\n   int (*core_of_thread) (ptid_t);\n \n@@ -486,6 +482,10 @@ class process_target\n \n   /* Allows target to re-initialize connection-specific settings.  */\n   virtual void handle_new_gdb_connection ();\n+\n+  /* The target-specific routine to process monitor command.\n+     Returns 1 if handled, or 0 to perform default processing.  */\n+  virtual int handle_monitor_command (char *mon);\n };\n \n extern process_stratum_target *the_target;"
    },
    {
      "sha": "fcb3906197d9476c1790fce82e5cd86128d4665c",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55cf302157892947a18d1ecd0cdc89a49119b46b/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=55cf302157892947a18d1ecd0cdc89a49119b46b",
      "patch": "@@ -1852,7 +1852,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-  NULL, /* handle_monitor_command */\n   NULL, /* core_of_thread */\n   NULL, /* read_loadmap */\n   NULL, /* process_qsupported */"
    }
  ]
}