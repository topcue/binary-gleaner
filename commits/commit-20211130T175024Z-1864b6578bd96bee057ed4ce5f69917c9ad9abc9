{
  "sha": "1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
  "node_id": "C_kwDOANOeidoAKDE4NjRiNjU3OGJkOTZiZWUwNTdlZDRjZTVmNjk5MTdjOWFkOWFiYzk",
  "commit": {
    "author": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2021-11-30T17:50:24Z"
    },
    "committer": {
      "name": "Richard Sandiford",
      "email": "richard.sandiford@arm.com",
      "date": "2021-11-30T17:50:24Z"
    },
    "message": "aarch64: Mark PMSIDR_EL1 as read-only\n\nWe were incorrectly allowing writes to PMSIDR_EL1, which is\na read-only register.\n[https://developer.arm.com/documentation/ddi0595/2021-09/AArch64-Registers/PMSIDR-EL1--Sampling-Profiling-ID-Register?lang=en]\n\nopcodes/\n\t* aarch64-opc.c (aarch64_sys_regs): Make pmsidr_el1 as F_REG_READ.\n\ngas/\n\t* testsuite/gas/aarch64/msr.s: Remove write to pmsidr_el1.\n\t* testsuite/gas/aarch64/msr.d: Update accordingly.\n\t* testsuite/gas/aarch64/illegal-sysreg-2.s,\n\t* testsuite/gas/aarch64/illegal-sysreg-2.d,\n\t* testsuite/gas/aarch64/illegal-sysreg-2.l: New test.",
    "tree": {
      "sha": "6dc19b9e2e0f6f5b33c26f5d65f36f86730e958c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6dc19b9e2e0f6f5b33c26f5d65f36f86730e958c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/comments",
  "author": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "rsandifo-arm",
    "id": 28043039,
    "node_id": "MDQ6VXNlcjI4MDQzMDM5",
    "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/rsandifo-arm",
    "html_url": "https://github.com/rsandifo-arm",
    "followers_url": "https://api.github.com/users/rsandifo-arm/followers",
    "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}",
    "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions",
    "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs",
    "repos_url": "https://api.github.com/users/rsandifo-arm/repos",
    "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}",
    "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "31a8056f2f519fda71682cffd0eac6ba87a59c8e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/31a8056f2f519fda71682cffd0eac6ba87a59c8e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/31a8056f2f519fda71682cffd0eac6ba87a59c8e"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 9,
    "deletions": 4
  },
  "files": [
    {
      "sha": "bff7ea7d20debe5924d2efed91effb806d42fc81",
      "filename": "gas/testsuite/gas/aarch64/illegal-sysreg-2.d",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/illegal-sysreg-2.d?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -0,0 +1,2 @@\n+#source: illegal-sysreg-2.s\n+#warning_output: illegal-sysreg-2.l"
    },
    {
      "sha": "60aa5c26ad91a7fed77b19fa2f4608a7595dbe2f",
      "filename": "gas/testsuite/gas/aarch64/illegal-sysreg-2.l",
      "status": "added",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/illegal-sysreg-2.l?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -0,0 +1,2 @@\n+.*: Assembler messages:\n+.*: Warning: specified register cannot be written to at operand 1 -- `msr pmsidr_el1,x0'"
    },
    {
      "sha": "f95584cc56bd9cdff3f294d31480cef6c0d0734e",
      "filename": "gas/testsuite/gas/aarch64/illegal-sysreg-2.s",
      "status": "added",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/illegal-sysreg-2.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/illegal-sysreg-2.s?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -0,0 +1,3 @@\n+/* Write to R/O system registers.  */\n+.arch armv8.2-a+profile\n+msr pmsidr_el1, x0"
    },
    {
      "sha": "fedf2eecd0dbcd5142658b1d76dbe618a925ba0e",
      "filename": "gas/testsuite/gas/aarch64/msr.d",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/msr.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/msr.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/msr.d?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -24,5 +24,4 @@ Disassembly of section \\.text:\n   3c:\td5300040 \tmrs\tx0, osdtrrx_el1\n   40:\td5100340 \tmsr\tosdtrtx_el1, x0\n   44:\td5300340 \tmrs\tx0, osdtrtx_el1\n-  48:\td51899e0 \tmsr\tpmsidr_el1, x0\n-  4c:\td53899e0 \tmrs\tx0, pmsidr_el1\n+  48:\td53899e0 \tmrs\tx0, pmsidr_el1"
    },
    {
      "sha": "36ebfe441f40174b3bf3fccf19183b53977ab036",
      "filename": "gas/testsuite/gas/aarch64/msr.s",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/msr.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/gas/testsuite/gas/aarch64/msr.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/aarch64/msr.s?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -47,5 +47,4 @@ func:\n \tmsr osdtrtx_el1, x0\n \tmrs x0, osdtrtx_el1\n \n-\tmsr pmsidr_el1, x0\n \tmrs x0, pmsidr_el1"
    },
    {
      "sha": "372101a86a7a61899147921cd0513c5f970de5a2",
      "filename": "opcodes/aarch64-opc.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/opcodes/aarch64-opc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1864b6578bd96bee057ed4ce5f69917c9ad9abc9/opcodes/aarch64-opc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/opcodes/aarch64-opc.c?ref=1864b6578bd96bee057ed4ce5f69917c9ad9abc9",
      "patch": "@@ -4346,7 +4346,7 @@ const aarch64_sys_reg aarch64_sys_regs [] =\n   SR_PROFILE (\"pmsfcr_el1\",\tCPENC (3,0,C9,C9,4),\t0),\n   SR_PROFILE (\"pmsevfr_el1\",\tCPENC (3,0,C9,C9,5),\t0),\n   SR_PROFILE (\"pmslatfr_el1\",\tCPENC (3,0,C9,C9,6),\t0),\n-  SR_PROFILE (\"pmsidr_el1\",\tCPENC (3,0,C9,C9,7),\t0),\n+  SR_PROFILE (\"pmsidr_el1\",\tCPENC (3,0,C9,C9,7),\tF_REG_READ),\n   SR_PROFILE (\"pmscr_el2\",\tCPENC (3,4,C9,C9,0),\t0),\n   SR_PROFILE (\"pmscr_el12\",\tCPENC (3,5,C9,C9,0),\t0),\n   SR_CORE (\"pmcr_el0\",\t\tCPENC (3,3,C9,C12,0),\t0),"
    }
  ]
}