{
  "sha": "3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6M2NmMmYyMzc3ZTQ2MDYwOGI5NGE4YmE1YzNmMjNjN2U0YjJkYzIzMg==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-11-25T22:00:03Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2019-11-25T22:00:03Z"
    },
    "message": "[gdb/contrib] Add -c option to words.sh script\n\nThe words.sh script in its current form extracts c comments from files, which\nit then transforms into a list of words.\n\nTo use the script on the documentation (as I did for commit 6b92c0d3533\n\"[gdb/doc] Fix typos\"), I needed to disable the \"extract c comments\" part.\n\nAdd an option -c that enables extracting c comments, and is off by default.\n\ngdb/ChangeLog:\n\n2019-11-25  Tom de Vries  <tdevries@suse.de>\n\n\t* contrib/words.sh: Add -c option.\n\nChange-Id: Ifa34d435b3c41b3ff845dc07ae4b0d9f02d92a2d",
    "tree": {
      "sha": "610a000a024e7a3601004d7ab6d704b663164fb4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/610a000a024e7a3601004d7ab6d704b663164fb4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5b89c67adb1c6340db2f5afa5030f2bea7c583f4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5b89c67adb1c6340db2f5afa5030f2bea7c583f4",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5b89c67adb1c6340db2f5afa5030f2bea7c583f4"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 25,
    "deletions": 8
  },
  "files": [
    {
      "sha": "fdba64eb2f6eac96bcb7a311cb23bd8ff34693b5",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
      "patch": "@@ -1,3 +1,7 @@\n+2019-11-25  Tom de Vries  <tdevries@suse.de>\n+\n+\t* contrib/words.sh: Add -c option.\n+\n 2019-11-25  Christian Biesinger  <cbiesinger@google.com>\n \n \t* solib.c (solib_find_1): Change int to bool."
    },
    {
      "sha": "d4c436d608c1824061a76f70a7f30f972ee27e6b",
      "filename": "gdb/contrib/words.sh",
      "status": "modified",
      "additions": 21,
      "deletions": 8,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232/gdb/contrib/words.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232/gdb/contrib/words.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/contrib/words.sh?ref=3cf2f2377e460608b94a8ba5c3f23c7e4b2dc232",
      "patch": "@@ -14,17 +14,20 @@\n # You should have received a copy of the GNU General Public License\n # along with this program.  If not, see <http://www.gnu.org/licenses/>.\n \n-# This script intends to facilitate spell checking of comments in C sources.\n+# This script intends to facilitate spell checking of source/doc files.\n # It:\n-# - extracts comments from C files\n-# - transforms the comments into a list of lowercase words\n+# - transforms the files into a list of lowercase words\n # - prefixes each word with the frequency\n # - filters out words within a frequency range\n # - sorts the words, longest first\n #\n+# If '-c' is passed as option, it operates on the C comments only, rather than\n+# on the entire file.\n+#\n # For:\n # ...\n-# $ ./gdb/contrib/words.sh $(find gdb -type f -name \"*.c\" -o -name \"*.h\")\n+# $ files=$(find gdb -type f -name \"*.c\" -o -name \"*.h\")\n+# $ ./gdb/contrib/words.sh -c $files\n # ...\n # it generates a list of ~15000 words prefixed with frequency.\n #\n@@ -36,7 +39,8 @@\n #\n # And for:\n # ...\n-# $ ./gdb/contrib/words.sh -f 1 $(find gdb -type f -name \"*.c\" -o -name \"*.h\")\n+# $ files=$(find gdb -type f -name \"*.c\" -o -name \"*.h\")\n+# $ ./gdb/contrib/words.sh -c -f 1 $files\n # ...\n # it generates a list of ~5000 words with frequency 1.\n #\n@@ -45,8 +49,13 @@\n \n minfreq=\n maxfreq=\n+c=false\n while [ $# -gt 0 ]; do\n     case \"$1\" in\n+\t-c)\n+\t    c=true\n+\t    shift\n+\t    ;;\n \t--freq|-f)\n \t    minfreq=$2\n \t    maxfreq=$2\n@@ -111,9 +120,13 @@ EOF\n # Stabilize sort.\n export LC_ALL=C\n \n-awk \\\n-    -f \"$awkfile\" \\\n-    -- \"$@\" \\\n+if $c; then\n+    awk \\\n+\t-f \"$awkfile\" \\\n+\t-- \"$@\"\n+else\n+    cat \"$@\"\n+fi \\\n     | sed \\\n \t  -e 's/[!\"?;:%^$~#{}`&=@,. \\t\\/_()|<>\\+\\*-]/\\n/g' \\\n \t  -e 's/\\[/\\n/g' \\"
    }
  ]
}