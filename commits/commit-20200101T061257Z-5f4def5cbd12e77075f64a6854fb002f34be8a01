{
  "sha": "5f4def5cbd12e77075f64a6854fb002f34be8a01",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NWY0ZGVmNWNiZDEyZTc3MDc1ZjY0YTY4NTRmYjAwMmYzNGJlOGEwMQ==",
  "commit": {
    "author": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-01-01T06:12:57Z"
    },
    "committer": {
      "name": "Joel Brobecker",
      "email": "brobecker@adacore.com",
      "date": "2020-01-01T06:12:57Z"
    },
    "message": "gdb/copyright.py: Convert to Python 3\n\ngdb/ChangeLog:\n\n        * copyright.py: Convert to Python 3.",
    "tree": {
      "sha": "45b5e2777062edac7609609f1ca1d1a4c11ad560",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/45b5e2777062edac7609609f1ca1d1a4c11ad560"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5f4def5cbd12e77075f64a6854fb002f34be8a01",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5f4def5cbd12e77075f64a6854fb002f34be8a01",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5f4def5cbd12e77075f64a6854fb002f34be8a01",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5f4def5cbd12e77075f64a6854fb002f34be8a01/comments",
  "author": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "brobecke",
    "id": 11981700,
    "node_id": "MDQ6VXNlcjExOTgxNzAw",
    "avatar_url": "https://avatars.githubusercontent.com/u/11981700?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/brobecke",
    "html_url": "https://github.com/brobecke",
    "followers_url": "https://api.github.com/users/brobecke/followers",
    "following_url": "https://api.github.com/users/brobecke/following{/other_user}",
    "gists_url": "https://api.github.com/users/brobecke/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/brobecke/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/brobecke/subscriptions",
    "organizations_url": "https://api.github.com/users/brobecke/orgs",
    "repos_url": "https://api.github.com/users/brobecke/repos",
    "events_url": "https://api.github.com/users/brobecke/events{/privacy}",
    "received_events_url": "https://api.github.com/users/brobecke/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "51fd40020e1e0b21642cdec9c749f2e3862939ea",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/51fd40020e1e0b21642cdec9c749f2e3862939ea",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/51fd40020e1e0b21642cdec9c749f2e3862939ea"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 24,
    "deletions": 16
  },
  "files": [
    {
      "sha": "a570039a88f3e0a4503fb7607d6a14a0eda1bc0b",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5f4def5cbd12e77075f64a6854fb002f34be8a01/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5f4def5cbd12e77075f64a6854fb002f34be8a01/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=5f4def5cbd12e77075f64a6854fb002f34be8a01",
      "patch": "@@ -1,3 +1,7 @@\n+2020-01-01  Joel Brobecker  <brobecker@adacore.com>\n+\n+\t* copyright.py: Convert to Python 3.\n+\n 2020-01-01  Joel Brobecker  <brobecker@adacore.com>\n \n \t* copyright.py: Adapt after move of gnulib directory from gdb"
    },
    {
      "sha": "2f468441ae99396249c69aaaaa3dbacbbb0e38d4",
      "filename": "gdb/copyright.py",
      "status": "modified",
      "additions": 20,
      "deletions": 16,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5f4def5cbd12e77075f64a6854fb002f34be8a01/gdb/copyright.py",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5f4def5cbd12e77075f64a6854fb002f34be8a01/gdb/copyright.py",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/copyright.py?ref=5f4def5cbd12e77075f64a6854fb002f34be8a01",
      "patch": "@@ -1,4 +1,4 @@\n-#! /usr/bin/env python\n+#! /usr/bin/env python3\n \n # Copyright (C) 2011-2019 Free Software Foundation, Inc.\n #\n@@ -31,6 +31,7 @@\n \"\"\"\n \n import datetime\n+import locale\n import os\n import os.path\n import subprocess\n@@ -84,7 +85,8 @@ def update_files(update_list):\n     update_cmd += update_list\n \n     p = subprocess.Popen(update_cmd, stdout=subprocess.PIPE,\n-                         stderr=subprocess.STDOUT)\n+                         stderr=subprocess.STDOUT,\n+                         encoding=locale.getpreferredencoding())\n     update_out = p.communicate()[0]\n \n     # Process the output.  Typically, a lot of files do not have\n@@ -95,20 +97,18 @@ def update_files(update_list):\n     # the line out from the output, since there is nothing more to do,\n     # short of looking at each file and seeing which notice is appropriate.\n     # Too much work! (~4,000 files listed as of 2012-01-03).\n-    update_out = update_out.splitlines()\n+    update_out = update_out.splitlines(keepends=False)\n     warning_string = ': warning: copyright statement not found'\n     warning_len = len(warning_string)\n \n     for line in update_out:\n-        if line.endswith('\\n'):\n-            line = line[:-1]\n         if line.endswith(warning_string):\n             filename = line[:-warning_len]\n             if may_have_copyright_notice(filename):\n-                print line\n+                print(line)\n         else:\n             # Unrecognized file format. !?!\n-            print \"*** \" + line\n+            print(\"*** \" + line)\n \n \n def may_have_copyright_notice(filename):\n@@ -128,11 +128,15 @@ def may_have_copyright_notice(filename):\n     # 50 lines...\n     MAX_LINES = 50\n \n-    fd = open(filename)\n+    # We don't really know what encoding each file might be following,\n+    # so just open the file as a byte stream. We only need to search\n+    # for a pattern that should be the same regardless of encoding,\n+    # so that should be good enough.\n+    fd = open(filename, 'rb')\n \n     lineno = 1\n     for line in fd:\n-        if 'Copyright' in line:\n+        if b'Copyright' in line:\n             return True\n         lineno += 1\n         if lineno > 50:\n@@ -147,7 +151,7 @@ def main ():\n \n     if not (os.path.isdir('gdb') and\n             os.path.isfile(\"gnulib/import/extra/update-copyright\")):\n-        print \"Error: This script must be called from the gdb directory.\"\n+        print(\"Error: This script must be called from the gdb directory.\")\n         sys.exit(1)\n \n     update_list = get_update_list()\n@@ -156,19 +160,19 @@ def main ():\n     # Remind the user that some files need to be updated by HAND...\n \n     if MULTIPLE_COPYRIGHT_HEADERS:\n-        print\n+        print()\n         print(\"\\033[31m\"\n               \"REMINDER: Multiple copyright headers must be updated by hand:\"\n               \"\\033[0m\")\n         for filename in MULTIPLE_COPYRIGHT_HEADERS:\n-            print \"  \", filename\n+            print(\"  \", filename)\n \n     if BY_HAND:\n-        print\n-        print \"\\033[31mREMINDER: The following files must be updated by hand.\" \\\n-              \"\\033[0m\"\n+        print()\n+        print(\"\\033[31mREMINDER: The following files must be updated by hand.\" \\\n+              \"\\033[0m\")\n         for filename in BY_HAND:\n-            print \"  \", filename\n+            print(\"  \", filename)\n \n ############################################################################\n #"
    }
  ]
}