{
  "sha": "b80a346e3d567b9366a1da123eeae555a44ccf05",
  "node_id": "C_kwDOANOeidoAKGI4MGEzNDZlM2Q1NjdiOTM2NmExZGExMjNlZWFlNTU1YTQ0Y2NmMDU",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-12-10T00:02:38Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-12-10T00:03:55Z"
    },
    "message": "Revert \"gdbsupport: remove unnecessary `#ifndef IN_PROCESS_AGENT`\"\n\nThis reverts commit fe72c32765e1190c8a17d309fc3a7e1882d6a430.\n\nIt turns out it was wrong, libinproctrace.so does build its own\ngdbsupport/tdesc.cc.  This broke the build:\n\n    make[1]: Entering directory '/home/simark/build/binutils-gdb-one-target/gdbserver'\n      CXXLD  libinproctrace.so\n    /usr/bin/ld: gdbsupport/tdesc-ipa.o: in function `print_xml_feature::visit_pre(target_desc const*)':\n    /home/simark/src/binutils-gdb/gdbserver/../gdbsupport/tdesc.cc:407: undefined reference to `tdesc_architecture_name(target_desc const*)'\n    /usr/bin/ld: /home/simark/src/binutils-gdb/gdbserver/../gdbsupport/tdesc.cc:408: undefined reference to `tdesc_architecture_name(target_desc const*)'\n    /usr/bin/ld: /home/simark/src/binutils-gdb/gdbserver/../gdbsupport/tdesc.cc:411: undefined reference to `tdesc_osabi_name(target_desc const*)'\n    /usr/bin/ld: /home/simark/src/binutils-gdb/gdbserver/../gdbsupport/tdesc.cc:416: undefined reference to `tdesc_compatible_info_list(target_desc const*)'\n    /usr/bin/ld: /home/simark/src/binutils-gdb/gdbserver/../gdbsupport/tdesc.cc:418: undefined reference to `tdesc_compatible_info_arch_name(std::unique_ptr<tdesc_compatible_info, std::default_delete<tdesc_compatible_info> > const&)'",
    "tree": {
      "sha": "8e650ce34eca8d3129e1e85aeab60b44abcd781c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/8e650ce34eca8d3129e1e85aeab60b44abcd781c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b80a346e3d567b9366a1da123eeae555a44ccf05",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b80a346e3d567b9366a1da123eeae555a44ccf05",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b80a346e3d567b9366a1da123eeae555a44ccf05",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b80a346e3d567b9366a1da123eeae555a44ccf05/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "55ac06caf909ee439098f0061394a955d54754e6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55ac06caf909ee439098f0061394a955d54754e6",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/55ac06caf909ee439098f0061394a955d54754e6"
    }
  ],
  "stats": {
    "total": 2,
    "additions": 2,
    "deletions": 0
  },
  "files": [
    {
      "sha": "c04f4943fc082db1153e5cfba0d1072a07d83f45",
      "filename": "gdbsupport/tdesc.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b80a346e3d567b9366a1da123eeae555a44ccf05/gdbsupport/tdesc.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b80a346e3d567b9366a1da123eeae555a44ccf05/gdbsupport/tdesc.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbsupport/tdesc.cc?ref=b80a346e3d567b9366a1da123eeae555a44ccf05",
      "patch": "@@ -400,6 +400,7 @@ void print_xml_feature::visit (const tdesc_reg *r)\n \n void print_xml_feature::visit_pre (const target_desc *e)\n {\n+#ifndef IN_PROCESS_AGENT\n   add_line (\"<?xml version=\\\"1.0\\\"?>\");\n   add_line (\"<!DOCTYPE target SYSTEM \\\"gdb-target.dtd\\\">\");\n   add_line (\"<target>\");\n@@ -417,6 +418,7 @@ void print_xml_feature::visit_pre (const target_desc *e)\n   for (const auto &c : compatible_list)\n     add_line (\"<compatible>%s</compatible>\",\n \t      tdesc_compatible_info_arch_name (c));\n+#endif\n }\n \n void print_xml_feature::visit_post (const target_desc *e)"
    }
  ]
}