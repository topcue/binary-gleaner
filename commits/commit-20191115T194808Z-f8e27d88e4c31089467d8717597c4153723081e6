{
  "sha": "f8e27d88e4c31089467d8717597c4153723081e6",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZjhlMjdkODhlNGMzMTA4OTQ2N2Q4NzE3NTk3YzQxNTM3MjMwODFlNg==",
  "commit": {
    "author": {
      "name": "Christian Biesinger",
      "email": "cbiesinger@google.com",
      "date": "2019-11-08T17:25:17Z"
    },
    "committer": {
      "name": "Christian Biesinger",
      "email": "cbiesinger@google.com",
      "date": "2019-11-15T19:48:08Z"
    },
    "message": "Import the time_r gnulib module\n\nThis allows GDB to use localtime_r unconditionally.\n\nSee https://lists.gnu.org/archive/html/bug-gnulib/2019-11/msg00022.html\nfor details on the compile error mentioned below.\n\ngdb/ChangeLog:\n\n2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n\n\t* gdbsupport/common-defs.h: Include time.h before pathmax.h to\n\tavoid compile errors.\n\ngnulib/ChangeLog:\n\n2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n\n\t* Makefile.in: Regenerate.\n\t* aclocal.m4: Regenerate.\n\t* config.in: Regenerate.\n\t* configure: Regenerate.\n\t* import/Makefile.am: Update.\n\t* import/Makefile.in: Regenerate.\n\t* import/m4/gnulib-cache.m4: Update.\n\t* import/m4/gnulib-comp.m4: Update.\n\t* import/m4/time_r.m4: New file.\n\t* import/time_r.c: New file.\n\t* update-gnulib.sh: Import time_r.\n\nChange-Id: I53fc861b192940d613ca97f2910b4533c730f667",
    "tree": {
      "sha": "84708cf16eef4f4c3108b527622833ae1e227781",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/84708cf16eef4f4c3108b527622833ae1e227781"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f8e27d88e4c31089467d8717597c4153723081e6",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f8e27d88e4c31089467d8717597c4153723081e6",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f8e27d88e4c31089467d8717597c4153723081e6",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f8e27d88e4c31089467d8717597c4153723081e6/comments",
  "author": {
    "login": "cbiesinger",
    "id": 1483109,
    "node_id": "MDQ6VXNlcjE0ODMxMDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1483109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cbiesinger",
    "html_url": "https://github.com/cbiesinger",
    "followers_url": "https://api.github.com/users/cbiesinger/followers",
    "following_url": "https://api.github.com/users/cbiesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/cbiesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cbiesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cbiesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/cbiesinger/orgs",
    "repos_url": "https://api.github.com/users/cbiesinger/repos",
    "events_url": "https://api.github.com/users/cbiesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cbiesinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "cbiesinger",
    "id": 1483109,
    "node_id": "MDQ6VXNlcjE0ODMxMDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1483109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cbiesinger",
    "html_url": "https://github.com/cbiesinger",
    "followers_url": "https://api.github.com/users/cbiesinger/followers",
    "following_url": "https://api.github.com/users/cbiesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/cbiesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cbiesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cbiesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/cbiesinger/orgs",
    "repos_url": "https://api.github.com/users/cbiesinger/repos",
    "events_url": "https://api.github.com/users/cbiesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cbiesinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5abebf3c3fd28a148e43be587c4e4065a0e53ae9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5abebf3c3fd28a148e43be587c4e4065a0e53ae9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5abebf3c3fd28a148e43be587c4e4065a0e53ae9"
    }
  ],
  "stats": {
    "total": 283,
    "additions": 277,
    "deletions": 6
  },
  "files": [
    {
      "sha": "f31552b15f18610f506aa5f4aaa72d5674320134",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -1,3 +1,8 @@\n+2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n+\n+\t* gdbsupport/common-defs.h: Include time.h before pathmax.h to\n+\tavoid compile errors.\n+\n 2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n \n \t* config.in: Regenerate."
    },
    {
      "sha": "3b10468f24799559f1037ba5623aae12d3d12b75",
      "filename": "gdb/gdbsupport/common-defs.h",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gdb/gdbsupport/common-defs.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gdb/gdbsupport/common-defs.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbsupport/common-defs.h?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -97,6 +97,11 @@\n #endif\n #include <errno.h>\n #include <alloca.h>\n+/* Must be included before pathmax.h to avoid build errors about localtime_r\n+   and gmtime_r in gnulib on MinGW.  This is a gnulib bug:\n+   https://lists.gnu.org/archive/html/bug-gnulib/2019-11/msg00022.html  */\n+#include <time.h>\n+\n \n #include \"ansidecl.h\"\n /* This is defined by ansidecl.h, but we prefer gnulib's version.  On"
    },
    {
      "sha": "8c88bbcc1965011ab1ee894983314c8ad40b8593",
      "filename": "gnulib/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/ChangeLog?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -1,3 +1,17 @@\n+2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n+\n+\t* Makefile.in: Regenerate.\n+\t* aclocal.m4: Regenerate.\n+\t* config.in: Regenerate.\n+\t* configure: Regenerate.\n+\t* import/Makefile.am: Update.\n+\t* import/Makefile.in: Regenerate.\n+\t* import/m4/gnulib-cache.m4: Update.\n+\t* import/m4/gnulib-comp.m4: Update.\n+\t* import/m4/time_r.m4: New file.\n+\t* import/time_r.c: New file.\n+\t* update-gnulib.sh: Import time_r.\n+\n 2019-11-15  Christian Biesinger  <cbiesinger@google.com>\n \n \t* Makefile.in: Regenerate."
    },
    {
      "sha": "46c3ecec53ab1e879eadddcd2083c1970afef9e9",
      "filename": "gnulib/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/Makefile.in?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -243,6 +243,7 @@ am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n \t$(top_srcdir)/import/m4/tempname.m4 \\\n \t$(top_srcdir)/import/m4/threadlib.m4 \\\n \t$(top_srcdir)/import/m4/time_h.m4 \\\n+\t$(top_srcdir)/import/m4/time_r.m4 \\\n \t$(top_srcdir)/import/m4/unistd-safer.m4 \\\n \t$(top_srcdir)/import/m4/unistd_h.m4 \\\n \t$(top_srcdir)/import/m4/warn-on-use.m4 \\"
    },
    {
      "sha": "8f2ddae07c1ddef3d32329af8a4c0c4846390c43",
      "filename": "gnulib/aclocal.m4",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/aclocal.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/aclocal.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/aclocal.m4?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -1848,6 +1848,7 @@ m4_include([import/m4/sys_uio_h.m4])\n m4_include([import/m4/tempname.m4])\n m4_include([import/m4/threadlib.m4])\n m4_include([import/m4/time_h.m4])\n+m4_include([import/m4/time_r.m4])\n m4_include([import/m4/unistd-safer.m4])\n m4_include([import/m4/unistd_h.m4])\n m4_include([import/m4/warn-on-use.m4])"
    },
    {
      "sha": "068b540b9071fb855cdfba90b0182bfeed6e8073",
      "filename": "gnulib/config.in",
      "status": "modified",
      "additions": 10,
      "deletions": 0,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/config.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/config.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/config.in?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -273,6 +273,9 @@\n /* Define to 1 when the gnulib module strtok_r should be tested. */\n #undef GNULIB_TEST_STRTOK_R\n \n+/* Define to 1 when the gnulib module time_r should be tested. */\n+#undef GNULIB_TEST_TIME_R\n+\n /* Define to 1 when the gnulib module unsetenv should be tested. */\n #undef GNULIB_TEST_UNSETENV\n \n@@ -346,6 +349,10 @@\n    don't. */\n #undef HAVE_DECL_ISBLANK\n \n+/* Define to 1 if you have the declaration of `localtime_r', and to 0 if you\n+   don't. */\n+#undef HAVE_DECL_LOCALTIME_R\n+\n /* Define to 1 if you have the declaration of `mbrtowc', and to 0 if you\n    don't. */\n #undef HAVE_DECL_MBRTOWC\n@@ -523,6 +530,9 @@\n /* Define to 1 if you have the 'link' function. */\n #undef HAVE_LINK\n \n+/* Define to 1 if you have the 'localtime_r' function. */\n+#undef HAVE_LOCALTIME_R\n+\n /* Define to 1 if the system has the type 'long long int'. */\n #undef HAVE_LONG_LONG_INT\n "
    },
    {
      "sha": "94d9ff919a44d68f802f8907e7ae4ea2c1b63b21",
      "filename": "gnulib/configure",
      "status": "modified",
      "additions": 111,
      "deletions": 0,
      "changes": 111,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/configure?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -3564,6 +3564,7 @@ gl_func_list=\"$gl_func_list __xpg_strerror_r\"\n gl_func_list=\"$gl_func_list catgets\"\n gl_func_list=\"$gl_func_list snprintf\"\n gl_header_list=\"$gl_header_list sys/uio.h\"\n+gl_func_list=\"$gl_func_list localtime_r\"\n gl_func_list=\"$gl_func_list pipe\"\n gl_func_list=\"$gl_func_list iswcntrl\"\n # Check that the precious variables saved in the cache have kept the same\n@@ -5986,6 +5987,7 @@ fi\n \n \n   # Code from module time:\n+  # Code from module time_r:\n   # Code from module unistd:\n   # Code from module unistd-safer:\n   # Code from module unsetenv:\n@@ -16079,6 +16081,11 @@ $as_echo \"$gl_cv_next_time_h\" >&6; }\n \n \n \n+\n+\n+\n+\n+\n       ac_fn_c_check_decl \"$LINENO\" \"unsetenv\" \"ac_cv_have_decl_unsetenv\" \"$ac_includes_default\"\n if test \"x$ac_cv_have_decl_unsetenv\" = xyes; then :\n   ac_have_decl=1\n@@ -27018,6 +27025,110 @@ $as_echo \"$gl_cv_next_sys_uio_h\" >&6; }\n \n \n \n+      ac_fn_c_check_decl \"$LINENO\" \"localtime_r\" \"ac_cv_have_decl_localtime_r\" \"#include <time.h>\n+\"\n+if test \"x$ac_cv_have_decl_localtime_r\" = xyes; then :\n+  ac_have_decl=1\n+else\n+  ac_have_decl=0\n+fi\n+\n+cat >>confdefs.h <<_ACEOF\n+#define HAVE_DECL_LOCALTIME_R $ac_have_decl\n+_ACEOF\n+\n+  if test $ac_cv_have_decl_localtime_r = no; then\n+    HAVE_DECL_LOCALTIME_R=0\n+  fi\n+\n+\n+  :\n+\n+\n+\n+\n+\n+  if test $ac_cv_func_localtime_r = yes; then\n+    HAVE_LOCALTIME_R=1\n+    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether localtime_r is compatible with its POSIX signature\" >&5\n+$as_echo_n \"checking whether localtime_r is compatible with its POSIX signature... \" >&6; }\n+if ${gl_cv_time_r_posix+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <time.h>\n+int\n+main ()\n+{\n+/* We don't need to append 'restrict's to the argument types,\n+                 even though the POSIX signature has the 'restrict's,\n+                 since C99 says they can't affect type compatibility.  */\n+              struct tm * (*ptr) (time_t const *, struct tm *) = localtime_r;\n+              if (ptr) return 0;\n+              /* Check the return type is a pointer.\n+                 On HP-UX 10 it is 'int'.  */\n+              *localtime_r (0, 0);\n+  ;\n+  return 0;\n+}\n+\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  gl_cv_time_r_posix=yes\n+else\n+  gl_cv_time_r_posix=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gl_cv_time_r_posix\" >&5\n+$as_echo \"$gl_cv_time_r_posix\" >&6; }\n+    if test $gl_cv_time_r_posix = yes; then\n+      REPLACE_LOCALTIME_R=0\n+    else\n+      REPLACE_LOCALTIME_R=1\n+    fi\n+  else\n+    HAVE_LOCALTIME_R=0\n+  fi\n+\n+  if test $HAVE_LOCALTIME_R = 0 || test $REPLACE_LOCALTIME_R = 1; then\n+\n+\n+\n+\n+\n+\n+\n+\n+  gl_LIBOBJS=\"$gl_LIBOBJS time_r.$ac_objext\"\n+\n+\n+  :\n+\n+  fi\n+\n+\n+\n+\n+\n+          GNULIB_TIME_R=1\n+\n+\n+\n+\n+\n+$as_echo \"#define GNULIB_TEST_TIME_R 1\" >>confdefs.h\n+\n+\n+\n+\n+\n+\n+\n+\n+\n \n \n "
    },
    {
      "sha": "a79f6f7b220f6309458dad63934b887644921e35",
      "filename": "gnulib/import/Makefile.am",
      "status": "modified",
      "additions": 10,
      "deletions": 1,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/Makefile.am?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -21,7 +21,7 @@\n # the same distribution terms as the rest of that program.\n #\n # Generated by gnulib-tool.\n-# Reproduce by: gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat unistd unsetenv update-copyright wchar wctype-h\n+# Reproduce by: gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat time_r unistd unsetenv update-copyright wchar wctype-h\n \n AUTOMAKE_OPTIONS = 1.9.6 gnits subdir-objects\n \n@@ -2379,6 +2379,15 @@ EXTRA_DIST += time.in.h\n \n ## end   gnulib module time\n \n+## begin gnulib module time_r\n+\n+\n+EXTRA_DIST += time_r.c\n+\n+EXTRA_libgnu_a_SOURCES += time_r.c\n+\n+## end   gnulib module time_r\n+\n ## begin gnulib module unistd\n \n BUILT_SOURCES += unistd.h"
    },
    {
      "sha": "5dc96e129fe51fef58070d24939351d3bfae0f9c",
      "filename": "gnulib/import/Makefile.in",
      "status": "modified",
      "additions": 6,
      "deletions": 4,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/Makefile.in?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -35,7 +35,7 @@\n # the same distribution terms as the rest of that program.\n #\n # Generated by gnulib-tool.\n-# Reproduce by: gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat unistd unsetenv update-copyright wchar wctype-h\n+# Reproduce by: gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat time_r unistd unsetenv update-copyright wchar wctype-h\n \n \n \n@@ -252,6 +252,7 @@ am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n \t$(top_srcdir)/import/m4/tempname.m4 \\\n \t$(top_srcdir)/import/m4/threadlib.m4 \\\n \t$(top_srcdir)/import/m4/time_h.m4 \\\n+\t$(top_srcdir)/import/m4/time_r.m4 \\\n \t$(top_srcdir)/import/m4/unistd-safer.m4 \\\n \t$(top_srcdir)/import/m4/unistd_h.m4 \\\n \t$(top_srcdir)/import/m4/warn-on-use.m4 \\\n@@ -1553,8 +1554,8 @@ EXTRA_DIST = m4/gnulib-cache.m4 alloca.c alloca.in.h arpa_inet.in.h \\\n \tstrerror_r.c string.in.h str-two-way.h strstr.c strtok_r.c \\\n \tsys_socket.in.h sys_stat.in.h sys_time.in.h sys_types.in.h \\\n \tsys_uio.in.h tempname.h \\\n-\t$(top_srcdir)/import/extra/config.rpath time.in.h unistd.in.h \\\n-\tunistd--.h unistd-safer.h unsetenv.c \\\n+\t$(top_srcdir)/import/extra/config.rpath time.in.h time_r.c \\\n+\tunistd.in.h unistd--.h unistd-safer.h unsetenv.c \\\n \t$(top_srcdir)/import/extra/update-copyright verify.h \\\n \twchar.in.h wctype.in.h\n \n@@ -1617,7 +1618,7 @@ EXTRA_libgnu_a_SOURCES = alloca.c openat-proc.c canonicalize-lgpl.c \\\n \treadlink.c realloc.c rename.c rewinddir.c rmdir.c \\\n \tsecure_getenv.c setenv.c stat.c strchrnul.c strdup.c \\\n \tstrerror.c strerror-override.c strerror_r.c strstr.c \\\n-\tstrtok_r.c unsetenv.c\n+\tstrtok_r.c time_r.c unsetenv.c\n \n # Use this preprocessor expression to decide whether #include_next works.\n # Do not rely on a 'configure'-time test for this, since the expression\n@@ -1791,6 +1792,7 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/strtok_r.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/sys_socket.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tempname.Po@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/time_r.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/unistd.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/unsetenv.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wctype-h.Po@am__quote@"
    },
    {
      "sha": "80e080aed17d9454d90f125c6bb74887aa5b0fce",
      "filename": "gnulib/import/m4/gnulib-cache.m4",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/gnulib-cache.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/gnulib-cache.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/m4/gnulib-cache.m4?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -27,7 +27,7 @@\n \n \n # Specification in the form of a command-line invocation:\n-#   gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat unistd unsetenv update-copyright wchar wctype-h\n+#   gnulib-tool --import --lib=libgnu --source-base=import --m4-base=import/m4 --doc-base=doc --tests-base=tests --aux-dir=import/extra --no-conditional-dependencies --no-libtool --macro-prefix=gl --no-vc-files alloca canonicalize-lgpl dirent dirfd errno fnmatch-gnu frexpl getcwd glob inet_ntop inttypes limits-h lstat memchr memmem mkdir mkdtemp mkostemp pathmax rawmemchr readlink rename setenv signal-h strchrnul strerror_r-posix strstr strtok_r sys_stat time_r unistd unsetenv update-copyright wchar wctype-h\n \n # Specification in the form of a few gnulib-tool.m4 macro invocations:\n gl_LOCAL_DIR([])\n@@ -61,6 +61,7 @@ gl_MODULES([\n   strstr\n   strtok_r\n   sys_stat\n+  time_r\n   unistd\n   unsetenv\n   update-copyright"
    },
    {
      "sha": "1a434d20c992a48a7b880e42a425c96ca34645ac",
      "filename": "gnulib/import/m4/gnulib-comp.m4",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/gnulib-comp.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/gnulib-comp.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/m4/gnulib-comp.m4?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -182,6 +182,7 @@ AC_DEFUN([gl_EARLY],\n   # Code from module threadlib:\n   gl_THREADLIB_EARLY\n   # Code from module time:\n+  # Code from module time_r:\n   # Code from module unistd:\n   # Code from module unistd-safer:\n   # Code from module unsetenv:\n@@ -619,6 +620,12 @@ AC_DEFUN([gl_INIT],\n   gl_FUNC_GEN_TEMPNAME\n   gl_THREADLIB\n   gl_HEADER_TIME_H\n+  gl_TIME_R\n+  if test $HAVE_LOCALTIME_R = 0 || test $REPLACE_LOCALTIME_R = 1; then\n+    AC_LIBOBJ([time_r])\n+    gl_PREREQ_TIME_R\n+  fi\n+  gl_TIME_MODULE_INDICATOR([time_r])\n   gl_UNISTD_H\n   gl_UNISTD_SAFER\n   gl_FUNC_UNSETENV\n@@ -934,6 +941,7 @@ AC_DEFUN([gl_FILE_LIST], [\n   lib/tempname.c\n   lib/tempname.h\n   lib/time.in.h\n+  lib/time_r.c\n   lib/unistd--.h\n   lib/unistd-safer.h\n   lib/unistd.c\n@@ -1075,6 +1083,7 @@ AC_DEFUN([gl_FILE_LIST], [\n   m4/tempname.m4\n   m4/threadlib.m4\n   m4/time_h.m4\n+  m4/time_r.m4\n   m4/unistd-safer.m4\n   m4/unistd_h.m4\n   m4/warn-on-use.m4"
    },
    {
      "sha": "21b4a2cc18e4e1e6e93b1660ca4835e9aa3842a9",
      "filename": "gnulib/import/m4/time_r.m4",
      "status": "added",
      "additions": 58,
      "deletions": 0,
      "changes": 58,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/time_r.m4",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/m4/time_r.m4",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/m4/time_r.m4?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -0,0 +1,58 @@\n+dnl Reentrant time functions: localtime_r, gmtime_r.\n+\n+dnl Copyright (C) 2003, 2006-2016 Free Software Foundation, Inc.\n+dnl This file is free software; the Free Software Foundation\n+dnl gives unlimited permission to copy and/or distribute it,\n+dnl with or without modifications, as long as this notice is preserved.\n+\n+dnl Written by Paul Eggert.\n+\n+AC_DEFUN([gl_TIME_R],\n+[\n+  dnl Persuade glibc and Solaris <time.h> to declare localtime_r.\n+  AC_REQUIRE([gl_USE_SYSTEM_EXTENSIONS])\n+\n+  AC_REQUIRE([gl_HEADER_TIME_H_DEFAULTS])\n+  AC_REQUIRE([AC_C_RESTRICT])\n+\n+  dnl Some systems don't declare localtime_r() and gmtime_r() if _REENTRANT is\n+  dnl not defined.\n+  AC_CHECK_DECLS([localtime_r], [], [], [[#include <time.h>]])\n+  if test $ac_cv_have_decl_localtime_r = no; then\n+    HAVE_DECL_LOCALTIME_R=0\n+  fi\n+\n+  AC_CHECK_FUNCS_ONCE([localtime_r])\n+  if test $ac_cv_func_localtime_r = yes; then\n+    HAVE_LOCALTIME_R=1\n+    AC_CACHE_CHECK([whether localtime_r is compatible with its POSIX signature],\n+      [gl_cv_time_r_posix],\n+      [AC_COMPILE_IFELSE(\n+         [AC_LANG_PROGRAM(\n+            [[#include <time.h>]],\n+            [[/* We don't need to append 'restrict's to the argument types,\n+                 even though the POSIX signature has the 'restrict's,\n+                 since C99 says they can't affect type compatibility.  */\n+              struct tm * (*ptr) (time_t const *, struct tm *) = localtime_r;\n+              if (ptr) return 0;\n+              /* Check the return type is a pointer.\n+                 On HP-UX 10 it is 'int'.  */\n+              *localtime_r (0, 0);]])\n+         ],\n+         [gl_cv_time_r_posix=yes],\n+         [gl_cv_time_r_posix=no])\n+      ])\n+    if test $gl_cv_time_r_posix = yes; then\n+      REPLACE_LOCALTIME_R=0\n+    else\n+      REPLACE_LOCALTIME_R=1\n+    fi\n+  else\n+    HAVE_LOCALTIME_R=0\n+  fi\n+])\n+\n+# Prerequisites of lib/time_r.c.\n+AC_DEFUN([gl_PREREQ_TIME_R], [\n+  :\n+])"
    },
    {
      "sha": "dc1e16136f4cb54163a47efdd524bc1f031dffce",
      "filename": "gnulib/import/time_r.c",
      "status": "added",
      "additions": 44,
      "deletions": 0,
      "changes": 44,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/time_r.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/import/time_r.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/import/time_r.c?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -0,0 +1,44 @@\n+/* Reentrant time functions like localtime_r.\n+\n+   Copyright (C) 2003, 2006-2007, 2010-2016 Free Software Foundation, Inc.\n+\n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License along\n+   with this program; if not, see <http://www.gnu.org/licenses/>.  */\n+\n+/* Written by Paul Eggert.  */\n+\n+#include <config.h>\n+\n+#include <time.h>\n+\n+static struct tm *\n+copy_tm_result (struct tm *dest, struct tm const *src)\n+{\n+  if (! src)\n+    return 0;\n+  *dest = *src;\n+  return dest;\n+}\n+\n+\n+struct tm *\n+gmtime_r (time_t const * restrict t, struct tm * restrict tp)\n+{\n+  return copy_tm_result (tp, gmtime (t));\n+}\n+\n+struct tm *\n+localtime_r (time_t const * restrict t, struct tm * restrict tp)\n+{\n+  return copy_tm_result (tp, localtime (t));\n+}"
    },
    {
      "sha": "f8d68fca893038cc407cafb620378ef7f80f202c",
      "filename": "gnulib/update-gnulib.sh",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/update-gnulib.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f8e27d88e4c31089467d8717597c4153723081e6/gnulib/update-gnulib.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gnulib/update-gnulib.sh?ref=f8e27d88e4c31089467d8717597c4153723081e6",
      "patch": "@@ -59,6 +59,7 @@ IMPORTED_GNULIB_MODULES=\"\\\n     strstr \\\n     strtok_r \\\n     sys_stat \\\n+    time_r \\\n     unistd \\\n     unsetenv \\\n     update-copyright \\"
    }
  ]
}