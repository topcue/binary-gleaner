{
  "sha": "62fe7512a78962a9eda0db7fde0c8a76cf535714",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjJmZTc1MTJhNzg5NjJhOWVkYTBkYjdmZGUwYzhhNzZjZjUzNTcxNA==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-13T06:21:22Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-01-13T10:52:51Z"
    },
    "message": "sim: watch: fix pc watchpoints on little endian host systems\n\nMy change 1ac72f0659d64d6a14da862242db0d841d2878d0 (\"sim: convert to\nbfd_endian\") subtly broke the watchpoint module on little endian host\nsystems.  The old code used 0 to mean \"whatever the host endian is\",\nand while that was changed to use BFD_ENDIAN_UNKNOWN, this caller was\nmissed.  Since its API used an int instead of an enum, the coercion\nfrom 0 to the BFD endian enum was silently missed, and 0 happens to\nbe BFD_ENDIAN_BIG.\n\nInstead of restoring the old logic by passing in BFD_ENDIAN_UNKNOWN,\nwe know the right host endian at compile time, so use that directly.",
    "tree": {
      "sha": "4b54cc93bf9f772c360ea2db2c44dfa60e122f64",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4b54cc93bf9f772c360ea2db2c44dfa60e122f64"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/62fe7512a78962a9eda0db7fde0c8a76cf535714",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/62fe7512a78962a9eda0db7fde0c8a76cf535714",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/62fe7512a78962a9eda0db7fde0c8a76cf535714",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/62fe7512a78962a9eda0db7fde0c8a76cf535714/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4180301e81fbc8eae6e55630f93bc14e045b1c78",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4180301e81fbc8eae6e55630f93bc14e045b1c78",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4180301e81fbc8eae6e55630f93bc14e045b1c78"
    }
  ],
  "stats": {
    "total": 19,
    "additions": 14,
    "deletions": 5
  },
  "files": [
    {
      "sha": "539bab687d46ad58c283d52bdbaff5d2c8814e22",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=62fe7512a78962a9eda0db7fde0c8a76cf535714",
      "patch": "@@ -1,3 +1,12 @@\n+2021-01-13  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* sim-events.c (sim_events_watch_sim): Change byte_order type to\n+\tenum bfd_endian.\n+\t(sim_events_watch_core): Likewise.\n+\t* sim-events.h (sim_events_watch_sim, sim_events_watch_core): Likewise.\n+\t* sim-watch.c (schedule_watchpoint): Change 0 to HOST_BYTE_ORDER in\n+\tcall to sim_events_watch_sim.\n+\n 2021-01-12  Mike Frysinger  <vapier@gentoo.org>\n \n \t* sim-profile.h [!WITH_PROFILE]: Rewrite to use #error."
    },
    {
      "sha": "6dd0474d91ace9a341eafe80e15a943b2ea4b730",
      "filename": "sim/common/sim-events.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-events.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-events.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-events.c?ref=62fe7512a78962a9eda0db7fde0c8a76cf535714",
      "patch": "@@ -613,7 +613,7 @@ sim_event *\n sim_events_watch_sim (SIM_DESC sd,\n \t\t      void *host_addr,\n \t\t      int nr_bytes,\n-\t\t      int byte_order,\n+\t\t      enum bfd_endian byte_order,\n \t\t      int is_within,\n \t\t      unsigned64 lb,\n \t\t      unsigned64 ub,\n@@ -692,7 +692,7 @@ sim_events_watch_core (SIM_DESC sd,\n \t\t       address_word core_addr,\n \t\t       unsigned core_map,\n \t\t       int nr_bytes,\n-\t\t       int byte_order,\n+\t\t       enum bfd_endian byte_order,\n \t\t       int is_within,\n \t\t       unsigned64 lb,\n \t\t       unsigned64 ub,"
    },
    {
      "sha": "823fd8c946c07decd6c4b1d89310b17da53abbb8",
      "filename": "sim/common/sim-events.h",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-events.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-events.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-events.h?ref=62fe7512a78962a9eda0db7fde0c8a76cf535714",
      "patch": "@@ -161,7 +161,7 @@ extern sim_event *sim_events_watch_sim\n (SIM_DESC sd,\n  void *host_addr,\n  int nr_bytes,\n- int byte_order,\n+ enum bfd_endian byte_order,\n  int is_within,\n  unsigned64 lb,\n  unsigned64 ub,\n@@ -182,7 +182,7 @@ extern sim_event *sim_events_watch_core\n  address_word core_addr,\n  unsigned map,\n  int nr_bytes,\n- int byte_order,\n+ enum bfd_endian byte_order,\n  int is_within,\n  unsigned64 lb,\n  unsigned64 ub,"
    },
    {
      "sha": "d69d42cb9540bbb45ef26282cd58bedf08e9f57f",
      "filename": "sim/common/sim-watch.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-watch.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/62fe7512a78962a9eda0db7fde0c8a76cf535714/sim/common/sim-watch.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-watch.c?ref=62fe7512a78962a9eda0db7fde0c8a76cf535714",
      "patch": "@@ -173,7 +173,7 @@ schedule_watchpoint (SIM_DESC sd,\n       point->event = sim_events_watch_sim (sd,\n \t\t\t\t\t   watch->pc,\n \t\t\t\t\t   watch->sizeof_pc,\n-\t\t\t\t\t   0/* host-endian */,\n+\t\t\t\t\t   HOST_BYTE_ORDER,\n \t\t\t\t\t   point->is_within,\n \t\t\t\t\t   point->arg0, point->arg1,\n \t\t\t\t\t   /* PC in arg0..arg1 */"
    }
  ]
}