{
  "sha": "0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MGNhYzkzNTRiZmIwN2E1Y2Y1M2Q3MGRiZWZhYTM1YzZhZmE3ZGEwYQ==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-01-13T23:12:08Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2020-01-13T23:12:08Z"
    },
    "message": "gdb: use gdb::byte_vector instead of std::vector<char> in core_target::get_core_register_section\n\nSince the data held by the `contents` variable is arbitrary binary data,\nit should have gdb_byte elements, not char elements.  Also, using\ngdb::byte_vector is preferable, since it doesn't unnecessarily\nzero-initialize the values.\n\nInstead of adding a cast in the call to m_core_vec->core_read_registers,\nI have changed core_read_registers' argument to be a gdb_byte* instead\nof a char*.\n\ngdb/ChangeLog:\n\n\t* gdbcore.h (struct core_fns) <core_read_registers>: Change\n\tcore_reg_sect type to gdb_byte *.\n\t* arm-nbsd-nat.c (fetch_elfcore_registers): Likewise.\n\t* cris-tdep.c (fetch_core_registers): Likewise.\n\t* corelow.c (core_target::get_core_register_section): Change\n\ttype of `contents` to gdb::byte_vector.",
    "tree": {
      "sha": "92db38d9e027bd2eea944586d3f1aed2aa10472d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/92db38d9e027bd2eea944586d3f1aed2aa10472d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "9a6d629ccf328e3f041c3fcb7e91f49a5d72d0fb",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9a6d629ccf328e3f041c3fcb7e91f49a5d72d0fb",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9a6d629ccf328e3f041c3fcb7e91f49a5d72d0fb"
    }
  ],
  "stats": {
    "total": 17,
    "additions": 13,
    "deletions": 4
  },
  "files": [
    {
      "sha": "2ec7a61c3b6580e370732e43040a810c1f573f8f",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
      "patch": "@@ -1,3 +1,12 @@\n+2020-01-13  Simon Marchi  <simon.marchi@efficios.com>\n+\n+\t* gdbcore.h (struct core_fns) <core_read_registers>: Change\n+\tcore_reg_sect type to gdb_byte *.\n+\t* arm-nbsd-nat.c (fetch_elfcore_registers): Likewise.\n+\t* cris-tdep.c (fetch_core_registers): Likewise.\n+\t* corelow.c (core_target::get_core_register_section): Change\n+\ttype of `contents` to gdb::byte_vector.\n+\n 2020-01-13  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* tui/tui-wingeneral.c (box_win): Position the title in the center"
    },
    {
      "sha": "00f919194b9551d9a55c339ce6005e834fce0b81",
      "filename": "gdb/arm-nbsd-nat.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/arm-nbsd-nat.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/arm-nbsd-nat.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arm-nbsd-nat.c?ref=0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
      "patch": "@@ -397,7 +397,7 @@ arm_nbsd_nat_target::store_registers (struct regcache *regcache, int regno)\n \n static void\n fetch_elfcore_registers (struct regcache *regcache,\n-\t\t\t char *core_reg_sect, unsigned core_reg_size,\n+\t\t\t gdb_byte *core_reg_sect, unsigned core_reg_size,\n \t\t\t int which, CORE_ADDR ignore)\n {\n   struct reg gregset;"
    },
    {
      "sha": "5cd058d5993d51fd5abdcdbbf76b92c909b4881a",
      "filename": "gdb/corelow.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/corelow.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/corelow.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/corelow.c?ref=0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
      "patch": "@@ -621,7 +621,7 @@ core_target::get_core_register_section (struct regcache *regcache,\n \t       section_name.c_str ());\n     }\n \n-  std::vector<char> contents (size);\n+  gdb::byte_vector contents (size);\n   if (!bfd_get_section_contents (core_bfd, section, contents.data (),\n \t\t\t\t (file_ptr) 0, size))\n     {"
    },
    {
      "sha": "6885d237f3a32c0e580b868d9a0319840b11f8a3",
      "filename": "gdb/cris-tdep.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/cris-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/cris-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cris-tdep.c?ref=0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
      "patch": "@@ -3793,7 +3793,7 @@ cris_supply_gregset (struct regcache *regcache, cris_elf_gregset_t *gregsetp)\n \n static void\n fetch_core_registers (struct regcache *regcache,\n-\t\t      char *core_reg_sect, unsigned core_reg_size,\n+\t\t      gdb_byte *core_reg_sect, unsigned core_reg_size,\n                       int which, CORE_ADDR reg_addr)\n {\n   cris_elf_gregset_t gregset;"
    },
    {
      "sha": "66e81dfe950f5a244d702eaa38a2d2fd89493d03",
      "filename": "gdb/gdbcore.h",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/gdbcore.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a/gdb/gdbcore.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbcore.h?ref=0cac9354bfb07a5cf53d70dbefaa35c6afa7da0a",
      "patch": "@@ -213,7 +213,7 @@ struct core_fns\n        address X is at location core_reg_sect+x+reg_addr.  */\n \n     void (*core_read_registers) (struct regcache *regcache,\n-\t\t\t\t char *core_reg_sect,\n+\t\t\t\t gdb_byte *core_reg_sect,\n \t\t\t\t unsigned core_reg_size,\n \t\t\t\t int which, CORE_ADDR reg_addr);\n "
    }
  ]
}