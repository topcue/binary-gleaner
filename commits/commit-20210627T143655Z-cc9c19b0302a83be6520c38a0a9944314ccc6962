{
  "sha": "cc9c19b0302a83be6520c38a0a9944314ccc6962",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Y2M5YzE5YjAzMDJhODNiZTY1MjBjMzhhMGE5OTQ0MzE0Y2NjNjk2Mg==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-27T02:03:14Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-06-27T14:36:55Z"
    },
    "message": "sim: bpf: fix mixed decls & code warnings (and style)",
    "tree": {
      "sha": "6f283425229fde7069581b1db2ea26e0dc0bb0e8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6f283425229fde7069581b1db2ea26e0dc0bb0e8"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/cc9c19b0302a83be6520c38a0a9944314ccc6962",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc9c19b0302a83be6520c38a0a9944314ccc6962",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/cc9c19b0302a83be6520c38a0a9944314ccc6962",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cc9c19b0302a83be6520c38a0a9944314ccc6962/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5d0b3088f75d2620eb87d5615a2637918d135491",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5d0b3088f75d2620eb87d5615a2637918d135491",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5d0b3088f75d2620eb87d5615a2637918d135491"
    }
  ],
  "stats": {
    "total": 15,
    "additions": 12,
    "deletions": 3
  },
  "files": [
    {
      "sha": "7c48d289b30f406a340a9abc7c655c8b49a4ff4b",
      "filename": "sim/bpf/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/bpf/ChangeLog?ref=cc9c19b0302a83be6520c38a0a9944314ccc6962",
      "patch": "@@ -1,3 +1,8 @@\n+2021-06-27  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* bpf-helpers.c (bpf_trace_printk): Move value decl to top of scope.\n+\t* mloop.in: Move off16 & imm32 decls to top of scope.\n+\n 2021-06-22  Mike Frysinger  <vapier@gentoo.org>\n \n \t* configure: Regenerate."
    },
    {
      "sha": "79a3a7d3702ad29cb3b371ee2e3cf65e3acc7db8",
      "filename": "sim/bpf/bpf-helpers.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/bpf-helpers.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/bpf-helpers.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/bpf/bpf-helpers.c?ref=cc9c19b0302a83be6520c38a0a9944314ccc6962",
      "patch": "@@ -72,6 +72,7 @@ bpf_trace_printk (SIM_CPU *current_cpu)\n      supported, which are read from %r3, %r4 and %r5 respectively.  */\n   for (i = 0, tags_processed = 0; i < size;)\n     {\n+      UDI value;\n       QI c = GETMEMUQI (current_cpu, CPU_PC_GET (current_cpu),\n                         fmt_address + i);\n \n@@ -88,7 +89,7 @@ bpf_trace_printk (SIM_CPU *current_cpu)\n           if (i++ >= size)\n             return -1; /* XXX look for kernel error code.  */\n \n-          UDI value = GET_H_GPR (3 + tags_processed);\n+          value = GET_H_GPR (3 + tags_processed);\n \n           switch ((GETMEMUQI (current_cpu, CPU_PC_GET (current_cpu),\n                              fmt_address + i)))"
    },
    {
      "sha": "75a869b3399795468a956aa087d1b96d77b9056e",
      "filename": "sim/bpf/mloop.in",
      "status": "modified",
      "additions": 5,
      "deletions": 2,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/mloop.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/cc9c19b0302a83be6520c38a0a9944314ccc6962/sim/bpf/mloop.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/bpf/mloop.in?ref=cc9c19b0302a83be6520c38a0a9944314ccc6962",
      "patch": "@@ -123,14 +123,17 @@ cat <<EOF\n \n   if (CURRENT_TARGET_BYTE_ORDER == BFD_ENDIAN_BIG)\n     {\n+      UHI off16;\n+      USI imm32;\n+\n       /* eBPF instructions are little-endian, but GETIMEMUDI reads according\n          to target byte order. Swap to little-endian. */\n       insn = SWAP_8 (insn);\n \n       /* But, the imm32 and offset16 fields within instructions follow target\n          byte order. Swap those fields back. */\n-      UHI off16 = (UHI) ((insn & 0x00000000ffff0000) >> 16);\n-      USI imm32 = (USI) ((insn & 0xffffffff00000000) >> 32);\n+      off16 = (UHI) ((insn & 0x00000000ffff0000) >> 16);\n+      imm32 = (USI) ((insn & 0xffffffff00000000) >> 32);\n       off16 = SWAP_2 (off16);\n       imm32 = SWAP_4 (imm32);\n "
    }
  ]
}