{
  "sha": "024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
  "node_id": "C_kwDOANOeidoAKDAyNDEyMGI2ZWUzNDQ4NDNiN2QwMmU4M2U2ZmMwZDViMzNhM2NkMjk",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-09T06:22:06Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-11-09T06:22:06Z"
    },
    "message": "sim: sh: simplify testsuite a bit\n\nSwitch from the centralized list in the exp file to each test declaring\nits own requirements which they're already (mostly) doing.  This will\nincrease coverage slightly by running more tests in more configurations\nsince the hardcoded exp list was a little out of date.\n\nWe have to mark the psh* tests as shdsp only (to match what the exp\nfile was doing), mark the fsca & fsrra tests as failing (since they\nweren't even being run by the exp file), and to fix the expected\noutput & status of the fail test.",
    "tree": {
      "sha": "c5815a8abbe30fe74464cc0f4bdd4765613fa54d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/c5815a8abbe30fe74464cc0f4bdd4765613fa54d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4e6e8ba7c565df88c41b468fbf4801b7445dea09",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4e6e8ba7c565df88c41b468fbf4801b7445dea09",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4e6e8ba7c565df88c41b468fbf4801b7445dea09"
    }
  ],
  "stats": {
    "total": 94,
    "additions": 12,
    "deletions": 82
  },
  "files": [
    {
      "sha": "ef2c59f2301374109714a607ff8f63cd19e2452a",
      "filename": "sim/testsuite/sh/allinsn.exp",
      "status": "modified",
      "additions": 4,
      "deletions": 74,
      "changes": 78,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/allinsn.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/allinsn.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/allinsn.exp?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,6 @@\n # sh tests\n \n-set all \"sh shdsp\"\n+set all_machs \"sh shdsp\"\n \n set global_as_options \"\"\n set global_ld_options \"\"\n@@ -13,77 +13,7 @@ foreach opt $board_variant_list {\n }\n \n if [istarget sh-*elf] {\n-    run_sim_test add.s    $all\n-    run_sim_test and.s    $all\n-    run_sim_test bandor.s sh\n-    run_sim_test bandornot.s sh\n-    run_sim_test bclr.s   sh\n-    run_sim_test bld.s    sh\n-    run_sim_test bldnot.s sh\n-    run_sim_test bset.s   sh\n-    run_sim_test bst.s    sh\n-    run_sim_test bxor.s   sh\n-    run_sim_test clip.s   sh\n-    run_sim_test div.s    sh\n-    run_sim_test dmxy.s   shdsp\n-    run_sim_test fabs.s   sh\n-    run_sim_test fadd.s   sh\n-    run_sim_test fcmpeq.s sh\n-    run_sim_test fcmpgt.s sh\n-    run_sim_test fcnvds.s sh\n-    run_sim_test fcnvsd.s sh\n-    run_sim_test fdiv.s   sh\n-    run_sim_test fipr.s   sh\n-    run_sim_test fldi0.s  sh\n-    run_sim_test fldi1.s  sh\n-    run_sim_test flds.s   sh\n-    run_sim_test float.s  sh\n-    run_sim_test fmac.s   sh\n-    run_sim_test fmov.s   sh\n-    run_sim_test fmul.s   sh\n-    run_sim_test fneg.s   sh\n-    run_sim_test fpchg.s  sh\n-    run_sim_test frchg.s  sh\n-    run_sim_test fschg.s  sh\n-    run_sim_test fsqrt.s  sh\n-    run_sim_test fsub.s   sh\n-    run_sim_test ftrc.s   sh\n-    run_sim_test ldrc.s   shdsp\n-    run_sim_test loop.s   shdsp\n-    run_sim_test macl.s   sh\n-    run_sim_test macw.s   sh\n-    run_sim_test mov.s    $all\n-    run_sim_test movi.s   $all\n-    run_sim_test movli.s  $all\n-    run_sim_test movua.s  $all\n-    run_sim_test movxy.s  shdsp\n-    run_sim_test mulr.s   sh\n-    run_sim_test pabs.s   shdsp\n-    run_sim_test paddc.s  shdsp\n-    run_sim_test padd.s   shdsp\n-    run_sim_test pand.s   shdsp\n-    run_sim_test pclr.s   shdsp\n-    run_sim_test pdec.s   shdsp\n-    run_sim_test pdmsb.s  shdsp\n-    run_sim_test pinc.s   shdsp\n-    run_sim_test pmuls.s  shdsp\n-    run_sim_test prnd.s   shdsp\n-    run_sim_test pshai.s  shdsp\n-    run_sim_test pshar.s  shdsp\n-    run_sim_test pshli.s  shdsp\n-    run_sim_test pshlr.s  shdsp\n-    run_sim_test psub.s   shdsp\n-    run_sim_test pswap.s  shdsp\n-    run_sim_test pushpop.s sh\n-    run_sim_test resbank.s sh\n-    run_sim_test sett.s   sh\n-    run_sim_test shll.s   $all\n-    run_sim_test shll2.s  $all\n-    run_sim_test shll8.s  $all\n-    run_sim_test shll16.s $all\n-    run_sim_test shlr.s   $all\n-    run_sim_test shlr2.s  $all\n-    run_sim_test shlr8.s  $all\n-    run_sim_test shlr16.s $all\n-    run_sim_test swap.s   $all\n+    foreach src [lsort [glob -nocomplain $srcdir/$subdir/*.s]] {\n+\trun_sim_test $src $all_machs\n+    }\n }"
    },
    {
      "sha": "f8b18045596286bcd2b9ff95bf8678ea09db2628",
      "filename": "sim/testsuite/sh/fail.s",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fail.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fail.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/fail.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -2,6 +2,8 @@\n # mach:\t all\n # as(sh):\t-defsym sim_cpu=0\n # as(shdsp):\t-defsym sim_cpu=1 -dsp \n+# output: fail\\n\n+# status: 1\n \n \t.include \"testutils.inc\"\n "
    },
    {
      "sha": "6eb5824b28e638be24f59980a37fe969f19e6676",
      "filename": "sim/testsuite/sh/fsca.s",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fsca.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fsca.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/fsca.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,7 @@\n # sh testcase for fsca\n # mach: sh\n # as(sh):\t-defsym sim_cpu=0\n+# xerror: test hasn't been run in a long time\n \n \t.include \"testutils.inc\"\n "
    },
    {
      "sha": "14d41e0d06dc7d5e3e6ecde9bd0991d02014130a",
      "filename": "sim/testsuite/sh/fsrra.s",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fsrra.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/fsrra.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/fsrra.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,7 @@\n # sh testcase for fsrra\n # mach: sh\n # as(sh):\t-defsym sim_cpu=0\n+# xerror: test hasn't been run in a long time\n \n \t.include \"testutils.inc\"\n "
    },
    {
      "sha": "cbc3573141e883fe609e8543ad8fbd160a8cadc1",
      "filename": "sim/testsuite/sh/pshai.s",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshai.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshai.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/pshai.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,5 @@\n # sh testcase for psha <imm>\n-# mach: all\n-# as(sh):\t-defsym sim_cpu=0\n+# mach: shdsp\n # as(shdsp):\t-defsym sim_cpu=1 -dsp \n \n \t.include \"testutils.inc\""
    },
    {
      "sha": "0066819cfd6622069ced653a134726d81f20adff",
      "filename": "sim/testsuite/sh/pshar.s",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshar.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshar.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/pshar.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,5 @@\n # sh testcase for psha <reg>\n-# mach: all\n-# as(sh):\t-defsym sim_cpu=0\n+# mach: shdsp\n # as(shdsp):\t-defsym sim_cpu=1 -dsp \n \n \t.include \"testutils.inc\""
    },
    {
      "sha": "73adf2673fd20fa6c7f91bce671cfced42f03d13",
      "filename": "sim/testsuite/sh/pshli.s",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshli.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshli.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/pshli.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,5 @@\n # sh testcase for pshl <imm>\n-# mach: all\n-# as(sh):\t-defsym sim_cpu=0\n+# mach: shdsp\n # as(shdsp):\t-defsym sim_cpu=1 -dsp \n \n \t.include \"testutils.inc\""
    },
    {
      "sha": "64e5a4372e8e677d955cbf2b83947602bb31cbc6",
      "filename": "sim/testsuite/sh/pshlr.s",
      "status": "modified",
      "additions": 1,
      "deletions": 2,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshlr.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/024120b6ee344843b7d02e83e6fc0d5b33a3cd29/sim/testsuite/sh/pshlr.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/testsuite/sh/pshlr.s?ref=024120b6ee344843b7d02e83e6fc0d5b33a3cd29",
      "patch": "@@ -1,6 +1,5 @@\n # sh testcase for pshl <reg>\n-# mach: all\n-# as(sh):\t-defsym sim_cpu=0\n+# mach: shdsp\n # as(shdsp):\t-defsym sim_cpu=1 -dsp \n \n \t.include \"testutils.inc\""
    }
  ]
}