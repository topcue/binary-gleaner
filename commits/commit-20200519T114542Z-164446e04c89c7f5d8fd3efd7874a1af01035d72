{
  "sha": "164446e04c89c7f5d8fd3efd7874a1af01035d72",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MTY0NDQ2ZTA0Yzg5YzdmNWQ4ZmQzZWZkNzg3NGExYWYwMTAzNWQ3Mg==",
  "commit": {
    "author": {
      "name": "Alexander Fedotov",
      "email": "alfedotov@gmail.com",
      "date": "2020-05-19T11:45:42Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2020-05-19T11:45:42Z"
    },
    "message": "Fix the ARM assembler to generate a Realtime profile for armv8-r.\n\n\tPR 25992\ngas\t* config/tc-arm.c : Add arm_ext_v8r feature.\n\t(it_fsm_post_encode): Check arm_ext_v8r feature.\n\t(get_aeabi_cpu_arch_from_fset): Check arm_ext_v8r feature.\n\ninclude\t* opcode/arm.h (ARM_EXT2_V8R): Define. Modified ARM_AEXT2_V8R.",
    "tree": {
      "sha": "3937fb29107534cb3dc45f9699ab68528ad24b16",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3937fb29107534cb3dc45f9699ab68528ad24b16"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/164446e04c89c7f5d8fd3efd7874a1af01035d72",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/164446e04c89c7f5d8fd3efd7874a1af01035d72",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/164446e04c89c7f5d8fd3efd7874a1af01035d72",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/164446e04c89c7f5d8fd3efd7874a1af01035d72/comments",
  "author": {
    "login": "alfedotov",
    "id": 11288772,
    "node_id": "MDQ6VXNlcjExMjg4Nzcy",
    "avatar_url": "https://avatars.githubusercontent.com/u/11288772?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alfedotov",
    "html_url": "https://github.com/alfedotov",
    "followers_url": "https://api.github.com/users/alfedotov/followers",
    "following_url": "https://api.github.com/users/alfedotov/following{/other_user}",
    "gists_url": "https://api.github.com/users/alfedotov/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alfedotov/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alfedotov/subscriptions",
    "organizations_url": "https://api.github.com/users/alfedotov/orgs",
    "repos_url": "https://api.github.com/users/alfedotov/repos",
    "events_url": "https://api.github.com/users/alfedotov/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alfedotov/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a501eb446f5149c1133dbc99f86743b8dd614fa4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a501eb446f5149c1133dbc99f86743b8dd614fa4",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a501eb446f5149c1133dbc99f86743b8dd614fa4"
    }
  ],
  "stats": {
    "total": 39,
    "additions": 28,
    "deletions": 11
  },
  "files": [
    {
      "sha": "67f6174c27edbcfab95e4be8707b6ae5ebcc5749",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -1,3 +1,10 @@\n+2020-05-19  Alexander Fedotov  <alfedotov@gmail.com>\n+\n+\tPR 25992\n+\t* config/tc-arm.c : Add arm_ext_v8r feature.\n+\t(it_fsm_post_encode): Check arm_ext_v8r feature.\n+\t(get_aeabi_cpu_arch_from_fset): Check arm_ext_v8r feature.\n+\n 2020-05-19  Alan Modra  <amodra@gmail.com>\n \n \t* write.c (write_contents): Use bfd_get_filename rather than"
    },
    {
      "sha": "bc0b3a4f6f58bd2f9c72b0054969fbf23fcc8c48",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 10,
      "deletions": 6,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -230,6 +230,7 @@ static const arm_feature_set arm_ext_div = ARM_FEATURE_CORE_LOW (ARM_EXT_DIV);\n static const arm_feature_set arm_ext_v7 = ARM_FEATURE_CORE_LOW (ARM_EXT_V7);\n static const arm_feature_set arm_ext_v7a = ARM_FEATURE_CORE_LOW (ARM_EXT_V7A);\n static const arm_feature_set arm_ext_v7r = ARM_FEATURE_CORE_LOW (ARM_EXT_V7R);\n+static const arm_feature_set arm_ext_v8r = ARM_FEATURE_CORE_HIGH (ARM_EXT2_V8R);\n #ifdef OBJ_ELF\n static const arm_feature_set ATTRIBUTE_UNUSED arm_ext_v7m = ARM_FEATURE_CORE_LOW (ARM_EXT_V7M);\n #endif\n@@ -23298,7 +23299,8 @@ it_fsm_post_encode (void)\n       && warn_on_restrict_it\n       && !now_pred.warn_deprecated\n       && warn_on_deprecated\n-      && ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v8)\n+      && (ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v8)\n+          || ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_v8r))\n       && !ARM_CPU_HAS_FEATURE (cpu_variant, arm_ext_m))\n     {\n       if (inst.instruction >= 0x10000)\n@@ -32878,12 +32880,14 @@ get_aeabi_cpu_arch_from_fset (const arm_feature_set *arch_ext_fset,\n \n  found:\n   /* Tag_CPU_arch_profile.  */\n-  if (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v7a)\n-      || ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8)\n-      || (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_atomics)\n-\t  && !ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8m_m_only)))\n+  if (!ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8r)\n+      && (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v7a)\n+          || ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8)\n+          || (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_atomics)\n+              && !ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8m_m_only))))\n     *profile = 'A';\n-  else if (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v7r))\n+  else if (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v7r)\n+      || ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_v8r))\n     *profile = 'R';\n   else if (ARM_CPU_HAS_FEATURE (p_ver_ret->flags, arm_ext_m))\n     *profile = 'M';"
    },
    {
      "sha": "5bd0fc5f3714349b68e60cc8289dcbb0898b9574",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8-r+crypto.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+crypto.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+crypto.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8-r+crypto.d?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -9,7 +9,7 @@ Attribute Section: aeabi\n File Attributes\n   Tag_CPU_name: \"8-R\"\n   Tag_CPU_arch: v8-R\n-  Tag_CPU_arch_profile: Application\n+  Tag_CPU_arch_profile: Realtime\n   Tag_ARM_ISA_use: Yes\n   Tag_THUMB_ISA_use: Thumb-2\n   Tag_FP_arch: FP for ARMv8"
    },
    {
      "sha": "afd5a756d028e529942bde68c81e8ab1387817b9",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8-r+fp.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+fp.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+fp.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8-r+fp.d?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -9,7 +9,7 @@ Attribute Section: aeabi\n File Attributes\n   Tag_CPU_name: \"8-R\"\n   Tag_CPU_arch: v8-R\n-  Tag_CPU_arch_profile: Application\n+  Tag_CPU_arch_profile: Realtime\n   Tag_ARM_ISA_use: Yes\n   Tag_THUMB_ISA_use: Thumb-2\n   Tag_FP_arch: FP for ARMv8"
    },
    {
      "sha": "8c8578a78f16fd9308ad71b327d26f03c914500a",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8-r+simd.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+simd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r+simd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8-r+simd.d?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -9,7 +9,7 @@ Attribute Section: aeabi\n File Attributes\n   Tag_CPU_name: \"8-R\"\n   Tag_CPU_arch: v8-R\n-  Tag_CPU_arch_profile: Application\n+  Tag_CPU_arch_profile: Realtime\n   Tag_ARM_ISA_use: Yes\n   Tag_THUMB_ISA_use: Thumb-2\n   Tag_FP_arch: FP for ARMv8"
    },
    {
      "sha": "cf4b3a51f808048746bf3ab2f701f66a0f5113e0",
      "filename": "gas/testsuite/gas/arm/attr-march-armv8-r.d",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/gas/testsuite/gas/arm/attr-march-armv8-r.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/arm/attr-march-armv8-r.d?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -9,7 +9,7 @@ Attribute Section: aeabi\n File Attributes\n   Tag_CPU_name: \"8-R\"\n   Tag_CPU_arch: v8-R\n-  Tag_CPU_arch_profile: Application\n+  Tag_CPU_arch_profile: Realtime\n   Tag_ARM_ISA_use: Yes\n   Tag_THUMB_ISA_use: Thumb-2\n   Tag_MPextension_use: Allowed"
    },
    {
      "sha": "9f2599f81c4fc8e49abba5ae48d0b00eaf0540c1",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -1,3 +1,8 @@\n+2020-05-19  Alexander Fedotov  <alfedotov@gmail.com>\n+\n+\tPR 25992\n+\t* opcode/arm.h (ARM_EXT2_V8R): Define. Modified ARM_AEXT2_V8R.\n+\n 2020-05-11  Alan Modra  <amodra@gmail.com>\n \n \t* opcode/ppc.h (PPC_OPERAND_ACC): Define.  Renumber following"
    },
    {
      "sha": "834edf0a24440044950d7ed9397b9f0aa02540cf",
      "filename": "include/opcode/arm.h",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/164446e04c89c7f5d8fd3efd7874a1af01035d72/include/opcode/arm.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/164446e04c89c7f5d8fd3efd7874a1af01035d72/include/opcode/arm.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/opcode/arm.h?ref=164446e04c89c7f5d8fd3efd7874a1af01035d72",
      "patch": "@@ -88,6 +88,7 @@\n #define ARM_EXT2_CDE5\t     0x10000000 /* Using CDE coproc 5.\t   */\n #define ARM_EXT2_CDE6\t     0x20000000 /* Using CDE coproc 6.\t   */\n #define ARM_EXT2_CDE7\t     0x40000000 /* Using CDE coproc 7.\t   */\n+#define ARM_EXT2_V8R\t     0x80000000\t/* Arm V8R.\t               */\n \n /* Co-processor space extensions.  */\n #define ARM_CEXT_XSCALE\t     0x00000001\t/* Allow MIA etc.\t \t   */\n@@ -191,7 +192,7 @@\n #define ARM_AEXT2_V8M_MAIN\t(ARM_AEXT2_V8M_BASE | ARM_EXT2_V8M_MAIN)\n #define ARM_AEXT2_V8M_MAIN_DSP\t ARM_AEXT2_V8M_MAIN\n #define ARM_AEXT_V8R\t\t ARM_AEXT_V8A\n-#define ARM_AEXT2_V8R\t\t ARM_AEXT2_V8AR\n+#define ARM_AEXT2_V8R\t\t (ARM_EXT2_V8R | ARM_AEXT2_V8AR)\n #define ARM_AEXT_V8_1M_MAIN\t ARM_AEXT_V8M_MAIN\n #define ARM_AEXT2_V8_1M_MAIN\t(ARM_AEXT2_V8M_MAIN | ARM_EXT2_V8_1M_MAIN     \\\n \t\t\t\t\t\t    | ARM_EXT2_FP16_INST)"
    }
  ]
}