{
  "sha": "a6a1f5e050c3d4444b8074ba9ba02f547b725892",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YTZhMWY1ZTA1MGMzZDQ0NDRiODA3NGJhOWJhMDJmNTQ3YjcyNTg5Mg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-10T11:22:50Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-10T11:26:42Z"
    },
    "message": "More 1 << 31 signed overflows\n\n\t* config/tc-csky.c (get_operand_value): Rewrite 1 << 31 expressions\n\tto avoid signed overflow.\n\t* config/tc-mcore.c (md_assemble): Likewise.\n\t* config/tc-mips.c (gpr_read_mask, gpr_write_mask): Likewise.\n\t* config/tc-nds32.c (SET_ADDEND): Likewise.\n\t* config/tc-nios2.c (nios2_assemble_arg_R): Likewise.",
    "tree": {
      "sha": "148949871d0afd71346130e2e8cbb7dc60024dde",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/148949871d0afd71346130e2e8cbb7dc60024dde"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/a6a1f5e050c3d4444b8074ba9ba02f547b725892",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a6a1f5e050c3d4444b8074ba9ba02f547b725892",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/a6a1f5e050c3d4444b8074ba9ba02f547b725892",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a6a1f5e050c3d4444b8074ba9ba02f547b725892/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "e10ac147c80240c2d0aa0a2ae2ec7f6a934c198f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/e10ac147c80240c2d0aa0a2ae2ec7f6a934c198f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/e10ac147c80240c2d0aa0a2ae2ec7f6a934c198f"
    }
  ],
  "stats": {
    "total": 27,
    "additions": 18,
    "deletions": 9
  },
  "files": [
    {
      "sha": "836cb5c6d9e1e349ed05b5bf1cb7b48b9b0e0893",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -1,3 +1,12 @@\n+2020-03-10  Alan Modra  <amodra@gmail.com>\n+\n+\t* config/tc-csky.c (get_operand_value): Rewrite 1 << 31 expressions\n+\tto avoid signed overflow.\n+\t* config/tc-mcore.c (md_assemble): Likewise.\n+\t* config/tc-mips.c (gpr_read_mask, gpr_write_mask): Likewise.\n+\t* config/tc-nds32.c (SET_ADDEND): Likewise.\n+\t* config/tc-nios2.c (nios2_assemble_arg_R): Likewise.\n+\n 2020-03-09  Jan Beulich  <jbeulich@suse.com>\n \n \t* testsuite/gas/i386/avx.s: Add long-form VCMP[PS][SD] pseudos."
    },
    {
      "sha": "83fca2af73db63f4b81b82590f34164dda2f9465",
      "filename": "gas/config/tc-csky.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-csky.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-csky.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-csky.c?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -3166,7 +3166,7 @@ get_operand_value (struct csky_opcode_info *op,\n     case OPRND_TYPE_IMM5b_1_31:\n       return is_imm_over_range (oper, 1, 31, -1);\n     case OPRND_TYPE_IMM5b_POWER:\n-      if (is_imm_over_range (oper, 1, ~(1 << 31), 1 << 31))\n+      if (is_imm_over_range (oper, 1, (1u << 31) - 1, 1u << 31))\n \t{\n \t  int log;\n \t  int val = csky_insn.val[csky_insn.idx - 1];\n@@ -3179,7 +3179,7 @@ get_operand_value (struct csky_opcode_info *op,\n \n       /* This type for \"mgeni\" in csky v1 ISA.  */\n       case OPRND_TYPE_IMM5b_7_31_POWER:\n-\tif (is_imm_over_range (oper, 1, ~(1 << 31), 1 << 31))\n+\tif (is_imm_over_range (oper, 1, (1u << 31) - 1, 1u << 31))\n \t  {\n \t    int log;\n \t    int val = csky_insn.val[csky_insn.idx - 1];"
    },
    {
      "sha": "b849a7c90f3d9db959c49579a2985600cd65e55e",
      "filename": "gas/config/tc-mcore.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-mcore.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-mcore.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-mcore.c?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -1088,7 +1088,7 @@ md_assemble (char * str)\n \n       if (* op_end == ',')\n \t{\n-\t  op_end = parse_imm (op_end + 1, & reg, 1, 1 << 31);\n+\t  op_end = parse_imm (op_end + 1, & reg, 1, 1u << 31);\n \t  /* Further restrict the immediate to a power of two.  */\n \t  if ((reg & (reg - 1)) == 0)\n \t    reg = mylog2 (reg);\n@@ -1144,7 +1144,7 @@ md_assemble (char * str)\n \n       if (* op_end == ',')\n \t{\n-\t  op_end = parse_imm (op_end + 1, & reg, 1, 1 << 31);\n+\t  op_end = parse_imm (op_end + 1, & reg, 1, 1u << 31);\n \n \t  /* Further restrict the immediate to a power of two.  */\n \t  if ((reg & (reg - 1)) == 0)"
    },
    {
      "sha": "31acb77d78ad68a80a86638fd2a77b34b1d23084",
      "filename": "gas/config/tc-mips.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-mips.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-mips.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-mips.c?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -4778,7 +4778,7 @@ gpr_read_mask (const struct mips_cl_insn *ip)\n   if (pinfo2 & INSN2_READ_SP)\n     mask |= 1 << SP;\n   if (pinfo2 & INSN2_READ_GPR_31)\n-    mask |= 1 << 31;\n+    mask |= 1u << 31;\n   /* Don't include register 0.  */\n   return mask & ~1;\n }\n@@ -4797,7 +4797,7 @@ gpr_write_mask (const struct mips_cl_insn *ip)\n   if (pinfo & INSN_WRITE_GPR_24)\n     mask |= 1 << 24;\n   if (pinfo & INSN_WRITE_GPR_31)\n-    mask |= 1 << 31;\n+    mask |= 1u << 31;\n   if (pinfo & INSN_UDI)\n     /* UDI instructions have traditionally been assumed to write to RD.  */\n     mask |= 1 << EXTRACT_OPERAND (mips_opts.micromips, RD, *ip);"
    },
    {
      "sha": "893b61fe267b9290f7f7bef91ba898f8876400cd",
      "filename": "gas/config/tc-nds32.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-nds32.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-nds32.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-nds32.c?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -5278,8 +5278,8 @@ nds32_elf_sethi_range (struct nds32_relocs_pattern *pattern)\n    not, optimize option, 16 bit instruction is enable.  */\n \n #define SET_ADDEND(size, convertible, optimize, insn16_on) \\\n-  (((size) & 0xff) | ((convertible) ? 1 << 31 : 0) \\\n-   | ((optimize) ? 1<< 30 : 0) | (insn16_on ? 1 << 29 : 0))\n+  (((size) & 0xff) | ((convertible) ? 1u << 31 : 0) \\\n+   | ((optimize) ? 1 << 30 : 0) | (insn16_on ? 1 << 29 : 0))\n #define MAC_COMBO (E_NDS32_HAS_FPU_MAC_INST|E_NDS32_HAS_MAC_DX_INST)\n \n static void"
    },
    {
      "sha": "52cfb985c159f990dd30b35d36fc10a996141876",
      "filename": "gas/config/tc-nios2.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-nios2.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/a6a1f5e050c3d4444b8074ba9ba02f547b725892/gas/config/tc-nios2.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-nios2.c?ref=a6a1f5e050c3d4444b8074ba9ba02f547b725892",
      "patch": "@@ -2710,7 +2710,7 @@ nios2_assemble_arg_R (const char *token, nios2_insn_infoS *insn)\n \t  mask = (reglist & 0x00ffc000) >> 14;\n \t  if (reglist & (1 << 28))\n \t    mask |= 1 << 10;\n-\t  if (reglist & (1 << 31))\n+\t  if (reglist & (1u << 31))\n \t    mask |= 1 << 11;\n \t}\n       insn->insn_code |= SET_IW_F1X4L17_REGMASK (mask);"
    }
  ]
}