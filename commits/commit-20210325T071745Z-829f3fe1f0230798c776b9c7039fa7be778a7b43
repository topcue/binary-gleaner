{
  "sha": "829f3fe1f0230798c776b9c7039fa7be778a7b43",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODI5ZjNmZTFmMDIzMDc5OGM3NzZiOWM3MDM5ZmE3YmU3NzhhN2I0Mw==",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-25T07:17:45Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2021-03-25T07:17:45Z"
    },
    "message": "x86-64: limit breakage from gcc movdir64b et al workaround\n\nThis is only a partial fix for PR/gas 27419, in that it limits the bad\nbehavior of accepting mismatched operands to just x32 mode. The full fix\nwould be to revert commits 27f134698ac5 and b3a3496f83a1, and to address\nthe issue in gcc instead.",
    "tree": {
      "sha": "91d3fe382cb4e126101d0278079a96a987bd4810",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/91d3fe382cb4e126101d0278079a96a987bd4810"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/829f3fe1f0230798c776b9c7039fa7be778a7b43",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/829f3fe1f0230798c776b9c7039fa7be778a7b43",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/829f3fe1f0230798c776b9c7039fa7be778a7b43",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/829f3fe1f0230798c776b9c7039fa7be778a7b43/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5a4037661bccd156d65093f1f0cf2cd43f31e9d9",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5a4037661bccd156d65093f1f0cf2cd43f31e9d9",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5a4037661bccd156d65093f1f0cf2cd43f31e9d9"
    }
  ],
  "stats": {
    "total": 213,
    "additions": 178,
    "deletions": 35
  },
  "files": [
    {
      "sha": "e36eca98c5c411ed6d17ff09262a3a76708e37c1",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,3 +1,25 @@\n+2021-03-25  Jan Beulich  <jbeulich@suse.com>\n+\n+\tPR/gas 27419\n+\t* config/tc-i386.c (process_suffix): Restrict (%rip) -> (%eip)\n+\tconversion to x32 mode.\n+\t* testsuite/gas/i386/ilp32/enqcmd.s,\n+\ttestsuite/gas/i386/ilp32/enqcmd.d,\n+\ttestsuite/gas/i386/ilp32/movdir.s,\n+\ttestsuite/gas/i386/ilp32/movdir.d: New.\n+\t* testsuite/gas/i386/x86-64-enqcmd.s,\n+\ttestsuite/gas/i386/x86-64-movdir.s: Drop mismatched operand\n+\tcases.\n+\t* testsuite/gas/i386/x86-64-enqcmd-inval.s: Add (%rip) and\n+\t(%eip) cases.\n+\t* testsuite/gas/i386/x86-64-movdir64b-reg.s Add (%eip) case.\n+\t* testsuite/gas/i386/x86-64-enqcmd.d,\n+\ttestsuite/gas/i386/x86-64-enqcmd-intel.d,\n+\ttestsuite/gas/i386/x86-64-enqcmd-inval.l,\n+\ttestsuite/gas/i386/x86-64-movdir.d,\n+\ttestsuite/gas/i386/x86-64-movdir-intel.d,\n+\ttestsuite/gas/i386/x86-64-movdir64b-reg.l: Adjust expectations.\n+\n 2021-03-25  Alan Modra  <amodra@gmail.com>\n \n \tPR 27647"
    },
    {
      "sha": "c2c5b69366b895ce2c820db2450eb7098e55288d",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 7,
      "deletions": 2,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -7169,7 +7169,7 @@ process_suffix (void)\n \n \t  /* Check the register operand for the address size prefix if\n \t     the memory operand has no real registers, like symbol, DISP\n-\t     or symbol(%rip).  */\n+\t     or bogus (x32-only) symbol(%rip) when symbol(%eip) is meant.  */\n \t  if (i.mem_operands == 1\n \t      && i.reg_operands == 1\n \t      && i.operands == 2\n@@ -7178,9 +7178,14 @@ process_suffix (void)\n \t\t  ? i.op[1].regs->reg_type.bitfield.word\n \t\t  : i.op[1].regs->reg_type.bitfield.dword)\n \t      && ((i.base_reg == NULL && i.index_reg == NULL)\n-\t\t  || (i.base_reg\n+#if defined (OBJ_MAYBE_ELF) || defined (OBJ_ELF)\n+\t\t  || (x86_elf_abi == X86_64_X32_ABI\n+\t\t      && i.base_reg\n \t\t      && i.base_reg->reg_num == RegIP\n \t\t      && i.base_reg->reg_type.bitfield.qword))\n+#else\n+\t\t  || 0)\n+#endif\n \t      && !add_prefix (ADDR_PREFIX_OPCODE))\n \t    return 0;\n "
    },
    {
      "sha": "156fbe0cd3d0e1cbebba3b28c306ab423dc35ea7",
      "filename": "gas/testsuite/gas/i386/ilp32/enqcmd.d",
      "status": "added",
      "additions": 38,
      "deletions": 0,
      "changes": 38,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/enqcmd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/enqcmd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/ilp32/enqcmd.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -0,0 +1,38 @@\n+#objdump: -dw\n+#name: ilp32 ENQCMD[S] insns\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section \\.text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 01    \tenqcmd \\(%ecx\\),%eax\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds \\(%ecx\\),%eax\n+ +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\tf2 0f 38 f8 01       \tenqcmd \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 01    \tenqcmd \\(%ecx\\),%eax\n+ +[a-f0-9]+:\tf3 0f 38 f8 01       \tenqcmds \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds \\(%ecx\\),%eax\n+ +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 78 56 34 12 \tenqcmds 0x12345678\\(,%eiz,1\\),%ecx\n+#pass"
    },
    {
      "sha": "1f83e65b1160266743adb89f770deac39df617fe",
      "filename": "gas/testsuite/gas/i386/ilp32/enqcmd.s",
      "status": "added",
      "additions": 35,
      "deletions": 0,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/enqcmd.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/enqcmd.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/ilp32/enqcmd.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -0,0 +1,35 @@\n+# Check ENQCMD[S] 64-bit instructions in x32 mode\n+\n+\t.allow_index_reg\n+\t.text\n+_start:\n+\tenqcmd (%rcx),%rax\n+\tenqcmd (%ecx),%eax\n+\tenqcmds (%rcx),%rax\n+\tenqcmds (%ecx),%eax\n+\tenqcmd foo(%rip),%rcx\n+\tenqcmd foo(%rip),%ecx\n+\tenqcmd foo(%eip),%ecx\n+\tenqcmds foo(%rip),%rcx\n+\tenqcmds foo(%rip),%ecx\n+\tenqcmds foo(%eip),%ecx\n+\tenqcmd foo, %ecx\n+\tenqcmd 0x12345678, %ecx\n+\tenqcmds foo, %ecx\n+\tenqcmds 0x12345678, %ecx\n+\n+\t.intel_syntax noprefix\n+\tenqcmd rax,[rcx]\n+\tenqcmd eax,[ecx]\n+\tenqcmds rax,[rcx]\n+\tenqcmds eax,[ecx]\n+\tenqcmd rcx,[rip+foo]\n+\tenqcmd ecx,[rip+foo]\n+\tenqcmd ecx,[eip+foo]\n+\tenqcmds rcx,[rip+foo]\n+\tenqcmds ecx,[rip+foo]\n+\tenqcmds ecx,[eip+foo]\n+\tenqcmd ecx,ds:foo\n+\tenqcmd ecx,ds:0x12345678\n+\tenqcmds ecx,ds:foo\n+\tenqcmds ecx,ds:0x12345678"
    },
    {
      "sha": "fbb51f8e6d07628285d539574aac1f3832d9ebea",
      "filename": "gas/testsuite/gas/i386/ilp32/movdir.d",
      "status": "added",
      "additions": 29,
      "deletions": 0,
      "changes": 29,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/movdir.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/movdir.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/ilp32/movdir.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -0,0 +1,29 @@\n+#objdump: -dw\n+#name: ilp32 MOVDIR[I,64B] insns\n+\n+.*: +file format .*\n+\n+\n+Disassembly of section \\.text:\n+\n+0+ <_start>:\n+ +[a-f0-9]+:\t48 0f 38 f9 01       \tmovdiri %rax,\\(%rcx\\)\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%rcx\\)\n+ +[a-f0-9]+:\t48 0f 38 f9 01       \tmovdiri %rax,\\(%rcx\\)\n+ +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%rcx\\)\n+ +[a-f0-9]+:\t48 0f 38 f9 01       \tmovdiri %rax,\\(%rcx\\)\n+ +[a-f0-9]+:\t66 0f 38 f8 01       \tmovdir64b \\(%rcx\\),%rax\n+ +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n+ +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n+ +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n+#pass"
    },
    {
      "sha": "cbf178862bbc79eca45a971c4478eadb72c70c0e",
      "filename": "gas/testsuite/gas/i386/ilp32/movdir.s",
      "status": "added",
      "additions": 26,
      "deletions": 0,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/movdir.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/ilp32/movdir.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/ilp32/movdir.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -0,0 +1,26 @@\n+# Check MOVDIR[I,64B] 64-bit instructions in x32 mode\n+\n+\t.allow_index_reg\n+\t.text\n+_start:\n+\tmovdiri %rax, (%rcx)\n+\tmovdir64b (%rcx),%rax\n+\tmovdir64b (%ecx),%eax\n+\tmovdir64b foo(%rip),%rcx\n+\tmovdir64b foo(%rip),%ecx\n+\tmovdir64b foo(%eip),%ecx\n+\tmovdir64b foo, %ecx\n+\tmovdir64b 0x12345678, %ecx\n+\n+\t.intel_syntax noprefix\n+\tmovdiri [rcx],eax\n+\tmovdiri [rcx],rax\n+\tmovdiri dword ptr [rcx],eax\n+\tmovdiri qword ptr [rcx],rax\n+\tmovdir64b rax,[rcx]\n+\tmovdir64b eax,[ecx]\n+\tmovdir64b rcx,[rip+foo]\n+\tmovdir64b ecx,[rip+foo]\n+\tmovdir64b ecx,[eip+foo]\n+\tmovdir64b ecx,ds:foo\n+\tmovdir64b ecx,ds:0x12345678"
    },
    {
      "sha": "2da649bfce031314af8671fad261293b6e0c4d49",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "status": "modified",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd-intel.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,4 +1,3 @@\n-#as:\n #objdump: -dw -Mintel\n #name: x86_64 ENQCMD[S] insns (Intel disassembly)\n #source: x86-64-enqcmd.s\n@@ -15,10 +14,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds eax,\\[ecx\\]\n  +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd ecx,\\[eiz\\*1\\+0x0\\]\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd ecx,\\[eiz\\*1\\+0x12345678\\]\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds ecx,\\[eiz\\*1\\+0x0\\]\n@@ -29,10 +26,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds eax,\\[ecx\\]\n  +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd ecx,\\[eiz\\*1\\+0x0\\]\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd ecx,\\[eiz\\*1\\+0x12345678\\]\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds ecx,\\[eiz\\*1\\+0x0\\]"
    },
    {
      "sha": "be8d48f5f1a9ba5a1731869606c08db057e83f09",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd-inval.l",
      "status": "modified",
      "additions": 10,
      "deletions": 6,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-inval.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-inval.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd-inval.l?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,9 +1,13 @@\n .* Assembler messages:\n .*6: Error: invalid register operand size for `enqcmd'\n .*7: Error: invalid register operand size for `enqcmd'\n-.*8: Error: invalid register operand size for `enqcmds'\n-.*9: Error: invalid register operand size for `enqcmds'\n-.*12: Error: invalid register operand size for `enqcmd'\n-.*13: Error: invalid register operand size for `enqcmd'\n-.*14: Error: invalid register operand size for `enqcmds'\n-.*15: Error: invalid register operand size for `enqcmds'\n+.*8: Error: invalid register operand size for `enqcmd'\n+.*9: Error: invalid register operand size for `enqcmd'\n+.*10: Error: invalid register operand size for `enqcmds'\n+.*11: Error: invalid register operand size for `enqcmds'\n+.*12: Error: invalid register operand size for `enqcmds'\n+.*13: Error: invalid register operand size for `enqcmds'\n+.*16: Error: invalid register operand size for `enqcmd'\n+.*17: Error: invalid register operand size for `enqcmd'\n+.*18: Error: invalid register operand size for `enqcmds'\n+.*19: Error: invalid register operand size for `enqcmds'"
    },
    {
      "sha": "6dd5c9c18209e3f9732104a1a1eed88093909f84",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd-inval.s",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-inval.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd-inval.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd-inval.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,12 +1,16 @@\n-# Check error for ENQCMD[S] 32-bit instructions\n+# Check error for ENQCMD[S] 64-bit instructions\n \n \t.allow_index_reg\n \t.text\n _start:\n \tenqcmd (%esi),%rax\n+\tenqcmd (%eip),%rax\n \tenqcmd (%rsi),%eax\n+\tenqcmd (%rip),%eax\n \tenqcmds (%esi),%rax\n+\tenqcmds (%eip),%rax\n \tenqcmds (%rsi),%eax\n+\tenqcmds (%rip),%eax\n \n \t.intel_syntax noprefix\n \tenqcmd rax,[esi]"
    },
    {
      "sha": "a66c3f1c4ce5ba5569c747fbaf0f932fa6cda805",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,7 +1,5 @@\n-#as:\n #objdump: -dw\n #name: x86_64 ENQCMD[S] insns\n-#source: x86-64-enqcmd.s\n \n .*: +file format .*\n \n@@ -15,10 +13,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds \\(%ecx\\),%eax\n  +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx\n@@ -29,10 +25,8 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 f3 0f 38 f8 01    \tenqcmds \\(%ecx\\),%eax\n  +[a-f0-9]+:\tf2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 f2 0f 38 f8 0d 00 00 00 00 \tenqcmd 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\tf3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 f3 0f 38 f8 0d 00 00 00 00 \tenqcmds 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 00 00 00 00 \tenqcmd 0x0\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 f2 0f 38 f8 0c 25 78 56 34 12 \tenqcmd 0x12345678\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 f3 0f 38 f8 0c 25 00 00 00 00 \tenqcmds 0x0\\(,%eiz,1\\),%ecx"
    },
    {
      "sha": "9abbdaea50754a0132a33aba2cbd94e0f74696c1",
      "filename": "gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-enqcmd.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-enqcmd.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -8,10 +8,8 @@ _start:\n \tenqcmds (%rcx),%rax\n \tenqcmds (%ecx),%eax\n \tenqcmd foo(%rip),%rcx\n-\tenqcmd foo(%rip),%ecx\n \tenqcmd foo(%eip),%ecx\n \tenqcmds foo(%rip),%rcx\n-\tenqcmds foo(%rip),%ecx\n \tenqcmds foo(%eip),%ecx\n \tenqcmd foo, %ecx\n \tenqcmd 0x12345678, %ecx\n@@ -24,10 +22,8 @@ _start:\n \tenqcmds rax,[rcx]\n \tenqcmds eax,[ecx]\n \tenqcmd rcx,[rip+foo]\n-\tenqcmd ecx,[rip+foo]\n \tenqcmd ecx,[eip+foo]\n \tenqcmds rcx,[rip+foo]\n-\tenqcmds ecx,[rip+foo]\n \tenqcmds ecx,[eip+foo]\n \tenqcmd ecx,ds:foo\n \tenqcmd ecx,ds:0x12345678"
    },
    {
      "sha": "147867487c78603bc8399cdbbdff71f5092657d6",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir-intel.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir-intel.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,4 +1,3 @@\n-#as:\n #objdump: -dw -Mintel\n #name: x86_64 MOVDIR[I,64B] insns (Intel disassembly)\n #source: x86-64-movdir.s\n@@ -14,7 +13,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b eax,\\[ecx\\]\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b ecx,\\[eiz\\*1\\+0x0\\]\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b ecx,\\[eiz\\*1\\+0x12345678\\]\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri DWORD PTR \\[rcx\\],eax\n@@ -25,7 +23,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b eax,\\[ecx\\]\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b rcx,\\[rip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n- +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b ecx,\\[eip\\+0x0\\]        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b ecx,\\[eiz\\*1\\+0x0\\]\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b ecx,\\[eiz\\*1\\+0x12345678\\]\n #pass"
    },
    {
      "sha": "483a1f76cc7ab7e58b8ba6a0bca9466c36f8d5a1",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir.d",
      "status": "modified",
      "additions": 0,
      "deletions": 4,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir.d",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir.d",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir.d?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,7 +1,5 @@\n-#as:\n #objdump: -dw\n #name: x86_64 MOVDIR[I,64B] insns\n-#source: x86-64-movdir.s\n \n .*: +file format .*\n \n@@ -14,7 +12,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t0f 38 f9 01          \tmovdiri %eax,\\(%rcx\\)\n@@ -25,7 +22,6 @@ Disassembly of section \\.text:\n  +[a-f0-9]+:\t67 66 0f 38 f8 01    \tmovdir64b \\(%ecx\\),%eax\n  +[a-f0-9]+:\t66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%rip\\),%rcx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n- +[a-f0-9]+:\t67 66 0f 38 f8 0d 00 00 00 00 \tmovdir64b 0x0\\(%eip\\),%ecx        #.*\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 00 00 00 00 \tmovdir64b 0x0\\(,%eiz,1\\),%ecx\n  +[a-f0-9]+:\t67 66 0f 38 f8 0c 25 78 56 34 12 \tmovdir64b 0x12345678\\(,%eiz,1\\),%ecx\n #pass"
    },
    {
      "sha": "79f2977af8c0956d3ca9023b5ffe04067e6d1b57",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir.s",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -7,7 +7,6 @@ _start:\n \tmovdir64b (%rcx),%rax\n \tmovdir64b (%ecx),%eax\n \tmovdir64b foo(%rip),%rcx\n-\tmovdir64b foo(%rip),%ecx\n \tmovdir64b foo(%eip),%ecx\n \tmovdir64b foo, %ecx\n \tmovdir64b 0x12345678, %ecx\n@@ -20,7 +19,6 @@ _start:\n \tmovdir64b rax,[rcx]\n \tmovdir64b eax,[ecx]\n \tmovdir64b rcx,[rip+foo]\n-\tmovdir64b ecx,[rip+foo]\n \tmovdir64b ecx,[eip+foo]\n \tmovdir64b ecx,ds:foo\n \tmovdir64b ecx,ds:0x12345678"
    },
    {
      "sha": "2f0e13d6a53860801b2b4a5a028b9a0aec92e6c2",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir64b-reg.l",
      "status": "modified",
      "additions": 4,
      "deletions": 2,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir64b-reg.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir64b-reg.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir64b-reg.l?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -1,5 +1,7 @@\n .*: Assembler messages:\n .*:6: Error: invalid register operand size for `movdir64b'\n .*:7: Error: invalid register operand size for `movdir64b'\n-.*:10: Error: invalid register operand size for `movdir64b'\n-.*:11: Error: invalid register operand size for `movdir64b'\n+.*:8: Error: invalid register operand size for `movdir64b'\n+.*:9: Error: invalid register operand size for `movdir64b'\n+.*:12: Error: invalid register operand size for `movdir64b'\n+.*:13: Error: invalid register operand size for `movdir64b'"
    },
    {
      "sha": "8697a87601078d03ec4bed4dcd0c41c485390eba",
      "filename": "gas/testsuite/gas/i386/x86-64-movdir64b-reg.s",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir64b-reg.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/829f3fe1f0230798c776b9c7039fa7be778a7b43/gas/testsuite/gas/i386/x86-64-movdir64b-reg.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/x86-64-movdir64b-reg.s?ref=829f3fe1f0230798c776b9c7039fa7be778a7b43",
      "patch": "@@ -4,7 +4,9 @@\n \t.text\n _start:\n \tmovdir64b (%esi),%rax\n+\tmovdir64b (%eip),%rax\n \tmovdir64b (%rsi),%eax\n+\tmovdir64b (%rip),%eax\n \n \t.intel_syntax noprefix\n \tmovdir64b rax,[esi]"
    }
  ]
}