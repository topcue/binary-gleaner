{
  "sha": "2c722807a752ce468b04fcf6d29857f377beeaf5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MmM3MjI4MDdhNzUyY2U0NjhiMDRmY2Y2ZDI5ODU3ZjM3N2JlZWFmNQ==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:06:53Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-06-12T23:18:09Z"
    },
    "message": "number_or_range_parser::get_number, don't treat \"1 -\" as a range\n\nWhile adding -OPT options to \"frame apply level\", I noticed that:\n\n (gdb) frame apply level 0 -[TAB]\n\nwasn't completing on the supported options.  This commit fixes it.\nWe'll get instead:\n\n  (gdb) frame apply level 0 -\n  -c           -past-entry  -past-main   -q           -s\n\nI added the isspace check because this case:\n\n  (gdb) frame apply level 0-\n\ncan't be an option.\n\nTests for this will be in a new gdb.base/options.exp file, in a\nfollowing patch.  It will exercise all of:\n\n  (gdb) frame apply level 0-\n  (gdb) frame apply level 0 -\n  (gdb) frame apply level 0 --\n  (gdb) frame apply level 0 -- -\n\ngdb/ChangeLog:\n2019-06-13  Pedro Alves  <palves@redhat.com>\n\n\t* cli/cli-utils.c (number_or_range_parser::get_number): Do not\n\tparse a range if \"-\" is at the end of the string.",
    "tree": {
      "sha": "68e88585cf81f0389104360d4208dd3c7b4b6e8c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/68e88585cf81f0389104360d4208dd3c7b4b6e8c"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2c722807a752ce468b04fcf6d29857f377beeaf5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2c722807a752ce468b04fcf6d29857f377beeaf5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2c722807a752ce468b04fcf6d29857f377beeaf5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2c722807a752ce468b04fcf6d29857f377beeaf5/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/dee7b4c83a636471ee321fb4fe1c3be0a16a9ea7"
    }
  ],
  "stats": {
    "total": 21,
    "additions": 17,
    "deletions": 4
  },
  "files": [
    {
      "sha": "73fd65e9256a290349e0292269a9af102e06925e",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2c722807a752ce468b04fcf6d29857f377beeaf5/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2c722807a752ce468b04fcf6d29857f377beeaf5/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=2c722807a752ce468b04fcf6d29857f377beeaf5",
      "patch": "@@ -1,3 +1,8 @@\n+2019-06-13  Pedro Alves  <palves@redhat.com>\n+\n+\t* cli/cli-utils.c (number_or_range_parser::get_number): Do not\n+\tparse a range if \"-\" is at the end of the string.\n+\n 2019-06-13  Pedro Alves  <palves@redhat.com>\n \n \t* cli/cli-setshow.c (parse_auto_binary_operation)"
    },
    {
      "sha": "23296cee9c33169412674b53d0b049f868d77dda",
      "filename": "gdb/cli/cli-utils.c",
      "status": "modified",
      "additions": 12,
      "deletions": 4,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2c722807a752ce468b04fcf6d29857f377beeaf5/gdb/cli/cli-utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2c722807a752ce468b04fcf6d29857f377beeaf5/gdb/cli/cli-utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-utils.c?ref=2c722807a752ce468b04fcf6d29857f377beeaf5",
      "patch": "@@ -233,10 +233,18 @@ number_or_range_parser::get_number ()\n       /* Default case: state->m_cur_tok is pointing either to a solo\n \t number, or to the first number of a range.  */\n       m_last_retval = get_number_trailer (&m_cur_tok, '-');\n-      /* If get_number_trailer has found a -, it might be the start\n-\t of a command option.  So, do not parse a range if the - is\n-\t followed by an alpha.  */\n-      if (*m_cur_tok == '-' && !isalpha (*(m_cur_tok + 1)))\n+      /* If get_number_trailer has found a '-' preceded by a space, it\n+\t might be the start of a command option.  So, do not parse a\n+\t range if the '-' is followed by an alpha or another '-'.  We\n+\t might also be completing something like\n+\t \"frame apply level 0 -\" and we prefer treating that \"-\" as an\n+\t option rather than an incomplete range, so check for end of\n+\t string as well.  */\n+      if (m_cur_tok[0] == '-'\n+\t  && !(isspace (m_cur_tok[-1])\n+\t       && (isalpha (m_cur_tok[1])\n+\t\t   || m_cur_tok[1] == '-'\n+\t\t   || m_cur_tok[1] == '\\0')))\n \t{\n \t  const char **temp;\n "
    }
  ]
}