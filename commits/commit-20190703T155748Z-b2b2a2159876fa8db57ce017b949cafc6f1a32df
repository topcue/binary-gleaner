{
  "sha": "b2b2a2159876fa8db57ce017b949cafc6f1a32df",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjJiMmEyMTU5ODc2ZmE4ZGI1N2NlMDE3Yjk0OWNhZmM2ZjFhMzJkZg==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-07-03T15:57:48Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-07-03T15:57:48Z"
    },
    "message": "Fix test_gdb_complete_tab_multiple race\n\nRunning 'make check-read1 TESTS=\"gdb.base/options.exp\"' revealed a\nrace in test_gdb_complete_tab_multiple.  There's a gdb_test_multiple\ncall that expects a prompt in the middle of the regexp.  That's racy\nbecause gdb_test_multiple includes a built-in FAIL pattern for the\nprompt, which may match if gdb is slow enough to produce the rest of\nthe output after the prompt.\n\nFix this in the usual way of splitting the matching in two.\n\ngdb/testsuite/ChangeLog:\n2019-07-03  Pedro Alves  <palves@redhat.com>\n\n\t* lib/completion-support.exp (test_gdb_complete_tab_multiple):\n\tSplit one gdb_test_multiple call in two to avoid a race.",
    "tree": {
      "sha": "2b763c0578cc9f2383d75180e92d5d4f5b35ef4f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/2b763c0578cc9f2383d75180e92d5d4f5b35ef4f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b2b2a2159876fa8db57ce017b949cafc6f1a32df",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b2b2a2159876fa8db57ce017b949cafc6f1a32df",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b2b2a2159876fa8db57ce017b949cafc6f1a32df",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b2b2a2159876fa8db57ce017b949cafc6f1a32df/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "077a039f70d870899da31eb8cee597964515fa3c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/077a039f70d870899da31eb8cee597964515fa3c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/077a039f70d870899da31eb8cee597964515fa3c"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 11,
    "deletions": 2
  },
  "files": [
    {
      "sha": "6e2234984da82ac4329a2e0520f43d7f34f13537",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b2b2a2159876fa8db57ce017b949cafc6f1a32df/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b2b2a2159876fa8db57ce017b949cafc6f1a32df/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=b2b2a2159876fa8db57ce017b949cafc6f1a32df",
      "patch": "@@ -1,3 +1,8 @@\n+2019-07-03  Pedro Alves  <palves@redhat.com>\n+\n+\t* lib/completion-support.exp (test_gdb_complete_tab_multiple):\n+\tSplit one gdb_test_multiple call in two to avoid a race.\n+\n 2019-07-03  Pedro Alves  <palves@redhat.com>\n \n \t* gdb.base/with.c: New file."
    },
    {
      "sha": "3199e85fd4d3e8c74595bb09f454a87af22f5870",
      "filename": "gdb/testsuite/lib/completion-support.exp",
      "status": "modified",
      "additions": 6,
      "deletions": 2,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b2b2a2159876fa8db57ce017b949cafc6f1a32df/gdb/testsuite/lib/completion-support.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b2b2a2159876fa8db57ce017b949cafc6f1a32df/gdb/testsuite/lib/completion-support.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/completion-support.exp?ref=b2b2a2159876fa8db57ce017b949cafc6f1a32df",
      "patch": "@@ -151,8 +151,12 @@ proc test_gdb_complete_tab_multiple { input_line add_completed_line \\\n \t\tset maybe_bell \"\"\n \t    }\n \t    gdb_test_multiple \"\" \"$test (second tab)\" {\n-\t\t-re \"^${maybe_bell}\\r\\n$expected_re\\r\\n$gdb_prompt $input_line_re$add_completed_line_re$\" {\n-\t\t    pass \"$test\"\n+\t\t-re \"^${maybe_bell}\\r\\n$expected_re\\r\\n$gdb_prompt \" {\n+\t\t    gdb_test_multiple \"\" \"$test (second tab)\" {\n+\t\t\t-re \"^$input_line_re$add_completed_line_re$\" {\n+\t\t\t    pass \"$test\"\n+\t\t\t}\n+\t\t    }\n \t\t}\n \t    }\n \t}"
    }
  ]
}