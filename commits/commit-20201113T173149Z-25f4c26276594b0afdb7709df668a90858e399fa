{
  "sha": "25f4c26276594b0afdb7709df668a90858e399fa",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MjVmNGMyNjI3NjU5NGIwYWZkYjc3MDlkZjY2OGE5MDg1OGUzOTlmYQ==",
  "commit": {
    "author": {
      "name": "Keith Seitz",
      "email": "keiths@redhat.com",
      "date": "2020-11-13T17:31:49Z"
    },
    "committer": {
      "name": "Keith Seitz",
      "email": "keiths@redhat.com",
      "date": "2020-11-13T17:31:49Z"
    },
    "message": "Exclude debuginfo files from \"outside of ELF segments\" warning\n\nWhen GDB loads an ELF file, it will warn when a section is not located\nin an ELF segment:\n\n$ ./gdb -q -iex \"set build-id-verbose 0\" --ex \"b systemctl_main\" -ex \"r\" -batch --args systemctl kexec\nBreakpoint 1 at 0xc24d: file ../src/systemctl/systemctl.c, line 8752.\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libgcc_s.so.1\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libcap.so.2\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libacl.so.1\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libcryptsetup.so.12\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libgcrypt.so.20\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n  in .gnu_debugdata for /lib64/libip4tc.so.2\n[snip]\nThis has feature has also been reported by various users, most notably\nthe Fedora-EOL'd bug 1553086.\n\nMark Wielaard explains the issue quite nicely in\n\n   https://sourceware.org/bugzilla/show_bug.cgi?id=24717#c2\n\nThe short of it is, the ELF program headers for debuginfo files are\nnot suited to this particular use case. Consequently, the warning\ngenerated above really is useless and should be ignored.\n\nThis patch follows the same heuristic that BFD itself uses.\n\ngdb/ChangeLog\n2020-11-13  Keith Seitz  <keiths@redhat.com>\n\n\thttps://bugzilla.redhat.com/show_bug.cgi?id=1553086\n\t* elfread.c (elf_symfile_segments): Omit \"Loadable section ...\n\toutside of ELF segments\" warning for debugin",
    "tree": {
      "sha": "272d88192d2454e2619e22c0bb2cabb533bcfa35",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/272d88192d2454e2619e22c0bb2cabb533bcfa35"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/25f4c26276594b0afdb7709df668a90858e399fa",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25f4c26276594b0afdb7709df668a90858e399fa",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/25f4c26276594b0afdb7709df668a90858e399fa",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/25f4c26276594b0afdb7709df668a90858e399fa/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/9d3ab915be4548c6fee80c0b2f79a509fd4150b8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/9d3ab915be4548c6fee80c0b2f79a509fd4150b8"
    }
  ],
  "stats": {
    "total": 13,
    "additions": 12,
    "deletions": 1
  },
  "files": [
    {
      "sha": "652f20a5875d3da173a7e67e8c43acb3a64d22b9",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25f4c26276594b0afdb7709df668a90858e399fa/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25f4c26276594b0afdb7709df668a90858e399fa/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=25f4c26276594b0afdb7709df668a90858e399fa",
      "patch": "@@ -1,3 +1,9 @@\n+2020-11-13  Keith Seitz  <keiths@redhat.com>\n+\n+\thttps://bugzilla.redhat.com/show_bug.cgi?id=1553086\n+\t* elfread.c (elf_symfile_segments): Omit \"Loadable section ...\n+\toutside of ELF segments\" warning for debugin\n+\n 2020-11-13  Keith Seitz  <keiths@redhat.com>\n \n \tPR gdb/23034"
    },
    {
      "sha": "ccd7ce50d5102dfe1472a76318b03910e9a0cdff",
      "filename": "gdb/elfread.c",
      "status": "modified",
      "additions": 6,
      "deletions": 1,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/25f4c26276594b0afdb7709df668a90858e399fa/gdb/elfread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/25f4c26276594b0afdb7709df668a90858e399fa/gdb/elfread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/elfread.c?ref=25f4c26276594b0afdb7709df668a90858e399fa",
      "patch": "@@ -147,7 +147,12 @@ elf_symfile_segments (bfd *abfd)\n \t RealView) use SHT_NOBITS for uninitialized data.  Since it is\n \t uninitialized, it doesn't need a program header.  Such\n \t binaries are not relocatable.  */\n-      if (bfd_section_size (sect) > 0 && j == num_segments\n+\n+      /* Exclude debuginfo files from this warning, too, since those\n+\t are often not strictly compliant with the standard. See, e.g.,\n+\t ld/24717 for more discussion.  */\n+      if (!is_debuginfo_file (abfd)\n+\t  && bfd_section_size (sect) > 0 && j == num_segments\n \t  && (bfd_section_flags (sect) & SEC_LOAD) != 0)\n \twarning (_(\"Loadable section \\\"%s\\\" outside of ELF segments\\n  in %s\"),\n \t\t bfd_section_name (sect), bfd_get_filename (abfd));"
    }
  ]
}