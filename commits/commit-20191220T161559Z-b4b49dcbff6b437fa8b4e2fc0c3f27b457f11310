{
  "sha": "b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjRiNDlkY2JmZjZiNDM3ZmE4YjRlMmZjMGMzZjI3YjQ1N2YxMTMxMA==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-11-13T23:47:58Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-12-20T16:15:59Z"
    },
    "message": "Don't call tui_show_source from tui_ui_out\n\nThis removes the call to tui_show_source from tui_ui_out.  This always\nseemed like a hack, and now that the TUI is using the proper\nobservers, it seems not to be needed.\n\nThe rest of the logic remains, unfortunately, because it is needed to\nsuppress some gdb output in the TUI case.  We could probably find a\nnicer way to do this (maybe a ui_out_flag), but I haven't attempted\nthis.\n\nThis was the last caller of tui_show_source, so this is removed as\nwell.\n\ngdb/ChangeLog\n2019-12-20  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui.c (tui_show_source): Remove.\n\t* tui/tui.h (tui_show_source): Don't declare.\n\t* tui/tui-out.c (tui_ui_out::do_field_string): Don't call\n\ttui_show_source.\n\nChange-Id: Id71098e597ee4ebfef0429562baa45f537bd2c2b",
    "tree": {
      "sha": "eae7d652490d9893ec5b0642c0e30a910703541a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/eae7d652490d9893ec5b0642c0e30a910703541a"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "eb390f499b820b74e0ab07162b0b8bd12da6f35a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eb390f499b820b74e0ab07162b0b8bd12da6f35a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/eb390f499b820b74e0ab07162b0b8bd12da6f35a"
    }
  ],
  "stats": {
    "total": 26,
    "additions": 8,
    "deletions": 18
  },
  "files": [
    {
      "sha": "0f35deff3509b9e4ca78ab860b08ae291afca9f5",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
      "patch": "@@ -1,3 +1,10 @@\n+2019-12-20  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui.c (tui_show_source): Remove.\n+\t* tui/tui.h (tui_show_source): Don't declare.\n+\t* tui/tui-out.c (tui_ui_out::do_field_string): Don't call\n+\ttui_show_source.\n+\n 2019-12-20  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-stack.h (tui_show_frame_info): Return bool."
    },
    {
      "sha": "22b4996a1bb969828bf38ca8c34c7061ca3ba18d",
      "filename": "gdb/tui/tui-out.c",
      "status": "modified",
      "additions": 1,
      "deletions": 4,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui-out.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui-out.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-out.c?ref=b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
      "patch": "@@ -60,10 +60,7 @@ tui_ui_out::do_field_string (int fldno, int width, ui_align align,\n   m_start_of_line++;\n \n   if (fldname && m_line > 0 && strcmp (fldname, \"fullname\") == 0)\n-    {\n-      tui_show_source ();\n-      return;\n-    }\n+    return;\n \n   cli_ui_out::do_field_string (fldno, width, align, fldname, string, style);\n }"
    },
    {
      "sha": "f33ff44128814e0ca9b4d8c9ae432caca62ebba6",
      "filename": "gdb/tui/tui.c",
      "status": "modified",
      "additions": 0,
      "deletions": 12,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui.c?ref=b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
      "patch": "@@ -628,18 +628,6 @@ tui_reset (void)\n }\n #endif\n \n-void\n-tui_show_source ()\n-{\n-  struct symtab_and_line cursal = get_current_source_symtab_and_line ();\n-\n-  /* Make sure that the source window is displayed.  */\n-  tui_add_win_to_layout (SRC_WIN);\n-\n-  tui_update_source_windows_with_line (cursal);\n-  tui_update_locator_fullname (cursal.symtab);\n-}\n-\n void\n tui_show_assembly (struct gdbarch *gdbarch, CORE_ADDR addr)\n {"
    },
    {
      "sha": "06f3ef1f01beb269822fe4a08335df59398dc775",
      "filename": "gdb/tui/tui.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310/gdb/tui/tui.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui.h?ref=b4b49dcbff6b437fa8b4e2fc0c3f27b457f11310",
      "patch": "@@ -83,6 +83,4 @@ extern void tui_set_key_mode (enum tui_key_mode mode);\n \n extern int tui_active;\n \n-extern void tui_show_source ();\n-\n #endif /* TUI_TUI_H */"
    }
  ]
}