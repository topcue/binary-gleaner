{
  "sha": "86c6b807f50ecec84e55007bf6cb6e54c159727b",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ODZjNmI4MDdmNTBlY2VjODRlNTUwMDdiZjZjYjZlNTRjMTU5NzI3Yg==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-04-21T19:58:49Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-08-12T16:57:56Z"
    },
    "message": "Require readline 7 or newer\n\nThis changes gdb to require readline 7 or newer at build time.\n\ngdb/ChangeLog\n2019-08-12  Tom Tromey  <tom@tromey.com>\n\n\t* configure: Rebuild.\n\t* configure.ac: Check for readline 7.\n\t* NEWS: Mention readline 7 requirement.\n\t* README: Update.\n\ngdb/doc/ChangeLog\n2019-08-12  Tom Tromey  <tom@tromey.com>\n\n\t* gdb.texinfo (Configure Options): Document minimum version of\n\treadline.",
    "tree": {
      "sha": "1b3454909a376b369eecaf0df7d20b7558bf5bce",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1b3454909a376b369eecaf0df7d20b7558bf5bce"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/86c6b807f50ecec84e55007bf6cb6e54c159727b",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/86c6b807f50ecec84e55007bf6cb6e54c159727b",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/86c6b807f50ecec84e55007bf6cb6e54c159727b",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/86c6b807f50ecec84e55007bf6cb6e54c159727b/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5db2718ce48c497e317787caebacd019da59c3b0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5db2718ce48c497e317787caebacd019da59c3b0",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5db2718ce48c497e317787caebacd019da59c3b0"
    }
  ],
  "stats": {
    "total": 69,
    "additions": 67,
    "deletions": 2
  },
  "files": [
    {
      "sha": "12998aa2b1424aad3017266f19333e71c60e8564",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -1,3 +1,10 @@\n+2019-08-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* configure: Rebuild.\n+\t* configure.ac: Check for readline 7.\n+\t* NEWS: Mention readline 7 requirement.\n+\t* README: Update.\n+\n 2019-08-12  Tom Tromey  <tom@tromey.com>\n \n \t* mingw-hdep.c (gdb_select): Remove readline hack."
    },
    {
      "sha": "462247f4861d715a6d7aee78fa298567f87f8713",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -299,6 +299,11 @@ maint show test-options-completion-result\n   Using another implementation of the make program or an earlier version of\n   GNU make to build GDB or GDBserver is not supported.\n \n+* Building GDB now requires GNU readline >= 7.0.\n+\n+  GDB now bundles GNU readline 8.0, but if you choose to use\n+  --with-system-readline, only readline >= 7.0 can be used.\n+\n *** Changes in GDB 8.3\n \n * GDB and GDBserver now support access to additional registers on"
    },
    {
      "sha": "8883a8a09e3dd3079533514cd639729dfe201428",
      "filename": "gdb/README",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/README",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/README",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/README?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -439,7 +439,8 @@ more obscure GDB `configure' options are not listed here.\n \n `--with-system-readline'\n      Use the readline library installed on the host, rather than the\n-     library supplied as part of GDB.\n+     library supplied as part of GDB.  Readline 7 or newer is required;\n+     this is enforced by the build system.\n \n `--with-system-zlib\n      Use the zlib library installed on the host, rather than the"
    },
    {
      "sha": "2832c836177602493e69ed4c26a2de6dc3025f7e",
      "filename": "gdb/configure",
      "status": "modified",
      "additions": 32,
      "deletions": 0,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -8952,6 +8952,38 @@ fi\n \n \n if test \"$with_system_readline\" = yes; then\n+   { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether system readline is new enough\" >&5\n+$as_echo_n \"checking whether system readline is new enough... \" >&6; }\n+if ${gdb_cv_readline_ok+:} false; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+#include <stdio.h>\n+#include <readline/readline.h>\n+int\n+main ()\n+{\n+#if RL_VERSION_MAJOR < 7\n+# error \"readline version 7 required\"\n+#endif\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  gdb_cv_readline_ok=yes\n+else\n+  gdb_cv_readline_ok=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $gdb_cv_readline_ok\" >&5\n+$as_echo \"$gdb_cv_readline_ok\" >&6; }\n+  if test \"$gdb_cv_readline_ok\" != yes; then\n+    as_fn_error $? \"system readline is not new enough\" \"$LINENO\" 5\n+  fi\n+\n   READLINE=-lreadline\n   READLINE_DEPS=\n   READLINE_CFLAGS="
    },
    {
      "sha": "0979109d976582877a2abb636db4c3e4fa712978",
      "filename": "gdb/configure.ac",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/configure.ac?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -581,6 +581,20 @@ AC_ARG_WITH([system-readline],\n                   [use installed readline library])])\n \n if test \"$with_system_readline\" = yes; then\n+   AC_CACHE_CHECK([whether system readline is new enough],\n+     [gdb_cv_readline_ok],\n+     [AC_TRY_COMPILE(\n+       [#include <stdio.h>\n+#include <readline/readline.h>],\n+       [#if RL_VERSION_MAJOR < 7\n+# error \"readline version 7 required\"\n+#endif],\n+    gdb_cv_readline_ok=yes,\n+    gdb_cv_readline_ok=no)])\n+  if test \"$gdb_cv_readline_ok\" != yes; then\n+    AC_MSG_ERROR([system readline is not new enough])\n+  fi\n+\n   READLINE=-lreadline\n   READLINE_DEPS=\n   READLINE_CFLAGS="
    },
    {
      "sha": "971e9c311ae7060e1ae02ec4cbcb1301839190a0",
      "filename": "gdb/doc/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/doc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/doc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/ChangeLog?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -1,3 +1,8 @@\n+2019-08-12  Tom Tromey  <tom@tromey.com>\n+\n+\t* gdb.texinfo (Configure Options): Document minimum version of\n+\treadline.\n+\n 2019-08-09  Alan Hayward  <alan.hayward@arm.com>\n \n         * gdb.texinfo (AArch64 Pointer Authentication): Fix typo."
    },
    {
      "sha": "523e3d0bfe13aba5feaa62c2d9d4b19966b4a533",
      "filename": "gdb/doc/gdb.texinfo",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/doc/gdb.texinfo",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/86c6b807f50ecec84e55007bf6cb6e54c159727b/gdb/doc/gdb.texinfo",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/gdb.texinfo?ref=86c6b807f50ecec84e55007bf6cb6e54c159727b",
      "patch": "@@ -36905,7 +36905,8 @@ details.\n \n @item --with-system-readline\n Use the readline library installed on the host, rather than the\n-library supplied as part of @value{GDBN}.\n+library supplied as part of @value{GDBN}.  Readline 7 or newer is\n+required; this is enforced by the build system.\n \n @item --with-system-zlib\n Use the zlib library installed on the host, rather than the library"
    }
  ]
}