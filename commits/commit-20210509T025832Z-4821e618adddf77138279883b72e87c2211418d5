{
  "sha": "4821e618adddf77138279883b72e87c2211418d5",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDgyMWU2MThhZGRkZjc3MTM4Mjc5ODgzYjcyZTg3YzIyMTE0MThkNQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-09T02:58:32Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2021-05-09T02:58:32Z"
    },
    "message": "Use htab_eq_string in libctf\n\n\t* ctf-impl.h (ctf_dynset_eq_string): Don't declare.\n\t* ctf-hash.c (ctf_dynset_eq_string): Delete function.\n\t* ctf-dedup.c (make_set_element): Use htab_eq_string.\n\t(ctf_dedup_atoms_init, ADD_CITER, ctf_dedup_init): Likewise.\n\t(ctf_dedup_conflictify_unshared): Likewise.\n\t(ctf_dedup_walk_output_mapping): Likewise.",
    "tree": {
      "sha": "364806886ad74a695cfc63faf56ac59459e35fec",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/364806886ad74a695cfc63faf56ac59459e35fec"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/4821e618adddf77138279883b72e87c2211418d5",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4821e618adddf77138279883b72e87c2211418d5",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/4821e618adddf77138279883b72e87c2211418d5",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4821e618adddf77138279883b72e87c2211418d5/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b05a0fc79b9eed659cf52b4706f11700b92ae4af",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b05a0fc79b9eed659cf52b4706f11700b92ae4af",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b05a0fc79b9eed659cf52b4706f11700b92ae4af"
    }
  ],
  "stats": {
    "total": 34,
    "additions": 16,
    "deletions": 18
  },
  "files": [
    {
      "sha": "5d2e1984605d03ea759b1c114bf8e4964d6480ba",
      "filename": "libctf/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4821e618adddf77138279883b72e87c2211418d5/libctf/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4821e618adddf77138279883b72e87c2211418d5/libctf/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ChangeLog?ref=4821e618adddf77138279883b72e87c2211418d5",
      "patch": "@@ -1,3 +1,12 @@\n+2021-05-09  Alan Modra  <amodra@gmail.com>\n+\n+\t* ctf-impl.h (ctf_dynset_eq_string): Don't declare.\n+\t* ctf-hash.c (ctf_dynset_eq_string): Delete function.\n+\t* ctf-dedup.c (make_set_element): Use htab_eq_string.\n+\t(ctf_dedup_atoms_init, ADD_CITER, ctf_dedup_init): Likewise.\n+\t(ctf_dedup_conflictify_unshared): Likewise.\n+\t(ctf_dedup_walk_output_mapping): Likewise.\n+\n 2021-05-06  Nick Alcock  <nick.alcock@oracle.com>\n \n \t* testsuite/lib/ctf-lib.exp: Use -gctf, not -gt."
    },
    {
      "sha": "6a76fc81b05d26e6b5eed74aa5421004c95bba97",
      "filename": "libctf/ctf-dedup.c",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-dedup.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-dedup.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-dedup.c?ref=4821e618adddf77138279883b72e87c2211418d5",
      "patch": "@@ -352,7 +352,7 @@ make_set_element (ctf_dynhash_t *set, const void *key)\n   if ((element = ctf_dynhash_lookup (set, key)) == NULL)\n     {\n       if ((element = ctf_dynset_create (htab_hash_string,\n-\t\t\t\t\tctf_dynset_eq_string,\n+\t\t\t\t\thtab_eq_string,\n \t\t\t\t\tNULL)) == NULL)\n \treturn NULL;\n \n@@ -376,7 +376,7 @@ ctf_dedup_atoms_init (ctf_dict_t *fp)\n   if (!fp->ctf_dedup_atoms_alloc)\n     {\n       if ((fp->ctf_dedup_atoms_alloc\n-\t   = ctf_dynset_create (htab_hash_string, ctf_dynset_eq_string,\n+\t   = ctf_dynset_create (htab_hash_string, htab_eq_string,\n \t\t\t\tfree)) == NULL)\n \treturn ctf_set_errno (fp, ENOMEM);\n     }\n@@ -584,8 +584,8 @@ ctf_dedup_rhash_type (ctf_dict_t *fp, ctf_dict_t *input, ctf_dict_t **inputs,\n       whaterr = N_(\"error updating citers\");\t\t\t\t\\\n       if (!citers)\t\t\t\t\t\t\t\\\n \tif ((citers = ctf_dynset_create (htab_hash_string,\t\t\\\n-\t\t\t\t\t  ctf_dynset_eq_string,\t\t\\\n-\t\t\t\t\t  NULL)) == NULL)\t\t\\\n+\t\t\t\t\t htab_eq_string,\t\t\\\n+\t\t\t\t\t NULL)) == NULL)\t\t\\\n \t  goto oom;\t\t\t\t\t\t\t\\\n       if (ctf_dynset_cinsert (citers, hval) < 0)\t\t\t\\\n \tgoto oom;\t\t\t\t\t\t\t\\\n@@ -1656,7 +1656,7 @@ ctf_dedup_init (ctf_dict_t *fp)\n \n   if ((d->cd_conflicting_types\n        = ctf_dynset_create (htab_hash_string,\n-\t\t\t    ctf_dynset_eq_string, NULL)) == NULL)\n+\t\t\t    htab_eq_string, NULL)) == NULL)\n     goto oom;\n \n   return 0;\n@@ -1814,7 +1814,7 @@ ctf_dedup_conflictify_unshared (ctf_dict_t *output, ctf_dict_t **inputs)\n   const void *k;\n   ctf_dynset_t *to_mark = NULL;\n \n-  if ((to_mark = ctf_dynset_create (htab_hash_string, ctf_dynset_eq_string,\n+  if ((to_mark = ctf_dynset_create (htab_hash_string, htab_eq_string,\n \t\t\t\t    NULL)) == NULL)\n     goto err_no;\n \n@@ -2351,7 +2351,7 @@ ctf_dedup_walk_output_mapping (ctf_dict_t *output, ctf_dict_t **inputs,\n   void *k;\n \n   if ((already_visited = ctf_dynset_create (htab_hash_string,\n-\t\t\t\t\t    ctf_dynset_eq_string,\n+\t\t\t\t\t    htab_eq_string,\n \t\t\t\t\t    NULL)) == NULL)\n     return ctf_set_errno (output, ENOMEM);\n "
    },
    {
      "sha": "73fca6fe5d203fb5d8e3570920f68dc7bc0a7352",
      "filename": "libctf/ctf-hash.c",
      "status": "modified",
      "additions": 0,
      "deletions": 9,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-hash.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-hash.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-hash.c?ref=4821e618adddf77138279883b72e87c2211418d5",
      "patch": "@@ -140,15 +140,6 @@ ctf_hash_eq_type_id_key (const void *a, const void *b)\n     && (key_a->ctii_type == key_b->ctii_type);\n }\n \n-/* Hash and eq functions for the dynset.  Most of these can just use the\n-   underlying hashtab functions directly.   */\n-\n-int\n-ctf_dynset_eq_string (const void *a, const void *b)\n-{\n-  return !strcmp((const char *) a, (const char *) b);\n-}\n-\n /* The dynhash, used for hashes whose size is not known at creation time. */\n \n /* Free a single ctf_helem with arbitrary key/value functions.  */"
    },
    {
      "sha": "80c47239e262775fc374b294652541c7aa9c255c",
      "filename": "libctf/ctf-impl.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-impl.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4821e618adddf77138279883b72e87c2211418d5/libctf/ctf-impl.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/libctf/ctf-impl.h?ref=4821e618adddf77138279883b72e87c2211418d5",
      "patch": "@@ -617,8 +617,6 @@ extern int ctf_hash_eq_string (const void *, const void *);\n extern int ctf_hash_eq_type_key (const void *, const void *);\n extern int ctf_hash_eq_type_id_key (const void *, const void *);\n \n-extern int ctf_dynset_eq_string (const void *, const void *);\n-\n typedef void (*ctf_hash_free_fun) (void *);\n \n typedef void (*ctf_hash_iter_f) (void *key, void *value, void *arg);"
    }
  ]
}