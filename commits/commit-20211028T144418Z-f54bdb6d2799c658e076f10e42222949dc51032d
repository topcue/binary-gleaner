{
  "sha": "f54bdb6d2799c658e076f10e42222949dc51032d",
  "node_id": "C_kwDOANOeidoAKGY1NGJkYjZkMjc5OWM2NThlMDc2ZjEwZTQyMjIyOTQ5ZGM1MTAzMmQ",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2021-09-22T17:43:25Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2021-10-28T14:44:18Z"
    },
    "message": "gdb: add add_setshow_prefix_cmd\n\nThere's a common pattern to call add_basic_prefix_cmd and\nadd_show_prefix_cmd to add matching set and show commands.  Add the\nadd_setshow_prefix_cmd function to factor that out and use it at a few\nplaces.\n\nChange-Id: I6e9e90a30e9efb7b255bf839cac27b85d7069cfd",
    "tree": {
      "sha": "bd9804255bf472e93740a8b47b2f90d5bde939c3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bd9804255bf472e93740a8b47b2f90d5bde939c3"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/f54bdb6d2799c658e076f10e42222949dc51032d",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f54bdb6d2799c658e076f10e42222949dc51032d",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/f54bdb6d2799c658e076f10e42222949dc51032d",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f54bdb6d2799c658e076f10e42222949dc51032d/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5ad2694b1ebe123ea92fcee094a69bcdc9769985",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5ad2694b1ebe123ea92fcee094a69bcdc9769985",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5ad2694b1ebe123ea92fcee094a69bcdc9769985"
    }
  ],
  "stats": {
    "total": 609,
    "additions": 280,
    "deletions": 329
  },
  "files": [
    {
      "sha": "d7e78729e2f8268e049708eef8bc49d86e87cfa5",
      "filename": "gdb/ada-lang.c",
      "status": "modified",
      "additions": 11,
      "deletions": 16,
      "changes": 27,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ada-lang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ada-lang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ada-lang.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -13508,13 +13508,12 @@ _initialize_ada_language ()\n {\n   initialize_ada_catchpoint_ops ();\n \n-  add_basic_prefix_cmd (\"ada\", no_class,\n-\t\t\t_(\"Prefix command for changing Ada-specific settings.\"),\n-\t\t\t&set_ada_list, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"ada\", no_class,\n-\t\t       _(\"Generic command for showing Ada-specific settings.\"),\n-\t\t       &show_ada_list, 0, &showlist);\n+  add_setshow_prefix_cmd\n+    (\"ada\", no_class,\n+     _(\"Prefix command for changing Ada-specific settings.\"),\n+     _(\"Generic command for showing Ada-specific settings.\"),\n+     &set_ada_list, &show_ada_list,\n+     &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"trust-PAD-over-XVS\", class_obscure,\n \t\t\t   &trust_pad_over_xvs, _(\"\\\n@@ -13582,15 +13581,11 @@ Usage: info exceptions [REGEXP]\\n\\\n If a regular expression is passed as an argument, only those matching\\n\\\n the regular expression are listed.\"));\n \n-  add_basic_prefix_cmd (\"ada\", class_maintenance,\n-\t\t\t_(\"Set Ada maintenance-related variables.\"),\n-\t\t\t&maint_set_ada_cmdlist,\n-\t\t\t0/*allow-unknown*/, &maintenance_set_cmdlist);\n-\n-  add_show_prefix_cmd (\"ada\", class_maintenance,\n-\t\t       _(\"Show Ada maintenance-related variables.\"),\n-\t\t       &maint_show_ada_cmdlist,\n-\t\t       0/*allow-unknown*/, &maintenance_show_cmdlist);\n+  add_setshow_prefix_cmd (\"ada\", class_maintenance,\n+\t\t\t  _(\"Set Ada maintenance-related variables.\"),\n+\t\t\t  _(\"Show Ada maintenance-related variables.\"),\n+\t\t\t  &maint_set_ada_cmdlist, &maint_show_ada_cmdlist,\n+\t\t\t  &maintenance_set_cmdlist, &maintenance_show_cmdlist);\n \n   add_setshow_boolean_cmd\n     (\"ignore-descriptive-types\", class_maintenance,"
    },
    {
      "sha": "10f8e00d6c30b6e6093533f654c427c83c7e6975",
      "filename": "gdb/arm-tdep.c",
      "status": "modified",
      "additions": 5,
      "deletions": 8,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/arm-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/arm-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/arm-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -9759,14 +9759,11 @@ _initialize_arm_tdep ()\n \t\t\t\t  arm_elf_osabi_sniffer);\n \n   /* Add root prefix command for all \"set arm\"/\"show arm\" commands.  */\n-  add_basic_prefix_cmd (\"arm\", no_class,\n-\t\t\t_(\"Various ARM-specific commands.\"),\n-\t\t\t&setarmcmdlist, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"arm\", no_class,\n-\t\t       _(\"Various ARM-specific commands.\"),\n-\t\t       &showarmcmdlist, 0, &showlist);\n-\n+  add_setshow_prefix_cmd (\"arm\", no_class,\n+\t\t\t  _(\"Various ARM-specific commands.\"),\n+\t\t\t  _(\"Various ARM-specific commands.\"),\n+\t\t\t  &setarmcmdlist, &showarmcmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   arm_disassembler_options = xstrdup (\"reg-names-std\");\n   const disasm_options_t *disasm_options"
    },
    {
      "sha": "4ec60f334a2f0c1f2d02a04c65e71a8bf7585298",
      "filename": "gdb/breakpoint.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/breakpoint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/breakpoint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/breakpoint.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -15881,18 +15881,17 @@ Use the 'source' command in another debug session to restore them.\"),\n   c = add_com_alias (\"save-tracepoints\", save_tracepoints_cmd, class_trace, 0);\n   deprecate_cmd (c, \"save tracepoints\");\n \n-  add_basic_prefix_cmd (\"breakpoint\", class_maintenance, _(\"\\\n+  add_setshow_prefix_cmd (\"breakpoint\", class_maintenance,\n+\t\t\t  _(\"\\\n Breakpoint specific settings.\\n\\\n Configure various breakpoint-specific variables such as\\n\\\n pending breakpoint behavior.\"),\n-\t\t\t&breakpoint_set_cmdlist,\n-\t\t\t0/*allow-unknown*/, &setlist);\n-  add_show_prefix_cmd (\"breakpoint\", class_maintenance, _(\"\\\n+\t\t\t  _(\"\\\n Breakpoint specific settings.\\n\\\n Configure various breakpoint-specific variables such as\\n\\\n pending breakpoint behavior.\"),\n-\t\t       &breakpoint_show_cmdlist,\n-\t\t       0/*allow-unknown*/, &showlist);\n+\t\t\t  &breakpoint_set_cmdlist, &breakpoint_show_cmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_auto_boolean_cmd (\"pending\", no_class,\n \t\t\t\t&pending_break_support, _(\"\\"
    },
    {
      "sha": "f12b1554d65f1f6572ca43e31f598d4defa2b664",
      "filename": "gdb/btrace.c",
      "status": "modified",
      "additions": 15,
      "deletions": 19,
      "changes": 34,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/btrace.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/btrace.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/btrace.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -3455,25 +3455,21 @@ _initialize_btrace ()\n \t\t\t_(\"Branch tracing maintenance commands.\"),\n \t\t\t&maint_btrace_cmdlist, 0, &maintenancelist);\n \n-  add_basic_prefix_cmd (\"btrace\", class_maintenance, _(\"\\\n-Set branch tracing specific variables.\"),\n-\t\t\t&maint_btrace_set_cmdlist,\n-\t\t\t0, &maintenance_set_cmdlist);\n-\n-  add_basic_prefix_cmd (\"pt\", class_maintenance, _(\"\\\n-Set Intel Processor Trace specific variables.\"),\n-\t\t\t&maint_btrace_pt_set_cmdlist,\n-\t\t\t0, &maint_btrace_set_cmdlist);\n-\n-  add_show_prefix_cmd (\"btrace\", class_maintenance, _(\"\\\n-Show branch tracing specific variables.\"),\n-\t\t       &maint_btrace_show_cmdlist,\n-\t\t       0, &maintenance_show_cmdlist);\n-\n-  add_show_prefix_cmd (\"pt\", class_maintenance, _(\"\\\n-Show Intel Processor Trace specific variables.\"),\n-\t\t       &maint_btrace_pt_show_cmdlist,\n-\t\t       0, &maint_btrace_show_cmdlist);\n+  add_setshow_prefix_cmd (\"btrace\", class_maintenance,\n+\t\t\t  _(\"Set branch tracing specific variables.\"),\n+\t\t\t  _(\"Show branch tracing specific variables.\"),\n+\t\t\t  &maint_btrace_set_cmdlist,\n+\t\t\t  &maint_btrace_show_cmdlist,\n+\t\t\t  &maintenance_set_cmdlist,\n+\t\t\t  &maintenance_show_cmdlist);\n+\n+  add_setshow_prefix_cmd (\"pt\", class_maintenance,\n+\t\t\t  _(\"Set Intel Processor Trace specific variables.\"),\n+\t\t\t  _(\"Show Intel Processor Trace specific variables.\"),\n+\t\t\t  &maint_btrace_pt_set_cmdlist,\n+\t\t\t  &maint_btrace_pt_show_cmdlist,\n+\t\t\t  &maint_btrace_set_cmdlist,\n+\t\t\t  &maint_btrace_show_cmdlist);\n \n   add_setshow_boolean_cmd (\"skip-pad\", class_maintenance,\n \t\t\t   &maint_btrace_pt_skip_pad, _(\"\\"
    },
    {
      "sha": "2cf614c8e7ecafd83b3aa68ea85bfdfb5624b5b7",
      "filename": "gdb/cli/cli-cmds.c",
      "status": "modified",
      "additions": 10,
      "deletions": 13,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-cmds.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-cmds.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-cmds.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -2394,12 +2394,11 @@ Show verbosity.\"), NULL,\n \t\t\t   show_info_verbose,\n \t\t\t   &setlist, &showlist);\n \n-  add_basic_prefix_cmd (\"history\", class_support, _(\"\\\n-Generic command for setting command history parameters.\"),\n-\t\t\t&sethistlist, 0, &setlist);\n-  add_show_prefix_cmd (\"history\", class_support, _(\"\\\n-Generic command for showing command history parameters.\"),\n-\t\t       &showhistlist, 0, &showlist);\n+  add_setshow_prefix_cmd\n+    (\"history\", class_support,\n+     _(\"Generic command for setting command history parameters.\"),\n+     _(\"Generic command for showing command history parameters.\"),\n+     &sethistlist, &showhistlist, &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"expansion\", no_class, &history_expansion_p, _(\"\\\n Set history expansion on command input.\"), _(\"\\\n@@ -2493,13 +2492,11 @@ the previous command number shown.\"),\n   add_cmd (\"configuration\", no_set_class, show_configuration,\n \t   _(\"Show how GDB was configured at build time.\"), &showlist);\n \n-  add_basic_prefix_cmd (\"debug\", no_class,\n-\t\t\t_(\"Generic command for setting gdb debugging flags.\"),\n-\t\t\t&setdebuglist, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"debug\", no_class,\n-\t\t       _(\"Generic command for showing gdb debugging flags.\"),\n-\t\t       &showdebuglist, 0, &showlist);\n+  add_setshow_prefix_cmd (\"debug\", no_class,\n+\t\t\t  _(\"Generic command for setting gdb debugging flags.\"),\n+\t\t\t  _(\"Generic command for showing gdb debugging flags.\"),\n+\t\t\t  &setdebuglist, &showdebuglist,\n+\t\t\t  &setlist, &showlist);\n \n   cmd_list_element *shell_cmd\n     = add_com (\"shell\", class_support, shell_command, _(\"\\"
    },
    {
      "sha": "27a80192c48529fe02d85c15ca5a11ac361a98de",
      "filename": "gdb/cli/cli-decode.c",
      "status": "modified",
      "additions": 22,
      "deletions": 0,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-decode.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-decode.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-decode.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -407,6 +407,28 @@ add_show_prefix_cmd (const char *name, enum command_class theclass,\n   return cmd;\n }\n \n+/* See command.h.  */\n+\n+set_show_commands\n+add_setshow_prefix_cmd (const char *name, command_class theclass,\n+\t\t\tconst char *set_doc, const char *show_doc,\n+\t\t\tcmd_list_element **set_subcommands_list,\n+\t\t\tcmd_list_element **show_subcommands_list,\n+\t\t\tcmd_list_element **set_list,\n+\t\t\tcmd_list_element **show_list)\n+{\n+  set_show_commands cmds;\n+\n+  cmds.set = add_basic_prefix_cmd (name, theclass, set_doc,\n+\t\t\t\t   set_subcommands_list, 0,\n+\t\t\t\t   set_list);\n+  cmds.show = add_show_prefix_cmd (name, theclass, show_doc,\n+\t\t\t\t   show_subcommands_list, 0,\n+\t\t\t\t   show_list);\n+\n+  return cmds;\n+}\n+\n /* Like ADD_PREFIX_CMD but sets the suppress_notification pointer on the\n    new command list element.  */\n "
    },
    {
      "sha": "f0ee09180f9ace9c7ad2d0a64804c2622e75d404",
      "filename": "gdb/cli/cli-logging.c",
      "status": "modified",
      "additions": 6,
      "deletions": 6,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-logging.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-logging.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-logging.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -169,12 +169,12 @@ _initialize_cli_logging ()\n {\n   static struct cmd_list_element *set_logging_cmdlist, *show_logging_cmdlist;\n \n-  add_basic_prefix_cmd (\"logging\", class_support,\n-\t\t\t_(\"Set logging options.\"), &set_logging_cmdlist,\n-\t\t\t0, &setlist);\n-  add_show_prefix_cmd (\"logging\", class_support,\n-\t\t       _(\"Show logging options.\"), &show_logging_cmdlist,\n-\t\t       0, &showlist);\n+  add_setshow_prefix_cmd (\"logging\", class_support,\n+\t\t\t  _(\"Set logging options.\"),\n+\t\t\t  _(\"Show logging options.\"),\n+\t\t\t  &set_logging_cmdlist, &show_logging_cmdlist,\n+\t\t\t  &setlist, &showlist);\n+\n   add_setshow_boolean_cmd (\"overwrite\", class_support, &logging_overwrite, _(\"\\\n Set whether logging overwrites or appends to the log file.\"), _(\"\\\n Show whether logging overwrites or appends to the log file.\"), _(\"\\"
    },
    {
      "sha": "f7e1a844ec08b869f5965e3e70b633a6c683463d",
      "filename": "gdb/cli/cli-style.c",
      "status": "modified",
      "additions": 8,
      "deletions": 8,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-style.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/cli/cli-style.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-style.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -226,10 +226,9 @@ cli_style_option::add_setshow_commands (enum command_class theclass,\n \t\t\t\t\tstruct cmd_list_element **show_list,\n \t\t\t\t\tbool skip_intensity)\n {\n-  add_basic_prefix_cmd (m_name, no_class, prefix_doc, &m_set_list,\n-\t\t\t0, set_list);\n-  add_show_prefix_cmd (m_name, no_class, prefix_doc, &m_show_list,\n-\t\t       0, show_list);\n+  add_setshow_prefix_cmd (m_name, theclass, prefix_doc, prefix_doc,\n+\t\t\t  &m_set_list, &m_show_list, set_list, show_list);\n+\n   set_show_commands commands;\n \n   commands = add_setshow_enum_cmd\n@@ -306,14 +305,15 @@ void _initialize_cli_style ();\n void\n _initialize_cli_style ()\n {\n-  add_basic_prefix_cmd (\"style\", no_class, _(\"\\\n+  add_setshow_prefix_cmd (\"style\", no_class,\n+\t\t\t  _(\"\\\n Style-specific settings.\\n\\\n Configure various style-related variables, such as colors\"),\n-\t\t  &style_set_list, 0, &setlist);\n-  add_show_prefix_cmd (\"style\", no_class, _(\"\\\n+\t\t\t  _(\"\\\n Style-specific settings.\\n\\\n Configure various style-related variables, such as colors\"),\n-\t\t  &style_show_list, 0, &showlist);\n+\t\t\t  &style_set_list, &style_show_list,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"enabled\", no_class, &cli_styling, _(\"\\\n Set whether CLI styling is enabled.\"), _(\"\\"
    },
    {
      "sha": "9afe70cf66a61341b535db096a6e24a73ad782d1",
      "filename": "gdb/command.h",
      "status": "modified",
      "additions": 18,
      "deletions": 7,
      "changes": 25,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/command.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/command.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/command.h?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -382,6 +382,13 @@ extern bool valid_user_defined_cmd_name_p (const char *name);\n \n extern bool valid_cmd_char_p (int c);\n \n+/* Return value type for the add_setshow_* functions.  */\n+\n+struct set_show_commands\n+{\n+  cmd_list_element *set, *show;\n+};\n+\n /* Const-correct variant of the above.  */\n \n extern struct cmd_list_element *add_cmd (const char *, enum command_class,\n@@ -428,6 +435,17 @@ extern struct cmd_list_element *add_show_prefix_cmd\n   (const char *, enum command_class, const char *, struct cmd_list_element **,\n    int, struct cmd_list_element **);\n \n+/* Add matching set and show commands using add_basic_prefix_cmd and\n+   add_show_prefix_cmd.  */\n+\n+extern set_show_commands add_setshow_prefix_cmd\n+  (const char *name, command_class theclass, const char *set_doc,\n+   const char *show_doc,\n+   cmd_list_element **set_subcommands_list,\n+   cmd_list_element **show_subcommands_list,\n+   cmd_list_element **set_list,\n+   cmd_list_element **show_list);\n+\n extern struct cmd_list_element *add_prefix_cmd_suppress_notification\n \t\t\t(const char *name, enum command_class theclass,\n \t\t\t cmd_simple_func_ftype *fun,\n@@ -616,13 +634,6 @@ typedef void (show_value_ftype) (struct ui_file *file,\n    instead print the value out directly.  */\n extern show_value_ftype deprecated_show_value_hack;\n \n-/* Return value type for the add_setshow_* functions.  */\n-\n-struct set_show_commands\n-{\n-  cmd_list_element *set, *show;\n-};\n-\n extern set_show_commands add_setshow_enum_cmd\n   (const char *name, command_class theclass, const char *const *enumlist,\n    const char **var, const char *set_doc, const char *show_doc,"
    },
    {
      "sha": "eed185146a7a91436e95a454c835955f3b7be22e",
      "filename": "gdb/dcache.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/dcache.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/dcache.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dcache.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -702,13 +702,12 @@ With no arguments, this command prints the cache configuration and a\\n\\\n summary of each line in the cache.  With an argument, dump\\\"\\n\\\n the contents of the given line.\"));\n \n-  add_basic_prefix_cmd (\"dcache\", class_obscure, _(\"\\\n+  add_setshow_prefix_cmd (\"dcache\", class_obscure,\n+\t\t\t  _(\"\\\n Use this command to set number of lines in dcache and line-size.\"),\n-\t\t\t&dcache_set_list, /*allow_unknown*/0, &setlist);\n-  add_show_prefix_cmd (\"dcache\", class_obscure, _(\"\\\n-Show dcachesettings.\"),\n-\t\t       &dcache_show_list, /*allow_unknown*/0,\n-\t\t       &showlist);\n+\t\t\t  (\"Show dcache settings.\"),\n+\t\t\t  &dcache_set_list, &dcache_show_list,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_zuinteger_cmd (\"line-size\", class_obscure,\n \t\t\t     &dcache_line_size, _(\"\\"
    },
    {
      "sha": "8b223e49af7c2a2c5e0bab00774a924a457ab176",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -24889,17 +24889,15 @@ void _initialize_dwarf2_read ();\n void\n _initialize_dwarf2_read ()\n {\n-  add_basic_prefix_cmd (\"dwarf\", class_maintenance, _(\"\\\n+  add_setshow_prefix_cmd (\"dwarf\", class_maintenance,\n+\t\t\t  _(\"\\\n Set DWARF specific variables.\\n\\\n Configure DWARF variables such as the cache size.\"),\n-\t\t\t&set_dwarf_cmdlist,\n-\t\t\t0/*allow-unknown*/, &maintenance_set_cmdlist);\n-\n-  add_show_prefix_cmd (\"dwarf\", class_maintenance, _(\"\\\n+\t\t\t  _(\"\\\n Show DWARF specific variables.\\n\\\n Show DWARF variables such as the cache size.\"),\n-\t\t       &show_dwarf_cmdlist,\n-\t\t       0/*allow-unknown*/, &maintenance_show_cmdlist);\n+\t\t\t  &set_dwarf_cmdlist, &show_dwarf_cmdlist,\n+\t\t\t  &maintenance_set_cmdlist, &maintenance_show_cmdlist);\n \n   add_setshow_zinteger_cmd (\"max-cache-age\", class_obscure,\n \t\t\t    &dwarf_max_cache_age, _(\"\\"
    },
    {
      "sha": "230feb78e26ca07d741fc6455af7ae40ae5447f5",
      "filename": "gdb/f-lang.c",
      "status": "modified",
      "additions": 6,
      "deletions": 7,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/f-lang.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/f-lang.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/f-lang.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -1681,13 +1681,12 @@ _initialize_f_language ()\n {\n   f_type_data = gdbarch_data_register_post_init (build_fortran_types);\n \n-  add_basic_prefix_cmd (\"fortran\", no_class,\n-\t\t\t_(\"Prefix command for changing Fortran-specific settings.\"),\n-\t\t\t&set_fortran_list, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"fortran\", no_class,\n-\t\t       _(\"Generic command for showing Fortran-specific settings.\"),\n-\t\t       &show_fortran_list, 0, &showlist);\n+  add_setshow_prefix_cmd\n+    (\"fortran\", no_class,\n+     _(\"Prefix command for changing Fortran-specific settings.\"),\n+     _(\"Generic command for showing Fortran-specific settings.\"),\n+     &set_fortran_list, &show_fortran_list,\n+     &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"repack-array-slices\", class_vars,\n \t\t\t   &repack_array_slices, _(\"\\"
    },
    {
      "sha": "2a899fc494f247d895389fc43c3ae5599a7646c9",
      "filename": "gdb/frame.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/frame.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/frame.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/frame.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -3129,16 +3129,15 @@ _initialize_frame ()\n   gdb::observers::target_changed.attach (frame_observer_target_changed,\n \t\t\t\t\t \"frame\");\n \n-  add_basic_prefix_cmd (\"backtrace\", class_maintenance, _(\"\\\n+  add_setshow_prefix_cmd (\"backtrace\", class_maintenance,\n+\t\t\t  _(\"\\\n Set backtrace specific variables.\\n\\\n Configure backtrace variables such as the backtrace limit\"),\n-\t\t\t&set_backtrace_cmdlist,\n-\t\t\t0/*allow-unknown*/, &setlist);\n-  add_show_prefix_cmd (\"backtrace\", class_maintenance, _(\"\\\n+\t\t\t  _(\"\\\n Show backtrace specific variables.\\n\\\n Show backtrace variables such as the backtrace limit.\"),\n-\t\t       &show_backtrace_cmdlist,\n-\t\t       0/*allow-unknown*/, &showlist);\n+\t\t\t  &set_backtrace_cmdlist, &show_backtrace_cmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_uinteger_cmd (\"limit\", class_obscure,\n \t\t\t    &user_set_backtrace_options.backtrace_limit, _(\"\\"
    },
    {
      "sha": "30cfa296fc5926a1bcdac1ae3d5d08a0993dbec9",
      "filename": "gdb/guile/guile.c",
      "status": "modified",
      "additions": 11,
      "deletions": 11,
      "changes": 22,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/guile/guile.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/guile/guile.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/guile/guile.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -780,17 +780,17 @@ This command is only a placeholder.\")\n \t   );\n   add_com_alias (\"gu\", guile_cmd_element, class_obscure, 1);\n \n-  cmd_list_element *set_guile_cmd\n-    = add_basic_prefix_cmd (\"guile\", class_obscure,\n-\t\t\t    _(\"Prefix command for Guile preference settings.\"),\n-\t\t\t    &set_guile_list, 0, &setlist);\n-  add_alias_cmd (\"gu\", set_guile_cmd, class_obscure, 1, &setlist);\n-\n-  cmd_list_element *show_guile_cmd\n-    = add_show_prefix_cmd (\"guile\", class_obscure,\n-\t\t\t   _(\"Prefix command for Guile preference settings.\"),\n-\t\t\t   &show_guile_list, 0, &showlist);\n-  add_alias_cmd (\"gu\", show_guile_cmd, class_obscure, 1, &showlist);\n+  set_show_commands setshow_guile_cmds\n+    = add_setshow_prefix_cmd (\"guile\", class_obscure,\n+\t\t\t      _(\"\\\n+Prefix command for Guile preference settings.\"),\n+\t\t\t      _(\"\\\n+Prefix command for Guile preference settings.\"),\n+\t\t\t      &set_guile_list, &show_guile_list,\n+\t\t\t      &setlist, &showlist);\n+\n+  add_alias_cmd (\"gu\", setshow_guile_cmds.set, class_obscure, 1, &setlist);\n+  add_alias_cmd (\"gu\", setshow_guile_cmds.show, class_obscure, 1, &showlist);\n \n   cmd_list_element *info_guile_cmd\n     = add_basic_prefix_cmd (\"guile\", class_obscure,"
    },
    {
      "sha": "f65a07492d2f2d404213aab04d4614c3f71d776b",
      "filename": "gdb/i386-tdep.c",
      "status": "modified",
      "additions": 6,
      "deletions": 12,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/i386-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/i386-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/i386-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -9043,19 +9043,13 @@ is \\\"default\\\".\"),\n \t\t\tNULL, /* FIXME: i18n: */\n \t\t\t&setlist, &showlist);\n \n-  /* Add \"mpx\" prefix for the set commands.  */\n+  /* Add \"mpx\" prefix for the set and show commands.  */\n \n-  add_basic_prefix_cmd (\"mpx\", class_support, _(\"\\\n-Set Intel Memory Protection Extensions specific variables.\"),\n-\t\t\t&mpx_set_cmdlist,\n-\t\t\t0 /* allow-unknown */, &setlist);\n-\n-  /* Add \"mpx\" prefix for the show commands.  */\n-\n-  add_show_prefix_cmd (\"mpx\", class_support, _(\"\\\n-Show Intel Memory Protection Extensions specific variables.\"),\n-\t\t       &mpx_show_cmdlist,\n-\t\t       0 /* allow-unknown */, &showlist);\n+  add_setshow_prefix_cmd\n+    (\"mpx\", class_support,\n+     _(\"Set Intel Memory Protection Extensions specific variables.\"),\n+     _(\"Show Intel Memory Protection Extensions specific variables.\"),\n+     &mpx_set_cmdlist, &mpx_show_cmdlist, &setlist, &showlist);\n \n   /* Add \"bound\" command for the show mpx commands list.  */\n "
    },
    {
      "sha": "9ac48a494c99a3ababe031783fa9a913323ebcf6",
      "filename": "gdb/language.c",
      "status": "modified",
      "additions": 10,
      "deletions": 13,
      "changes": 23,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/language.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/language.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/language.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -1140,19 +1140,16 @@ _initialize_language ()\n \n   /* GDB commands for language specific stuff.  */\n \n-  cmd_list_element *set_check_cmd\n-    = add_basic_prefix_cmd (\"check\", no_class,\n-\t\t\t    _(\"Set the status of the type/range checker.\"),\n-\t\t\t    &setchecklist, 0, &setlist);\n-  add_alias_cmd (\"c\", set_check_cmd, no_class, 1, &setlist);\n-  add_alias_cmd (\"ch\", set_check_cmd, no_class, 1, &setlist);\n-\n-  cmd_list_element *show_check_cmd\n-    = add_show_prefix_cmd (\"check\", no_class,\n-\t\t\t _(\"Show the status of the type/range checker.\"),\n-\t\t\t &showchecklist, 0, &showlist);\n-  add_alias_cmd (\"c\", show_check_cmd, no_class, 1, &showlist);\n-  add_alias_cmd (\"ch\", show_check_cmd, no_class, 1, &showlist);\n+  set_show_commands setshow_check_cmds\n+    = add_setshow_prefix_cmd (\"check\", no_class,\n+\t\t\t      _(\"Set the status of the type/range checker.\"),\n+\t\t\t      _(\"Show the status of the type/range checker.\"),\n+\t\t\t      &setchecklist, &showchecklist,\n+\t\t\t      &setlist, &showlist);\n+  add_alias_cmd (\"c\", setshow_check_cmds.set, no_class, 1, &setlist);\n+  add_alias_cmd (\"ch\", setshow_check_cmds.set, no_class, 1, &setlist);\n+  add_alias_cmd (\"c\", setshow_check_cmds.show, no_class, 1, &showlist);\n+  add_alias_cmd (\"ch\", setshow_check_cmds.show, no_class, 1, &showlist);\n \n   add_setshow_enum_cmd (\"range\", class_support, type_or_range_names,\n \t\t\t&range,"
    },
    {
      "sha": "9f50088833ab147d0f7d912f4c84eaf9d6329a51",
      "filename": "gdb/maint-test-settings.c",
      "status": "modified",
      "additions": 6,
      "deletions": 11,
      "changes": 17,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/maint-test-settings.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/maint-test-settings.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/maint-test-settings.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -85,19 +85,14 @@ _initialize_maint_test_settings ()\n {\n   maintenance_test_settings_filename = xstrdup (\"/foo/bar\");\n \n-  add_basic_prefix_cmd (\"test-settings\", class_maintenance,\n-\t\t\t_(\"\\\n+  add_setshow_prefix_cmd (\"test-settings\", class_maintenance,\n+\t\t\t  _(\"\\\n Set GDB internal variables used for set/show command infrastructure testing.\"),\n-\t\t\t&maintenance_set_test_settings_list,\n-\t\t\t0/*allow-unknown*/,\n-\t\t\t&maintenance_set_cmdlist);\n-\n-  add_show_prefix_cmd (\"test-settings\", class_maintenance,\n-\t\t       _(\"\\\n+\t\t\t  _(\"\\\n Show GDB internal variables used for set/show command infrastructure testing.\"),\n-\t\t       &maintenance_show_test_settings_list,\n-\t\t       0/*allow-unknown*/,\n-\t\t       &maintenance_show_cmdlist);\n+\t\t\t  &maintenance_set_test_settings_list,\n+\t\t\t  &maintenance_show_test_settings_list,\n+\t\t\t  &maintenance_set_cmdlist, &maintenance_show_cmdlist);\n \n   add_setshow_boolean_cmd (\"boolean\", class_maintenance,\n \t\t\t   &maintenance_test_settings_boolean, _(\"\\"
    },
    {
      "sha": "c163ac07ebeb918545ea78e8e080e4a29a7ab929",
      "filename": "gdb/memattr.c",
      "status": "modified",
      "additions": 5,
      "deletions": 8,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/memattr.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/memattr.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/memattr.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -623,14 +623,11 @@ Do \\\"info mem\\\" to see current list of IDs.\"), &deletelist);\n   add_info (\"mem\", info_mem_command,\n \t    _(\"Memory region attributes.\"));\n \n-  add_basic_prefix_cmd (\"mem\", class_vars, _(\"\\\n-Memory regions settings.\"),\n-\t\t\t&mem_set_cmdlist,\n-\t\t\t0/* allow-unknown */, &setlist);\n-  add_show_prefix_cmd (\"mem\", class_vars, _(\"\\\n-Memory regions settings.\"),\n-\t\t       &mem_show_cmdlist,\n-\t\t       0/* allow-unknown */, &showlist);\n+  add_setshow_prefix_cmd (\"mem\", class_vars,\n+\t\t\t  _(\"Memory regions settings.\"),\n+\t\t\t  _(\"Memory regions settings.\"),\n+\t\t\t  &mem_set_cmdlist, &mem_show_cmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"inaccessible-by-default\", no_class,\n \t\t\t\t  &inaccessible_by_default, _(\"\\"
    },
    {
      "sha": "d9f8652009b09dfdf161eaadd4232b7b4de04856",
      "filename": "gdb/mips-tdep.c",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/mips-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/mips-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/mips-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -8942,13 +8942,11 @@ _initialize_mips_tdep ()\n   set_tdesc_property (mips_tdesc_gp64, PROPERTY_GP64, \"\");\n \n   /* Add root prefix command for all \"set mips\"/\"show mips\" commands.  */\n-  add_basic_prefix_cmd (\"mips\", no_class,\n-\t\t\t_(\"Various MIPS specific commands.\"),\n-\t\t\t&setmipscmdlist, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"mips\", no_class,\n-\t\t       _(\"Various MIPS specific commands.\"),\n-\t\t       &showmipscmdlist, 0, &showlist);\n+  add_setshow_prefix_cmd (\"mips\", no_class,\n+\t\t\t  _(\"Various MIPS specific commands.\"),\n+\t\t\t  _(\"Various MIPS specific commands.\"),\n+\t\t\t  &setmipscmdlist, &showmipscmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   /* Allow the user to override the ABI.  */\n   add_setshow_enum_cmd (\"abi\", class_obscure, mips_abi_strings,"
    },
    {
      "sha": "593fbc1be7a148a733a66cce88b42f7b2f1d6fb0",
      "filename": "gdb/python/python.c",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/python/python.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/python/python.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/python/python.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -2041,13 +2041,11 @@ This command is only a placeholder.\")\n   add_com_alias (\"py\", python_cmd_element, class_obscure, 1);\n \n   /* Add set/show python print-stack.  */\n-  add_basic_prefix_cmd (\"python\", no_class,\n-\t\t\t_(\"Prefix command for python preference settings.\"),\n-\t\t\t&user_show_python_list, 0, &showlist);\n-\n-  add_show_prefix_cmd (\"python\", no_class,\n-\t\t       _(\"Prefix command for python preference settings.\"),\n-\t\t       &user_set_python_list, 0, &setlist);\n+  add_setshow_prefix_cmd (\"python\", no_class,\n+\t\t\t  _(\"Prefix command for python preference settings.\"),\n+\t\t\t  _(\"Prefix command for python preference settings.\"),\n+\t\t\t  &user_set_python_list, &user_show_python_list,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_enum_cmd (\"print-stack\", no_class, python_excp_enums,\n \t\t\t&gdbpy_should_print_stack, _(\"\\"
    },
    {
      "sha": "0611fa8b4f1bd18b2a46338005618f95a533a4d6",
      "filename": "gdb/ravenscar-thread.c",
      "status": "modified",
      "additions": 6,
      "deletions": 7,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ravenscar-thread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ravenscar-thread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ravenscar-thread.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -718,13 +718,12 @@ _initialize_ravenscar ()\n   gdb::observers::inferior_created.attach (ravenscar_inferior_created,\n \t\t\t\t\t   \"ravenscar-thread\");\n \n-  add_basic_prefix_cmd (\"ravenscar\", no_class,\n-\t\t\t_(\"Prefix command for changing Ravenscar-specific settings.\"),\n-\t\t\t&set_ravenscar_list, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"ravenscar\", no_class,\n-\t\t       _(\"Prefix command for showing Ravenscar-specific settings.\"),\n-\t\t       &show_ravenscar_list, 0, &showlist);\n+  add_setshow_prefix_cmd\n+    (\"ravenscar\", no_class,\n+     _(\"Prefix command for changing Ravenscar-specific settings.\"),\n+     _(\"Prefix command for showing Ravenscar-specific settings.\"),\n+     &set_ravenscar_list, &show_ravenscar_list,\n+     &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"task-switching\", class_obscure,\n \t\t\t   &ravenscar_task_support, _(\"\\"
    },
    {
      "sha": "a9518d57bcb106fa92d8a56cc82a6b065346a715",
      "filename": "gdb/record-btrace.c",
      "status": "modified",
      "additions": 20,
      "deletions": 29,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record-btrace.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record-btrace.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/record-btrace.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -3132,13 +3132,12 @@ This format may not be available on all processors.\"),\n \t     &record_btrace_cmdlist);\n   add_alias_cmd (\"pt\", record_btrace_pt_cmd, class_obscure, 1, &record_cmdlist);\n \n-  add_basic_prefix_cmd (\"btrace\", class_support,\n-\t\t\t_(\"Set record options.\"), &set_record_btrace_cmdlist,\n-\t\t\t0, &set_record_cmdlist);\n-\n-  add_show_prefix_cmd (\"btrace\", class_support,\n-\t\t       _(\"Show record options.\"), &show_record_btrace_cmdlist,\n-\t\t       0, &show_record_cmdlist);\n+  add_setshow_prefix_cmd (\"btrace\", class_support,\n+\t\t\t  _(\"Set record options.\"),\n+\t\t\t  _(\"Show record options.\"),\n+\t\t\t  &set_record_btrace_cmdlist,\n+\t\t\t  &show_record_btrace_cmdlist,\n+\t\t\t  &set_record_cmdlist, &show_record_cmdlist);\n \n   add_setshow_enum_cmd (\"replay-memory-access\", no_class,\n \t\t\treplay_memory_access_types, &replay_memory_access, _(\"\\\n@@ -3181,17 +3180,13 @@ Do not enable errata workarounds for trace decode.\"),\n Show the cpu to be used for trace decode.\"),\n \t   &show_record_btrace_cmdlist);\n \n-  add_basic_prefix_cmd (\"bts\", class_support,\n-\t\t\t_(\"Set record btrace bts options.\"),\n-\t\t\t&set_record_btrace_bts_cmdlist,\n-\t\t\t0,\n-\t\t\t&set_record_btrace_cmdlist);\n-\n-  add_show_prefix_cmd (\"bts\", class_support,\n-\t\t       _(\"Show record btrace bts options.\"),\n-\t\t       &show_record_btrace_bts_cmdlist,\n-\t\t       0,\n-\t\t       &show_record_btrace_cmdlist);\n+  add_setshow_prefix_cmd (\"bts\", class_support,\n+\t\t\t  _(\"Set record btrace bts options.\"),\n+\t\t\t  _(\"Show record btrace bts options.\"),\n+\t\t\t  &set_record_btrace_bts_cmdlist,\n+\t\t\t  &show_record_btrace_bts_cmdlist,\n+\t\t\t  &set_record_btrace_cmdlist,\n+\t\t\t  &show_record_btrace_cmdlist);\n \n   add_setshow_uinteger_cmd (\"buffer-size\", no_class,\n \t\t\t    &record_btrace_conf.bts.size,\n@@ -3207,17 +3202,13 @@ The trace buffer size may not be changed while recording.\"), NULL,\n \t\t\t    &set_record_btrace_bts_cmdlist,\n \t\t\t    &show_record_btrace_bts_cmdlist);\n \n-  add_basic_prefix_cmd (\"pt\", class_support,\n-\t\t\t_(\"Set record btrace pt options.\"),\n-\t\t\t&set_record_btrace_pt_cmdlist,\n-\t\t\t0,\n-\t\t\t&set_record_btrace_cmdlist);\n-\n-  add_show_prefix_cmd (\"pt\", class_support,\n-\t\t       _(\"Show record btrace pt options.\"),\n-\t\t       &show_record_btrace_pt_cmdlist,\n-\t\t       0,\n-\t\t       &show_record_btrace_cmdlist);\n+  add_setshow_prefix_cmd (\"pt\", class_support,\n+\t\t\t  _(\"Set record btrace pt options.\"),\n+\t\t\t  _(\"Show record btrace pt options.\"),\n+\t\t\t  &set_record_btrace_pt_cmdlist,\n+\t\t\t  &show_record_btrace_pt_cmdlist,\n+\t\t\t  &set_record_btrace_cmdlist,\n+\t\t\t  &show_record_btrace_cmdlist);\n \n   add_setshow_uinteger_cmd (\"buffer-size\", no_class,\n \t\t\t    &record_btrace_conf.pt.size,"
    },
    {
      "sha": "971c0f568b4d99397069f2169ef6499094b45dec",
      "filename": "gdb/record-full.c",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record-full.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record-full.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/record-full.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -2804,13 +2804,13 @@ Argument is filename.  File must be created with 'record save'.\"),\n   set_cmd_completer (c, filename_completer);\n   deprecate_cmd (c, \"record full restore\");\n \n-  add_basic_prefix_cmd (\"full\", class_support,\n-\t\t\t_(\"Set record options.\"), &set_record_full_cmdlist,\n-\t\t\t0, &set_record_cmdlist);\n-\n-  add_show_prefix_cmd (\"full\", class_support,\n-\t\t       _(\"Show record options.\"), &show_record_full_cmdlist,\n-\t\t       0, &show_record_cmdlist);\n+  add_setshow_prefix_cmd (\"full\", class_support,\n+\t\t\t  _(\"Set record options.\"),\n+\t\t\t  _(\"Show record options.\"),\n+\t\t\t  &set_record_full_cmdlist,\n+\t\t\t  &show_record_full_cmdlist,\n+\t\t\t  &set_record_cmdlist,\n+\t\t\t  &show_record_cmdlist);\n \n   /* Record instructions number limit command.  */\n   set_show_commands set_record_full_stop_at_limit_cmds"
    },
    {
      "sha": "37619780d37dfb97710d3556f0bed24e1b1ee015",
      "filename": "gdb/record.c",
      "status": "modified",
      "additions": 10,
      "deletions": 11,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/record.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/record.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -793,17 +793,16 @@ A size of \\\"unlimited\\\" means unlimited lines.  The default is 10.\"),\n \n   add_com_alias (\"rec\", record_cmd, class_obscure, 1);\n \n-  cmd_list_element *set_record_cmd\n-    = add_basic_prefix_cmd (\"record\", class_support,\n-\t\t\t    _(\"Set record options.\"), &set_record_cmdlist,\n-\t\t\t    0, &setlist);\n-  add_alias_cmd (\"rec\", set_record_cmd, class_obscure, 1, &setlist);\n-\n-  cmd_list_element *show_record_cmd\n-    = add_show_prefix_cmd (\"record\", class_support,\n-\t\t\t   _(\"Show record options.\"), &show_record_cmdlist,\n-\t\t\t   0, &showlist);\n-  add_alias_cmd (\"rec\", show_record_cmd, class_obscure, 1, &showlist);\n+  set_show_commands setshow_record_cmds\n+    = add_setshow_prefix_cmd (\"record\", class_support,\n+\t\t\t      _(\"Set record options.\"),\n+\t\t\t      _(\"Show record options.\"),\n+\t\t\t      &set_record_cmdlist, &show_record_cmdlist,\n+\t\t\t      &setlist, &showlist);\n+\n+\n+  add_alias_cmd (\"rec\", setshow_record_cmds.set, class_obscure, 1, &setlist);\n+  add_alias_cmd (\"rec\", setshow_record_cmds.show, class_obscure, 1, &showlist);\n \n   cmd_list_element *info_record_cmd\n     = add_prefix_cmd (\"record\", class_support, info_record_command,"
    },
    {
      "sha": "4c2557f4dad2d30bbd4b91a71ce65b8606c4ca4a",
      "filename": "gdb/riscv-tdep.c",
      "status": "modified",
      "additions": 10,
      "deletions": 16,
      "changes": 26,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/riscv-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/riscv-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/riscv-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -4018,15 +4018,11 @@ _initialize_riscv_tdep ()\n \n   /* Add root prefix command for all \"set debug riscv\" and \"show debug\n      riscv\" commands.  */\n-  add_basic_prefix_cmd (\"riscv\", no_class,\n-\t\t\t_(\"RISC-V specific debug commands.\"),\n-\t\t\t&setdebugriscvcmdlist, 0,\n-\t\t\t&setdebuglist);\n-\n-  add_show_prefix_cmd (\"riscv\", no_class,\n-\t\t       _(\"RISC-V specific debug commands.\"),\n-\t\t       &showdebugriscvcmdlist, 0,\n-\t\t       &showdebuglist);\n+  add_setshow_prefix_cmd (\"riscv\", no_class,\n+\t\t\t  _(\"RISC-V specific debug commands.\"),\n+\t\t\t  _(\"RISC-V specific debug commands.\"),\n+\t\t\t  &setdebugriscvcmdlist, &showdebugriscvcmdlist,\n+\t\t\t  &setdebuglist, &showdebuglist);\n \n   add_setshow_zuinteger_cmd (\"breakpoints\", class_maintenance,\n \t\t\t     &riscv_debug_breakpoints,  _(\"\\\n@@ -4069,13 +4065,11 @@ initialisation process.\"),\n \t\t\t     &setdebugriscvcmdlist, &showdebugriscvcmdlist);\n \n   /* Add root prefix command for all \"set riscv\" and \"show riscv\" commands.  */\n-  add_basic_prefix_cmd (\"riscv\", no_class,\n-\t\t\t_(\"RISC-V specific commands.\"),\n-\t\t\t&setriscvcmdlist, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"riscv\", no_class,\n-\t\t       _(\"RISC-V specific commands.\"),\n-\t\t       &showriscvcmdlist, 0, &showlist);\n+  add_setshow_prefix_cmd (\"riscv\", no_class,\n+\t\t\t  _(\"RISC-V specific commands.\"),\n+\t\t\t  _(\"RISC-V specific commands.\"),\n+\t\t\t  &setriscvcmdlist, &showriscvcmdlist,\n+\t\t\t  &setlist, &showlist);\n \n \n   use_compressed_breakpoints = AUTO_BOOLEAN_AUTO;"
    },
    {
      "sha": "78b4fd1a9130ab4daa85d80c9e189c0e3b21d8dd",
      "filename": "gdb/rs6000-tdep.c",
      "status": "modified",
      "additions": 5,
      "deletions": 7,
      "changes": 12,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/rs6000-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/rs6000-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/rs6000-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -7411,13 +7411,11 @@ _initialize_rs6000_tdep ()\n \n   /* Add root prefix command for all \"set powerpc\"/\"show powerpc\"\n      commands.  */\n-  add_basic_prefix_cmd (\"powerpc\", no_class,\n-\t\t\t_(\"Various PowerPC-specific commands.\"),\n-\t\t\t&setpowerpccmdlist, 0, &setlist);\n-\n-  add_show_prefix_cmd (\"powerpc\", no_class,\n-\t\t       _(\"Various PowerPC-specific commands.\"),\n-\t\t       &showpowerpccmdlist, 0, &showlist);\n+  add_setshow_prefix_cmd (\"powerpc\", no_class,\n+\t\t\t  _(\"Various PowerPC-specific commands.\"),\n+\t\t\t  _(\"Various PowerPC-specific commands.\"),\n+\t\t\t  &setpowerpccmdlist, &showpowerpccmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   /* Add a command to allow the user to force the ABI.  */\n   add_setshow_auto_boolean_cmd (\"soft-float\", class_support,"
    },
    {
      "sha": "7ed61db577499759a6b2f3afdebc64addd05c8e7",
      "filename": "gdb/ser-tcp.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ser-tcp.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/ser-tcp.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ser-tcp.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -466,16 +466,15 @@ _initialize_ser_tcp ()\n   serial_add_interface (&tcp_ops);\n #endif /* USE_WIN32API */\n \n-  add_basic_prefix_cmd (\"tcp\", class_maintenance, _(\"\\\n+  add_setshow_prefix_cmd (\"tcp\", class_maintenance,\n+\t\t\t  _(\"\\\n TCP protocol specific variables.\\n\\\n Configure variables specific to remote TCP connections.\"),\n-\t\t\t&tcp_set_cmdlist,\n-\t\t\t0 /* allow-unknown */, &setlist);\n-  add_show_prefix_cmd (\"tcp\", class_maintenance, _(\"\\\n+\t\t\t  _(\"\\\n TCP protocol specific variables.\\n\\\n Configure variables specific to remote TCP connections.\"),\n-\t\t       &tcp_show_cmdlist,\n-\t\t       0 /* allow-unknown */, &showlist);\n+\t\t\t  &tcp_set_cmdlist, &tcp_show_cmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   add_setshow_boolean_cmd (\"auto-retry\", class_obscure,\n \t\t\t   &tcp_auto_retry, _(\"\\"
    },
    {
      "sha": "f85455dabcdf2ff5defcc8eacdc52fe5515a2ef2",
      "filename": "gdb/serial.c",
      "status": "modified",
      "additions": 5,
      "deletions": 11,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/serial.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/serial.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/serial.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -669,17 +669,11 @@ Connect the terminal directly up to the command monitor.\\n\\\n Use <CR>~. or <CR>~^D to break out.\"));\n #endif /* 0 */\n \n-  add_basic_prefix_cmd (\"serial\", class_maintenance, _(\"\\\n-Set default serial/parallel port configuration.\"),\n-\t\t\t&serial_set_cmdlist,\n-\t\t\t0/*allow-unknown*/,\n-\t\t\t&setlist);\n-\n-  add_show_prefix_cmd (\"serial\", class_maintenance, _(\"\\\n-Show default serial/parallel port configuration.\"),\n-\t\t       &serial_show_cmdlist,\n-\t\t       0/*allow-unknown*/,\n-\t\t       &showlist);\n+  add_setshow_prefix_cmd (\"serial\", class_maintenance,\n+\t\t\t  _(\"Set default serial/parallel port configuration.\"),\n+\t\t\t  _(\"Show default serial/parallel port configuration.\"),\n+\t\t\t  &serial_set_cmdlist, &serial_show_cmdlist,\n+\t\t\t  &setlist, &showlist);\n \n   /* If target is open when baud changes, it doesn't take effect until\n      the next open (I think, not sure).  */"
    },
    {
      "sha": "f78eb2d73be50074d7dd32bad5643ddb65f623af",
      "filename": "gdb/sh-tdep.c",
      "status": "modified",
      "additions": 5,
      "deletions": 4,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/sh-tdep.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/sh-tdep.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/sh-tdep.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -2416,10 +2416,11 @@ _initialize_sh_tdep ()\n {\n   gdbarch_register (bfd_arch_sh, sh_gdbarch_init, NULL);\n \n-  add_basic_prefix_cmd (\"sh\", no_class, \"SH specific commands.\",\n-\t\t\t&setshcmdlist, 0, &setlist);\n-  add_show_prefix_cmd (\"sh\", no_class, \"SH specific commands.\",\n-\t\t       &showshcmdlist, 0, &showlist);\n+  add_setshow_prefix_cmd (\"sh\", no_class,\n+\t\t\t  _(\"SH specific commands.\"),\n+\t\t\t  _(\"SH specific commands.\"),\n+\t\t\t  &setshcmdlist, &showshcmdlist,\n+\t\t\t  &setlist, &showlist);\n   \n   add_setshow_enum_cmd (\"calling-convention\", class_vars, sh_cc_enum,\n \t\t\t&sh_active_calling_convention,"
    },
    {
      "sha": "de1d68c0164783a7bd09bbf877b6abacc5239de2",
      "filename": "gdb/target-descriptions.c",
      "status": "modified",
      "additions": 6,
      "deletions": 8,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/target-descriptions.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/target-descriptions.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/target-descriptions.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -1962,14 +1962,12 @@ _initialize_target_descriptions ()\n \n   tdesc_data = gdbarch_data_register_pre_init (tdesc_data_init);\n \n-  add_basic_prefix_cmd (\"tdesc\", class_maintenance, _(\"\\\n-Set target description specific variables.\"),\n-\t\t\t&tdesc_set_cmdlist,\n-\t\t\t0 /* allow-unknown */, &setlist);\n-  add_show_prefix_cmd (\"tdesc\", class_maintenance, _(\"\\\n-Show target description specific variables.\"),\n-\t\t       &tdesc_show_cmdlist,\n-\t\t       0 /* allow-unknown */, &showlist);\n+  add_setshow_prefix_cmd (\"tdesc\", class_maintenance,\n+\t\t\t  _(\"Set target description specific variables.\"),\n+\t\t\t  _(\"Show target description specific variables.\"),\n+\t\t\t  &tdesc_set_cmdlist, &tdesc_show_cmdlist,\n+\t\t\t  &setlist, &showlist);\n+\n   add_basic_prefix_cmd (\"tdesc\", class_maintenance, _(\"\\\n Unset target description specific variables.\"),\n \t\t\t&tdesc_unset_cmdlist,"
    },
    {
      "sha": "8462d1eb1dae1ca43d712d6676d738b30e461f87",
      "filename": "gdb/tui/tui-win.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/tui/tui-win.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/tui/tui-win.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-win.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -987,12 +987,11 @@ _initialize_tui_win ()\n \n   /* Define the classes of commands.\n      They will appear in the help list in the reverse of this order.  */\n-  add_basic_prefix_cmd (\"tui\", class_tui,\n-\t\t\t_(\"TUI configuration variables.\"),\n-\t\t\t&tui_setlist, 0 /* allow-unknown */, &setlist);\n-  add_show_prefix_cmd (\"tui\", class_tui,\n-\t\t       _(\"TUI configuration variables.\"),\n-\t\t       &tui_showlist, 0 /* allow-unknown */, &showlist);\n+  add_setshow_prefix_cmd (\"tui\", class_tui,\n+\t\t\t  _(\"TUI configuration variables.\"),\n+\t\t\t  _(\"TUI configuration variables.\"),\n+\t\t\t  &tui_setlist, &tui_showlist,\n+\t\t\t  &setlist, &showlist);\n \n   add_com (\"refresh\", class_tui, tui_refresh_all_command,\n \t   _(\"Refresh the terminal display.\"));"
    },
    {
      "sha": "8ca3d3efe2cbaed5e038fc6cbb1711f9331494ce",
      "filename": "gdb/typeprint.c",
      "status": "modified",
      "additions": 5,
      "deletions": 6,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/typeprint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/typeprint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/typeprint.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -851,12 +851,11 @@ Available FLAGS are:\\n\\\n Only one level of typedefs is unrolled.  See also \\\"ptype\\\".\"));\n   set_cmd_completer (c, expression_completer);\n \n-  add_show_prefix_cmd (\"type\", no_class,\n-\t\t       _(\"Generic command for showing type-printing settings.\"),\n-\t\t       &showprinttypelist, 0, &showprintlist);\n-  add_basic_prefix_cmd (\"type\", no_class,\n-\t\t\t_(\"Generic command for setting how types print.\"),\n-\t\t\t&setprinttypelist, 0, &setprintlist);\n+  add_setshow_prefix_cmd (\"type\", no_class,\n+\t\t\t  _(\"Generic command for showing type-printing settings.\"),\n+\t\t\t  _(\"Generic command for setting how types print.\"),\n+\t\t\t  &setprinttypelist, &showprinttypelist,\n+\t\t\t  &setprintlist, &showprintlist);\n \n   add_setshow_boolean_cmd (\"methods\", no_class, &print_methods,\n \t\t\t   _(\"\\"
    },
    {
      "sha": "92a847aef4d6daa5a07c348cdcb87836a19c9481",
      "filename": "gdb/utils.c",
      "status": "modified",
      "additions": 3,
      "deletions": 7,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -539,13 +539,9 @@ add_internal_problem_command (struct internal_problem *problem)\n     = xstrprintf (_(\"Show what GDB does when %s is detected.\"),\n \t\t  problem->name);\n \n-  add_basic_prefix_cmd (problem->name, class_maintenance, set_doc,\n-\t\t\tset_cmd_list,\n-\t\t\t0/*allow-unknown*/, &maintenance_set_cmdlist);\n-\n-  add_show_prefix_cmd (problem->name, class_maintenance, show_doc,\n-\t\t       show_cmd_list,\n-\t\t       0/*allow-unknown*/, &maintenance_show_cmdlist);\n+  add_setshow_prefix_cmd (problem->name, class_maintenance,\n+\t\t\t  set_doc, show_doc, set_cmd_list, show_cmd_list,\n+\t\t\t  &maintenance_set_cmdlist, &maintenance_show_cmdlist);\n \n   if (problem->user_settable_should_quit)\n     {"
    },
    {
      "sha": "e5afb3d10a35e8dc4e2936ff8938509ad06dbd90",
      "filename": "gdb/valprint.c",
      "status": "modified",
      "additions": 19,
      "deletions": 26,
      "changes": 45,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/valprint.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/f54bdb6d2799c658e076f10e42222949dc51032d/gdb/valprint.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/valprint.c?ref=f54bdb6d2799c658e076f10e42222949dc51032d",
      "patch": "@@ -3173,33 +3173,26 @@ _initialize_valprint ()\n   selftests::register_test_foreach_arch (\"print-flags\", test_print_flags);\n #endif\n \n-  cmd_list_element *cmd;\n-\n-  cmd_list_element *set_print_cmd\n-    = add_basic_prefix_cmd (\"print\", no_class,\n-\t\t\t    _(\"Generic command for setting how things print.\"),\n-\t\t\t    &setprintlist, 0, &setlist);\n-  add_alias_cmd (\"p\", set_print_cmd, no_class, 1, &setlist);\n+  set_show_commands setshow_print_cmds\n+    = add_setshow_prefix_cmd (\"print\", no_class,\n+\t\t\t      _(\"Generic command for setting how things print.\"),\n+\t\t\t      _(\"Generic command for showing print settings.\"),\n+\t\t\t      &setprintlist, &showprintlist,\n+\t\t\t      &setlist, &showlist);\n+  add_alias_cmd (\"p\", setshow_print_cmds.set, no_class, 1, &setlist);\n   /* Prefer set print to set prompt.  */\n-  add_alias_cmd (\"pr\", set_print_cmd, no_class, 1, &setlist);\n-\n-  cmd_list_element *show_print_cmd\n-    = add_show_prefix_cmd (\"print\", no_class,\n-\t\t\t   _(\"Generic command for showing print settings.\"),\n-\t\t\t   &showprintlist, 0, &showlist);\n-  add_alias_cmd (\"p\", show_print_cmd, no_class, 1, &showlist);\n-  add_alias_cmd (\"pr\", show_print_cmd, no_class, 1, &showlist);\n-\n-  cmd = add_basic_prefix_cmd (\"raw\", no_class,\n-\t\t\t      _(\"\\\n-Generic command for setting what things to print in \\\"raw\\\" mode.\"),\n-\t\t\t      &setprintrawlist, 0, &setprintlist);\n-  deprecate_cmd (cmd, nullptr);\n-\n-  cmd = add_show_prefix_cmd (\"raw\", no_class,\n-\t\t\t     _(\"Generic command for showing \\\"print raw\\\" settings.\"),\n-\t\t\t     &showprintrawlist, 0, &showprintlist);\n-  deprecate_cmd (cmd, nullptr);\n+  add_alias_cmd (\"pr\", setshow_print_cmds.set, no_class, 1, &setlist);\n+  add_alias_cmd (\"p\", setshow_print_cmds.show, no_class, 1, &showlist);\n+  add_alias_cmd (\"pr\", setshow_print_cmds.show, no_class, 1, &showlist);\n+\n+  set_show_commands setshow_print_raw_cmds\n+    = add_setshow_prefix_cmd\n+\t(\"raw\", no_class,\n+\t _(\"Generic command for setting what things to print in \\\"raw\\\" mode.\"),\n+\t _(\"Generic command for showing \\\"print raw\\\" settings.\"),\n+\t &setprintrawlist, &showprintrawlist, &setprintlist, &showprintlist);\n+  deprecate_cmd (setshow_print_raw_cmds.set, nullptr);\n+  deprecate_cmd (setshow_print_raw_cmds.show, nullptr);\n \n   gdb::option::add_setshow_cmds_for_options\n     (class_support, &user_print_options, value_print_option_defs,"
    }
  ]
}