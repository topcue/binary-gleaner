{
  "sha": "8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6OGVjYTVjN2Q5ZjI4NTVhNGFmN2RjM2QyMTNhYmI1NzYwY2NhMzFjYg==",
  "commit": {
    "author": {
      "name": "Stephen Casner",
      "email": "casner@acm.org",
      "date": "2020-06-05T06:41:57Z"
    },
    "committer": {
      "name": "Stephen Casner",
      "email": "casner@acm.org",
      "date": "2020-06-05T06:41:57Z"
    },
    "message": "Fix unresolved test in binutils for pdp11.\n\n* binutils/testsuite/binutils-all/pr25662-pdp11.s: Alternate source file\nfor test using section pseudo-ops compatible with pdp11.\n* binutils/testsuite/binutils-all/objcopy.exp: Select alternate source.",
    "tree": {
      "sha": "679050369455f16e8fcf3e91ed702560ade349c0",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/679050369455f16e8fcf3e91ed702560ade349c0"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/comments",
  "author": {
    "login": "slcasner",
    "id": 5100408,
    "node_id": "MDQ6VXNlcjUxMDA0MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5100408?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slcasner",
    "html_url": "https://github.com/slcasner",
    "followers_url": "https://api.github.com/users/slcasner/followers",
    "following_url": "https://api.github.com/users/slcasner/following{/other_user}",
    "gists_url": "https://api.github.com/users/slcasner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slcasner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slcasner/subscriptions",
    "organizations_url": "https://api.github.com/users/slcasner/orgs",
    "repos_url": "https://api.github.com/users/slcasner/repos",
    "events_url": "https://api.github.com/users/slcasner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slcasner/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "slcasner",
    "id": 5100408,
    "node_id": "MDQ6VXNlcjUxMDA0MDg=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5100408?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/slcasner",
    "html_url": "https://github.com/slcasner",
    "followers_url": "https://api.github.com/users/slcasner/followers",
    "following_url": "https://api.github.com/users/slcasner/following{/other_user}",
    "gists_url": "https://api.github.com/users/slcasner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/slcasner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/slcasner/subscriptions",
    "organizations_url": "https://api.github.com/users/slcasner/orgs",
    "repos_url": "https://api.github.com/users/slcasner/repos",
    "events_url": "https://api.github.com/users/slcasner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/slcasner/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "412857647fecd41c45fab0d9c45198a0d2cbf6d5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/412857647fecd41c45fab0d9c45198a0d2cbf6d5",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/412857647fecd41c45fab0d9c45198a0d2cbf6d5"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 49,
    "deletions": 1
  },
  "files": [
    {
      "sha": "9bbebf561949c4afd9de7c2b2554a862477336d8",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
      "patch": "@@ -1,3 +1,9 @@\n+2020-06-04  Stephen Casner  <casner@acm.org>\n+\n+\t* testsuite/binutils-all/pr25662-pdp11.s: Alternate source file\n+\tfor test using section pseudo-ops compatible with pdp11.\n+\t* testsuite/binutils-all/objcopy.exp: Select alternate source.\n+\n 2020-06-04  Jose E. Marchesi  <jose.marchesi@oracle.com>\n \n \t* objdump.c (disassemble_data): Set disasm_info.endian_code to"
    },
    {
      "sha": "dd74860f9e9823bdeffeeeab57868fb0508c52ec",
      "filename": "binutils/testsuite/binutils-all/objcopy.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/testsuite/binutils-all/objcopy.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/testsuite/binutils-all/objcopy.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/objcopy.exp?ref=8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
      "patch": "@@ -1348,4 +1348,10 @@ setup_xfail \"sh-*-coff*\"\n setup_xfail \"spu-*-*\"\n clear_xfail \"hppa*64*-*-hpux*\" \"hppa*-*-linux*\" \"hppa*-*-lites*\"\n clear_xfail \"hppa*-*-*n*bsd*\" \"hppa*-*-rtems*\" \"hppa*-*-*elf*\"\n-objcopy_test \"pr25662\" pr25662.s executable \"\" \"-T$srcdir/$subdir/pr25662.ld\"\n+if { [istarget pdp11-*-*] } {\n+    set src \"pr25662-pdp11.s\"\n+} else {\n+    set src \"pr25662.s\"\n+}\n+\n+objcopy_test \"pr25662\" $src executable \"\" \"-T$srcdir/$subdir/pr25662.ld\""
    },
    {
      "sha": "0b2481ea4089fef2071b3d00afd3de52d515f5da",
      "filename": "binutils/testsuite/binutils-all/pr25662-pdp11.s",
      "status": "added",
      "additions": 36,
      "deletions": 0,
      "changes": 36,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/testsuite/binutils-all/pr25662-pdp11.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/8eca5c7d9f2855a4af7dc3d213abb5760cca31cb/binutils/testsuite/binutils-all/pr25662-pdp11.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/pr25662-pdp11.s?ref=8eca5c7d9f2855a4af7dc3d213abb5760cca31cb",
      "patch": "@@ -0,0 +1,36 @@\n+/* PR 25662: objcopy sets invalid sh_offset for the first section in a\n+   no_contents segment containing program headers.\n+\n+   Several conditions are required for the bug to manifest:\n+   - The first loadable segment (which contains the program headers) must only\n+     contain SHT_NOBITS sections. .bss is the SHT_NOBITS section in this test.\n+   - The next loadable segment must have a !SHT_NOBITS loadable section. .data\n+     is the !SHT_NOBITS section in this test.\n+   - .bss must be positioned after .data in the executable file itself.\n+   - The size of .data must be such that the calculated VMA of the .bss\n+     section that follows it is not congruent with the file offset of .bss,\n+     modulo the p_align of its segment, i.e.:\n+       (VMA(.data) + sizeof(.data)) % (.bss_segment.p_align) != 0\n+     This will force the sh_offset of .bss to be aligned so it appears within\n+     .data.\n+   - The size of .data must be larger than the program headers in the first\n+     loadable segment, so that the file offset of .bss is immediately\n+     after .data, and not padded to a valid alignment by the program headers.\n+\n+   The bug originally only manifested for ELF targets, but there's no reason not\n+   to run this testcase for other file formats.  This variant source for pdp11\n+   uses .text rather than .section text, etc., because the latter are not\n+   supported,  */\n+\n+\t.bss\n+a:\n+\t.zero\t0x2\n+\n+\t.data\n+c:\n+\t.zero\t0x201\n+\n+\t.text\n+\t.global\t_start\n+_start:\n+\t.long 0"
    }
  ]
}