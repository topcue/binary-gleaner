{
  "sha": "315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MzE1ZTZhZmM4MjRmY2M3Njg5ZGQ4ZjUxY2JiMmQxOGU5N2ZiNTM3NA==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-07-17T11:06:42Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-07-17T11:06:42Z"
    },
    "message": "[gdb/testsuite] Remove Dwarf::extern\n\nThe file lib/dwarf.exp contains:\n...\n    # Declare a global label.  This is typically used to refer to\n    # labels defined in other files, for example a function defined in\n    # a .c file.\n    proc extern {args} {\n\tforeach name $args {\n\t    _op .global $name\n\t}\n    }\n...\n\nThe assembler directive to refer to labels defined in other files is\nnot .global, but .extern, and that one is ignored by gas.\n\nSince we require gas for all dwarf assembly test-cases, remove the proc and\nall it's uses.\n\nTested on x86_64-linux.\n\ngdb/testsuite/ChangeLog:\n\n2020-07-17  Tom de Vries  <tdevries@suse.de>\n\n\t* lib/dwarf.exp (Dwarf::extern): Remove.\n\t* gdb.compile/compile-ops.exp: Remove use of Dwarf::extern.\n\t* gdb.dlang/circular.exp: Same.\n\t* gdb.dwarf2/comp-unit-lang.exp: Same.\n\t* gdb.dwarf2/dw2-ifort-parameter.exp: Same.\n\t* gdb.dwarf2/dw2-symtab-includes.exp: Same.\n\t* gdb.dwarf2/dwz.exp: Same.\n\t* gdb.dwarf2/imported-unit-abstract-const-value.exp: Same.\n\t* gdb.dwarf2/imported-unit-runto-main.exp: Same.\n\t* gdb.dwarf2/imported-unit.exp: Same.\n\t* gdb.dwarf2/opaque-type-lookup.exp: Same.",
    "tree": {
      "sha": "8af8be41e327149b056a042bfa8e6857267b092f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/8af8be41e327149b056a042bfa8e6857267b092f"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "a26a62b1979400374d890811735a9c32f451ae31",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/a26a62b1979400374d890811735a9c32f451ae31",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/a26a62b1979400374d890811735a9c32f451ae31"
    }
  ],
  "stats": {
    "total": 42,
    "additions": 14,
    "deletions": 28
  },
  "files": [
    {
      "sha": "76ad9657d45bb797421123ba8beda884847b3c54",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -1,3 +1,17 @@\n+2020-07-17  Tom de Vries  <tdevries@suse.de>\n+\n+\t* lib/dwarf.exp (Dwarf::extern): Remove.\n+\t* gdb.compile/compile-ops.exp: Remove use of Dwarf::extern.\n+\t* gdb.dlang/circular.exp: Same.\n+\t* gdb.dwarf2/comp-unit-lang.exp: Same.\n+\t* gdb.dwarf2/dw2-ifort-parameter.exp: Same.\n+\t* gdb.dwarf2/dw2-symtab-includes.exp: Same.\n+\t* gdb.dwarf2/dwz.exp: Same.\n+\t* gdb.dwarf2/imported-unit-abstract-const-value.exp: Same.\n+\t* gdb.dwarf2/imported-unit-runto-main.exp: Same.\n+\t* gdb.dwarf2/imported-unit.exp: Same.\n+\t* gdb.dwarf2/opaque-type-lookup.exp: Same.\n+\n 2020-07-16  Sandra Loosemore  <sandra@codesourcery.com>\n \n \t* gdb.base/shell.exp: Skip pipe tests dependent on sh on Windows host."
    },
    {
      "sha": "7c801d932c2197172d3c2788b7eea0135aa62b56",
      "filename": "gdb/testsuite/gdb.compile/compile-ops.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.compile/compile-ops.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.compile/compile-ops.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.compile/compile-ops.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -362,7 +362,6 @@ Dwarf::assemble $asm_file {\n     cu { addr_size 4 } {\n \n \tdeclare_labels int_label\n-\textern func_start func_end ptr\n \n \tcompile_unit {\n \t    {name file1.txt}"
    },
    {
      "sha": "1e04370478a01ff437c9b65f8538ee794f54a4f1",
      "filename": "gdb/testsuite/gdb.dlang/circular.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dlang/circular.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dlang/circular.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dlang/circular.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -37,8 +37,6 @@ Dwarf::assemble $asm_file {\n \t    declare_labels circular1_label circular2_label circular3_label\n \t    declare_labels circular4_label circular5_label\n \n-\t    extern circular1_found_start circular1_found_end\n-\n \t    circular1_label: module {\n \t\t{name circular1}\n \t    } {"
    },
    {
      "sha": "2ebe6caedc3bc1a166acc9e65eeb31d2753a5853",
      "filename": "gdb/testsuite/gdb.dwarf2/comp-unit-lang.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/comp-unit-lang.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/comp-unit-lang.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/comp-unit-lang.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -42,8 +42,6 @@ proc do_test {cu_lang gdb_lang} {\n \t# Creating a CU with 4-byte addresses lets this test link on\n \t# both 32- and 64-bit machines.\n \tcu { addr_size 4 } {\n-\t    extern func_start func_end\n-\n \t    compile_unit {\n \t\t{name file1.txt}\n \t\t{language @$cu_lang}"
    },
    {
      "sha": "2388ce53f6ed28253f4f92bf455fa349eb0772b7",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-ifort-parameter.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 1,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dw2-ifort-parameter.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dw2-ifort-parameter.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-ifort-parameter.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -29,7 +29,6 @@ set asm_file [standard_output_file $srcfile2]\n Dwarf::assemble $asm_file {\n     declare_labels int_label\n \n-    extern func_start func_end ptr\n     global srcdir subdir srcfile\n \n     cu {} {"
    },
    {
      "sha": "e10e4130358cedcfc17f0b362a75d7315a6a1d3f",
      "filename": "gdb/testsuite/gdb.dwarf2/dw2-symtab-includes.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dw2-symtab-includes.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dw2-symtab-includes.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dw2-symtab-includes.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -31,8 +31,6 @@ Dwarf::assemble $asm_file {\n     declare_labels partial_label lines_label\n     global srcdir subdir srcfile\n \n-    extern main\n-\n     cu {} {\n \tpartial_label: partial_unit {} {\n \t}"
    },
    {
      "sha": "9f5eda5e381165824f6b4c0c430a0c892029008d",
      "filename": "gdb/testsuite/gdb.dwarf2/dwz.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dwz.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/dwz.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/dwz.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -28,8 +28,6 @@ Dwarf::assemble $asm_file {\n     declare_labels partial_label int_label int_label2\n     global srcdir subdir srcfile\n \n-    extern main\n-\n     cu {} {\n \tpartial_label: partial_unit {} {\n \t    subprogram {"
    },
    {
      "sha": "13a7e97cc56376f6dc932e616a59abc6c46bee2f",
      "filename": "gdb/testsuite/gdb.dwarf2/imported-unit-abstract-const-value.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit-abstract-const-value.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit-abstract-const-value.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/imported-unit-abstract-const-value.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -42,8 +42,6 @@ Dwarf::assemble $asm_file {\n \n     global srcdir subdir srcfile\n \n-    extern main\n-\n     set main_range [function_range main ${srcdir}/${subdir}/${srcfile}]\n     set main_start [lindex $main_range 0]\n     set main_length [lindex $main_range 1]"
    },
    {
      "sha": "8a05ee852709023cb6995dd267910661ba646d79",
      "filename": "gdb/testsuite/gdb.dwarf2/imported-unit-runto-main.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit-runto-main.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit-runto-main.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/imported-unit-runto-main.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -39,8 +39,6 @@ Dwarf::assemble $asm_file {\n \n     global srcdir subdir srcfile\n \n-    extern main\n-\n     set main_range [function_range main ${srcdir}/${subdir}/${srcfile}]\n     set main_start [lindex $main_range 0]\n     set main_length [lindex $main_range 1]"
    },
    {
      "sha": "dba87ffcb2cf3a8dc9ea4456cfc5e9c2228764fe",
      "filename": "gdb/testsuite/gdb.dwarf2/imported-unit.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 3,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/imported-unit.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/imported-unit.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -56,9 +56,6 @@ Dwarf::assemble $asm_file {\n \n     global srcdir subdir srcfile\n \n-    extern main\n-    extern doit\n-\n     set main_range [function_range main ${srcdir}/${subdir}/${srcfile}]\n     set main_start [lindex $main_range 0]\n     set main_length [lindex $main_range 1]"
    },
    {
      "sha": "19316ef7eb7e0f6053bc6f25719e636d4f4d14df",
      "filename": "gdb/testsuite/gdb.dwarf2/opaque-type-lookup.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/opaque-type-lookup.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/gdb.dwarf2/opaque-type-lookup.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/opaque-type-lookup.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -34,8 +34,6 @@ Dwarf::assemble $asm_file {\n     declare_labels char_type1_label char_type2_label\n     global srcdir subdir srcfile\n \n-    extern main\n-\n     # The partial units are laid out so we're not dependent on the order that\n     # they appear in compunit_symtab.includes.  We need the one with the\n     # opaque definition to appear first to gdb, so we put it in the middle."
    },
    {
      "sha": "f745b2ae313845a6114ea8ca097958072314575a",
      "filename": "gdb/testsuite/lib/dwarf.exp",
      "status": "modified",
      "additions": 0,
      "deletions": 9,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/lib/dwarf.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/315e6afc824fcc7689dd8f51cbb2d18e97fb5374/gdb/testsuite/lib/dwarf.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/dwarf.exp?ref=315e6afc824fcc7689dd8f51cbb2d18e97fb5374",
      "patch": "@@ -822,15 +822,6 @@ namespace eval Dwarf {\n \t_emit \"${name}:\"\n     }\n \n-    # Declare a global label.  This is typically used to refer to\n-    # labels defined in other files, for example a function defined in\n-    # a .c file.\n-    proc extern {args} {\n-\tforeach name $args {\n-\t    _op .global $name\n-\t}\n-    }\n-\n     # A higher-level interface to label handling.\n     #\n     # ARGS is a list of label descriptors.  Each one is either a"
    }
  ]
}