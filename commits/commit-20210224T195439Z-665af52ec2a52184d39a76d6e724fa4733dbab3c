{
  "sha": "665af52ec2a52184d39a76d6e724fa4733dbab3c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjY1YWY1MmVjMmE1MjE4NGQzOWE3NmQ2ZTcyNGZhNDczM2RiYWIzYw==",
  "commit": {
    "author": {
      "name": "Kevin Buettner",
      "email": "kevinb@redhat.com",
      "date": "2021-02-24T18:48:04Z"
    },
    "committer": {
      "name": "Kevin Buettner",
      "email": "kevinb@redhat.com",
      "date": "2021-02-24T19:54:39Z"
    },
    "message": "Fix aarch64-linux-hw-point.c build problem\n\nDue to a recent glibc header file change, the file\nnat/aarch64-linux-hw-point.c no longer builds on Fedora rawhide.\n\nAn enum for PTRACE_SYSEMU is now provided by <sys/ptrace.h>.  In the\npast, PTRACE_SYSEMU was defined only in <asm/ptrace.h>.  This is\nwhat it looks like...\n\nIn <asm/ptrace.h>:\n\n #define PTRACE_SYSEMU\t\t  31\n\nIn <sys/ptrace.h>:\n\nenum __ptrace_request\n{\n  ...\n  PTRACE_SYSEMU = 31,\n #define PT_SYSEMU PTRACE_SYSEMU\n\n  ...\n}\n\nWhen <asm/ptrace.h> and <sys/ptrace.h> are both included in a source\nfile, we run into the following build problem when the former is\nincluded before the latter:\n\nIn file included from nat/aarch64-linux-hw-point.c:26:\n/usr/include/sys/ptrace.h:86:3: error: expected identifier before numeric constant\n   86 |   PTRACE_SYSEMU = 31,\n      |   ^~~~~~~~~~~~~\n\n(There are more errors after this one too.)\n\nThe file builds without error when <asm/ptrace.h> is included after\n<sys/ptrace.h>.  I found that this is already done in\nnat/aarch64-sve-linux-ptrace.h (which is included by\nnat/aarch64-linux-ptrace.c).\n\nI've tested this change on Fedora rawhide and Fedora 33, both\nrunning on an aarch64 machine.\n\ngdb/ChangeLog:\n\n\t* nat/aarch64-linux-hw-point.c: Include <asm/ptrace.h> after\n\t<sys/ptrace.h>.",
    "tree": {
      "sha": "745f408721c19b68c6d02611237843934decc1f8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/745f408721c19b68c6d02611237843934decc1f8"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/665af52ec2a52184d39a76d6e724fa4733dbab3c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/665af52ec2a52184d39a76d6e724fa4733dbab3c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/665af52ec2a52184d39a76d6e724fa4733dbab3c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/665af52ec2a52184d39a76d6e724fa4733dbab3c/comments",
  "author": {
    "login": "KevinBuettner",
    "id": 65747518,
    "node_id": "MDQ6VXNlcjY1NzQ3NTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/65747518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KevinBuettner",
    "html_url": "https://github.com/KevinBuettner",
    "followers_url": "https://api.github.com/users/KevinBuettner/followers",
    "following_url": "https://api.github.com/users/KevinBuettner/following{/other_user}",
    "gists_url": "https://api.github.com/users/KevinBuettner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KevinBuettner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KevinBuettner/subscriptions",
    "organizations_url": "https://api.github.com/users/KevinBuettner/orgs",
    "repos_url": "https://api.github.com/users/KevinBuettner/repos",
    "events_url": "https://api.github.com/users/KevinBuettner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KevinBuettner/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "KevinBuettner",
    "id": 65747518,
    "node_id": "MDQ6VXNlcjY1NzQ3NTE4",
    "avatar_url": "https://avatars.githubusercontent.com/u/65747518?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/KevinBuettner",
    "html_url": "https://github.com/KevinBuettner",
    "followers_url": "https://api.github.com/users/KevinBuettner/followers",
    "following_url": "https://api.github.com/users/KevinBuettner/following{/other_user}",
    "gists_url": "https://api.github.com/users/KevinBuettner/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/KevinBuettner/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/KevinBuettner/subscriptions",
    "organizations_url": "https://api.github.com/users/KevinBuettner/orgs",
    "repos_url": "https://api.github.com/users/KevinBuettner/repos",
    "events_url": "https://api.github.com/users/KevinBuettner/events{/privacy}",
    "received_events_url": "https://api.github.com/users/KevinBuettner/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "dd80d75040a291400c0fddb0f8b05c3f40da49ff",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/dd80d75040a291400c0fddb0f8b05c3f40da49ff",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/dd80d75040a291400c0fddb0f8b05c3f40da49ff"
    }
  ],
  "stats": {
    "total": 7,
    "additions": 6,
    "deletions": 1
  },
  "files": [
    {
      "sha": "f7052421935a6f9c55871c9c2cf7c058c7ce41bc",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/665af52ec2a52184d39a76d6e724fa4733dbab3c/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/665af52ec2a52184d39a76d6e724fa4733dbab3c/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=665af52ec2a52184d39a76d6e724fa4733dbab3c",
      "patch": "@@ -1,3 +1,8 @@\n+2021-02-24  Kevin Buettner  <kevinb@redhat.com>\n+\n+\t* nat/aarch64-linux-hw-point.c: Include <asm/ptrace.h> after\n+\t<sys/ptrace.h>.\n+\n 2021-02-24  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* exec.c (set_section_command): Move variable declarations into"
    },
    {
      "sha": "0278ac2bb28632b35e77f027b7b4661800a4612a",
      "filename": "gdb/nat/aarch64-linux-hw-point.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/665af52ec2a52184d39a76d6e724fa4733dbab3c/gdb/nat/aarch64-linux-hw-point.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/665af52ec2a52184d39a76d6e724fa4733dbab3c/gdb/nat/aarch64-linux-hw-point.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/nat/aarch64-linux-hw-point.c?ref=665af52ec2a52184d39a76d6e724fa4733dbab3c",
      "patch": "@@ -23,8 +23,8 @@\n #include \"aarch64-linux-hw-point.h\"\n \n #include <sys/uio.h>\n-#include <asm/ptrace.h>\n #include <sys/ptrace.h>\n+#include <asm/ptrace.h>\n #include <elf.h>\n \n /* Number of hardware breakpoints/watchpoints the target supports."
    }
  ]
}