{
  "sha": "476654beaead1ac1b4322c01722ace865e4adee4",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDc2NjU0YmVhZWFkMWFjMWI0MzIyYzAxNzIyYWNlODY1ZTRhZGVlNA==",
  "commit": {
    "author": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-05-07T16:07:41Z"
    },
    "committer": {
      "name": "Nick Clifton",
      "email": "nickc@redhat.com",
      "date": "2021-05-07T16:08:48Z"
    },
    "message": "Add a generic .bss directive for ELF based targets.\n\n\tPR 3136\n\t* config/obj-elf.c (elf_pseudo_table): Add entry for .bss.\n\t(obj_elf_bss): New function.  Change to the .bss section.\n\tSupport an optional subsection number.\n\t(obj_elf_change_section): Call obj_elf_section_change_hook.\n\t(obj_elf_section): Likewise.\n\t(obj_elf_data): Likewise.\n\t(obj_elf_text): Likewise.\n\t(obj_elf_struct): Likewise.\n\t(obj_elf_subsection): Likewise.\n\t(obj_elf_previous): Likewise.\n\t* config/obj-elf.h (obj_elf_bss): Prototype.\n\t* doc/as.texi (Bss): New node.",
    "tree": {
      "sha": "0cff4b8486bf8727bef5c7a135d0d169ba2cce45",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0cff4b8486bf8727bef5c7a135d0d169ba2cce45"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/476654beaead1ac1b4322c01722ace865e4adee4",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/476654beaead1ac1b4322c01722ace865e4adee4",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/476654beaead1ac1b4322c01722ace865e4adee4",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/476654beaead1ac1b4322c01722ace865e4adee4/comments",
  "author": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "nickclifton",
    "id": 31441682,
    "node_id": "MDQ6VXNlcjMxNDQxNjgy",
    "avatar_url": "https://avatars.githubusercontent.com/u/31441682?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/nickclifton",
    "html_url": "https://github.com/nickclifton",
    "followers_url": "https://api.github.com/users/nickclifton/followers",
    "following_url": "https://api.github.com/users/nickclifton/following{/other_user}",
    "gists_url": "https://api.github.com/users/nickclifton/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/nickclifton/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/nickclifton/subscriptions",
    "organizations_url": "https://api.github.com/users/nickclifton/orgs",
    "repos_url": "https://api.github.com/users/nickclifton/repos",
    "events_url": "https://api.github.com/users/nickclifton/events{/privacy}",
    "received_events_url": "https://api.github.com/users/nickclifton/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8a82de5884386be4c10f16eb55a94993ac6ea858",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8a82de5884386be4c10f16eb55a94993ac6ea858",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8a82de5884386be4c10f16eb55a94993ac6ea858"
    }
  ],
  "stats": {
    "total": 79,
    "additions": 65,
    "deletions": 14
  },
  "files": [
    {
      "sha": "aa3f613340055c15b1fe2ea2e2a0db4423428a7c",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 16,
      "deletions": 0,
      "changes": 16,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/476654beaead1ac1b4322c01722ace865e4adee4/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/476654beaead1ac1b4322c01722ace865e4adee4/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=476654beaead1ac1b4322c01722ace865e4adee4",
      "patch": "@@ -1,3 +1,19 @@\n+2021-05-07  Nick Clifton  <nickc@redhat.com>\n+\n+\tPR 3136\n+\t* config/obj-elf.c (elf_pseudo_table): Add entry for .bss.\n+\t(obj_elf_bss): New function.  Change to the .bss section.\n+\tSupport an optional subsection number.\n+\t(obj_elf_change_section): Call obj_elf_section_change_hook.\n+\t(obj_elf_section): Likewise.\n+\t(obj_elf_data): Likewise.\n+\t(obj_elf_text): Likewise.\n+\t(obj_elf_struct): Likewise.\n+\t(obj_elf_subsection): Likewise.\n+\t(obj_elf_previous): Likewise.\n+\t* config/obj-elf.h (obj_elf_bss): Prototype.\n+\t* doc/as.texi (Bss): New node.\n+\n 2021-05-07  Cl\u00e9ment Chigot  <clement.chigot@atos.net>\n \n \t* config/obj-coff.c (coff_frob_symbol): Don't skip C_DWARF."
    },
    {
      "sha": "e93d59cb081c1ac180dc72d6c226cad4bac44f6c",
      "filename": "gas/config/obj-elf.c",
      "status": "modified",
      "additions": 35,
      "deletions": 14,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/476654beaead1ac1b4322c01722ace865e4adee4/gas/config/obj-elf.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/476654beaead1ac1b4322c01722ace865e4adee4/gas/config/obj-elf.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/obj-elf.c?ref=476654beaead1ac1b4322c01722ace865e4adee4",
      "patch": "@@ -131,6 +131,7 @@ static const pseudo_typeS elf_pseudo_table[] =\n   {\"offset\", obj_elf_struct, 0},\n   {\"struct\", obj_elf_struct, 0},\n   {\"text\", obj_elf_text, 0},\n+  {\"bss\", obj_elf_bss, 0},\n \n   {\"tls_common\", obj_elf_tls_common, 0},\n \n@@ -603,8 +604,8 @@ obj_elf_change_section (const char *name,\n       elt->prev_subseg = previous_subsection;\n       section_stack = elt;\n     }\n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+\n+  obj_elf_section_change_hook ();\n \n   old_sec = bfd_get_section_by_name_if (stdoutput, name, get_section_by_match,\n \t\t\t\t\t(void *) match_p);\n@@ -1125,8 +1126,7 @@ obj_elf_section (int push)\n       md_flush_pending_output ();\n #endif\n \n-      previous_section = now_seg;\n-      previous_subsection = now_subseg;\n+      obj_elf_section_change_hook ();\n \n       s_mri_sect (&mri_type);\n \n@@ -1467,6 +1467,28 @@ obj_elf_section (int push)\n     subseg_set (now_seg, new_subsection);\n }\n \n+/* Change to the .bss section.  */\n+\n+void\n+obj_elf_bss (int i ATTRIBUTE_UNUSED)\n+{\n+  int temp;\n+\n+#ifdef md_flush_pending_output\n+  md_flush_pending_output ();\n+#endif\n+\n+  obj_elf_section_change_hook ();\n+\n+  temp = get_absolute_expression ();\n+  subseg_set (bss_section, (subsegT) temp);\n+  demand_empty_rest_of_line ();\n+\n+#ifdef md_elf_section_change_hook\n+  md_elf_section_change_hook ();\n+#endif\n+}\n+\n /* Change to the .data section.  */\n \n void\n@@ -1476,8 +1498,8 @@ obj_elf_data (int i)\n   md_flush_pending_output ();\n #endif\n \n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+  obj_elf_section_change_hook ();\n+\n   s_data (i);\n \n #ifdef md_elf_section_change_hook\n@@ -1494,8 +1516,8 @@ obj_elf_text (int i)\n   md_flush_pending_output ();\n #endif\n \n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+  obj_elf_section_change_hook ();\n+\n   s_text (i);\n \n #ifdef md_elf_section_change_hook\n@@ -1512,8 +1534,8 @@ obj_elf_struct (int i)\n   md_flush_pending_output ();\n #endif\n \n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+  obj_elf_section_change_hook ();\n+\n   s_struct (i);\n \n #ifdef md_elf_section_change_hook\n@@ -1530,8 +1552,7 @@ obj_elf_subsection (int ignore ATTRIBUTE_UNUSED)\n   md_flush_pending_output ();\n #endif\n \n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+  obj_elf_section_change_hook ();\n \n   temp = get_absolute_expression ();\n   subseg_set (now_seg, (subsegT) temp);\n@@ -1570,8 +1591,8 @@ obj_elf_previous (int ignore ATTRIBUTE_UNUSED)\n \n   new_section = previous_section;\n   new_subsection = previous_subsection;\n-  previous_section = now_seg;\n-  previous_subsection = now_subseg;\n+  obj_elf_section_change_hook ();\n+\n   subseg_set (new_section, new_subsection);\n \n #ifdef md_elf_section_change_hook"
    },
    {
      "sha": "d1fd3152998dad94ce995a800b8053967d9a8ffd",
      "filename": "gas/config/obj-elf.h",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/476654beaead1ac1b4322c01722ace865e4adee4/gas/config/obj-elf.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/476654beaead1ac1b4322c01722ace865e4adee4/gas/config/obj-elf.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/obj-elf.h?ref=476654beaead1ac1b4322c01722ace865e4adee4",
      "patch": "@@ -189,6 +189,7 @@ extern const char * obj_elf_section_name (void);\n extern void obj_elf_previous (int);\n extern void obj_elf_version (int);\n extern void obj_elf_common (int);\n+extern void obj_elf_bss (int);\n extern void obj_elf_data (int);\n extern void obj_elf_text (int);\n extern void obj_elf_change_section"
    },
    {
      "sha": "292c4af2bb60ecbdc1f52c6dedf7dfec3aaa808f",
      "filename": "gas/doc/as.texi",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/476654beaead1ac1b4322c01722ace865e4adee4/gas/doc/as.texi",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/476654beaead1ac1b4322c01722ace865e4adee4/gas/doc/as.texi",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/doc/as.texi?ref=476654beaead1ac1b4322c01722ace865e4adee4",
      "patch": "@@ -4365,6 +4365,7 @@ Some machine configurations provide additional directives.\n * Asciz::                       @code{.asciz \"@var{string}\"}@dots{}\n * Attach_to_group::             @code{.attach_to_group @var{name}}\n * Balign::                      @code{.balign [@var{abs-expr}[, @var{abs-expr}]]}\n+* Bss::                         @code{.bss @var{subsection}}\n * Bundle directives::           @code{.bundle_align_mode @var{abs-expr}}, etc\n * Byte::                        @code{.byte @var{expressions}}\n * CFI directives::\t\t@code{.cfi_startproc [simple]}, @code{.cfi_endproc}, etc.\n@@ -4709,6 +4710,18 @@ filled in with the value 0x368d (the exact placement of the bytes depends upon\n the endianness of the processor).  If it skips 1 or 3 bytes, the fill value is\n undefined.\n \n+@node Bss\n+@section @code{.bss @var{subsection}}\n+@cindex @code{bss} directive\n+\n+@code{.bss} tells @command{@value{AS}} to assemble the following statements\n+onto the end of the bss section.\n+@ifset ELF\n+For ELF based targets an optional @var{subsection} expression (which must\n+evaluate to a positive integer) can be provided.  In this case the statements\n+are appended to the end of the indicated bss subsection.\n+@end ifset\n+\n @node Bundle directives\n @section Bundle directives\n @subsection @code{.bundle_align_mode @var{abs-expr}}"
    }
  ]
}