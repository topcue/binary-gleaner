{
  "sha": "44f0e208eb32a7ac469cef2b6760f72534abac09",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NDRmMGUyMDhlYjMyYTdhYzQ2OWNlZjJiNjc2MGY3MjUzNGFiYWMwOQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-16T17:37:49Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2019-06-25T13:48:29Z"
    },
    "message": "Introduce has_locator method\n\nThis changes tui_win_has_locator to be a method on tui_win_info, and\nchanges the locator code to use bool rather than int.\n\ngdb/ChangeLog\n2019-06-25  Tom Tromey  <tom@tromey.com>\n\n\t* tui/tui-win.c (make_invisible_and_set_new_height)\n\t(make_visible_with_new_height): Call has_locator method.\n\t* tui/tui-layout.c (show_source_disasm_command, show_data)\n\t(show_source_or_disasm_and_command): Update for bool change.\n\t* tui/tui-data.h (struct tui_source_info) <has_locator>: Now bool.\n\t(tui_win_info) <has_locator>: New method.\n\t(struct tui_source_window_base) <has_locator>: New method.\n\t(tui_win_has_locator): Don't declare.\n\t* tui/tui-data.c (tui_source_window_base::has_locator): Rename\n\tfrom tui_win_has_locator.\n\t(tui_source_window_base): Use false, not FALSE.",
    "tree": {
      "sha": "7f102abc5114d8121e0dcae13363b2daa8e1ced5",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/7f102abc5114d8121e0dcae13363b2daa8e1ced5"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/44f0e208eb32a7ac469cef2b6760f72534abac09",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/44f0e208eb32a7ac469cef2b6760f72534abac09",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/44f0e208eb32a7ac469cef2b6760f72534abac09",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/44f0e208eb32a7ac469cef2b6760f72534abac09/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "7778b9128f46b1bb7af965ae3821f63b05c627ef",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/7778b9128f46b1bb7af965ae3821f63b05c627ef",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/7778b9128f46b1bb7af965ae3821f63b05c627ef"
    }
  ],
  "stats": {
    "total": 56,
    "additions": 40,
    "deletions": 16
  },
  "files": [
    {
      "sha": "5bee65ae156f2fc997cfc96a4f5402e31e5b6a1a",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=44f0e208eb32a7ac469cef2b6760f72534abac09",
      "patch": "@@ -1,3 +1,17 @@\n+2019-06-25  Tom Tromey  <tom@tromey.com>\n+\n+\t* tui/tui-win.c (make_invisible_and_set_new_height)\n+\t(make_visible_with_new_height): Call has_locator method.\n+\t* tui/tui-layout.c (show_source_disasm_command, show_data)\n+\t(show_source_or_disasm_and_command): Update for bool change.\n+\t* tui/tui-data.h (struct tui_source_info) <has_locator>: Now bool.\n+\t(tui_win_info) <has_locator>: New method.\n+\t(struct tui_source_window_base) <has_locator>: New method.\n+\t(tui_win_has_locator): Don't declare.\n+\t* tui/tui-data.c (tui_source_window_base::has_locator): Rename\n+\tfrom tui_win_has_locator.\n+\t(tui_source_window_base): Use false, not FALSE.\n+\n 2019-06-25  Tom Tromey  <tom@tromey.com>\n \n \t* tui/tui-data.h (tui_clear_win_detail): Don't declare."
    },
    {
      "sha": "be170612263cef9f320c3a964d9922410e7438ec",
      "filename": "gdb/tui/tui-data.c",
      "status": "modified",
      "additions": 6,
      "deletions": 5,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-data.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-data.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.c?ref=44f0e208eb32a7ac469cef2b6760f72534abac09",
      "patch": "@@ -75,11 +75,12 @@ tui_win_is_auxillary (enum tui_win_type win_type)\n   return (win_type > MAX_MAJOR_WINDOWS);\n }\n \n-int\n-tui_win_has_locator (struct tui_win_info *win_info)\n+/* See tui-data.h.  */\n+\n+bool\n+tui_source_window_base::has_locator () const\n {\n-  return (win_info != NULL \n-\t  && win_info->detail.source_info.has_locator);\n+  return detail.source_info.has_locator;\n }\n \n void\n@@ -499,7 +500,7 @@ tui_source_window_base::tui_source_window_base (enum tui_win_type type)\n {\n   gdb_assert (type == SRC_WIN || type == DISASSEM_WIN);\n   detail.source_info.execution_info = NULL;\n-  detail.source_info.has_locator = FALSE;\n+  detail.source_info.has_locator = false;\n   detail.source_info.horizontal_offset = 0;\n   detail.source_info.gdbarch = NULL;\n   detail.source_info.start_line_or_addr.loa = LOA_ADDRESS;"
    },
    {
      "sha": "9b7364b1e85c4319e9334004bb6eb71cf67efc74",
      "filename": "gdb/tui/tui-data.h",
      "status": "modified",
      "additions": 11,
      "deletions": 2,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-data.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-data.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-data.h?ref=44f0e208eb32a7ac469cef2b6760f72534abac09",
      "patch": "@@ -240,7 +240,8 @@ struct tui_data_info\n \n struct tui_source_info\n {\n-  int has_locator;\t\t/* Does locator belongs to this window?  */\n+  /* Does the locator belong to this window?  */\n+  bool has_locator;\n   /* Execution information window.  */\n   struct tui_gen_win_info *execution_info;\n   int horizontal_offset;\t/* Used for horizontal scroll.  */\n@@ -285,6 +286,12 @@ struct tui_win_info\n   /* Clear the pertinent detail in the window.  */\n   virtual void clear_detail () = 0;\n \n+  /* Return true if this window has the locator.  */\n+  virtual bool has_locator () const\n+  {\n+    return false;\n+  }\n+\n   /* Methods to scroll the contents of this window.  Note that they\n      are named with \"_scroll\" coming at the end because the more\n      obvious \"scroll_forward\" is defined as a macro in term.h.  */\n@@ -325,6 +332,9 @@ struct tui_source_window_base : public tui_win_info\n public:\n \n   void clear_detail () override;\n+\n+  /* Return true if this window has the locator.  */\n+  bool has_locator () const override;\n };\n \n /* A TUI source window.  */\n@@ -401,7 +411,6 @@ struct tui_cmd_window : public tui_win_info\n \n extern int tui_win_is_source_type (enum tui_win_type win_type);\n extern int tui_win_is_auxillary (enum tui_win_type win_type);\n-extern int tui_win_has_locator (struct tui_win_info *win_info);\n extern void tui_set_win_highlight (struct tui_win_info *win_info,\n \t\t\t\t   int highlight);\n "
    },
    {
      "sha": "f4df49253afc7c7f19e7ca9049bb77de346b5ccf",
      "filename": "gdb/tui/tui-layout.c",
      "status": "modified",
      "additions": 7,
      "deletions": 7,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-layout.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-layout.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-layout.c?ref=44f0e208eb32a7ac469cef2b6760f72534abac09",
      "patch": "@@ -640,7 +640,7 @@ show_source_disasm_command (void)\n \t\t\t     0);\n \t  tui_make_visible (&TUI_SRC_WIN->generic);\n \t  tui_make_visible (TUI_SRC_WIN->detail.source_info.execution_info);\n-\t  TUI_SRC_WIN->detail.source_info.has_locator = FALSE;;\n+\t  TUI_SRC_WIN->detail.source_info.has_locator = false;\n \t}\n \n       struct tui_gen_win_info *locator = tui_locator_win_info_ptr ();\n@@ -667,7 +667,7 @@ show_source_disasm_command (void)\n \t\t\t     tui_term_width (),\n \t\t\t     0,\n \t\t\t     (src_height + asm_height) - 1);\n-\t  TUI_DISASM_WIN->detail.source_info.has_locator = TRUE;\n+\t  TUI_DISASM_WIN->detail.source_info.has_locator = true;\n \t  init_gen_win_info (&TUI_DISASM_WIN->generic,\n \t\t\t     TUI_DISASM_WIN->generic.type,\n \t\t\t     asm_height,\n@@ -684,8 +684,8 @@ show_source_disasm_command (void)\n \t  tui_make_visible (&TUI_DISASM_WIN->generic);\n \t  tui_make_visible (TUI_DISASM_WIN->detail.source_info.execution_info);\n \t}\n-      TUI_SRC_WIN->detail.source_info.has_locator = FALSE;\n-      TUI_DISASM_WIN->detail.source_info.has_locator = TRUE;\n+      TUI_SRC_WIN->detail.source_info.has_locator = false;\n+      TUI_DISASM_WIN->detail.source_info.has_locator = true;\n       tui_make_visible (locator);\n       tui_show_locator_content ();\n       tui_show_source_content (TUI_DISASM_WIN);\n@@ -772,7 +772,7 @@ show_data (enum tui_layout_type new_layout)\n \t\t\t 0,\n \t\t\t total_height - 1);\n     }\n-  tui_win_list[win_type]->detail.source_info.has_locator = TRUE;\n+  tui_win_list[win_type]->detail.source_info.has_locator = true;\n   tui_make_visible (locator);\n   tui_show_locator_content ();\n   tui_add_to_source_windows (tui_win_list[win_type]);\n@@ -924,7 +924,7 @@ show_source_or_disasm_and_command (enum tui_layout_type layout_type)\n \t\t\t     tui_term_width (),\n \t\t\t     0,\n \t\t\t     src_height - 1);\n-\t  (*win_info_ptr)->detail.source_info.has_locator = TRUE;\n+\t  (*win_info_ptr)->detail.source_info.has_locator = true;\n \t  init_gen_win_info (&(*win_info_ptr)->generic,\n \t\t\t     (*win_info_ptr)->generic.type,\n \t\t\t     src_height - 1,\n@@ -943,7 +943,7 @@ show_source_or_disasm_and_command (enum tui_layout_type layout_type)\n \t}\n       if ((*win_info_ptr) != NULL)\n \t{\n-\t  (*win_info_ptr)->detail.source_info.has_locator = TRUE;\n+\t  (*win_info_ptr)->detail.source_info.has_locator = true;\n \t  tui_make_visible (locator);\n \t  tui_show_locator_content ();\n \t  tui_show_source_content (*win_info_ptr);"
    },
    {
      "sha": "5c807ad0324653e2de7acf906d8e118970bfb74c",
      "filename": "gdb/tui/tui-win.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-win.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/44f0e208eb32a7ac469cef2b6760f72534abac09/gdb/tui/tui-win.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-win.c?ref=44f0e208eb32a7ac469cef2b6760f72534abac09",
      "patch": "@@ -1283,7 +1283,7 @@ make_invisible_and_set_new_height (struct tui_win_info *win_info,\n       if (win_info != TUI_CMD_WIN)\n \tgen_win_info->viewport_height--;\n \n-      if (tui_win_has_locator (win_info))\n+      if (win_info->has_locator ())\n \t{\n \t  gen_win_info = tui_locator_win_info_ptr ();\n \t  tui_make_invisible (gen_win_info);\n@@ -1355,7 +1355,7 @@ make_visible_with_new_height (struct tui_win_info *win_info)\n \t    }\n \t  tui_update_source_window (win_info, gdbarch, s, line, TRUE);\n \t}\n-      if (tui_win_has_locator (win_info))\n+      if (win_info->has_locator ())\n \t{\n \t  tui_make_visible (tui_locator_win_info_ptr ());\n \t  tui_show_locator_content ();"
    }
  ]
}