{
  "sha": "125ff8197df74cd3108e36d271267c798cd0e15f",
  "node_id": "C_kwDOANOeidoAKDEyNWZmODE5N2RmNzRjZDMxMDhlMzZkMjcxMjY3Yzc5OGNkMGUxNWY",
  "commit": {
    "author": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2022-01-04T09:05:53Z"
    },
    "committer": {
      "name": "Jan Beulich",
      "email": "jbeulich@suse.com",
      "date": "2022-01-04T09:05:53Z"
    },
    "message": "x86/Intel: correct VFPCLASSP{S,D} handling when displacement is present\n\nfits_in_disp8() can be called before ambiguous operands get resolved\nor rejected (in process_suffix()), which requires that i.memshift be\nnon-negative to avoid an internal error. This case wasn't covered by\n6c0946d0d28d (\"x86: correct VFPCLASSP{S,D} operand size handling\").",
    "tree": {
      "sha": "694afa99f47a2f6212eb1d6ace96a956d7180b6b",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/694afa99f47a2f6212eb1d6ace96a956d7180b6b"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/125ff8197df74cd3108e36d271267c798cd0e15f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/125ff8197df74cd3108e36d271267c798cd0e15f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/125ff8197df74cd3108e36d271267c798cd0e15f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/125ff8197df74cd3108e36d271267c798cd0e15f/comments",
  "author": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "jbeulich",
    "id": 5610135,
    "node_id": "MDQ6VXNlcjU2MTAxMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5610135?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jbeulich",
    "html_url": "https://github.com/jbeulich",
    "followers_url": "https://api.github.com/users/jbeulich/followers",
    "following_url": "https://api.github.com/users/jbeulich/following{/other_user}",
    "gists_url": "https://api.github.com/users/jbeulich/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jbeulich/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jbeulich/subscriptions",
    "organizations_url": "https://api.github.com/users/jbeulich/orgs",
    "repos_url": "https://api.github.com/users/jbeulich/repos",
    "events_url": "https://api.github.com/users/jbeulich/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jbeulich/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5ed4d49d107c46670a7994711f0284776a35284e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5ed4d49d107c46670a7994711f0284776a35284e",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5ed4d49d107c46670a7994711f0284776a35284e"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 9,
    "deletions": 5
  },
  "files": [
    {
      "sha": "66a2e0f8e0a67f61fd56cba46826944831b0474d",
      "filename": "gas/config/tc-i386.c",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/125ff8197df74cd3108e36d271267c798cd0e15f/gas/config/tc-i386.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/125ff8197df74cd3108e36d271267c798cd0e15f/gas/config/tc-i386.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-i386.c?ref=125ff8197df74cd3108e36d271267c798cd0e15f",
      "patch": "@@ -6327,7 +6327,7 @@ check_VecOperands (const insn_template *t)\n \ti.memshift = t->opcode_modifier.disp8memshift;\n       else\n \t{\n-\t  const i386_operand_type *type = NULL;\n+\t  const i386_operand_type *type = NULL, *fallback = NULL;\n \n \t  i.memshift = 0;\n \t  for (op = 0; op < i.operands; op++)\n@@ -6341,6 +6341,8 @@ check_VecOperands (const insn_template *t)\n \t\t  type = &t->operand_types[op];\n \t\telse if (!i.types[op].bitfield.unspecified)\n \t\t  type = &i.types[op];\n+\t\telse /* Ambiguities get resolved elsewhere.  */\n+\t\t  fallback = &t->operand_types[op];\n \t      }\n \t    else if (i.types[op].bitfield.class == RegSIMD\n \t\t     && t->opcode_modifier.evex != EVEXLIG)\n@@ -6353,6 +6355,8 @@ check_VecOperands (const insn_template *t)\n \t\t  i.memshift = 4;\n \t      }\n \n+\t  if (!type && !i.memshift)\n+\t    type = fallback;\n \t  if (type)\n \t    {\n \t      if (type->bitfield.zmmword)"
    },
    {
      "sha": "d47ae54199a7e45c6f431f6392fb2f2c5bfebefa",
      "filename": "gas/testsuite/gas/i386/avx512dq-inval.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/avx512dq-inval.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/avx512dq-inval.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/avx512dq-inval.s?ref=125ff8197df74cd3108e36d271267c798cd0e15f",
      "patch": "@@ -24,7 +24,7 @@ _start:\n \tvcvtuqq2ps\txmm0, [rax]\n \n \tvfpclasspd\tk0, [eax], 0\n-\tvfpclassps\tk0, [eax], 0\n+\tvfpclassps\tk0, [eax+1], 0\n \n \t.att_syntax prefix\n "
    },
    {
      "sha": "7bc4502618d4433aeb13113fb8ae662befc49383",
      "filename": "gas/testsuite/gas/i386/noavx512-2.l",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/noavx512-2.l",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/noavx512-2.l",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noavx512-2.l?ref=125ff8197df74cd3108e36d271267c798cd0e15f",
      "patch": "@@ -104,7 +104,7 @@ GAS LISTING .*\n [ \t]*[1-9][0-9]*[ \t]+\\.intel_syntax noprefix\n [ \t]*[1-9][0-9]*[ \t]+\\?\\?\\?\\? 62F3FD48 \t\tvfpclasspd k0, \\[eax], 0\n [ \t]*[1-9][0-9]*[ \t]+660000\n-[ \t]*[1-9][0-9]*[ \t]+\\?\\?\\?\\? 62F37D48 \t\tvfpclassps k0, \\[eax], 0\n-[ \t]*[1-9][0-9]*[ \t]+660000\n+[ \t]*[1-9][0-9]*[ \t]+\\?\\?\\?\\? 62F37D48 \t\tvfpclassps k0, \\[eax\\+0x80], 0\n+[ \t]*[1-9][0-9]*[ \t]+66400200 ?\n [ \t]*[1-9][0-9]*[ \t]+\n #pass"
    },
    {
      "sha": "d974bcf9df5f6b6b791f4c540f4f70522ecf19db",
      "filename": "gas/testsuite/gas/i386/noavx512-2.s",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/noavx512-2.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/125ff8197df74cd3108e36d271267c798cd0e15f/gas/testsuite/gas/i386/noavx512-2.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/testsuite/gas/i386/noavx512-2.s?ref=125ff8197df74cd3108e36d271267c798cd0e15f",
      "patch": "@@ -52,6 +52,6 @@\n \n \t.intel_syntax noprefix\n \tvfpclasspd k0, [eax], 0\n-\tvfpclassps k0, [eax], 0\n+\tvfpclassps k0, [eax+0x80], 0\n \n \t.p2align 4"
    }
  ]
}