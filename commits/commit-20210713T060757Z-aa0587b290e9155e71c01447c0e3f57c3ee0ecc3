{
  "sha": "aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YWEwNTg3YjI5MGU5MTU1ZTcxYzAxNDQ3YzBlM2Y1N2MzZWUwZWNjMw==",
  "commit": {
    "author": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-07-09T03:22:20Z"
    },
    "committer": {
      "name": "Nelson Chu",
      "email": "nelson.chu@sifive.com",
      "date": "2021-07-13T06:07:57Z"
    },
    "message": "RISC-V: Enable elf attributes when default configure option isn't set.\n\nSince gcc commit, 3c70b3ca1ef58f302bf8c16d9e7c7bb8626408bf, we now enable\nelf attributes for all riscv targets by default in gcc.  Therefore, I\nthink binutils should have the same behavior, in case users are writing\nassembly files.  If --enable-default-riscv-attribute isn't set, then we\nenable the elf attributes for all riscv targets by default.\n\nChangLog:\n\nbinutils/\n\n\t* testsuite/binutils-all/readelf.s: Add comments for riscv.\n\t* testsuite/binutils-all/readelf.s-64: Likewise.\n\t* testsuite/binutils-all/readelf.s-64-unused: Likewise.\n\t* testsuite/binutils-all/readelf.ss: Likewise.\n\t* testsuite/binutils-all/readelf.ss-64: Likewise.\n\t* testsuite/binutils-all/readelf.ss-64-unused: Likewise.\n\ngas/\n\n\t* configure.ac: If --enable-default-riscv-attribute isn't set,\n\tthen we enable the elf attributes for all riscv targets by\n\tdefault.\n\t* configure: Regenerated.",
    "tree": {
      "sha": "6f2e78ff0bd626f1b2669d5926247a86bd0d7e46",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6f2e78ff0bd626f1b2669d5926247a86bd0d7e46"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/comments",
  "author": null,
  "committer": null,
  "parents": [
    {
      "sha": "f148d9d334c4b8d26a8e8ce01a3ddf21fac80ee3",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/f148d9d334c4b8d26a8e8ce01a3ddf21fac80ee3",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/f148d9d334c4b8d26a8e8ce01a3ddf21fac80ee3"
    }
  ],
  "stats": {
    "total": 28,
    "additions": 11,
    "deletions": 17
  },
  "files": [
    {
      "sha": "ff37acb4da86bdc4ce90ac69888d34f4c5cc5311",
      "filename": "binutils/testsuite/binutils-all/readelf.s",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.s?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -11,9 +11,10 @@ Section Headers:\n #...\n  +\\[ .\\] .* +PROGBITS +00000000 0000(3c|40|44|48|50) 0000(04|10) 00 +WA +0 +0 +(.|..)\n  +\\[ .\\] .* +NOBITS +00000000 0000(40|44|48|4c|60) 000000 00 +WA +0 +0 +(.|..)\n-# ARM targets put .ARM.attributes here\n+# ARM targets put .ARM.attributes here.\n # MIPS targets put .reginfo, .mdebug, .MIPS.abiflags and .gnu.attributes here.\n # v850 targets put .call_table_data and .call_table_text here.\n+# riscv targets put .riscv.attributes here.\n #...\n  +\\[..\\] .symtab +SYMTAB +00000000 0+.* 0+.* 10 +.. +.+ +4\n  +\\[..\\] .strtab +STRTAB +00000000 0+.* 0+.* 00 .* +0 +0 +1"
    },
    {
      "sha": "4c957f7a938bdc2077d4892a018f8b60e79160a1",
      "filename": "binutils/testsuite/binutils-all/readelf.s-64",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s-64",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s-64",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.s-64?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -14,10 +14,12 @@ Section Headers:\n  +\\[ 4\\] .bss +NOBITS +0000000000000000 +000000(4c|50|54|58|68)\n  +0000000000000000 +0000000000000000 +WA +0 +0 +.*\n # x86 targets may put .note.gnu.property here.\n+# riscv targets put .riscv.attributes here.\n #...\n  +\\[ .\\] .symtab +SYMTAB +0000000000000000 +0+.*\n # aarch64-elf targets have one more data symbol.\n # x86 targets may have .note.gnu.property.\n+# riscv targets have .riscv.attributes.\n  +0+.* +0000000000000018 +(6|7) +(3|4) +8\n  +\\[ .\\] .strtab +STRTAB +0000000000000000 +0+.*\n  +0+.* +0000000000000000 .* +0 +0 +1"
    },
    {
      "sha": "771439411a0b67fe6c83346f874a8eee967714f9",
      "filename": "binutils/testsuite/binutils-all/readelf.s-64-unused",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s-64-unused",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.s-64-unused",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.s-64-unused?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -14,10 +14,12 @@ Section Headers:\n  +\\[ 4\\] .bss +NOBITS +0000000000000000 +000000(4c|50|54|58)\n  +0000000000000000 +0000000000000000 +WA +0 +0 +.*\n # x86 targets may put .note.gnu.property here.\n+# riscv targets put .riscv.attributes here.\n #...\n  +\\[ .\\] .symtab +SYMTAB +0000000000000000 +0+.*\n # aarch64-elf targets have one more data symbol.\n # x86 targets may have .note.gnu.property.\n+# riscv targets have .riscv.attributes.\n  +0+.* +0000000000000018 +(6|7) +(6|7) +8\n  +\\[ .\\] .strtab +STRTAB +0000000000000000 +0+.*\n  +0+.* +0000000000000000 .* +0 +0 +1"
    },
    {
      "sha": "b81c016e9e76177e3d6cfed94666f6d60d8c5ee8",
      "filename": "binutils/testsuite/binutils-all/readelf.ss",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.ss?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -9,6 +9,7 @@ Symbol table '.symtab' contains .* entries:\n  +.: 00000000 +0 +NOTYPE +LOCAL +DEFAULT +[34] static_data_symbol\n # v850 targets include extra SECTION symbols here for the .call_table_data\n # and .call_table_text sections.\n+# riscv targets add .riscv.attribute symbol here...\n #...\n  +[0-9]+: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +1 text_symbol\n  +[0-9]+: 00000000 +0 +NOTYPE +GLOBAL +DEFAULT +UND external_symbol"
    },
    {
      "sha": "c6ffb0fc523baa8064a70d4181447d90a28836ee",
      "filename": "binutils/testsuite/binutils-all/readelf.ss-64",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss-64",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss-64",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.ss-64?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -7,6 +7,7 @@ Symbol table '.symtab' contains .* entries:\n #...\n  +.: 0000000000000000 +0 +NOTYPE +LOCAL +DEFAULT +3 static_data_symbol\n # ... or here ...\n+# riscv targets add .riscv.attribute symbol here...\n #...\n .* +.: 0000000000000000 +0 +NOTYPE +GLOBAL +DEFAULT +1 text_symbol\n  +.: 0000000000000000 +0 +NOTYPE +GLOBAL +DEFAULT +UND external_symbol"
    },
    {
      "sha": "cf515aa60d0efbcf6c590119f5ecfee7757c06c7",
      "filename": "binutils/testsuite/binutils-all/readelf.ss-64-unused",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss-64-unused",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/binutils/testsuite/binutils-all/readelf.ss-64-unused",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/readelf.ss-64-unused?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -10,6 +10,7 @@ Symbol table '.symtab' contains .* entries:\n #...\n  +.: 0000000000000000 +0 +NOTYPE +LOCAL +DEFAULT +3 static_data_symbol\n # ... or here ...\n+# riscv targets add .riscv.attribute symbol here...\n #...\n .* +.: 0000000000000000 +0 +NOTYPE +GLOBAL +DEFAULT +1 text_symbol\n  +.: 0000000000000000 +0 +NOTYPE +GLOBAL +DEFAULT +UND external_symbol"
    },
    {
      "sha": "7a528fd485e33d59b934d86a5cb3324425a4a1dc",
      "filename": "gas/configure",
      "status": "modified",
      "additions": 1,
      "deletions": 8,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/gas/configure",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/gas/configure",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/configure?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -12550,14 +12550,7 @@ _ACEOF\n \n \n if test ${ac_default_generate_riscv_attr} = unset; then\n-    case ${target_os} in\n-      elf)\n-\tac_default_generate_riscv_attr=1\n-\t;;\n-      *)\n-\tac_default_generate_riscv_attr=0\n-\t;;\n-  esac\n+  ac_default_generate_riscv_attr=1\n fi\n \n "
    },
    {
      "sha": "e2374268c5608a02813bce8dcea1502ff1b8ec09",
      "filename": "gas/configure.ac",
      "status": "modified",
      "additions": 1,
      "deletions": 8,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/gas/configure.ac",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/aa0587b290e9155e71c01447c0e3f57c3ee0ecc3/gas/configure.ac",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/configure.ac?ref=aa0587b290e9155e71c01447c0e3f57c3ee0ecc3",
      "patch": "@@ -727,14 +727,7 @@ AC_DEFINE_UNQUOTED(DEFAULT_X86_USED_NOTE,\n    properties by default.])\n \n if test ${ac_default_generate_riscv_attr} = unset; then\n-    case ${target_os} in\n-      elf)\n-\tac_default_generate_riscv_attr=1\n-\t;;\n-      *)\n-\tac_default_generate_riscv_attr=0\n-\t;;\n-  esac\n+  ac_default_generate_riscv_attr=1\n fi\n \n AC_DEFINE_UNQUOTED(DEFAULT_RISCV_ATTR,"
    }
  ]
}