{
  "sha": "db2d40f7d0b8477ca5ad9e305b8137a085434c97",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZGIyZDQwZjdkMGI4NDc3Y2E1YWQ5ZTMwNWI4MTM3YTA4NTQzNGM5Nw==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2020-01-10T20:05:47Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2020-01-10T20:05:47Z"
    },
    "message": "Introduce switch_to_inferior_no_thread\n\nSeveral places want to switch context to an inferior and its pspace,\nwhile at the same time switch to \"no thread selected\".  This commit\nadds a function that does that, and uses it in a few places.\n\ngdb/ChangeLog:\n2020-01-10  Pedro Alves <palves@redhat.com>\n\n\t* inferior.c (switch_to_inferior_no_thread): New function,\n\tfactored out from ...\n\t(inferior_command): ... here.\n\t* inferior.h (switch_to_inferior_no_thread): Declare.\n\t* mi/mi-main.c (run_one_inferior): Use\n\tswitch_to_inferior_no_thread.",
    "tree": {
      "sha": "bce10d93633a8fe79fa2e14e994f9b89799bf922",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/bce10d93633a8fe79fa2e14e994f9b89799bf922"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/db2d40f7d0b8477ca5ad9e305b8137a085434c97",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/db2d40f7d0b8477ca5ad9e305b8137a085434c97",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/db2d40f7d0b8477ca5ad9e305b8137a085434c97",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/db2d40f7d0b8477ca5ad9e305b8137a085434c97/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "bd420a2dfff64978feb1659d3b77c7601b98463f",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/bd420a2dfff64978feb1659d3b77c7601b98463f",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/bd420a2dfff64978feb1659d3b77c7601b98463f"
    }
  ],
  "stats": {
    "total": 40,
    "additions": 27,
    "deletions": 13
  },
  "files": [
    {
      "sha": "50c56c95c69103a9406abaa4968c2dcb1dcc5611",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=db2d40f7d0b8477ca5ad9e305b8137a085434c97",
      "patch": "@@ -1,3 +1,12 @@\n+2020-01-10  Pedro Alves <palves@redhat.com>\n+\n+\t* inferior.c (switch_to_inferior_no_thread): New function,\n+\tfactored out from ...\n+\t(inferior_command): ... here.\n+\t* inferior.h (switch_to_inferior_no_thread): Declare.\n+\t* mi/mi-main.c (run_one_inferior): Use\n+\tswitch_to_inferior_no_thread.\n+\n 2020-01-10  Pedro Alves  <palves@redhat.com>\n \n \t* infcmd.c (kill_command): Remove dead code."
    },
    {
      "sha": "0c5e2c74d4ea63ae29fc417b1f284690c03cb6b4",
      "filename": "gdb/inferior.c",
      "status": "modified",
      "additions": 13,
      "deletions": 8,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/inferior.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/inferior.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/inferior.c?ref=db2d40f7d0b8477ca5ad9e305b8137a085434c97",
      "patch": "@@ -575,6 +575,16 @@ kill_inferior_command (const char *args, int from_tty)\n   bfd_cache_close_all ();\n }\n \n+/* See inferior.h.  */\n+\n+void\n+switch_to_inferior_no_thread (inferior *inf)\n+{\n+  set_current_inferior (inf);\n+  switch_to_no_thread ();\n+  set_current_program_space (inf->pspace);\n+}\n+\n static void\n inferior_command (const char *args, int from_tty)\n {\n@@ -605,9 +615,7 @@ inferior_command (const char *args, int from_tty)\n     }\n   else\n     {\n-      set_current_inferior (inf);\n-      switch_to_no_thread ();\n-      set_current_program_space (inf->pspace);\n+      switch_to_inferior_no_thread (inf);\n \n       gdb::observers::user_selected_context_changed.notify\n \t(USER_SELECTED_INFERIOR);\n@@ -737,11 +745,8 @@ add_inferior_command (const char *args, int from_tty)\n       if (exec != NULL)\n \t{\n \t  /* Switch over temporarily, while reading executable and\n-\t     symbols.q.  */\n-\t  set_current_program_space (inf->pspace);\n-\t  set_current_inferior (inf);\n-\t  switch_to_no_thread ();\n-\n+\t     symbols.  */\n+\t  switch_to_inferior_no_thread (inf);\n \t  exec_file_attach (exec.get (), from_tty);\n \t  symbol_file_add_main (exec.get (), add_flags);\n \t}"
    },
    {
      "sha": "a9baa52355ef06a566740a15019f51f028c50260",
      "filename": "gdb/inferior.h",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/inferior.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/inferior.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/inferior.h?ref=db2d40f7d0b8477ca5ad9e305b8137a085434c97",
      "patch": "@@ -308,6 +308,10 @@ extern inferior *current_inferior ();\n \n extern void set_current_inferior (inferior *);\n \n+/* Switch inferior (and program space) to INF, and switch to no thread\n+   selected.  */\n+extern void switch_to_inferior_no_thread (inferior *inf);\n+\n /* GDB represents the state of each program execution with an object\n    called an inferior.  An inferior typically corresponds to a process\n    but is more general and applies also to targets that do not have a"
    },
    {
      "sha": "24daf3f883883433856cd0a0ab67e81abad37252",
      "filename": "gdb/mi/mi-main.c",
      "status": "modified",
      "additions": 1,
      "deletions": 5,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/mi/mi-main.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/db2d40f7d0b8477ca5ad9e305b8137a085434c97/gdb/mi/mi-main.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/mi/mi-main.c?ref=db2d40f7d0b8477ca5ad9e305b8137a085434c97",
      "patch": "@@ -414,11 +414,7 @@ run_one_inferior (struct inferior *inf, void *arg)\n       switch_to_thread (tp);\n     }\n   else\n-    {\n-      set_current_inferior (inf);\n-      switch_to_no_thread ();\n-      set_current_program_space (inf->pspace);\n-    }\n+    switch_to_inferior_no_thread (inf);\n   mi_execute_cli_command (run_cmd, async_p,\n \t\t\t  async_p ? \"&\" : NULL);\n   return 0;"
    }
  ]
}