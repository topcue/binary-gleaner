{
  "sha": "4b09bb2eff20913fe5057b50b9509eecf14f4877",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NGIwOWJiMmVmZjIwOTEzZmU1MDU3YjUwYjk1MDllZWNmMTRmNDg3Nw==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2019-11-14T11:50:20Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2019-11-14T11:51:30Z"
    },
    "message": "gdb: fix build error in unittests/vec-utils-selftests.c\n\nWhen building with gcc 9.2.0, I get the following build error:\n\n    In file included from /home/simark/src/binutils-gdb/gdb/unittests/vec-utils-selftests.c:23:\n    /home/simark/src/binutils-gdb/gdb/gdbsupport/gdb_vecs.h: In instantiation of \u2018T unordered_remove(std::__debug::vector<T>&, typename std::__debug::vector<T>::iterator) [with T = selftests::vector_utils_tests::unordered_remove_tests()::obj; typename std::__debug::vector<T>::iterator = __gnu_debug::_Safe_iterator<__gnu_cxx::__normal_iterator<selftests::vector_utils_tests::unordered_remove_tests()::obj*, std::__cxx1998::vector<selftests::vector_utils_tests::unordered_remove_tests()::obj, std::allocator<selftests::vector_utils_tests::unordered_remove_tests()::obj> > >, std::__debug::vector<selftests::vector_utils_tests::unordered_remove_tests()::obj>, std::random_access_iterator_tag>]\u2019:\n    /home/simark/src/binutils-gdb/gdb/unittests/vec-utils-selftests.c:53:26:   required from here\n    /home/simark/src/binutils-gdb/gdb/gdbsupport/gdb_vecs.h:53:5: error: implicitly-declared \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj::obj(const selftests::vector_utils_tests::unordered_remove_tests()::obj&)\u2019 is deprecated [-Werror=deprecated-copy]\n       53 |   T removed = std::move (*it);\n          |     ^~~~~~~\n    /home/simark/src/binutils-gdb/gdb/unittests/vec-utils-selftests.c:41:10: note: because \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj\u2019 has user-provided \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj& selftests::vector_utils_tests::unordered_remove_tests()::obj::operator=(const selftests::vector_utils_tests::unordered_remove_tests()::obj&)\u2019\n       41 |     obj &operator= (const obj &other)\n          |          ^~~~~~~~\n    In file included from /home/simark/src/binutils-gdb/gdb/unittests/vec-utils-selftests.c:23:\n    /home/simark/src/binutils-gdb/gdb/gdbsupport/gdb_vecs.h:58:10: error: implicitly-declared \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj::obj(const selftests::vector_utils_tests::unordered_remove_tests()::obj&)\u2019 is deprecated [-Werror=deprecated-copy]\n       58 |   return removed;\n          |          ^~~~~~~\n    /home/simark/src/binutils-gdb/gdb/unittests/vec-utils-selftests.c:41:10: note: because \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj\u2019 has user-provided \u2018selftests::vector_utils_tests::unordered_remove_tests()::obj& selftests::vector_utils_tests::unordered_remove_tests()::obj::operator=(const selftests::vector_utils_tests::unordered_remove_tests()::obj&)\u2019\n       41 |     obj &operator= (const obj &other)\n          |          ^~~~~~~~\n\nI think gcc is just trying to be nice and recommends the good practice\nof providing a copy constructor if an assignment operator is provided.\n\nSilence the warning by providing that copy constructor.\n\ngdb/ChangeLog:\n\n\t* unittests/vec-utils-selftests.c (unordered_remove_tests::obj):\n\tProvide explicit default and copy constructor.\n\nChange-Id: I323361b1c120bf8525613b74e7e5983910e002df",
    "tree": {
      "sha": "37571ca90efb2d2044fe68dbd14ab171c152b2fd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/37571ca90efb2d2044fe68dbd14ab171c152b2fd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/4b09bb2eff20913fe5057b50b9509eecf14f4877",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4b09bb2eff20913fe5057b50b9509eecf14f4877",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/4b09bb2eff20913fe5057b50b9509eecf14f4877",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4b09bb2eff20913fe5057b50b9509eecf14f4877/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6aa385b96f0fddcf152c88f29e1145f3f618748c",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6aa385b96f0fddcf152c88f29e1145f3f618748c",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6aa385b96f0fddcf152c88f29e1145f3f618748c"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 14,
    "deletions": 0
  },
  "files": [
    {
      "sha": "719574f30967a35fa71cf16aaddf29dc36d74580",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4b09bb2eff20913fe5057b50b9509eecf14f4877/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4b09bb2eff20913fe5057b50b9509eecf14f4877/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=4b09bb2eff20913fe5057b50b9509eecf14f4877",
      "patch": "@@ -1,3 +1,8 @@\n+2019-11-14  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* unittests/vec-utils-selftests.c (unordered_remove_tests::obj):\n+\tProvide explicit default and copy constructor.\n+\n 2019-11-14  Philippe Waroquiers  <philippe.waroquiers@skynet.be>\n \n \t* python/py-finishbreakpoint.c (gdbpy_breakpoint_created):"
    },
    {
      "sha": "51490916b085201abbe70714c5cb92405dff1137",
      "filename": "gdb/unittests/vec-utils-selftests.c",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/4b09bb2eff20913fe5057b50b9509eecf14f4877/gdb/unittests/vec-utils-selftests.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/4b09bb2eff20913fe5057b50b9509eecf14f4877/gdb/unittests/vec-utils-selftests.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/unittests/vec-utils-selftests.c?ref=4b09bb2eff20913fe5057b50b9509eecf14f4877",
      "patch": "@@ -38,6 +38,15 @@ unordered_remove_tests ()\n   {\n     std::vector<void *> var;\n \n+    obj() = default;\n+\n+    /* gcc complains if we provide an assignment operator but no copy\n+       constructor, so provide one even if don't really care for this test.  */\n+    obj(const obj &other)\n+    {\n+      this->var = other.var;\n+    }\n+\n     obj &operator= (const obj &other)\n     {\n       if (this == &other)"
    }
  ]
}