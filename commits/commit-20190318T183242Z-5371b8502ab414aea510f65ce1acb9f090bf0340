{
  "sha": "5371b8502ab414aea510f65ce1acb9f090bf0340",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTM3MWI4NTAyYWI0MTRhZWE1MTBmNjVjZTFhY2I5ZjA5MGJmMDM0MA==",
  "commit": {
    "author": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-03-18T18:32:42Z"
    },
    "committer": {
      "name": "Pedro Alves",
      "email": "palves@redhat.com",
      "date": "2019-03-18T18:32:42Z"
    },
    "message": "Fix first time you type UP or DOWN in TUI's command window\n\nThe first time you type UP or DOWN arrow in the command window, GDB\nshould scroll the source window, but instead it displays the line\nnumber and the file name in the command window(?).\n\nWhat happens there is that the first time we call\ntui_ui_out::do_field_int, it doesn't initialize m_line, because\nm_start_of_line is -1, as set by the constructor; and then the\nfollowing call to tui_ui_out::do_field_string falls back to\ncli_ui_out::do_field_string because m_line is zero.\n\nThe problem is caused by a typo in the C++ification of tui_ui_out,\ncommit 112e8700a6f, where m_line and m_start_of_line's initial values\nwere swapped from what they used to be:\n\n -struct ui_out *\n -tui_out_new (struct ui_file *stream)\n +tui_ui_out::tui_ui_out (ui_file *stream)\n +: cli_ui_out (stream, 0),\n +  m_line (0),\n +  m_start_of_line (-1)\n  {\n -\n -  /* Initialize our fields.  */\n -  data->line = -1;\n -  data->start_of_line = 0;\n\nThis commit fixes it.\n\ngdb/ChangeLog:\n2019-03-18  Pedro Alves  <palves@redhat.com>\n\t    Eli Zaretskii <eliz@gnu.org>\n\n\t* tui/tui-out.c (tui_ui_out::tui_ui_out): Fix initialization of\n\tm_line and m_start_of_line.",
    "tree": {
      "sha": "8a3f07a01312543c9fabec5c10f11166ace1fd01",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/8a3f07a01312543c9fabec5c10f11166ace1fd01"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5371b8502ab414aea510f65ce1acb9f090bf0340",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5371b8502ab414aea510f65ce1acb9f090bf0340",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5371b8502ab414aea510f65ce1acb9f090bf0340",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5371b8502ab414aea510f65ce1acb9f090bf0340/comments",
  "author": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "palves",
    "id": 1202913,
    "node_id": "MDQ6VXNlcjEyMDI5MTM=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1202913?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/palves",
    "html_url": "https://github.com/palves",
    "followers_url": "https://api.github.com/users/palves/followers",
    "following_url": "https://api.github.com/users/palves/following{/other_user}",
    "gists_url": "https://api.github.com/users/palves/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/palves/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/palves/subscriptions",
    "organizations_url": "https://api.github.com/users/palves/orgs",
    "repos_url": "https://api.github.com/users/palves/repos",
    "events_url": "https://api.github.com/users/palves/events{/privacy}",
    "received_events_url": "https://api.github.com/users/palves/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b17c4cd078e2d1d8951951016815e474fb133780",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b17c4cd078e2d1d8951951016815e474fb133780",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b17c4cd078e2d1d8951951016815e474fb133780"
    }
  ],
  "stats": {
    "total": 10,
    "additions": 8,
    "deletions": 2
  },
  "files": [
    {
      "sha": "79376dbaf279910e41b1a55e8f015533c5c3d6eb",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5371b8502ab414aea510f65ce1acb9f090bf0340/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5371b8502ab414aea510f65ce1acb9f090bf0340/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=5371b8502ab414aea510f65ce1acb9f090bf0340",
      "patch": "@@ -1,3 +1,9 @@\n+2019-03-18  Pedro Alves  <palves@redhat.com>\n+\t    Eli Zaretskii <eliz@gnu.org>\n+\n+\t* tui/tui-out.c (tui_ui_out::tui_ui_out): Fix initialization of\n+\tm_line and m_start_of_line.\n+\n 2019-03-18  Eli Zaretskii  <eliz@gnu.org>\n \n \t* tui/tui-io.c (gdb_wgetch): Don't echo CR."
    },
    {
      "sha": "dd37736c4a70569a02b222d9db29410ccc0ffe7f",
      "filename": "gdb/tui/tui-out.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5371b8502ab414aea510f65ce1acb9f090bf0340/gdb/tui/tui-out.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5371b8502ab414aea510f65ce1acb9f090bf0340/gdb/tui/tui-out.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/tui/tui-out.c?ref=5371b8502ab414aea510f65ce1acb9f090bf0340",
      "patch": "@@ -109,8 +109,8 @@ tui_ui_out::do_text (const char *string)\n \n tui_ui_out::tui_ui_out (ui_file *stream)\n : cli_ui_out (stream, 0),\n-  m_line (0),\n-  m_start_of_line (-1)\n+  m_line (-1),\n+  m_start_of_line (0)\n {\n }\n "
    }
  ]
}