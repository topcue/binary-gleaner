{
  "sha": "34b965f7c006e64dbd5546575744daa642d4856f",
  "node_id": "C_kwDOANOeidoAKDM0Yjk2NWY3YzAwNmU2NGRiZDU1NDY1NzU3NDRkYWE2NDJkNDg1NmY",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-12-21T23:24:16Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-12-24T17:24:48Z"
    },
    "message": "Move gdb_bfd_errmsg to gdb_bfd.c\n\ngdb_bfd.c contains most of gdb's BFD-related utility functions.\nHowever, gdb_bfd_errmsg is in utils.c.  It seemed better to me to move\nthis out of util.[ch] and into the BFD-related file instead.\n\nTested by rebuilding.",
    "tree": {
      "sha": "395f80417b26c931dfaaa66b1ceff1230cdef1dd",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/395f80417b26c931dfaaa66b1ceff1230cdef1dd"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/34b965f7c006e64dbd5546575744daa642d4856f",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/34b965f7c006e64dbd5546575744daa642d4856f",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/34b965f7c006e64dbd5546575744daa642d4856f",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/34b965f7c006e64dbd5546575744daa642d4856f/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b6a08665ffb4a4b41e3761666c7c54655279f2ad",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b6a08665ffb4a4b41e3761666c7c54655279f2ad",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b6a08665ffb4a4b41e3761666c7c54655279f2ad"
    }
  ],
  "stats": {
    "total": 72,
    "additions": 37,
    "deletions": 35
  },
  "files": [
    {
      "sha": "3771e59755e1dfe359868d2fe7bded2a8de77b9f",
      "filename": "gdb/gdb_bfd.c",
      "status": "modified",
      "additions": 30,
      "deletions": 0,
      "changes": 30,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/34b965f7c006e64dbd5546575744daa642d4856f/gdb/gdb_bfd.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/34b965f7c006e64dbd5546575744daa642d4856f/gdb/gdb_bfd.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdb_bfd.c?ref=34b965f7c006e64dbd5546575744daa642d4856f",
      "patch": "@@ -1059,6 +1059,36 @@ gdb_bfd_get_full_section_contents (bfd *abfd, asection *section,\n \t\t\t\t   section_size);\n }\n \n+#define AMBIGUOUS_MESS1\t\".\\nMatching formats:\"\n+#define AMBIGUOUS_MESS2\t\\\n+  \".\\nUse \\\"set gnutarget format-name\\\" to specify the format.\"\n+\n+/* See gdb_bfd.h.  */\n+\n+std::string\n+gdb_bfd_errmsg (bfd_error_type error_tag, char **matching)\n+{\n+  char **p;\n+\n+  /* Check if errmsg just need simple return.  */\n+  if (error_tag != bfd_error_file_ambiguously_recognized || matching == NULL)\n+    return bfd_errmsg (error_tag);\n+\n+  std::string ret (bfd_errmsg (error_tag));\n+  ret += AMBIGUOUS_MESS1;\n+\n+  for (p = matching; *p; p++)\n+    {\n+      ret += \" \";\n+      ret += *p;\n+    }\n+  ret += AMBIGUOUS_MESS2;\n+\n+  xfree (matching);\n+\n+  return ret;\n+}\n+\n /* A callback for htab_traverse that prints a single BFD.  */\n \n static int"
    },
    {
      "sha": "62a03e1ee1bf97bac02d1e110d8898c656a639ba",
      "filename": "gdb/gdb_bfd.h",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/34b965f7c006e64dbd5546575744daa642d4856f/gdb/gdb_bfd.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/34b965f7c006e64dbd5546575744daa642d4856f/gdb/gdb_bfd.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdb_bfd.h?ref=34b965f7c006e64dbd5546575744daa642d4856f",
      "patch": "@@ -223,4 +223,11 @@ gdb_bfd_sections (const gdb_bfd_ref_ptr &abfd)\n   return gdb_bfd_section_range (abfd->sections);\n };\n \n+/* A wrapper for bfd_errmsg to produce a more helpful error message\n+   in the case of bfd_error_file_ambiguously recognized.\n+   MATCHING, if non-NULL, is the corresponding argument to\n+   bfd_check_format_matches, and will be freed.  */\n+\n+extern std::string gdb_bfd_errmsg (bfd_error_type error_tag, char **matching);\n+\n #endif /* GDB_BFD_H */"
    },
    {
      "sha": "41944f8215845ca4436769deadb2d2451f7f6981",
      "filename": "gdb/utils.c",
      "status": "modified",
      "additions": 0,
      "deletions": 28,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/34b965f7c006e64dbd5546575744daa642d4856f/gdb/utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/34b965f7c006e64dbd5546575744daa642d4856f/gdb/utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.c?ref=34b965f7c006e64dbd5546575744daa642d4856f",
      "patch": "@@ -3026,34 +3026,6 @@ gdb_argv::reset (const char *s)\n   m_argv = argv;\n }\n \n-#define AMBIGUOUS_MESS1\t\".\\nMatching formats:\"\n-#define AMBIGUOUS_MESS2\t\\\n-  \".\\nUse \\\"set gnutarget format-name\\\" to specify the format.\"\n-\n-std::string\n-gdb_bfd_errmsg (bfd_error_type error_tag, char **matching)\n-{\n-  char **p;\n-\n-  /* Check if errmsg just need simple return.  */\n-  if (error_tag != bfd_error_file_ambiguously_recognized || matching == NULL)\n-    return bfd_errmsg (error_tag);\n-\n-  std::string ret (bfd_errmsg (error_tag));\n-  ret += AMBIGUOUS_MESS1;\n-\n-  for (p = matching; *p; p++)\n-    {\n-      ret += \" \";\n-      ret += *p;\n-    }\n-  ret += AMBIGUOUS_MESS2;\n-\n-  xfree (matching);\n-\n-  return ret;\n-}\n-\n /* Return ARGS parsed as a valid pid, or throw an error.  */\n \n int"
    },
    {
      "sha": "fe72078f011edfe0a5d1a2bc3df012d39d7dbbca",
      "filename": "gdb/utils.h",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/34b965f7c006e64dbd5546575744daa642d4856f/gdb/utils.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/34b965f7c006e64dbd5546575744daa642d4856f/gdb/utils.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.h?ref=34b965f7c006e64dbd5546575744daa642d4856f",
      "patch": "@@ -109,13 +109,6 @@ compare_cstrings (const char *str1, const char *str2)\n   return strcmp (str1, str2) < 0;\n }\n \n-/* A wrapper for bfd_errmsg to produce a more helpful error message\n-   in the case of bfd_error_file_ambiguously recognized.\n-   MATCHING, if non-NULL, is the corresponding argument to\n-   bfd_check_format_matches, and will be freed.  */\n-\n-extern std::string gdb_bfd_errmsg (bfd_error_type error_tag, char **matching);\n-\n /* Reset the prompt_for_continue clock.  */\n void reset_prompt_for_continue_wait_time (void);\n /* Return the time spent in prompt_for_continue.  */"
    }
  ]
}