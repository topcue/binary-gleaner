{
  "sha": "fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmFkM2QyYzFiMjY4NzM1ZmU2YmZhMjgwYThlNGUyNjBmYjAxOTZhNw==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-04-21T01:36:53Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-04-21T02:05:43Z"
    },
    "message": "Remove SH-5 remnants\n\ngit commit 211dc24b87 removed most sh5 and sh64 SuperH support, after\nthey were obsoleted by git commit 2b213129c5.  This patch removes a\nfew remaining pieces that should have gone with 211dc24b87.\n\ninclude/\n\t* elf/sh.h (STO_SH5_ISA32, SHF_SH5_ISA32, SHF_SH5_ISA32_MIXED),\n\t(SHT_SH5_CR_SORTED, STT_DATALABEL): Delete.\nbfd/\n\t* elf32-sh.c (sh_elf_relocate_section): Remove STO_SH5_ISA32\n\tprocessing.",
    "tree": {
      "sha": "0684428fcd0605405ee4382be78831492fabe6bf",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/0684428fcd0605405ee4382be78831492fabe6bf"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "0ff8f4b9f0839f04868aac6fa2f7ca8cf14ef7ca",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/0ff8f4b9f0839f04868aac6fa2f7ca8cf14ef7ca",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/0ff8f4b9f0839f04868aac6fa2f7ca8cf14ef7ca"
    }
  ],
  "stats": {
    "total": 49,
    "additions": 12,
    "deletions": 37
  },
  "files": [
    {
      "sha": "12798e5b8afb6e4ddfc83eef527dc22b2a874f79",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
      "patch": "@@ -1,3 +1,8 @@\n+2020-04-21  Alan Modra  <amodra@gmail.com>\n+\n+\t* elf32-sh.c (sh_elf_relocate_section): Remove STO_SH5_ISA32\n+\tprocessing.\n+\n 2020-04-20  Stephen Casner  <casner@acm.org>\n \n \t* pdp11.c (N_STAB): Modify value to avoid conflict with N_EXT"
    },
    {
      "sha": "24e879e4f41c6e2b2776e8474aaee560b2161df5",
      "filename": "bfd/elf32-sh.c",
      "status": "modified",
      "additions": 2,
      "deletions": 16,
      "changes": 18,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/bfd/elf32-sh.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/bfd/elf32-sh.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/elf32-sh.c?ref=fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
      "patch": "@@ -3563,7 +3563,6 @@ sh_elf_relocate_section (bfd *output_bfd, struct bfd_link_info *info,\n       bfd_vma relocation;\n       bfd_vma addend = (bfd_vma) 0;\n       bfd_reloc_status_type r;\n-      int seen_stt_datalabel = 0;\n       bfd_vma off;\n       enum got_type got_type;\n       const char *symname = NULL;\n@@ -3626,14 +3625,6 @@ sh_elf_relocate_section (bfd *output_bfd, struct bfd_link_info *info,\n \t  relocation = (sec->output_section->vma\n \t\t\t+ sec->output_offset\n \t\t\t+ sym->st_value);\n-\t  /* A local symbol never has STO_SH5_ISA32, so we don't need\n-\t     datalabel processing here.  Make sure this does not change\n-\t     without notice.  */\n-\t  if ((sym->st_other & STO_SH5_ISA32) != 0)\n-\t    (*info->callbacks->reloc_dangerous)\n-\t      (info,\n-\t       _(\"unexpected STO_SH5_ISA32 on local symbol is not handled\"),\n-\t       input_bfd, input_section, rel->r_offset);\n \n \t  if (sec != NULL && discarded_section (sec))\n \t    /* Handled below.  */\n@@ -3783,14 +3774,9 @@ sh_elf_relocate_section (bfd *output_bfd, struct bfd_link_info *info,\n \t\t\t  || sh_elf_hash_entry (h)->got_type == GOT_TLS_GD)))\n \t\t;\n \t      else if (sec->output_section != NULL)\n-\t\trelocation = ((h->root.u.def.value\n+\t\trelocation = (h->root.u.def.value\n \t\t\t      + sec->output_section->vma\n-\t\t\t      + sec->output_offset)\n-\t\t\t      /* A STO_SH5_ISA32 causes a \"bitor 1\" to the\n-\t\t\t\t symbol value, unless we've seen\n-\t\t\t\t STT_DATALABEL on the way to it.  */\n-\t\t\t      | ((h->other & STO_SH5_ISA32) != 0\n-\t\t\t\t && ! seen_stt_datalabel));\n+\t\t\t      + sec->output_offset);\n \t      else if (!bfd_link_relocatable (info)\n \t\t       && (_bfd_elf_section_offset (output_bfd, info,\n \t\t\t\t\t\t    input_section,"
    },
    {
      "sha": "1829ec55996f8ea0c9f49b1bfa7454ebb3edf192",
      "filename": "include/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/include/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/include/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/ChangeLog?ref=fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
      "patch": "@@ -1,3 +1,8 @@\n+2020-04-21  Alan Modra  <amodra@gmail.com>\n+\n+\t* elf/sh.h (STO_SH5_ISA32, SHF_SH5_ISA32, SHF_SH5_ISA32_MIXED),\n+\t(SHT_SH5_CR_SORTED, STT_DATALABEL): Delete.\n+\n 2020-04-10  Fangrui Song <maskray@google.com>\n \n \tPR binutils/24613"
    },
    {
      "sha": "0408ec2695656b6cadd27453a2497d4779c8a355",
      "filename": "include/elf/sh.h",
      "status": "modified",
      "additions": 0,
      "deletions": 21,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/include/elf/sh.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fad3d2c1b268735fe6bfa280a8e4e260fb0196a7/include/elf/sh.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/include/elf/sh.h?ref=fad3d2c1b268735fe6bfa280a8e4e260fb0196a7",
      "patch": "@@ -95,27 +95,6 @@ int sh_elf_get_flags_from_mach (unsigned long mach);\n \t\t\t\t\t   be relocated independently.  */\n #define EF_SH_FDPIC\t\t0x8000\t/* Uses the FDPIC ABI.  */\n \n-/* Flags for the st_other symbol field.\n-   Keep away from the STV_ visibility flags (bit 0..1).  */\n-\n-/* A reference to this symbol should by default add 1.  */\n-#define STO_SH5_ISA32 (1 << 2)\n-\n-/* Section contains only SHmedia code (no SHcompact code).  */\n-#define SHF_SH5_ISA32\t\t0x40000000\n-\n-/* Section contains both SHmedia and SHcompact code, and possibly also\n-   constants.  */\n-#define SHF_SH5_ISA32_MIXED\t0x20000000\n-\n-/* If applied to a .cranges section, marks that the section is sorted by\n-   increasing cr_addr values.  */\n-#define SHT_SH5_CR_SORTED 0x80000001\n-\n-/* Symbol should be handled as DataLabel (attached to global SHN_UNDEF\n-   symbols).  */\n-#define STT_DATALABEL STT_LOPROC\n-\n #include \"elf/reloc-macros.h\"\n \n /* Relocations.  */"
    }
  ]
}