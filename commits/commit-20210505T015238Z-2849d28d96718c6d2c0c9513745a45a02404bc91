{
  "sha": "2849d28d96718c6d2c0c9513745a45a02404bc91",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Mjg0OWQyOGQ5NjcxOGM2ZDJjMGM5NTEzNzQ1YTQ1YTAyNDA0YmM5MQ==",
  "commit": {
    "author": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-05-02T03:37:35Z"
    },
    "committer": {
      "name": "Mike Frysinger",
      "email": "vapier@gentoo.org",
      "date": "2021-05-05T01:52:38Z"
    },
    "message": "sim: hw: localize init callback\n\nNow that we don't need to hardcode the module init list in a single\nplace, move the hw init logic out to the sim-hw file.",
    "tree": {
      "sha": "42de25aa35ccf16716a4e7562a9051c5a35b4b50",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/42de25aa35ccf16716a4e7562a9051c5a35b4b50"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2849d28d96718c6d2c0c9513745a45a02404bc91",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2849d28d96718c6d2c0c9513745a45a02404bc91",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2849d28d96718c6d2c0c9513745a45a02404bc91",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2849d28d96718c6d2c0c9513745a45a02404bc91/comments",
  "author": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vapier",
    "id": 176950,
    "node_id": "MDQ6VXNlcjE3Njk1MA==",
    "avatar_url": "https://avatars.githubusercontent.com/u/176950?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vapier",
    "html_url": "https://github.com/vapier",
    "followers_url": "https://api.github.com/users/vapier/followers",
    "following_url": "https://api.github.com/users/vapier/following{/other_user}",
    "gists_url": "https://api.github.com/users/vapier/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vapier/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vapier/subscriptions",
    "organizations_url": "https://api.github.com/users/vapier/orgs",
    "repos_url": "https://api.github.com/users/vapier/repos",
    "events_url": "https://api.github.com/users/vapier/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vapier/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "4d47dcfcf1cf8fa34df057b0d5accf7ab91b6b47",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/4d47dcfcf1cf8fa34df057b0d5accf7ab91b6b47",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/4d47dcfcf1cf8fa34df057b0d5accf7ab91b6b47"
    }
  ],
  "stats": {
    "total": 27,
    "additions": 13,
    "deletions": 14
  },
  "files": [
    {
      "sha": "d96faee18997abf35bf53987572f6dbb4530eeb3",
      "filename": "sim/common/ChangeLog",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/ChangeLog?ref=2849d28d96718c6d2c0c9513745a45a02404bc91",
      "patch": "@@ -1,3 +1,11 @@\n+2021-05-04  Mike Frysinger  <vapier@gentoo.org>\n+\n+\t* sim-hw.c (sim_hw_install): Rename to ...\n+\t(sim_install_hw): ... this.  New prototype.\n+\t* sim-hw.h (sim_hw_install): Delete.\n+\t* sim-module.c: Delete sim-hw.h include.\n+\t(early_modules): Delete sim_hw_install.\n+\n 2021-05-04  Tom Tromey  <tromey@adacore.com>\n \n \t* Make-common.in (generated_files): Add config.h."
    },
    {
      "sha": "984817f25fd0c37adbae627842f84e276b1e978d",
      "filename": "sim/common/sim-hw.c",
      "status": "modified",
      "additions": 5,
      "deletions": 1,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-hw.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-hw.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-hw.c?ref=2849d28d96718c6d2c0c9513745a45a02404bc91",
      "patch": "@@ -288,8 +288,12 @@ hw_option_handler (struct sim_state *sd, sim_cpu *cpu, int opt,\n static MODULE_INIT_FN sim_hw_init;\n static MODULE_UNINSTALL_FN sim_hw_uninstall;\n \n+/* Provide a prototype to silence -Wmissing-prototypes.  */\n+SIM_RC sim_install_hw (struct sim_state *sd);\n+\n+/* Establish this object.  */\n SIM_RC\n-sim_hw_install (struct sim_state *sd)\n+sim_install_hw (struct sim_state *sd)\n {\n   SIM_ASSERT (STATE_MAGIC (sd) == SIM_MAGIC_NUMBER);\n   sim_add_option_table (sd, NULL, hw_options);"
    },
    {
      "sha": "82c404a0d6d34b75c9918e27ea2e94481b8931c6",
      "filename": "sim/common/sim-hw.h",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-hw.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-hw.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-hw.h?ref=2849d28d96718c6d2c0c9513745a45a02404bc91",
      "patch": "@@ -21,12 +21,6 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n #define SIM_HW_H\n \n \n-/* Establish this object */\n-\n-SIM_RC sim_hw_install\n-(struct sim_state *sd);\n-\n-\n /* Parse a hardware definition */\n \n struct hw *sim_hw_parse"
    },
    {
      "sha": "3bb7db0df7697b386c7c12cb4079235821f93b46",
      "filename": "sim/common/sim-module.c",
      "status": "modified",
      "additions": 0,
      "deletions": 7,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-module.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2849d28d96718c6d2c0c9513745a45a02404bc91/sim/common/sim-module.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/sim/common/sim-module.c?ref=2849d28d96718c6d2c0c9513745a45a02404bc91",
      "patch": "@@ -25,10 +25,6 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n #include \"sim-options.h\"\n #include \"sim-assert.h\"\n \n-#if WITH_HW\n-#include \"sim-hw.h\"\n-#endif\n-\n #include \"libiberty.h\"\n \n #include <stdlib.h>\n@@ -52,9 +48,6 @@ static MODULE_INSTALL_FN * const early_modules[] = {\n #if WITH_SCACHE\n   scache_install,\n #endif\n-#if WITH_HW\n-  sim_hw_install,\n-#endif\n };\n static int early_modules_len = ARRAY_SIZE (early_modules);\n "
    }
  ]
}