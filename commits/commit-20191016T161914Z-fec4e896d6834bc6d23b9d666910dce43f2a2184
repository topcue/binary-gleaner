{
  "sha": "fec4e896d6834bc6d23b9d666910dce43f2a2184",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZmVjNGU4OTZkNjgzNGJjNmQyM2I5ZDY2NjkxMGRjZTQzZjJhMjE4NA==",
  "commit": {
    "author": {
      "name": "Christian Biesinger",
      "email": "cbiesinger@google.com",
      "date": "2019-10-10T01:08:13Z"
    },
    "committer": {
      "name": "Christian Biesinger",
      "email": "cbiesinger@google.com",
      "date": "2019-10-16T16:19:14Z"
    },
    "message": "Create xml-builtin.h to declare xml_builtins\n\nxml-builtin.c only has character arrays and no dependencies, so this\ncreates a simple header file for that purpose so that gdbserver\ncan include that instead of re-declaring xml_builtin.\n\nDespite the name, feature_to_c.sh is already specific to xml_builtins\n(it hardcodes the variable name), so making it always output the\ninclude for xml-builtin.h seems fine.\n\ngdb/ChangeLog:\n\n2019-10-16  Christian Biesinger  <cbiesinger@google.com>\n\n\t* Makefile.in: Add xml-builtin.h.\n\t* features/feature_to_c.sh: Add an include for xml-builtin.h\n\tto ensure that the compiler checks that the types match.\n\t* xml-builtin.h: New file.\n\t* xml-support.c (fetch_xml_builtin): Add missing const.\n\t* xml-support.h: Remove declaration of xml_builtins.\n\ngdb/gdbserver/ChangeLog:\n\n2019-10-16  Christian Biesinger  <cbiesinger@google.com>\n\n\t* server.c: Include xml-builtin.h.\n\t(get_xml_features): Don't declare xml_builtins here.\n\nChange-Id: I806ef0851c43ead90b545a11794e41f5e5178436",
    "tree": {
      "sha": "59fd7ce6b63f3402f7a230d681240766a5a61586",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/59fd7ce6b63f3402f7a230d681240766a5a61586"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/fec4e896d6834bc6d23b9d666910dce43f2a2184",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fec4e896d6834bc6d23b9d666910dce43f2a2184",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/fec4e896d6834bc6d23b9d666910dce43f2a2184",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/fec4e896d6834bc6d23b9d666910dce43f2a2184/comments",
  "author": {
    "login": "cbiesinger",
    "id": 1483109,
    "node_id": "MDQ6VXNlcjE0ODMxMDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1483109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cbiesinger",
    "html_url": "https://github.com/cbiesinger",
    "followers_url": "https://api.github.com/users/cbiesinger/followers",
    "following_url": "https://api.github.com/users/cbiesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/cbiesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cbiesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cbiesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/cbiesinger/orgs",
    "repos_url": "https://api.github.com/users/cbiesinger/repos",
    "events_url": "https://api.github.com/users/cbiesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cbiesinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "cbiesinger",
    "id": 1483109,
    "node_id": "MDQ6VXNlcjE0ODMxMDk=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1483109?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cbiesinger",
    "html_url": "https://github.com/cbiesinger",
    "followers_url": "https://api.github.com/users/cbiesinger/followers",
    "following_url": "https://api.github.com/users/cbiesinger/following{/other_user}",
    "gists_url": "https://api.github.com/users/cbiesinger/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cbiesinger/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cbiesinger/subscriptions",
    "organizations_url": "https://api.github.com/users/cbiesinger/orgs",
    "repos_url": "https://api.github.com/users/cbiesinger/repos",
    "events_url": "https://api.github.com/users/cbiesinger/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cbiesinger/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cbbbc402e059ee345cb781d3ceb757ae1cc679ee",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cbbbc402e059ee345cb781d3ceb757ae1cc679ee",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cbbbc402e059ee345cb781d3ceb757ae1cc679ee"
    }
  ],
  "stats": {
    "total": 57,
    "additions": 50,
    "deletions": 7
  },
  "files": [
    {
      "sha": "e79f4492310ce5525054cfca4bd80acdccf93dda",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -1,3 +1,12 @@\n+2019-10-16  Christian Biesinger  <cbiesinger@google.com>\n+\n+\t* Makefile.in: Add xml-builtin.h.\n+\t* features/feature_to_c.sh: Add an include for xml-builtin.h\n+\tto ensure that the compiler checks that the types match.\n+\t* xml-builtin.h: New file.\n+\t* xml-support.c (fetch_xml_builtin): Add missing const.\n+\t* xml-support.h: Remove declaration of xml_builtins.\n+\n 2019-10-16  Tom de Vries  <tdevries@suse.de>\n \n \tPR tdep/25096"
    },
    {
      "sha": "8fec099a1b4257b996740d8cb6f723a780b45603",
      "filename": "gdb/Makefile.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/Makefile.in?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -1425,6 +1425,7 @@ HFILES_NO_SRCDIR = \\\n \tx86-linux-nat.h \\\n \tx86-nat.h \\\n \txcoffread.h \\\n+\txml-builtin.h \\\n \txml-support.h \\\n \txml-syscall.h \\\n \txml-tdesc.h \\"
    },
    {
      "sha": "ae83774fdf4fcdeb03cdf0ae59423031f6679ffb",
      "filename": "gdb/features/feature_to_c.sh",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/features/feature_to_c.sh",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/features/feature_to_c.sh",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/features/feature_to_c.sh?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -32,6 +32,8 @@ if test -e \"$output\"; then\n   exit 1\n fi\n \n+echo '#include \"xml-builtin.h\"' >> $output\n+\n for input; do\n   arrayname=xml_feature_`echo $input | sed 's,.*/,,; s/[-.]/_/g'`\n "
    },
    {
      "sha": "b2213cffcfb742241fb59cca9a979eefa9d90b4f",
      "filename": "gdb/gdbserver/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/ChangeLog?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -1,3 +1,8 @@\n+2019-10-16  Christian Biesinger  <cbiesinger@google.com>\n+\n+\t* server.c: Include xml-builtin.h.\n+\t(get_xml_features): Don't declare xml_builtins here.\n+\n 2019-10-15  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* Makefile.in: Remove references to vec-ipa.o."
    },
    {
      "sha": "25a2be86fb0bb5e273eae3495ab312cb27e200cf",
      "filename": "gdb/gdbserver/server.c",
      "status": "modified",
      "additions": 3,
      "deletions": 1,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/gdbserver/server.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/gdbserver/server.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gdbserver/server.c?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -41,6 +41,9 @@\n #include \"gdbsupport/environ.h\"\n #include \"filenames.h\"\n #include \"gdbsupport/pathstuff.h\"\n+#ifdef USE_XML\n+#include \"xml-builtin.h\"\n+#endif\n \n #include \"gdbsupport/selftest.h\"\n #include \"gdbsupport/scope-exit.h\"\n@@ -920,7 +923,6 @@ get_features_xml (const char *annex)\n \n #ifdef USE_XML\n   {\n-    extern const char *const xml_builtin[][2];\n     int i;\n \n     /* Look for the annex.  */"
    },
    {
      "sha": "972417df32e1ace8eb271578670d9bf3d9f49ff9",
      "filename": "gdb/xml-builtin.h",
      "status": "added",
      "additions": 28,
      "deletions": 0,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-builtin.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-builtin.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xml-builtin.h?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -0,0 +1,28 @@\n+/* Header file for builtin XML files.\n+\n+   Copyright (C) 2019 Free Software Foundation, Inc.\n+\n+   This file is part of GDB.\n+\n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3 of the License, or\n+   (at your option) any later version.\n+\n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n+\n+#ifndef XML_BUILTIN_H\n+#define XML_BUILTIN_H\n+\n+/* The text of compiled-in XML documents, from xml-builtin.c\n+   (generated).  */\n+\n+extern const char *const xml_builtin[][2];\n+\n+#endif /* XML_BUILTIN_H */"
    },
    {
      "sha": "915be76066d9fce8003a6b3b4a60ea2354432515",
      "filename": "gdb/xml-support.c",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-support.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-support.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xml-support.c?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -19,6 +19,7 @@\n \n #include \"defs.h\"\n #include \"gdbcmd.h\"\n+#include \"xml-builtin.h\"\n #include \"xml-support.h\"\n #include \"gdbsupport/filestuff.h\"\n #include \"safe-ctype.h\"\n@@ -919,7 +920,7 @@ xml_process_xincludes (std::string &result,\n const char *\n fetch_xml_builtin (const char *filename)\n {\n-  const char *(*p)[2];\n+  const char *const (*p)[2];\n \n   for (p = xml_builtin; (*p)[0]; p++)\n     if (strcmp ((*p)[0], filename) == 0)"
    },
    {
      "sha": "59b4467d082a9290151be86ad8417b3acc1c5049",
      "filename": "gdb/xml-support.h",
      "status": "modified",
      "additions": 0,
      "deletions": 5,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-support.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/fec4e896d6834bc6d23b9d666910dce43f2a2184/gdb/xml-support.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xml-support.h?ref=fec4e896d6834bc6d23b9d666910dce43f2a2184",
      "patch": "@@ -44,11 +44,6 @@ LONGEST xml_builtin_xfer_partial (const char *filename,\n \t\t\t\t  gdb_byte *readbuf, const gdb_byte *writebuf,\n \t\t\t\t  ULONGEST offset, LONGEST len);\n \n-/* The text of compiled-in XML documents, from xml-builtin.c\n-   (generated).  */\n-\n-extern const char *xml_builtin[][2];\n-\n /* Support for XInclude.  */\n \n /* Callback to fetch a new XML file, based on the provided HREF.  */"
    }
  ]
}