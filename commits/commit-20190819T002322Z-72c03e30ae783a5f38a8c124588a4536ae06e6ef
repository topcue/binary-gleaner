{
  "sha": "72c03e30ae783a5f38a8c124588a4536ae06e6ef",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NzJjMDNlMzBhZTc4M2E1ZjM4YThjMTI0NTg4YTQ1MzZhZTA2ZTZlZg==",
  "commit": {
    "author": {
      "name": "Barnaby Wilks",
      "email": "Barnaby.Wilks@arm.com",
      "date": "2019-08-15T16:21:59Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2019-08-19T00:23:22Z"
    },
    "message": "Float16: Fix test failures for non ELF targets\n\nThe tests were failing due to md_atof trying to do word-wise endian\nswitching on the float16 (for little-endian targets sometimes\nmulti word values have their word order changed).\nHowever since a float16 is only 1 word wide, it would end up writing\nincorrect data, as you cannot switch the word order of just one word.\n\n\t* config/tc-arm.c (md_atof): Add precision check.  Formatting.",
    "tree": {
      "sha": "9ddd9dfec942846c67c1d7fe4f99676d2770ad9d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/9ddd9dfec942846c67c1d7fe4f99676d2770ad9d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/72c03e30ae783a5f38a8c124588a4536ae06e6ef",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/72c03e30ae783a5f38a8c124588a4536ae06e6ef",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/72c03e30ae783a5f38a8c124588a4536ae06e6ef",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/72c03e30ae783a5f38a8c124588a4536ae06e6ef/comments",
  "author": null,
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "2c115c4f3cb57cfed7a1be5bbccf0f1bc6f7fdbc",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2c115c4f3cb57cfed7a1be5bbccf0f1bc6f7fdbc",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/2c115c4f3cb57cfed7a1be5bbccf0f1bc6f7fdbc"
    }
  ],
  "stats": {
    "total": 53,
    "additions": 26,
    "deletions": 27
  },
  "files": [
    {
      "sha": "51c6c87e4086f9df2c058503b0165125c6e2fa7e",
      "filename": "gas/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/72c03e30ae783a5f38a8c124588a4536ae06e6ef/gas/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/72c03e30ae783a5f38a8c124588a4536ae06e6ef/gas/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/ChangeLog?ref=72c03e30ae783a5f38a8c124588a4536ae06e6ef",
      "patch": "@@ -1,3 +1,7 @@\n+2019-08-19  Barnaby Wilks  <Barnaby.Wilks@arm.com>\n+\n+\t* config/tc-arm.c (md_atof): Add precision check.  Formatting.\n+\n 2019-08-15  Nick Clifton  <nickc@redhat.com>\n \n \t* po/sv.po: Updated Swedish translation."
    },
    {
      "sha": "c58748dfaa1b83dbb65b44ab40e1cdfc591e4ac4",
      "filename": "gas/config/tc-arm.c",
      "status": "modified",
      "additions": 22,
      "deletions": 27,
      "changes": 49,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/72c03e30ae783a5f38a8c124588a4536ae06e6ef/gas/config/tc-arm.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/72c03e30ae783a5f38a8c124588a4536ae06e6ef/gas/config/tc-arm.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gas/config/tc-arm.c?ref=72c03e30ae783a5f38a8c124588a4536ae06e6ef",
      "patch": "@@ -1237,34 +1237,29 @@ md_atof (int type, char * litP, int * sizeP)\n     input_line_pointer = t;\n   *sizeP = prec * sizeof (LITTLENUM_TYPE);\n \n-  if (target_big_endian)\n-    {\n-      for (i = 0; i < prec; i++)\n-\t{\n-\t  md_number_to_chars (litP, (valueT) words[i], sizeof (LITTLENUM_TYPE));\n-\t  litP += sizeof (LITTLENUM_TYPE);\n-\t}\n-    }\n+  if (target_big_endian || prec == 1)\n+    for (i = 0; i < prec; i++)\n+      {\n+\tmd_number_to_chars (litP, (valueT) words[i], sizeof (LITTLENUM_TYPE));\n+\tlitP += sizeof (LITTLENUM_TYPE);\n+      }\n+  else if (ARM_CPU_HAS_FEATURE (cpu_variant, fpu_endian_pure))\n+    for (i = prec - 1; i >= 0; i--)\n+      {\n+\tmd_number_to_chars (litP, (valueT) words[i], sizeof (LITTLENUM_TYPE));\n+\tlitP += sizeof (LITTLENUM_TYPE);\n+      }\n   else\n-    {\n-      if (ARM_CPU_HAS_FEATURE (cpu_variant, fpu_endian_pure))\n-\tfor (i = prec - 1; i >= 0; i--)\n-\t  {\n-\t    md_number_to_chars (litP, (valueT) words[i], sizeof (LITTLENUM_TYPE));\n-\t    litP += sizeof (LITTLENUM_TYPE);\n-\t  }\n-      else\n-\t/* For a 4 byte float the order of elements in `words' is 1 0.\n-\t   For an 8 byte float the order is 1 0 3 2.  */\n-\tfor (i = 0; i < prec; i += 2)\n-\t  {\n-\t    md_number_to_chars (litP, (valueT) words[i + 1],\n-\t\t\t\tsizeof (LITTLENUM_TYPE));\n-\t    md_number_to_chars (litP + sizeof (LITTLENUM_TYPE),\n-\t\t\t\t(valueT) words[i], sizeof (LITTLENUM_TYPE));\n-\t    litP += 2 * sizeof (LITTLENUM_TYPE);\n-\t  }\n-    }\n+    /* For a 4 byte float the order of elements in `words' is 1 0.\n+       For an 8 byte float the order is 1 0 3 2.  */\n+    for (i = 0; i < prec; i += 2)\n+      {\n+\tmd_number_to_chars (litP, (valueT) words[i + 1],\n+\t\t\t    sizeof (LITTLENUM_TYPE));\n+\tmd_number_to_chars (litP + sizeof (LITTLENUM_TYPE),\n+\t\t\t    (valueT) words[i], sizeof (LITTLENUM_TYPE));\n+\tlitP += 2 * sizeof (LITTLENUM_TYPE);\n+      }\n \n   return NULL;\n }"
    }
  ]
}