{
  "sha": "ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWYwM2RhZDgwOGY0OGU4YTYwMTRjYTcyODRlNGQ1MmExZTIyZjI3Yw==",
  "commit": {
    "author": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-17T15:11:51Z"
    },
    "committer": {
      "name": "Tankut Baris Aktemur",
      "email": "tankut.baris.aktemur@intel.com",
      "date": "2020-02-20T16:35:02Z"
    },
    "message": "gdbserver: turn target op 'attach' into a method\n\ngdbserver/ChangeLog:\n2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n\n\tTurn process_stratum_target's attach op into a method of\n\tprocess_target.\n\n\t* target.h (struct process_stratum_target): Remove the target op.\n\t(class process_target): Add the target op.\n\t(myattach): Update the macro.\n\n\tUpdate the derived classes and callers below.\n\n\t* linux-low.cc (linux_target_ops): Update.\n\t(linux_attach): Turn into ...\n\t(linux_process_target::attach): ... this.\n\t* linux-low.h (class linux_process_target): Update.\n\t* lynx-low.cc (lynx_target_ops): Update.\n\t(lynx_attach): Turn into ...\n\t(lynx_process_target::attach): ... this.\n\t* lynx-low.h (class lynx_process_target): Update.\n\t* nto-low.cc (nto_target_ops): Update.\n\t(nto_attach): Turn into ...\n\t(nto_process_target::attach): ... this.\n\t* nto-low.h (class nto_process_target): Update.\n\t* win32-low.cc (win32_target_ops): Update.\n\t(win32_attach): Turn into ...\n\t(win32_process_target::attach): ... this.\n\t* win32-low.h (class win32_process_target): Update.",
    "tree": {
      "sha": "05334f7d10b509e155ae91ac8930436357e44a5d",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/05334f7d10b509e155ae91ac8930436357e44a5d"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/comments",
  "author": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "barisaktemur",
    "id": 55686642,
    "node_id": "MDQ6VXNlcjU1Njg2NjQy",
    "avatar_url": "https://avatars.githubusercontent.com/u/55686642?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/barisaktemur",
    "html_url": "https://github.com/barisaktemur",
    "followers_url": "https://api.github.com/users/barisaktemur/followers",
    "following_url": "https://api.github.com/users/barisaktemur/following{/other_user}",
    "gists_url": "https://api.github.com/users/barisaktemur/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/barisaktemur/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/barisaktemur/subscriptions",
    "organizations_url": "https://api.github.com/users/barisaktemur/orgs",
    "repos_url": "https://api.github.com/users/barisaktemur/repos",
    "events_url": "https://api.github.com/users/barisaktemur/events{/privacy}",
    "received_events_url": "https://api.github.com/users/barisaktemur/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "6dee9afb0eb280dfe5ffa5418f5fd073f4f2d50a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6dee9afb0eb280dfe5ffa5418f5fd073f4f2d50a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/6dee9afb0eb280dfe5ffa5418f5fd073f4f2d50a"
    }
  ],
  "stats": {
    "total": 77,
    "additions": 54,
    "deletions": 23
  },
  "files": [
    {
      "sha": "97acb6bdc27c036610e7ba6c6c93d390aa4c5927",
      "filename": "gdbserver/ChangeLog",
      "status": "modified",
      "additions": 28,
      "deletions": 0,
      "changes": 28,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/ChangeLog?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -1,3 +1,31 @@\n+2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n+\n+\tTurn process_stratum_target's attach op into a method of\n+\tprocess_target.\n+\n+\t* target.h (struct process_stratum_target): Remove the target op.\n+\t(class process_target): Add the target op.\n+\t(myattach): Update the macro.\n+\n+\tUpdate the derived classes and callers below.\n+\n+\t* linux-low.cc (linux_target_ops): Update.\n+\t(linux_attach): Turn into ...\n+\t(linux_process_target::attach): ... this.\n+\t* linux-low.h (class linux_process_target): Update.\n+\t* lynx-low.cc (lynx_target_ops): Update.\n+\t(lynx_attach): Turn into ...\n+\t(lynx_process_target::attach): ... this.\n+\t* lynx-low.h (class lynx_process_target): Update.\n+\t* nto-low.cc (nto_target_ops): Update.\n+\t(nto_attach): Turn into ...\n+\t(nto_process_target::attach): ... this.\n+\t* nto-low.h (class nto_process_target): Update.\n+\t* win32-low.cc (win32_target_ops): Update.\n+\t(win32_attach): Turn into ...\n+\t(win32_process_target::attach): ... this.\n+\t* win32-low.h (class win32_process_target): Update.\n+\n 2020-02-20  Tankut Baris Aktemur  <tankut.baris.aktemur@intel.com>\n \n \tTurn process_stratum_target's post_create_inferior op into a method"
    },
    {
      "sha": "aae29306df6d465242530167200c7a3743a9d5af",
      "filename": "gdbserver/linux-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/linux-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/linux-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.cc?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -1181,8 +1181,8 @@ static void async_file_mark (void);\n /* Attach to PID.  If PID is the tgid, attach to it and all\n    of its threads.  */\n \n-static int\n-linux_attach (unsigned long pid)\n+int\n+linux_process_target::attach (unsigned long pid)\n {\n   struct process_info *proc;\n   struct thread_info *initial_thread;\n@@ -7359,7 +7359,6 @@ linux_get_hwcap2 (int wordsize)\n static linux_process_target the_linux_target;\n \n static process_stratum_target linux_target_ops = {\n-  linux_attach,\n   linux_kill,\n   linux_detach,\n   linux_mourn,"
    },
    {
      "sha": "5458a9b99b9756b536a0a650c4060c20bcf8b2d1",
      "filename": "gdbserver/linux-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/linux-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/linux-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/linux-low.h?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -274,6 +274,8 @@ class linux_process_target : public process_target\n \t\t       const std::vector<char *> &program_args) override;\n \n   void post_create_inferior () override;\n+\n+  int attach (unsigned long pid) override;\n };\n \n #define get_thread_lwp(thr) ((struct lwp_info *) (thread_target_data (thr)))"
    },
    {
      "sha": "60abc75d8daeae68806b666d109f3012eee06652",
      "filename": "gdbserver/lynx-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/lynx-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/lynx-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.cc?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -309,8 +309,8 @@ lynx_add_threads_after_attach (int pid)\n \n /* Implement the attach target_ops method.  */\n \n-static int\n-lynx_attach (unsigned long pid)\n+int\n+lynx_process_target::attach (unsigned long pid)\n {\n   ptid_t ptid = lynx_ptid_t (pid, 0);\n \n@@ -726,7 +726,6 @@ static lynx_process_target the_lynx_target;\n /* The LynxOS target_ops vector.  */\n \n static process_stratum_target lynx_target_ops = {\n-  lynx_attach,\n   lynx_kill,\n   lynx_detach,\n   lynx_mourn,"
    },
    {
      "sha": "142a774011cc5c7753bbe2ba260fb592c2fb810e",
      "filename": "gdbserver/lynx-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/lynx-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/lynx-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/lynx-low.h?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -60,6 +60,8 @@ class lynx_process_target : public process_target\n \n   int create_inferior (const char *program,\n \t\t       const std::vector<char *> &program_args) override;\n+\n+  int attach (unsigned long pid) override;\n };\n \n /* The inferior's target description.  This is a global because the"
    },
    {
      "sha": "77b5fce4c50a8e8fb6a2b0f42ee1137b0d9e3b56",
      "filename": "gdbserver/nto-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/nto-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/nto-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.cc?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -385,8 +385,8 @@ nto_process_target::create_inferior (const char *program,\n \n /* Attach to process PID.  */\n \n-static int\n-nto_attach (unsigned long pid)\n+int\n+nto_process_target::attach (unsigned long pid)\n {\n   TRACE (\"%s %ld\\n\", __func__, pid);\n   if (do_attach (pid) != pid)\n@@ -935,7 +935,6 @@ nto_sw_breakpoint_from_kind (int kind, int *size)\n static nto_process_target the_nto_target;\n \n static process_stratum_target nto_target_ops = {\n-  nto_attach,\n   nto_kill,\n   nto_detach,\n   nto_mourn,"
    },
    {
      "sha": "f6faacb425eae0a16f227e20529c4bd370939e2a",
      "filename": "gdbserver/nto-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/nto-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/nto-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/nto-low.h?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -50,6 +50,8 @@ class nto_process_target : public process_target\n \n   int create_inferior (const char *program,\n \t\t       const std::vector<char *> &program_args) override;\n+\n+  int attach (unsigned long pid) override;\n };\n \n /* The inferior's target description.  This is a global because the"
    },
    {
      "sha": "bd99737d4f142bb79380490b9d1c0eb4c87b0c64",
      "filename": "gdbserver/target.h",
      "status": "modified",
      "additions": 10,
      "deletions": 11,
      "changes": 21,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/target.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/target.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/target.h?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -70,16 +70,6 @@ class process_target;\n    shared code.  */\n struct process_stratum_target\n {\n-  /* Attach to a running process.\n-\n-     PID is the process ID to attach to, specified by the user\n-     or a higher layer.\n-\n-     Returns -1 if attaching is unsupported, 0 on success, and calls\n-     error() otherwise.  */\n-\n-  int (*attach) (unsigned long pid);\n-\n   /* Kill process PROC.  Return -1 on failure, and 0 on success.  */\n \n   int (*kill) (process_info *proc);\n@@ -489,6 +479,15 @@ class process_target\n   /* Do additional setup after a new process is created, including\n      exec-wrapper completion.  */\n   virtual void post_create_inferior ();\n+\n+  /* Attach to a running process.\n+\n+     PID is the process ID to attach to, specified by the user\n+     or a higher layer.\n+\n+     Returns -1 if attaching is unsupported, 0 on success, and calls\n+     error() otherwise.  */\n+  virtual int attach (unsigned long pid) = 0;\n };\n \n extern process_stratum_target *the_target;\n@@ -502,7 +501,7 @@ void set_target_ops (process_stratum_target *);\n   the_target->pt->post_create_inferior ()\n \n #define myattach(pid) \\\n-  (*the_target->attach) (pid)\n+  the_target->pt->attach (pid)\n \n int kill_inferior (process_info *proc);\n "
    },
    {
      "sha": "0e7c164052214777bc315bc685df71dd0faefde6",
      "filename": "gdbserver/win32-low.cc",
      "status": "modified",
      "additions": 2,
      "deletions": 3,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/win32-low.cc",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/win32-low.cc",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.cc?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -726,8 +726,8 @@ win32_process_target::create_inferior (const char *program,\n /* Attach to a running process.\n    PID is the process ID to attach to, specified by the user\n    or a higher layer.  */\n-static int\n-win32_attach (unsigned long pid)\n+int\n+win32_process_target::attach (unsigned long pid)\n {\n   HANDLE h;\n   winapi_DebugSetProcessKillOnExit DebugSetProcessKillOnExit = NULL;\n@@ -1839,7 +1839,6 @@ win32_sw_breakpoint_from_kind (int kind, int *size)\n static win32_process_target the_win32_target;\n \n static process_stratum_target win32_target_ops = {\n-  win32_attach,\n   win32_kill,\n   win32_detach,\n   win32_mourn,"
    },
    {
      "sha": "fd6662dcab2a2af5ab628d6141f55d5a78e7179c",
      "filename": "gdbserver/win32-low.h",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/win32-low.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/ef03dad808f48e8a6014ca7284e4d52a1e22f27c/gdbserver/win32-low.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdbserver/win32-low.h?ref=ef03dad808f48e8a6014ca7284e4d52a1e22f27c",
      "patch": "@@ -109,6 +109,8 @@ class win32_process_target : public process_target\n \n   int create_inferior (const char *program,\n \t\t       const std::vector<char *> &program_args) override;\n+\n+  int attach (unsigned long pid) override;\n };\n \n /* Retrieve the context for this thread, if not already retrieved.  */"
    }
  ]
}