{
  "sha": "b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6YjdlZDlmM2Q0NjY3MDBkNGU3NjYwODNiMWU0ZjNhMTMyZTVmZDRiNA==",
  "commit": {
    "author": {
      "name": "Samuel Thibault",
      "email": "samuel.thibault@ens-lyon.org",
      "date": "2020-06-01T07:50:14Z"
    },
    "committer": {
      "name": "Samuel Thibault",
      "email": "samuel.thibault@ens-lyon.org",
      "date": "2020-06-01T07:52:24Z"
    },
    "message": "hurd: Add shared mig declarations\n\nWe are using -Werror=missing-declarations, and the _S.h files generated\nby mig do not currently include a declaration for the server routine.\ngnu-nat.c used to have its own external declarations, but better just\nshare them between gnu-nat.c and the _S.c files.\n\nFixes\n\nexc_request_S.c:177:24: error: no previous declaration for \u2018exc_server\u2019 [-Werror=missing-declarations]\n  177 | mig_external boolean_t exc_server\n\ngdb/ChangeLog:\n\n\t* config/i386/i386gnu.mn [%_S.o %_U.o] (COMPILE.post): Add\n\t\"-include gnu-nat-mig.h\".\n\t* gnu-nat-mig.h: New file.\n\t* gnu-nat.c: Include \"gnu-nat-mig.h\".\n\t(exc_server, msg_reply_server, notify_server,\n\tprocess_reply_server): Remove declarations.",
    "tree": {
      "sha": "3e62ad26994cb33f955ad38dd5284ed84f104fce",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/3e62ad26994cb33f955ad38dd5284ed84f104fce"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/comments",
  "author": {
    "login": "sthibaul",
    "id": 5405051,
    "node_id": "MDQ6VXNlcjU0MDUwNTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5405051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sthibaul",
    "html_url": "https://github.com/sthibaul",
    "followers_url": "https://api.github.com/users/sthibaul/followers",
    "following_url": "https://api.github.com/users/sthibaul/following{/other_user}",
    "gists_url": "https://api.github.com/users/sthibaul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sthibaul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sthibaul/subscriptions",
    "organizations_url": "https://api.github.com/users/sthibaul/orgs",
    "repos_url": "https://api.github.com/users/sthibaul/repos",
    "events_url": "https://api.github.com/users/sthibaul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sthibaul/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "sthibaul",
    "id": 5405051,
    "node_id": "MDQ6VXNlcjU0MDUwNTE=",
    "avatar_url": "https://avatars.githubusercontent.com/u/5405051?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/sthibaul",
    "html_url": "https://github.com/sthibaul",
    "followers_url": "https://api.github.com/users/sthibaul/followers",
    "following_url": "https://api.github.com/users/sthibaul/following{/other_user}",
    "gists_url": "https://api.github.com/users/sthibaul/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/sthibaul/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/sthibaul/subscriptions",
    "organizations_url": "https://api.github.com/users/sthibaul/orgs",
    "repos_url": "https://api.github.com/users/sthibaul/repos",
    "events_url": "https://api.github.com/users/sthibaul/events{/privacy}",
    "received_events_url": "https://api.github.com/users/sthibaul/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "cd22ee05137b858fead379976d4c51e5cf23d907",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/cd22ee05137b858fead379976d4c51e5cf23d907",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/cd22ee05137b858fead379976d4c51e5cf23d907"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 43,
    "deletions": 7
  },
  "files": [
    {
      "sha": "c95c168b88086a88c564a3deef67b6fa343602a0",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
      "patch": "@@ -1,3 +1,12 @@\n+2020-06-01  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n+\n+\t* config/i386/i386gnu.mn [%_S.o %_U.o] (COMPILE.post): Add\n+\t\"-include gnu-nat-mig.h\".\n+\t* gnu-nat-mig.h: New file.\n+\t* gnu-nat.c: Include \"gnu-nat-mig.h\".\n+\t(exc_server, msg_reply_server, notify_server,\n+\tprocess_reply_server): Remove declarations.\n+\n 2020-05-30  Samuel Thibault  <samuel.thibault@ens-lyon.org>\n \n \t* gnu-nat.h (inf_validate_procs, inf_suspend, inf_set_traced,"
    },
    {
      "sha": "b7414e3bcb426fb4d7e989e064b7af71e291586d",
      "filename": "gdb/config/i386/i386gnu.mn",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/config/i386/i386gnu.mn",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/config/i386/i386gnu.mn",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/config/i386/i386gnu.mn?ref=b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
      "patch": "@@ -21,7 +21,7 @@ MIGCOM = $(MIG) -cc cat - /dev/null\n \t| $(MIGCOM) -sheader /dev/null -server /dev/null -user $*_U.c -header $*_U.h\n \n # MIG stubs are not yet ready for C++ compilation.\n-%_S.o %_U.o : COMPILE.post += -x c\n+%_S.o %_U.o : COMPILE.post += -x c -include gnu-nat-mig.h\n \n NAT_GENERATED_FILES = notify_S.h notify_S.c \\\n \tprocess_reply_S.h process_reply_S.c \\"
    },
    {
      "sha": "4cceff10f1bcc9e46cdb25c4ac4d66dfefb6c056",
      "filename": "gdb/gnu-nat-mig.h",
      "status": "added",
      "additions": 31,
      "deletions": 0,
      "changes": 31,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/gnu-nat-mig.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/gnu-nat-mig.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gnu-nat-mig.h?ref=b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
      "patch": "@@ -0,0 +1,31 @@\n+/* Common things used by the various *gnu-nat.c files\n+   Copyright (C) 2020 Free Software Foundation, Inc.\n+\n+   This program is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3 of the License, or\n+   (at your option) any later version.\n+\n+   This program is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with this program.  If not, see <http://www.gnu.org/licenses/>.  */\n+\n+#ifndef GNU_NAT_MIG_H\n+#define GNU_NAT_MIG_H\n+\n+#include <mach/boolean.h>\n+#include <mach/message.h>\n+\n+boolean_t exc_server (mach_msg_header_t *InHeadP, mach_msg_header_t *OutHeadP);\n+boolean_t msg_reply_server (mach_msg_header_t *InHeadP,\n+\t\t\t    mach_msg_header_t *OutHeadP);\n+boolean_t notify_server (mach_msg_header_t *InHeadP,\n+\t\t\t mach_msg_header_t *OutHeadP);\n+boolean_t process_reply_server (mach_msg_header_t *InHeadP,\n+\t\t\t\tmach_msg_header_t *OutHeadP);\n+\n+#endif /* GNU_NAT_MIG_H */"
    },
    {
      "sha": "44adda5fe1244c343879360f2e62dabb39441d86",
      "filename": "gdb/gnu-nat.c",
      "status": "modified",
      "additions": 2,
      "deletions": 6,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/gnu-nat.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4/gdb/gnu-nat.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/gnu-nat.c?ref=b7ed9f3d466700d4e766083b1e4f3a132e5fd4b4",
      "patch": "@@ -83,6 +83,8 @@ extern \"C\"\n #include \"msg_reply_S.h\"\n #include \"exc_request_U.h\"\n #include \"msg_U.h\"\n+\n+#include \"gnu-nat-mig.h\"\n }\n \n struct gnu_nat_target *gnu_target;\n@@ -1430,12 +1432,6 @@ struct inf *gnu_current_inf = 0;\n    multi-threaded, we don't bother to lock this.  */\n static struct inf *waiting_inf;\n \n-/* MIG stubs are not yet ready for C++ compilation.  */\n-extern \"C\" int exc_server (mach_msg_header_t *, mach_msg_header_t *);\n-extern \"C\" int msg_reply_server (mach_msg_header_t *, mach_msg_header_t *);\n-extern \"C\" int notify_server (mach_msg_header_t *, mach_msg_header_t *);\n-extern \"C\" int process_reply_server (mach_msg_header_t *, mach_msg_header_t *);\n-\n /* Wait for something to happen in the inferior, returning what in STATUS.  */\n \n ptid_t"
    }
  ]
}