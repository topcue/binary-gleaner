{
  "sha": "6bebf813ac2d4b92facae7b18161aad1b734a894",
  "node_id": "C_kwDOANOeidoAKDZiZWJmODEzYWMyZDRiOTJmYWNhZTdiMTgxNjFhYWQxYjczNGE4OTQ",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-12-11T21:57:17Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-12-20T16:49:41Z"
    },
    "message": "Remove print_spaces\n\nThis removes the print_spaces helper function, in favor of using the\n\"*%s\" idiom that's already used in many places in gdb.  One spot (in\nsymmisc.c) is changed to use print_spaces_filtered, because the rest\nof that function is using filtered output.  (This highlights one way\nthat the printf idiom is better -- this error is harder to make when\nusing that.)\n\nRegression tested on x86-64 Fedora 34.",
    "tree": {
      "sha": "aaa28c29f4665e5db0bf87e0167f88122e55b433",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/aaa28c29f4665e5db0bf87e0167f88122e55b433"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6bebf813ac2d4b92facae7b18161aad1b734a894",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6bebf813ac2d4b92facae7b18161aad1b734a894",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6bebf813ac2d4b92facae7b18161aad1b734a894",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6bebf813ac2d4b92facae7b18161aad1b734a894/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "b0715493df19e5223251c5be0efc7f180aa0a5ff",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/b0715493df19e5223251c5be0efc7f180aa0a5ff",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/b0715493df19e5223251c5be0efc7f180aa0a5ff"
    }
  ],
  "stats": {
    "total": 50,
    "additions": 19,
    "deletions": 31
  },
  "files": [
    {
      "sha": "a3c189e4a8e6f791f7948bd5a85965ecd156c521",
      "filename": "gdb/cli-out.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/cli-out.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/cli-out.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli-out.c?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -206,7 +206,7 @@ cli_ui_out::do_spaces (int numspaces)\n     return;\n \n   if (test_flags (unfiltered_output))\n-    print_spaces (numspaces, m_streams.back ());\n+    fprintf_unfiltered (m_streams.back (), \"%*s\", numspaces, \"\");\n   else\n     print_spaces_filtered (numspaces, m_streams.back ());\n }"
    },
    {
      "sha": "bc74ca5ce9b6886f95463b86c409dc832d43a8ee",
      "filename": "gdb/compile/compile-loc2c.c",
      "status": "modified",
      "additions": 1,
      "deletions": 1,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/compile/compile-loc2c.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/compile/compile-loc2c.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/compile/compile-loc2c.c?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -675,7 +675,7 @@ do_compile_dwarf_expr_to_c (int indent, string_file *stream,\n       uint64_t uoffset, reg;\n       int64_t offset;\n \n-      print_spaces (indent - 2, stream);\n+      stream->printf (\"%*s\", indent - 2, \"\");\n       if (info[op_ptr - base].label)\n \t{\n \t  print_label (stream, scope, op_ptr - base);"
    },
    {
      "sha": "36b7432803b9b4ec7a4fda9cb50275513dd9f962",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 14,
      "deletions": 18,
      "changes": 32,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -22980,31 +22980,28 @@ dump_die_shallow (struct ui_file *f, int indent, struct die_info *die)\n {\n   unsigned int i;\n \n-  print_spaces (indent, f);\n-  fprintf_unfiltered (f, \"Die: %s (abbrev %d, offset %s)\\n\",\n+  fprintf_unfiltered (f, \"%*sDie: %s (abbrev %d, offset %s)\\n\",\n+\t\t      indent, \"\",\n \t\t      dwarf_tag_name (die->tag), die->abbrev,\n \t\t      sect_offset_str (die->sect_off));\n \n   if (die->parent != NULL)\n-    {\n-      print_spaces (indent, f);\n-      fprintf_unfiltered (f, \"  parent at offset: %s\\n\",\n-\t\t\t  sect_offset_str (die->parent->sect_off));\n-    }\n+    fprintf_unfiltered (f, \"%*s  parent at offset: %s\\n\",\n+\t\t\tindent, \"\",\n+\t\t\tsect_offset_str (die->parent->sect_off));\n \n-  print_spaces (indent, f);\n-  fprintf_unfiltered (f, \"  has children: %s\\n\",\n-\t   dwarf_bool_name (die->child != NULL));\n+  fprintf_unfiltered (f, \"%*s  has children: %s\\n\",\n+\t\t      indent, \"\",\n+\t\t      dwarf_bool_name (die->child != NULL));\n \n-  print_spaces (indent, f);\n-  fprintf_unfiltered (f, \"  attributes:\\n\");\n+  fprintf_unfiltered (f, \"%*s  attributes:\\n\", indent, \"\");\n \n   for (i = 0; i < die->num_attrs; ++i)\n     {\n-      print_spaces (indent, f);\n-      fprintf_unfiltered (f, \"    %s (%s) \",\n-\t       dwarf_attr_name (die->attrs[i].name),\n-\t       dwarf_form_name (die->attrs[i].form));\n+      fprintf_unfiltered (f, \"%*s    %s (%s) \",\n+\t\t\t  indent, \"\",\n+\t\t\t  dwarf_attr_name (die->attrs[i].name),\n+\t\t\t  dwarf_form_name (die->attrs[i].form));\n \n       switch (die->attrs[i].form)\n \t{\n@@ -23120,8 +23117,7 @@ dump_die_1 (struct ui_file *f, int level, int max_level, struct die_info *die)\n \n   if (die->child != NULL)\n     {\n-      print_spaces (indent, f);\n-      fprintf_unfiltered (f, \"  Children:\");\n+      fprintf_unfiltered (f, \"%*s  Children:\", indent, \"\");\n       if (level + 1 < max_level)\n \t{\n \t  fprintf_unfiltered (f, \"\\n\");"
    },
    {
      "sha": "ca15ab41f2d4ec9f66744113c7a1f403bf5e2d55",
      "filename": "gdb/symmisc.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/symmisc.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/symmisc.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/symmisc.c?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -286,8 +286,8 @@ dump_symtab_1 (struct symtab *symtab, struct ui_file *outfile)\n \t{\n \t  b = BLOCKVECTOR_BLOCK (bv, i);\n \t  depth = block_depth (b) * 2;\n-\t  print_spaces (depth, outfile);\n-\t  fprintf_filtered (outfile, \"block #%03d, object at \", i);\n+\t  fprintf_filtered (outfile, \"%*sblock #%03d, object at \",\n+\t\t\t    depth, \"\", i);\n \t  gdb_print_host_address (b, outfile);\n \t  if (BLOCK_SUPERBLOCK (b))\n \t    {\n@@ -510,7 +510,7 @@ print_symbol (struct gdbarch *gdbarch, struct symbol *symbol,\n   else\n     section = NULL;\n \n-  print_spaces (depth, outfile);\n+  print_spaces_filtered (depth, outfile);\n   if (SYMBOL_DOMAIN (symbol) == LABEL_DOMAIN)\n     {\n       fprintf_filtered (outfile, \"label %s at \", symbol->print_name ());"
    },
    {
      "sha": "138bd3bb641e8b68214a5de72421aa9f71976656",
      "filename": "gdb/utils.c",
      "status": "modified",
      "additions": 0,
      "deletions": 6,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/utils.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/utils.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.c?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -779,12 +779,6 @@ uinteger_pow (ULONGEST v1, LONGEST v2)\n     }\n }\n \n-void\n-print_spaces (int n, struct ui_file *file)\n-{\n-  fputs_unfiltered (n_spaces (n), file);\n-}\n-\n /* Print a host address.  */\n \n void"
    },
    {
      "sha": "03424e6af95608d31f3cc8c49bf1f52dcb0f74c3",
      "filename": "gdb/utils.h",
      "status": "modified",
      "additions": 0,
      "deletions": 2,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/utils.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6bebf813ac2d4b92facae7b18161aad1b734a894/gdb/utils.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/utils.h?ref=6bebf813ac2d4b92facae7b18161aad1b734a894",
      "patch": "@@ -467,8 +467,6 @@ extern void fprintf_unfiltered (struct ui_file *, const char *, ...)\n \n extern void printf_unfiltered (const char *, ...) ATTRIBUTE_PRINTF (1, 2);\n \n-extern void print_spaces (int, struct ui_file *);\n-\n extern void print_spaces_filtered (int, struct ui_file *);\n \n extern const char *n_spaces (int);"
    }
  ]
}