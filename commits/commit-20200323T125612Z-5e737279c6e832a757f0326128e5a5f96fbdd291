{
  "sha": "5e737279c6e832a757f0326128e5a5f96fbdd291",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NWU3MzcyNzljNmU4MzJhNzU3ZjAzMjYxMjhlNWE1Zjk2ZmJkZDI5MQ==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-23T10:50:54Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-23T12:56:12Z"
    },
    "message": "i386msdos uninitialised read\n\nAlso reinstate ld i386aout for i386-msdos target, which doesn't build\notherwise.\n\nbfd/\n\t* i386msdos.c (msdos_object_p): Don't access e_lfanew when that\n\tfield hasn't been read.  Remove unnecessary casts.\nld/\n\t* Makefile.am (ALL_EMULATION_SOURCES): Reinstate ei386aout.c.\n\tInclude ei386aout dep file.\n\t* Makefile.in: Regenerate.\n\t* po/BLD-POTFILES.in: Regenerate.",
    "tree": {
      "sha": "889039d40232c9667e80f1b5974660866128b1e6",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/889039d40232c9667e80f1b5974660866128b1e6"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/5e737279c6e832a757f0326128e5a5f96fbdd291",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5e737279c6e832a757f0326128e5a5f96fbdd291",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/5e737279c6e832a757f0326128e5a5f96fbdd291",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5e737279c6e832a757f0326128e5a5f96fbdd291/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "5935fd15306c26ead8274cbeab3287770f2ac92a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/5935fd15306c26ead8274cbeab3287770f2ac92a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/5935fd15306c26ead8274cbeab3287770f2ac92a"
    }
  ],
  "stats": {
    "total": 32,
    "additions": 26,
    "deletions": 6
  },
  "files": [
    {
      "sha": "c513ebd7537bc2ce66b047fab9367ddc0ebd217f",
      "filename": "bfd/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/bfd/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/bfd/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/ChangeLog?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -1,3 +1,8 @@\n+2020-03-23  Alan Modra  <amodra@gmail.com>\n+\n+\t* i386msdos.c (msdos_object_p): Don't access e_lfanew when that\n+\tfield hasn't been read.  Remove unnecessary casts.\n+\n 2020-03-22  Alan Modra  <amodra@gmail.com>\n \n \t* coff64-rs6000.c (xcoff64_slurp_armap): Ensure size is large"
    },
    {
      "sha": "e9307a7a4243df3a95d6715d01bbf35e1e7ab645",
      "filename": "bfd/i386msdos.c",
      "status": "modified",
      "additions": 8,
      "deletions": 6,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/bfd/i386msdos.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/bfd/i386msdos.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/bfd/i386msdos.c?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -47,10 +47,10 @@ msdos_object_p (bfd *abfd)\n   struct external_DOS_hdr hdr;\n   bfd_byte buffer[2];\n   asection *section;\n-  unsigned int size;\n+  bfd_size_type size;\n \n   if (bfd_seek (abfd, (file_ptr) 0, SEEK_SET) != 0\n-      || bfd_bread (&hdr, (bfd_size_type) sizeof (hdr), abfd) < DOS_HDR_SIZE)\n+      || (size = bfd_bread (&hdr, sizeof (hdr), abfd)) < DOS_HDR_SIZE)\n     {\n       if (bfd_get_error () != bfd_error_system_call)\n \tbfd_set_error (bfd_error_wrong_format);\n@@ -67,9 +67,11 @@ msdos_object_p (bfd *abfd)\n      e_lfanew field will be valid and point to a header beginning with one of\n      the relevant signatures.  If not, e_lfanew might point to anything, so\n      don't bail if we can't read there.  */\n-  if (H_GET_16 (abfd, hdr.e_cparhdr) < 4\n-      || bfd_seek (abfd, (file_ptr) H_GET_32 (abfd, hdr.e_lfanew), SEEK_SET) != 0\n-      || bfd_bread (buffer, (bfd_size_type) 2, abfd) != 2)\n+  if (size < offsetof (struct external_DOS_hdr, e_lfanew) + 4\n+      || H_GET_16 (abfd, hdr.e_cparhdr) < 4)\n+    ;\n+  else if (bfd_seek (abfd, H_GET_32 (abfd, hdr.e_lfanew), SEEK_SET) != 0\n+\t   || bfd_bread (buffer, (bfd_size_type) 2, abfd) != 2)\n     {\n       if (bfd_get_error () == bfd_error_system_call)\n \treturn NULL;\n@@ -102,7 +104,7 @@ msdos_object_p (bfd *abfd)\n   size += H_GET_16 (abfd, hdr.e_cblp);\n \n   /* Check that the size is valid.  */\n-  if (bfd_seek (abfd, (file_ptr) (section->filepos + size), SEEK_SET) != 0)\n+  if (bfd_seek (abfd, section->filepos + size, SEEK_SET) != 0)\n     {\n       if (bfd_get_error () != bfd_error_system_call)\n \tbfd_set_error (bfd_error_wrong_format);"
    },
    {
      "sha": "12efa1117fe3b95d023390d37622af5994496900",
      "filename": "ld/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/ChangeLog?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -1,3 +1,10 @@\n+2020-03-23  Alan Modra  <amodra@gmail.com>\n+\n+\t* Makefile.am (ALL_EMULATION_SOURCES): Reinstate ei386aout.c.\n+\tInclude ei386aout dep file.\n+\t* Makefile.in: Regenerate.\n+\t* po/BLD-POTFILES.in: Regenerate.\n+\n 2020-03-20  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* testsuite/ld-plugin/lto.exp (lto_link_tests): Run PR ld/25355"
    },
    {
      "sha": "a64899fc091fe00115c73e9e687a95cefe274836",
      "filename": "ld/Makefile.am",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/Makefile.am",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/Makefile.am",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.am?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -312,6 +312,7 @@ ALL_EMULATION_SOURCES = \\\n \tehppalinux.c \\\n \tehppanbsd.c \\\n \tehppaobsd.c \\\n+\tei386aout.c \\\n \tei386beos.c \\\n \tei386bsd.c \\\n \tei386go32.c \\\n@@ -800,6 +801,7 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppalinux.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppanbsd.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppaobsd.Pc@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386aout.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386beos.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386bsd.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386go32.Pc@am__quote@"
    },
    {
      "sha": "b34455b1f86643e025ae3206c69d4134b240f1c7",
      "filename": "ld/Makefile.in",
      "status": "modified",
      "additions": 3,
      "deletions": 0,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/Makefile.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/Makefile.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/Makefile.in?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -802,6 +802,7 @@ ALL_EMULATION_SOURCES = \\\n \tehppalinux.c \\\n \tehppanbsd.c \\\n \tehppaobsd.c \\\n+\tei386aout.c \\\n \tei386beos.c \\\n \tei386bsd.c \\\n \tei386go32.c \\\n@@ -1418,6 +1419,7 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppalinux.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppanbsd.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppaobsd.Po@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386aout.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386beos.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386bsd.Po@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386go32.Po@am__quote@\n@@ -2404,6 +2406,7 @@ $(ALL_EMULATION_SOURCES) $(ALL_64_EMULATION_SOURCES): $(GEN_DEPENDS)\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppalinux.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppanbsd.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ehppaobsd.Pc@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386aout.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386beos.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386bsd.Pc@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ei386go32.Pc@am__quote@"
    },
    {
      "sha": "70f5ea9fa4bfcf9ac6b140583c878c61d8627069",
      "filename": "ld/po/BLD-POTFILES.in",
      "status": "modified",
      "additions": 1,
      "deletions": 0,
      "changes": 1,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/po/BLD-POTFILES.in",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/5e737279c6e832a757f0326128e5a5f96fbdd291/ld/po/BLD-POTFILES.in",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/ld/po/BLD-POTFILES.in?ref=5e737279c6e832a757f0326128e5a5f96fbdd291",
      "patch": "@@ -222,6 +222,7 @@ ehppaelf.c\n ehppalinux.c\n ehppanbsd.c\n ehppaobsd.c\n+ei386aout.c\n ei386beos.c\n ei386bsd.c\n ei386go32.c"
    }
  ]
}