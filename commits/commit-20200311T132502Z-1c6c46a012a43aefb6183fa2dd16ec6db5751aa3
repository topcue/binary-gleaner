{
  "sha": "1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MWM2YzQ2YTAxMmE0M2FlZmI2MTgzZmEyZGQxNmVjNmRiNTc1MWFhMw==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-03-11T13:25:02Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-03-11T13:25:02Z"
    },
    "message": "[gdb/testsuite] Limit verbose scope in gdb.base/break-interp.exp\n\nI'm running into the following failure (and 17 more like it) in\ngdb.base/break-interp.exp:\n...\n (gdb) bt^M\n #0  0x00007fde85a3b0c1 in __GI___nanosleep \\\n   (requested_time=requested_time@entry=0x7ffe5044ee70, \\\n   remaining=remaining@entry=0x7ffe5044ee70) at nanosleep.c:27^M\n #1  0x00007fde85a3affa in __sleep (seconds=0) at sleep.c:55^M\n #2  0x00007fde8606789c in libfunc (Reading in symbols for libc-start.c...^M\n action=0x7ffe5044fa12 \"sleep\") at gdb.base/break-interp-lib.c:41^M\n #3  0x0000000000400708 in main ()^M\n Reading in symbols for ../sysdeps/x86_64/start.S...^M\n (gdb) FAIL: gdb.base/break-interp.exp: LDprelinkNOdebugNO: \\\n   BINprelinkNOdebugNOpieNO: INNER: attach: attach main bt\n...\n\nThe problem is that the test uses verbose mode to detect the \"PIE (Position\nIndependent Executable) displacement\" messages, but the verbose mode also\ntriggers \"Reading in symbols for\" messages, which may appear in the middle of\na backtrace (or not, depending on whether debug info is available).\n\n[ In fact, the messages appear in the middle of a backtrace line, which is\nPR25613. ]\n\nFix these FAILs by limiting the scope of verbose to the parts of the test that\nneed it.\n\nTested on x86_64-linux.\n\ngdb/testsuite/ChangeLog:\n\n2020-03-11  Tom de Vries  <tdevries@suse.de>\n\n\t* gdb.base/break-interp.exp: Limit verbose scope.",
    "tree": {
      "sha": "5f1adf27c5425e1d386dc763210629b015d30059",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/5f1adf27c5425e1d386dc763210629b015d30059"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8248d21a5b8b7bb9970163b8b327f5ac2f857f33",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8248d21a5b8b7bb9970163b8b327f5ac2f857f33",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8248d21a5b8b7bb9970163b8b327f5ac2f857f33"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 12,
    "deletions": 0
  },
  "files": [
    {
      "sha": "8a7ca8ef3e93c9190a8cac0e4f97c409c49e57af",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
      "patch": "@@ -1,3 +1,7 @@\n+2020-03-11  Tom de Vries  <tdevries@suse.de>\n+\n+\t* gdb.base/break-interp.exp: Limit verbose scope.\n+\n 2020-03-11  Tom de Vries  <tdevries@suse.de>\n \n \t* gdb.fortran/logical.f90: Define variable with character type."
    },
    {
      "sha": "ba05a22268a9663acee3ac9f4296d8349d1b558f",
      "filename": "gdb/testsuite/gdb.base/break-interp.exp",
      "status": "modified",
      "additions": 8,
      "deletions": 0,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3/gdb/testsuite/gdb.base/break-interp.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/1c6c46a012a43aefb6183fa2dd16ec6db5751aa3/gdb/testsuite/gdb.base/break-interp.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/break-interp.exp?ref=1c6c46a012a43aefb6183fa2dd16ec6db5751aa3",
      "patch": "@@ -251,6 +251,7 @@ proc test_core {file displacement} {\n \tif ![regexp {^(NONE|FOUND-.*)$} $displacement] {\n \t    fail $test_displacement\n \t}\n+\tgdb_test_no_output \"set verbose off\"\n \n \tgdb_test \"bt\" \"#\\[0-9\\]+ +\\[^\\r\\n\\]*\\\\mlibfunc\\\\M\\[^\\r\\n\\]*\\r\\n#\\[0-9\\]+ +\\[^\\r\\n\\]*\\\\mmain\\\\M.*\" \"core main bt\"\n     }\n@@ -301,6 +302,7 @@ proc test_attach_gdb {file pid displacement prefix} {\n \tif ![regexp {^(NONE|FOUND-.*)$} $displacement] {\n \t    fail $test_displacement\n \t}\n+\tgdb_test_no_output \"set verbose off\"\n \n \tgdb_test \"bt\" \"#\\[0-9\\]+ +\\[^\\r\\n\\]*\\\\mlibfunc\\\\M\\[^\\r\\n\\]*\\r\\n#\\[0-9\\]+ +\\[^\\r\\n\\]*\\\\mmain\\\\M.*\" \"attach main bt\"\n \tgdb_exit\n@@ -409,19 +411,24 @@ proc test_ld {file ifmain trynosym displacement} {\n \n     reach $solib_bp \"run\" $displacement 1\n \n+    gdb_test_no_output \"set verbose off\"\n     gdb_test \"bt\" \"#0 +\\[^\\r\\n\\]*\\\\m(__GI_)?$solib_bp\\\\M.*\" \"dl bt\"\n+    gdb_test_no_output \"set verbose on\"\n \n     if $ifmain {\n \treach \"main\" continue \"NONE\"\n \n \treach \"libfunc\" continue \"NONE\"\n \n+\tgdb_test_no_output \"set verbose off\"\n \tgdb_test \"bt\" \"#0 +\\[^\\r\\n\\]*\\\\mlibfunc\\\\M\\[^\\r\\n\\]*\\r\\n#1 +\\[^\\r\\n\\]*\\\\mmain\\\\M.*\" \"main bt\"\n+\tgdb_test_no_output \"set verbose on\"\n     }\n \n     # Try re-run if the new PIE displacement takes effect.\n     gdb_test \"kill\" \"\" \"kill\" {Kill the program being debugged\\? \\(y or n\\) } \"y\"\n     reach $solib_bp \"run\" $displacement 2\n+    gdb_test_no_output \"set verbose off\"\n \n     if $ifmain {\n \ttest_core $file $displacement\n@@ -524,6 +531,7 @@ proc test_ld {file ifmain trynosym displacement} {\n \t\tfail $test_displacement\n \t    }\n \t}\n+\tgdb_test_no_output \"set verbose off\"\n     }\n }\n "
    }
  ]
}