{
  "sha": "69b037c30cadea06c3dc7f83e427d0f729c201cd",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NjliMDM3YzMwY2FkZWEwNmMzZGM3ZjgzZTQyN2QwZjcyOWMyMDFjZA==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-03-29T19:24:48Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2020-03-29T19:24:48Z"
    },
    "message": "gdb: rename partial symtab expand functions of debug info readers using legacy_psymtab\n\nAs I am trying to understand the dynamic of partial_symtab::read_symtab\nand partial_symtab::expand_psymtab, I think that renaming these\nfunctions helps make it clear that they are effectively implementations\nof the partial_symtab::expand_psymtab method.\n\ngdb/ChangeLog:\n\n\t* dbxread.c (dbx_psymtab_to_symtab_1): Rename to...\n\t(dbx_expand_psymtab): ... this.\n\t(start_psymtab): Update.\n\t* mdebugread.c (psymtab_to_symtab_1): Rename to...\n\t(mdebug_expand_psymtab): ... this.\n\t(parse_partial_symbols): Update.\n\t(new_psymtab): Update.\n\t* xcoffread.c (xcoff_psymtab_to_symtab_1): Rename to...\n\t(xcoff_expand_psymtab): ... this.\n\t(xcoff_start_psymtab): Update.",
    "tree": {
      "sha": "a7ac2f9326b892710d500e75534ffde19d325041",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a7ac2f9326b892710d500e75534ffde19d325041"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/69b037c30cadea06c3dc7f83e427d0f729c201cd",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/69b037c30cadea06c3dc7f83e427d0f729c201cd",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/69b037c30cadea06c3dc7f83e427d0f729c201cd",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/69b037c30cadea06c3dc7f83e427d0f729c201cd/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "48993951ce343e397c4250c43c1708fffab01ac1",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/48993951ce343e397c4250c43c1708fffab01ac1",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/48993951ce343e397c4250c43c1708fffab01ac1"
    }
  ],
  "stats": {
    "total": 33,
    "additions": 23,
    "deletions": 10
  },
  "files": [
    {
      "sha": "812d0b9b55f94467e99f82fb5cb13b82fd359bd0",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 13,
      "deletions": 0,
      "changes": 13,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=69b037c30cadea06c3dc7f83e427d0f729c201cd",
      "patch": "@@ -1,3 +1,16 @@\n+2020-03-29  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* dbxread.c (dbx_psymtab_to_symtab_1): Rename to...\n+\t(dbx_expand_psymtab): ... this.\n+\t(start_psymtab): Update.\n+\t* mdebugread.c (psymtab_to_symtab_1): Rename to...\n+\t(mdebug_expand_psymtab): ... this.\n+\t(parse_partial_symbols): Update.\n+\t(new_psymtab): Update.\n+\t* xcoffread.c (xcoff_psymtab_to_symtab_1): Rename to...\n+\t(xcoff_expand_psymtab): ... this.\n+\t(xcoff_start_psymtab): Update.\n+\n 2020-03-29  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* psympriv.h (partial_symtab) <read_dependencies>: Rename to..."
    },
    {
      "sha": "ac81278e996c333d3efee93a630a42d145ac4c11",
      "filename": "gdb/dbxread.c",
      "status": "modified",
      "additions": 3,
      "deletions": 3,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/dbxread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/dbxread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dbxread.c?ref=69b037c30cadea06c3dc7f83e427d0f729c201cd",
      "patch": "@@ -268,7 +268,7 @@ static void read_ofile_symtab (struct objfile *, legacy_psymtab *);\n static void dbx_read_symtab (legacy_psymtab *self,\n \t\t\t     struct objfile *objfile);\n \n-static void dbx_psymtab_to_symtab_1 (legacy_psymtab *, struct objfile *);\n+static void dbx_expand_psymtab (legacy_psymtab *, struct objfile *);\n \n static void read_dbx_symtab (minimal_symbol_reader &, struct objfile *);\n \n@@ -1909,7 +1909,7 @@ start_psymtab (struct objfile *objfile, const char *filename, CORE_ADDR textlow,\n     XOBNEW (&objfile->objfile_obstack, struct symloc);\n   LDSYMOFF (result) = ldsymoff;\n   result->legacy_read_symtab = dbx_read_symtab;\n-  result->legacy_expand_psymtab = dbx_psymtab_to_symtab_1;\n+  result->legacy_expand_psymtab = dbx_expand_psymtab;\n   SYMBOL_SIZE (result) = symbol_size;\n   SYMBOL_OFFSET (result) = symbol_table_offset;\n   STRING_OFFSET (result) = string_table_offset;\n@@ -2066,7 +2066,7 @@ dbx_end_psymtab (struct objfile *objfile, legacy_psymtab *pst,\n }\n \f\n static void\n-dbx_psymtab_to_symtab_1 (legacy_psymtab *pst, struct objfile *objfile)\n+dbx_expand_psymtab (legacy_psymtab *pst, struct objfile *objfile)\n {\n   gdb_assert (!pst->readin);\n "
    },
    {
      "sha": "d9ad8eef425a5c0aff5412e35829bb7d9f4c2703",
      "filename": "gdb/mdebugread.c",
      "status": "modified",
      "additions": 5,
      "deletions": 5,
      "changes": 10,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/mdebugread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/mdebugread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/mdebugread.c?ref=69b037c30cadea06c3dc7f83e427d0f729c201cd",
      "patch": "@@ -253,8 +253,8 @@ static void sort_blocks (struct symtab *);\n \n static legacy_psymtab *new_psymtab (const char *, struct objfile *);\n \n-static void psymtab_to_symtab_1 (legacy_psymtab *pst,\n-\t\t\t\t struct objfile *objfile);\n+static void mdebug_expand_psymtab (legacy_psymtab *pst,\n+\t\t\t\t  struct objfile *objfile);\n \n static void add_block (struct block *, struct symtab *);\n \n@@ -2613,7 +2613,7 @@ parse_partial_symbols (minimal_symbol_reader &reader,\n \n       /* The way to turn this into a symtab is to call...  */\n       pst->legacy_read_symtab = mdebug_read_symtab;\n-      pst->legacy_expand_psymtab = psymtab_to_symtab_1;\n+      pst->legacy_expand_psymtab = mdebug_expand_psymtab;\n \n       /* Set up language for the pst.\n          The language from the FDR is used if it is unambigious (e.g. cfront\n@@ -3835,7 +3835,7 @@ mdebug_next_symbol_text (struct objfile *objfile)\n    The flow of control and even the memory allocation differs.  FIXME.  */\n \n static void\n-psymtab_to_symtab_1 (legacy_psymtab *pst, struct objfile *objfile)\n+mdebug_expand_psymtab (legacy_psymtab *pst, struct objfile *objfile)\n {\n   bfd_size_type external_sym_size;\n   bfd_size_type external_pdr_size;\n@@ -4645,7 +4645,7 @@ new_psymtab (const char *name, struct objfile *objfile)\n \n   /* The way to turn this into a symtab is to call...  */\n   psymtab->legacy_read_symtab = mdebug_read_symtab;\n-  psymtab->legacy_expand_psymtab = psymtab_to_symtab_1;\n+  psymtab->legacy_expand_psymtab = mdebug_expand_psymtab;\n   return (psymtab);\n }\n "
    },
    {
      "sha": "6c1181388070bfc15652a6022042a1653dd08f37",
      "filename": "gdb/xcoffread.c",
      "status": "modified",
      "additions": 2,
      "deletions": 2,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/xcoffread.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/69b037c30cadea06c3dc7f83e427d0f729c201cd/gdb/xcoffread.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/xcoffread.c?ref=69b037c30cadea06c3dc7f83e427d0f729c201cd",
      "patch": "@@ -1821,7 +1821,7 @@ find_linenos (struct bfd *abfd, struct bfd_section *asect, void *vpinfo)\n }\n \f\n static void\n-xcoff_psymtab_to_symtab_1 (legacy_psymtab *pst, struct objfile *objfile)\n+xcoff_expand_psymtab (legacy_psymtab *pst, struct objfile *objfile)\n {\n   gdb_assert (!pst->readin);\n \n@@ -1974,7 +1974,7 @@ xcoff_start_psymtab (struct objfile *objfile,\n     XOBNEW (&objfile->objfile_obstack, struct symloc);\n   ((struct symloc *) result->read_symtab_private)->first_symnum = first_symnum;\n   result->legacy_read_symtab = xcoff_read_symtab;\n-  result->legacy_expand_psymtab = xcoff_psymtab_to_symtab_1;\n+  result->legacy_expand_psymtab = xcoff_expand_psymtab;\n \n   /* Deduce the source language from the filename for this psymtab.  */\n   psymtab_language = deduce_language_from_filename (filename);"
    }
  ]
}