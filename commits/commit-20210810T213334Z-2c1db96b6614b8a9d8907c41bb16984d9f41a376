{
  "sha": "2c1db96b6614b8a9d8907c41bb16984d9f41a376",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6MmMxZGI5NmI2NjE0YjhhOWQ4OTA3YzQxYmIxNjk4NGQ5ZjQxYTM3Ng==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-08-08T15:36:12Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2021-08-10T21:33:34Z"
    },
    "message": "Ignore .debug_types when reading .debug_aranges\n\nI noticed that the fission-reread.exp test case can cause a complaint\nwhen run with --target_board=cc-with-debug-names:\n\nwarning: Section .debug_aranges in [...]/fission-reread has duplicate debug_info_offset 0x0, ignoring .debug_aranges.\n\nThe bug here is that this executable has both .debug_info and\n.debug_types, and both have a CU at offset 0x0.  This triggers the\nduplicate warning.\n\nBecause .debug_types doesn't provide any address ranges, these CUs can\nbe ignored.  That is, this bug turns out to be another regression from\nthe info/types merger patch.\n\nThis patch fixes the problem by having this loop igore type units.\nfission-reread.exp is updated to test for the bug.",
    "tree": {
      "sha": "4240a33b29125cfc45b991245db8c5c4263c5ab4",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/4240a33b29125cfc45b991245db8c5c4263c5ab4"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/2c1db96b6614b8a9d8907c41bb16984d9f41a376",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2c1db96b6614b8a9d8907c41bb16984d9f41a376",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/2c1db96b6614b8a9d8907c41bb16984d9f41a376",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/2c1db96b6614b8a9d8907c41bb16984d9f41a376/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "192786c72a36388dcf99e21b0335eca0977f3435",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/192786c72a36388dcf99e21b0335eca0977f3435",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/192786c72a36388dcf99e21b0335eca0977f3435"
    }
  ],
  "stats": {
    "total": 9,
    "additions": 8,
    "deletions": 1
  },
  "files": [
    {
      "sha": "2e85deeaa39d4377e0cd8a6fd8033c1f8e069b73",
      "filename": "gdb/dwarf2/read.c",
      "status": "modified",
      "additions": 6,
      "deletions": 0,
      "changes": 6,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2c1db96b6614b8a9d8907c41bb16984d9f41a376/gdb/dwarf2/read.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2c1db96b6614b8a9d8907c41bb16984d9f41a376/gdb/dwarf2/read.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/dwarf2/read.c?ref=2c1db96b6614b8a9d8907c41bb16984d9f41a376",
      "patch": "@@ -2536,6 +2536,12 @@ create_addrmap_from_aranges (dwarf2_per_objfile *per_objfile,\n     debug_info_offset_to_per_cu;\n   for (const auto &per_cu : per_bfd->all_comp_units)\n     {\n+      /* A TU will not need aranges, and skipping them here is an easy\n+\t way of ignoring .debug_types -- and possibly seeing a\n+\t duplicate section offset -- entirely.  */\n+      if (per_cu->is_debug_types)\n+\tcontinue;\n+\n       const auto insertpair\n \t= debug_info_offset_to_per_cu.emplace (per_cu->sect_off,\n \t\t\t\t\t       per_cu.get ());"
    },
    {
      "sha": "661e90b2f2122be2925bee75d5c50d57419d9657",
      "filename": "gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 1,
      "changes": 3,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/2c1db96b6614b8a9d8907c41bb16984d9f41a376/gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/2c1db96b6614b8a9d8907c41bb16984d9f41a376/gdb/testsuite/gdb.dwarf2/fission-reread.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.dwarf2/fission-reread.exp?ref=2c1db96b6614b8a9d8907c41bb16984d9f41a376",
      "patch": "@@ -47,7 +47,8 @@ if [build_executable_and_dwo_files \"$testfile.exp\" \"${binfile}\" $options \\\n     return -1\n }\n \n-clean_restart $binfile\n+clean_restart\n+gdb_load_no_complaints $binfile\n \n gdb_test \"break -q main\" \"Breakpoint.*at.*\"\n "
    }
  ]
}