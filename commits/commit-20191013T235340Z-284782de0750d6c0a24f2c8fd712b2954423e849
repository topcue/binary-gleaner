{
  "sha": "284782de0750d6c0a24f2c8fd712b2954423e849",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6Mjg0NzgyZGUwNzUwZDZjMGEyNGYyYzhmZDcxMmIyOTU0NDIzZTg0OQ==",
  "commit": {
    "author": {
      "name": "Simon Marchi",
      "email": "simon.marchi@efficios.com",
      "date": "2019-10-11T19:36:49Z"
    },
    "committer": {
      "name": "Simon Marchi",
      "email": "simon.marchi@polymtl.ca",
      "date": "2019-10-13T23:53:40Z"
    },
    "message": "gdb: Silence -Wformat-nonliteral warning with clang\n\nWe get this warning when building with clang:\n\n      CXX    ui-out.o\n    /home/smarchi/src/binutils-gdb/gdb/ui-out.c:590:22: error: format string is not a string literal [-Werror,-Wformat-nonliteral]\n      do_message (style, format, args);\n                         ^~~~~~\n\nThis can be considered a legitimate warning, as call_do_message's format\nparameter is not marked as a format string.  Therefore, we should\nnormally mark the call_do_message method with the `format` attribute.\nHowever, doing so just moves (and multiplies) the problem, as all the\nuses of call_do_message in the vmessage method now warn.  If we wanted\nto continue on that path, we should silence the warning for each of\nthem, as a way of telling the compiler \"it's ok, we know what we are\ndoing\".\n\nBut since call_do_message is really just vmessage's little helper, it's\nsimpler to just silence the warning at that single point.\n\ngdb/ChangeLog:\n\n\t* ui-out.c (ui_out::call_do_message): Silence\n\t-Wformat-nonliteral warning.\n\nChange-Id: I58ad41793448f38835c5d6ba7b9e5c4dd8df260f",
    "tree": {
      "sha": "1e0ae7adf6a41c1e9f93950db89d2694a8ab2ae2",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/1e0ae7adf6a41c1e9f93950db89d2694a8ab2ae2"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/284782de0750d6c0a24f2c8fd712b2954423e849",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/284782de0750d6c0a24f2c8fd712b2954423e849",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/284782de0750d6c0a24f2c8fd712b2954423e849",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/284782de0750d6c0a24f2c8fd712b2954423e849/comments",
  "author": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "simark",
    "id": 1758287,
    "node_id": "MDQ6VXNlcjE3NTgyODc=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1758287?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/simark",
    "html_url": "https://github.com/simark",
    "followers_url": "https://api.github.com/users/simark/followers",
    "following_url": "https://api.github.com/users/simark/following{/other_user}",
    "gists_url": "https://api.github.com/users/simark/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/simark/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/simark/subscriptions",
    "organizations_url": "https://api.github.com/users/simark/orgs",
    "repos_url": "https://api.github.com/users/simark/repos",
    "events_url": "https://api.github.com/users/simark/events{/privacy}",
    "received_events_url": "https://api.github.com/users/simark/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "d039f01465b37026e538b06ff792aadc4b19bf24",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/d039f01465b37026e538b06ff792aadc4b19bf24",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/d039f01465b37026e538b06ff792aadc4b19bf24"
    }
  ],
  "stats": {
    "total": 14,
    "additions": 14,
    "deletions": 0
  },
  "files": [
    {
      "sha": "bcedf0244828d5d7516a2f51a8db205b097738aa",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/284782de0750d6c0a24f2c8fd712b2954423e849/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/284782de0750d6c0a24f2c8fd712b2954423e849/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=284782de0750d6c0a24f2c8fd712b2954423e849",
      "patch": "@@ -1,3 +1,8 @@\n+2019-10-13  Simon Marchi  <simon.marchi@polymtl.ca>\n+\n+\t* ui-out.c (ui_out::call_do_message): Silence\n+\t-Wformat-nonliteral warning.\n+\n 2019-10-12  Simon Marchi  <simon.marchi@polymtl.ca>\n \n \t* breakpoint.c: Remove some includes: continuations.h, skip.h,"
    },
    {
      "sha": "6b0b5acd3e1376cc3bfdbea357ae360074b58206",
      "filename": "gdb/ui-out.c",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/284782de0750d6c0a24f2c8fd712b2954423e849/gdb/ui-out.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/284782de0750d6c0a24f2c8fd712b2954423e849/gdb/ui-out.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ui-out.c?ref=284782de0750d6c0a24f2c8fd712b2954423e849",
      "patch": "@@ -26,6 +26,7 @@\n #include \"ui-out.h\"\n #include \"gdbsupport/format.h\"\n #include \"cli/cli-style.h\"\n+#include \"diagnostics.h\"\n \n #include <vector>\n #include <memory>\n@@ -587,7 +588,15 @@ ui_out::call_do_message (const ui_file_style &style, const char *format,\n   va_list args;\n \n   va_start (args, format);\n+\n+  /* Since call_do_message is only used as a helper of vmessage, silence the\n+     warning here once instead of at all call sites in vmessage, if we were\n+     to put a \"format\" attribute on call_do_message.  */\n+  DIAGNOSTIC_PUSH\n+  DIAGNOSTIC_IGNORE_FORMAT_NONLITERAL\n   do_message (style, format, args);\n+  DIAGNOSTIC_POP\n+\n   va_end (args);\n }\n "
    }
  ]
}