{
  "sha": "6a81c59be7561dd36b35dafdd65e499f03977232",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NmE4MWM1OWJlNzU2MWRkMzZiMzVkYWZkZDY1ZTQ5OWYwMzk3NzIzMg==",
  "commit": {
    "author": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-27T23:58:03Z"
    },
    "committer": {
      "name": "Alan Modra",
      "email": "amodra@gmail.com",
      "date": "2020-03-28T00:53:45Z"
    },
    "message": "Adjust objcopy_test\n\nxfails spu due to a note section getting a different vma, and some\nmips targets that give section symbols a name string.  I added -p\nfor the executable test in an attempt to fix all the pe target fails,\nbut that doesn't preserve the date/time for some reason.\n\n\t* testsuite/binutils-all/objcopy.exp (objcopy_test): Move xfails\n\tfrom here to calls.  Remove \"m8*-*-*\" entry.  Don't xfail tic54x\n\tbut do xfail spu, mipstx39 and mips-sgi-irix for the executable\n\ttest.  Pass \"-p\" to objcopy for the executable test.",
    "tree": {
      "sha": "6ec5700de615db0bc8571fbdb4487bfa3fc2f557",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/6ec5700de615db0bc8571fbdb4487bfa3fc2f557"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/6a81c59be7561dd36b35dafdd65e499f03977232",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6a81c59be7561dd36b35dafdd65e499f03977232",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/6a81c59be7561dd36b35dafdd65e499f03977232",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/6a81c59be7561dd36b35dafdd65e499f03977232/comments",
  "author": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "amodra",
    "id": 6006325,
    "node_id": "MDQ6VXNlcjYwMDYzMjU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/6006325?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/amodra",
    "html_url": "https://github.com/amodra",
    "followers_url": "https://api.github.com/users/amodra/followers",
    "following_url": "https://api.github.com/users/amodra/following{/other_user}",
    "gists_url": "https://api.github.com/users/amodra/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/amodra/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/amodra/subscriptions",
    "organizations_url": "https://api.github.com/users/amodra/orgs",
    "repos_url": "https://api.github.com/users/amodra/repos",
    "events_url": "https://api.github.com/users/amodra/events{/privacy}",
    "received_events_url": "https://api.github.com/users/amodra/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "8f4afc71128db5f0c5bd93996d210fc3d13b5ee8",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/8f4afc71128db5f0c5bd93996d210fc3d13b5ee8",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/8f4afc71128db5f0c5bd93996d210fc3d13b5ee8"
    }
  ],
  "stats": {
    "total": 42,
    "additions": 28,
    "deletions": 14
  },
  "files": [
    {
      "sha": "cb8836c697e95821df2e2f425b7773b788b2ba8e",
      "filename": "binutils/ChangeLog",
      "status": "modified",
      "additions": 7,
      "deletions": 0,
      "changes": 7,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a81c59be7561dd36b35dafdd65e499f03977232/binutils/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a81c59be7561dd36b35dafdd65e499f03977232/binutils/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/ChangeLog?ref=6a81c59be7561dd36b35dafdd65e499f03977232",
      "patch": "@@ -1,3 +1,10 @@\n+2020-03-28  Alan Modra  <amodra@gmail.com>\n+\n+\t* testsuite/binutils-all/objcopy.exp (objcopy_test): Move xfails\n+\tfrom here to calls.  Remove \"m8*-*-*\" entry.  Don't xfail tic54x\n+\tbut do xfail spu, mipstx39 and mips-sgi-irix for the executable\n+\ttest.  Pass \"-p\" to objcopy for the executable test.\n+\n 2020-03-27  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n \n \tPR binutils/25662"
    },
    {
      "sha": "0eafcdbede165bae177092aa735203e89a6c64cc",
      "filename": "binutils/testsuite/binutils-all/objcopy.exp",
      "status": "modified",
      "additions": 21,
      "deletions": 14,
      "changes": 35,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/6a81c59be7561dd36b35dafdd65e499f03977232/binutils/testsuite/binutils-all/objcopy.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/6a81c59be7561dd36b35dafdd65e499f03977232/binutils/testsuite/binutils-all/objcopy.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/binutils/testsuite/binutils-all/objcopy.exp?ref=6a81c59be7561dd36b35dafdd65e499f03977232",
      "patch": "@@ -59,13 +59,15 @@ proc objcopy_test {testname srcfile type asflags ldflags} {\n \treturn\n     }\n \n+    set xflags \"\"\n     if { $type == \"executable\" } {\n \tglobal LD\n \t# Check that LD exists\n \tif {[which $LD] == 0} then {\n \t    untested \"objcopy $type ($testname)\"\n \t    return\n \t}\n+\n \t# Use tempfile and copyfile without the .o extension for executable files\n \tset t_tempfile [string range $tempfile 0 end-2]\n \tset t_copyfile $copyfile\n@@ -74,9 +76,10 @@ proc objcopy_test {testname srcfile type asflags ldflags} {\n \t    unresolved \"objcopy $type ($testname)\"\n \t    return\n \t}\n+\tset xflags \"-p\"\n     }\n \n-    set got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS $t_tempfile $t_copyfile\"]\n+    set got [binutils_run $OBJCOPY \"$OBJCOPYFLAGS $xflags $t_tempfile $t_copyfile\"]\n \n     if ![string equal \"\" $got] then {\n \tfail \"objcopy $type ($testname)\"\n@@ -96,19 +99,6 @@ proc objcopy_test {testname srcfile type asflags ldflags} {\n \tset exec_output [lindex $status 1]\n \tset exec_output [prune_warnings $exec_output]\n \n-\t# On some systems the result of objcopy will not be identical.\n-\t# Usually this is just because gas isn't using bfd to write the\n-\t# files in the first place, and may order things a little\n-\t# differently. Those systems should use setup_xfail here.\n-\n-\tsetup_xfail \"hppa*-*-*\"\n-\tsetup_xfail \"m8*-*\"\n-\tsetup_xfail \"sh-*-coff*\"\n-\tsetup_xfail \"tic54x-*-*\"\n-\n-\tclear_xfail \"hppa*64*-*-hpux*\" \"hppa*-*-linux*\" \"hppa*-*-lites*\"\n-\tclear_xfail \"hppa*-*-*n*bsd*\" \"hppa*-*-rtems*\" \"*-*-*elf*\"\n-\n \tif [string equal \"\" $exec_output] then {\n \t    pass \"objcopy $type ($testname)\"\n \t} else {\n@@ -123,6 +113,11 @@ proc objcopy_test {testname srcfile type asflags ldflags} {\n     }\n }\n \n+setup_xfail \"hppa*-*-*\"\n+setup_xfail \"sh-*-coff*\"\n+setup_xfail \"tic54x-*-*\"\n+clear_xfail \"hppa*64*-*-hpux*\" \"hppa*-*-linux*\" \"hppa*-*-lites*\"\n+clear_xfail \"hppa*-*-*n*bsd*\" \"hppa*-*-rtems*\" \"*-*-*elf*\"\n objcopy_test \"simple copy\" bintest.s object \"\" \"\"\n \n # Test verilog data width\n@@ -1112,7 +1107,14 @@ set elf64 \"\"\n if [is_elf_format] {\n     objcopy_test_symbol_manipulation\n     objcopy_test_elf_common_symbols\n+\n+    setup_xfail \"hppa*-*-*\"\n+    setup_xfail \"sh-*-coff*\"\n+    setup_xfail \"tic54x-*-*\"\n+    clear_xfail \"hppa*64*-*-hpux*\" \"hppa*-*-linux*\" \"hppa*-*-lites*\"\n+    clear_xfail \"hppa*-*-*n*bsd*\" \"hppa*-*-rtems*\" \"*-*-*elf*\"\n     objcopy_test \"ELF unknown section type\" unknown.s object \"\" \"\"\n+\n     objcopy_test_readelf \"ELF group 1\" group.s\n     objcopy_test_readelf \"ELF group 2\" group-2.s\n     objcopy_test_readelf \"ELF group 3\" group-3.s\n@@ -1341,4 +1343,9 @@ run_dump_test \"pr23633\"\n \n run_dump_test \"set-section-alignment\"\n \n+setup_xfail \"hppa*-*-*\"\n+setup_xfail \"sh-*-coff*\"\n+setup_xfail \"mips-*-irix\" \"mipstx39-*-*\" \"spu-*-*\"\n+clear_xfail \"hppa*64*-*-hpux*\" \"hppa*-*-linux*\" \"hppa*-*-lites*\"\n+clear_xfail \"hppa*-*-*n*bsd*\" \"hppa*-*-rtems*\" \"*-*-*elf*\"\n objcopy_test \"pr25662\" pr25662.s executable \"\" \"-T$srcdir/$subdir/pr25662.ld\""
    }
  ]
}