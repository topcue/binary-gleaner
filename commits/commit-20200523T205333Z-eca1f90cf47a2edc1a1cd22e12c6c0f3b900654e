{
  "sha": "eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6ZWNhMWY5MGNmNDdhMmVkYzFhMWNkMjJlMTJjNmMwZjNiOTAwNjU0ZQ==",
  "commit": {
    "author": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-05-23T15:23:09Z"
    },
    "committer": {
      "name": "Tom Tromey",
      "email": "tom@tromey.com",
      "date": "2020-05-23T20:53:33Z"
    },
    "message": "Add completion styling\n\nReadline has a styling feature for completion -- if it is enabled, the\ncommon prefix of completions will be displayed in a different style.\nThis doesn't work in gdb, because gdb implements its own completer.\n\nThis patch implements the feature.  However, it doesn't directly use\nthe Readline feature, because gdb can do a bit better: it can let the\nuser control the styling using the existing mechanisms.\n\nThis version incorporates an Emacs idea, via Eli: style the prefix,\nthe \"difference character\", and the suffix differently.\n\ngdb/ChangeLog\n2020-05-23  Tom Tromey  <tom@tromey.com>\n\n\t* NEWS: Add entry for completion styling.\n\t* completer.c (_rl_completion_prefix_display_length): Move\n\tdeclaration earlier.\n\t(gdb_fnprint): Use completion_style.\n\t(gdb_display_match_list_1): Likewise.\n\t* cli/cli-style.c (completion_prefix_style)\n\t(completion_difference_style, completion_suffix_style): New\n\tglobals.\n\t(_initialize_cli_style): Register new globals.\n\t* cli/cli-style.h (completion_prefix_style)\n\t(completion_difference_style, completion_suffix_style): Declare.\n\ngdb/doc/ChangeLog\n2020-05-23  Tom Tromey  <tom@tromey.com>\n\n\t* gdb.texinfo (Output Styling): Mention completion styling.\n\t(Editing): Mention readline completion styling.\n\ngdb/testsuite/ChangeLog\n2020-05-23  Tom Tromey  <tom@tromey.com>\n\n\t* gdb.base/style.exp: Add completion styling test.\n\t* lib/gdb-utils.exp (style): Add completion styles.",
    "tree": {
      "sha": "78a5fffcd39bab954df305868e98f774c749f01e",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/78a5fffcd39bab954df305868e98f774c749f01e"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/comments",
  "author": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "tromey",
    "id": 1557670,
    "node_id": "MDQ6VXNlcjE1NTc2NzA=",
    "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/tromey",
    "html_url": "https://github.com/tromey",
    "followers_url": "https://api.github.com/users/tromey/followers",
    "following_url": "https://api.github.com/users/tromey/following{/other_user}",
    "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/tromey/subscriptions",
    "organizations_url": "https://api.github.com/users/tromey/orgs",
    "repos_url": "https://api.github.com/users/tromey/repos",
    "events_url": "https://api.github.com/users/tromey/events{/privacy}",
    "received_events_url": "https://api.github.com/users/tromey/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "51e2cfa2dc2dd600727c91701c747c28fa67a5df",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/51e2cfa2dc2dd600727c91701c747c28fa67a5df",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/51e2cfa2dc2dd600727c91701c747c28fa67a5df"
    }
  ],
  "stats": {
    "total": 179,
    "additions": 172,
    "deletions": 7
  },
  "files": [
    {
      "sha": "90ea643889c8efd969bba8452e391d42a4775b6a",
      "filename": "gdb/ChangeLog",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/ChangeLog?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -1,3 +1,17 @@\n+2020-05-23  Tom Tromey  <tom@tromey.com>\n+\n+\t* NEWS: Add entry for completion styling.\n+\t* completer.c (_rl_completion_prefix_display_length): Move\n+\tdeclaration earlier.\n+\t(gdb_fnprint): Use completion_style.\n+\t(gdb_display_match_list_1): Likewise.\n+\t* cli/cli-style.c (completion_prefix_style)\n+\t(completion_difference_style, completion_suffix_style): New\n+\tglobals.\n+\t(_initialize_cli_style): Register new globals.\n+\t* cli/cli-style.h (completion_prefix_style)\n+\t(completion_difference_style, completion_suffix_style): Declare.\n+\n 2020-05-23  Pedro Alves  <palves@redhat.com>\n \n \t* utils.c: Include \"gdbsupport/gdb-safe-ctype.h\"."
    },
    {
      "sha": "23a4ed7294eebc1831b919f2d538c2d45d39372c",
      "filename": "gdb/NEWS",
      "status": "modified",
      "additions": 11,
      "deletions": 0,
      "changes": 11,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/NEWS",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/NEWS",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/NEWS?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -62,6 +62,17 @@ show exec-file-mismatch -- Show exec-file-mismatch handling (ask|warn|off).\n   executable file; if 'warn', just display a warning; if 'off', don't\n   attempt to detect a mismatch.\n \n+set style completion-prefix foreground COLOR\n+set style completion-prefix background COLOR\n+set style completion-prefix intensity VALUE\n+set style completion-difference foreground COLOR\n+set style completion-difference background COLOR\n+set style completion-difference intensity VALUE\n+set style completion-suffix foreground COLOR\n+set style completion-suffix background COLOR\n+set style completion-suffix intensity VALUE\n+  Control the styling of completions.\n+\n tui new-layout NAME WINDOW WEIGHT [WINDOW WEIGHT]...\n   Define a new TUI layout, specifying its name and the windows that\n   will be displayed."
    },
    {
      "sha": "b16b800d1525997cd594b14be4842084160636cf",
      "filename": "gdb/cli/cli-style.c",
      "status": "modified",
      "additions": 42,
      "deletions": 0,
      "changes": 42,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/cli/cli-style.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/cli/cli-style.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-style.c?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -98,6 +98,21 @@ cli_style_option metadata_style (\"metadata\", ui_file_style::DIM);\n \n /* See cli-style.h.  */\n \n+cli_style_option completion_prefix_style (\"completion-prefix\",\n+\t\t\t\t\t  ui_file_style::DIM);\n+\n+/* See cli-style.h.  */\n+\n+cli_style_option completion_difference_style (\"completion-difference\",\n+\t\t\t\t\t      ui_file_style::MAGENTA);\n+\n+/* See cli-style.h.  */\n+\n+cli_style_option completion_suffix_style (\"completion-suffix\",\n+\t\t\t\t\t  ui_file_style::NONE);\n+\n+/* See cli-style.h.  */\n+\n cli_style_option::cli_style_option (const char *name,\n \t\t\t\t    ui_file_style::basic_color fg)\n   : changed (name),\n@@ -366,6 +381,33 @@ your data, for example \\\"<unavailable>\\\"\"),\n \t\t\t\t       &style_set_list, &style_show_list,\n \t\t\t\t       false);\n \n+  completion_prefix_style.add_setshow_commands (no_class, _(\"\\\n+Completion prefix display styling.\\n\\\n+Configure completion prefix colors and display intensity\\n\\\n+The \\\"completion-prefix\\\" style is used when GDB displays the shared\\n\\\n+prefix common to the possible completions.\"),\n+\t\t\t\t\t\t&style_set_list,\n+\t\t\t\t\t\t&style_show_list,\n+\t\t\t\t\t\tfalse);\n+\n+  completion_difference_style.add_setshow_commands (no_class, _(\"\\\n+Completion difference display styling.\\n\\\n+Configure completion difference colors and display intensity\\n\\\n+The \\\"completion-difference\\\" style is used when GDB displays the\\n\\\n+character that differs between the possible completions.\"),\n+\t\t\t\t\t\t&style_set_list,\n+\t\t\t\t\t\t&style_show_list,\n+\t\t\t\t\t\tfalse);\n+\n+  completion_suffix_style.add_setshow_commands (no_class, _(\"\\\n+Completion suffix display styling.\\n\\\n+Configure completion suffix colors and display intensity\\n\\\n+The \\\"completion-suffix\\\" style is used when GDB displays the suffix\\n\\\n+of the possible completions.\"),\n+\t\t\t\t\t\t&style_set_list,\n+\t\t\t\t\t\t&style_show_list,\n+\t\t\t\t\t\tfalse);\n+\n   tui_border_style.add_setshow_commands (no_class, _(\"\\\n TUI border display styling.\\n\\\n Configure TUI border colors\\n\\"
    },
    {
      "sha": "c2e0df1b33706f13e358a030bcb6306e63c0e94f",
      "filename": "gdb/cli/cli-style.h",
      "status": "modified",
      "additions": 9,
      "deletions": 0,
      "changes": 9,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/cli/cli-style.h",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/cli/cli-style.h",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/cli/cli-style.h?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -124,6 +124,15 @@ extern cli_style_option tui_border_style;\n /* The border style of a TUI window that does have the focus.  */\n extern cli_style_option tui_active_border_style;\n \n+/* The style for the common prefix of completions.  */\n+extern cli_style_option completion_prefix_style;\n+\n+/* The style for the difference character of completions.  */\n+extern cli_style_option completion_difference_style;\n+\n+/* The style for the suffix of completions.  */\n+extern cli_style_option completion_suffix_style;\n+\n /* True if source styling is enabled.  */\n extern bool source_styling;\n "
    },
    {
      "sha": "bc0501abf0a79f8b96a5f7faef782ff67af16f8e",
      "filename": "gdb/completer.c",
      "status": "modified",
      "additions": 50,
      "deletions": 7,
      "changes": 57,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/completer.c",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/completer.c",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/completer.c?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -31,6 +31,7 @@\n #include <algorithm>\n #include \"linespec.h\"\n #include \"cli/cli-decode.h\"\n+#include \"cli/cli-style.h\"\n \n /* FIXME: This is needed because of lookup_cmd_1 ().  We should be\n    calling a hook instead so we eliminate the CLI dependency.  */\n@@ -2714,6 +2715,8 @@ gdb_fnwidth (const char *string)\n   return width;\n }\n \n+extern int _rl_completion_prefix_display_length;\n+\n /* Print TO_PRINT, one matching completion.\n    PREFIX_BYTES is number of common prefix bytes.\n    Based on readline/complete.c:fnprint.  */\n@@ -2722,7 +2725,7 @@ static int\n gdb_fnprint (const char *to_print, int prefix_bytes,\n \t     const struct match_list_displayer *displayer)\n {\n-  int printed_len, w;\n+  int common_prefix_len, printed_len, w;\n   const char *s;\n #if defined (HANDLE_MULTIBYTE)\n   mbstate_t ps;\n@@ -2735,14 +2738,18 @@ gdb_fnprint (const char *to_print, int prefix_bytes,\n   memset (&ps, 0, sizeof (mbstate_t));\n #endif\n \n-  printed_len = 0;\n+  printed_len = common_prefix_len = 0;\n \n   /* Don't print only the ellipsis if the common prefix is one of the\n      possible completions */\n   if (to_print[prefix_bytes] == '\\0')\n     prefix_bytes = 0;\n \n-  if (prefix_bytes)\n+  ui_file_style style = completion_prefix_style.style ();\n+  if (!style.is_default ())\n+    displayer->puts (displayer, style.to_ansi ().c_str ());\n+\n+  if (prefix_bytes && _rl_completion_prefix_display_length > 0)\n     {\n       char ellipsis;\n \n@@ -2751,6 +2758,16 @@ gdb_fnprint (const char *to_print, int prefix_bytes,\n \tdisplayer->putch (displayer, ellipsis);\n       printed_len = ELLIPSIS_LEN;\n     }\n+  else if (prefix_bytes && !style.is_default ())\n+    {\n+      common_prefix_len = prefix_bytes;\n+      prefix_bytes = 0;\n+    }\n+\n+  /* There are 3 states: the initial state (#0), when we use the\n+     prefix style; the difference state (#1), which lasts a single\n+     character; and then the suffix state (#2).  */\n+  int state = 0;\n \n   s = to_print + prefix_bytes;\n   while (*s)\n@@ -2802,8 +2819,31 @@ gdb_fnprint (const char *to_print, int prefix_bytes,\n \t  printed_len++;\n #endif\n \t}\n+      if (common_prefix_len > 0 && (s - to_print) >= common_prefix_len)\n+\t{\n+\t  if (!style.is_default ())\n+\t    displayer->puts (displayer, ui_file_style ().to_ansi ().c_str ());\n+\n+\t  ++state;\n+\t  if (state == 1)\n+\t    {\n+\t      common_prefix_len = 1;\n+\t      style = completion_difference_style.style ();\n+\t    }\n+\t  else\n+\t    {\n+\t      common_prefix_len = 0;\n+\t      style = completion_suffix_style.style ();\n+\t    }\n+\n+\t  if (!style.is_default ())\n+\t    displayer->puts (displayer, style.to_ansi ().c_str ());\n+\t}\n     }\n \n+  if (!style.is_default ())\n+    displayer->puts (displayer, ui_file_style ().to_ansi ().c_str ());\n+\n   return printed_len;\n }\n \n@@ -2912,7 +2952,6 @@ gdb_complete_get_screenwidth (const struct match_list_displayer *displayer)\n   return displayer->width;\n }\n \n-extern int _rl_completion_prefix_display_length;\n extern int _rl_print_completions_horizontally;\n \n EXTERN_C int _rl_qsort_string_compare (const void *, const void *);\n@@ -2931,19 +2970,23 @@ gdb_display_match_list_1 (char **matches, int len, int max,\n   char *temp, *t;\n   int page_completions = displayer->height != INT_MAX && pagination_enabled;\n \n+  bool want_style = !completion_prefix_style.style ().is_default ();\n+\n   /* Find the length of the prefix common to all items: length as displayed\n      characters (common_length) and as a byte index into the matches (sind) */\n   common_length = sind = 0;\n-  if (_rl_completion_prefix_display_length > 0)\n+  if (_rl_completion_prefix_display_length > 0 || want_style)\n     {\n       t = gdb_printable_part (matches[0]);\n       temp = strrchr (t, '/');\n       common_length = temp ? gdb_fnwidth (temp) : gdb_fnwidth (t);\n       sind = temp ? strlen (temp) : strlen (t);\n \n-      if (common_length > _rl_completion_prefix_display_length && common_length > ELLIPSIS_LEN)\n+      if (_rl_completion_prefix_display_length > 0\n+\t  && common_length > _rl_completion_prefix_display_length\n+\t  && common_length > ELLIPSIS_LEN)\n \tmax -= common_length - ELLIPSIS_LEN;\n-      else\n+      else if (!want_style || common_length > max || sind > max)\n \tcommon_length = sind = 0;\n     }\n "
    },
    {
      "sha": "8a86047b45dcedea1b4c8e1fe0807942ff01e036",
      "filename": "gdb/doc/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/doc/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/doc/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/ChangeLog?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -1,3 +1,8 @@\n+2020-05-23  Tom Tromey  <tom@tromey.com>\n+\n+\t* gdb.texinfo (Output Styling): Mention completion styling.\n+\t(Editing): Mention readline completion styling.\n+\n 2020-05-19  Pedro Alves  <palves@redhat.com>\n \n \t* gdb.texinfo (Attach): Update exec-file-mismatch description to"
    },
    {
      "sha": "10d4173a723bb430775092ea775290970ec2f24c",
      "filename": "gdb/doc/gdb.texinfo",
      "status": "modified",
      "additions": 20,
      "deletions": 0,
      "changes": 20,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/doc/gdb.texinfo",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/doc/gdb.texinfo",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/doc/gdb.texinfo?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -25271,6 +25271,10 @@ This command accepts the current line for execution and fetches the\n next line relative to the current line from the history for editing.\n Any argument is ignored.\n \n+Note that @value{GDBN} ignores the Readline\n+@code{colored-completion-prefix} setting.  Instead, this is handled\n+using the style settings (@xref{Output Styling}).\n+\n @node Command History\n @section Command History\n @cindex command history\n@@ -25604,6 +25608,22 @@ general styling to @value{GDBN}.  @xref{TUI Configuration}.\n Control the styling of the active TUI border; that is, the TUI window\n that has the focus.\n \n+@item completion-prefix\n+Control the styling of the completion prefix.  When completing, the\n+common prefix of completion candidates will be shown with this style.\n+By default, this style's intensity is dim.\n+\n+@item completion-difference\n+Control the styling of the completion difference character.  When\n+completing, the character that differs between different completions\n+will be shown using this style.  By default, this style's foreground\n+color is magenta.\n+\n+@item completion-suffix\n+Control the styling of the completion suffix.  When completing, the\n+suffix of completion candidates will be shown with this style.  By\n+default, this style is the same as the default styling.\n+\n @end table\n \n @node Numbers"
    },
    {
      "sha": "33fad924870b98129f33a865a2181df800e45e40",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 5,
      "deletions": 0,
      "changes": 5,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -1,3 +1,8 @@\n+2020-05-23  Tom Tromey  <tom@tromey.com>\n+\n+\t* gdb.base/style.exp: Add completion styling test.\n+\t* lib/gdb-utils.exp (style): Add completion styles.\n+\n 2020-05-22  Andrew Burgess  <andrew.burgess@embecosm.com>\n \n \t* gdb.base/annota1.exp: Update expected results."
    },
    {
      "sha": "23a35403bbf416f5ec71733e3c7a6a78c0046f82",
      "filename": "gdb/testsuite/gdb.base/style.exp",
      "status": "modified",
      "additions": 14,
      "deletions": 0,
      "changes": 14,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/gdb.base/style.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/gdb.base/style.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/gdb.base/style.exp?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -167,4 +167,18 @@ save_vars { env(TERM) } {\n \t\"warning: [style .*? file] is not a directory\\\\..*\"\n     gdb_test \"show data-directory\" \\\n \t\"GDB's data directory is \\\"[style .*? file]\\\"\\\\..*\"\n+\n+    if {[readline_is_used]} {\n+\tset test \"complete print VALUE_\"\n+\t# ESC-? is the readline binding to show all completions.\n+\tsend_gdb \"print VALUE_\\x1b?\"\n+\tset pfx [style VALUE_ completion-prefix]\n+\tset d1 [style O completion-difference]\n+\tset d2 [style T completion-difference]\n+\tgdb_test_multiple \"\" $test {\n+\t    -re \"${pfx}${d1}NE\\[ \\t\\]+${pfx}${d2}WO.*$gdb_prompt print VALUE_$\" {\n+\t\tgdb_test \"ONE\" \" = .*\"\n+\t    }\n+\t}\n+    }\n }"
    },
    {
      "sha": "98bdd7206a441299d461268931df5e672f384e09",
      "filename": "gdb/testsuite/lib/gdb-utils.exp",
      "status": "modified",
      "additions": 2,
      "deletions": 0,
      "changes": 2,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/lib/gdb-utils.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e/gdb/testsuite/lib/gdb-utils.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/gdb-utils.exp?ref=eca1f90cf47a2edc1a1cd22e12c6c0f3b900654e",
      "patch": "@@ -55,6 +55,8 @@ proc style {str style} {\n \tvariable { set style 36 }\n \taddress { set style 34 }\n \tmetadata { set style 2 }\n+\tcompletion-prefix { set style 2 }\n+\tcompletion-difference { set style 35 }\n     }\n     return \"\\033\\\\\\[${style}m${str}\\033\\\\\\[m\"\n }"
    }
  ]
}