{
  "sha": "55c3ad8801359ecb166ff3c04c3bd14140f623a1",
  "node_id": "MDY6Q29tbWl0MTM4Njg2ODE6NTVjM2FkODgwMTM1OWVjYjE2NmZmM2MwNGMzYmQxNDE0MGY2MjNhMQ==",
  "commit": {
    "author": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-10-26T15:05:15Z"
    },
    "committer": {
      "name": "Tom de Vries",
      "email": "tdevries@suse.de",
      "date": "2020-10-26T15:05:15Z"
    },
    "message": "[gdb/testsuite] Prevent pagination in GDB_INTERNALFLAGS\n\nWhen running test-case gdb.base/corefile.exp with target board readnow, we run\ninto:\n...\nReading symbols from outputs/gdb.base/corefile/corefile...^M\nExpanding full symbols from outputs/gdb.base/corefile/corefile...^M\n[New LWP 2293]^M\nCore was generated by `outputs/gdb.base/corefile/co'.^M\nProgram terminated with signal SIGABRT, Aborted.^M\n--Type <RET> for more, q to quit, c to continue without paging--\\\n  FAIL: gdb.base/corefile.exp: (timeout) starting with -core\n...\n\nIn commit bd447abb24 \"Make gdb.base/corefile.exp work on terminals with few\nrows\", pagination (in the same test-case) is prevented using:\n...\nset stty_init \"rows 25 cols 80\"\n...\nbut this doesn't work in our case because using -readnow adds an extra line\n\"Expanding full symbols\".\n\nThe test passes when increasing rows to 26.  However, increasing the rows by\nsome n only fixes the problem for n lines, and things will break again if\nsomehow we end up with n + 1 lines.\n\nInstead, fix this by setting heigth and width in INTERNAL_GDBFLAGS.  This\nsolution was not chosen in commit bd447abb24 because it doesn't handle\npagination due to the introduction text.  But it does handle the pagination\ndue to the extra \"Expanding full symbols\", and any other line printed during\nand after file loading.\n\nTested on x86_64-linux, with and without readnow.\n\nWith -readnow, fixes timeout FAILs in gdb.base/corefile.exp and\ngdb.base/reread-readsym.exp.\n\ngdb/testsuite/ChangeLog:\n\n2020-10-26  Tom de Vries  <tdevries@suse.de>\n\n\t* lib/gdb.exp (INTERNAL_GDBFLAGS): Set heigth and width.",
    "tree": {
      "sha": "a6b98540e067618712389489ca256ced78ad7649",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/git/trees/a6b98540e067618712389489ca256ced78ad7649"
    },
    "url": "https://api.github.com/repos/bminor/binutils-gdb/git/commits/55c3ad8801359ecb166ff3c04c3bd14140f623a1",
    "comment_count": 0,
    "verification": {
      "verified": false,
      "reason": "unsigned",
      "signature": null,
      "payload": null
    }
  },
  "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55c3ad8801359ecb166ff3c04c3bd14140f623a1",
  "html_url": "https://github.com/bminor/binutils-gdb/commit/55c3ad8801359ecb166ff3c04c3bd14140f623a1",
  "comments_url": "https://api.github.com/repos/bminor/binutils-gdb/commits/55c3ad8801359ecb166ff3c04c3bd14140f623a1/comments",
  "author": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "committer": {
    "login": "vries",
    "id": 4057235,
    "node_id": "MDQ6VXNlcjQwNTcyMzU=",
    "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/vries",
    "html_url": "https://github.com/vries",
    "followers_url": "https://api.github.com/users/vries/followers",
    "following_url": "https://api.github.com/users/vries/following{/other_user}",
    "gists_url": "https://api.github.com/users/vries/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/vries/subscriptions",
    "organizations_url": "https://api.github.com/users/vries/orgs",
    "repos_url": "https://api.github.com/users/vries/repos",
    "events_url": "https://api.github.com/users/vries/events{/privacy}",
    "received_events_url": "https://api.github.com/users/vries/received_events",
    "type": "User",
    "site_admin": false
  },
  "parents": [
    {
      "sha": "ae9d2233e61a98ff8dba56be10219aa5306ffc9a",
      "url": "https://api.github.com/repos/bminor/binutils-gdb/commits/ae9d2233e61a98ff8dba56be10219aa5306ffc9a",
      "html_url": "https://github.com/bminor/binutils-gdb/commit/ae9d2233e61a98ff8dba56be10219aa5306ffc9a"
    }
  ],
  "stats": {
    "total": 12,
    "additions": 11,
    "deletions": 1
  },
  "files": [
    {
      "sha": "11b0f5bf2dbbb4eb411ead4e744c169b9154ba21",
      "filename": "gdb/testsuite/ChangeLog",
      "status": "modified",
      "additions": 4,
      "deletions": 0,
      "changes": 4,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55c3ad8801359ecb166ff3c04c3bd14140f623a1/gdb/testsuite/ChangeLog",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55c3ad8801359ecb166ff3c04c3bd14140f623a1/gdb/testsuite/ChangeLog",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/ChangeLog?ref=55c3ad8801359ecb166ff3c04c3bd14140f623a1",
      "patch": "@@ -1,3 +1,7 @@\n+2020-10-26  Tom de Vries  <tdevries@suse.de>\n+\n+\t* lib/gdb.exp (INTERNAL_GDBFLAGS): Set heigth and width.\n+\n 2020-10-26  Tom de Vries  <tdevries@suse.de>\n \n \t* gdb.dwarf2/dw2-objfile-overlap-inner.S: Specify default base address"
    },
    {
      "sha": "197542eec3ba4864dbcbffcdc7b1ff9153895c27",
      "filename": "gdb/testsuite/lib/gdb.exp",
      "status": "modified",
      "additions": 7,
      "deletions": 1,
      "changes": 8,
      "blob_url": "https://github.com/bminor/binutils-gdb/blob/55c3ad8801359ecb166ff3c04c3bd14140f623a1/gdb/testsuite/lib/gdb.exp",
      "raw_url": "https://github.com/bminor/binutils-gdb/raw/55c3ad8801359ecb166ff3c04c3bd14140f623a1/gdb/testsuite/lib/gdb.exp",
      "contents_url": "https://api.github.com/repos/bminor/binutils-gdb/contents/gdb/testsuite/lib/gdb.exp?ref=55c3ad8801359ecb166ff3c04c3bd14140f623a1",
      "patch": "@@ -124,7 +124,13 @@ set BUILD_DATA_DIRECTORY \"[pwd]/../data-directory\"\n # INTERNAL_GDBFLAGS contains flags that the testsuite requires.\n global INTERNAL_GDBFLAGS\n if ![info exists INTERNAL_GDBFLAGS] {\n-    set INTERNAL_GDBFLAGS \"-nw -nx -data-directory $BUILD_DATA_DIRECTORY\"\n+    set INTERNAL_GDBFLAGS \\\n+\t[join [list \\\n+\t\t   \"-nw\" \\\n+\t\t   \"-nx\" \\\n+\t\t   \"-data-directory $BUILD_DATA_DIRECTORY\" \\\n+\t\t   {-iex \"set height 0\"} \\\n+\t\t   {-iex \"set width 0\"}]]\n }\n \n # The variable gdb_prompt is a regexp which matches the gdb prompt."
    }
  ]
}